[{"filePath":"/Users/navesarussi/KC/DEV/MVP/App.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedUser'. Either include it or remove the dependency array.","line":294,"column":6,"nodeType":"ArrayExpression","endLine":294,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, selectedUser.id]","fix":{"range":[13016,13034],"text":"[selectedUser, selectedUser.id]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'mode'. Either exclude it or remove the dependency array.","line":422,"column":9,"nodeType":"ArrayExpression","endLine":422,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [shouldShowToggle]","fix":{"range":[17464,17488],"text":"[shouldShowToggle]"}}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":80,"column":27,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":80,"endColumn":65,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":284,"column":47,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":284,"endColumn":85,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Root application entry point for iOS/Android/Web with web mode support.\n// - Reached from: App registry (Expo) bootstraps this component.\n// - Provides: React Navigation container with `MainNavigator`, global `UserProvider`, gesture and safe-area roots, StatusBar.\n// - Reads: AsyncStorage 'app_language' for i18n + RTL, Expo fonts, SplashScreen control, optional notificationService, WebBrowser auth completion.\n// - Listens: Push/in-app notification responses and deep links; when clicked, navigates to 'ChatDetailScreen' (with conversationId) or 'NotificationsScreen'.\n// - Downstream flow: App -> MainNavigator -> (LandingSiteScreen | LoginScreen | HomeStack/BottomNavigator) -> Tab stacks -> Screens.\n// - Side effects: Initializes i18n + RTL, loads fonts, hides splash, installs notification listener, holds a navigationRef for programmatic navigation.\n// - Route params: None (this is the top-level container).\n// - External deps/services: react-navigation, expo modules, i18n, UserContext, WebModeContext.\n//\n// IMPORTANT WEB MODE CHANGES:\n// - Container padding adjusts for web toggle button in app mode (48px top padding)\n// - WebModeToggleOverlay positioned absolutely above all content\n// - Navigation container key changes with mode to trigger proper re-renders\n\n// App.tsx\n\n// TODO: Add proper error handling for font loading failures with fallback fonts\n// TODO: Implement proper deep linking configuration and testing\n// TODO: Add crash reporting integration (Sentry, Bugsnag)\n// TODO: Remove magic numbers for padding (48px) - use constants file\n// TODO: Add proper accessibility support throughout the app\nimport React, { useCallback, useEffect, useRef, useMemo, memo } from 'react';\nimport { View, Text, ActivityIndicator, Platform, StyleSheet } from 'react-native';\nimport { NavigationContainer, NavigationContainerRef } from '@react-navigation/native';\nimport * as Font from 'expo-font';\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport * as SplashScreen from 'expo-splash-screen';\nimport * as WebBrowser from 'expo-web-browser';\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport i18n from './app/i18n';\nimport { useTranslation } from 'react-i18next';\nimport { I18nManager } from 'react-native';\n\nimport MainNavigator from './navigations/MainNavigator';\n// Ensure tslib default interop for certain vendor bundles\nimport './polyfills/tslib-default';\nimport colors from './globals/colors';\nimport { useWebMode } from './stores/webModeStore';\nimport { useAppLoading } from './stores/appLoadingStore';\nimport { useUser } from './stores/userStore';\nimport WebModeToggleOverlay from './components/WebModeToggleOverlay';\nimport DevEnvironmentBanner from './components/DevEnvironmentBanner';\nimport { FontSizes } from \"./globals/constants\";\nimport { logger } from './utils/loggerService';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport { saveNavigationState, loadNavigationState, clearNavigationState } from './utils/navigationPersistence';\nimport { NavigationState } from '@react-navigation/native';\nimport { navigationQueue } from './utils/navigationQueue';\nimport { RootStackParamList } from './globals/types';\nimport { linking } from './utils/linkingConfig';\n// RTL is controlled via selected language in i18n and Settings\n\n// Initialize notifications only on supported platforms\ntype NotificationService = {\n  setupNotificationResponseListener: (\n    callback: (response: {\n      notification: {\n        request: {\n          content: {\n            data?: {\n              type?: string;\n              conversationId?: string;\n            }\n          }\n        }\n      }\n    }) => void\n  ) => { remove?: () => void } | null;\n} | null;\n\nlet notificationService: NotificationService = null;\nif (Platform.OS !== 'web') {\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    notificationService = require('./utils/notificationService');\n  } catch (error) {\n    logger.warn('App', 'Failed to load notification service', { error });\n  }\n}\n\n// Complete auth session results as early as possible (important for Web OAuth flows)\ntry { WebBrowser.maybeCompleteAuthSession(); } catch { /* ignored */ }\n\nSplashScreen.preventAutoHideAsync();\n\n// Web mode store initializes automatically when created (synchronous)\n// No need for early initialization - it reads from localStorage on creation\n\nfunction AppContent() {\n  const { t } = useTranslation(['common']);\n  const { selectedUser } = useUser();\n\n  const navigationRef = useRef<NavigationContainerRef<RootStackParamList>>(null);\n  // Initialize with null - will be loaded before NavigationContainer renders\n  const [initialNavigationState, setInitialNavigationState] = React.useState<NavigationState | undefined>(undefined);\n  const [isNavigationStateLoaded, setIsNavigationStateLoaded] = React.useState(false);\n\n  // Use centralized loading state instead of local state\n  const {\n    state: { isAppReady },\n    setLoading,\n    setError,\n    markAppReady,\n    getCriticalError\n  } = useAppLoading();\n\n  // Initialize stores and load navigation state on mount\n  // This must happen before NavigationContainer is rendered\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    const initializeStoresAndLoadState = async () => {\n      try {\n        logger.info('App', 'Initializing Zustand stores and loading navigation state');\n\n        // Set timeout to prevent infinite white screen (10 seconds max)\n        timeoutId = setTimeout(() => {\n          logger.warn('App', 'Initialization timeout - forcing navigation state to load');\n          setIsNavigationStateLoaded(true);\n        }, 10000);\n\n        // Initialize web mode store (reads from localStorage synchronously on creation)\n        if (Platform.OS === 'web') {\n          try {\n            logger.info('App', 'Importing web mode store');\n            const { useWebModeStore } = await import('./stores/webModeStore');\n            logger.info('App', 'Web mode store imported, initializing');\n            useWebModeStore.getState().initialize();\n            logger.info('App', 'Web mode store initialized');\n\n            // Initialize version checker for web only (non-critical, can fail)\n            try {\n              logger.info('App', 'Importing version checker');\n              const { initVersionChecker } = await import('./utils/versionChecker');\n              initVersionChecker();\n              logger.info('App', 'Version checker initialized');\n            } catch (versionError) {\n              logger.warn('App', 'Version checker failed to initialize (non-critical)', { error: versionError });\n              // Continue - version checker is not critical for app functionality\n            }\n          } catch (webError) {\n            logger.error('App', 'Error initializing web mode store', { error: webError });\n            throw webError;\n          }\n        }\n\n        // Initialize user store\n        try {\n          logger.info('App', 'Importing user store');\n          const { useUserStore } = await import('./stores/userStore');\n          logger.info('App', 'User store imported, calling initialize');\n          await useUserStore.getState().initialize();\n          logger.info('App', 'User store initialized');\n        } catch (userStoreError) {\n          logger.error('App', 'Error initializing user store', { error: userStoreError });\n          throw userStoreError;\n        }\n\n        logger.info('App', 'Zustand stores initialized');\n\n        // Load navigation state after stores are ready\n        try {\n          const { useWebModeStore } = await import('./stores/webModeStore');\n          const { useUserStore } = await import('./stores/userStore');\n          const mode = useWebModeStore.getState().mode;\n          const userId = useUserStore.getState().selectedUser?.id || null;\n\n          logger.info('App', 'Loading navigation state', { mode, userId });\n          const savedState = await loadNavigationState(mode, userId);\n          if (savedState) {\n            setInitialNavigationState(savedState);\n            logger.info('App', 'Navigation state loaded successfully', {\n              mode,\n              hasUserId: !!userId,\n              routeNames: savedState.routes?.map((r: { name: string }) => r.name) || []\n            });\n          } else {\n            logger.info('App', 'No saved navigation state found', { mode, hasUserId: !!userId });\n          }\n        } catch (navError) {\n          logger.warn('App', 'Error loading navigation state, continuing anyway', { error: navError });\n        }\n\n        // Clear timeout if initialization completed successfully\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n          timeoutId = null;\n        }\n\n        setIsNavigationStateLoaded(true);\n      } catch (error) {\n        logger.error('App', 'Failed to initialize stores or load navigation state', {\n          error,\n          message: error instanceof Error ? error.message : 'Unknown error',\n          stack: error instanceof Error ? error.stack : undefined\n        });\n\n        // Clear timeout on error\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n          timeoutId = null;\n        }\n\n        setIsNavigationStateLoaded(true); // Continue even if loading fails\n      }\n    };\n\n    // Initialize immediately - no delay needed\n    initializeStoresAndLoadState();\n\n    // Cleanup timeout on unmount\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  logger.info('App', 'App component mounted');\n\n  // TODO: Move notification setup to dedicated notification service/hook\n  // TODO: Add proper error handling for notification permission failures\n  // TODO: Test notification handling on all platforms (iOS/Android/Web)\n  // Setup notification response listener (iOS + Android)\n  useEffect(() => {\n    if (!notificationService) return;\n\n    const subscription = notificationService.setupNotificationResponseListener((response) => {\n      try {\n        logger.info('App', 'Notification clicked', { response });\n        const data = response?.notification?.request?.content?.data || {};\n        const type = data?.type;\n        const conversationId = data?.conversationId;\n\n        if (navigationRef.current?.isReady()) {\n          // Use navigation queue for deep link navigation to ensure proper sequencing\n          if (type === 'message' && conversationId) {\n            // Navigate to ChatDetailScreen - note that it requires full params according to RootStackParamList\n            // For notifications, we'll need userName, userAvatar, and otherUserId\n            // For now, we'll navigate to NotificationsScreen if we don't have full params\n          }\n          navigationQueue.navigate('NotificationsScreen', undefined, 1).catch((error) => {\n            logger.warn('App', 'Failed to navigate to NotificationsScreen from notification', { error });\n          });\n        }\n      } catch (err) {\n        logger.warn('App', 'Failed to handle notification response', { error: err });\n      }\n    });\n\n    return () => {\n      if (subscription && typeof subscription.remove === 'function') {\n        subscription.remove();\n      }\n    };\n  }, []);\n\n  // Start global notification listener for the current user\n  useEffect(() => {\n    if (!selectedUser) return;\n\n    // Dynamically import to avoid circular dependencies if any, or just use the required module\n    // We can use the notificationService variable we already required at the top if it's available\n    // But startNotificationListener is a named export, so we might need to require it specifically or import it at top\n\n    // Since we are in App.tsx and it's already using require for notificationService, let's use that pattern or import at top.\n    // However, startNotificationListener is a new export. Let's add it to the require at the top or just import it if we can.\n    // The file uses `import` for other things, so let's add an import at the top.\n\n    // Actually, I'll add the import at the top in a separate edit, and here just use it.\n    // Wait, I can't add import at top easily with replace_file_content if I'm editing the middle.\n    // I will use `require` here to be safe and consistent with the conditional logic at the top of App.tsx\n\n    let cleanupListener: (() => void) | undefined;\n\n    if (Platform.OS !== 'web') {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-require-imports\n        const { startNotificationListener } = require('./utils/notificationService');\n        cleanupListener = startNotificationListener(selectedUser.id);\n      } catch (e) {\n        logger.warn('App', 'Failed to start notification listener', { error: e });\n      }\n    }\n\n    return () => {\n      if (cleanupListener) cleanupListener();\n    };\n  }, [selectedUser?.id]); // React to user changes\n\n\n  // Fast initial setup to show the UI as quickly as possible\n  useEffect(() => {\n    const showUiQuickly = async () => {\n      try {\n        logger.info('App', 'Performing fast initial setup');\n        markAppReady();\n        await SplashScreen.hideAsync();\n        logger.info('App', 'Splash screen hidden');\n      } catch (e) {\n        logger.error('App', 'Fast initial setup failed', { error: e });\n        setError('app', e instanceof Error ? e : new Error('Unknown error during fast setup'));\n      }\n    };\n\n    showUiQuickly();\n  }, [markAppReady, setError]);\n\n  // Load heavy resources in the background after the UI is visible\n  useEffect(() => {\n    const loadBackgroundResources = async () => {\n      logger.info('App', 'Starting background resource loading');\n\n      // Validate configuration after all modules are loaded\n      try {\n        const { validateConfig } = await import('./utils/dbConfig');\n        validateConfig();\n      } catch (e) {\n        logger.warn('App', 'Config validation failed', { error: e });\n      }\n\n      // Apply stored language\n      try {\n        setLoading('language', true);\n        const storedLang = await AsyncStorage.getItem('app_language');\n        const lang = storedLang === 'he' || storedLang === 'en' ? storedLang : null;\n        if (lang) {\n          await i18n.changeLanguage(lang);\n          const isRTL = lang === 'he';\n          if (I18nManager.isRTL !== isRTL) {\n            I18nManager.allowRTL(isRTL);\n            I18nManager.forceRTL(isRTL);\n          }\n        }\n      } catch (e) {\n        logger.warn('App', 'Language load failed, using defaults');\n        setError('language', e as Error);\n      } finally {\n        setLoading('language', false);\n      }\n\n      // Loading fonts\n      try {\n        setLoading('fonts', true);\n        await Font.loadAsync({\n          ...Ionicons.font,\n          ...MaterialIcons.font,\n        });\n        logger.info('App', 'Fonts loaded successfully');\n      } catch (fontError) {\n        logger.warn('App', 'Font loading failed, continuing without custom fonts');\n        setError('fonts', fontError as Error);\n      } finally {\n        setLoading('fonts', false);\n      }\n    };\n\n    if (isAppReady) {\n      loadBackgroundResources();\n    }\n  }, [isAppReady, setLoading, setError]);\n\n\n\n  // Check for critical errors\n  const criticalError = getCriticalError();\n  if (criticalError) {\n    return (\n      <View style={errorStyles.container}>\n        <Text style={errorStyles.errorText}>\n          Oops! There was an issue loading essential resources.\n        </Text>\n        <Text style={errorStyles.detailText}>\n          Please try restarting the app.\n        </Text>\n        {/* For debugging, you can re-enable this if needed */}\n        {(typeof __DEV__ !== 'undefined' && __DEV__) && <Text style={errorStyles.detailText}>Error: {criticalError.message}</Text>}\n      </View>\n    );\n  }\n\n  // Don't render NavigationContainer until navigation state is loaded\n  // This ensures initialState is set before first render\n  if (!isAppReady || !isNavigationStateLoaded) {\n    return (\n      <View style={loadingStyles.container}>\n        <ActivityIndicator size=\"large\" color={colors.info} />\n        <Text style={loadingStyles.loadingText}>{t('common:loading')}</Text>\n      </View>\n    );\n  }\n\n  const AppNavigationRoot = memo(({ initialState }: { initialState: NavigationState | undefined }) => {\n    const { mode } = useWebMode();\n    const { isAuthenticated, isGuestMode, selectedUser } = useUser();\n    const prevModeRef = useRef<string>(mode);\n    const prevUserIdRef = useRef<string | null>(selectedUser?.id || null);\n\n    /**\n     * Determine if web mode toggle button should be visible\n     * Toggle is hidden for authenticated users (users who created an account)\n     * Toggle is shown for guest users and non-authenticated users\n     */\n    const shouldShowToggle = useMemo(\n      () => !(isAuthenticated && !isGuestMode && selectedUser),\n      [isAuthenticated, isGuestMode, selectedUser]\n    );\n\n    /**\n     * Add top padding in app mode to make room for toggle button\n     * Only add padding if toggle button is visible (not for authenticated users)\n     * This prevents unnecessary spacing when the toggle is hidden\n     */\n    const containerStyle = useMemo(() => ({\n      flex: 1,\n      paddingTop: Platform.OS === 'web' && shouldShowToggle ? 64 : 0 // Space for top bar\n    }), [mode, shouldShowToggle]);\n\n    // Wrapper style for web - full width without maxWidth constraint\n    const webWrapperStyle = useMemo(() => Platform.OS === 'web' ? {\n      width: '100%' as const,\n      flex: 1,\n      backgroundColor: colors.backgroundSecondary,\n    } : {}, []);\n\n    // Navigation container key - only change when mode actually changes (not on auth state changes)\n    // This prevents unnecessary re-mounts when auth state updates\n    const navKey = useMemo(() => `nav-${mode}`, [mode]);\n\n    // Save navigation state before unmount (when mode or user changes)\n    useEffect(() => {\n      return () => {\n        // Cleanup: save state before unmount\n        if (navigationRef.current?.isReady()) {\n          const currentState = navigationRef.current.getRootState();\n          if (currentState) {\n            saveNavigationState(currentState, prevModeRef.current, prevUserIdRef.current);\n            logger.debug('App', 'Navigation state saved before unmount', {\n              mode: prevModeRef.current,\n              hasUserId: !!prevUserIdRef.current,\n            });\n          }\n        }\n      };\n    }, []);\n\n    // Save navigation state when it changes\n    const handleNavigationStateChange = useCallback(\n      (state: NavigationState | undefined) => {\n        if (state) {\n          const currentRoute = state.routes?.[state.index || 0];\n          const routeName = currentRoute?.name || 'unknown';\n          logger.debug('App', 'Navigation state changed, saving...', {\n            routeName,\n            mode,\n            hasUserId: !!selectedUser?.id,\n            routesCount: state.routes?.length || 0,\n          });\n          saveNavigationState(state, mode, selectedUser?.id || null);\n        }\n      },\n      [mode, selectedUser?.id]\n    );\n\n    // Initialize navigation queue with ref when container is ready\n    useEffect(() => {\n      if (navigationRef.current?.isReady()) {\n        navigationQueue.initialize(navigationRef.current);\n      }\n    }, []);\n\n    // Update refs when mode or userId changes\n    useEffect(() => {\n      const prevMode = prevModeRef.current;\n      const prevUserId = prevUserIdRef.current;\n\n      // If mode or userId changed, clear old navigation state\n      if (prevMode !== mode || prevUserId !== selectedUser?.id) {\n        if (prevMode && prevUserId !== undefined) {\n          // Clear old state asynchronously (don't block)\n          clearNavigationState(prevMode, prevUserId).catch((error) => {\n            logger.warn('App', 'Failed to clear old navigation state', { error });\n          });\n        }\n      }\n\n      prevModeRef.current = mode;\n      prevUserIdRef.current = selectedUser?.id || null;\n    }, [mode, selectedUser?.id]);\n\n    return (\n      <NavigationContainer<RootStackParamList>\n        key={navKey}\n        ref={(ref) => {\n          navigationRef.current = ref;\n          if (ref?.isReady()) {\n            navigationQueue.initialize(ref);\n          }\n        }}\n        onReady={() => {\n          if (navigationRef.current?.isReady()) {\n            navigationQueue.initialize(navigationRef.current);\n          }\n        }}\n        linking={linking}\n        initialState={initialState}\n        onStateChange={handleNavigationStateChange}\n      >\n        <View style={Platform.OS === 'web' ? { flex: 1, backgroundColor: colors.black } : { flex: 1 }}>\n          <View style={[containerStyle, webWrapperStyle]}>\n            <DevEnvironmentBanner />\n            <MainNavigator />\n            <WebModeToggleOverlay />\n            <StatusBar style=\"auto\" />\n          </View>\n        </View>\n      </NavigationContainer>\n    );\n  });\n  AppNavigationRoot.displayName = 'AppNavigationRoot';\n\n  return (\n    <AppNavigationRoot initialState={initialNavigationState} />\n  );\n}\n\n// Main App component (no providers needed with Zustand)\nexport default function App() {\n  return (\n    <ErrorBoundary\n      onError={(error, errorInfo) => {\n        logger.error('App', 'React component tree crashed', {\n          error: {\n            message: error.message,\n            stack: error.stack,\n            name: error.name\n          },\n          errorInfo: {\n            componentStack: errorInfo.componentStack\n          }\n        });\n      }}\n    >\n      <GestureHandlerRootView style={{ flex: 1 }}>\n        <SafeAreaProvider>\n          <AppContent />\n        </SafeAreaProvider>\n      </GestureHandlerRootView>\n    </ErrorBoundary>\n  );\n}\n\nconst loadingStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: colors.black,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n});\n\nconst errorStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: colors.errorLight,\n    padding: 20,\n  },\n  errorText: {\n    fontSize: FontSizes.large,\n    fontWeight: \"bold\",\n    color: colors.error,\n    textAlign: \"center\",\n    marginBottom: 10,\n  },\n  detailText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: \"center\",\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/explore.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/+not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/i18n.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":7,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n// Safe import for expo-localization to avoid native module crash on platforms/builds where it's not linked\nlet Localization: any;\ntry {\n   \n  Localization = require('expo-localization');\n} catch (error) {\n  Localization = null;\n}\nimport { I18nManager } from 'react-native';\n\n// Load unified resources per language\nimport he_all from '../locales/he.json';\nimport en_all from '../locales/en.json';\n\nconst resources = {\n  he: he_all as any,\n  en: en_all as any,\n};\n\nconst initialLang = 'he';\n\nif (I18nManager.isRTL !== (initialLang === 'he')) {\n  I18nManager.allowRTL(initialLang === 'he');\n  I18nManager.forceRTL(initialLang === 'he');\n}\n\ni18n\n  .use(initReactI18next)\n  .init({\n    resources,\n    lng: initialLang,\n    fallbackLng: 'en',\n    ns: ['common', 'home', 'profile', 'donations', 'notifications', 'auth', 'errors', 'buttons', 'labels', 'settings', 'comments', 'search', 'bookmarks', 'trump', 'chat', 'landing', 'quickMessage'],\n    defaultNS: 'common',\n    compatibilityJSON: 'v4',\n    interpolation: {\n      escapeValue: false,\n    },\n    returnEmptyString: false,\n  });\n\nexport default i18n;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/oauthredirect.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'router' and 'setSelectedUserWithMode'. Either include them or remove the dependency array.","line":138,"column":6,"nodeType":"ArrayExpression","endLine":138,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [router, setSelectedUserWithMode]","fix":{"range":[4874,4876],"text":"[router, setSelectedUserWithMode]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * OAuth Redirect Handler\n * This page handles the Google OAuth redirect and processes the token\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, ActivityIndicator, StyleSheet } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\n\n// Parse JWT token\nconst parseJWT = (token: string) => {\n  try {\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n        .join('')\n    );\n    return JSON.parse(jsonPayload);\n  } catch (error) {\n    console.error('Failed to parse JWT token:', error);\n    return null;\n  }\n};\n\nexport default function OAuthRedirect() {\n  const router = useRouter();\n  const { setSelectedUserWithMode } = useUser();\n  const [status, setStatus] = useState('processing');\n\n  useEffect(() => {\n    const processAuth = async () => {\n      try {\n        const hash = window.location.hash;\n        console.log('ğŸ” [OAuthRedirect] Hash:', hash);\n\n        if (!hash || !hash.includes('id_token=')) {\n          console.error('âŒ [OAuthRedirect] No id_token found');\n          setStatus('error');\n          setTimeout(() => router.replace('/'), 2000);\n          return;\n        }\n\n        const params = new URLSearchParams(hash.substring(1));\n        const idToken = params.get('id_token');\n\n        if (!idToken) {\n          throw new Error('No ID token');\n        }\n\n        console.log('âœ… [OAuthRedirect] Found token');\n        const profile = parseJWT(idToken);\n        console.log('ğŸ‘¤ [OAuthRedirect] Profile:', profile);\n\n        if (!profile) {\n          throw new Error('Failed to parse token');\n        }\n\n        // Send idToken to server to get UUID\n        const { API_BASE_URL } = await import('../utils/config.constants');\n        const response = await fetch(`${API_BASE_URL}/auth/google`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            idToken: idToken,\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to authenticate with server');\n        }\n\n        const serverResponse = await response.json();\n        if (!serverResponse.success || !serverResponse.user) {\n          throw new Error(serverResponse.error || 'Invalid response from server');\n        }\n\n        // Use UUID from server - this is the primary identifier\n        const serverUser = serverResponse.user;\n        const userData = {\n          id: serverUser.id, // UUID from database, not Google ID\n          name: serverUser.name || profile.name || profile.email?.split('@')[0] || 'User',\n          email: serverUser.email || profile.email || '',\n          avatar: serverUser.avatar || profile.picture || 'https://i.pravatar.cc/150?img=1',\n          phone: serverUser.phone || '+972500000000',\n          bio: serverUser.bio || '',\n          karmaPoints: serverUser.karmaPoints || 0,\n          joinDate: serverUser.createdAt || serverUser.joinDate || new Date().toISOString(),\n          isActive: serverUser.isActive !== false,\n          lastActive: serverUser.lastActive || new Date().toISOString(),\n          location: serverUser.location || { city: '×™×©×¨××œ', country: 'IL' },\n          interests: serverUser.interests || [],\n          roles: serverUser.roles || ['user'],\n          postsCount: serverUser.postsCount || 0,\n          followersCount: serverUser.followersCount || 0,\n          followingCount: serverUser.followingCount || 0,\n          notifications: [\n            { type: 'system', text: '×‘×¨×•×š ×”×‘× ×œ×§×¨××” ×§×•××™×•× ×™×˜×™!', date: new Date().toISOString() }\n          ],\n          settings: serverUser.settings || {\n            language: 'he',\n            darkMode: false,\n            notificationsEnabled: true\n          }\n        };\n\n        console.log('ğŸ’¾ [OAuthRedirect] Saving user with UUID:', userData.id);\n        await setSelectedUserWithMode(userData, 'real');\n        await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n        await AsyncStorage.setItem('auth_mode', 'real');\n        console.log('âœ… [OAuthRedirect] User saved!');\n\n        setStatus('success');\n\n        // Navigate to home\n        console.log('ğŸ  [OAuthRedirect] Navigating to home...');\n        setTimeout(() => {\n          router.replace('/(tabs)');\n        }, 1000);\n\n      } catch (error) {\n        console.error('âŒ [OAuthRedirect] Error:', error);\n        setStatus('error');\n        setTimeout(() => router.replace('/'), 2000);\n      }\n    };\n\n    if (typeof window !== 'undefined') {\n      processAuth();\n    }\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      {status === 'processing' && (\n        <>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n          <Text style={styles.text}>××¢×‘×“ ×”×ª×—×‘×¨×•×ª...</Text>\n        </>\n      )}\n      {status === 'success' && (\n        <Text style={styles.successText}>âœ… ×”×ª×—×‘×¨×•×ª ×”×¦×œ×™×—×”! ××¢×‘×™×¨...</Text>\n      )}\n      {status === 'error' && (\n        <Text style={styles.errorText}>âŒ ×©×’×™××” ×‘×”×ª×—×‘×¨×•×ª. ××¢×‘×™×¨ ×—×–×¨×”...</Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n  },\n  text: {\n    marginTop: 16,\n    fontSize: 16,\n    color: colors.textPrimary,\n  },\n  successText: {\n    fontSize: 18,\n    color: colors.success,\n    fontWeight: 'bold',\n  },\n  errorText: {\n    fontSize: 18,\n    color: colors.error,\n    fontWeight: 'bold',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/assets/images.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/DonationsScreen.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/DonationsScreen.tsx:364:21\n  362 |       {/* Stats Section */}\n  363 |       {(() => {\n> 364 |         const now = Date.now();\n      |                     ^^^^^^^^^^ Cannot call impure function\n  365 |         const weekAgo = now - 7 * 24 * 60 * 60 * 1000;\n  366 |         const weeklyDonations = donations.filter((d: any) => {\n  367 |           const t = new Date(d.createdAt || Date.now()).getTime();","line":364,"column":21,"nodeType":null,"endLine":364,"endColumn":31},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/DonationsScreen.tsx:367:45\n  365 |         const weekAgo = now - 7 * 24 * 60 * 60 * 1000;\n  366 |         const weeklyDonations = donations.filter((d: any) => {\n> 367 |           const t = new Date(d.createdAt || Date.now()).getTime();\n      |                                             ^^^^^^^^^^ Cannot call impure function\n  368 |           return t >= weekAgo;\n  369 |         }).length;\n  370 |         const activeDonors = new Set(donations.map((d: any) => d.createdBy).filter(Boolean)).size;","line":367,"column":45,"nodeType":null,"endLine":367,"endColumn":55}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Entry screen for the Donations tab, surfacing category shortcuts (Popular/For You/All) and quick actions.\n// - Reached from: `DonationsStack` -> initial route 'DonationsScreen'.\n// - Provides: Navigation to category screens, tracks category analytics, persists recent categories, shows footer stats.\n// - Reads from context: `useUser()` -> isGuestMode, isRealAuth for behaviour and analytics source.\n// - Storage/services: AsyncStorage for recents; `EnhancedStatsService` or legacy `restAdapter` for analytics, `USE_BACKEND` switch.\n// - Params: None required; navigation uses route names listed in `BASE_CATEGORIES` mapping.\n\n// TODO: CRITICAL - This file is extremely long (871 lines). Split into smaller components:\n//   - CategoryGrid component for category layout\n//   - CategoryCard component for individual categories  \n//   - RecentCategoriesSection component\n//   - PopularCategoriesSection component\n//   - CategoryAnalytics service for tracking\n// TODO: Remove hardcoded category data - move to configuration service\n// TODO: Add comprehensive error handling for all async operations\n// TODO: Implement proper loading states and skeleton screens\n// TODO: Add comprehensive TypeScript interfaces instead of basic types\n// TODO: Replace fake data with real backend integration\n// TODO: Add proper caching mechanism for categories and analytics\n// TODO: Implement proper accessibility for all interactive elements\n// TODO: Add comprehensive unit tests for all category logic\nimport { logger } from '../utils/loggerService';\n// Removed console.log statements - using proper logging service\nimport React, { useCallback } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  Alert,\n  Platform,\n  Dimensions,\n} from 'react-native';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useHeaderHeight } from '@react-navigation/elements';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { DonationsStackParamList } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport GuestModeNotice from '../components/GuestModeNotice';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport { useTranslation } from 'react-i18next';\nimport { getScreenInfo, isLandscape, responsiveSpacing, scaleSize } from '../globals/responsive';\nimport { createShadowStyle } from '../globals/styles';\nimport { restAdapter } from '../utils/restAdapter';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\n// Placeholder datasets (purged demo) â€“ replace with real API data\nconst donations: any[] = [];\nconst charities: any[] = [];\n\ninterface DonationsScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n}\n\nconst ANALYTICS_USER_ID = 'global';\nconst ANALYTICS_COLLECTION = 'analytics';\nconst ANALYTICS_ITEM_PREFIX = 'category:';\n\n// TODO: URGENT - Move this hardcoded configuration to proper data service\n// TODO: Implement proper category management system with backend sync\n// TODO: Add internationalization for category names and descriptions\n// TODO: Create proper category icon management system\n// TODO: Add category access control and permissions\nconst BASE_CATEGORIES = [\n  { id: 'money',      icon: 'card-outline',        color: colors.success, bgColor: colors.successLight, screen: 'MoneyScreen' },\n  { id: 'trump',      icon: 'car-outline',         color: colors.primary,    bgColor: colors.infoLight,    screen: 'TrumpScreen' },\n  { id: 'knowledge',  icon: 'school-outline',      color: colors.warning, bgColor: colors.warning, screen: 'KnowledgeScreen' },\n  { id: 'challenges', icon: 'trophy-outline',      color: colors.warning, bgColor: colors.warning, screen: 'MyChallengesScreen' },\n  { id: 'time',       icon: 'time-outline',        color: colors.secondary,  bgColor: colors.pinkLight, screen: 'TimeScreen' },\n  { id: 'food',       icon: 'restaurant-outline',  color: colors.success, bgColor: colors.successLight, screen: 'FoodScreen' },\n  { id: 'clothes',    icon: 'shirt-outline',       color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'ClothesScreen' },\n  { id: 'books',      icon: 'library-outline',     color: colors.primary, bgColor: colors.infoLight, screen: 'BooksScreen' },\n  { id: 'items',      icon: 'cube-outline',        color: colors.secondary, bgColor: colors.pinkLight, screen: 'ItemsScreen' },\n  { id: 'furniture',  icon: 'bed-outline',         color: colors.secondary, bgColor: colors.pinkLight, screen: 'FurnitureScreen' },\n  { id: 'medical',    icon: 'medical-outline',     color: colors.error,   bgColor: colors.errorLight,   screen: 'MedicalScreen' },\n  { id: 'animals',    icon: 'paw-outline',         color: colors.success, bgColor: colors.successLight, screen: 'AnimalsScreen' },\n  { id: 'housing',    icon: 'home-outline',        color: colors.primary,    bgColor: colors.infoLight,    screen: 'HousingScreen' },\n  { id: 'support',    icon: 'heart-outline',       color: colors.secondary, bgColor: colors.pinkLight,   screen: 'SupportScreen' },\n  { id: 'education',  icon: 'book-outline',        color: colors.primary,    bgColor: colors.infoLight,    screen: 'EducationScreen' },\n  { id: 'environment',icon: 'leaf-outline',        color: colors.success, bgColor: colors.successLight, screen: 'EnvironmentScreen' },\n  { id: 'technology', icon: 'laptop-outline',      color: colors.primary,    bgColor: colors.infoLight,    screen: 'TechnologyScreen' },\n  { id: 'music',      icon: 'musical-notes-outline', color: colors.secondary,  bgColor: colors.pinkLight,    screen: 'MusicScreen' },\n  { id: 'games',      icon: 'game-controller-outline', color: colors.primary, bgColor: colors.infoLight, screen: 'GamesScreen' },\n  { id: 'riddles',    icon: 'help-circle-outline', color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'RiddlesScreen' },\n  { id: 'recipes',    icon: 'fast-food-outline',   color: colors.success, bgColor: colors.successLight, screen: 'RecipesScreen' },\n  { id: 'plants',     icon: 'flower-outline',      color: colors.success, bgColor: colors.successLight, screen: 'PlantsScreen' },\n  { id: 'waste',      icon: 'trash-outline',       color: colors.warning, bgColor: colors.warning, screen: 'WasteScreen' },\n  { id: 'art',        icon: 'color-palette-outline', color: colors.secondary,  bgColor: colors.pinkLight,    screen: 'ArtScreen' },\n  { id: 'sports',     icon: 'football-outline',    color: colors.primary,  bgColor: colors.infoLight,  screen: 'SportsScreen' },\n  { id: 'dreams',     icon: 'star-outline',        color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'DreamsScreen' },\n  { id: 'fertility',  icon: 'medkit-outline',      color: colors.error,   bgColor: colors.errorLight,   screen: 'FertilityScreen' },\n  { id: 'jobs',       icon: 'briefcase-outline',   color: colors.primary,    bgColor: colors.infoLight,    screen: 'JobsScreen' },\n  { id: 'matchmaking', icon: 'people-outline',     color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'MatchmakingScreen' },\n  { id: 'mentalHealth', icon: 'pulse-outline',     color: colors.secondary,  bgColor: colors.pinkLight,  screen: 'MentalHealthScreen' },\n  { id: 'goldenAge',   icon: 'person-outline',     color: colors.warning, bgColor: colors.warning, screen: 'GoldenAgeScreen' },\n  { id: 'languages',   icon: 'language-outline',   color: colors.primary,    bgColor: colors.infoLight,    screen: 'LanguagesScreen' },\n] as const;\n\ntype CategoryId = typeof BASE_CATEGORIES[number]['id'];\n\nconst { height: SCREEN_HEIGHT, width: SCREEN_WIDTH } = Dimensions.get('window');\n\nconst DonationsScreen: React.FC<DonationsScreenProps> = ({ navigation }) => {\n  // TODO: Extract state management to custom hooks (useDonationsState, useCategoryAnalytics)\n  // TODO: Implement proper state validation and error boundaries\n  // TODO: Add comprehensive performance optimization with React.memo and useMemo\n  // TODO: Remove Hebrew comment - implement proper internationalization\n  const tabBarHeight = useBottomTabBarHeight();\n  const headerHeight = useHeaderHeight();\n  const insets = useSafeAreaInsets();\n  const { isGuestMode, isRealAuth } = useUser();\n  const { t } = useTranslation(['donations','common']);\n\n  // ×—×™×©×•×‘ ××™×“×•×ª responsive ×œ×›×¨×˜×™×¡×™×\n  const { isTablet: isTabletScreen, isDesktop: isDesktopScreen } = getScreenInfo();\n  const landscapeMode = isLandscape();\n  \n  // Simplified responsive sizing for mobile web\n  const availableHeight = SCREEN_HEIGHT - (insets?.top ?? 0) - (insets?.bottom ?? 0) - (tabBarHeight ?? 0) - (headerHeight ?? 0);\n  const isMobileWebView = Platform.OS === 'web' && SCREEN_WIDTH <= 768;\n  const isCompact = availableHeight < 600;\n\n  useFocusEffect(\n    useCallback(() => {\n      // Analytics tracking if needed\n      logger.info('DonationsScreen', 'Screen focused');\n    }, [])\n  );\n\n  const getCategoryText = (id: CategoryId) => ({\n    title: t(`donations:categories.${id}.title`),\n    subtitle: t(`donations:categories.${id}.subtitle`),\n    description: t(`donations:categories.${id}.description`),\n  });\n\n  const incrementCategoryCounter = async (categoryId: string) => {\n    try {\n      if (USE_BACKEND && isRealAuth) {\n        // Use enhanced stats service with user tracking\n        await EnhancedStatsService.trackCategoryView(categoryId);\n      } else {\n        // Fallback to legacy analytics\n        const itemId = `${ANALYTICS_ITEM_PREFIX}${categoryId}`;\n        const existing = await restAdapter.read<any>(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId).catch(() => null);\n        const next = { id: itemId, categoryId, count: Number(existing?.count ?? 0) + 1, updatedAt: new Date().toISOString() };\n        if (!existing) {\n          await restAdapter.create(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId, next);\n        } else {\n          await restAdapter.update(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId, next);\n        }\n      }\n    } catch (e) {\n      logger.warn('DonationsScreen', 'Failed to track category view', { error: e });\n    }\n  };\n\n  const handleCategoryPress = (category: { id: CategoryId; screen?: string }) => {\n    // Fire-and-forget analytics increment  \n    incrementCategoryCounter(category.id).catch(() => {});\n    \n    logger.info('DonationsScreen', 'Category pressed', {\n      id: category.id,\n      title: getCategoryText(category.id).title,\n      screen: category.screen\n    });\n\n    if (category.screen) {\n      (navigation as any).navigate(category.screen);\n    } else {\n      Alert.alert(\n        t('donations:comingSoonTitle'),\n        t('donations:comingSoonMessage'),\n        [{ text: t('common:confirm'), style: 'default' }]\n      );\n    }\n  };\n\n  // ×§×‘×™×¢×ª ×”×§×˜×’×•×¨×™×•×ª ×œ×¡×¢×™×£ ×”×¨××©×•×Ÿ - 4 ×§×˜×’×•×¨×™×•×ª ××•×¢×“×¤×•×ª\n  const primaryCategoryIds: CategoryId[] = ['money', 'items', 'trump', 'knowledge'];\n  const primaryCategories = primaryCategoryIds\n    .map((id) => BASE_CATEGORIES.find((c) => c.id === id))\n    .filter((c): c is typeof BASE_CATEGORIES[number] => Boolean(c));\n\n  // ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”××—×¨×•×ª ×œ×¡×¢×™×£ ×”×©× ×™\n  const otherCategories = BASE_CATEGORIES.filter(\n    (c) => !primaryCategoryIds.includes(c.id as CategoryId)\n  );\n  \n  logger.info('DonationsScreen', 'Categories organized', {\n    primary: primaryCategories.map((c) => c.id),\n    other: otherCategories.length,\n  });\n\n  // ×—×™×©×•×‘ ××™×“×•×ª responsive ×œ×›×¨×˜×™×¡×™×\n  const cardPadding = responsiveSpacing(12, 16, 20);\n  const iconSize = responsiveSpacing(48, 56, 64);\n  const iconInnerSize = responsiveSpacing(32, 40, 48);\n  const cardGap = responsiveSpacing(12, 16, 24);\n  const sectionPadding = responsiveSpacing(20, 28, 36);\n  // ×¨×™×•×•×— responsive ×œ×¡×¢×™×£ ×”×©× ×™ - ×’×“×œ ×¢× ×”××¡×š\n  const otherCategoriesGap = responsiveSpacing(12, 20, 28);\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.backgroundSecondary} />\n      {isGuestMode && <GuestModeNotice showLoginButton={false} />}\n      \n      <ScrollContainer style={styles.scrollContainer} contentStyle={styles.scrollContent}>\n        {/* ×¡×¢×™×£ ×¨××©×•×Ÿ - 4 ×§×˜×’×•×¨×™×•×ª ××•×¢×“×¤×•×ª */}\n        <View style={[styles.modernSection, { padding: sectionPadding }]}>\n          <View style={[styles.modernGrid, { gap: cardGap }]}>\n            {primaryCategories.map((category) => {\n              const { title, subtitle } = getCategoryText(category.id);\n              // ×—×™×©×•×‘ ×¨×•×—×‘ responsive ×œ×›×¨×˜×™×¡\n              const cardWidth = Platform.OS === 'web'\n                ? isDesktopScreen\n                  ? '22%'\n                  : isTabletScreen\n                    ? '30%'\n                    : '45%'\n                : isTabletScreen || landscapeMode\n                  ? '30%'\n                  : '45%';\n              return (\n                <TouchableOpacity\n                  key={`primary-${category.id}`}\n                  style={[\n                    styles.modernCard,\n                    { \n                      gap: cardGap,\n                      width: cardWidth,\n                      minWidth: cardWidth,\n                      maxWidth: cardWidth,\n                      backgroundColor: colors.infoLight, // ×¨×§×¢ ××—×™×“ ×›××• ×”×˜×¨××¤×™×\n                    },\n                  ]}\n                  onPress={() => handleCategoryPress(category)}\n                  activeOpacity={0.8}\n                >\n                  <View\n                    style={[\n                      styles.modernIconContainer,\n                      {\n                        width: iconSize,\n                        height: iconSize,\n                        backgroundColor: category.color + '15', // 15% opacity\n                      },\n                    ]}\n                  >\n                    <View\n                      style={[\n                        styles.modernIcon,\n                        {\n                          width: iconInnerSize,\n                          height: iconInnerSize,\n                          backgroundColor: category.color,\n                        },\n                      ]}\n                    >\n                      <Ionicons \n                        name={category.icon as any} \n                        size={iconInnerSize * 0.6} \n                        color=\"white\" \n                      />\n                    </View>\n                  </View>\n                  <View style={styles.modernCardContent}>\n                    <Text style={styles.modernCardTitle} numberOfLines={1}>\n                      {title}\n                    </Text>\n                    <Text style={styles.modernCardSubtitle} numberOfLines={2}>\n                      {subtitle}\n                    </Text>\n                  </View>\n                </TouchableOpacity>\n              );\n            })}\n          </View>\n        </View>\n\n        {/* ×¡×¢×™×£ ×©× ×™ - ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”× ×•×¡×¤×•×ª */}\n        <View style={[styles.modernSection, { padding: sectionPadding }]}>\n          <Text style={styles.modernSectionTitle}>\n            ××¡×›×™× ×‘×‘× ×™×”, ×›×¨×’×¢ ××›×™×œ×™× ×§×™×©×•×¨×™× ×¨×œ×•×•× ×˜×™×\n          </Text>\n          <View style={[styles.modernOtherGrid, { gap: otherCategoriesGap }]}>\n            {otherCategories.map((category) => {\n              const { title, subtitle } = getCategoryText(category.id as CategoryId);\n              // ×—×™×©×•×‘ ×¨×•×—×‘ responsive ×œ×›×¨×˜×™×¡ ×§×˜×Ÿ - 3 ×‘×©×•×¨×”\n              const smallCardWidth = \"25%\";\n              return (\n                <TouchableOpacity\n                  key={`other-${category.id}`}\n                  style={[\n                    styles.modernSmallCard,\n                    {\n                      width: smallCardWidth,\n                      minWidth: smallCardWidth,\n                      maxWidth: smallCardWidth,\n                      backgroundColor: colors.infoLight, // ×¨×§×¢ ××—×™×“ ×›××• ×”×˜×¨××¤×™×\n                      paddingVertical: responsiveSpacing(12, 14, 16),\n                      paddingHorizontal: responsiveSpacing(8, 10, 12),\n                    },\n                  ]}\n                  onPress={() => handleCategoryPress(category as any)}\n                  activeOpacity={0.8}\n                >\n                  <View\n                    style={[\n                      styles.modernSmallIcon,\n                      {\n                        backgroundColor: category.color,\n                        width: iconInnerSize * 0.7,\n                        height: iconInnerSize * 0.7,\n                        marginBottom: responsiveSpacing(6, 8, 10),\n                        ...createShadowStyle(category.color, { width: 0, height: 2 }, 0.25, 6),\n                      },\n                    ]}\n                  >\n                    <Ionicons \n                      name={category.icon as any} \n                      size={iconInnerSize * 0.4} \n                      color=\"white\" \n                    />\n                  </View>\n                  <Text \n                    style={[\n                      styles.modernSmallCardTitle,\n                      { \n                        color: category.color,\n                        marginBottom: responsiveSpacing(2, 3, 4),\n                      }\n                    ]} \n                    numberOfLines={1}\n                  >\n                    {title}\n                  </Text>\n                  <Text \n                    style={[\n                      styles.modernSmallCardSubtitle,\n                      { color: category.color + 'AA' }\n                    ]} \n                    numberOfLines={1}\n                  >\n                    {subtitle}\n                  </Text>\n                </TouchableOpacity>\n              );\n            })}\n          </View>\n        </View>\n\n      {/* Stats Section */}\n      {(() => {\n        const now = Date.now();\n        const weekAgo = now - 7 * 24 * 60 * 60 * 1000;\n        const weeklyDonations = donations.filter((d: any) => {\n          const t = new Date(d.createdAt || Date.now()).getTime();\n          return t >= weekAgo;\n        }).length;\n        const activeDonors = new Set(donations.map((d: any) => d.createdBy).filter(Boolean)).size;\n        const activeCharities = charities.length;\n        return (\n            <DonationStatsFooter\n              compact={isCompact}\n              stats={[\n                { label: t('donations:activeDonors'), value: activeDonors, icon: 'people-outline' },\n                { label: t('donations:weeklyDonations'), value: weeklyDonations, icon: 'heart-outline' },\n                { label: t('donations:activeCharities'), value: activeCharities, icon: 'business-outline' },\n              ]}\n            />\n        );\n      })()}\n      </ScrollContainer>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary, // ×¢×•×“×›×Ÿ ×œ×›×—×•×œ ×‘×”×™×¨\n  },\n  scrollContainer: {\n    backgroundColor: colors.backgroundTertiary, // ×¢×•×“×›×Ÿ ×œ×›×—×•×œ ×‘×”×™×¨\n    flex: 1,\n  },\n  scrollContent: {\n    paddingBottom: 20,\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && { \n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  header: {\n    backgroundColor: colors.background,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderBottomRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: scaleSize(45),\n    height: scaleSize(45),\n    borderRadius: scaleSize(45) / 2,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  welcomeText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  userName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  settingsButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL + LAYOUT_CONSTANTS.SPACING.MD,\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.XL * 6,\n  },\n  quickActionsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    alignItems: 'center',\n\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: '800', // ×¤×•× ×˜ ×¢×‘×” ×™×•×ª×¨\n    color: colors.secondary, // ×¦×‘×¢ ×•×¨×•×“ ××”×œ×•×’×• ×”×—×“×©\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center', // ××¨×›×•×– ×”×›×•×ª×¨×ª\n  },\n  quickActionsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  quickActionButton: {\n    flex: 1,\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  quickActionText: {\n    color: colors.white,\n    fontSize: FontSizes.button,\n    fontWeight: '600',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoriesSection: {\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™ ×œ×§×˜×’×•×¨×™×•×ª\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE, // ×¢×™×’×•×œ ×’×“×•×œ ×™×•×ª×¨\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less margin on web\n    marginHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less margin on web\n    alignItems: 'center',\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.MD : LAYOUT_CONSTANTS.SPACING.LG, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    ...createShadowStyle(colors.secondary, { width: 0, height: 4 }, 0.15, 8), // ×¦×œ ×¦×‘×¢×•× ×™\n  },\n  categoriesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  horizontalScrollContainer: {\n    height: Math.max(120, scaleSize(140)), // ×’×•×‘×” ×§×‘×•×¢\n    width: '100%',\n  },\n  horizontalScrollView: {\n    flex: 1,\n    height: '100%',\n    ...(Platform.OS === 'web' && {\n      overflowX: 'auto' as any,\n      overflowY: 'hidden' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n    }),\n  } as any,\n  horizontalScrollContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    height: '100%',\n  },\n  horizontalList: {\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    flexDirection: 'row',\n    ...(Platform.OS === 'web' && {\n      display: 'flex' as any,\n      flexWrap: 'nowrap' as any,\n    }),\n  },\n  othersSection: {\n    alignSelf: 'stretch',\n    width: '100%',\n  },\n  verticalScrollNative: {\n    alignSelf: 'stretch',\n    width: '100%',\n  },\n  verticalScrollContent: {\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  verticalScrollWeb: {\n    width: '100%',\n  },\n  activeCategoriesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryCard: {\n    width: '31.5%',\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less padding on web\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM, // ×¢×™×’×•×œ ×™×•×ª×¨ ××¢×•×’×œ\n    alignItems: 'center',\n    ...createShadowStyle(colors.secondary, { width: 0, height: 2 }, 0.12, 4), // ×¦×œ ×¦×‘×¢×•× ×™\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ ×™×•×ª×¨\n  },\n  categoryCardHorizontal: {\n    width: Platform.OS === 'web' ? scaleSize(120) : scaleSize(140), // Smaller on web\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less padding on web\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM, // ×¢×™×’×•×œ ×™×•×ª×¨ ××¢×•×’×œ\n    alignItems: 'center',\n    ...createShadowStyle(colors.secondary, { width: 0, height: 2 }, 0.12, 4), // ×¦×œ ×¦×‘×¢×•× ×™\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ ×™×•×ª×¨\n    marginRight: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  activeCategoryCard: {\n    width: '45%',\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.15, 6),\n    minHeight: scaleSize(140),\n    backgroundColor: colors.categoryCardBackground,\n    borderWidth: 1,\n    borderColor: colors.categoryBorder,\n  },\n  categoryCardSelected: {\n    borderWidth: 2,\n    borderColor: colors.categoryIconBackground,\n  },\n  categoryIcon: {\n    width: scaleSize(35),\n    height: scaleSize(35),\n    borderRadius: scaleSize(35) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM, // ××¨×•×•×— ×’×“×•×œ ×™×•×ª×¨ ××ª×—×ª ×œ××™×§×•×Ÿ\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.3, 4), // ×¦×œ ×œ××™×§×•×Ÿ\n  },\n  categoryIconWrapper: {\n    position: 'relative',\n  },\n  pinOverlay: {\n    position: 'absolute',\n    top: -scaleSize(6),\n    right: -scaleSize(6),\n  },\n  activeCategoryIcon: {\n    width: scaleSize(45),\n    height: scaleSize(45),\n    borderRadius: scaleSize(45) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700', // ×¤×•× ×˜ ×¢×‘×” ×™×•×ª×¨\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS, // ××¨×•×•×— ×§×˜×Ÿ ××¢×œ ×”×›×•×ª×¨×ª\n  },\n  categoryTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 0,\n  },\n  categorySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  categoryDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.small * 1.2),\n  },\n  activeCategoryTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n    textAlign: 'center',\n  },\n  activeCategorySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: 'center',\n  },\n  activeCategoryDescription: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.caption * 1.4),\n  },\n  statsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.1, 8),\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.secondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  \n  // Modern Design Styles\n  modernSection: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.08, 12),\n  },\n  modernGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.MD, // gap ××•×’×“×¨ inline ×‘-component\n  },\n  modernCard: {\n    // backgroundColor ××•×’×“×¨ ×‘××•×¤×Ÿ ×“×™× ××™ ×‘×§×•××¤×•× × ×˜×” ×œ×¤×™ category.bgColor\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: colors.border,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.1, 8),\n  },\n  modernIconContainer: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modernIcon: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.2, 6),\n  },\n  modernCardContent: {\n    alignItems: 'center',\n    width: '100%',\n  },\n  modernCardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modernCardSubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: FontSizes.body,\n  },\n  modernSectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modernOtherGrid: {\n    \n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center', // ×™×™×©×•×¨ ×œ×××¦×¢\n    alignItems: 'flex-start',\n  },\n  modernSmallCard: {\n    // backgroundColor ××•×’×“×¨ ×‘××•×¤×Ÿ ×“×™× ××™ ×‘×§×•××¤×•× × ×˜×” ×œ×¤×™ category.bgColor\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    borderWidth: 1.5,\n    borderColor: colors.border,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.1, 10),\n  },\n  modernSmallIconContainer: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    justifyContent: 'center',\n    alignItems: 'center',\n    // marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modernSmallIcon: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modernSmallCardTitle: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    width: '100%',\n  },\n  modernSmallCardSubtitle: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    width: '100%',\n  },\n\n});\n\nexport default DonationsScreen;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/HomeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/HomeScreenOld.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'delay', 'opacity', 'scale', and 'translateY'. Either include them or remove the dependency array.","line":129,"column":6,"nodeType":"ArrayExpression","endLine":129,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [delay, opacity, scale, translateY]","fix":{"range":[5088,5090],"text":"[delay, opacity, scale, translateY]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'panelHeight' and 'postsTranslateY'. Either include them or remove the dependency array.","line":281,"column":8,"nodeType":"ArrayExpression","endLine":281,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [panelHeight, postsTranslateY]","fix":{"range":[10615,10617],"text":"[panelHeight, postsTranslateY]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 't'. Either include it or remove the dependency array.","line":372,"column":6,"nodeType":"ArrayExpression","endLine":372,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [t]","fix":{"range":[13828,13830],"text":"[t]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Main Home screen showing animated bubbles and a draggable panel that reveals the posts feed (`PostsReelsScreen`).\n// - Reached from: `HomeTabStack` -> route 'HomeMain' (initial route of the Home tab).\n// - Provides: State and gestures to toggle between Home content and Posts feed; updates route params `{ hideTopBar, showPosts }` to control top bar in `TopBarNavigator`.\n// - Reads from context: `useUser()` -> selectedUser, isGuestMode, isRealAuth, resetHomeScreenTrigger.\n// - Input params: None required; uses navigation params set locally.\n// - External deps/services: `EnhancedStatsService` for stats, `FloatingBubblesOverlay`, `PostsReelsScreen`.\n\n// TODO: CRITICAL - This file is too long (893+ lines). Split into smaller components:\n//   - Extract FloatingBubble to separate component\n//   - Extract StatCard to separate component  \n//   - Extract panel gesture logic to custom hook\n//   - Create HomeAnimations utility for all animation logic\n// TODO: Remove unused imports - many imports are not being used\n// TODO: Replace magic numbers with named constants (PANEL_HEIGHT, positions, etc)\n// TODO: Implement proper TypeScript interfaces for all props and state\n// TODO: Add comprehensive error handling for stats fetching\n// TODO: Optimize re-renders - too many useEffect hooks causing performance issues\n// TODO: Remove fake data imports - replace with real API calls\n// TODO: Add proper loading states for all async operations\n// TODO: Implement proper accessibility for drag gestures and animations\n// TODO: Add unit tests for complex gesture and animation logic\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { \n  View, \n  StyleSheet, \n  Dimensions, \n  Text, \n  TouchableOpacity, \n\n  Image,\n  Alert,\n  SafeAreaView,\n  StatusBar,\n  Platform,\n  NativeSyntheticEvent,\n  NativeScrollEvent,\n  ViewStyle,\n} from \"react-native\";\nimport { Gesture, GestureDetector } from \"react-native-gesture-handler\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withRepeat,\n  withTiming,\n  withDelay,\n  interpolate,\n  Extrapolation,\n  runOnJS,\n  Easing,\n} from \"react-native-reanimated\";\nimport { useFocusEffect, useIsFocused, useNavigation } from \"@react-navigation/native\";\nimport { useBottomTabBarHeight } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../globals/colors\";\nimport { FontSizes, LAYOUT_CONSTANTS } from \"../globals/constants\";\nimport { useTranslation } from 'react-i18next';\nimport CommunityStatsPanel from \"../components/CommunityStatsPanel\";\nimport PostsReelsScreen from \"../components/PostsReelsScreen\";\nimport { useUser } from \"../stores/userStore\";\nimport { shouldAutoOpenAboutScreen, markAboutScreenSeen } from \"../utils/profileUtils\";\nimport GuestModeNotice from \"../components/GuestModeNotice\";\nimport CommunityStatsGrid from \"../components/CommunityStatsGrid\";\nimport StatDetailsModal, { StatDetails } from \"../components/StatDetailsModal\";\nimport { createShadowStyle } from \"../globals/styles\";\nimport { scaleSize } from \"../globals/responsive\";\nimport { EnhancedStatsService, formatShortNumber } from \"../utils/statsService\";\nimport FloatingBubblesOverlay from \"../components/FloatingBubblesOverlay\";\n// FloatingBubblesSkia imported dynamically to avoid Web bundle issues\nconst { height: SCREEN_HEIGHT } = Dimensions.get(\"window\");\n\n// Panel layout dimensions derived responsively with web optimizations\n// TODO: Move these constants to a dedicated constants file\n// TODO: Add proper responsive calculations based on device type\n// TODO: Test panel positions on different screen sizes and orientations\nconst PANEL_HEIGHT = Platform.OS === 'web' ? SCREEN_HEIGHT - scaleSize(20) : SCREEN_HEIGHT - scaleSize(50);\nconst CLOSED_POSITION = PANEL_HEIGHT - scaleSize(60);\nconst OPEN_POSITION = 0;\nconst MID_POSITION = PANEL_HEIGHT / 2;\n\n/**\n * Small animated bubble that gently floats to display a stat item.\n * Styles use global scaling and shadow helpers for cross-platform consistency.\n */\ninterface FloatingBubbleProps {\n  icon: string;\n  value: string;\n  label: string;\n  bubbleStyle: ViewStyle | ViewStyle[];\n  delay: number;\n}\n\nconst FloatingBubble: React.FC<FloatingBubbleProps> = ({ icon, value, label, bubbleStyle, delay }) => {\n  const translateY = useSharedValue(0);\n  const scale = useSharedValue(1);\n  const opacity = useSharedValue(0.8);\n\n  useEffect(() => {\n    // Floating up and down animation\n    translateY.value = withDelay(\n      delay,\n      withRepeat(\n        withTiming(-10, { duration: 2000, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n\n    // Scale animation\n    scale.value = withDelay(\n      delay + 500,\n      withRepeat(\n        withTiming(1.05, { duration: 3000, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n\n    // Opacity animation\n    opacity.value = withDelay(\n      delay + 1000,\n      withRepeat(\n        withTiming(1, { duration: 2500, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n  }, []);\n\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [\n        { translateY: translateY.value },\n        { scale: scale.value }\n      ] as any,\n      opacity: opacity.value,\n    };\n  });\n\n  return (\n    <Animated.View style={[styles.floatingBubble, bubbleStyle, animatedStyle]}>\n      <Text style={styles.bubbleIcon}>{icon}</Text>\n      <Text style={styles.bubbleValue}>{value}</Text>\n      <Text style={styles.bubbleLabel}>{label}</Text>\n    </Animated.View>\n  );\n};\n\nexport default function HomeScreen() {\n  // TODO: Extract all hook logic to custom hooks (useHomeScreenState, useHomeScreenAnimations)\n  // TODO: Implement proper state management with useReducer instead of multiple useState\n  // TODO: Add proper TypeScript interfaces for navigation and route params\n  // TODO: Memoize expensive calculations and objects\n  const tabBarHeight = useBottomTabBarHeight();\n  const isFocused = useIsFocused();\n  const navigation = useNavigation();\n  const { selectedUser, setSelectedUser, isGuestMode, resetHomeScreenTrigger, isRealAuth, isAuthenticated } = useUser();\n  const [showPosts, setShowPosts] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [selectedStat, setSelectedStat] = useState<StatDetails | null>(null);\n  const [isStatModalVisible, setIsStatModalVisible] = useState(false);\n  const [NativeBubblesComponent, setNativeBubblesComponent] = useState<React.ComponentType | null>(null);\n  const hasCheckedAboutAutoOpen = useRef(false);\n  \n  // Dynamically load FloatingBubblesSkia only on Native platforms to avoid Web bundle issues\n  useEffect(() => {\n    if (Platform.OS !== 'web') {\n      import('../components/FloatingBubblesSkia')\n        .then((module) => {\n          setNativeBubblesComponent(() => module.default);\n        })\n        .catch((error) => {\n          console.error('Failed to load FloatingBubblesSkia:', error);\n        });\n    }\n  }, []);\n  \n  // No logical difference between guest/user modes other than the header banner\n  useEffect(() => {\n    if (isGuestMode) {\n      console.log('ğŸ  HomeScreen - Guest mode active (header banner only)');\n    }\n  }, [isGuestMode]);\n  const [hideTopBar, setHideTopBar] = useState(false); // Top bar hiding state\n\n  // Animated values for scrolling\n  const scrollY = useSharedValue(0);\n  const postsTranslateY = useSharedValue(0);\n  const panelHeight = useSharedValue(0);\n  const panelStartHeight = useSharedValue(0);\n  const HALF_THRESHOLD = SCREEN_HEIGHT * 0.5;\n\n  /**\n   * Auto-open About screen for new users with incomplete profiles\n   * \n   * This effect checks if the About screen should be automatically opened when:\n   * - User is authenticated (not guest mode)\n   * - User profile is incomplete (missing avatar, full name, or address)\n   * - User hasn't seen the About screen yet\n   * \n   * Once the profile is completed, the auto-open is permanently disabled for that user.\n   * The check only runs once per session to avoid multiple opens.\n   */\n  useEffect(() => {\n    const checkAndOpenAbout = async () => {\n      // Only check once per session to prevent multiple opens\n      if (hasCheckedAboutAutoOpen.current) {\n        return;\n      }\n      \n      // Wait a bit for navigation to settle before checking\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Check if About screen should auto-open\n      const shouldOpen = await shouldAutoOpenAboutScreen(\n        selectedUser,\n        isGuestMode,\n        isAuthenticated\n      );\n      \n      if (shouldOpen) {\n        console.log('ğŸ  HomeScreen - Auto-opening About screen for new user');\n        hasCheckedAboutAutoOpen.current = true;\n        // Mark as seen immediately to prevent multiple opens\n        await markAboutScreenSeen();\n        // Navigate to About screen after a short delay\n        setTimeout(() => {\n          (navigation as any).navigate('AboutKarmaCommunityScreen');\n        }, 500);\n      } else {\n        // Mark as checked even if not opening to prevent re-checking\n        hasCheckedAboutAutoOpen.current = true;\n      }\n    };\n    \n    // Only check if user is authenticated and not in guest mode\n    if (isAuthenticated && !isGuestMode && selectedUser) {\n      checkAndOpenAbout();\n    }\n  }, [selectedUser, isGuestMode, isAuthenticated, navigation]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      console.log('ğŸ  HomeScreen - Screen focused, refreshing data...');\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  // Reset state when screen loses focus\n  useEffect(() => {\n    if (!isFocused) {\n      setShowPosts(false);\n    }\n  }, [isFocused]);\n\n  // Listen to resetHomeScreenTrigger from context\n  useEffect(() => {\n    console.log('ğŸ  HomeScreen - resetHomeScreenTrigger changed, resetting showPosts');\n    setShowPosts(false);\n  }, [resetHomeScreenTrigger]);\n\n  // Update hideTopBar and showPosts in route params\n  useEffect(() => {\n    console.log('ğŸ  HomeScreen - Updating route params with hideTopBar:', hideTopBar, 'showPosts:', showPosts);\n    (navigation as any).setParams({ hideTopBar, showPosts });\n  }, [hideTopBar, showPosts, navigation]);\n\n  useFocusEffect(\n    useCallback(() => {\n      setShowPosts(false);\n      setHideTopBar(false); // Reset top bar hiding\n      postsTranslateY.value = withSpring(0, {\n        damping: 20,\n        stiffness: 150,\n        mass: 0.8,\n      });\n      panelHeight.value = withTiming(0, { duration: 0 });\n    }, [])\n  );\n\n  const handleSelectStat = (details: StatDetails) => {\n    setSelectedStat(details);\n    setIsStatModalVisible(true);\n  };\n\n  /**\n   * Handle vertical scrolling; when reaching near the end, open the posts view.\n   */\n  const handleScroll = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const { contentOffset, contentSize, layoutMeasurement } = event.nativeEvent;\n    const offsetY = contentOffset.y;\n    scrollY.value = offsetY;\n    // Disabled opening posts by scrolling to bottom; opening is only via the drag handle\n  };\n\n  /** Animated style for the posts screen */\n  const postsAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateY: postsTranslateY.value }] as any,\n    };\n  });\n\n  // Fade/scale home content as the drag panel grows\n  const homeAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      opacity: interpolate(panelHeight.value, [0, HALF_THRESHOLD], [1, 0.2], Extrapolation.CLAMP),\n      transform: [\n        { scale: interpolate(panelHeight.value, [0, HALF_THRESHOLD], [1, 0.98], Extrapolation.CLAMP) }\n      ] as any,\n    };\n  });\n\n  // Animated style for the draggable panel overlay\n  const panelAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      height: panelHeight.value,\n    } as any;\n  });\n\n  // Drag gesture for opening the posts panel\n  const panGesture = Gesture.Pan()\n    .onBegin(() => {\n      panelStartHeight.value = panelHeight.value;\n    })\n    .onUpdate((event) => {\n      // Upward drag has negative translationY; increase height accordingly\n      const newHeight = Math.max(0, Math.min(SCREEN_HEIGHT, panelStartHeight.value - event.translationY));\n      panelHeight.value = newHeight;\n    })\n    .onEnd(() => {\n      const shouldOpen = panelHeight.value > HALF_THRESHOLD;\n      if (shouldOpen) {\n        panelHeight.value = withTiming(SCREEN_HEIGHT, { duration: 200 });\n        // Replace Home with Posts screen\n        runOnJS(setShowPosts)(true);\n        runOnJS(setHideTopBar)(false);\n      } else {\n        panelHeight.value = withTiming(0, { duration: 200 });\n      }\n    });\n\n\n  const { t } = useTranslation(['home','common']);\n\n  // Fetch stats from DB\n  // TODO: Move stats fetching to custom hook (useStatsData)\n  // TODO: Add proper loading state for stats\n  // TODO: Add error state handling and retry mechanism\n  // TODO: Implement proper error logging/reporting\n  // TODO: Add caching mechanism for stats data\n  // TODO: Add refresh/pull-to-refresh functionality\n  const [stats, setStats] = useState<StatCardProps[]>([]);\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const communityStats = await EnhancedStatsService.getCommunityStats();\n        // Map to stat cards format\n        setStats([\n          { title: t('home:stats.activeMembers'), value: formatShortNumber(communityStats.activeMembers || 0), change: '+12.5%', changeType: 'up', iconName: 'people-outline', color: colors.primary },\n          // Add more mapped stats...\n        ]);\n      } catch (error) {\n        console.error('Failed to fetch stats', error);\n        // TODO: Show user-friendly error message\n        // TODO: Implement fallback data or retry logic\n      }\n    };\n    fetchStats();\n  }, []);\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n       {showPosts ? (\n        // Posts screen\n          <PostsReelsScreen \n            onScroll={(hide) => {\n              console.log('ğŸ  HomeScreen - Setting hideTopBar:', hide);\n              setHideTopBar(hide);\n            }}\n            hideTopBar={hideTopBar}\n          />\n      ) : (\n        // Home screen with enhanced scrolling\n        <>\n        <Animated.View style={[styles.homeContainer, homeAnimatedStyle]}>\n          {Platform.OS === 'web' ? (\n            <FloatingBubblesOverlay />\n          ) : (\n            NativeBubblesComponent ? <NativeBubblesComponent /> : null\n          )}\n        </Animated.View>\n        {/* Drag Handle Button - the ONLY way to open PostsReelsScreen */}\n        {!showPosts && (\n          <GestureDetector gesture={panGesture}>\n            <Animated.View style={[styles.dragHandleButton, { zIndex: 1100 }]}>\n              <View style={styles.handleBar} />\n            </Animated.View>\n          </GestureDetector>\n        )}\n        {/* Draggable Panel Overlay (visual only, replaced by PostsReelsScreen on threshold) */}\n        {!showPosts && (\n          <Animated.View style={[styles.dragPanel, panelAnimatedStyle]} />\n        )}\n        </>\n      )}\n    </SafeAreaView>\n  );\n}\n\n// New StatCard component\ntype StatCardProps = {\n  title: string;\n  value: string;\n  change: string;\n  changeType: 'up' | 'down';\n  iconName: React.ComponentProps<typeof Ionicons>['name'];\n  color: string;\n};\nconst StatCard = ({ title, value, change, changeType, iconName, color }: StatCardProps) => (\n  <View style={styles.statCard}>\n    <View style={styles.statContent}>\n      <Text style={styles.statTitle}>{title}</Text>\n      <Text style={styles.statValue}>{value}</Text>\n      <View style={styles.statChange}>\n        <Ionicons name={changeType === 'up' ? \"trending-up\" : \"trending-down\"} size={16} color={changeType === 'up' ? colors.success : colors.error} />\n        <Text style={[styles.statChangeText, { color: changeType === 'up' ? colors.success : colors.error }]}>{change}</Text>\n      </View>\n    </View>\n    <View style={[styles.statIconContainer, { backgroundColor: color }]}>\n      <Ionicons name={iconName} size={24} color=\"white\" />\n    </View>\n  </View>\n);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  \n  activitiesContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  activitiesScroll: {\n    paddingRight: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  activityCard: {\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n    width: scaleSize(150),\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n  },\n  activityIcon: {\n    width: scaleSize(30),\n    height: scaleSize(30),\n    borderRadius: scaleSize(30) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  activityTime: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  statsPreview: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n\n     statCard: { flexDirection: 'row', justifyContent: 'space-between', backgroundColor: 'white', borderRadius: 12, padding: 16, margin: 8, ...createShadowStyle('colors.black', { width: 0, height: 0 }, 0.1, 4) },\n  statContent: {\n    flex: 1,\n    marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  statIcon: {\n    fontSize: FontSizes.heading1,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     statValue: {\n     fontSize: FontSizes.medium,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statTitle: {\n     fontSize: FontSizes.body,\n     fontWeight: 'bold',\n     color: colors.textPrimary,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statChange: {\n     flexDirection: 'row',\n     alignItems: 'center',\n     marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statChangeText: {\n     fontSize: FontSizes.small,\n     marginLeft: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statIconContainer: {\n     width: scaleSize(50),\n     height: scaleSize(50),\n     borderRadius: scaleSize(25),\n     justifyContent: 'center',\n     alignItems: 'center',\n   },\n   statName: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n  panel: {\n    height: PANEL_HEIGHT,\n    width: \"100%\",\n    backgroundColor: colors.white,\n    position: \"absolute\",\n    bottom: LAYOUT_CONSTANTS.SPACING.SM,\n    borderTopLeftRadius: scaleSize(250),\n    borderTopRightRadius: scaleSize(250),\n    ...createShadowStyle(colors.shadow, { width: 0, height: -3 }, 0.15, 8),\n  },\n  panelHandle: {\n    height: scaleSize(6),\n    borderRadius: scaleSize(3),\n    alignSelf: \"center\",\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  // New styles for posts screen and scrolling\n  postsContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  postsHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n  },\n  postsTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  pullIndicator: {\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  pullText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  // Toggle button styles\n  toggleContainer: {\n    position: 'absolute',\n    bottom: scaleSize(50),\n    right: scaleSize(30),\n    zIndex: 1000,\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: scaleSize(20),\n    padding: scaleSize(3),\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  // Drag handle button (small pill) centered at bottom\n  dragHandleButton: {\n    position: 'absolute',\n    bottom: Platform.OS === 'web' ? 20 : 60, // Much lower on web to reduce dead space\n    backgroundColor: colors.secondary,\n    alignSelf: 'center',\n    width: scaleSize(96),\n    height: scaleSize(24),\n    borderRadius: scaleSize(12),\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n  },\n  handleBar: {\n    alignSelf: 'center',\n    width: scaleSize(64),\n    height: scaleSize(6),\n    borderRadius: scaleSize(3),\n    backgroundColor: colors.backgroundTertiary,\n  },\n  // Draggable white panel overlay that grows with the gesture\n  dragPanel: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.white,\n    borderTopLeftRadius: scaleSize(24),\n    borderTopRightRadius: scaleSize(24),\n    ...createShadowStyle(colors.shadow, { width: 0, height: -3 }, 0.15, 8),\n    zIndex: 900,\n  },\n  toggleButton: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: scaleSize(16),\n  },\n  toggleButtonActive: {\n    backgroundColor: colors.primary,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.4, 2),\n  },\n  toggleText: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  toggleTextActive: {\n    color: colors.background,\n  },\n  // Community mode styles\n  communityModeContainer: {\n    flex: 1,\n    minHeight: \"100%\", // Minimum height to enable scrolling\n    width: \"100%\",\n  },\n  communityModeTitle: {\n    fontSize: FontSizes.heading2,\n  },\n  // Selected user indicator styles\n  userSelectionIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.offWhite,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  selectedUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  selectedUserAvatar: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    borderRadius: scaleSize(16),\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  selectedUserName: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  selectedUserLocation: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  clearUserButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  // Home container style\n  homeContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  // Personal mode style\n  personalModeContainer: {\n    flex: 1,\n  },\n  // Scroll content style\n  scrollContent: {\n    paddingBottom: scaleSize(100),\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && { \n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n  },\n  // Personal statistics styles\n  personalStatsContainer: {\n    paddingHorizontal: 20,\n    marginBottom: 20,\n  },\n  personalStatsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n  },\n     personalStatCard: {\n     backgroundColor: colors.backgroundTertiary, // Very light blue\n     padding: LAYOUT_CONSTANTS.SPACING.MD,\n     borderRadius: scaleSize(50), // Fully rounded\n     alignItems: 'center',\n     flex: 1,\n     marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n     ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n     minWidth: scaleSize(80),\n     minHeight: scaleSize(80),\n     justifyContent: 'center',\n   },\n  personalStatIcon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     personalStatValue: {\n     fontSize: FontSizes.large,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   personalStatName: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n  // Floating community statistics styles\n  floatingStatsContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  bubblesContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n  },\n     floatingBubble: {\n     backgroundColor: colors.backgroundTertiary, // Very light blue\n     padding: LAYOUT_CONSTANTS.SPACING.MD,\n     borderRadius: scaleSize(50), // Fully rounded\n     alignItems: 'center',\n     marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n     ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n     minWidth: scaleSize(80),\n     minHeight: scaleSize(80),\n     justifyContent: 'center',\n   },\n  bubbleIcon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     bubbleValue: {\n     fontSize: FontSizes.large,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   bubbleLabel: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n     // Specific donation types styles\n   moneyBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   foodBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   clothingBubble: {\n     backgroundColor: colors.infoLight,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   bloodBubble: {\n     backgroundColor: colors.errorLight,\n     borderColor: colors.error + '30',\n     borderWidth: 1,\n   },\n   timeBubble: {\n     backgroundColor: colors.warningLight,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   transportBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   educationBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   environmentBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   animalsBubble: {\n     backgroundColor: colors.legacyLightOrange,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   eventsBubble: {\n     backgroundColor: colors.legacyLightPink,\n     borderColor: colors.secondary + '30',\n     borderWidth: 1,\n   },\n   recyclingBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n      cultureBubble: {\n     backgroundColor: colors.legacyLightPurple,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   healthBubble: {\n     backgroundColor: colors.legacyLightRed,\n     borderColor: colors.error + '30',\n     borderWidth: 1,\n   },\n   elderlyBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   childrenBubble: {\n     backgroundColor: colors.legacyLightPink,\n     borderColor: colors.secondary + '30',\n     borderWidth: 1,\n   },\n   sportsBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   musicBubble: {\n     backgroundColor: colors.legacyLightPurple,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   artBubble: {\n     backgroundColor: colors.legacyLightOrange,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   techBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   gardenBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   leadershipBubble: {\n     backgroundColor: colors.legacyLightYellow,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n  // New styles for dashboard elements\n  welcomeSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  welcomeTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  welcomeSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  // statCard styles are already defined earlier in this StyleSheet.\n  chartCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n  },\n  chartTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  progressContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  progressBar: {\n    height: scaleSize(8),\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: scaleSize(4),\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: colors.primary,\n    borderRadius: scaleSize(4),\n  },\n  updatesSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  updatesTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  updatesList: {\n    // List of updates will go here\n  },\n  updateItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n  },\n  updateText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  updateTime: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  chartsSection: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n\n });","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/ProfileScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":131,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":131,"endColumn":53},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'db', 'selectedUser?.id', and 'user'. Either include them or remove the dependency array.","line":510,"column":6,"nodeType":"ArrayExpression","endLine":510,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [db, selectedUser?.id, targetUserId, user]","fix":{"range":[20275,20289],"text":"[db, selectedUser?.id, targetUserId, user]"}}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":579,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":579,"endColumn":53},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'db', 'selectedUser?.id', and 'user'. Either include them or remove the dependency array.","line":947,"column":6,"nodeType":"ArrayExpression","endLine":947,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [db, selectedUser?.id, targetUserId, user]","fix":{"range":[36841,36855],"text":"[db, selectedUser?.id, targetUserId, user]"}}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1042,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1042,"endColumn":77},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1309,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1309,"endColumn":59},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1347,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1347,"endColumn":61},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'updateUserStats'. Either include it or remove the dependency array.","line":1563,"column":6,"nodeType":"ArrayExpression","endLine":1563,"endColumn":47,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, viewingUser, isOwnProfile, updateUserStats]","fix":{"range":[59189,59230],"text":"[selectedUser, viewingUser, isOwnProfile, updateUserStats]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has missing dependencies: 'loadRecentActivities' and 'updateUserStats'. Either include them or remove the dependency array.","line":1594,"column":8,"nodeType":"ArrayExpression","endLine":1594,"endColumn":63,"suggestions":[{"desc":"Update the dependencies array to be: [isOwnProfile, targetUserId, updateUserStats, viewingUser, selectedUser, loadRecentActivities]","fix":{"range":[60335,60390],"text":"[isOwnProfile, targetUserId, updateUserStats, viewingUser, selectedUser, loadRecentActivities]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadRecentActivities'. Either include it or remove the dependency array.","line":1602,"column":6,"nodeType":"ArrayExpression","endLine":1602,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, isOwnProfile, loadRecentActivities]","fix":{"range":[60553,60581],"text":"[selectedUser, isOwnProfile, loadRecentActivities]"}}]},{"ruleId":"react/prop-types","severity":1,"message":"'navigationState' is missing in props validation","line":1625,"column":16,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":31},{"ruleId":"react/prop-types","severity":1,"message":"'navigationState.routes' is missing in props validation","line":1625,"column":32,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":38},{"ruleId":"react/prop-types","severity":1,"message":"'navigationState.routes.map' is missing in props validation","line":1625,"column":39,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":42},{"ruleId":"react/prop-types","severity":1,"message":"'navigationState' is missing in props validation","line":1626,"column":35,"nodeType":"Identifier","messageId":"missingPropType","endLine":1626,"endColumn":50},{"ruleId":"react/prop-types","severity":1,"message":"'navigationState.index' is missing in props validation","line":1626,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":1626,"endColumn":56},{"ruleId":"react/prop-types","severity":1,"message":"'jumpTo' is missing in props validation","line":1631,"column":36,"nodeType":"Identifier","messageId":"missingPropType","endLine":1631,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Unified profile screen that works for both own profile and other users' profiles.\n// - Reached from: `ProfileTabStack` initial route 'ProfileScreen' via `BottomNavigator` (own profile) or via navigation with params (other user's profile).\n// - Provides: Navigation to Followers lists, Bookmarks, Notifications, Edit Profile, Discover People, Follow/Unfollow, Message, and (in demo) random persona selection and sample data creation.\n// - Reads from context: `useUser()` -> `selectedUser`, `setSelectedUserWithMode`, `isRealAuth`.\n// - Route params: Optional `{ userId?: string, userName?: string, characterData?: CharacterType }` for viewing other users' profiles.\n// - External deps/services: `followService` (stats and sample), `chatService` (sample chats), `apiService` (load user data), i18n translations.\n// - Notes: Hides or adapts certain demo-only features when `isRealAuth` is true. Shows different UI elements based on whether viewing own profile or other user's profile.\n// screens/ProfileScreen.tsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  Image,\n  TouchableOpacity,\n  Dimensions,\n  Alert,\n  TouchableWithoutFeedback,\n  Platform,\n  FlatList,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { Ionicons, MaterialCommunityIcons } from '@expo/vector-icons';\nimport { TabView, TabBar, SceneMap } from 'react-native-tab-view';\nimport type { SceneRendererProps, NavigationState } from 'react-native-tab-view';\nimport { useNavigation, useFocusEffect, useRoute, useNavigationState } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ProfileCompletionBanner from '../components/ProfileCompletionBanner';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { createShadowStyle } from '../globals/styles';\nimport { scaleSize } from '../globals/responsive';\nimport { getFollowStats, followUser, unfollowUser, createSampleFollowData, getUpdatedFollowCounts } from '../utils/followService';\nimport { createSampleChatData, createConversation, conversationExists } from '../utils/chatService';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport { useToast, toastService } from '../utils/toastService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { FeedItem, FeedUser } from '../types/feed';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\n\n// --- Type Definitions ---\ntype TabRoute = {\n  key: string;\n  title: string;\n};\n\ntype ProfileScreenRouteParams = {\n  userId?: string;\n  userName?: string;\n  characterData?: CharacterType;\n};\n\n// --- Helper Functions ---\nconst getRoleDisplayName = (role: string): string => {\n  const roleTranslations: Record<string, string> = {\n    'user': '××©×ª××©',\n    'donor': '×ª×•×¨×',\n    'volunteer': '××ª× ×“×‘',\n    'recipient': '××§×‘×œ ×¢×–×¨×”',\n    'organization': '×¢××•×ª×”',\n    'student': '×¡×˜×•×“× ×˜'\n  };\n  return roleTranslations[role] || role;\n};\n\n// Helper to format ride time safely\nconst formatRideTime = (dateIso: string) => {\n  if (!dateIso) return { time: '', date: '' };\n  const dep = new Date(dateIso);\n  if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n  const hours = dep.getHours().toString().padStart(2, '0');\n  const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n  const day = dep.getDate().toString().padStart(2, '0');\n  const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n  const year = dep.getFullYear();\n\n  return {\n    time: `${hours}:${minutes}`,\n    date: `${day}.${month}.${year}`\n  };\n};\n\n\n// --- Tab Components ---\n// Helper function to check if status is \"open\"\nconst isOpenStatus = (status: string, type: string): boolean => {\n  if (type === 'item') {\n    return status === 'available' || status === 'reserved';\n  } else if (type === 'ride') {\n    return status === 'active' || status === 'full';\n  } else if (type === 'task') {\n    return status === 'open' || status === 'in_progress';\n  } else if (type === 'donation') {\n    return status === 'active';\n  }\n  return true; // Posts are always shown\n};\n\n// Helper function to check if status is \"closed\"\nconst isClosedStatus = (status: string, type: string): boolean => {\n  if (type === 'item') {\n    return status === 'delivered' || status === 'completed';\n  } else if (type === 'ride') {\n    return status === 'completed';\n  } else if (type === 'task') {\n    return status === 'done' || status === 'archived';\n  } else if (type === 'donation') {\n    return status === 'completed';\n  }\n  return false; // Posts are not shown in closed\n};\n\nconst OpenRoute = ({ userId, user, onHeightChange }: { userId?: string, user?: any, onHeightChange?: (height: number) => void }) => {\n  const { t } = useTranslation(['profile']);\n  const { selectedUser } = useUser();\n  const [posts, setPosts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { db } = require('../utils/databaseService');\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Use provided userId or fallback to selectedUser.id\n  const targetUserId = userId || selectedUser?.id;\n\n  useEffect(() => {\n    const loadOpenContent = async () => {\n      if (!targetUserId) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        console.log('ğŸ“± OpenRoute - Loading open content for userId:', targetUserId);\n\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        const allContent: any[] = [];\n        const existingRideIds = new Set<string>();\n        const existingItemIds = new Set<string>();\n\n        // Load posts from API - handle all types with status\n        try {\n          const res = await apiService.getUserPosts(targetUserId, 50, selectedUser?.id);\n          if (res.success && Array.isArray(res.data)) {\n            res.data.forEach((p: any) => {\n              let shouldInclude = false;\n              let status = 'active';\n              let type = 'post';\n              const subtype = p.post_type;\n\n              // Determine if post should be in OPEN tab\n              if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n                const taskStatus = p.task?.status;\n                shouldInclude = taskStatus === 'open' || taskStatus === 'in_progress';\n                status = taskStatus || 'open';\n                type = 'task';\n              } else if (p.ride_data || p.post_type === 'ride') {\n                const rideStatus = p.ride_data?.status || 'active';\n                shouldInclude = rideStatus === 'active' || rideStatus === 'full';\n                status = rideStatus;\n                type = 'ride';\n                if (shouldInclude && p.ride_data?.id) existingRideIds.add(p.ride_data.id);\n              } else if ((p.item_data || p.post_type === 'item') || p.post_type === 'donation') {\n                const itemStatus = p.item_data?.status || 'available';\n                shouldInclude = itemStatus === 'available' || itemStatus === 'reserved' || itemStatus === 'active';\n                status = itemStatus;\n                type = p.post_type === 'donation' ? 'donation' : 'item';\n                if (shouldInclude && p.item_data?.id) existingItemIds.add(p.item_data.id);\n              } else {\n                // Regular posts - always active\n                shouldInclude = true;\n              }\n\n              if (shouldInclude) {\n                let fromLocation = '';\n                let toLocation = '';\n\n                let seats = 0;\n                let price = 0;\n                let time = '';\n                let date = '';\n\n                if (type === 'ride') {\n                  const rData = p.ride_data;\n                  if (rData) {\n                    fromLocation = rData.from_location?.city || rData.from_location?.name || rData.from_location?.address || '';\n                    toLocation = rData.to_location?.city || rData.to_location?.name || rData.to_location?.address || '';\n\n                    seats = rData.available_seats || 0;\n                    price = rData.price_per_seat || 0;\n\n                    if (rData.departure_time) {\n                      const formatted = formatRideTime(rData.departure_time);\n                      time = formatted.time;\n                      date = formatted.date;\n                    }\n                  }\n                }\n\n                allContent.push({\n                  id: p.id,\n                  title: p.title || '',\n                  thumbnail: (p.images && p.images.length > 0) ? p.images[0] : null,\n                  likes: p.likes || 0,\n                  comments: p.comments || 0,\n                  isLiked: p.is_liked || false,\n                  type: type as any,\n                  subtype: subtype,\n                  description: p.description || '',\n                  timestamp: p.created_at,\n                  status: status,\n                  user: user ? {\n                    id: user.id,\n                    name: user.name,\n                    avatar: user.avatar,\n                    karmaPoints: user.karmaPoints\n                  } : { id: 'unknown' },\n                  taskData: p.task,\n                  rideData: p.ride_data,\n                  itemData: p.item_data,\n                  from: fromLocation,\n                  to: toLocation,\n                  seats,\n                  price,\n                  time,\n                  date,\n                  rawData: p,\n                  // Add IDs for updating posts (critical for delete/close functionality)\n                  rideId: p.ride_id || p.ride_data?.id,\n                  itemId: p.item_data?.id || (p.item_id && !/^\\d{10,13}$/.test(p.item_id) ? p.item_id : undefined),\n                  taskId: p.task_id || p.task?.id\n                });\n              }\n            });\n            console.log('ğŸ“± OpenRoute - Loaded posts from API:', res.data.length);\n          }\n        } catch (error) {\n          console.error('Error loading posts from API:', error);\n        }\n\n        // Load items from API (available, reserved)\n        let userItems: any[] = [];\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            // Load available items\n            const availableResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'available', limit: 50 }\n            });\n            if (availableResponse.data?.success && Array.isArray(availableResponse.data.data)) {\n              userItems.push(...availableResponse.data.data);\n            }\n            // Load reserved items\n            const reservedResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'reserved', limit: 50 }\n            });\n            if (reservedResponse.data?.success && Array.isArray(reservedResponse.data.data)) {\n              userItems.push(...reservedResponse.data.data);\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          try {\n            const allItems = await db.getDedicatedItemsByOwner(targetUserId) || [];\n            userItems = allItems.filter((item: any) =>\n              item.status === 'available' || item.status === 'reserved'\n            );\n          } catch (error) {\n            console.error('Error loading items from local DB:', error);\n          }\n        }\n\n        // Process items\n        userItems.forEach((item: any) => {\n          if (existingItemIds.has(item.id)) return;\n          let thumbnail = '';\n          if (item.image_base64) {\n            const imageData = item.image_base64;\n            if (imageData.startsWith('data:image') || imageData.startsWith('http')) {\n              thumbnail = imageData;\n            } else if (imageData.length > 100) {\n              thumbnail = `data:image/jpeg;base64,${imageData}`;\n            }\n          }\n          allContent.push({\n            id: `item_${item.id}`,\n            title: item.title,\n            description: item.description || '',\n            thumbnail: thumbnail || null,\n            likes: 0,\n            comments: 0,\n            isLiked: false,\n            timestamp: item.created_at || new Date().toISOString(),\n            type: 'post', // Items map to 'post' or 'item' subtype depending on implementation\n            subtype: 'item',\n            status: item.status,\n            user: user ? {\n              id: user.id,\n              name: user.name,\n              avatar: user.avatar,\n              karmaPoints: user.karmaPoints\n            } : { id: 'unknown' },\n            itemData: {\n              ...item,\n              price: item.price\n            },\n            price: item.price,\n            rawData: item\n          });\n        });\n\n        // Load rides (active, full)\n        try {\n          const allRides = await enhancedDB.getRides({});\n          console.log('[ProfileScreen OpenRoute] Fetched rides:', allRides.length);\n\n          const userRides = allRides.filter((ride: any) => {\n            const driverId = ride.driver_id || ride.createdBy || ride.created_by || ride.driverId;\n            const status = ride.status || 'active';\n            const isUserRide = driverId === targetUserId && (status === 'active' || status === 'full');\n\n            if (isUserRide) {\n              console.log('[ProfileScreen OpenRoute] Found user ride:', ride.id, 'driver:', driverId);\n            }\n\n            return isUserRide;\n          });\n\n          console.log('[ProfileScreen OpenRoute] User rides count:', userRides.length);\n\n          userRides.forEach((ride: any) => {\n            if (existingRideIds.has(ride.id)) return;\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '';\n\n            let time = '';\n            let date = '';\n            if (ride.departure_time) {\n              const formatted = formatRideTime(ride.departure_time);\n              time = formatted.time;\n              date = formatted.date;\n            } else if (ride.time) {\n              time = ride.time;\n              date = ride.date || '';\n            }\n\n            allContent.push({\n              id: `ride_${ride.id}`,\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              description: ride.description || '',\n              thumbnail: ride.image || null,\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: ride.created_at || new Date().toISOString(),\n              type: 'post',\n              subtype: 'ride',\n              status: ride.status || 'active',\n              from: fromLocation,\n              to: toLocation,\n              seats: ride.available_seats || ride.seats || 0,\n              price: ride.price_per_seat || ride.price || 0,\n              time,\n              date,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              rideData: ride,\n              rawData: ride,\n              // Add rideId for updating posts (critical for delete/close functionality)\n              rideId: ride.id\n            });\n          });\n        } catch (error) {\n          console.error('[ProfileScreen OpenRoute] Error loading rides:', error);\n        }\n\n        // Load tasks (open, in_progress) - avoid duplicates with task posts\n        try {\n          // Get task IDs we already added from posts\n          const existingTaskIds = new Set(\n            allContent\n              .filter((c: any) => c.type === 'task' && c.taskData?.id)\n              .map((c: any) => c.taskData.id)\n          );\n\n          const openTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'open', limit: 50 });\n          const inProgressTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'in_progress', limit: 50 });\n          const tasks = [\n            ...(openTasksRes.success && Array.isArray(openTasksRes.data) ? openTasksRes.data : []),\n            ...(inProgressTasksRes.success && Array.isArray(inProgressTasksRes.data) ? inProgressTasksRes.data : [])\n          ];\n\n          tasks.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              console.log(`ğŸ“± OpenRoute - Skipping duplicate task: ${task.id}`);\n              return;\n            }\n\n            allContent.push({\n              id: `task_${task.id}`,\n              title: task.title,\n              description: task.description || '',\n              thumbnail: '',\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: task.created_at || new Date().toISOString(),\n              type: 'task_post',\n              subtype: 'task_assignment',\n              status: task.status,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              taskData: {\n                id: task.id,\n                title: task.title,\n                status: task.status\n              },\n              rawData: task\n            });\n          });\n        } catch (error) {\n          console.error('Error loading tasks:', error);\n        }\n\n        // Load donations (active)\n        try {\n          const donationsRes = await apiService.getUserDonations(targetUserId);\n          if (donationsRes.success && Array.isArray(donationsRes.data)) {\n            const activeDonations = donationsRes.data.filter((donation: any) => donation.status === 'active');\n            activeDonations.forEach((donation: any) => {\n              allContent.push({\n                id: `donation_${donation.id}`,\n                title: donation.title,\n                description: donation.description || '',\n                thumbnail: (donation.images && donation.images.length > 0) ? donation.images[0] : null,\n                likes: 0,\n                comments: 0,\n                isLiked: false,\n                timestamp: donation.created_at || new Date().toISOString(),\n                type: 'post',\n                subtype: 'donation',\n                status: donation.status,\n                user: user ? {\n                  id: user.id,\n                  name: user.name,\n                  avatar: user.avatar,\n                  karmaPoints: user.karmaPoints\n                } : { id: 'unknown' },\n                rawData: donation\n              });\n            });\n          }\n        } catch (error) {\n          console.error('Error loading donations:', error);\n        }\n\n        console.log('ğŸ“± OpenRoute - Total open content:', allContent.length);\n        setPosts(allContent);\n      } catch (error) {\n        console.error('Error loading open content:', error);\n        setPosts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadOpenContent();\n  }, [targetUserId]);\n\n  if (loading) {\n    return (\n      <View style={styles.tabContentPlaceholder}>\n        <Text style={styles.placeholderText}>×˜×•×¢×Ÿ ×ª×•×›×Ÿ ×¤×ª×•×—...</Text>\n      </View>\n    );\n  }\n\n  if (posts.length === 0) {\n    return (\n      <View style={[styles.tabContentPlaceholder, { height: 400 }]} onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}>\n        <Ionicons name=\"folder-open-outline\" size={60} color={colors.textSecondary} />\n        <Text style={styles.placeholderText}>××™×Ÿ ×ª×•×›×Ÿ ×¤×ª×•×— ×¢×“×™×™×Ÿ</Text>\n        <Text style={styles.placeholderSubtext}>×”×ª×•×›×Ÿ ×”×¤×ª×•×— ×©×œ×š ×™×•×¤×™×¢ ×›××Ÿ</Text>\n      </View>\n    );\n  }\n\n  const screenWidth = Dimensions.get('window').width;\n  const cardWidth = screenWidth / 3;\n\n  return (\n    <View style={styles.tabContentContainer}>\n      <FlatList\n        data={posts}\n        keyExtractor={(item) => item.id}\n        numColumns={3}\n        key={3}\n        scrollEnabled={false}\n        renderItem={({ item }) => (\n          <PostReelItem\n            item={item}\n            numColumns={3}\n            cardWidth={cardWidth}\n            onPress={() => { }}\n            onMorePress={handleMorePress}\n          />\n        )}\n        onContentSizeChange={(w, h) => {\n          if (onHeightChange) onHeightChange(h);\n        }}\n        contentContainerStyle={{ paddingBottom: 20 }}\n        showsVerticalScrollIndicator={false}\n      />\n      {/* Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n    </View>\n  );\n};\n\nconst ClosedRoute = ({ userId, user, onHeightChange }: { userId?: string, user?: any, onHeightChange?: (height: number) => void }) => {\n  const { t } = useTranslation(['profile']);\n  const { selectedUser } = useUser();\n  const [posts, setPosts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { db } = require('../utils/databaseService');\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Use provided userId or fallback to selectedUser.id\n  const targetUserId = userId || selectedUser?.id;\n\n  useEffect(() => {\n    const loadClosedContent = async () => {\n      if (!targetUserId) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        console.log('ğŸ“± ClosedRoute - Loading closed content for userId:', targetUserId);\n\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        const allContent: any[] = [];\n        const existingRideIds = new Set();\n        const existingItemIds = new Set();\n\n        // Load posts from API - handle all types with closed status\n        try {\n          const res = await apiService.getUserPosts(targetUserId, 50, selectedUser?.id);\n          if (res.success && Array.isArray(res.data)) {\n            res.data.forEach((p: any) => {\n              let shouldInclude = false;\n              let status = 'closed';\n              let type = 'post';\n              const subtype = p.post_type;\n\n              // Determine if post should be in CLOSED tab\n              if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n                const taskStatus = p.task?.status;\n                shouldInclude = taskStatus === 'done' || taskStatus === 'archived';\n                status = taskStatus || 'done';\n                type = 'task';\n              } else if (p.ride_data || p.post_type === 'ride') {\n                const rideStatus = p.ride_data?.status;\n                shouldInclude = rideStatus === 'completed' || rideStatus === 'cancelled';\n                status = rideStatus || 'completed';\n                type = 'ride';\n                if (shouldInclude && p.ride_data?.id) existingRideIds.add(p.ride_data.id);\n              } else if ((p.item_data || p.post_type === 'item') || p.post_type === 'donation') {\n                const itemStatus = p.item_data?.status;\n                shouldInclude = itemStatus === 'delivered' || itemStatus === 'completed' || itemStatus === 'expired';\n                status = itemStatus || 'completed';\n                type = p.post_type === 'donation' ? 'donation' : 'item';\n                if (shouldInclude && p.item_data?.id) existingItemIds.add(p.item_data.id);\n              } else {\n                // Regular posts - not shown in closed\n                shouldInclude = false;\n              }\n\n              let fromLocation = '';\n              let toLocation = '';\n\n              let seats = 0;\n              let price = 0;\n              let time = '';\n              let date = '';\n\n              if (type === 'ride') {\n                const rData = p.ride_data;\n                if (rData) {\n                  fromLocation = rData.from_location?.city || rData.from_location?.name || rData.from_location?.address || '';\n                  toLocation = rData.to_location?.city || rData.to_location?.name || rData.to_location?.address || '';\n\n                  seats = rData.available_seats || 0;\n                  price = rData.price_per_seat || 0;\n\n                  if (rData.departure_time) {\n                    const formatted = formatRideTime(rData.departure_time);\n                    time = formatted.time;\n                    date = formatted.date;\n                  }\n                }\n              }\n\n              if (shouldInclude) {\n                allContent.push({\n                  id: p.id,\n                  title: p.title || '',\n                  thumbnail: (p.images && p.images.length > 0) ? p.images[0] : null,\n                  likes: p.likes || 0,\n                  comments: p.comments || 0,\n                  isLiked: p.is_liked || false,\n                  type: type as any,\n                  subtype: subtype,\n                  description: p.description || '',\n                  timestamp: p.created_at,\n                  status: status,\n                  user: user ? {\n                    id: user.id,\n                    name: user.name,\n                    avatar: user.avatar,\n                    karmaPoints: user.karmaPoints\n                  } : { id: 'unknown' },\n                  taskData: p.task,\n                  rideData: p.ride_data,\n                  itemData: p.item_data,\n                  from: fromLocation,\n                  to: toLocation,\n                  seats,\n                  price,\n                  time,\n                  date,\n                  rawData: p,\n                  // Add IDs for updating posts (critical for delete/close functionality)\n                  rideId: p.ride_id || p.ride_data?.id,\n                  itemId: p.item_data?.id || (p.item_id && !/^\\d{10,13}$/.test(p.item_id) ? p.item_id : undefined),\n                  taskId: p.task_id || p.task?.id\n                });\n              }\n            });\n            console.log('ğŸ“± ClosedRoute - Loaded posts from API:', res.data.length);\n          }\n        } catch (error) {\n          console.error('Error loading posts from API:', error);\n        }\n\n        // Load items from API (delivered, completed)\n        let userItems: any[] = [];\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            // Load delivered items\n            const deliveredResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'delivered', limit: 50 }\n            });\n            if (deliveredResponse.data?.success && Array.isArray(deliveredResponse.data.data)) {\n              userItems.push(...deliveredResponse.data.data);\n            }\n            // Load completed items\n            const completedResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'completed', limit: 50 }\n            });\n            if (completedResponse.data?.success && Array.isArray(completedResponse.data.data)) {\n              userItems.push(...completedResponse.data.data);\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          try {\n            const allItems = await db.getDedicatedItemsByOwner(targetUserId) || [];\n            userItems = allItems.filter((item: any) =>\n              item.status === 'delivered' || item.status === 'completed'\n            );\n          } catch (error) {\n            console.error('Error loading items from local DB:', error);\n          }\n        }\n\n        // Process items\n        userItems.forEach((item: any) => {\n          if (existingItemIds.has(item.id)) return;\n          let thumbnail = '';\n          if (item.image_base64) {\n            const imageData = item.image_base64;\n            if (imageData.startsWith('data:image') || imageData.startsWith('http')) {\n              thumbnail = imageData;\n            } else if (imageData.length > 100) {\n              thumbnail = `data:image/jpeg;base64,${imageData}`;\n            }\n          }\n          allContent.push({\n            id: `item_${item.id}`,\n            title: item.title,\n            description: item.description || '',\n            thumbnail: thumbnail || null,\n            likes: 0,\n            comments: 0,\n            isLiked: false,\n            timestamp: item.created_at || new Date().toISOString(),\n            type: 'post', // Items map to 'post' or 'item' subtype\n            subtype: 'item',\n            status: item.status,\n            user: user ? {\n              id: user.id,\n              name: user.name,\n              avatar: user.avatar,\n              karmaPoints: user.karmaPoints\n            } : { id: 'unknown' },\n            itemData: {\n              ...item,\n              price: item.price\n            },\n            price: item.price,\n            rawData: item\n          });\n        });\n\n        // Load rides (completed)\n        try {\n          const allRides = await enhancedDB.getRides({});\n          const userRides = allRides.filter((ride: any) => {\n            const createdBy = ride.createdBy || ride.created_by || ride.driver_id || ride.driverId;\n            const status = ride.status || 'active';\n            return createdBy === targetUserId && status === 'completed';\n          });\n          userRides.forEach((ride: any) => {\n            if (existingRideIds.has(ride.id)) return;\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '';\n\n            let time = '';\n            let date = '';\n            if (ride.departure_time) {\n              const formatted = formatRideTime(ride.departure_time);\n              time = formatted.time;\n              date = formatted.date;\n            } else if (ride.time) {\n              time = ride.time;\n              date = ride.date || '';\n            }\n\n            allContent.push({\n              id: `ride_${ride.id}`,\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              description: ride.description || '',\n              thumbnail: ride.image || null,\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: ride.created_at || new Date().toISOString(),\n              type: 'post',\n              subtype: 'ride',\n              status: ride.status || 'completed',\n              from: fromLocation,\n              to: toLocation,\n              seats: ride.available_seats || ride.seats || 0,\n              price: ride.price_per_seat || ride.price || 0,\n              time,\n              date,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              rideData: ride,\n              rawData: ride,\n              // Add rideId for updating posts (critical for delete/close functionality)\n              rideId: ride.id\n            });\n          });\n        } catch (error) {\n          console.error('Error loading rides:', error);\n        }\n\n        // Load tasks (done, archived) - avoid duplicates with task posts\n        try {\n          // Get task IDs we already added from posts\n          const existingTaskIds = new Set(\n            allContent\n              .filter((c: any) => c.type === 'task' && c.taskData?.id)\n              .map((c: any) => c.taskData.id)\n          );\n\n          const doneTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'done', limit: 50 });\n          const archivedTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'archived', limit: 50 });\n          const tasks = [\n            ...(doneTasksRes.success && Array.isArray(doneTasksRes.data) ? doneTasksRes.data : []),\n            ...(archivedTasksRes.success && Array.isArray(archivedTasksRes.data) ? archivedTasksRes.data : [])\n          ];\n\n          tasks.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              console.log(`ğŸ“± ClosedRoute - Skipping duplicate task: ${task.id}`);\n              return;\n            }\n\n            allContent.push({\n              id: `task_${task.id}`,\n              title: task.title,\n              description: task.description || '',\n              thumbnail: '',\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: task.created_at || new Date().toISOString(),\n              type: 'task_post',\n              subtype: 'task_assignment',\n              status: task.status,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              taskData: {\n                id: task.id,\n                title: task.title,\n                status: task.status\n              },\n              rawData: task\n            });\n          });\n        } catch (error) {\n          console.error('Error loading tasks:', error);\n        }\n\n        // Load donations (completed)\n        try {\n          const donationsRes = await apiService.getUserDonations(targetUserId);\n          if (donationsRes.success && Array.isArray(donationsRes.data)) {\n            const completedDonations = donationsRes.data.filter((donation: any) => donation.status === 'completed');\n            completedDonations.forEach((donation: any) => {\n              allContent.push({\n                id: `donation_${donation.id}`,\n                title: donation.title,\n                description: donation.description || '',\n                thumbnail: (donation.images && donation.images.length > 0) ? donation.images[0] : null,\n                likes: 0,\n                comments: 0,\n                isLiked: false,\n                timestamp: donation.created_at || new Date().toISOString(),\n                type: 'post',\n                subtype: 'donation',\n                status: donation.status,\n                user: user ? {\n                  id: user.id,\n                  name: user.name,\n                  avatar: user.avatar,\n                  karmaPoints: user.karmaPoints\n                } : { id: 'unknown' },\n                rawData: donation\n              });\n            });\n          }\n        } catch (error) {\n          console.error('Error loading donations:', error);\n        }\n\n        console.log('ğŸ“± ClosedRoute - Total closed content:', allContent.length);\n        setPosts(allContent);\n      } catch (error) {\n        console.error('Error loading closed content:', error);\n        setPosts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadClosedContent();\n  }, [targetUserId]);\n\n  if (loading) {\n    return (\n      <View style={styles.tabContentPlaceholder}>\n        <Text style={styles.placeholderText}>×˜×•×¢×Ÿ ×ª×•×›×Ÿ ×¡×’×•×¨...</Text>\n      </View>\n    );\n  }\n\n  if (posts.length === 0) {\n    return (\n      <View style={[styles.tabContentPlaceholder, { height: 400 }]} onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}>\n        <Ionicons name=\"checkmark-done-circle-outline\" size={60} color={colors.textSecondary} />\n        <Text style={styles.placeholderText}>××™×Ÿ ×ª×•×›×Ÿ ×¡×’×•×¨ ×¢×“×™×™×Ÿ</Text>\n        <Text style={styles.placeholderSubtext}>×”×ª×•×›×Ÿ ×”×¡×’×•×¨ ×©×œ×š ×™×•×¤×™×¢ ×›××Ÿ</Text>\n      </View>\n    );\n  }\n\n  const screenWidth = Dimensions.get('window').width;\n  const cardWidth = screenWidth / 3;\n\n  return (\n    <View style={styles.tabContentContainer}>\n      <FlatList\n        data={posts}\n        keyExtractor={(item) => item.id}\n        numColumns={3}\n        key={3}\n        scrollEnabled={false}\n        renderItem={({ item }) => (\n          <PostReelItem\n            item={item}\n            numColumns={3}\n            cardWidth={cardWidth}\n            onPress={() => { }}\n            onMorePress={handleMorePress}\n          />\n        )}\n        onContentSizeChange={(w, h) => {\n          if (onHeightChange) onHeightChange(h);\n        }}\n        contentContainerStyle={{ paddingBottom: 20 }}\n        showsVerticalScrollIndicator={false}\n      />\n      {/* Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n    </View>\n  );\n};\n\nconst TaggedRoute = ({ onHeightChange }: { onHeightChange?: (height: number) => void }) => {\n  return (\n    <View\n      style={[styles.tabContentPlaceholder, { height: 400 }]}\n      onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}\n    >\n      <Ionicons name=\"person-outline\" size={60} color={colors.textSecondary} />\n      <Text style={styles.placeholderText}>×ª×™×•×’×™× ×™×”×™×” ×¤×¢×™×œ ×‘×”××©×š</Text>\n    </View>\n  );\n};\n\n// --- Main Component ---\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\n// Internal component that contains all the logic\n// It receives tabBarHeight as a prop so we can control it from outside\nfunction ProfileScreenContent({\n  tabBarHeight,\n  manualParams,\n  forceOtherProfile\n}: {\n  tabBarHeight: number;\n  manualParams?: ProfileScreenRouteParams;\n  forceOtherProfile?: boolean;\n}) {\n  const route = useRoute();\n  const { t } = useTranslation(['profile', 'common']);\n  const { selectedUser, setSelectedUserWithMode, isRealAuth } = useUser();\n  const navigation = useNavigation();\n  const { ToastComponent } = useToast();\n  const defaultLogo = require('../assets/images/android-chrome-192x192.png');\n\n  // Get route params for viewing other users' profiles\n  // Use manualParams if provided (from props), otherwise route.params\n  let routeParams = manualParams || (route.params as ProfileScreenRouteParams | undefined);\n\n  // On Web, handle refresh (F5) by restoring params from localStorage if route params are missing\n  const STORAGE_KEY = 'profileScreenParams';\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    if (!routeParams && !manualParams) {\n      // Try to restore from localStorage\n      try {\n        const stored = localStorage.getItem(STORAGE_KEY);\n        if (stored) {\n          const parsedParams = JSON.parse(stored);\n          routeParams = parsedParams;\n          console.log('ğŸ‘¤ ProfileScreen - Restored params from localStorage:', parsedParams);\n        }\n      } catch (error) {\n        console.warn('Failed to restore params from localStorage:', error);\n      }\n    } else if (routeParams?.userId) {\n      // Save params to localStorage when viewing other user's profile\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify({\n          userId: routeParams.userId,\n          userName: routeParams.userName,\n          // Don't save characterData as it might be large\n        }));\n      } catch (error) {\n        console.warn('Failed to save params to localStorage:', error);\n      }\n    }\n  }\n\n  const { userId: externalUserId, userName: externalUserName, characterData: externalCharacterData } = routeParams || {};\n\n  // Determine if viewing own profile or other user's profile\n  // CRITICAL: If externalUserId exists and equals selectedUser.id, it's OWN profile!\n  // Only if externalUserId exists and is DIFFERENT from selectedUser.id, it's another user's profile\n  // If no externalUserId, it's own profile (default)\n\n  // Normalize IDs to strings for comparison (in case one is number and one is string)\n  const normalizedExternalUserId = externalUserId ? String(externalUserId).trim() : null;\n  const normalizedSelectedUserId = selectedUser?.id ? String(selectedUser.id).trim() : null;\n\n  // Check if viewing own profile: \n  // 1. Force other profile is FALSE AND\n  // 2. (no externalUserId OR externalUserId equals selectedUser.id)\n  const isOwnProfile = !forceOtherProfile &&\n    (!normalizedExternalUserId ||\n      (normalizedExternalUserId === normalizedSelectedUserId));\n\n  const targetUserId = externalUserId || selectedUser?.id;\n\n  // Debug log to help identify the issue\n  console.log('ğŸ‘¤ ProfileScreenContent - Profile check:', {\n    externalUserId,\n    normalizedExternalUserId,\n    selectedUserId: selectedUser?.id,\n    normalizedSelectedUserId,\n    isOwnProfile,\n    areEqual: normalizedExternalUserId === normalizedSelectedUserId,\n    hasExternalUserId: !!externalUserId,\n    hasSelectedUser: !!selectedUser\n  });\n\n  const [index, setIndex] = useState(0);\n  const [showMenu, setShowMenu] = useState(false);\n  const [tabHeights, setTabHeights] = useState<Record<string, number>>({});\n\n  const handleTabHeightChange = (key: string, height: number) => {\n    // Add some buffer and min height\n    const newHeight = Math.max(height, 500);\n    setTabHeights(prev => {\n      if (Math.abs((prev[key] || 0) - newHeight) < 10) return prev;\n      return { ...prev, [key]: newHeight };\n    });\n  };\n  const [userStats, setUserStats] = useState({\n    posts: 0,\n    followers: 0,\n    following: 0,\n    karmaPoints: 0,\n    completedTasks: 0,\n    totalDonations: 0,\n  });\n  const [recentActivities, setRecentActivities] = useState<any[]>([]);\n  const [selectedActivity, setSelectedActivity] = useState<any | null>(null);\n  const [showActivityModal, setShowActivityModal] = useState(false);\n\n  // State for viewing other user's profile\n  const [viewingUser, setViewingUser] = useState<CharacterType | null>(externalCharacterData || null);\n  const [isFollowing, setIsFollowing] = useState(false);\n  const [followStats, setFollowStats] = useState({ followersCount: 0, followingCount: 0, isFollowing: false });\n  const [updatedCounts, setUpdatedCounts] = useState({ followersCount: 0, followingCount: 0 });\n  const [loadingUser, setLoadingUser] = useState(!isOwnProfile && !externalCharacterData);\n\n  // The user to display (either selectedUser for own profile, or viewingUser for other user's profile)\n  const displayUser = isOwnProfile ? selectedUser : viewingUser;\n\n  // Clean up localStorage when viewing own profile or when component unmounts\n  useEffect(() => {\n    if (isOwnProfile && Platform.OS === 'web' && typeof window !== 'undefined') {\n      try {\n        localStorage.removeItem(STORAGE_KEY);\n      } catch (error) {\n        // Ignore errors\n      }\n    }\n  }, [isOwnProfile]);\n\n  // Load user data from backend if viewing other user's profile\n  useEffect(() => {\n    const loadUser = async () => {\n      if (isOwnProfile || !externalUserId) {\n        return;\n      }\n\n      if (!externalCharacterData && externalUserId && USE_BACKEND) {\n        try {\n          setLoadingUser(true);\n          const response = await apiService.getUserById(externalUserId);\n          if (response.success && response.data) {\n            const userData = response.data as any;\n            const mappedUser: CharacterType = {\n              id: userData.id,\n              name: userData.name || externalUserName || '×œ×œ× ×©×',\n              avatar: userData.avatar_url || userData.avatar || 'https://i.pravatar.cc/150?img=1',\n              bio: userData.bio || '',\n              karmaPoints: userData.karma_points || 0,\n              completedTasks: 0,\n              roles: userData.roles || ['user'],\n              isVerified: userData.is_verified || false,\n              location: userData.city ? {\n                city: userData.city,\n                country: userData.country || '×™×©×¨××œ'\n              } : { city: '×™×©×¨××œ', country: 'IL' },\n              joinDate: userData.join_date || userData.created_at || new Date().toISOString(),\n              interests: userData.interests || [],\n              parentManagerId: userData.parent_manager_id || null,\n            };\n            setViewingUser(mappedUser);\n            // Save userId to localStorage after successful load (Web only)\n            if (Platform.OS === 'web' && typeof window !== 'undefined') {\n              try {\n                localStorage.setItem(STORAGE_KEY, JSON.stringify({\n                  userId: externalUserId,\n                  userName: mappedUser.name,\n                }));\n              } catch (error) {\n                // Ignore errors\n              }\n            }\n          } else {\n            console.warn('User not found:', externalUserId);\n            setViewingUser(null);\n          }\n        } catch (error) {\n          console.error('âŒ Load user error:', error);\n          if (externalUserName && externalUserName !== '××©×ª××© ×œ× ×™×“×•×¢') {\n            setViewingUser({\n              id: externalUserId,\n              name: externalUserName || '×œ×œ× ×©×',\n              avatar: 'https://i.pravatar.cc/150?img=1',\n              bio: '',\n              karmaPoints: 0,\n              completedTasks: 0,\n              roles: ['user'],\n              isVerified: false,\n              location: { city: '×™×©×¨××œ', country: 'IL' },\n              joinDate: new Date().toISOString(),\n              interests: [],\n            });\n          } else {\n            setViewingUser(null);\n          }\n        } finally {\n          setLoadingUser(false);\n        }\n      } else if (externalCharacterData) {\n        setViewingUser(externalCharacterData);\n        setLoadingUser(false);\n      } else if (!USE_BACKEND && externalUserId && externalUserName) {\n        setViewingUser({\n          id: externalUserId,\n          name: externalUserName || '×œ×œ× ×©×',\n          avatar: 'https://i.pravatar.cc/150?img=1',\n          bio: '',\n          karmaPoints: 0,\n          completedTasks: 0,\n          roles: ['user'],\n          isVerified: false,\n          location: { city: '×™×©×¨××œ', country: 'IL' },\n          joinDate: new Date().toISOString(),\n          interests: [],\n        });\n        setLoadingUser(false);\n      }\n    };\n\n    loadUser();\n  }, [externalUserId, externalUserName, externalCharacterData, isOwnProfile]);\n\n  // Load follow stats when viewing other user's profile\n  useEffect(() => {\n    const loadFollowStats = async () => {\n      if (isOwnProfile || !viewingUser || !selectedUser || !viewingUser.id) return;\n\n      try {\n        console.log('ğŸ‘¤ ProfileScreen - Loading follow stats for user:', viewingUser.name);\n        const stats = await getFollowStats(viewingUser.id, selectedUser.id);\n        const counts = await getUpdatedFollowCounts(viewingUser.id);\n        setFollowStats(stats);\n        setUpdatedCounts(counts);\n        setIsFollowing(stats.isFollowing);\n      } catch (error) {\n        console.error('âŒ Load follow stats error:', error);\n      }\n    };\n\n    loadFollowStats();\n  }, [viewingUser, selectedUser, isOwnProfile]);\n\n  // Function to update user statistics\n  const updateUserStats = async () => {\n    try {\n      const userIdToUse = isOwnProfile ? selectedUser?.id : viewingUser?.id;\n      if (!userIdToUse) {\n        console.warn('âš ï¸ No user ID, skipping stats update');\n        return;\n      }\n\n      const currentUserStats = await getFollowStats(userIdToUse, userIdToUse);\n      const userToUse = isOwnProfile ? selectedUser : viewingUser;\n\n      setUserStats({\n        posts: (userToUse as any)?.postsCount || 0,\n        followers: currentUserStats.followersCount,\n        following: currentUserStats.followingCount,\n        karmaPoints: userToUse?.karmaPoints || 0,\n        completedTasks: (userToUse as any)?.completedTasks || 0,\n        totalDonations: (userToUse as any)?.totalDonations || 0,\n      });\n    } catch (error) {\n      console.error('âŒ Update user stats error:', error);\n    }\n  };\n\n  // Function to load recent user activities from database (only for own profile)\n  const loadRecentActivities = async () => {\n    try {\n      if (!isOwnProfile) {\n        setRecentActivities([]);\n        return;\n      }\n\n      if (!selectedUser?.id) {\n        setRecentActivities([]);\n        return;\n      }\n\n      const activities: any[] = [];\n      const userId = selectedUser.id;\n\n      // Load posts\n      try {\n        const { db } = require('../utils/databaseService');\n        const userPosts = await db.getUserPosts(userId) || [];\n        userPosts.forEach((post: any) => {\n          activities.push({\n            id: `post_${post.id}`,\n            type: 'post',\n            title: post.title || post.content || '×¤×•×¡×˜ ×—×“×©',\n            time: post.created_at || post.createdAt || new Date().toISOString(),\n            icon: 'image-outline',\n            color: colors.info,\n            rawData: post\n          });\n        });\n      } catch (error) {\n        console.error('Error loading posts:', error);\n      }\n\n      // Load items/donations\n      try {\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        let userItems: any[] = [];\n\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            const response = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: {\n                owner_id: userId,\n                limit: 20,\n              }\n            });\n            if (response.data?.success && Array.isArray(response.data.data)) {\n              userItems = response.data.data;\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          const { db } = require('../utils/databaseService');\n          userItems = await db.getDedicatedItemsByOwner(userId) || [];\n        }\n\n        userItems.forEach((item: any) => {\n          activities.push({\n            id: `item_${item.id}`,\n            type: 'item',\n            title: item.title || '×¤×¨×™×˜ ×—×“×©',\n            time: item.created_at || item.createdAt || new Date().toISOString(),\n            icon: 'cube-outline',\n            color: colors.pink,\n            rawData: item\n          });\n        });\n      } catch (error) {\n        console.error('Error loading items:', error);\n      }\n\n      // Load donations - filter by createdBy after loading\n      try {\n        const allDonations = await enhancedDB.getDonations({});\n        const userDonations = allDonations.filter((donation: any) => {\n          const createdBy = donation.createdBy || donation.created_by || donation.donor_id || donation.donorId;\n          return createdBy === userId;\n        });\n\n        userDonations.forEach((donation: any) => {\n          const donationTitle = donation.type === 'money'\n            ? `×ª×¨×•××”: ${donation.amount || 0} â‚ª`\n            : donation.type === 'time'\n              ? `×”×ª× ×“×‘×•×ª: ${donation.title || ''}`\n              : donation.type === 'trump'\n                ? `×˜×¨××¤: ${donation.title || ''}`\n                : donation.title || '×ª×¨×•××” ×—×“×©×”';\n\n          activities.push({\n            id: `donation_${donation.id}`,\n            type: 'donation',\n            title: donationTitle,\n            time: donation.created_at || donation.createdAt || new Date().toISOString(),\n            icon: 'heart-outline',\n            color: colors.error,\n            rawData: donation\n          });\n        });\n      } catch (error) {\n        console.error('Error loading donations:', error);\n      }\n\n      // Load rides using the correct API endpoint\n      try {\n        const userRidesResponse = await apiService.getUserRides(userId, 'driver');\n        if (userRidesResponse.success && Array.isArray(userRidesResponse.data)) {\n          userRidesResponse.data.forEach((ride: any) => {\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '×œ× ×¦×•×™×™×Ÿ';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '×œ× ×¦×•×™×™×Ÿ';\n            activities.push({\n              id: `ride_${ride.id}`,\n              type: 'ride',\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              time: ride.created_at || ride.createdAt || new Date().toISOString(),\n              icon: 'car-sport-outline',\n              color: colors.info,\n              rawData: ride\n            });\n          });\n        }\n      } catch (error) {\n        console.error('Error loading rides:', error);\n      }\n\n      // Load task posts (both assignment and completion) with proper icons\n      try {\n        const taskPostsRes = await apiService.getUserPosts(userId, 50, selectedUser?.id);\n        if (taskPostsRes.success && Array.isArray(taskPostsRes.data)) {\n          taskPostsRes.data.forEach((p: any) => {\n            if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n              const icon = p.post_type === 'task_assignment'\n                ? 'add-circle-outline'\n                : 'checkmark-circle-outline';\n              const color = p.post_type === 'task_assignment'\n                ? colors.info\n                : colors.success;\n              const typeLabel = p.post_type === 'task_assignment'\n                ? '××©×™××” ×—×“×©×”'\n                : '××©×™××” ×”×•×©×œ××”';\n\n              activities.push({\n                id: `taskpost_${p.id}`,\n                type: 'task_post',\n                subtype: p.post_type,\n                title: p.title || typeLabel,\n                time: p.created_at || new Date().toISOString(),\n                icon,\n                color,\n                rawData: p\n              });\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error loading task posts:', error);\n      }\n\n      // Load tasks (all statuses) - for tasks without posts (legacy)\n      try {\n        // Get task IDs we already added from posts\n        const existingTaskIds = new Set(\n          activities\n            .filter((a: any) => a.type === 'task_post' && a.rawData?.task?.id)\n            .map((a: any) => a.rawData.task.id)\n        );\n\n        const tasksRes = await apiService.getTasks({ assignee: userId, limit: 50 });\n        if (tasksRes.success && Array.isArray(tasksRes.data)) {\n          tasksRes.data.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              return;\n            }\n\n            activities.push({\n              id: `task_${task.id}`,\n              type: 'task',\n              title: task.title || '××©×™××” ×—×“×©×”',\n              time: task.created_at || new Date().toISOString(),\n              icon: 'checkmark-circle-outline',\n              color: colors.success,\n              rawData: task\n            });\n          });\n        }\n      } catch (error) {\n        console.error('Error loading tasks:', error);\n      }\n\n      // Sort by time (newest first) and limit to 10\n      activities.sort((a, b) => {\n        const timeA = new Date(a.time).getTime();\n        const timeB = new Date(b.time).getTime();\n        return timeB - timeA;\n      });\n\n      // Format time for display\n      const formattedActivities = activities.slice(0, 10).map(activity => {\n        const activityTime = new Date(activity.time);\n        const now = new Date();\n        const diffMs = now.getTime() - activityTime.getTime();\n        const diffMins = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n\n        let timeText = '';\n        if (diffMins < 1) {\n          timeText = '×œ×¤× ×™ ×¨×’×¢';\n        } else if (diffMins < 60) {\n          timeText = `×œ×¤× ×™ ${diffMins} ×“×§×•×ª`;\n        } else if (diffHours < 24) {\n          timeText = `×œ×¤× ×™ ${diffHours} ×©×¢×•×ª`;\n        } else if (diffDays < 7) {\n          timeText = `×œ×¤× ×™ ${diffDays} ×™××™×`;\n        } else {\n          timeText = activityTime.toLocaleDateString('he-IL');\n        }\n\n        return {\n          ...activity,\n          time: timeText\n        };\n      });\n\n      setRecentActivities(formattedActivities);\n    } catch (error) {\n      console.error('âŒ Load recent activities error:', error);\n      setRecentActivities([]);\n    }\n  };\n\n  // Function to select a random user (demo mode only - disabled)\n  const selectRandomUser = () => {\n    if (isRealAuth) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n      return;\n    }\n    // Demo mode removed - this function is no longer available\n    Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n  };\n\n  // Function to create sample follow data\n  const handleCreateSampleData = async () => {\n    if (isRealAuth) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n      return;\n    }\n    if (!selectedUser?.id) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.noUserSelected'));\n      return;\n    }\n    await createSampleFollowData();\n    await createSampleChatData(selectedUser.id);\n    updateUserStats();\n    Alert.alert(t('profile:alerts.sampleDataTitle'), t('profile:alerts.sampleDataCreated'));\n  };\n  const [routes] = useState<TabRoute[]>([\n    { key: 'open', title: '×¤×ª×•×—' },\n    { key: 'closed', title: '×¡×’×•×¨' },\n    { key: 'tagged', title: '×ª×™×•×’×™×' },\n  ]);\n\n  // Update stats when user changes\n  useEffect(() => {\n    const updateStats = async () => {\n      await updateUserStats();\n    };\n    updateStats();\n  }, [selectedUser, viewingUser, isOwnProfile]);\n\n  // Refresh stats when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      const refreshStats = async () => {\n        console.log('ğŸ‘¤ ProfileScreen - Screen focused, refreshing stats...', { isOwnProfile, targetUserId });\n        await updateUserStats();\n        if (isOwnProfile) {\n          await loadRecentActivities();\n        } else if (viewingUser && selectedUser) {\n          // Refresh follow stats for other user's profile\n          try {\n            const stats = await getFollowStats(viewingUser.id, selectedUser.id);\n            const counts = await getUpdatedFollowCounts(viewingUser.id);\n            setFollowStats(stats);\n            setUpdatedCounts(counts);\n            setIsFollowing(stats.isFollowing);\n          } catch (error) {\n            console.error('âŒ Refresh follow stats error:', error);\n          }\n        }\n\n        // Force re-render by updating a timestamp\n        const refreshTimestamp = Date.now();\n        setUserStats(prevStats => ({\n          ...prevStats,\n          refreshTimestamp\n        }));\n      };\n      refreshStats();\n    }, [selectedUser, viewingUser, isOwnProfile, targetUserId])\n  );\n\n  // Load activities when selectedUser changes (only for own profile)\n  useEffect(() => {\n    if (isOwnProfile) {\n      loadRecentActivities();\n    }\n  }, [selectedUser, isOwnProfile]);\n\n  const renderScene = ({ route: sceneRoute }: SceneRendererProps & { route: TabRoute }) => {\n    switch (sceneRoute.key) {\n      case 'open':\n        return <OpenRoute userId={targetUserId} user={displayUser} onHeightChange={(h) => handleTabHeightChange('open', h)} />;\n      case 'closed':\n        return <ClosedRoute userId={targetUserId} user={displayUser} onHeightChange={(h) => handleTabHeightChange('closed', h)} />;\n      case 'tagged':\n        return <TaggedRoute onHeightChange={(h) => handleTabHeightChange('tagged', h)} />;\n      default:\n        return null;\n    }\n  };\n\n  const currentTabHeight = tabHeights[routes[index].key] || 600;\n\n\n  const renderTabBar = (\n    props: SceneRendererProps & { navigationState: NavigationState<TabRoute> }\n  ) => (\n    <View style={styles.tabBarContainer}>\n      <View style={styles.tabBarInner}>\n        {props.navigationState.routes.map((route, index) => {\n          const isFocused = props.navigationState.index === index;\n          return (\n            <TouchableOpacity\n              key={route.key}\n              style={styles.tabBarItem}\n              onPress={() => props.jumpTo(route.key)}\n            >\n              <Text\n                style={[\n                  styles.tabBarText,\n                  {\n                    color: isFocused ? colors.secondary : colors.textSecondary,\n                    fontWeight: isFocused ? 'bold' : 'normal',\n                  }\n                ]}\n              >\n                {route.title}\n              </Text>\n              {isFocused && <View style={styles.tabBarIndicator} />}\n            </TouchableOpacity>\n          );\n        })}\n      </View>\n    </View>\n  );\n\n  // User Statistics are now managed by state and updated via useFocusEffect\n  // Recent Activities are now loaded from database (see loadRecentActivities function)\n\n  // Derived display values\n  const avatarSource = displayUser?.avatar ? { uri: displayUser.avatar } : defaultLogo;\n\n  // Show error if viewing other user's profile and user not found\n  if (!isOwnProfile && !loadingUser && !viewingUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"person-outline\" size={60} color={colors.textSecondary} />\n          <Text style={styles.errorText}>××©×ª××© ×œ× × ××¦×</Text>\n          <Text style={styles.errorSubtext}>userId: {externalUserId}</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => {\n              if (navigation.canGoBack()) {\n                navigation.goBack();\n              } else {\n                (navigation as any).navigate('HomeStack');\n              }\n            }}\n          >\n            <Ionicons name=\"home\" size={20} color={colors.white} />\n            <Text style={styles.backButtonText}>×—×–×¨×” ×œ×¢××•×“ ×”×‘×™×ª</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Show loading if loading other user's profile\n  if (!isOwnProfile && loadingUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"hourglass-outline\" size={60} color={colors.textSecondary} />\n          <Text style={styles.errorText}>×˜×•×¢×Ÿ...</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {Platform.OS === 'web' ? (\n        <View style={styles.webScrollContainer}>\n          <View\n            style={[styles.webScrollContent, { paddingBottom: tabBarHeight + scaleSize(24) }]}\n            onLayout={(e) => {\n              const h = e.nativeEvent.layout.height;\n              console.log('ğŸ§­ ProfileScreen[WEB] content layout height:', h, 'window:', SCREEN_HEIGHT);\n            }}\n          >\n            {/* Header for other user's profile */}\n            {!isOwnProfile && (\n              <View style={styles.header}>\n                <TouchableOpacity\n                  style={styles.headerIcon}\n                  onPress={() => navigation.goBack()}\n                >\n                  <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n                </TouchableOpacity>\n                <Text style={styles.username}>{displayUser?.name || externalUserName || '×œ×œ× ×©×'}</Text>\n                <TouchableOpacity\n                  style={styles.headerIcon}\n                  onPress={() => Alert.alert('××¤×©×¨×•×™×•×ª', '×¤×ª×™×—×ª ××¤×©×¨×•×™×•×ª')}\n                >\n                  <Ionicons name=\"ellipsis-horizontal\" size={24} color={colors.textPrimary} />\n                </TouchableOpacity>\n              </View>\n            )}\n\n            {/* Completion Banner - only for own profile */}\n            {isOwnProfile && <ProfileCompletionBanner />}\n\n            {/* Profile Info with Menu Icon */}\n            <View style={styles.profileInfo}>\n              {isOwnProfile && (\n                <TouchableOpacity\n                  style={styles.menuIcon}\n                  onPress={() => setShowMenu(!showMenu)}\n                >\n                  <Ionicons name=\"menu\" size={scaleSize(24)} color={colors.textPrimary} />\n                </TouchableOpacity>\n              )}\n              <View style={styles.profileSection}>\n                <Image source={avatarSource} style={styles.profilePicture} />\n              </View>\n\n              <View style={styles.statsContainer}>\n                {isOwnProfile && !isRealAuth && (\n                  <View style={styles.statItem}>\n                    <Text style={styles.statNumber}>{userStats.posts}</Text>\n                    <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                  </View>\n                )}\n                {!isOwnProfile && (\n                  <View style={styles.statItem}>\n                    <Text style={styles.statNumber}>{(displayUser as any)?.postsCount || 0}</Text>\n                    <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                  </View>\n                )}\n                <TouchableOpacity\n                  style={styles.statItem}\n                  onPress={() => {\n                    if (!targetUserId) return;\n                    (navigation as any).navigate('FollowersScreen', {\n                      userId: targetUserId,\n                      type: 'followers',\n                      title: t('profile:followersTitle')\n                    });\n                  }}\n                >\n                  <Text style={styles.statNumber}>{isOwnProfile ? userStats.followers : updatedCounts.followersCount}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.followers')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.statItem}\n                  onPress={() => {\n                    if (!targetUserId) return;\n                    (navigation as any).navigate('FollowersScreen', {\n                      userId: targetUserId,\n                      type: 'following',\n                      title: t('profile:followingTitle')\n                    });\n                  }}\n                >\n                  <Text style={styles.statNumber}>{isOwnProfile ? userStats.following : updatedCounts.followingCount}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.following')}</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Menu Modal with Backdrop - only for own profile */}\n            {isOwnProfile && showMenu && (\n              <TouchableWithoutFeedback onPress={() => setShowMenu(false)}>\n                <View style={styles.menuBackdrop}>\n                  <TouchableWithoutFeedback onPress={() => { }}>\n                    <View style={styles.menuOverlay}>\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          navigation.navigate('BookmarksScreen' as never);\n                        }}\n                      >\n                        <Ionicons name=\"bookmark-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.bookmarks')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n\n                        }}\n                      >\n                        <Ionicons name=\"analytics-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.communityStats')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.shareProfile'), t('profile:alerts.shareProfileDesc'));\n                        }}\n                      >\n                        <Ionicons name=\"share-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.shareProfile')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          (navigation as any).navigate('EditProfileScreen');\n                        }}\n                      >\n                        <Ionicons name=\"create-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.editProfile')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.settings'), t('profile:alerts.openSettings'));\n                        }}\n                      >\n                        <Ionicons name=\"settings-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.settings')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.help'), t('profile:alerts.openHelp'));\n                        }}\n                      >\n                        <Ionicons name=\"help-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.help')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          navigation.navigate('LoginScreen' as never);\n                        }}\n                      >\n                        <Ionicons name=\"log-in-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.login')}</Text>\n                      </TouchableOpacity>\n\n                      {!isRealAuth && (\n                        <>\n                          <TouchableOpacity\n                            style={styles.menuItem}\n                            onPress={selectRandomUser}\n                          >\n                            <Ionicons name=\"shuffle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                            <Text style={styles.menuItemText}>{t('profile:menu.switchUser')}</Text>\n                          </TouchableOpacity>\n\n                          <TouchableOpacity\n                            style={styles.menuItem}\n                            onPress={handleCreateSampleData}\n                          >\n                            <Ionicons name=\"add-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                            <Text style={styles.menuItemText}>{t('profile:menu.createSampleData')}</Text>\n                          </TouchableOpacity>\n                        </>\n                      )}\n                    </View>\n                  </TouchableWithoutFeedback>\n                </View>\n              </TouchableWithoutFeedback>\n            )}\n\n            {/* Bio Section */}\n            <View style={styles.bioSection}>\n              <Text style={styles.fullName}>{displayUser?.name || externalUserName || ''}</Text>\n              {!!displayUser?.bio && (\n                <Text style={styles.bioText}>{displayUser.bio}</Text>\n              )}\n              {!!(typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city) && (\n                <Text style={styles.locationText}>\n                  <Ionicons name=\"location-outline\" size={scaleSize(14)} color={colors.textSecondary} />{' '}\n                  {typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city || ''}\n                </Text>\n              )}\n\n              {/* Additional user details for other user's profile */}\n              {!isOwnProfile && displayUser && (\n                <View style={styles.characterDetails}>\n                  {/* Verification badge */}\n                  {(displayUser as CharacterType).isVerified && (\n                    <View style={styles.verificationBadge}>\n                      <Ionicons name=\"checkmark-circle\" size={16} color={colors.info} />\n                      <Text style={styles.verifiedText}>×××•××ª</Text>\n                    </View>\n                  )}\n\n                  {/* Roles */}\n                  {displayUser.roles && displayUser.roles.length > 0 && (\n                    <View style={styles.rolesContainer}>\n                      {displayUser.roles.map((role, index) => (\n                        <View key={index} style={styles.roleTag}>\n                          <Text style={styles.roleText}>{getRoleDisplayName(role)}</Text>\n                        </View>\n                      ))}\n                    </View>\n                  )}\n\n                  {/* Interests */}\n                  {displayUser.interests && displayUser.interests.length > 0 && (\n                    <View style={styles.interestsContainer}>\n                      <Text style={styles.sectionTitle}>×ª×—×•××™ ×¢× ×™×™×Ÿ:</Text>\n                      <View style={styles.interestsList}>\n                        {displayUser.interests.slice(0, 4).map((interest, index) => (\n                          <Text key={index} style={styles.interestTag}>#{interest}</Text>\n                        ))}\n                      </View>\n                    </View>\n                  )}\n\n                  {/* Join date */}\n                  {displayUser.joinDate && (\n                    <Text style={styles.joinDate}>\n                      ×”×¦×˜×¨×£ ×‘-{new Date(displayUser.joinDate).toLocaleDateString('he-IL')}\n                    </Text>\n                  )}\n                </View>\n              )}\n\n              {/* Karma Points */}\n              <View style={styles.karmaSection}>\n                <View style={styles.karmaCard}>\n                  <Ionicons name=\"star\" size={scaleSize(20)} color={colors.warning} />\n                  <Text style={styles.karmaText}>{(displayUser?.karmaPoints || userStats.karmaPoints)} {t('profile:stats.karmaPointsSuffix')}</Text>\n                </View>\n              </View>\n\n              {/* Activity Icons - only for own profile */}\n              {isOwnProfile && !isRealAuth && (\n                <View style={styles.activityIcons}>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.activity'), t('profile:alerts.viewActivity'))}\n                  >\n                    <Ionicons name=\"star-outline\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:activity')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.history'), t('profile:alerts.activityHistory'))}\n                  >\n                    <MaterialCommunityIcons name=\"history\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:history')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.favorites'), t('profile:alerts.yourFavorites'))}\n                  >\n                    <Ionicons name=\"heart-outline\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:favorites')}</Text>\n                  </TouchableOpacity>\n                </View>\n              )}\n            </View>\n\n            {/* Action Buttons */}\n            <View style={styles.actionButtonsContainer}>\n              {isOwnProfile ? (\n                <>\n                  <TouchableOpacity\n                    style={styles.discoverPeopleButton}\n                    onPress={() => {\n                      navigation.navigate('DiscoverPeopleScreen' as never);\n                    }}\n                  >\n                    <Ionicons name=\"person-add-outline\" size={scaleSize(18)} color={colors.white} />\n                    <Text style={styles.discoverPeopleText}>{t('profile:discoverPeople')}</Text>\n                  </TouchableOpacity>\n                </>\n              ) : (\n                <>\n                  {selectedUser && displayUser && selectedUser.id !== displayUser.id && (\n                    <>\n                      <TouchableOpacity\n                        style={[\n                          styles.followButton,\n                          isFollowing && styles.followingButton\n                        ]}\n                        onPress={async () => {\n                          if (!selectedUser) {\n                            Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n                            return;\n                          }\n\n                          try {\n                            if (!displayUser?.id) {\n                              Alert.alert('×©×’×™××”', '××©×ª××© ×œ× × ××¦×');\n                              return;\n                            }\n\n                            if (isFollowing) {\n                              const success = await unfollowUser(selectedUser.id, displayUser.id);\n                              if (success) {\n                                setIsFollowing(false);\n                                const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                                setUpdatedCounts(newCounts);\n                                setFollowStats(prev => ({ ...prev, isFollowing: false }));\n                                Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n                              }\n                            } else {\n                              const success = await followUser(selectedUser.id, displayUser.id);\n                              if (success) {\n                                setIsFollowing(true);\n                                const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                                setUpdatedCounts(newCounts);\n                                setFollowStats(prev => ({ ...prev, isFollowing: true }));\n                                Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n                              }\n                            }\n                          } catch (error) {\n                            console.error('âŒ Follow/Unfollow error:', error);\n                            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n                          }\n                        }}\n                      >\n                        <Text style={[\n                          styles.followButtonText,\n                          isFollowing && styles.followingButtonText\n                        ]}>\n                          {isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n                        </Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.messageButton}\n                        onPress={async () => {\n                          if (!selectedUser) {\n                            Alert.alert('×©×’×™××”', '×™×© ×œ×‘×—×•×¨ ×™×•×–×¨ ×ª×—×™×œ×”');\n                            return;\n                          }\n\n                          try {\n                            const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                            let conversationId: string;\n\n                            if (existingConvId) {\n                              console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n                              conversationId = existingConvId;\n                            } else {\n                              console.log('ğŸ’¬ Creating new conversation...');\n                              conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                            }\n\n                            (navigation as any).navigate('ChatDetailScreen', {\n                              conversationId,\n                              otherUserId: displayUser.id,\n                              userName: displayUser.name || externalUserName || '×œ×œ× ×©×',\n                              userAvatar: displayUser.avatar || 'https://i.pravatar.cc/150?img=1',\n                            });\n                          } catch (error) {\n                            console.error('âŒ Create chat error:', error);\n                            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×©×™×—×”');\n                          }\n                        }}\n                      >\n                        <Ionicons name=\"chatbubble-outline\" size={20} color={colors.textPrimary} />\n                        <Text style={styles.messageButtonText}>×”×•×“×¢×”</Text>\n                      </TouchableOpacity>\n\n                      {/* Hierarchy Management Button */}\n                      {(() => {\n                        const isSubordinate = (displayUser as any).parentManagerId === selectedUser.id;\n                        const isMyManager = (selectedUser as any).parentManagerId === displayUser.id;\n\n                        // If they are my manager -> Request Task\n                        if (isMyManager) {\n                          return (\n                            <TouchableOpacity\n                              style={[styles.messageButton, { borderColor: colors.primary, backgroundColor: colors.primary + '10' }]}\n                              onPress={() => {\n                                Alert.alert('×‘×§×©×ª ××©×™××”', '×”×× ×œ×©×œ×•×— ×‘×§×©×ª ××©×™××” ×œ×× ×”×œ ×–×”?', [\n                                  { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                                  {\n                                    text: '×©×œ×—', onPress: async () => {\n                                      // Create conversation and send message\n                                      try {\n                                        const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                                        let conversationId = existingConvId;\n                                        if (!conversationId) {\n                                          conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                                        }\n                                        // Send \"I'd look to help\" message\n                                        // TODO: implement sendMessage in chatService or apiService\n                                        // For now just navigate to chat\n                                        (navigation as any).navigate('ChatDetailScreen', {\n                                          conversationId,\n                                          otherUserId: displayUser.id,\n                                          userName: displayUser.name,\n                                          userAvatar: displayUser.avatar,\n                                          initialMessage: '××©××— ×œ×¢×–×•×¨ ×‘××” ×©×¦×¨×™×š' // Pass this if ChatDetail supports it, or handle locally\n                                        });\n                                      } catch (e) { console.error(e); }\n                                    }\n                                  }\n                                ]);\n                              }}\n                            >\n                              <Ionicons name=\"briefcase-outline\" size={20} color={colors.primary} />\n                              <Text style={[styles.messageButtonText, { color: colors.primary }]}>×‘×§×© ××©×™××”</Text>\n                            </TouchableOpacity>\n                          );\n                        }\n\n                        // Otherwise (Subordinate or unrelated) -> Manage Subordinate\n                        return (\n                          <TouchableOpacity\n                            style={[\n                              styles.messageButton,\n                              isSubordinate ? { backgroundColor: '#ff444410', borderColor: '#ff4444' } : { backgroundColor: colors.secondary + '10', borderColor: colors.secondary }\n                            ]}\n                            onPress={() => {\n                              const action = isSubordinate ? 'remove' : 'add';\n                              const title = isSubordinate ? '×”×¡×¨ ×× ×”×œ' : '×”×¤×•×š ×œ×× ×”×œ ×‘×¦×•×•×ª';\n                              const msg = isSubordinate\n                                ? '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ××©×ª××© ×–×” ×× ×™×”×•×œ ×ª×—×ª×™×š? ×”××©×™××•×ª ×™×•×¢×‘×¨×• ××œ×™×š.'\n                                : '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××©×ª××© ×–×” ×œ×× ×”×œ ×ª×—×ª×™×š?';\n\n                              Alert.alert(title, msg, [\n                                { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                                {\n                                  text: '××™×©×•×¨', style: isSubordinate ? 'destructive' : 'default', onPress: async () => {\n                                    try {\n                                      const res = await apiService.manageHierarchy(displayUser.id!, action, selectedUser.id);\n                                      if (res.success) {\n                                        Alert.alert('×”×¦×œ×—×”', res.message);\n                                        // Update local state to reflect change immediately\n                                        setViewingUser(prev => prev ? ({ ...prev, parentManagerId: action === 'add' ? selectedUser.id : null }) : null);\n                                      } else {\n                                        Alert.alert('×©×’×™××”', res.error || '×¤×¢×•×œ×” × ×›×©×œ×”');\n                                      }\n                                    } catch (err) {\n                                      console.error(err);\n                                      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×ª×§×©×•×¨×ª');\n                                    }\n                                  }\n                                }\n                              ]);\n                            }}\n                          >\n                            <Ionicons name={isSubordinate ? \"person-remove-outline\" : \"person-add-outline\"} size={20} color={isSubordinate ? '#ff4444' : colors.secondary} />\n                            <Text style={[styles.messageButtonText, { color: isSubordinate ? '#ff4444' : colors.secondary }]}>\n                              {isSubordinate ? '×”×¡×¨ ×× ×”×œ' : '×”×¤×•×š ×œ×× ×”×œ'}\n                            </Text>\n                          </TouchableOpacity>\n                        );\n                      })()}\n                    </>\n                  )}\n                </>\n              )}\n            </View>\n\n            {/* Recent Activities - only for own profile */}\n            {isOwnProfile && (\n              <View style={styles.activitiesSection}>\n                <Text style={styles.sectionTitle}>{t('profile:sections.recentActivity')}</Text>\n                {recentActivities.length === 0 ? (\n                  <View style={styles.emptyActivitiesContainer}>\n                    <Ionicons name=\"time-outline\" size={scaleSize(40)} color={colors.textSecondary} />\n                    <Text style={styles.emptyActivitiesText}>{t('profile:recent.noActivityYet', '××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ×¢×“×™×™×Ÿ')}</Text>\n                    <Text style={styles.emptyActivitiesSubtext}>{t('profile:recent.startCreating', '×”×ª×—×œ ×œ×™×¦×•×¨ ×ª×•×›×Ÿ ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×™×•×ª ×©×œ×š ×›××Ÿ')}</Text>\n                  </View>\n                ) : (\n                  recentActivities.map((activity) => (\n                    <TouchableOpacity\n                      key={activity.id}\n                      style={styles.activityItem}\n                      onPress={() => {\n                        // Open modal for item and ride types\n                        if (activity.type === 'item' || activity.type === 'ride') {\n                          setSelectedActivity(activity);\n                          setShowActivityModal(true);\n                        } else {\n                          // For post and donation, show alert for now\n                          Alert.alert(activity.title, activity.time);\n                        }\n                      }}\n                    >\n                      <View style={[styles.activityIcon, { backgroundColor: activity.color + '20' }]}>\n                        <Ionicons name={activity.icon as any} size={16} color={activity.color} />\n                      </View>\n                      <View style={styles.activityContent}>\n                        <Text style={styles.activityTitle}>{activity.title}</Text>\n                        <Text style={styles.activityTime}>{activity.time}</Text>\n                      </View>\n                    </TouchableOpacity>\n                  ))\n                )}\n              </View>\n            )}\n\n            {/* Story Highlights - only for own profile */}\n            {isOwnProfile && (\n              <View style={styles.highlightsSection}>\n                <Text style={styles.sectionTitle}>{t('profile:sections.highlights')}</Text>\n                <ScrollView\n                  horizontal\n                  showsHorizontalScrollIndicator={false}\n                  contentContainerStyle={styles.storyHighlightsContentContainer}\n                >\n                  {(isRealAuth ? [0] : Array.from({ length: 8 }).map((_, i) => i)).map((i) => (\n                    <TouchableOpacity\n                      key={i}\n                      style={styles.storyHighlightItem}\n                      onPress={() => {\n                        if (i === 0) {\n                          Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.new'));\n                        } else {\n                          Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.highlightIndex', { index: (i + 1).toString() }));\n                        }\n                      }}\n                    >\n                      <View style={styles.storyHighlightCircle}>\n                        {i === 0 ? (\n                          <Ionicons name=\"add\" size={scaleSize(24)} color={colors.secondary} />\n                        ) : (\n                          <Image\n                            source={{ uri: `https://picsum.photos/60/60?random=${i + 10}` }}\n                            style={styles.highlightImage}\n                          />\n                        )}\n                      </View>\n                      <Text style={styles.storyHighlightText}>\n                        {i === 0 ? t('profile:highlights.new') : t('profile:highlights.highlightIndex', { index: i })}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n            )}\n\n            {/* Tab View Container */}\n            <View style={[styles.tabViewContainer, { height: currentTabHeight }]}>\n              <TabView\n                navigationState={{ index, routes }}\n                renderScene={renderScene}\n                onIndexChange={setIndex}\n                initialLayout={{ width: Dimensions.get('window').width }}\n                renderTabBar={renderTabBar}\n              />\n            </View>\n          </View>\n        </View>\n      ) : (\n        <ScrollContainer\n          style={styles.mainScrollView}\n          showsVerticalScrollIndicator={false}\n          keyboardShouldPersistTaps=\"handled\"\n          contentStyle={{ ...styles.mainScrollContent, paddingBottom: tabBarHeight + scaleSize(24) }}\n        >\n          {/* Header for other user's profile */}\n          {!isOwnProfile && (\n            <View style={styles.header}>\n              <TouchableOpacity\n                style={styles.headerIcon}\n                onPress={() => navigation.goBack()}\n              >\n                <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n              <Text style={styles.username}>{displayUser?.name || externalUserName || '×œ×œ× ×©×'}</Text>\n              <TouchableOpacity\n                style={styles.headerIcon}\n                onPress={() => Alert.alert('××¤×©×¨×•×™×•×ª', '×¤×ª×™×—×ª ××¤×©×¨×•×™×•×ª')}\n              >\n                <Ionicons name=\"ellipsis-horizontal\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n          )}\n\n          {/* Completion Banner - only for own profile */}\n          {isOwnProfile && <ProfileCompletionBanner />}\n\n          {/* Profile Info with Menu Icon */}\n          <View style={styles.profileInfo}>\n            {isOwnProfile && (\n              <TouchableOpacity\n                style={styles.menuIcon}\n                onPress={() => setShowMenu(!showMenu)}\n              >\n                <Ionicons name=\"menu\" size={scaleSize(24)} color={colors.textPrimary} />\n              </TouchableOpacity>\n            )}\n            <View style={styles.profileSection}>\n              <Image source={avatarSource} style={styles.profilePicture} />\n            </View>\n\n            <View style={styles.statsContainer}>\n              {isOwnProfile && !isRealAuth && (\n                <View style={styles.statItem}>\n                  <Text style={styles.statNumber}>{userStats.posts}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                </View>\n              )}\n              {!isOwnProfile && (\n                <View style={styles.statItem}>\n                  <Text style={styles.statNumber}>{(displayUser as any)?.postsCount || 0}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                </View>\n              )}\n              <TouchableOpacity\n                style={styles.statItem}\n                onPress={() => {\n                  if (!targetUserId) return;\n                  (navigation as any).navigate('FollowersScreen', {\n                    userId: targetUserId,\n                    type: 'followers',\n                    title: t('profile:followersTitle')\n                  });\n                }}\n              >\n                <Text style={styles.statNumber}>{isOwnProfile ? userStats.followers : updatedCounts.followersCount}</Text>\n                <Text style={styles.statLabel}>{t('profile:stats.followers')}</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={styles.statItem}\n                onPress={() => {\n                  if (!targetUserId) return;\n                  (navigation as any).navigate('FollowersScreen', {\n                    userId: targetUserId,\n                    type: 'following',\n                    title: t('profile:followingTitle')\n                  });\n                }}\n              >\n                <Text style={styles.statNumber}>{isOwnProfile ? userStats.following : updatedCounts.followingCount}</Text>\n                <Text style={styles.statLabel}>{t('profile:stats.following')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* Menu Modal with Backdrop - only for own profile */}\n          {isOwnProfile && showMenu && (\n            <TouchableWithoutFeedback onPress={() => setShowMenu(false)}>\n              <View style={styles.menuBackdrop}>\n                <TouchableWithoutFeedback onPress={() => { }}>\n                  <View style={styles.menuOverlay}>\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        navigation.navigate('BookmarksScreen' as never);\n                      }}\n                    >\n                      <Ionicons name=\"bookmark-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.bookmarks')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n\n                      }}\n                    >\n                      <Ionicons name=\"analytics-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.communityStats')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.shareProfile'), t('profile:alerts.shareProfileDesc'));\n                      }}\n                    >\n                      <Ionicons name=\"share-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.shareProfile')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        (navigation as any).navigate('EditProfileScreen');\n                      }}\n                    >\n                      <Ionicons name=\"create-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.editProfile')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.settings'), t('profile:alerts.openSettings'));\n                      }}\n                    >\n                      <Ionicons name=\"settings-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.settings')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.help'), t('profile:alerts.openHelp'));\n                      }}\n                    >\n                      <Ionicons name=\"help-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.help')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        navigation.navigate('LoginScreen' as never);\n                      }}\n                    >\n                      <Ionicons name=\"log-in-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.login')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={selectRandomUser}\n                    >\n                      <Ionicons name=\"shuffle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.switchUser')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={handleCreateSampleData}\n                    >\n                      <Ionicons name=\"add-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.createSampleData')}</Text>\n                    </TouchableOpacity>\n                  </View>\n                </TouchableWithoutFeedback>\n              </View>\n            </TouchableWithoutFeedback>\n          )}\n\n          {/* Bio Section */}\n          <View style={styles.bioSection}>\n            <Text style={styles.fullName}>{displayUser?.name || externalUserName || ''}</Text>\n            {!!displayUser?.bio && (\n              <Text style={styles.bioText}>{displayUser.bio}</Text>\n            )}\n            {!!(typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city) && (\n              <Text style={styles.locationText}>\n                <Ionicons name=\"location-outline\" size={scaleSize(14)} color={colors.textSecondary} />{' '}\n                {typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city || ''}\n              </Text>\n            )}\n\n            {/* Additional user details for other user's profile */}\n            {!isOwnProfile && displayUser && (\n              <View style={styles.characterDetails}>\n                {/* Verification badge */}\n                {(displayUser as CharacterType).isVerified && (\n                  <View style={styles.verificationBadge}>\n                    <Ionicons name=\"checkmark-circle\" size={16} color={colors.info} />\n                    <Text style={styles.verifiedText}>×××•××ª</Text>\n                  </View>\n                )}\n\n                {/* Roles */}\n                {displayUser.roles && displayUser.roles.length > 0 && (\n                  <View style={styles.rolesContainer}>\n                    {displayUser.roles.map((role, index) => (\n                      <View key={index} style={styles.roleTag}>\n                        <Text style={styles.roleText}>{getRoleDisplayName(role)}</Text>\n                      </View>\n                    ))}\n                  </View>\n                )}\n\n                {/* Interests */}\n                {displayUser.interests && displayUser.interests.length > 0 && (\n                  <View style={styles.interestsContainer}>\n                    <Text style={styles.sectionTitle}>×ª×—×•××™ ×¢× ×™×™×Ÿ:</Text>\n                    <View style={styles.interestsList}>\n                      {displayUser.interests.slice(0, 4).map((interest, index) => (\n                        <Text key={index} style={styles.interestTag}>#{interest}</Text>\n                      ))}\n                    </View>\n                  </View>\n                )}\n\n                {/* Join date */}\n                {displayUser.joinDate && (\n                  <Text style={styles.joinDate}>\n                    ×”×¦×˜×¨×£ ×‘-{new Date(displayUser.joinDate).toLocaleDateString('he-IL')}\n                  </Text>\n                )}\n              </View>\n            )}\n\n            {/* Karma Points */}\n            <View style={styles.karmaSection}>\n              <View style={styles.karmaCard}>\n                <Ionicons name=\"star\" size={scaleSize(20)} color={colors.warning} />\n                <Text style={styles.karmaText}>{(displayUser?.karmaPoints || userStats.karmaPoints)} {t('profile:stats.karmaPointsSuffix')}</Text>\n              </View>\n            </View>\n\n            {/* Activity Icons - only for own profile */}\n            {isOwnProfile && !isRealAuth && (\n              <View style={styles.activityIcons}>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.activity'), t('profile:alerts.viewActivity'))}\n                >\n                  <Ionicons name=\"star-outline\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:activity')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.history'), t('profile:alerts.activityHistory'))}\n                >\n                  <MaterialCommunityIcons name=\"history\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:history')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.favorites'), t('profile:alerts.yourFavorites'))}\n                >\n                  <Ionicons name=\"heart-outline\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:favorites')}</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n\n          {/* Action Buttons */}\n          <View style={styles.actionButtonsContainer}>\n            {isOwnProfile ? (\n              <>\n                <TouchableOpacity\n                  style={styles.discoverPeopleButton}\n                  onPress={() => {\n                    navigation.navigate('DiscoverPeopleScreen' as never);\n                  }}\n                >\n                  <Ionicons name=\"person-add-outline\" size={scaleSize(18)} color={colors.white} />\n                  <Text style={styles.discoverPeopleText}>{t('profile:discoverPeople')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.notificationsButton}\n                  onPress={() => {\n                    navigation.navigate('NotificationsScreen' as never);\n                  }}\n                >\n                  <Ionicons name=\"notifications-outline\" size={scaleSize(18)} color={colors.white} />\n                  <Text style={styles.notificationsButtonText}>{t('profile:notifications')}</Text>\n                </TouchableOpacity>\n              </>\n            ) : (\n              <>\n                {selectedUser && displayUser && selectedUser.id !== displayUser.id && (\n                  <>\n                    <TouchableOpacity\n                      style={[\n                        styles.followButton,\n                        isFollowing && styles.followingButton\n                      ]}\n                      onPress={async () => {\n                        if (!selectedUser) {\n                          Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n                          return;\n                        }\n\n                        try {\n                          if (!displayUser?.id) {\n                            Alert.alert('×©×’×™××”', '××©×ª××© ×œ× × ××¦×');\n                            return;\n                          }\n\n                          if (isFollowing) {\n                            const success = await unfollowUser(selectedUser.id, displayUser.id);\n                            if (success) {\n                              setIsFollowing(false);\n                              const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                              setUpdatedCounts(newCounts);\n                              setFollowStats(prev => ({ ...prev, isFollowing: false }));\n                              Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n                            }\n                          } else {\n                            const success = await followUser(selectedUser.id, displayUser.id);\n                            if (success) {\n                              setIsFollowing(true);\n                              const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                              setUpdatedCounts(newCounts);\n                              setFollowStats(prev => ({ ...prev, isFollowing: true }));\n                              Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n                            }\n                          }\n                        } catch (error) {\n                          console.error('âŒ Follow/Unfollow error:', error);\n                          Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n                        }\n                      }}\n                    >\n                      <Text style={[\n                        styles.followButtonText,\n                        isFollowing && styles.followingButtonText\n                      ]}>\n                        {isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n                      </Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.messageButton}\n                      onPress={async () => {\n                        if (!selectedUser) {\n                          Alert.alert('×©×’×™××”', '×™×© ×œ×‘×—×•×¨ ×™×•×–×¨ ×ª×—×™×œ×”');\n                          return;\n                        }\n\n                        try {\n                          const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                          let conversationId: string;\n\n                          if (existingConvId) {\n                            console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n                            conversationId = existingConvId;\n                          } else {\n                            console.log('ğŸ’¬ Creating new conversation...');\n                            conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                          }\n\n                          (navigation as any).navigate('ChatDetailScreen', {\n                            conversationId,\n                            otherUserId: displayUser.id,\n                            userName: displayUser.name || externalUserName || '×œ×œ× ×©×',\n                            userAvatar: displayUser.avatar || 'https://i.pravatar.cc/150?img=1',\n                          });\n                        } catch (error) {\n                          console.error('âŒ Create chat error:', error);\n                          Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×©×™×—×”');\n                        }\n                      }}\n                    >\n                      <Ionicons name=\"chatbubble-outline\" size={20} color={colors.textPrimary} />\n                      <Text style={styles.messageButtonText}>×”×•×“×¢×”</Text>\n                    </TouchableOpacity>\n                  </>\n                )}\n              </>\n            )}\n          </View>\n\n          {/* Recent Activities - only for own profile */}\n          {isOwnProfile && (\n            <View style={styles.activitiesSection}>\n              <Text style={styles.sectionTitle}>{t('profile:sections.recentActivity')}</Text>\n              {recentActivities.length === 0 ? (\n                <View style={styles.emptyActivitiesContainer}>\n                  <Ionicons name=\"time-outline\" size={scaleSize(40)} color={colors.textSecondary} />\n                  <Text style={styles.emptyActivitiesText}>{t('profile:recent.noActivityYet', '××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ×¢×“×™×™×Ÿ')}</Text>\n                  <Text style={styles.emptyActivitiesSubtext}>{t('profile:recent.startCreating', '×”×ª×—×œ ×œ×™×¦×•×¨ ×ª×•×›×Ÿ ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×™×•×ª ×©×œ×š ×›××Ÿ')}</Text>\n                </View>\n              ) : (\n                recentActivities.map((activity) => (\n                  <TouchableOpacity\n                    key={activity.id}\n                    style={styles.activityItem}\n                    onPress={() => {\n                      // Open modal for item and ride types\n                      if (activity.type === 'item' || activity.type === 'ride') {\n                        setSelectedActivity(activity);\n                        setShowActivityModal(true);\n                      } else {\n                        // For post and donation, show alert for now\n                        Alert.alert(activity.title, activity.time);\n                      }\n                    }}\n                  >\n                    <View style={[styles.activityIcon, { backgroundColor: activity.color + '20' }]}>\n                      <Ionicons name={activity.icon as any} size={16} color={activity.color} />\n                    </View>\n                    <View style={styles.activityContent}>\n                      <Text style={styles.activityTitle}>{activity.title}</Text>\n                      <Text style={styles.activityTime}>{activity.time}</Text>\n                    </View>\n                  </TouchableOpacity>\n                ))\n              )}\n            </View>\n          )}\n\n          {/* Story Highlights - only for own profile */}\n          {isOwnProfile && (\n            <View style={styles.highlightsSection}>\n              <Text style={styles.sectionTitle}>{t('profile:sections.highlights')}</Text>\n              <ScrollView\n                horizontal\n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={styles.storyHighlightsContentContainer}\n              >\n                {Array.from({ length: 8 }).map((_, i) => (\n                  <TouchableOpacity\n                    key={i}\n                    style={styles.storyHighlightItem}\n                    onPress={() => Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.highlightIndex', { index: (i + 1).toString() }))}\n                  >\n                    <View style={styles.storyHighlightCircle}>\n                      {i === 0 ? (\n                        <Ionicons name=\"add\" size={scaleSize(24)} color={colors.secondary} />\n                      ) : (\n                        <Image\n                          source={{ uri: `https://picsum.photos/60/60?random=${i + 10}` }}\n                          style={styles.highlightImage}\n                        />\n                      )}\n                    </View>\n                    <Text style={styles.storyHighlightText}>\n                      {i === 0 ? t('profile:highlights.new') : t('profile:highlights.highlightIndex', { index: i })}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </View>\n          )}\n\n          {/* Tab View Container */}\n          <View style={[styles.tabViewContainer, { height: currentTabHeight }]}>\n            <TabView\n              navigationState={{ index, routes }}\n              renderScene={renderScene}\n              onIndexChange={setIndex}\n              initialLayout={{ width: Dimensions.get('window').width }}\n              renderTabBar={renderTabBar}\n            />\n          </View>\n        </ScrollContainer>\n      )}\n\n      {/* Activity Details Modal */}\n      {selectedActivity && (selectedActivity.type === 'item' || selectedActivity.type === 'ride') && (\n        <ItemDetailsModal\n          visible={showActivityModal}\n          onClose={() => {\n            setShowActivityModal(false);\n            setSelectedActivity(null);\n          }}\n          item={selectedActivity.rawData}\n          type={selectedActivity.type}\n          navigation={navigation as any}\n          showOwnerInfo={false}\n        />\n      )}\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\n// Wrapper component that calls useBottomTabBarHeight\n// This is used when viewing own profile (in bottom tab navigator)\nfunction ProfileScreenWithTabBar() {\n  const tabBarHeight = useBottomTabBarHeight();\n  return <ProfileScreenContent tabBarHeight={tabBarHeight} />;\n}\n\n// Main export - uses the hook for own profile\n// Main export - uses the hook for own profile\nexport default function ProfileScreen(props: any) {\n  const route = useRoute();\n  let routeParams = route.params as ProfileScreenRouteParams | undefined;\n\n  // On Web, handle refresh (F5) by restoring params from localStorage if route params are missing\n  const STORAGE_KEY = 'profileScreenParams';\n  if (Platform.OS === 'web' && typeof window !== 'undefined' && !routeParams && !props?.userId) {\n    // Try to restore from localStorage when route params are missing (after refresh)\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        const parsedParams = JSON.parse(stored);\n        routeParams = parsedParams;\n        console.log('ğŸ‘¤ ProfileScreen - Restored params from localStorage:', parsedParams);\n      }\n    } catch (error) {\n      console.warn('Failed to restore params from localStorage:', error);\n    }\n  }\n\n  // Allow props to override route params (useful when used as a child component)\n  const propUserId = props?.userId;\n  const propUserName = props?.userName;\n  const propCharacterData = props?.characterData;\n  const isExplicitOtherProfile = props?.isExplicitOtherProfile === true;\n\n  // Use restored params if props are not provided\n  const externalUserId = propUserId || routeParams?.userId;\n  const { selectedUser } = useUser();\n\n  // Determine if viewing own profile or other user's profile\n  // CRITICAL: If externalUserId exists and equals selectedUser.id, it's OWN profile!\n  // Only if externalUserId exists and is DIFFERENT from selectedUser.id, it's another user's profile\n  // If no externalUserId, it's own profile (default - viewing from ProfileTabStack)\n\n  // Normalize IDs to strings for comparison (in case one is number and one is string)\n  const normalizedExternalUserId = externalUserId ? String(externalUserId).trim() : null;\n  const normalizedSelectedUserId = selectedUser?.id ? String(selectedUser.id).trim() : null;\n\n  // Check if viewing other user: \n  // 1. Explicitly requested via prop\n  // 2. externalUserId exists AND it's different from selectedUser.id\n  const isViewingOtherUser = isExplicitOtherProfile ||\n    (normalizedExternalUserId &&\n      normalizedSelectedUserId &&\n      normalizedExternalUserId !== normalizedSelectedUserId);\n\n  // Debug log to help identify the issue\n  console.log('ğŸ‘¤ ProfileScreen - Route check:', {\n    externalUserId,\n    propUserId,\n    normalizedExternalUserId,\n    selectedUserId: selectedUser?.id,\n    normalizedSelectedUserId,\n    isViewingOtherUser,\n    isExplicitOtherProfile,\n    areEqual: normalizedExternalUserId === normalizedSelectedUserId,\n    hasExternalUserId: !!externalUserId,\n    hasSelectedUser: !!selectedUser\n  });\n\n  // If explicitly viewing other profile but no user ID, we need to handle it in Content\n  // Pass params to Content\n  const passedParams: ProfileScreenRouteParams = {\n    userId: externalUserId,\n    userName: propUserName || routeParams?.userName,\n    characterData: propCharacterData || routeParams?.characterData\n  };\n\n  if (isViewingOtherUser) {\n    // Viewing another user's profile - not in bottom tab navigator\n    // Use ProfileScreenContent directly with tabBarHeight = 0 (no hook call)\n    console.log('ğŸ‘¤ ProfileScreen - Using ProfileScreenContent (other user)');\n    // Pass the params via route override or similar mechanism if ProfileScreenContent relies on useRoute\n    // Actually ProfileScreenContent calls useRoute(). We should probably pass props to it.\n    // Let's modify ProfileScreenContent to accept overrides.\n    return <ProfileScreenContent tabBarHeight={0} manualParams={passedParams} forceOtherProfile={true} />;\n  }\n\n  // Viewing own profile (either no externalUserId, or externalUserId === selectedUser.id)\n  // In bottom tab navigator, can use the hook\n  console.log('ğŸ‘¤ ProfileScreen - Using ProfileScreenWithTabBar (own profile)');\n  return <ProfileScreenWithTabBar />;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background\n  },\n  mainScrollView: {\n    flex: 1,\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && {\n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n  },\n  mainScrollContent: {\n    paddingBottom: 20,\n  },\n  profileInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  profileSection: {\n    position: 'relative',\n  },\n  profilePicture: {\n    width: scaleSize(80),\n    height: scaleSize(80),\n    borderRadius: scaleSize(80) / 2,\n    borderWidth: 3,\n    borderColor: colors.secondary,\n  },\n  menuIcon: {\n    position: 'absolute',\n    top: LAYOUT_CONSTANTS.SPACING.SM,\n    right: LAYOUT_CONSTANTS.SPACING.SM,\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    backgroundColor: colors.backgroundSecondary,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    flex: 1,\n    justifyContent: 'space-around',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  statItem: {\n    alignItems: 'center'\n  },\n  statNumber: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  bioSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG\n  },\n  fullName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  bioText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: Math.round(FontSizes.body * 1.4),\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  locationText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  karmaSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  karmaCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    alignSelf: 'flex-start',\n  },\n  karmaText: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIcons: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIconItem: {\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIconText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  actionButtonsContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  discoverPeopleButton: {\n    backgroundColor: colors.secondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  discoverPeopleText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  notificationsButton: {\n    backgroundColor: colors.primary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  notificationsButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activitiesSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  activityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n    elevation: 2,\n  },\n  activityIcon: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    borderRadius: scaleSize(16),\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityContent: {\n    flex: 1,\n  },\n  activityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 2,\n  },\n  activityTime: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  emptyActivitiesContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  emptyActivitiesText: {\n    fontSize: FontSizes.heading3,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center',\n  },\n  emptyActivitiesSubtext: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.body * 1.4),\n  },\n  highlightsSection: {\n    marginBottom: 20,\n  },\n  storyHighlightsContentContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  storyHighlightItem: {\n    alignItems: 'center',\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS\n  },\n  storyHighlightCircle: {\n    width: scaleSize(60),\n    height: scaleSize(60),\n    borderRadius: scaleSize(30),\n    borderWidth: 2,\n    borderColor: colors.border,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  highlightImage: {\n    width: scaleSize(56),\n    height: scaleSize(56),\n    borderRadius: scaleSize(28),\n  },\n  storyHighlightText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  tabViewContainer: {\n    // height: scaleSize(600), // Dynamic height now\n  },\n  tabBarContainer: {\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  tabBarInner: {\n    flexDirection: 'row',\n    width: '100%',\n  },\n  tabBarIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: colors.secondary,\n    height: scaleSize(2),\n  },\n  tabBarItem: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    position: 'relative',\n  },\n  tabBarText: {\n    fontSize: FontSizes.body,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  tabContentContainer: {\n    paddingBottom: 20,\n  },\n  postsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 2,\n    paddingTop: 10,\n  },\n  postContainer: {\n    width: '32%',\n    aspectRatio: 1,\n    margin: 2,\n    position: 'relative',\n  },\n  postImage: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  postOverlay: {\n    position: 'absolute',\n    top: 6,\n    right: 6,\n  },\n  postStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n  },\n  postStatsText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    marginLeft: 4,\n  },\n  ridePlaceholder: {\n    backgroundColor: colors.info + '20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderWidth: 1,\n    borderColor: colors.info + '30',\n  },\n  rideDetailsContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS + 2,\n    alignItems: 'center',\n    width: '100%',\n    paddingHorizontal: 6,\n  },\n  rideDetailsText: {\n    fontSize: FontSizes.small - 1,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n    maxWidth: '90%',\n  },\n  rideArrow: {\n    marginVertical: 3,\n  },\n  taskPlaceholder: {\n    backgroundColor: colors.primary + '20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  taskDetailsContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS + 2,\n    alignItems: 'center',\n    width: '100%',\n    paddingHorizontal: 8,\n  },\n  taskDetailsText: {\n    fontSize: FontSizes.small - 1,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n    maxWidth: '95%',\n  },\n  tabContentPlaceholder: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: 300,\n    padding: 20,\n  },\n  placeholderText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 15,\n    marginBottom: 8,\n  },\n  placeholderSubtext: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n    marginBottom: 20,\n  },\n  createButton: {\n    backgroundColor: colors.secondary,\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 25,\n  },\n  createButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  menuBackdrop: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.3)',\n    zIndex: 1000,\n  },\n  menuOverlay: {\n    position: 'absolute',\n    top: 100,\n    left: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 8,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.2, 8),\n    zIndex: 1001,\n  },\n  menuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 8,\n  },\n  menuItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    marginLeft: 12,\n  },\n  // Styles for other user's profile\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  headerIcon: {\n    padding: 8,\n  },\n  username: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  followButton: {\n    flex: 1,\n    backgroundColor: colors.secondary,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  followingButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  followButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n  },\n  followingButtonText: {\n    color: colors.textPrimary,\n  },\n  messageButton: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginLeft: 12,\n  },\n  messageButtonText: {\n    color: colors.textPrimary,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  characterDetails: {\n    marginTop: 12,\n  },\n  verificationBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  verifiedText: {\n    fontSize: FontSizes.small,\n    color: colors.info,\n    marginLeft: 4,\n    fontWeight: '600',\n  },\n  rolesContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 12,\n    gap: 6,\n  },\n  roleTag: {\n    backgroundColor: colors.primary + '20',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  roleText: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  interestsContainer: {\n    marginBottom: 12,\n  },\n  interestsList: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 6,\n  },\n  interestTag: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    backgroundColor: colors.backgroundTertiary,\n    paddingHorizontal: 8,\n    paddingVertical: 3,\n    borderRadius: 8,\n  },\n  joinDate: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 4,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: 16,\n  },\n  errorSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 8,\n    marginBottom: 24,\n  },\n  backButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginTop: 24,\n  },\n  backButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/SearchScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-this-alias","severity":1,"message":"Unexpected aliasing of 'this' to local variable.","line":45,"column":15,"nodeType":"Identifier","messageId":"thisAssignment","endLine":45,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":244,"column":29,"nodeType":"Identifier","endLine":244,"endColumn":40},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'performSearch' and 'query'. Either include them or remove the dependency array.","line":267,"column":8,"nodeType":"ArrayExpression","endLine":267,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [routeParams.q, activeTab, query, performSearch]","fix":{"range":[11610,11637],"text":"[routeParams.q, activeTab, query, performSearch]"}}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":460,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":460,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Unified global search across donations, rides, users, and hashtags.\n// - Reached from: `SearchTabStack` initial route 'SearchScreen'.\n// - Provides: Real-time search with tabs for different entities, debounced input, and detailed result cards.\n// - Reads from: `enhancedDatabaseService`, `apiService`.\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    TouchableOpacity,\n    Image,\n    FlatList,\n    Alert,\n    SafeAreaView,\n    ActivityIndicator,\n    TextInput,\n    LayoutAnimation,\n    Platform,\n    UIManager\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\nimport { apiService } from '../utils/apiService';\nimport { scaleSize } from '../globals/responsive';\nimport { createShadowStyle } from '../globals/styles';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { useToast } from '../utils/toastService';\n\nif (Platform.OS === 'android' && UIManager.setLayoutAnimationEnabledExperimental) {\n    UIManager.setLayoutAnimationEnabledExperimental(true);\n}\n\n// Simple debounce implementation\nfunction debounce<T extends (...args: any[]) => void>(func: T, wait: number) {\n    let timeout: any;\n    return function (this: any, ...args: Parameters<T>) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(context, args), wait);\n    };\n}\n\ntype SearchTab = 'All' | 'Rides' | 'Donations' | 'Users' | 'Hashtags';\n\ninterface SearchResult {\n    id: string;\n    type: 'ride' | 'donation' | 'user' | 'hashtag';\n    title: string;          // Ride: from->to, Donation: title, User: name\n    subtitle?: string;      // Ride: date/time, Donation: category, User: bio\n    description?: string;   // Ride: notes, Donation: description\n    image?: string;         // Avatar or Item image\n    meta?: string;          // Extra info (seats, location, etc.)\n    highlight?: boolean;\n    rawData: any;           // Original object for navigation/details\n}\n\nconst SearchScreen = () => {\n    const navigation = useNavigation<any>();\n    const route = useRoute();\n    const tabBarHeight = useBottomTabBarHeight();\n    const { t } = useTranslation(['search', 'common', 'donations', 'trump']);\n    const { selectedUser } = useUser();\n    const { ToastComponent } = useToast();\n\n    // Get initial query from route params (from deep link)\n    const routeParams = route.params as { q?: string } | undefined;\n    const initialQuery = routeParams?.q || '';\n\n    const [query, setQuery] = useState(initialQuery);\n    const [activeTab, setActiveTab] = useState<SearchTab>('All');\n    const [results, setResults] = useState<SearchResult[]>([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const [hasSearched, setHasSearched] = useState(false); // To show \"start typing\" vs \"no results\"\n    const [selectedItem, setSelectedItem] = useState<any | null>(null);\n    const [showItemModal, setShowItemModal] = useState(false);\n    const [selectedItemType, setSelectedItemType] = useState<'item' | 'ride'>('item');\n\n    const searchInputRef = useRef<TextInput>(null);\n\n    // Update query when route params change (e.g., from deep link)\n    useEffect(() => {\n        if (routeParams?.q && routeParams.q !== query) {\n            setQuery(routeParams.q);\n        }\n    }, [routeParams?.q, query]);\n\n    // Tabs configuration\n    const tabs: { id: SearchTab; label: string; icon: any }[] = [\n        { id: 'All', label: t('search:tabs.all'), icon: 'grid-outline' },\n        { id: 'Rides', label: t('trump:menu.history'), icon: 'car-sport-outline' }, // Using history label as approximation or custom\n        { id: 'Donations', label: t('search:tabs.donations'), icon: 'heart-outline' },\n        { id: 'Users', label: t('search:tabs.users'), icon: 'people-outline' },\n        { id: 'Hashtags', label: '#', icon: 'pricetag-outline' },\n    ];\n\n    // --- Search Logic ---\n\n    const performSearch = async (searchQuery: string, tab: SearchTab) => {\n        if (!searchQuery.trim()) {\n            setResults([]);\n            setHasSearched(false);\n            setIsSearching(false);\n            return;\n        }\n\n        setIsSearching(true);\n        setHasSearched(true);\n\n        // Slight delay to allow UI to update (spinner)\n        // await new Promise(r => setTimeout(r, 100));\n\n        try {\n            const promises: Promise<SearchResult[]>[] = [];\n            const qLower = searchQuery.toLowerCase();\n\n            // 1. Rides\n            if (tab === 'All' || tab === 'Rides') {\n                // Fetch rides - ideally backend supports search. If not, fetch active and filter.\n                // Assuming enahncedDatabaseService.getRides supports basic filters or we fetch all active.\n                promises.push(\n                    enhancedDB.getRides({}).then(rides => {\n                        return rides\n                            .filter(r => {\n                                // Client-side filter if backend didn't filter\n                                const from = (r.from || '').toLowerCase();\n                                const to = (r.to || '').toLowerCase();\n                                return from.includes(qLower) || to.includes(qLower);\n                            })\n                            .map(r => ({\n                                id: r.id,\n                                type: 'ride' as const,\n                                title: `${r.from} â ${r.to}`,\n                                subtitle: `${new Date((r.departure_time || r.date) as any).toLocaleDateString()} ${new Date((r.departure_time || r.time) as any).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`,\n                                description: r.description as string,\n                                image: (r.driverImage as any) || undefined,\n                                meta: `${r.available_seats} ××•×©×‘×™×`,\n                                rawData: r\n                            }));\n                    }).catch(e => {\n                        console.warn('Search rides failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 2. Donations\n            if (tab === 'All' || tab === 'Donations') {\n                promises.push(\n                    enhancedDB.getDonations({ search: searchQuery }).then(donations => {\n                        return donations.map(d => ({\n                            id: d.id,\n                            type: 'donation',\n                            title: d.title,\n                            subtitle: d.category,\n                            description: d.description,\n                            image: (d as any).image, // Assuming image property exists\n                            meta: d.location || (d as any).city,\n                            rawData: d\n                        }));\n                    }).catch(e => {\n                        console.warn('Search donations failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 3. Users\n            if (tab === 'All' || tab === 'Users') {\n                promises.push(\n                    apiService.getUsers({ search: searchQuery }).then(res => {\n                        if (!res.success || !res.data) return [];\n                        // Assuming res.data.users or res.data is array\n                        const users = Array.isArray(res.data) ? res.data : (res.data as any).users || [];\n                        return users.map((u: any) => ({\n                            id: u.id,\n                            type: 'user',\n                            title: u.name || t('search:typeLabels.user'),\n                            subtitle: u.role || u.bio || t('search:userDefaultBio'),\n                            image: u.avatar || u.image,\n                            meta: '×—×‘×¨ ×§×”×™×œ×”',\n                            rawData: u\n                        }));\n                    }).catch(e => {\n                        console.warn('Search users failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 4. Hashtags (Mock implementation for now or extraction)\n            if (tab === 'All' || tab === 'Hashtags') {\n                // Logic: If query starts with #, strict search. \n                // Else, maybe we search for tags that match the query?\n                // For MVP, we can simulate hashtag results if the query *looks* like a tag or if we want to show tags used in descriptions.\n                // Let's just return a generic result if query matches a pattern, or skip for now if no dedicated API.\n                if (searchQuery.startsWith('#') || tab === 'Hashtags') {\n                    const cleanTag = searchQuery.replace('#', '');\n                    if (cleanTag.length > 1) {\n                        promises.push(Promise.resolve([{\n                            id: `tag_${cleanTag}`,\n                            type: 'hashtag',\n                            title: `#${cleanTag}`,\n                            subtitle: '×—×¤×© ×¤×•×¡×˜×™× ×•×ª×¨×•××•×ª ×¢× ×ª×’×™×ª ×–×•',\n                            rawData: { tag: cleanTag }\n                        }] as SearchResult[]));\n                    }\n                }\n            }\n\n            // Execute all\n            const resultsArrays = await Promise.all(promises);\n            const flattened = resultsArrays.flat();\n\n            // Sort: Exact matches first? Or just simple shuffle/mix? \n            // Let's sort Users > Donations > Rides for 'All'? Or shuffle.\n            // Simple sort by title match relevance\n            flattened.sort((a, b) => {\n                const aStarts = a.title.toLowerCase().startsWith(qLower);\n                const bStarts = b.title.toLowerCase().startsWith(qLower);\n                if (aStarts && !bStarts) return -1;\n                if (!aStarts && bStarts) return 1;\n                return 0;\n            });\n\n            LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n            setResults(flattened);\n\n        } catch (err) {\n            console.error('Global search error:', err);\n        } finally {\n            setIsSearching(false);\n        }\n    };\n\n    // Debounce the search\n    const debouncedSearch = useCallback(\n        debounce((nextQuery: string, nextTab: SearchTab) => {\n            performSearch(nextQuery, nextTab);\n        }, 600),\n        []\n    );\n\n    useEffect(() => {\n        // Determine title for Rides tab if 'Rides' is selected (using translation fallback if 'trump' namespace incomplete)\n        // We already defined tabs array outside.\n    }, []);\n\n    // Trigger search when query comes from URL (deep link)\n    // This effect runs after performSearch is defined\n    useEffect(() => {\n        if (routeParams?.q && routeParams.q.trim()) {\n            // Query came from URL, trigger search immediately\n            // Only if it's different from current query to avoid infinite loops\n            if (routeParams.q !== query) {\n                setQuery(routeParams.q);\n                performSearch(routeParams.q, activeTab);\n            }\n        }\n    }, [routeParams?.q, activeTab]);\n\n    const handleTextChange = (text: string) => {\n        setQuery(text);\n        debouncedSearch(text, activeTab);\n    };\n\n    const handleTabChange = (newTab: SearchTab) => {\n        setActiveTab(newTab);\n        if (query.trim()) {\n            // Trigger immediate search (or fast debounce) on tab switch\n            setIsSearching(true); // show loader immediately\n            performSearch(query, newTab);\n        }\n    };\n\n    // --- Render Helpers ---\n\n    const renderIconForType = (type: string) => {\n        switch (type) {\n            case 'ride': return 'car-sport';\n            case 'donation': return 'heart';\n            case 'user': return 'person';\n            case 'hashtag': return 'pricetag';\n            default: return 'search';\n        }\n    };\n\n    const renderColorForType = (type: string) => {\n        switch (type) {\n            case 'ride': return colors.info;\n            case 'donation': return colors.pink;\n            case 'user': return colors.warning;\n            case 'hashtag': return colors.textSecondary;\n            default: return colors.primary;\n        }\n    };\n\n    const handleResultPress = (item: SearchResult) => {\n        // Open modal for rides and donations (items)\n        if (item.type === 'ride' || item.type === 'donation') {\n            setSelectedItem(item.rawData);\n            setSelectedItemType(item.type === 'ride' ? 'ride' : 'item');\n            setShowItemModal(true);\n        } else if (item.type === 'user') {\n            // Navigate to user profile\n            navigation.navigate('UserProfileScreen', {\n                userId: item.rawData.id,\n                userName: item.rawData.name || item.title,\n                characterData: item.rawData\n            });\n        } else if (item.type === 'hashtag') {\n            // For hashtags, show alert for now\n            Alert.alert(\n                item.title,\n                `${item.description || ''}\\n\\n${item.subtitle || ''}`,\n                [\n                    { text: t('common:close'), style: 'cancel' }\n                ]\n            );\n        }\n    };\n\n    const renderItem = ({ item }: { item: SearchResult }) => (\n        <TouchableOpacity\n            style={styles.resultCard}\n            onPress={() => handleResultPress(item)}\n            activeOpacity={0.7}\n        >\n            {/* Icon or Image */}\n            <View style={styles.imageContainer}>\n                {item.image ? (\n                    <Image source={{ uri: item.image }} style={styles.resultImage} />\n                ) : (\n                    <View style={[styles.placeholderImage, { backgroundColor: renderColorForType(item.type) + '15' }]}>\n                        <Ionicons name={renderIconForType(item.type) as any} size={24} color={renderColorForType(item.type)} />\n                    </View>\n                )}\n                {/* Type Icon Badge (small overlay) */}\n                {!item.image && item.type !== 'hashtag' && (\n                    <View style={styles.typeBadge}>\n                        <Ionicons name={renderIconForType(item.type) as any} size={10} color={colors.white} />\n                    </View>\n                )}\n            </View>\n\n            <View style={styles.resultContent}>\n                <View style={styles.resultHeader}>\n                    <Text style={styles.resultTitle} numberOfLines={1}>{item.title}</Text>\n                    {item.meta && <Text style={styles.resultMeta}>{item.meta}</Text>}\n                </View>\n\n                {item.subtitle && (\n                    <Text style={styles.resultSubtitle} numberOfLines={1}>\n                        {item.subtitle}\n                    </Text>\n                )}\n\n                {item.description && (\n                    <Text style={styles.resultDescription} numberOfLines={2}>\n                        {item.description}\n                    </Text>\n                )}\n            </View>\n\n            <Ionicons name=\"chevron-back\" size={18} color={colors.textTertiary} style={{ transform: [{ scaleX: -1 }] }} />\n        </TouchableOpacity>\n    );\n\n    return (\n        <SafeAreaView style={styles.container}>\n            {/* Header & Search Bar */}\n            <View style={styles.header}>\n                <Text style={styles.screenTitle}>{t('common:search')}</Text>\n\n                <View style={styles.searchBarContainer}>\n                    <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                    <TextInput\n                        ref={searchInputRef}\n                        style={styles.searchInput}\n                        placeholder={t('search:ai.placeholder') || \"×—×¤×© ×”×›×œ...\"}\n                        placeholderTextColor={colors.textTertiary}\n                        value={query}\n                        onChangeText={handleTextChange}\n                        returnKeyType=\"search\"\n                        autoCapitalize=\"none\"\n                    />\n                    {query.length > 0 && (\n                        <TouchableOpacity onPress={() => handleTextChange('')} style={styles.clearButton}>\n                            <Ionicons name=\"close-circle\" size={18} color={colors.textSecondary} />\n                        </TouchableOpacity>\n                    )}\n                </View>\n\n                {/* Categories / Tabs */}\n                <View style={styles.tabsContainer}>\n                    <FlatList\n                        horizontal\n                        data={tabs}\n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.tabsContent}\n                        keyExtractor={(item) => item.id}\n                        renderItem={({ item }) => {\n                            const isActive = activeTab === item.id;\n                            return (\n                                <TouchableOpacity\n                                    style={[styles.tabItem, isActive && styles.activeTabItem]}\n                                    onPress={() => handleTabChange(item.id)}\n                                >\n                                    <Ionicons\n                                        name={item.icon}\n                                        size={16}\n                                        color={isActive ? colors.white : colors.textSecondary}\n                                    />\n                                    <Text style={[styles.tabText, isActive && styles.activeTabText]}>\n                                        {item.label}\n                                    </Text>\n                                </TouchableOpacity>\n                            );\n                        }}\n                    />\n                </View>\n            </View>\n\n            {/* Content Area */}\n            <View style={styles.content}>\n                {isSearching ? (\n                    <View style={styles.centerContainer}>\n                        <ActivityIndicator size=\"large\" color={colors.pink} />\n                        <Text style={styles.loadingText}>{t('search:searching')}</Text>\n                    </View>\n                ) : !hasSearched && !query ? (\n                    // Initial State\n                    <View style={styles.initialStateContainer}>\n                        <Ionicons name=\"search-outline\" size={60} color={colors.border} />\n                        <Text style={styles.initialStateText}>{t('search:tryChangingSearchTerms') || \"×”×ª×—×œ ×œ×”×§×œ×™×“ ×›×“×™ ×œ×—×¤×©...\"}</Text>\n\n                        {/* Quick Suggestions / Recent (Optional placeholder logic) */}\n                        <View style={styles.suggestions}>\n                            <Text style={styles.suggestionsTitle}>{t('search:popularTitle')}</Text>\n                            <View style={styles.tagsRow}>\n                                {['×ª×œ ××‘×™×‘', '×¨×™×”×•×˜', '××ª× ×“×‘×™×'].map(tag => (\n                                    <TouchableOpacity key={tag} style={styles.suggestionTag} onPress={() => handleTextChange(tag)}>\n                                        <Text style={styles.suggestionText}>{tag}</Text>\n                                    </TouchableOpacity>\n                                ))}\n                            </View>\n                        </View>\n                    </View>\n                ) : results.length === 0 ? (\n                    // No Results\n                    <View style={styles.centerContainer}>\n                        <Image\n                            source={require('../assets/images/favicon.png')} // Fallback or use a generic \"empty\" asset if available\n                            style={[styles.emptyImage, { opacity: 0.3, width: 60, height: 60, tintColor: colors.textSecondary }]}\n                        />\n                        <Text style={styles.noResultsText}>{t('search:noResultsFound')}</Text>\n                    </View>\n                ) : (\n                    // Results List\n                    <FlatList\n                        data={results}\n                        renderItem={renderItem}\n                        keyExtractor={(item) => `${item.type}_${item.id}`}\n                        contentContainerStyle={[styles.listContent, { paddingBottom: tabBarHeight + 20 }]}\n                        showsVerticalScrollIndicator={false}\n                    />\n                )}\n            </View>\n\n            {/* AI Chat Button */}\n            <TouchableOpacity\n                style={styles.aiButton}\n                onPress={() => {\n                    navigation.navigate('ChatDetailScreen', {\n                        conversationId: 'ai_simulation',\n                        userName: t('search:ai.title') || 'AI Assistant', // Use localized title\n                        otherUserId: 'ai_bot',\n                        userAvatar: 'https://cdn-icons-png.flaticon.com/512/4712/4712027.png'\n                    });\n                }}\n            >\n                <Ionicons name=\"chatbubbles-outline\" size={24} color={colors.white} />\n                <Text style={styles.aiButtonText}>AI</Text>\n            </TouchableOpacity>\n\n            {/* Item Details Modal */}\n            <ItemDetailsModal\n                visible={showItemModal}\n                onClose={() => {\n                    setShowItemModal(false);\n                    setSelectedItem(null);\n                }}\n                item={selectedItem}\n                type={selectedItemType}\n                navigation={navigation}\n            />\n            {ToastComponent}\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: colors.backgroundPrimary,\n    },\n    header: {\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n        paddingTop: LAYOUT_CONSTANTS.SPACING.MD,\n        paddingBottom: LAYOUT_CONSTANTS.SPACING.SM,\n        backgroundColor: colors.backgroundPrimary,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n    },\n    screenTitle: {\n        fontSize: FontSizes.heading2,\n        fontWeight: 'bold',\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textPrimary,\n    },\n    searchBarContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n        height: scaleSize(44),\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    searchIcon: {\n        marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n    },\n    searchInput: {\n        flex: 1,\n        fontSize: FontSizes.body,\n        color: colors.textPrimary,\n        textAlign: 'right', // Hebrew support\n        height: '100%',\n    },\n    clearButton: {\n        padding: 4,\n    },\n    tabsContainer: {\n        marginBottom: 4,\n    },\n    tabsContent: {\n        gap: LAYOUT_CONSTANTS.SPACING.SM,\n        paddingVertical: 4,\n    },\n    tabItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        paddingVertical: 6,\n        paddingHorizontal: 12,\n        borderRadius: 20,\n        backgroundColor: colors.backgroundTertiary,\n        borderWidth: 1,\n        borderColor: 'transparent',\n    },\n    activeTabItem: {\n        backgroundColor: colors.pink,\n        borderColor: colors.pink,\n    },\n    tabText: {\n        marginLeft: 6,\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        fontWeight: '500',\n    },\n    activeTabText: {\n        color: colors.white,\n        fontWeight: '600',\n    },\n    content: {\n        flex: 1,\n        backgroundColor: colors.backgroundPrimary, // slightly different bg for content\n    },\n    centerContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: LAYOUT_CONSTANTS.SPACING.XL,\n    },\n    loadingText: {\n        marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textSecondary,\n        fontSize: FontSizes.body,\n    },\n    initialStateContainer: {\n        flex: 1,\n        alignItems: 'center',\n        paddingTop: scaleSize(60),\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XL,\n    },\n    initialStateText: {\n        marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n        fontSize: FontSizes.heading3,\n        color: colors.textTertiary,\n        textAlign: 'center',\n    },\n    suggestions: {\n        marginTop: scaleSize(40),\n        width: '100%',\n    },\n    suggestionsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    tagsRow: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        gap: 8,\n    },\n    suggestionTag: {\n        backgroundColor: colors.white,\n        paddingHorizontal: 12,\n        paddingVertical: 8,\n        borderRadius: 8,\n        borderWidth: 1,\n        borderColor: colors.border,\n        ...createShadowStyle(colors.shadowLight, { width: 0, height: 1 }, 0.05, 2),\n    },\n    suggestionText: {\n        color: colors.textSecondary,\n        fontSize: FontSizes.small,\n    },\n    emptyImage: {\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    noResultsText: {\n        fontSize: FontSizes.heading3,\n        color: colors.textSecondary,\n        fontWeight: '600',\n    },\n    listContent: {\n        padding: LAYOUT_CONSTANTS.SPACING.LG,\n        gap: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    // Result Card\n    resultCard: {\n        flexDirection: 'row',\n        backgroundColor: colors.cardBackground || colors.white,\n        padding: LAYOUT_CONSTANTS.SPACING.MD,\n        borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n        alignItems: 'center',\n        ...createShadowStyle(colors.shadowLight, { width: 0, height: 2 }, 0.08, 4),\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    imageContainer: {\n        position: 'relative',\n        marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    resultImage: {\n        width: 48,\n        height: 48,\n        borderRadius: 24,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    placeholderImage: {\n        width: 48,\n        height: 48,\n        borderRadius: 24,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    aiButton: {\n        position: 'absolute',\n        bottom: 50,\n        left: 20,\n        backgroundColor: colors.pink,\n        flexDirection: 'row',\n        alignItems: 'center',\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n        borderRadius: 25,\n        ...createShadowStyle(colors.shadowDark, { width: 0, height: 4 }, 0.2, 5),\n        zIndex: 100,\n    },\n    aiButtonText: {\n        color: colors.white,\n        marginLeft: 8,\n        fontWeight: 'bold',\n        fontSize: FontSizes.body,\n\n    },\n    typeBadge: {\n        position: 'absolute',\n        bottom: -2,\n        right: -2,\n        backgroundColor: colors.pink,\n        width: 18,\n        height: 18,\n        borderRadius: 9,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1.5,\n        borderColor: colors.white,\n    },\n    resultContent: {\n        flex: 1,\n        justifyContent: 'center',\n    },\n    resultHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 2,\n    },\n    resultTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        flex: 1,\n        textAlign: 'left',\n    },\n    resultMeta: {\n        fontSize: 10,\n        color: colors.textTertiary,\n        marginLeft: 8,\n        backgroundColor: colors.backgroundSecondary,\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4,\n        overflow: 'hidden',\n    },\n    resultSubtitle: {\n        fontSize: FontSizes.small,\n        color: colors.pink,\n        marginBottom: 2,\n        textAlign: 'left',\n    },\n    resultDescription: {\n        fontSize: FontSizes.small, // slightly smaller\n        color: colors.textSecondary,\n        textAlign: 'left',\n    },\n});\n\nexport default SearchScreen;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AboutButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AddLinkComponent.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has an unnecessary dependency: 'category'. Either exclude it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[1527,1537],"text":"[]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { scaleSize } from '../globals/responsive';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { Linking } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\n\ninterface AddLinkComponentProps {\n  onLinkAdded?: (link: any) => void;\n  category?: string; // Category to filter links (e.g., 'trump', 'items', 'knowledge')\n}\n\ntype LinkType = 'group' | 'organization';\n\nexport default function AddLinkComponent({ onLinkAdded, category }: AddLinkComponentProps) {\n  const { t } = useTranslation(['common', 'trump']);\n  const { selectedUser } = useUser();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkDescription, setLinkDescription] = useState('');\n  const [linkType, setLinkType] = useState<LinkType>('group');\n  const [allLinks, setAllLinks] = useState<any[]>([]);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Load all links when component mounts or screen is focused\n  useFocusEffect(\n    React.useCallback(() => {\n      loadAllLinks();\n    }, [category])\n  );\n\n  const loadAllLinks = async () => {\n    setIsLoading(true);\n    try {\n      // NOTE: Links functionality has been removed - links table was deleted\n      // All user data is now unified in user_profiles table with UUID identifiers\n      // TODO: Implement alternative storage if links functionality is still needed\n      const allLinksData: any[] = []; // db.listAllLinks() is no longer available\n      console.log('âš ï¸ Links functionality has been removed');\n      \n      // Filter by category if provided\n      const filteredLinks: any[] = [];\n      \n      setAllLinks(filteredLinks);\n    } catch (error) {\n      console.error('Error loading links:', error);\n      setAllLinks([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOpenModal = () => {\n    setModalVisible(true);\n  };\n\n  const handleCloseModal = () => {\n    setModalVisible(false);\n    // Reset form\n    setLinkUrl('');\n    setLinkDescription('');\n    setLinkType('group');\n  };\n\n  const validateUrl = (url: string): boolean => {\n    try {\n      // Add protocol if missing\n      let formattedUrl = url.trim();\n      if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {\n        formattedUrl = 'https://' + formattedUrl;\n      }\n      new URL(formattedUrl);\n      return true;\n    } catch {\n      return false;\n    }\n  };\n\n  const formatUrl = (url: string): string => {\n    let formattedUrl = url.trim();\n    if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {\n      formattedUrl = 'https://' + formattedUrl;\n    }\n    return formattedUrl;\n  };\n\n  const handleSaveLink = async () => {\n    if (!linkUrl.trim()) {\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.fillLink', { defaultValue: '×× × ×”×–×Ÿ ×§×™×©×•×¨' }) as string\n      );\n      return;\n    }\n\n    if (!validateUrl(linkUrl)) {\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.invalidLink', { defaultValue: '×”×§×™×©×•×¨ ××™× ×• ×ª×§×™×Ÿ' }) as string\n      );\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const uid = selectedUser?.id || 'guest';\n      const linkId = `link_${Date.now()}`;\n      const formattedUrl = formatUrl(linkUrl);\n      \n      const linkData = {\n        id: linkId,\n        url: formattedUrl,\n        description: linkDescription.trim() || '',\n        type: linkType,\n        category: category || 'general', // Save category with link\n        createdAt: new Date().toISOString(),\n        createdBy: uid,\n      };\n\n      // NOTE: Links functionality has been removed - links table was deleted\n      // All user data is now unified in user_profiles table with UUID identifiers\n      // TODO: Implement alternative storage if links functionality is still needed\n      console.warn('âš ï¸ Links functionality has been removed - link not saved');\n\n      // Reload all links to show the new one\n      await loadAllLinks();\n\n      // Notify parent component\n      if (onLinkAdded) {\n        onLinkAdded(linkData);\n      }\n\n      Alert.alert(\n        t('trump:success.title', { defaultValue: '×”×¦×œ×—×”' }) as string,\n        t('trump:success.linkSaved', { defaultValue: '×”×§×™×©×•×¨ × ×©××¨ ×‘×”×¦×œ×—×”' }) as string\n      );\n\n      handleCloseModal();\n    } catch (error) {\n      console.error('Error saving link:', error);\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.saveFailed', { defaultValue: '×©××™×¨×ª ×”×§×™×©×•×¨ × ×›×©×œ×”' }) as string\n      );\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleOpenLink = async (link: any) => {\n    if (!link?.url) return;\n\n    try {\n      const supported = await Linking.canOpenURL(link.url);\n      if (supported) {\n        await Linking.openURL(link.url);\n      } else {\n        Alert.alert(\n          t('common:error', { defaultValue: '×©×’×™××”' }) as string,\n          t('common:cannotOpenLink', { defaultValue: '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨' }) as string\n        );\n      }\n    } catch (error) {\n      Alert.alert(\n        t('common:error', { defaultValue: '×©×’×™××”' }) as string,\n        t('common:cannotOpenLink', { defaultValue: '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨' }) as string\n      );\n    }\n  };\n\n  const renderLinkCard = (link: any) => (\n    <TouchableOpacity\n      key={link.id || `${link.createdBy}_${link.url}`}\n      style={styles.linkCard}\n      onPress={() => handleOpenLink(link)}\n    >\n      <View style={styles.linkCardContent}>\n        <View style={styles.linkCardHeader}>\n          <Ionicons \n            name={link.type === 'group' ? 'people' : 'business'} \n            size={scaleSize(20)} \n            color={colors.buttonPrimary} \n          />\n          <Text style={styles.linkCardType}>\n            {link.type === 'group' \n              ? t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×”' })\n              : t('trump:addLink.organization', { defaultValue: '×¢××•×ª×”' })}\n          </Text>\n        </View>\n        {link.description ? (\n          <Text style={styles.linkCardDescription} numberOfLines={2}>\n            {link.description}\n          </Text>\n        ) : null}\n        <Text style={styles.linkCardUrl} numberOfLines={1}>\n          {link.url}\n        </Text>\n      </View>\n      <Ionicons name=\"chevron-forward\" size={scaleSize(16)} color={colors.textSecondary} />\n    </TouchableOpacity>\n  );\n\n  // Filter links by type (group or organization)\n  const groupLinks = allLinks.filter(link => link.type === 'group');\n  const organizationLinks = allLinks.filter(link => link.type === 'organization');\n\n  console.log('ğŸ”— AddLinkComponent render - allLinks:', allLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - groupLinks:', groupLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - organizationLinks:', organizationLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - isLoading:', isLoading);\n\n  return (\n    <View style={styles.container}>\n      {/* Add link button */}\n      <TouchableOpacity\n        style={styles.addButton}\n        onPress={handleOpenModal}\n      >\n        <Ionicons name=\"add-circle-outline\" size={scaleSize(24)} color={colors.buttonPrimary} />\n      </TouchableOpacity>\n\n      {/* Show all links in a scrollable list */}\n      {isLoading ? (\n        <Text style={styles.loadingText}>\n          {t('common:loading', { defaultValue: '×˜×•×¢×Ÿ...' })}\n        </Text>\n      ) : allLinks.length > 0 ? (\n        <View style={styles.linksContainer}>\n          {groupLinks.length > 0 && (\n            <View style={styles.linksSection}>\n              <Text style={styles.linksSectionTitle}>\n                {t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×•×ª' })} ({groupLinks.length})\n              </Text>\n              {groupLinks.map(link => renderLinkCard(link))}\n            </View>\n          )}\n          {organizationLinks.length > 0 && (\n            <View style={styles.linksSection}>\n              <Text style={styles.linksSectionTitle}>\n                {t('trump:addLink.organization', { defaultValue: '×¢××•×ª×•×ª' })} ({organizationLinks.length})\n              </Text>\n              {organizationLinks.map(link => renderLinkCard(link))}\n            </View>\n          )}\n        </View>\n      ) : (\n        <Text style={styles.noLinksText}>\n          {t('trump:addLink.noLinks', { defaultValue: '××™×Ÿ ×§×™×©×•×¨×™× ×¢×“×™×™×Ÿ' })}\n        </Text>\n      )}\n\n      {/* Modal with form */}\n      <Modal\n        visible={modalVisible}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={handleCloseModal}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>\n                {t('trump:addLink.title', { defaultValue: '×”×•×¡×£ ×§×™×©×•×¨' })}\n              </Text>\n              <TouchableOpacity onPress={handleCloseModal}>\n                <Ionicons name=\"close\" size={scaleSize(24)} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              {/* Link Type Selection */}\n              <View style={styles.typeSelectionContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.linkType', { defaultValue: '×¡×•×’ ×§×™×©×•×¨' })}\n                </Text>\n                <View style={styles.typeButtons}>\n                  <TouchableOpacity\n                    style={[\n                      styles.typeButton,\n                      linkType === 'group' && styles.typeButtonActive,\n                    ]}\n                    onPress={() => setLinkType('group')}\n                  >\n                    <Text\n                      style={[\n                        styles.typeButtonText,\n                        linkType === 'group' && styles.typeButtonTextActive,\n                      ]}\n                    >\n                      {t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×”' })}\n                    </Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[\n                      styles.typeButton,\n                      linkType === 'organization' && styles.typeButtonActive,\n                    ]}\n                    onPress={() => setLinkType('organization')}\n                  >\n                    <Text\n                      style={[\n                        styles.typeButtonText,\n                        linkType === 'organization' && styles.typeButtonTextActive,\n                      ]}\n                    >\n                      {t('trump:addLink.organization', { defaultValue: '×¢××•×ª×”' })}\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              {/* Link URL Input */}\n              <View style={styles.inputContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.url', { defaultValue: '×§×™×©×•×¨' })}\n                </Text>\n                <TextInput\n                  style={styles.input}\n                  value={linkUrl}\n                  onChangeText={setLinkUrl}\n                  placeholder={t('trump:addLink.urlPlaceholder', { defaultValue: '×”×–×Ÿ ×§×™×©×•×¨' }) as string}\n                  placeholderTextColor={colors.textPlaceholder}\n                  keyboardType=\"url\"\n                  autoCapitalize=\"none\"\n                  autoCorrect={false}\n                />\n              </View>\n\n              {/* Description Input */}\n              <View style={styles.inputContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.description', { defaultValue: '×¤×™×¨×•×˜' })}\n                </Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={linkDescription}\n                  onChangeText={setLinkDescription}\n                  placeholder={t('trump:addLink.descriptionPlaceholder', { defaultValue: '×”×•×¡×£ ×¤×™×¨×•×˜ (××•×¤×¦×™×•× ×œ×™)' }) as string}\n                  placeholderTextColor={colors.textPlaceholder}\n                  multiline\n                  numberOfLines={3}\n                  textAlignVertical=\"top\"\n                />\n              </View>\n\n              {/* Save Button */}\n              <TouchableOpacity\n                style={[styles.saveButton, isSaving && styles.saveButtonDisabled]}\n                onPress={handleSaveLink}\n                disabled={isSaving}\n              >\n                {isSaving ? (\n                  <Text style={styles.saveButtonText}>\n                    {t('common:saving', { defaultValue: '×©×•××¨...' })}\n                  </Text>\n                ) : (\n                  <Text style={styles.saveButtonText}>\n                    {t('common:save', { defaultValue: '×©××•×¨' })}\n                  </Text>\n                )}\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    alignItems: 'center',\n    marginVertical: 8,\n  },\n  addButton: {\n    backgroundColor: colors.moneyCardBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 20,\n    width: scaleSize(40),\n    height: scaleSize(40),\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  linksContainer: {\n    width: '100%',\n    marginTop: 12,\n  },\n  linksSection: {\n    marginBottom: 16,\n  },\n  linksSectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  linkCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.moneyCardBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 10,\n    padding: 12,\n    marginBottom: 8,\n    width: '100%',\n    gap: 8,\n  },\n  linkCardContent: {\n    flex: 1,\n  },\n  linkCardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    marginBottom: 4,\n  },\n  linkCardType: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.buttonPrimary,\n  },\n  linkCardDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    marginBottom: 4,\n  },\n  linkCardUrl: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  loadingText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: 8,\n  },\n  noLinksText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: 8,\n    fontStyle: 'italic',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: colors.overlayMedium,\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.modalBackground,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    maxHeight: '80%',\n    paddingTop: 20,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  modalBody: {\n    paddingHorizontal: 20,\n    paddingTop: 20,\n  },\n  typeSelectionContainer: {\n    marginBottom: 20,\n  },\n  typeButtons: {\n    flexDirection: 'row',\n    gap: 12,\n    marginTop: 8,\n  },\n  typeButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    backgroundColor: colors.moneyInputBackground,\n    alignItems: 'center',\n  },\n  typeButtonActive: {\n    backgroundColor: colors.buttonPrimary,\n    borderColor: colors.buttonPrimary,\n  },\n  typeButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  typeButtonTextActive: {\n    color: colors.white,\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  input: {\n    backgroundColor: colors.moneyInputBackground,\n    borderRadius: 10,\n    padding: 15,\n    fontSize: FontSizes.body,\n    textAlign: 'right',\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n  },\n  textArea: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  saveButton: {\n    backgroundColor: colors.buttonPrimary,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginTop: 10,\n    marginBottom: 30,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AdminHierarchyTree.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AutocompleteDropdownComp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AutocompleteInputOnly.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/DailyHabitsQuickView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/EditChallengeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/EditEntryModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'challenge'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [visible, date, existingValue, existingNotes, challenge.id, challenge]","fix":{"range":[1419,1479],"text":"[visible, date, existingValue, existingNotes, challenge.id, challenge]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  StyleSheet,\n  ScrollView,\n  Switch,\n  Alert,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { ChallengeType, DailyTrackerChallenge } from '../../globals/types';\n\ninterface EditEntryModalProps {\n  visible: boolean;\n  challenge: DailyTrackerChallenge | null;\n  date: string;\n  existingValue?: number;\n  existingNotes?: string;\n  onClose: () => void;\n  onSave: (value: number, notes: string) => Promise<void>;\n  onDelete?: () => Promise<void>;\n}\n\nexport const EditEntryModal: React.FC<EditEntryModalProps> = ({\n  visible,\n  challenge,\n  date,\n  existingValue,\n  existingNotes,\n  onClose,\n  onSave,\n  onDelete,\n}) => {\n  const { t } = useTranslation(['challenges', 'common']);\n  const [value, setValue] = useState<number>(existingValue ?? 0);\n  const [notes, setNotes] = useState<string>(existingNotes ?? '');\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (visible && challenge) {\n      const nextValue = existingValue ?? (challenge.type === 'BOOLEAN' ? 0 : 0);\n      const nextNotes = existingNotes ?? '';\n      setValue(nextValue);\n      setNotes(nextNotes);\n      if (__DEV__) {\n        console.log('[EditEntryModal] Opened with values:', { date, existingValue, nextValue, existingNotes: existingNotes?.slice(0, 20) });\n      }\n    }\n  }, [visible, date, existingValue, existingNotes, challenge?.id]);\n\n  if (!challenge) return null;\n\n  const handleSave = async () => {\n    if (__DEV__) console.log('[EditEntryModal] Save clicked:', { value, notes });\n    setSaving(true);\n    try {\n      await onSave(value, notes);\n      // onSave should handle closing the modal and refreshing data\n    } catch (error) {\n      if (__DEV__) console.error('[EditEntryModal] Error saving:', error);\n      Alert.alert(t('editEntry.saveErrorTitle'), t('editEntry.saveErrorMessage'));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    Alert.alert(\n      t('editEntry.deleteTitle'),\n      t('editEntry.deleteMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('common:delete'),\n          style: 'destructive',\n          onPress: async () => {\n            if (onDelete) {\n              setSaving(true);\n              try {\n                await onDelete();\n                onClose();\n              } catch (error) {\n                Alert.alert(t('editEntry.deleteErrorTitle'), t('editEntry.deleteErrorMessage'));\n              } finally {\n                setSaving(false);\n              }\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const formatDate = (dateString: string): string => {\n    const d = new Date(dateString + 'T00:00:00');\n    return d.toLocaleDateString('he-IL', { \n      weekday: 'long', \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    });\n  };\n\n  const renderValueInput = () => {\n    if (challenge.type === 'BOOLEAN') {\n      return (\n        <View style={styles.booleanContainer}>\n          <Text style={styles.label}>{t('challenges:fields.value')}</Text>\n          <View style={styles.switchRow}>\n            <Text style={styles.switchLabel}>\n              {value === 1 ? 'âœ“' : 'âœ—'}\n            </Text>\n            <Switch\n              value={value === 1}\n              onValueChange={(val) => setValue(val ? 1 : 0)}\n              trackColor={{ false: '#F44336', true: '#4CAF50' }}\n              thumbColor=\"#FFFFFF\"\n            />\n          </View>\n        </View>\n      );\n    }\n\n    if (challenge.type === 'NUMERIC') {\n      return (\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>{t('challenges:fields.value')}</Text>\n          <TextInput\n            style={styles.input}\n            value={value.toString()}\n            onChangeText={(text) => {\n              const num = parseFloat(text);\n              setValue(isNaN(num) ? 0 : num);\n            }}\n            keyboardType=\"numeric\"\n            placeholder={t('challenges:fields.valuePlaceholder')}\n          />\n          {challenge.goal_value && (\n            <Text style={styles.hint}>\n              {challenge.goal_direction === 'minimize' ? '< ' : 'â‰¥ '}\n              {challenge.goal_value}\n            </Text>\n          )}\n        </View>\n      );\n    }\n\n    if (challenge.type === 'DURATION') {\n      const hours = Math.floor(value / 60);\n      const minutes = value % 60;\n\n      return (\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>{t('challenges:fields.goalValueMinutes')}</Text>\n          <View style={styles.timeRow}>\n            <View style={styles.timeInput}>\n              <Text style={styles.timeLabel}>H</Text>\n              <TextInput\n                style={styles.input}\n                value={hours.toString()}\n                onChangeText={(text) => {\n                  const h = parseInt(text) || 0;\n                  setValue(h * 60 + minutes);\n                }}\n                keyboardType=\"numeric\"\n                placeholder=\"0\"\n              />\n            </View>\n            <Text style={styles.timeSeparator}>:</Text>\n            <View style={styles.timeInput}>\n              <Text style={styles.timeLabel}>M</Text>\n              <TextInput\n                style={styles.input}\n                value={minutes.toString()}\n                onChangeText={(text) => {\n                  const m = parseInt(text) || 0;\n                  setValue(hours * 60 + m);\n                }}\n                keyboardType=\"numeric\"\n                placeholder=\"0\"\n              />\n            </View>\n          </View>\n          {challenge.goal_value && (\n            <Text style={styles.hint}>\n              {t('editEntry.goalMinutes', { value: challenge.goal_value })}\n            </Text>\n          )}\n        </View>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.overlay}>\n        <View style={styles.modal}>\n          <ScrollView showsVerticalScrollIndicator={false}>\n            <Text style={styles.title}>{challenge.title}</Text>\n            <Text style={styles.dateText}>{formatDate(date)}</Text>\n\n            {renderValueInput()}\n\n            <View style={styles.inputContainer}>\n              <Text style={styles.label}>{t('fields.notes')}</Text>\n              <TextInput\n                style={[styles.input, styles.notesInput]}\n                value={notes}\n                onChangeText={setNotes}\n                placeholder={t('fields.notesPlaceholder')}\n                multiline\n                numberOfLines={3}\n                textAlignVertical=\"top\"\n              />\n            </View>\n\n            <View style={styles.buttonRow}>\n              <TouchableOpacity\n                style={[styles.button, styles.buttonCancel]}\n                onPress={onClose}\n                disabled={saving}\n              >\n                <Text style={styles.buttonTextCancel}>{t('common:cancel')}</Text>\n              </TouchableOpacity>\n\n              {existingValue !== undefined && onDelete && (\n                <TouchableOpacity\n                  style={[styles.button, styles.buttonDelete]}\n                  onPress={handleDelete}\n                  disabled={saving}\n                >\n                  <Text style={styles.buttonTextDelete}>{t('common:delete')}</Text>\n                </TouchableOpacity>\n              )}\n\n              <TouchableOpacity\n                style={[styles.button, styles.buttonSave]}\n                onPress={handleSave}\n                disabled={saving}\n              >\n                <Text style={styles.buttonTextSave}>\n                  {saving ? t('editEntry.saving') : t('editEntry.save')}\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </ScrollView>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modal: {\n    backgroundColor: '#FFFFFF',\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  dateText: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n    marginBottom: 8,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#E0E0E0',\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    backgroundColor: '#F9F9F9',\n  },\n  notesInput: {\n    height: 80,\n  },\n  hint: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  booleanContainer: {\n    marginBottom: 20,\n  },\n  switchRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: '#F9F9F9',\n    borderRadius: 8,\n  },\n  switchLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  timeRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  timeInput: {\n    flex: 1,\n  },\n  timeLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginBottom: 4,\n    textAlign: 'center',\n  },\n  timeSeparator: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginHorizontal: 8,\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 12,\n    marginTop: 10,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  buttonCancel: {\n    backgroundColor: '#F5F5F5',\n  },\n  buttonDelete: {\n    backgroundColor: '#FFEBEE',\n  },\n  buttonSave: {\n    backgroundColor: '#4CAF50',\n  },\n  buttonTextCancel: {\n    color: '#666',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  buttonTextDelete: {\n    color: '#F44336',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  buttonTextSave: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsStatsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsTrackerCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsTrackerTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/ViewToggleButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ChatListItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ChatMessageBubble.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommentsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommunityStatsGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":31,"column":17,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":31,"endColumn":35},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":33,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":33,"endColumn":24},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":34,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":34,"endColumn":24},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":35,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":35,"endColumn":24},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":38,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":38,"endColumn":33},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":39,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":39,"endColumn":33},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":40,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":40,"endColumn":33},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":41,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":41,"endColumn":33},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":42,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":42,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Platform } from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport type { StatDetails } from './StatDetailsModal';\nimport { useUser } from '../stores/userStore';\nimport { useEffect, useState } from 'react';\nimport { getGlobalStats, formatShortNumber, parseShortNumber, CommunityStats, EnhancedStatsService } from '../utils/statsService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\n\nexport type CommunityStat = {\n  key: string;\n  icon: string; // emoji\n  label: string;\n  value: string;\n  color?: string;\n};\n\ninterface CommunityStatsGridProps {\n  onSelect: (details: StatDetails) => void;\n}\n\nconst makeDetails = (stat: CommunityStat): StatDetails => ({\n  key: stat.key,\n  title: stat.label,\n  icon: stat.icon,\n  value: stat.value,\n  color: stat.color,\n  description: (require('i18next') as any).t('home:statsDetails.description', { label: stat.label }),\n  bullets: [\n    (require('i18next') as any).t('home:statsDetails.bullets.trends'),\n    (require('i18next') as any).t('home:statsDetails.bullets.byCities'),\n    (require('i18next') as any).t('home:statsDetails.bullets.highlight'),\n  ],\n  breakdownByCity: [\n    { label: (require('i18next') as any).t('home:cities.tlv'), value: 42 },\n    { label: (require('i18next') as any).t('home:cities.jerusalem'), value: 35 },\n    { label: (require('i18next') as any).t('home:cities.haifa'), value: 28 },\n    { label: (require('i18next') as any).t('home:cities.beerSheva'), value: 19 },\n    { label: (require('i18next') as any).t('home:cities.ashdod'), value: 16 },\n  ],\n  trend: [8, 12, 9, 15, 13, 17, 21, 18, 24, 22],\n});\n\nconst CommunityStatsGrid: React.FC<CommunityStatsGridProps> = ({ onSelect }) => {\n  const { t } = useTranslation(['home']);\n  const { isRealAuth } = useUser();\n  const [statsState, setStatsState] = useState<CommunityStats | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n    const POLLING_INTERVAL = 60000; // 60 seconds - stats don't change frequently\n    \n    const loadStats = async (forceRefresh = false) => {\n      if (!mounted) return;\n      \n      console.log(`[CommunityStatsGrid] Loading stats, forceRefresh: ${forceRefresh}`);\n      setLoading(true);\n      \n      try {\n        let stats: CommunityStats;\n        \n        if (USE_BACKEND && isRealAuth) {\n          // Use enhanced backend service for real users\n          console.log('[CommunityStatsGrid] Fetching from backend with forceRefresh:', forceRefresh);\n          stats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n          console.log('[CommunityStatsGrid] Stats received from backend:', Object.keys(stats).length, 'keys');\n        } else {\n          // Use legacy local stats for guests or if backend unavailable\n          console.log('[CommunityStatsGrid] Using local stats (no backend or not authenticated)');\n          stats = await getGlobalStats();\n        }\n        \n        if (mounted) {\n          setStatsState(stats);\n          console.log('[CommunityStatsGrid] Stats state updated');\n        }\n      } catch (error) {\n        console.error('[CommunityStatsGrid] Failed to load community stats:', error);\n        \n        // Fallback to legacy stats\n        const fallbackStats = await getGlobalStats();\n        if (mounted) setStatsState(fallbackStats);\n      }\n      \n      setLoading(false);\n    };\n    \n    // Initial load\n    loadStats();\n    \n    // Auto-refresh every 60 seconds (but use cache - don't force refresh)\n    const intervalId = setInterval(() => {\n      loadStats(false); // Normal refresh with cache\n    }, POLLING_INTERVAL);\n    \n    return () => {\n      mounted = false;\n      clearInterval(intervalId);\n    };\n  }, [isRealAuth]);\n  const realStats: CommunityStat[] = statsState\n    ? (() => {\n        const cfg: Array<{ key: keyof CommunityStats | 'activeMembers'; icon: string; color: string; labelKey?: string }> = [\n          { key: 'moneyDonations', icon: 'ğŸ’µ', color: colors.legacyDarkGreen },\n          { key: 'volunteerHours', icon: 'â°', color: colors.warning },\n          { key: 'rides', icon: 'ğŸš—', color: colors.info },\n          { key: 'events', icon: 'ğŸ‰', color: colors.secondary },\n          { key: 'activeMembers', icon: 'ğŸ‘¥', color: colors.info, labelKey: 'appActiveUsers' },\n          // Extended 15+\n          { key: 'foodKg', icon: 'ğŸ', color: colors.success },\n          { key: 'clothingKg', icon: 'ğŸ‘•', color: colors.info },\n          { key: 'bloodLiters', icon: 'ğŸ©¸', color: colors.error },\n          { key: 'courses', icon: 'ğŸ“š', color: colors.success },\n          { key: 'treesPlanted', icon: 'ğŸŒ³', color: colors.legacyDarkGreen },\n          { key: 'animalsAdopted', icon: 'ğŸ•', color: colors.warning },\n          { key: 'recyclingBags', icon: 'â™»ï¸', color: colors.success },\n          { key: 'culturalEvents', icon: 'ğŸ­', color: colors.info },\n          { key: 'appDownloads', icon: 'ğŸ“²', color: colors.info },\n          { key: 'activeVolunteers', icon: 'ğŸ™‹', color: colors.success },\n          { key: 'kmCarpooled', icon: 'ğŸš—', color: colors.info },\n          { key: 'fundsRaised', icon: 'ğŸ’°', color: colors.success },\n          { key: 'mealsServed', icon: 'ğŸ½ï¸', color: colors.secondary },\n          { key: 'booksDonated', icon: 'ğŸ“š', color: colors.legacyMediumPurple },\n        ];\n        return cfg.map((c) => {\n          const labelKey = c.labelKey || String(c.key);\n          const valueNum = (statsState as any)[c.key] ?? 0;\n          return {\n            key: String(c.key),\n            icon: c.icon,\n            label: t(`home:stats.${labelKey}`),\n            value: formatShortNumber(typeof valueNum === 'number' ? valueNum : 0),\n            color: c.color,\n          } as CommunityStat;\n        });\n      })()\n    : [];\n\n  // Demo-only extra categories (×œ× ×™×ª× ×’×©×• ×¢× keys ×©×›×‘×¨ ×§×™×™××™× ×‘-realStats)\n  const demoStats: CommunityStat[] = [\n    { key: 'sportsGroups', icon: 'âš½', label: t('home:stats.sportsGroups'), value: '23', color: colors.success },\n    { key: 'musicLessons', icon: 'ğŸµ', label: t('home:stats.musicLessons'), value: '34', color: colors.info },\n    { key: 'artWorkshops', icon: 'ğŸ¨', label: t('home:stats.artWorkshops'), value: '45', color: colors.warning },\n    { key: 'computerLessons', icon: 'ğŸ’»', label: t('home:stats.computerLessons'), value: '28', color: colors.info },\n    { key: 'doctorVisits', icon: 'ğŸ¥', label: t('home:stats.doctorVisits'), value: '45', color: colors.error },\n  ].filter((d) => !new Set(realStats.map((r) => r.key)).has(d.key));\n\n  const stats: CommunityStat[] = isRealAuth ? realStats : [...realStats, ...demoStats];\n\n  return (\n    <View style={styles.container}>\n      {stats.map((s) => (\n        <TouchableOpacity key={s.key} style={[styles.card, styles.shadow]} onPress={() => onSelect(makeDetails(s))}>\n          <Text style={styles.icon}>{s.icon}</Text>\n          <Text style={styles.value}>{s.value}</Text>\n          <Text style={styles.label} numberOfLines={2}>{s.label}</Text>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingTop: 10,\n    paddingBottom: 20,\n    gap: 10,\n    ...(Platform.OS === 'web' ? { overflowY: 'visible' } : {}),\n  },\n  card: {\n    width: '31%',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 1600,\n    paddingVertical: 12,\n    alignItems: 'center',\n  },\n  shadow: {\n    ...(Platform.OS === 'web' ? { boxShadow: '0 2px 6px rgba(0,0,0,0.08)' } : {\n      elevation: 2,\n      shadowColor: colors.shadow,\n      shadowOpacity: 0.1,\n      shadowOffset: { width: 0, height: 1 },\n      shadowRadius: 4,\n    }),\n  },\n  icon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: 4,\n  },\n  value: {\n    fontSize: FontSizes.medium,\n    fontWeight: '800',\n    color: colors.legacyDarkBlue,\n    marginBottom: 2,\n  },\n  label: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    writingDirection: 'rtl',\n    paddingHorizontal: 4,\n  },\n});\n\nexport default CommunityStatsGrid;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommunityStatsPanel.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useAnimatedStyle\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":72,"column":25,"nodeType":"Identifier","endLine":72,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useAnimatedStyle\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":78,"column":23,"nodeType":"Identifier","endLine":78,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { View, Text, StyleSheet, Dimensions, ScrollView } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  runOnJS,\n  interpolate,\n} from 'react-native-reanimated';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst PANEL_HEIGHT = SCREEN_HEIGHT * 0.7;\nconst MIN_HEIGHT = 80;\n\ninterface StatItemProps {\n  icon: string;\n  value: string;\n  label: string;\n  color?: string;\n}\n\nconst StatItem: React.FC<StatItemProps> = ({ icon, value, label, color = colors.info }) => (\n  <View style={styles.statItem}>\n    <Ionicons name={icon as any} size={32} color={color} />\n    <Text style={styles.statValue}>{value}</Text>\n    <Text style={styles.statLabel}>{label}</Text>\n  </View>\n);\n\nexport default function CommunityStatsPanel() {\n  const { t } = useTranslation(['home']);\n  const translateY = useSharedValue(PANEL_HEIGHT - MIN_HEIGHT);\n  const isExpanded = useSharedValue(false);\n\n  const { isRealAuth } = useUser();\n  if (isRealAuth) return null;\n\n  const gesture = Gesture.Pan()\n    .onUpdate((event) => {\n      const newY = translateY.value + event.translationY;\n      if (newY >= 0 && newY <= PANEL_HEIGHT - MIN_HEIGHT) {\n        translateY.value = newY;\n      }\n    })\n    .onEnd((event) => {\n      if (event.velocityY < -500) {\n        // Fast swipe up\n        translateY.value = withSpring(0);\n        isExpanded.value = true;\n      } else if (event.velocityY > 500) {\n        // Fast swipe down\n        translateY.value = withSpring(PANEL_HEIGHT - MIN_HEIGHT);\n        isExpanded.value = false;\n      } else {\n        // Check position\n        if (translateY.value < (PANEL_HEIGHT - MIN_HEIGHT) / 2) {\n          translateY.value = withSpring(0);\n          isExpanded.value = true;\n        } else {\n          translateY.value = withSpring(PANEL_HEIGHT - MIN_HEIGHT);\n          isExpanded.value = false;\n        }\n      }\n    });\n\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateY: translateY.value }],\n    };\n  });\n\n  const handleStyle = useAnimatedStyle(() => {\n    const rotate = interpolate(\n      translateY.value,\n      [0, PANEL_HEIGHT - MIN_HEIGHT],\n      [180, 0]\n    );\n    return {\n      transform: [{ rotate: `${rotate}deg` }],\n    };\n  });\n\n  return (\n    <Animated.View style={[styles.container, animatedStyle]}>\n      <GestureDetector gesture={gesture}>\n        <View style={styles.header}>\n          <View style={styles.handle} />\n          <View style={styles.titleContainer}>\n            <Text style={styles.title}>{t('home:stats.title')}</Text>\n            <Animated.View style={handleStyle}>\n              <Ionicons name=\"chevron-up\" size={24} color={colors.textSecondary} />\n            </Animated.View>\n          </View>\n        </View>\n      </GestureDetector>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {/* Real-time stats */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:statsDetails.realTimeData')}</Text>\n          <View style={styles.statsGrid}>\n            <StatItem icon=\"people\" value=\"3,847\" label={t('home:stats.activeMembers') as string} />\n            <StatItem icon=\"heart\" value=\"12,456\" label={t('home:stats.monthlyDonations') as string} color={colors.secondary} />\n            <StatItem icon=\"trending-up\" value=\"+23%\" label={t('home:stats.monthlyGrowth') as string} color={colors.success} />\n            <StatItem icon=\"globe\" value=\"42\" label={t('home:stats.activeCities') as string} color={colors.info} />\n          </View>\n        </View>\n\n        {/* Impact stats */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.communityImpact')}</Text>\n          <View style={styles.impactCard}>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"car\" size={24} color={colors.info} />\n              <Text style={styles.impactText}>2,341 {t('home:stats.sharedRides')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"restaurant\" size={24} color={colors.secondary} />\n              <Text style={styles.impactText}>5,678 {t('home:stats.donatedMeals')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"school\" size={24} color={colors.warning} />\n              <Text style={styles.impactText}>892 {t('home:stats.mentoringHours')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"home\" size={24} color={colors.legacyMediumPurple} />\n              <Text style={styles.impactText}>156 {t('home:stats.supportedFamilies')}</Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Top contributors */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.topContributors')}</Text>\n          <View style={styles.leaderboard}>\n            {[t('home:names.david'), t('home:names.sarah'), t('home:names.moshe'), t('home:names.rachel'), t('home:names.yosef')].map((name, index) => (\n              <View key={index} style={styles.leaderItem}>\n                <View style={styles.leaderRank}>\n                  <Text style={styles.rankText}>{index + 1}</Text>\n                </View>\n                <Text style={styles.leaderName}>{name}</Text>\n                <View style={styles.leaderStats}>\n                  <Ionicons name=\"star\" size={16} color={colors.legacyMediumYellow} />\n                  <Text style={styles.pointsText}>{1500 - index * 200} {t('home:stats.pointsSuffix')}</Text>\n                </View>\n              </View>\n            ))}\n          </View>\n        </View>\n\n        {/* Activity graph placeholder */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.weeklyActivity')}</Text>\n          <View style={styles.graphPlaceholder}>\n            <Text style={styles.graphText}>{t('home:stats.activityGraphPlaceholder')}</Text>\n          </View>\n        </View>\n      </ScrollView>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: PANEL_HEIGHT,\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: -2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 5,\n    elevation: 5,\n  },\n  header: {\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    backgroundColor: colors.border,\n    borderRadius: 2,\n    alignSelf: 'center',\n    marginBottom: 12,\n  },\n  titleContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  content: {\n    flex: 1,\n    padding: 16,\n  },\n  section: {\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n  },\n  statItem: {\n    width: '48%',\n    backgroundColor: colors.backgroundSecondary,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  statValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 8,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 4,\n  },\n  impactCard: {\n    backgroundColor: colors.backgroundSecondary,\n    padding: 16,\n    borderRadius: 12,\n  },\n  impactRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  impactText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    marginLeft: 12,\n    flex: 1,\n  },\n  leaderboard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n  },\n  leaderItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  leaderRank: {\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    backgroundColor: colors.info,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  rankText: {\n    color: colors.white,\n    fontWeight: 'bold',\n    fontSize: FontSizes.body,\n  },\n  leaderName: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n  },\n  leaderStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  pointsText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  graphPlaceholder: {\n    height: 150,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  graphText: {\n    color: colors.textSecondary,\n    fontSize: FontSizes.body,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DatePicker.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/components/DatePicker.tsx:67:5\n  65 |   useEffect(() => {\n  66 |     const validDate = ensureValidDate(value);\n> 67 |     setSelectedDate(validDate);\n     |     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  68 |   }, [value]);\n  69 |\n  70 |   const handleOpen = () => {","line":67,"column":5,"nodeType":null,"endLine":67,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  ScrollView,\n  Platform,\n  TextInput,\n} from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { I18nManager } from 'react-native';\n\ninterface DatePickerProps {\n  value: Date | null;\n  onChange: (date: Date | null) => void;\n  placeholder?: string;\n  label?: string;\n  minimumDate?: Date;\n  maximumDate?: Date;\n  disabled?: boolean;\n}\n\n// Helper function to format date to Hebrew locale\nconst formatDate = (date: Date | null): string => {\n  if (!date || !(date instanceof Date) || isNaN(date.getTime())) {\n    return '';\n  }\n  return date.toLocaleDateString('he-IL', {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n  });\n};\n\n// Helper function to validate and create Date\nconst ensureValidDate = (date: Date | null | undefined): Date => {\n  if (!date) return new Date();\n  if (date instanceof Date && !isNaN(date.getTime())) {\n    return date;\n  }\n  return new Date();\n};\n\nexport default function DatePicker({\n  value,\n  onChange,\n  placeholder,\n  label,\n  minimumDate,\n  maximumDate,\n  disabled = false,\n}: DatePickerProps) {\n  const { t } = useTranslation(['common', 'trump']);\n  const [isVisible, setIsVisible] = useState(false);\n  const [selectedDate, setSelectedDate] = useState<Date>(() => ensureValidDate(value));\n  const [showNativePicker, setShowNativePicker] = useState(false);\n\n  // Update selected date when value prop changes\n  useEffect(() => {\n    const validDate = ensureValidDate(value);\n    setSelectedDate(validDate);\n  }, [value]);\n\n  const handleOpen = () => {\n    if (disabled) return;\n    const validDate = ensureValidDate(value);\n    setSelectedDate(validDate);\n    \n    if (Platform.OS === 'web') {\n      setIsVisible(true);\n    } else {\n      // On mobile, show native picker\n      setShowNativePicker(true);\n    }\n  };\n\n  const handleConfirm = () => {\n    onChange(selectedDate);\n    setIsVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsVisible(false);\n    setShowNativePicker(false);\n  };\n\n  const handleNativeDateChange = (event: any, date?: Date) => {\n    setShowNativePicker(false);\n    if (Platform.OS === 'android') {\n      // Android closes automatically\n    }\n    if (date) {\n      onChange(date);\n    }\n  };\n\n  // Generate date options for custom picker (web)\n  const currentYear = new Date().getFullYear();\n  const years = Array.from({ length: 5 }, (_, i) => currentYear + i);\n  const months = [\n    '×™× ×•××¨', '×¤×‘×¨×•××¨', '××¨×¥', '××¤×¨×™×œ', '×××™', '×™×•× ×™',\n    '×™×•×œ×™', '××•×’×•×¡×˜', '×¡×¤×˜××‘×¨', '××•×§×˜×•×‘×¨', '× ×•×‘××‘×¨', '×“×¦××‘×¨'\n  ];\n  const daysInMonth = (year: number, month: number) => {\n    return new Date(year, month + 1, 0).getDate();\n  };\n\n  const selectedYear = selectedDate.getFullYear();\n  const selectedMonth = selectedDate.getMonth();\n  const selectedDay = selectedDate.getDate();\n  const days = Array.from(\n    { length: daysInMonth(selectedYear, selectedMonth) },\n    (_, i) => i + 1\n  );\n\n  const handleYearChange = (year: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setFullYear(year);\n    // Adjust day if needed (e.g., Feb 29 -> Feb 28)\n    const maxDay = daysInMonth(year, newDate.getMonth());\n    if (newDate.getDate() > maxDay) {\n      newDate.setDate(maxDay);\n    }\n    setSelectedDate(newDate);\n  };\n\n  const handleMonthChange = (month: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setMonth(month);\n    // Adjust day if needed\n    const maxDay = daysInMonth(newDate.getFullYear(), month);\n    if (newDate.getDate() > maxDay) {\n      newDate.setDate(maxDay);\n    }\n    setSelectedDate(newDate);\n  };\n\n  const handleDayChange = (day: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(day);\n    setSelectedDate(newDate);\n  };\n\n  const displayValue = formatDate(value ? ensureValidDate(value) : null);\n\n  return (\n    <View style={styles.container}>\n      {label && <Text style={styles.label}>{label}</Text>}\n\n      {Platform.OS === 'web' ? (\n        <>\n          <TouchableOpacity\n            style={[styles.dateButton, disabled && styles.disabled]}\n            onPress={handleOpen}\n            disabled={disabled}\n          >\n            <Text style={[styles.dateText, !displayValue && styles.placeholderText]}>\n              {displayValue || placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n            </Text>\n            <Icon name=\"calendar-outline\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <Modal\n            visible={isVisible}\n            transparent={true}\n            animationType=\"slide\"\n            onRequestClose={handleCancel}\n          >\n            <View style={styles.modalOverlay}>\n              <View style={styles.modalContent}>\n                <View style={styles.modalHeader}>\n                  <Text style={styles.modalTitle}>\n                    {placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n                  </Text>\n                  <TouchableOpacity onPress={handleCancel} style={styles.closeButton}>\n                    <Icon name=\"close\" size={24} color={colors.textPrimary} />\n                  </TouchableOpacity>\n                </View>\n\n                <View style={styles.pickerContainer}>\n                  {/* Year Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.year') || '×©× ×”'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {years.map((year) => (\n                        <TouchableOpacity\n                          key={year}\n                          style={[\n                            styles.pickerItem,\n                            selectedYear === year && styles.selectedItem,\n                          ]}\n                          onPress={() => handleYearChange(year)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedYear === year && styles.selectedItemText,\n                            ]}\n                          >\n                            {year}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n\n                  {/* Month Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.month') || '×—×•×“×©'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {months.map((month, index) => (\n                        <TouchableOpacity\n                          key={index}\n                          style={[\n                            styles.pickerItem,\n                            selectedMonth === index && styles.selectedItem,\n                          ]}\n                          onPress={() => handleMonthChange(index)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedMonth === index && styles.selectedItemText,\n                            ]}\n                          >\n                            {month}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n\n                  {/* Day Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.day') || '×™×•×'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {days.map((day) => (\n                        <TouchableOpacity\n                          key={day}\n                          style={[\n                            styles.pickerItem,\n                            selectedDay === day && styles.selectedItem,\n                          ]}\n                          onPress={() => handleDayChange(day)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedDay === day && styles.selectedItemText,\n                            ]}\n                          >\n                            {day}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n                </View>\n\n                <View style={styles.modalFooter}>\n                  <TouchableOpacity style={styles.cancelButton} onPress={handleCancel}>\n                    <Text style={styles.cancelButtonText}>{t('common:cancel')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity style={styles.confirmButton} onPress={handleConfirm}>\n                    <Text style={styles.confirmButtonText}>{t('common:confirm')}</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            </View>\n          </Modal>\n        </>\n      ) : (\n        <>\n          <TouchableOpacity\n            style={[styles.dateButton, disabled && styles.disabled]}\n            onPress={handleOpen}\n            disabled={disabled}\n          >\n            <Text style={[styles.dateText, !displayValue && styles.placeholderText]}>\n              {displayValue || placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n            </Text>\n            <Icon name=\"calendar-outline\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          {showNativePicker && (\n            <DateTimePicker\n              value={selectedDate}\n              mode=\"date\"\n              display=\"default\"\n              onChange={handleNativeDateChange}\n              minimumDate={minimumDate}\n              maximumDate={maximumDate}\n            />\n          )}\n        </>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 8,\n  },\n  label: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    textAlign: I18nManager.isRTL ? 'right' : 'left',\n  },\n  dateButton: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.moneyInputBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 10,\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    minHeight: 48,\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  dateText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  placeholderText: {\n    color: colors.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderRadius: 16,\n    width: '90%',\n    maxWidth: 400,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  pickerContainer: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    justifyContent: 'space-around',\n  },\n  pickerColumn: {\n    flex: 1,\n    alignItems: 'center',\n    marginHorizontal: 4,\n  },\n  pickerLabel: {\n    fontSize: FontSizes.small,\n    fontWeight: '500',\n    color: colors.textSecondary,\n    marginBottom: 6,\n  },\n  pickerScroll: {\n    height: 150,\n  },\n  pickerItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    marginVertical: 2,\n    minWidth: 60,\n    alignItems: 'center',\n  },\n  selectedItem: {\n    backgroundColor: colors.secondary,\n  },\n  pickerItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  selectedItemText: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  modalFooter: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  cancelButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginRight: I18nManager.isRTL ? 0 : 6,\n    marginLeft: I18nManager.isRTL ? 6 : 0,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n    alignItems: 'center',\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  confirmButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginLeft: I18nManager.isRTL ? 0 : 6,\n    marginRight: I18nManager.isRTL ? 6 : 0,\n    borderRadius: 8,\n    backgroundColor: colors.secondary,\n    alignItems: 'center',\n  },\n  confirmButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.white,\n    fontWeight: '600',\n  },\n});\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DevEnvironmentBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DonationStatsFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DonationStatsScreen.tsx","messages":[{"ruleId":"react-hooks/use-memo","severity":2,"message":"Error: Expected the first argument to be an inline function expression\n\nExpected the first argument to be an inline function expression.\n\n/Users/navesarussi/KC/DEV/MVP/components/DonationStatsScreen.tsx:180:27\n  178 | const DonationStatsScreen: React.FC = () => {\n  179 |   const { t } = useTranslation([\"donations\", \"common\"]);\n> 180 |   const bubbles = useMemo(generateStatsLayout, []);\n      |                           ^^^^^^^^^^^^^^^^^^^ Expected the first argument to be an inline function expression\n  181 |   const [selectedBubbleId, setSelectedBubbleId] = useState<string | null>(null);\n  182 |   const [currentSentenceIndex, setCurrentSentenceIndex] = useState(0);\n  183 |","line":180,"column":27,"nodeType":null,"endLine":180,"endColumn":46}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Visualize community donation stats as animated bubbles with motivational quotes.\n// - Reached from: Home or Donations related routes embedding this component.\n// - Inputs: None directly; pulls localized strings via i18n and sample data from `globals/fakeData`.\n// - Behavior: Generates background and stat bubbles, animates float/pulse, toggles selection to highlight values.\n\"use strict\";\nimport React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Dimensions,\n  TouchableWithoutFeedback,\n  GestureResponderEvent,\n  StatusBar,\n} from \"react-native\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withRepeat,\n  withTiming,\n  withSpring,\n  withDelay,\n  Easing,\n  interpolate,\n} from \"react-native-reanimated\";\nimport { FontSizes } from \"../globals/constants\";\n// Initial data - replace with real data from API\nconst charities: any[] = [{\n  id: 'kc',\n  name: 'KarmaCommunity',\n  statistics: [\n    { id: '1', name: '×§×”×™×œ×”', value: 3847, icon: 'ğŸ‘¥', category: 'community', color: colors.info },\n    { id: '2', name: '×ª×¨×•××•×ª', value: 12456, icon: 'â¤ï¸', category: 'donations', color: colors.secondary },\n  ],\n  motivationalQuotes: [\n    '× ×ª×™× ×” ×”×™× ×”×§×‘×œ×” ×”×’×“×•×œ×” ×‘×™×•×ª×¨.',\n    '×‘×™×—×“ ×× ×—× ×• ×‘×•× ×™× ×¢×•×œ× ×˜×•×‘ ×™×•×ª×¨.',\n  ]\n}];\nimport { TouchableOpacity } from \"react-native\";\nimport colors from \"../globals/colors\";\nimport { useTranslation } from \"react-i18next\";\n\n// Get the dimensions of the device window for responsive sizing\nconst { width, height } = Dimensions.get(\"window\");\n\n// --- Constants ---\nconst kcStats = charities[0]?.statistics || [];\nconst STATS_BUBBLE_COUNT = kcStats.length;\nconst BACKGROUND_BUBBLES_COUNT = 15;\nconst MIN_SIZE = 60;\nconst MAX_SIZE = 160;\nconst BACKGROUND_MIN_SIZE = 30;\nconst BACKGROUND_MAX_SIZE = 80;\nconst MIN_VALUE = kcStats.length > 0 ? Math.min(...kcStats.map((s: any) => s.value)) : 0;\nconst MAX_VALUE = kcStats.length > 0 ? Math.max(...kcStats.map((s: any) => s.value)) : 100;\n\n/**\n * ×××™×¨ ××¡×¤×¨ ×œ×¢×¨×š ×’×•×“×œ ×‘×•×¢×” ×‘×˜×•×•×— ×”××•×’×“×¨\n * @param num - ×”××¡×¤×¨ ×œ×”××¨×”\n * @returns ×’×•×“×œ ×”×‘×•×¢×” ×‘×¤×™×§×¡×œ×™×\n */\nconst scaleNumberToSize = (num: number): number => {\n  const clampedNum = Math.max(MIN_VALUE, Math.min(MAX_VALUE, num));\n  const scaledSize =\n    MIN_SIZE +\n    ((clampedNum - MIN_VALUE) / (MAX_VALUE - MIN_VALUE)) *\n    (MAX_SIZE - MIN_SIZE);\n  return scaledSize;\n};\n\n/**\n * ×‘×•×“×§ ×× ×‘×•×¢×” ×—×“×©×” ×ª×—×¤×•×£ ×¢× ×‘×•×¢×•×ª ×§×™×™××•×ª\n */\nconst isOverlapping = (\n  x: number,\n  y: number,\n  size: number,\n  bubbles: any[]\n): boolean => {\n  const overlapThreshold = 1.8;\n  for (const b of bubbles) {\n    const dx = b.x - x;\n    const dy = b.y - y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    if (distance < (b.size + size) / overlapThreshold) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst generateStatsLayout = () => {\n  console.log(\"Generating donation stats bubbles...\");\n  const bubbles: any[] = [];\n  let attempts = 0;\n  const maxAttempts = 3000;\n\n  for (let i = 0; i < BACKGROUND_BUBBLES_COUNT && attempts < maxAttempts; i++) {\n    const size = BACKGROUND_MIN_SIZE + Math.random() * (BACKGROUND_MAX_SIZE - BACKGROUND_MIN_SIZE);\n\n    let placed = false;\n    let localAttempts = 0;\n    const maxLocalAttempts = 200;\n\n    while (!placed && localAttempts < maxLocalAttempts) {\n      const margin = 40;\n      const x = margin + Math.random() * (width - size - margin * 2);\n      const y = 200 + Math.random() * (height - size - 350);\n\n      if (!isOverlapping(x, y, size, bubbles)) {\n        bubbles.push({\n          id: `bg-${i}`,\n          size,\n          x,\n          y,\n          value: 0,\n          name: \"\",\n          icon: \"\",\n          category: \"background\",\n          color: colors.border,\n          directionX: Math.random() > 0.5 ? 1 : -1,\n          directionY: Math.random() > 0.5 ? 1 : -1,\n          delay: Math.random() * 2000,\n          isBackground: true,\n        });\n        placed = true;\n      }\n      localAttempts++;\n      attempts++;\n    }\n  }\n\n  for (let i = 0; i < kcStats.length && attempts < maxAttempts; i++) {\n    const stat = kcStats[i];\n    const size = scaleNumberToSize(stat.value);\n\n    let placed = false;\n    let localAttempts = 0;\n    const maxLocalAttempts = 300;\n\n    while (!placed && localAttempts < maxLocalAttempts) {\n      const margin = 20;\n      const x = margin + Math.random() * (width - size - margin * 2);\n      const y = 200 + Math.random() * (height - size - 350);\n\n      if (!isOverlapping(x, y, size, bubbles)) {\n        bubbles.push({\n          id: stat.id,\n          size,\n          x,\n          y,\n          value: stat.value,\n          name: stat.name,\n          icon: stat.icon,\n          category: stat.category,\n          color: stat.color,\n          directionX: Math.random() > 0.5 ? 1 : -1,\n          directionY: Math.random() > 0.5 ? 1 : -1,\n          delay: Math.random() * 1000,\n          isBackground: false,\n        });\n        placed = true;\n      }\n      localAttempts++;\n      attempts++;\n    }\n  }\n\n  console.log(`Generated ${bubbles.length} bubbles total`);\n  return bubbles;\n};\n\n/**\n * ×§×•××¤×•× × ×˜×” ×¨××©×™×ª ×œ×”×¦×’×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª ×ª×¨×•××•×ª ×›×‘×•×¢×•×ª ×¦×¤×•×ª\n */\nconst DonationStatsScreen: React.FC = () => {\n  const { t } = useTranslation([\"donations\", \"common\"]);\n  const bubbles = useMemo(generateStatsLayout, []);\n  const [selectedBubbleId, setSelectedBubbleId] = useState<string | null>(null);\n  const [currentSentenceIndex, setCurrentSentenceIndex] = useState(0);\n\n  /**\n   * ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×‘×•×¢×”\n   */\n  const handleBubblePress = useCallback((id: string) => {\n    setSelectedBubbleId((prevId) => {\n      const newId = prevId === id ? null : id;\n      return newId;\n    });\n    setCurrentSentenceIndex((prevIndex) => {\n      const kcQuotes = charities[0]?.motivationalQuotes || [];\n      const newIndex = kcQuotes.length > 0 ? (prevIndex + 1) % kcQuotes.length : 0;\n      return newIndex;\n    });\n  }, []);\n\n  /**\n   * ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×”×•×“×¢×” ××•×˜×™×‘×¦×™×•× ×™×ª\n   */\n  const handleMessagePress = useCallback(() => {\n    const kcQuotes = charities[0]?.motivationalQuotes || [];\n    setCurrentSentenceIndex(\n      (prevIndex) => kcQuotes.length > 0 ? (prevIndex + 1) % kcQuotes.length : 0\n    );\n  }, []);\n\n  return (\n    <View style={localStyles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"transparent\" translucent />\n\n      {/* Screen header */}\n      <View style={localStyles.headerContainer}>\n        <Text style={localStyles.title}>{t('donations:statsScreen.title')}</Text>\n        <Text style={localStyles.subtitle}>{t('donations:statsScreen.subtitle')}</Text>\n      </View>\n\n      {/* Bubbles container */}\n      <View style={localStyles.bubblesContainer}>\n        {bubbles.map((bubble) => (\n          <AnimatedStatsBubble\n            key={bubble.id}\n            {...bubble}\n            isSelected={selectedBubbleId === bubble.id}\n            onPress={handleBubblePress}\n          />\n        ))}\n      </View>\n\n      {/* Motivational message container */}\n      <View style={localStyles.messageContainer}>\n        <TouchableOpacity\n          onPress={handleMessagePress}\n          style={localStyles.messageButton}\n        >\n          <Text style={localStyles.messageText}>\n            {charities[0]?.motivationalQuotes?.[currentSentenceIndex] || t('donations:statsScreen.noQuotes')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\n// --- AnimatedStatsBubble Component ---\n\ninterface AnimatedStatsBubbleProps {\n  id: string;\n  size: number;\n  x: number;\n  y: number;\n  value: number;\n  name: string;\n  icon: string;\n  category: string;\n  color: string;\n  directionX: number;\n  directionY: number;\n  delay: number;\n  isSelected: boolean;\n  onPress: (id: string) => void;\n  isBackground?: boolean;\n}\n\n/**\n * ×§×•××¤×•× × ×˜×ª ×‘×•×¢×” ×‘×•×“×“×ª ×¢× ×× ×™××¦×™×•×ª ×¢×“×™× ×•×ª\n */\nconst AnimatedStatsBubble: React.FC<AnimatedStatsBubbleProps> = ({\n  id,\n  size,\n  x,\n  y,\n  value,\n  name,\n  icon,\n  category,\n  color,\n  directionX,\n  directionY,\n  delay,\n  isSelected,\n  onPress,\n  isBackground = false,\n}) => {\n  const floatOffset = useSharedValue(0);\n  const pulseScale = useSharedValue(1);\n  const animatedOpacity = useSharedValue(0.85);\n  const animatedScale = useSharedValue(1);\n\n  useEffect(() => {\n    floatOffset.value = withRepeat(\n      withDelay(\n        delay,\n        withTiming(1, {\n          duration: 4000 + Math.random() * 2000,\n          easing: Easing.inOut(Easing.sin),\n        })\n      ),\n      -1,\n      true\n    );\n  }, [delay, floatOffset]);\n\n  useEffect(() => {\n    pulseScale.value = withRepeat(\n      withDelay(\n        delay + 500,\n        withTiming(1.08, {\n          duration: 2500 + Math.random() * 1500,\n          easing: Easing.inOut(Easing.quad),\n        })\n      ),\n      -1,\n      true\n    );\n  }, [delay, pulseScale]);\n\n  useEffect(() => {\n    animatedOpacity.value = withTiming(isSelected ? 1 : 0.85, {\n      duration: 300,\n    });\n    animatedScale.value = withSpring(isSelected ? 1.15 : 1, {\n      damping: 12,\n      stiffness: 150,\n    });\n  }, [isSelected, animatedOpacity, animatedScale]);\n\n  const handleInternalPress = useCallback(\n    (event: GestureResponderEvent) => {\n      if (!isBackground) {\n        onPress(id);\n      }\n    },\n    [id, onPress, isBackground]\n  );\n\n  const animatedStyle = useAnimatedStyle(() => {\n    const floatX = interpolate(\n      floatOffset.value,\n      [0, 1],\n      [0, 6 * directionX]\n    );\n    const floatY = interpolate(\n      floatOffset.value,\n      [0, 1],\n      [0, 8 * directionY]\n    );\n\n    let backgroundColor, borderColor, shadowColor;\n\n    if (isBackground) {\n      backgroundColor = color + '15';\n      borderColor = color + '30';\n      shadowColor = color + '20';\n    } else {\n      backgroundColor = color + '20';\n      borderColor = color;\n      shadowColor = color + '40';\n\n      if (isSelected) {\n        backgroundColor = color + '40';\n        borderColor = color;\n        shadowColor = color + '60';\n      }\n    }\n\n    return {\n      transform: [\n        { translateX: x + floatX },\n        { translateY: y + floatY },\n        { scale: animatedScale.value * pulseScale.value },\n      ] as any,\n      backgroundColor,\n      borderColor,\n      shadowColor,\n      opacity: animatedOpacity.value,\n    };\n  });\n\n  const iconSize = Math.max(size * 0.15, 16);\n  const valueSize = Math.max(size * 0.18, 14);\n  const nameSize = Math.max(size * 0.08, 10);\n\n  return (\n    <TouchableWithoutFeedback onPress={handleInternalPress}>\n      <Animated.View\n        style={[\n          localStyles.bubble,\n          {\n            width: size,\n            height: size,\n            borderRadius: size / 2,\n            zIndex: isBackground ? 1 : isSelected ? 100 : 10,\n          },\n          animatedStyle,\n        ]}\n      >\n        {!isBackground && (\n          <View style={localStyles.bubbleContent}>\n            {/* Icon */}\n            <Text style={[localStyles.bubbleIcon, { fontSize: iconSize }]}>\n              {icon}\n            </Text>\n\n            {/* Value */}\n            <Text\n              style={[\n                localStyles.bubbleValue,\n                {\n                  fontSize: valueSize,\n                  color: isSelected ? colors.textPrimary : colors.textSecondary,\n                },\n              ]}\n              numberOfLines={1}\n              adjustsFontSizeToFit\n              minimumFontScale={0.6}\n            >\n              {value.toLocaleString()}\n            </Text>\n\n            {/* Name */}\n            <Text\n              style={[\n                localStyles.bubbleName,\n                {\n                  fontSize: nameSize,\n                  color: isSelected ? colors.textPrimary : colors.textTertiary,\n                  lineHeight: nameSize * 1.3,\n                },\n              ]}\n              numberOfLines={3}\n              adjustsFontSizeToFit\n              minimumFontScale={0.4}\n            >\n              {name}\n            </Text>\n          </View>\n        )}\n      </Animated.View>\n    </TouchableWithoutFeedback>\n  );\n};\n\n// --- StyleSheet ---\nconst localStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  headerContainer: {\n    paddingTop: 60,\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderBottomLeftRadius: 25,\n    borderBottomRightRadius: 25,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: \"bold\",\n    color: colors.textPrimary,\n    textAlign: \"center\",\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: \"center\",\n  },\n  bubblesContainer: {\n    flex: 1,\n    position: \"relative\",\n    marginTop: 20,\n  },\n  bubble: {\n    position: \"absolute\",\n    borderWidth: 2,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 8,\n    elevation: 8,\n  },\n  bubbleContent: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    width: \"100%\",\n  },\n  bubbleIcon: {\n    textAlign: \"center\",\n    marginBottom: 4,\n  },\n  bubbleValue: {\n    fontWeight: \"900\",\n    textAlign: \"center\",\n    marginBottom: 4,\n  },\n  bubbleName: {\n    textAlign: \"center\",\n    fontWeight: \"600\",\n    opacity: 0.9,\n  },\n  messageContainer: {\n    position: 'absolute',\n    bottom: 100,\n    left: 20,\n    right: 20,\n    alignItems: \"center\",\n    zIndex: 1000,\n  },\n  messageButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 25,\n    paddingHorizontal: 20,\n    paddingVertical: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 8,\n    elevation: 6,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n  },\n  messageText: {\n    fontSize: FontSizes.small,\n    fontWeight: \"600\",\n    color: colors.textPrimary,\n    textAlign: \"center\",\n    lineHeight: 18,\n  },\n});\n\nexport default DonationStatsScreen;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/EmailLoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/EditPostModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/FeedHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/OptionsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/DonationItemCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/ItemDeliveredCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RegularItemCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RideCompletedCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RideOfferedCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/TaskAssignmentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/TaskCompletionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostReelItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/QuickMessageModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getDefaultMessage'. Either include it or remove the dependency array.","line":64,"column":6,"nodeType":"ArrayExpression","endLine":64,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [visible, postType, getDefaultMessage]","fix":{"range":[1887,1906],"text":"[visible, postType, getDefaultMessage]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  KeyboardAvoidingView,\n  Platform,\n  ActivityIndicator,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\nimport { useUser } from '../../stores/userStore';\nimport { createConversation, conversationExists, sendMessage } from '../../utils/chatService';\nimport { toastService } from '../../utils/toastService';\n\ninterface QuickMessageModalProps {\n  visible: boolean;\n  onClose: () => void;\n  postType: 'item' | 'ride' | 'task' | 'donation';\n  recipientId: string;\n  recipientName: string;\n}\n\nconst QuickMessageModal: React.FC<QuickMessageModalProps> = ({\n  visible,\n  onClose,\n  postType,\n  recipientId,\n  recipientName,\n}) => {\n  const { t, i18n } = useTranslation();\n  const isRTL = i18n.language === 'he';\n  const { selectedUser } = useUser();\n  const [messageText, setMessageText] = useState('');\n  const [isSending, setIsSending] = useState(false);\n\n  // Get default message based on post type\n  const getDefaultMessage = (): string => {\n    switch (postType) {\n      case 'item':\n      case 'donation':\n        return t('quickMessage:item', { defaultValue: '×”×× ×¤×¨×™×˜ ×–×” ×¢×•×“ ×¨×œ×•×•× ×˜×™?' });\n      case 'ride':\n        return t('quickMessage:ride', { defaultValue: '×”×× ×˜×¨××¤ ×–×” ×¢×•×“ ×¨×œ×•×•× ×˜×™?' });\n      case 'task':\n        return t('quickMessage:task', { defaultValue: '×”×× ××©×™××” ×–×• ×¢×•×“ ×¨×œ×•×•× ×˜×™×ª?' });\n      default:\n        return t('quickMessage:default', { defaultValue: '×”×× ×–×” ×¢×•×“ ×¨×œ×•×•× ×˜×™?' });\n    }\n  };\n\n  // Initialize message text when modal opens\n  useEffect(() => {\n    if (visible) {\n      setMessageText(getDefaultMessage());\n    } else {\n      setMessageText('');\n    }\n  }, [visible, postType]);\n\n  const handleSend = async () => {\n    if (!messageText.trim() || !selectedUser || isSending) return;\n\n    // Don't allow sending message to self\n    if (selectedUser.id === recipientId) {\n      toastService.showError(t('quickMessage:cannotMessageSelf', { defaultValue: '×œ× × ×™×ª×Ÿ ×œ×©×œ×•×— ×”×•×“×¢×” ×œ×¢×¦××š' }));\n      return;\n    }\n\n    setIsSending(true);\n\n    try {\n      // 1. Check if conversation exists\n      let conversationId = await conversationExists(selectedUser.id, recipientId);\n\n      // 2. If not, create new conversation\n      if (!conversationId) {\n        conversationId = await createConversation([selectedUser.id, recipientId]);\n      }\n\n      // 3. Send message\n      await sendMessage({\n        conversationId,\n        senderId: selectedUser.id,\n        text: messageText.trim(),\n        type: 'text',\n        timestamp: new Date().toISOString(),\n        read: false,\n        status: 'sent',\n      }, [selectedUser.id, recipientId]);\n\n      toastService.showSuccess(t('quickMessage:success', { defaultValue: '×”×”×•×“×¢×” × ×©×œ×—×” ×‘×”×¦×œ×—×”' }));\n      onClose();\n    } catch (error) {\n      console.error('âŒ Quick message send error:', error);\n      toastService.showError(t('quickMessage:error', { defaultValue: '×©×’×™××” ×‘×©×œ×™×—×ª ×”×”×•×“×¢×”' }));\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n        style={styles.container}\n      >\n        <TouchableOpacity\n          style={styles.backdrop}\n          activeOpacity={1}\n          onPress={onClose}\n        />\n        <View style={styles.modalContent}>\n          <View style={styles.header}>\n            <Text style={styles.title}>\n              {t('quickMessage:title', { defaultValue: '×©×œ×— ×”×•×“×¢×” ××”×™×¨×”' })}\n            </Text>\n            <TouchableOpacity\n              onPress={onClose}\n              style={styles.closeButton}\n              disabled={isSending}\n            >\n              <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.body}>\n            <Text style={styles.recipientText}>\n              {t('quickMessage:to', { defaultValue: '×œ' })}: {recipientName}\n            </Text>\n\n            <TextInput\n              style={[styles.input, { textAlign: isRTL ? 'right' : 'left' }]}\n              value={messageText}\n              onChangeText={setMessageText}\n              placeholder={t('quickMessage:placeholder', { defaultValue: '×”×§×œ×“ ×”×•×“×¢×”...' })}\n              placeholderTextColor={colors.textSecondary}\n              multiline\n              numberOfLines={3}\n              editable={!isSending}\n              textAlignVertical=\"top\"\n            />\n          </View>\n\n          <View style={[styles.footer, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n            <TouchableOpacity\n              style={[styles.button, styles.cancelButton]}\n              onPress={onClose}\n              disabled={isSending}\n            >\n              <Text style={[styles.buttonText, { color: colors.textPrimary }]}>\n                {t('common:cancel', { defaultValue: '×‘×™×˜×•×œ' })}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[\n                styles.button,\n                styles.sendButton,\n                (!messageText.trim() || isSending) && styles.sendButtonDisabled,\n              ]}\n              onPress={handleSend}\n              disabled={!messageText.trim() || isSending}\n            >\n              {isSending ? (\n                <ActivityIndicator size=\"small\" color={colors.white} />\n              ) : (\n                <>\n                  <Ionicons name=\"send\" size={18} color={colors.white} />\n                  <Text style={[styles.buttonText, { color: colors.white }]}>\n                    {t('quickMessage:send', { defaultValue: '×©×œ×—' })}\n                  </Text>\n                </>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </KeyboardAvoidingView>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  backdrop: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: colors.white,\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 400,\n    ...Platform.select({\n      ios: {\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 8,\n      },\n      android: {\n        elevation: 8,\n      },\n    }),\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n  },\n  title: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  body: {\n    padding: 16,\n  },\n  recipientText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 12,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    minHeight: 80,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  footer: {\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.backgroundSecondary,\n    gap: 12,\n  },\n  button: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 12,\n    borderRadius: 8,\n    gap: 6,\n  },\n  cancelButton: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  sendButton: {\n    backgroundColor: colors.primary,\n  },\n  sendButtonDisabled: {\n    opacity: 0.5,\n  },\n  buttonText: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n  },\n});\n\nexport default QuickMessageModal;\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/ReportPostModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FilterSortOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FirebaseGoogleButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesOverlay.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'STAT_LABELS'. Either include it or remove the dependency array.","line":294,"column":6,"nodeType":"ArrayExpression","endLine":294,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [STAT_LABELS, statKeys]","fix":{"range":[10144,10154],"text":"[STAT_LABELS, statKeys]"}}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`animate` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesOverlay.tsx:662:50\n  660 |     }\n  661 |\n> 662 |     animationRef.current = requestAnimationFrame(animate);\n      |                                                  ^^^^^^^ `animate` accessed before it is declared\n  663 |   }, [applyMouseForces, drawBubble, drawRipples]);\n  664 |\n  665 |   useEffect(() => {\n\n/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesOverlay.tsx:583:3\n  581 |   }, []);\n  582 |\n> 583 |   const animate = useCallback(() => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 584 |     const canvas = canvasRef.current;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 585 |     if (!canvas) return;\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 662 |     animationRef.current = requestAnimationFrame(animate);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 663 |   }, [applyMouseForces, drawBubble, drawRipples]);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `animate` is declared here\n  664 |\n  665 |   useEffect(() => {\n  666 |     const canvas = canvasRef.current;","line":662,"column":50,"nodeType":null,"endLine":662,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'assignStatsToBubbles'. Either include it or remove the dependency array.","line":702,"column":6,"nodeType":"ArrayExpression","endLine":703,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [animate, initializeBubbles, handleMouseMove, handleMouseDown, handleMouseUp, handleTouchMove, handleTouchStart, handleTouchEnd, assignStatsToBubbles]","fix":{"range":[24835,24967],"text":"[animate, initializeBubbles, handleMouseMove, handleMouseDown, handleMouseUp, handleTouchMove, handleTouchStart, handleTouchEnd, assignStatsToBubbles]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Web-only canvas overlay with animated floating bubbles reflecting live community stats.\n// - Reached from: Home screen on Web to render an animated background behind content.\n// - Inputs: None; fetches stats via `EnhancedStatsService` and renders to <canvas>.\n// - Behavior: Creates many bubbles with depth, wobble and shimmer; assigns labels from stats and updates periodically.\nimport React, { useEffect, useRef, useCallback, useState } from 'react';\nimport { EnhancedStatsService, formatShortNumber } from '../utils/statsService';\nimport type { CommunityStats } from '../utils/statsService';\nimport colors from '../globals/colors';\n\n// Fallback label by size before stats are loaded\nconst getSizeLabel = (radius: number): string => {\n  if (radius < 18) return 'XS';\n  if (radius < 35) return 'S';\n  if (radius < 60) return 'M';\n  if (radius < 90) return 'L';\n  return 'XL';\n};\n\ninterface Bubble {\n  id: string;\n  x: number;\n  y: number;\n  originalX: number;\n  originalY: number;\n  vx: number;\n  vy: number;\n  radius: number;\n  originalRadius: number;\n  targetRadius: number;\n  depth: number;\n  speed: number;\n  wobbleSpeed: number;\n  wobbleAmount: number;\n  wobbleOffset: number;\n  shimmerSpeed: number;\n  shimmerOffset: number;\n  opacity: number;\n  hue: number;\n  saturation: number;\n  lightness: number;\n  life: number;\n  floatDirection: number;\n  mouseForceX: number;\n  mouseForceY: number;\n  dragForceX: number;\n  dragForceY: number;\n  labelNumber: number;\n  labelText: string;\n  labelValue: string;\n}\n\ninterface Ripple {\n  x: number;\n  y: number;\n  radius: number;\n  maxRadius: number;\n  strength: number;\n  life: number;\n}\n\ninterface MouseState {\n  x: number;\n  y: number;\n  isPressed: boolean;\n}\n\nconst FloatingBubbles = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationRef = useRef<number | null>(null);\n  const bubblesRef = useRef<Bubble[]>([]);\n  const mouseRef = useRef<MouseState>({ x: 0, y: 0, isPressed: false });\n  const rippleRef = useRef<Ripple[]>([]);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  const statsRef = useRef<CommunityStats | null>(null);\n  const BOTTOM_SAFE_ZONE_PX = 96; // ×©××™×¨×ª ××–×•×¨ ×”×›×¤×ª×•×¨ ×‘×ª×—×ª×™×ª\n  const MIN_LABEL_RADIUS_FOR_STATS = 36; // ××¦×™×’×™× ×¡×˜×˜×™×¡×˜×™×§×” ×¨×§ ×‘×‘×•×¢×•×ª ×’×“×•×œ×•×ª ×™×—×¡×™×ª\n  const MAX_LABEL_RADIUS_FOR_STATS = 140; // ×¨×“×™×•×¡ ××§×¡×™××œ×™ ×œ×‘×•×¢×” ×¢× ×¡×˜×˜×™×¡×˜×™×§×”\n  const REFRESH_MS = 60000; // ×¨×¢× ×•×Ÿ × ×ª×•× ×™× ×›×œ 60 ×©× ×™×•×ª - ×¡×˜×˜×™×¡×˜×™×§×•×ª ×œ× ××©×ª× ×•×ª ×‘×ª×“×™×¨×•×ª ×’×‘×•×”×”\n\n  // Order and labels for mapping stats to bubbles - all 40+ stats\n  const statKeys: Array<keyof CommunityStats> = [\n    // Core high-priority stats\n    'moneyDonations', 'volunteerHours', 'rides', 'events', 'activeMembers', 'totalUsers',\n\n    // User engagement\n    'dailyActiveUsers', 'weeklyActiveUsers', 'newUsersThisWeek', 'newUsersThisMonth',\n    'totalOrganizations', 'citiesWithUsers', 'userEngagementRate',\n\n    // Donation metrics\n    'totalDonations', 'donationsThisWeek', 'donationsThisMonth', 'activeDonations',\n    'completedDonations', 'itemDonations', 'serviceDonations', 'totalMoneyDonated',\n    'uniqueDonors', 'avgDonationAmount',\n\n    // Ride metrics\n    'totalRides', 'ridesThisWeek', 'ridesThisMonth', 'activeRides', 'completedRides',\n    'totalSeatsOffered', 'uniqueDrivers', 'avgSeatsPerRide',\n\n    // Event metrics\n    'totalEvents', 'eventsThisWeek', 'eventsThisMonth', 'activeEvents', 'completedEvents',\n    'totalEventAttendees', 'virtualEvents',\n\n    // Activity metrics\n    'totalActivities', 'activitiesToday', 'activitiesThisWeek', 'totalLogins',\n    'donationActivities', 'chatActivities', 'activeUsersTracked',\n\n    // Communication\n    'totalMessages', 'totalConversations', 'messagesThisWeek', 'groupConversations',\n    'directConversations',\n\n    // Legacy extended stats\n    'foodKg', 'clothingKg', 'bloodLiters', 'treesPlanted', 'animalsAdopted', 'recyclingBags',\n    'booksDonated', 'appActiveUsers', 'appDownloads', 'activeVolunteers', 'kmCarpooled',\n    'fundsRaised', 'mealsServed', 'courses', 'culturalEvents'\n  ];\n\n  const STAT_LABELS: Partial<Record<keyof CommunityStats, string>> = {\n    // Core stats\n    moneyDonations: '×›×¡×£ × ×ª×¨×',\n    volunteerHours: '×©×¢×•×ª ×”×ª× ×“×‘×•×ª',\n    rides: '× ×¡×™×¢×•×ª',\n    events: '××™×¨×•×¢×™×',\n    activeMembers: '×—×‘×¨×™× ×¤×¢×™×œ×™×',\n    totalUsers: '×¡×”×´×› ××©×ª××©×™×',\n\n    // User engagement\n    dailyActiveUsers: '×¤×¢×™×œ×™× ×™×•××™',\n    weeklyActiveUsers: '×¤×¢×™×œ×™× ×©×‘×•×¢×™',\n    newUsersThisWeek: '×—×“×©×™× ×”×©×‘×•×¢',\n    newUsersThisMonth: '×—×“×©×™× ×”×—×•×“×©',\n    totalOrganizations: '××¨×’×•× ×™×',\n    citiesWithUsers: '×¢×¨×™×',\n    userEngagementRate: '××—×•×– ××¢×•×¨×‘×•×ª',\n\n    // Donation metrics\n    totalDonations: '×¡×”×´×› ×ª×¨×•××•×ª',\n    donationsThisWeek: '×ª×¨×•××•×ª ×”×©×‘×•×¢',\n    donationsThisMonth: '×ª×¨×•××•×ª ×”×—×•×“×©',\n    activeDonations: '×ª×¨×•××•×ª ×¤×¢×™×œ×•×ª',\n    completedDonations: '×ª×¨×•××•×ª ×”×•×©×œ××•',\n    itemDonations: '×ª×¨×•××•×ª ×¤×¨×™×˜×™×',\n    serviceDonations: '×ª×¨×•××•×ª ×©×™×¨×•×ª×™×',\n    totalMoneyDonated: '×¡×›×•× × ×ª×¨×',\n    uniqueDonors: '×ª×•×¨××™× ×™×™×—×•×“×™×™×',\n    avgDonationAmount: '×××•×¦×¢ ×ª×¨×•××”',\n\n    // Ride metrics\n    totalRides: '×¡×”×´×› × ×¡×™×¢×•×ª',\n    ridesThisWeek: '× ×¡×™×¢×•×ª ×”×©×‘×•×¢',\n    ridesThisMonth: '× ×¡×™×¢×•×ª ×”×—×•×“×©',\n    activeRides: '× ×¡×™×¢×•×ª ×¤×¢×™×œ×•×ª',\n    completedRides: '× ×¡×™×¢×•×ª ×”×•×©×œ××•',\n    totalSeatsOffered: '××§×•××•×ª ×”×•×¦×¢×•',\n    uniqueDrivers: '× ×”×’×™× ×™×™×—×•×“×™×™×',\n    avgSeatsPerRide: '×××•×¦×¢ ××§×•××•×ª',\n\n    // Event metrics\n    totalEvents: '×¡×”×´×› ××™×¨×•×¢×™×',\n    eventsThisWeek: '××™×¨×•×¢×™× ×”×©×‘×•×¢',\n    eventsThisMonth: '××™×¨×•×¢×™× ×”×—×•×“×©',\n    activeEvents: '××™×¨×•×¢×™× ×¤×¢×™×œ×™×',\n    completedEvents: '××™×¨×•×¢×™× ×”×•×©×œ××•',\n    totalEventAttendees: '××©×ª×ª×¤×™×',\n    virtualEvents: '××™×¨×•×¢×™× ×•×™×¨×˜×•××œ×™×™×',\n\n    // Activity metrics\n    totalActivities: '×¡×”×´×› ×¤×¢×™×œ×•×™×•×ª',\n    activitiesToday: '×¤×¢×™×œ×•×™×•×ª ×”×™×•×',\n    activitiesThisWeek: '×¤×¢×™×œ×•×™×•×ª ×”×©×‘×•×¢',\n    totalLogins: '×¡×”×´×› ×›× ×™×¡×•×ª',\n    donationActivities: '×¤×¢×™×œ×•×ª ×ª×¨×•××”',\n    chatActivities: '×¤×¢×™×œ×•×ª ×¦×³××˜',\n    activeUsersTracked: '××©×ª××©×™× ×¤×¢×™×œ×™×',\n\n    // Communication\n    totalMessages: '×¡×”×´×› ×”×•×“×¢×•×ª',\n    totalConversations: '×©×™×—×•×ª',\n    messagesThisWeek: '×”×•×“×¢×•×ª ×”×©×‘×•×¢',\n    groupConversations: '×§×‘×•×¦×•×ª',\n    directConversations: '×©×™×—×•×ª ×¤×¨×˜×™×•×ª',\n\n    // Legacy extended stats\n    foodKg: '×§×´×’ ××–×•×Ÿ',\n    clothingKg: '×§×´×’ ×‘×’×“×™×',\n    bloodLiters: '×œ×™×˜×¨ ×“×',\n    treesPlanted: '×¢×¦×™× × ×™×˜×¢×•',\n    animalsAdopted: '×‘×¢×œ×™ ×—×™×™×',\n    recyclingBags: '×©×§×™×•×ª ××™×—×–×•×¨',\n    booksDonated: '×¡×¤×¨×™×',\n    appActiveUsers: '××©×ª××©×™× ×¤×¢×™×œ×™×',\n    appDownloads: '×”×•×¨×“×•×ª',\n    activeVolunteers: '××ª× ×“×‘×™×',\n    kmCarpooled: '×§×´× × ×¡×™×¢×•×ª',\n    fundsRaised: '×›×¡×¤×™× × ×’×•×™×¡×•',\n    mealsServed: '××¨×•×—×•×ª ×”×•×’×©×•',\n    courses: '×§×•×¨×¡×™×',\n    culturalEvents: '××™×¨×•×¢×™ ×ª×¨×‘×•×ª',\n  };\n\n  const createBubble = useCallback((canvas: HTMLCanvasElement): Bubble => {\n    const depth = Math.random();\n    const baseSize = 25 + Math.random() * 40;\n    const size = baseSize * (0.3 + depth * 1.7); // ×’×“×œ×™× ××ª××™××™× ×œ×¢×•××§\n    const hueBase = Math.random() < 0.3\n      ? 330 + Math.random() * 20 // pinks 330-350\n      : 195 + Math.random() * 45; // light blues 195-240\n\n    return {\n      id: `bubble-${Math.random().toString(36).substr(2, 9)}`,\n      x: Math.random() * (canvas.width + 200) - 100,\n      y: Math.random() * (canvas.height + 200) - 100,\n      originalX: 0,\n      originalY: 0,\n      vx: (Math.random() - 0.5) * 0.08,\n      vy: (Math.random() - 0.5) * 0.08,\n      radius: size,\n      originalRadius: size,\n      targetRadius: size,\n      depth: depth, // 0 = ×¨×—×•×§, 1 = ×§×¨×•×‘\n      speed: 0.006 + Math.random() * 0.012,\n      wobbleSpeed: 0.0008 + Math.random() * 0.0015,\n      wobbleAmount: 1 + Math.random() * 3,\n      wobbleOffset: Math.random() * Math.PI,\n      shimmerSpeed: 0.008 + Math.random() * 0.015,\n      shimmerOffset: Math.random() * Math.PI * 2,\n      opacity: 0.5 + depth * 0.4,\n      hue: hueBase,\n      saturation: 35 + Math.random() * 25,\n      lightness: 58 + Math.random() * 18,\n      life: Math.random() * 1000,\n      floatDirection: Math.random() > 0.5 ? 1 : -1,\n      mouseForceX: 0,\n      mouseForceY: 0,\n      dragForceX: 0,\n      dragForceY: 0,\n      labelNumber: 0,\n      labelText: '',\n      labelValue: ''\n    };\n  }, []);\n\n  const initializeBubbles = useCallback((canvas: HTMLCanvasElement) => {\n    bubblesRef.current = [];\n    for (let i = 0; i < 120; i++) {\n      const bubble = createBubble(canvas);\n      bubble.originalX = bubble.x;\n      bubble.originalY = bubble.y;\n      // ×‘×¨×™×¨×ª ××—×“×œ ×œ×œ× ×ª×•×•×™×•×ª\n      bubble.labelNumber = 0;\n      bubble.labelText = '';\n      bubble.labelValue = '';\n      bubblesRef.current.push(bubble);\n    }\n  }, [createBubble]);\n\n  const assignStatsToBubbles = useCallback(() => {\n    const stats = statsRef.current;\n    if (!stats || bubblesRef.current.length === 0) return;\n    // × ×™×§×•×™ ×ª×•×•×™×•×ª ×§×™×™××•×ª\n    bubblesRef.current.forEach(b => {\n      b.labelText = '';\n      b.labelValue = '';\n      b.labelNumber = 0;\n      b.targetRadius = b.originalRadius; // ×”×—×–×¨×ª ×™×¢×“ ×¨×“×™×•×¡ ×œ×‘×¨×™×¨×ª ××—×“×œ\n    });\n\n    // ×”×¤×§×ª ×¨×©×™××ª ×¡×˜×˜×™×¡×˜×™×§×•×ª ×××•×™× ×•×ª ×œ×¤×™ ×¢×¨×š ×™×•×¨×“\n    const statList = statKeys.map(key => ({ key, value: Number((stats as any)[key] || 0) || 0 }));\n    statList.sort((a, b) => b.value - a.value);\n\n    const candidates = [...bubblesRef.current]\n      .filter(b => b.originalRadius >= MIN_LABEL_RADIUS_FOR_STATS)\n      .sort((a, b) => b.originalRadius - a.originalRadius);\n\n    const count = Math.min(statList.length, candidates.length);\n    const valuesForScale = statList.slice(0, count).map(s => s.value);\n    const maxVal = Math.max(1, ...valuesForScale);\n    const minVal = Math.min(...valuesForScale);\n    const range = Math.max(1, maxVal - minVal);\n\n    for (let i = 0; i < count; i++) {\n      const bubble = candidates[i];\n      const { key, value } = statList[i];\n      const norm = (value - minVal) / range; // 0..1\n      // ×™×¢×“ ×¨×“×™×•×¡ ×œ×¤×™ ×¢×¨×š, ×¢× ××¢×˜ ×”×©×¤×¢×ª ×¢×•××§ ×›×“×™ ×œ×©××•×¨ ×¢×œ ×¤×¨×¡×¤×§×˜×™×‘×”\n      const depthFactor = 0.85 + bubble.depth * 0.35; // 0.85..1.2\n      const target = (MIN_LABEL_RADIUS_FOR_STATS + 12) + norm * (MAX_LABEL_RADIUS_FOR_STATS - (MIN_LABEL_RADIUS_FOR_STATS + 12));\n      bubble.targetRadius = target * depthFactor;\n\n      bubble.labelNumber = value;\n      bubble.labelValue = formatShortNumber(value);\n      bubble.labelText = STAT_LABELS[key] || 'Stat';\n    }\n  }, [statKeys]);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const stats = await EnhancedStatsService.getCommunityStats();\n        if (!mounted) return;\n        statsRef.current = stats;\n        assignStatsToBubbles();\n      } catch (e) {\n        console.error('Failed to load stats for bubbles', e);\n      }\n    })();\n    return () => { mounted = false; };\n  }, [assignStatsToBubbles]);\n\n  // ×¨×¢× ×•×Ÿ × ×ª×•× ×™× ×¨×¦×™×£ (×›××¢×˜ ×‘×–××Ÿ ×××ª)\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const stats = await EnhancedStatsService.getCommunityStats();\n        statsRef.current = stats;\n        assignStatsToBubbles();\n      } catch (e) {\n        console.error('Refresh stats error', e);\n      }\n    }, REFRESH_MS);\n    return () => clearInterval(interval);\n  }, [assignStatsToBubbles]);\n\n  const createRipple = useCallback((x: number, y: number, strength: number = 1) => {\n    rippleRef.current.push({\n      x,\n      y,\n      radius: 0,\n      maxRadius: 75 * strength,\n      strength: strength * 0.28,\n      life: 0\n    });\n  }, []);\n\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    mouseRef.current.x = e.clientX - rect.left;\n    mouseRef.current.y = e.clientY - rect.top;\n  }, []);\n\n  const handleMouseDown = useCallback((e: MouseEvent) => {\n    mouseRef.current.isPressed = true;\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    createRipple(x, y, 1.5);\n  }, [createRipple]);\n\n  const handleMouseUp = useCallback(() => {\n    mouseRef.current.isPressed = false;\n  }, []);\n\n  const handleTouchMove = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const touch = e.touches[0];\n    mouseRef.current.x = touch.clientX - rect.left;\n    mouseRef.current.y = touch.clientY - rect.top;\n  }, []);\n\n  const handleTouchStart = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    mouseRef.current.isPressed = true;\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const touch = e.touches[0];\n    const x = touch.clientX - rect.left;\n    const y = touch.clientY - rect.top;\n    createRipple(x, y, 2);\n  }, [createRipple]);\n\n  const handleTouchEnd = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    mouseRef.current.isPressed = false;\n  }, []);\n\n  const applyMouseForces = useCallback((bubble: Bubble) => {\n    const dx = mouseRef.current.x - bubble.x;\n    const dy = mouseRef.current.y - bubble.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const influence = bubble.depth * 160 + 40; // ×˜×•×•×— ×”×©×¤×¢×” ××¢×˜ ×¨×—×‘ ×™×•×ª×¨ ×œ×ª× ×•×¢×” ×¢×“×™× ×”\n\n    if (distance < influence) {\n      const force = (influence - distance) / influence;\n      const angle = Math.atan2(dy, dx);\n      const repelForce = force * force * 1.2; // ×›×•×— ×“×—×™×™×” ××¢×˜ ×—×–×§ ×™×•×ª×¨\n\n      bubble.mouseForceX += Math.cos(angle + Math.PI) * repelForce;\n      bubble.mouseForceY += Math.sin(angle + Math.PI) * repelForce;\n\n      // ×× ×œ×•×—×¦×™×, ×›×•×— ××¢×˜ ××•×’×‘×¨ ××š ×¢×“×™×™×Ÿ ×¢×“×™×Ÿ\n      if (mouseRef.current.isPressed) {\n        bubble.mouseForceX *= 1.15;\n        bubble.mouseForceY *= 1.15;\n        // ×¨×˜×˜ ×¢×“×™×Ÿ ×××•×“\n        bubble.radius = bubble.originalRadius * (1 + Math.sin(Date.now() * 0.05) * 0.02);\n      }\n    }\n\n    // ×”×—×–×¨×ª ×›×•×—×•×ª ×œ××¤×¡ ×‘×”×“×¨×’×”\n    bubble.mouseForceX *= 0.94;\n    bubble.mouseForceY *= 0.94;\n    bubble.dragForceX *= 0.965;\n    bubble.dragForceY *= 0.965;\n  }, []);\n\n  const drawBubble = useCallback((ctx: CanvasRenderingContext2D, bubble: Bubble, time: number) => {\n    // ×”×ª×××ª ×¨×“×™×•×¡ ×—×œ×§×” ×œ×™×¢×“ ×œ×¤×™ ×¡×˜×˜×™×¡×˜×™×§×”\n    const lerp = (a: number, b: number, t: number) => a + (b - a) * t;\n    bubble.radius = lerp(bubble.radius, bubble.targetRadius, 0.04);\n    const wobbleX = Math.sin(time * bubble.wobbleSpeed + bubble.wobbleOffset) * bubble.wobbleAmount;\n    const wobbleY = Math.cos(time * bubble.wobbleSpeed * 0.7 + bubble.wobbleOffset) * bubble.wobbleAmount * 0.5;\n\n    const x = bubble.x + wobbleX + bubble.mouseForceX + bubble.dragForceX;\n    const y = bubble.y + wobbleY + bubble.mouseForceY + bubble.dragForceY;\n\n    ctx.save();\n\n    // ×©×§×™×¤×•×ª ×œ×¤×™ ×¢×•××§\n    const alpha = bubble.opacity * (0.6 + bubble.depth * 0.4);\n\n    // ×¦×‘×¢×™× ×“×™× ××™×™×\n    const shimmer = Math.sin(time * bubble.shimmerSpeed + bubble.shimmerOffset) * 0.2 + 0.65;\n    const hue = bubble.hue + Math.sin(time * 0.001 + bubble.shimmerOffset) * 10;\n\n    // ×’×¨×“×™×× ×˜ ××•×¨×›×‘ ×¢×‘×•×¨ ×”×‘×•×¢×”\n    const mainGradient = ctx.createRadialGradient(\n      x - bubble.radius * 0.3,\n      y - bubble.radius * 0.4,\n      0,\n      x,\n      y,\n      bubble.radius\n    );\n\n    mainGradient.addColorStop(0, `hsla(${hue}, ${bubble.saturation + 10}%, ${bubble.lightness + 22}%, ${alpha * shimmer})`);\n    mainGradient.addColorStop(0.25, `hsla(${hue}, ${bubble.saturation}%, ${bubble.lightness + 8}%, ${alpha * 0.85})`);\n    mainGradient.addColorStop(0.65, `hsla(${hue - 8}, ${bubble.saturation + 8}%, ${bubble.lightness}%, ${alpha * 0.6})`);\n    mainGradient.addColorStop(0.92, `hsla(${hue - 16}, ${bubble.saturation + 12}%, ${bubble.lightness - 16}%, ${alpha * 0.38})`);\n    mainGradient.addColorStop(1, `hsla(${hue - 24}, ${bubble.saturation + 16}%, ${bubble.lightness - 28}%, ${alpha * 0.25})`);\n\n    // ×¦×™×•×¨ ×”×‘×•×¢×” ×”×¨××©×™×ª\n    ctx.beginPath();\n    ctx.arc(x, y, bubble.radius, 0, Math.PI * 2);\n    ctx.fillStyle = mainGradient;\n    ctx.fill();\n\n    // ×”×‘×¨×§×” ×¢×œ×™×•× ×”\n    const highlightGradient = ctx.createRadialGradient(\n      x - bubble.radius * 0.35,\n      y - bubble.radius * 0.45,\n      0,\n      x - bubble.radius * 0.35,\n      y - bubble.radius * 0.45,\n      bubble.radius * 0.7\n    );\n\n    const highlightAlpha = alpha * shimmer * 0.5;\n    highlightGradient.addColorStop(0, `rgba(255, 255, 255, ${highlightAlpha})`);\n    highlightGradient.addColorStop(0.3, `rgba(255, 255, 255, ${highlightAlpha * 0.6})`);\n    highlightGradient.addColorStop(0.7, `rgba(200, 230, 255, ${highlightAlpha * 0.3})`);\n    highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n    ctx.beginPath();\n    ctx.arc(x - bubble.radius * 0.25, y - bubble.radius * 0.35, bubble.radius * 0.45, 0, Math.PI * 2);\n    ctx.fillStyle = highlightGradient;\n    ctx.fill();\n\n    // ×§×• ×”×™×§×¤×™ ×“×§\n    ctx.beginPath();\n    ctx.arc(x, y, bubble.radius, 0, Math.PI * 2);\n    ctx.strokeStyle = `hsla(${hue + 30}, 70%, 80%, ${alpha * 0.4})`;\n    ctx.lineWidth = 0.5;\n    ctx.stroke();\n\n    // × ×§×•×“×ª ×”×‘×¨×§×” ×§×˜× ×”\n    ctx.beginPath();\n    ctx.arc(x - bubble.radius * 0.4, y - bubble.radius * 0.5, bubble.radius * 0.12, 0, Math.PI * 2);\n    ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.4})`;\n    ctx.fill();\n\n    // ×¨×¤×œ×§×¦×™×” ×ª×—×ª×•× ×” ×¢×“×™× ×”\n    const bottomReflectionGradient = ctx.createRadialGradient(\n      x,\n      y + bubble.radius * 0.6,\n      0,\n      x,\n      y + bubble.radius * 0.6,\n      bubble.radius * 0.4\n    );\n\n    bottomReflectionGradient.addColorStop(0, `rgba(255, 255, 255, ${alpha * 0.12})`);\n    bottomReflectionGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n    ctx.beginPath();\n    ctx.arc(x, y + bubble.radius * 0.7, bubble.radius * 0.25, 0, Math.PI * 2);\n    ctx.fillStyle = bottomReflectionGradient;\n    ctx.fill();\n\n    // labels: number and short text by size (×™×•×ª×¨ \"×‘×•×¢×ª×™\")\n    const numberFontSize = Math.max(12, bubble.radius * 0.54);\n    const textFontSize = Math.max(10, bubble.radius * 0.25);\n    const outlineWidth = Math.min(3.5, Math.max(1.2, numberFontSize * 0.16));\n\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    // number - ××¦×™×’×™× ×¨×§ ×× ×§×™×™××ª ×¡×˜×˜×™×¡×˜×™×§×”\n    if (bubble.labelValue) {\n      ctx.font = `800 ${numberFontSize}px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif`;\n      ctx.lineWidth = outlineWidth;\n      ctx.strokeStyle = 'rgba(10, 22, 48, 0.7)';\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.98)';\n      const numberY = y - bubble.radius * 0.12;\n      // stroke without shadow\n      ctx.shadowColor = 'transparent';\n      ctx.strokeText(bubble.labelValue, x, numberY);\n      // fill with soft shadow to look bubbly\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.22)';\n      ctx.shadowBlur = Math.max(1, bubble.radius * 0.08);\n      ctx.shadowOffsetX = 0;\n      ctx.shadowOffsetY = 0;\n      ctx.fillText(bubble.labelValue, x, numberY);\n      // reset shadow for next ops\n      ctx.shadowColor = 'transparent';\n    }\n\n    // short text under the number - ××¦×™×’×™× ×¨×§ ×× ×™×© ×ª×•×•×™×ª\n    if (bubble.labelText) {\n      ctx.font = `700 ${textFontSize}px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif`;\n      ctx.lineWidth = Math.max(1, outlineWidth * 0.85);\n      ctx.strokeStyle = 'rgba(10, 22, 48, 0.55)';\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.92)';\n      const textY = y + bubble.radius * 0.28;\n      // stroke without shadow\n      ctx.shadowColor = 'transparent';\n      ctx.strokeText(bubble.labelText, x, textY);\n      // fill with soft shadow\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.18)';\n      ctx.shadowBlur = Math.max(1, bubble.radius * 0.06);\n      ctx.shadowOffsetX = 0;\n      ctx.shadowOffsetY = 0;\n      ctx.fillText(bubble.labelText, x, textY);\n      ctx.shadowColor = 'transparent';\n    }\n\n    ctx.restore();\n  }, []);\n\n  const drawRipples = useCallback((ctx: CanvasRenderingContext2D) => {\n    rippleRef.current.forEach((ripple, index) => {\n      ripple.life += 0.02;\n      ripple.radius = ripple.life * ripple.maxRadius;\n\n      if (ripple.life >= 1) {\n        rippleRef.current.splice(index, 1);\n        return;\n      }\n\n      const alpha = (1 - ripple.life) * ripple.strength * 0.3;\n\n      ctx.beginPath();\n      ctx.arc(ripple.x, ripple.y, ripple.radius, 0, Math.PI * 2);\n      ctx.strokeStyle = `rgba(200, 230, 255, ${alpha})`;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n\n      // ×’×œ×™× × ×•×¡×¤×™×\n      if (ripple.life > 0.3) {\n        ctx.beginPath();\n        ctx.arc(ripple.x, ripple.y, ripple.radius * 0.7, 0, Math.PI * 2);\n        ctx.strokeStyle = `rgba(150, 200, 255, ${alpha * 0.5})`;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      }\n    });\n  }, []);\n\n  const animate = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    const time = Date.now();\n\n    // ×¨×§×¢ ××“×¨×’×™ ×‘×”×™×¨\n    const backgroundGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    backgroundGradient.addColorStop(0, colors.blueLight);\n    backgroundGradient.addColorStop(0.35, colors.blueLight);\n    backgroundGradient.addColorStop(0.7, colors.pinkLight);\n    backgroundGradient.addColorStop(1, colors.backgroundTertiary);\n\n    ctx.fillStyle = backgroundGradient;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // ××™×•×Ÿ ×‘×•×¢×•×ª ×œ×¤×™ ×¢×•××§ ×œ×¦×™×•×¨ × ×›×•×Ÿ\n    const sortedBubbles = [...bubblesRef.current].sort((a, b) => a.depth - b.depth);\n\n    // ×¢×“×›×•×Ÿ ×•×¨×™×©×•× ×‘×•×¢×•×ª\n    sortedBubbles.forEach((bubble) => {\n      // ×ª× ×•×¢×” ×˜×‘×¢×™×ª ××™×˜×™×ª ×™×•×ª×¨\n      bubble.life += 0.006;\n      bubble.x += bubble.vx + Math.sin(bubble.life * bubble.speed) * 0.06;\n      bubble.y += bubble.vy + Math.cos(bubble.life * bubble.speed * 0.7) * 0.045;\n\n      // ×›×•×—×•×ª ×¢×›×‘×” ×‘××™× ××¢×˜ ×—×–×§×™× ×™×•×ª×¨\n      bubble.vx *= 0.998;\n      bubble.vy *= 0.998;\n\n      // ×›×•×—×•×ª ×¢×œ×™×” ×¢×“×™× ×™× ×™×•×ª×¨\n      bubble.vy -= 0.0008 * bubble.depth; // ×‘×•×¢×•×ª ×§×¨×•×‘×•×ª ×¢×•×œ×•×ª ××¢×˜ ×™×•×ª×¨\n\n      // ×”×©×¤×¢×ª ×¢×›×‘×¨/××’×¢\n      applyMouseForces(bubble);\n\n      // ×”×©×¤×¢×ª ×’×œ×™ ×”×“×£\n      rippleRef.current.forEach(ripple => {\n        const dx = bubble.x - ripple.x;\n        const dy = bubble.y - ripple.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance < ripple.radius && ripple.life < 0.8) {\n          const force = (ripple.radius - distance) / ripple.radius * ripple.strength * 0.5;\n          const angle = Math.atan2(dy, dx);\n          bubble.dragForceX += Math.cos(angle) * force * bubble.depth;\n          bubble.dragForceY += Math.sin(angle) * force * bubble.depth;\n        }\n      });\n\n      // ×’×‘×•×œ×•×ª ×”××¡×š ×¢× ××¢×’×œ×•×ª, ××©××™×¨×™× ××¨×•×•×— ×‘×ª×—×ª×™×ª ×œ××–×•×¨ ×”×›×¤×ª×•×¨\n      const bottomLimit = canvas.height - bubble.radius * 0.6;\n      if (bubble.x < -bubble.radius) bubble.x = canvas.width + bubble.radius;\n      if (bubble.x > canvas.width + bubble.radius) bubble.x = -bubble.radius;\n      if (bubble.y < -bubble.radius) bubble.y = bottomLimit;\n      if (bubble.y > bottomLimit) bubble.y = -bubble.radius;\n\n      // ×¦×™×•×¨ ×”×‘×•×¢×”\n      drawBubble(ctx, bubble, time);\n    });\n\n    // ×¦×™×•×¨ ×’×œ×™ ×”×“×£\n    drawRipples(ctx);\n\n    // ×—×œ×§×™×§×™× ×§×˜× ×™× × ×•×¡×¤×™× ×‘××•×•×™×¨×”\n    for (let i = 0; i < 30; i++) {\n      const particleX = (time * 0.01 + i * 50) % (canvas.width + 100) - 50;\n      const particleY = (time * 0.005 + i * 80) % (canvas.height + 100) - 50;\n      const particleSize = Math.sin(time * 0.003 + i) * 1 + 2;\n      const particleAlpha = (Math.sin(time * 0.002 + i) + 1) * 0.1;\n\n      ctx.beginPath();\n      ctx.arc(particleX, particleY, particleSize, 0, Math.PI * 2);\n      ctx.fillStyle = `rgba(180, 210, 240, ${particleAlpha})`;\n      ctx.fill();\n    }\n\n    animationRef.current = requestAnimationFrame(animate);\n  }, [applyMouseForces, drawBubble, drawRipples]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const resizeCanvas = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = Math.max(0, window.innerHeight - BOTTOM_SAFE_ZONE_PX);\n      setDimensions({ width: canvas.width, height: canvas.height });\n      initializeBubbles(canvas);\n      assignStatsToBubbles();\n    };\n\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×\n    canvas.addEventListener('mousemove', handleMouseMove);\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('mouseup', handleMouseUp);\n    canvas.addEventListener('touchmove', handleTouchMove, { passive: false });\n    canvas.addEventListener('touchstart', handleTouchStart, { passive: false });\n    canvas.addEventListener('touchend', handleTouchEnd, { passive: false });\n\n    animate();\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n      canvas.removeEventListener('mousemove', handleMouseMove);\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('mouseup', handleMouseUp);\n      canvas.removeEventListener('touchmove', handleTouchMove);\n      canvas.removeEventListener('touchstart', handleTouchStart);\n      canvas.removeEventListener('touchend', handleTouchEnd);\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [animate, initializeBubbles, handleMouseMove, handleMouseDown, handleMouseUp,\n    handleTouchMove, handleTouchStart, handleTouchEnd]);\n\n  return (\n    <div\n      className=\"w-full relative overflow-hidden\"\n      style={{ height: `calc(100vh - ${BOTTOM_SAFE_ZONE_PX}px)` }}\n    >\n      <canvas\n        ref={canvasRef}\n        className=\"absolute inset-0 touch-none\"\n        style={{\n          background: `linear-gradient(180deg, ${colors.blueLight} 0%, ${colors.blueLight} 35%, ${colors.pinkLight} 70%, ${colors.backgroundTertiary} 100%)`\n        }}\n      />\n\n    </div>\n  );\n};\n\nexport default FloatingBubbles;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesSkia.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/GuestModeNotice.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/HeaderComp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ItemDetailsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LanguageSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LocationSearchComp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:43:21\n  41 |\n  42 |   // Animation values\n> 43 |   const slideAnim = useRef(new Animated.Value(0)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  44 |   const overlayAnim = useRef(new Animated.Value(0)).current;\n  45 |\n  46 |   // Login state","line":43,"column":21,"nodeType":null,"endLine":43,"endColumn":58},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:44:23\n  42 |   // Animation values\n  43 |   const slideAnim = useRef(new Animated.Value(0)).current;\n> 44 |   const overlayAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  45 |\n  46 |   // Login state\n  47 |   const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');","line":44,"column":23,"nodeType":null,"endLine":44,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:44:23\n  42 |   // Animation values\n  43 |   const slideAnim = useRef(new Animated.Value(0)).current;\n> 44 |   const overlayAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  45 |\n  46 |   // Login state\n  47 |   const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');","line":44,"column":23,"nodeType":null,"endLine":44,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:44:23\n  42 |   // Animation values\n  43 |   const slideAnim = useRef(new Animated.Value(0)).current;\n> 44 |   const overlayAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  45 |\n  46 |   // Login state\n  47 |   const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');","line":44,"column":23,"nodeType":null,"endLine":44,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:44:23\n  42 |   // Animation values\n  43 |   const slideAnim = useRef(new Animated.Value(0)).current;\n> 44 |   const overlayAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  45 |\n  46 |   // Login state\n  47 |   const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');","line":44,"column":23,"nodeType":null,"endLine":44,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:97:6\n   95 |       ]).start();\n   96 |     }\n>  97 |   }, [visible, slideAnim, overlayAnim]);\n      |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n   98 |\n   99 |   // Login handlers (simplified versions from LoginScreen)\n  100 |   const handleLoginWithCharacter = async (characterType: 'seeker' | 'offerer') => {","line":97,"column":6,"nodeType":null,"endLine":97,"endColumn":39},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:179:21\n  177 |     transform: [\n  178 |       {\n> 179 |         translateX: slideAnim.interpolate({\n      |                     ^^^^^^^^^ Passing a ref to a function may read its value during render\n  180 |           inputRange: [0, 1],\n  181 |           outputRange: [panelWidth, 0],\n  182 |         }),","line":179,"column":21,"nodeType":null,"endLine":179,"endColumn":30},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:179:21\n  177 |     transform: [\n  178 |       {\n> 179 |         translateX: slideAnim.interpolate({\n      |                     ^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  180 |           inputRange: [0, 1],\n  181 |           outputRange: [panelWidth, 0],\n  182 |         }),","line":179,"column":21,"nodeType":null,"endLine":179,"endColumn":42},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:264:37\n  262 |\n  263 |             {orgLoginOpen && (\n> 264 |               <Animated.View style={[\n      |                                     ^\n> 265 |                 styles.loginForm,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 266 |                 {\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 274 |                 }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 275 |               ]}>\n      | ^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  276 |                 <TextInput\n  277 |                   style={styles.input}\n  278 |                   placeholder=\"×©× ×”××¨×’×•×Ÿ\"","line":264,"column":37,"nodeType":null,"endLine":275,"endColumn":16},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:266:17\n  264 |               <Animated.View style={[\n  265 |                 styles.loginForm,\n> 266 |                 {\n      |                 ^\n> 267 |                   opacity: orgOpenAnim,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 268 |                   transform: [{\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 269 |                     scaleY: orgOpenAnim.interpolate({\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 270 |                       inputRange: [0, 1],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 271 |                       outputRange: [0, 1],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 272 |                     }),\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 273 |                   }],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 274 |                 }\n      | ^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  275 |               ]}>\n  276 |                 <TextInput\n  277 |                   style={styles.input}","line":266,"column":17,"nodeType":null,"endLine":274,"endColumn":18},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:267:28\n  265 |                 styles.loginForm,\n  266 |                 {\n> 267 |                   opacity: orgOpenAnim,\n      |                            ^^^^^^^^^^^ Cannot access ref value during render\n  268 |                   transform: [{\n  269 |                     scaleY: orgOpenAnim.interpolate({\n  270 |                       inputRange: [0, 1],","line":267,"column":28,"nodeType":null,"endLine":267,"endColumn":39},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:269:29\n  267 |                   opacity: orgOpenAnim,\n  268 |                   transform: [{\n> 269 |                     scaleY: orgOpenAnim.interpolate({\n      |                             ^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  270 |                       inputRange: [0, 1],\n  271 |                       outputRange: [0, 1],\n  272 |                     }),","line":269,"column":29,"nodeType":null,"endLine":269,"endColumn":40},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:269:29\n  267 |                   opacity: orgOpenAnim,\n  268 |                   transform: [{\n> 269 |                     scaleY: orgOpenAnim.interpolate({\n      |                             ^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  270 |                       inputRange: [0, 1],\n  271 |                       outputRange: [0, 1],\n  272 |                     }),","line":269,"column":29,"nodeType":null,"endLine":269,"endColumn":52},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:312:37\n  310 |\n  311 |             {emailLoginOpen && (\n> 312 |               <Animated.View style={[\n      |                                     ^\n> 313 |                 styles.loginForm,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 314 |                 {\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 322 |                 }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 323 |               ]}>\n      | ^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  324 |                 <TextInput\n  325 |                   style={styles.input}\n  326 |                   placeholder=\"×›×ª×•×‘×ª ××™××™×™×œ\"","line":312,"column":37,"nodeType":null,"endLine":323,"endColumn":16},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:314:17\n  312 |               <Animated.View style={[\n  313 |                 styles.loginForm,\n> 314 |                 {\n      |                 ^\n> 315 |                   opacity: emailOpenAnim,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 316 |                   transform: [{\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 317 |                     scaleY: emailOpenAnim.interpolate({\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 318 |                       inputRange: [0, 1],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 319 |                       outputRange: [0, 1],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 320 |                     }),\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 321 |                   }],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 322 |                 }\n      | ^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  323 |               ]}>\n  324 |                 <TextInput\n  325 |                   style={styles.input}","line":314,"column":17,"nodeType":null,"endLine":322,"endColumn":18},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:315:28\n  313 |                 styles.loginForm,\n  314 |                 {\n> 315 |                   opacity: emailOpenAnim,\n      |                            ^^^^^^^^^^^^^ Cannot access ref value during render\n  316 |                   transform: [{\n  317 |                     scaleY: emailOpenAnim.interpolate({\n  318 |                       inputRange: [0, 1],","line":315,"column":28,"nodeType":null,"endLine":315,"endColumn":41},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:317:29\n  315 |                   opacity: emailOpenAnim,\n  316 |                   transform: [{\n> 317 |                     scaleY: emailOpenAnim.interpolate({\n      |                             ^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  318 |                       inputRange: [0, 1],\n  319 |                       outputRange: [0, 1],\n  320 |                     }),","line":317,"column":29,"nodeType":null,"endLine":317,"endColumn":42},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx:317:29\n  315 |                   opacity: emailOpenAnim,\n  316 |                   transform: [{\n> 317 |                     scaleY: emailOpenAnim.interpolate({\n      |                             ^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  318 |                       inputRange: [0, 1],\n  319 |                       outputRange: [0, 1],\n  320 |                     }),","line":317,"column":29,"nodeType":null,"endLine":317,"endColumn":54}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LoginSidePanel.tsx\n// A side panel component that displays the login interface for large screens (desktop/tablet)\n// This component reuses the login logic from LoginScreen but renders it as a side panel\n// instead of a full screen navigation\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Dimensions,\n  Platform,\n  ScrollView,\n  TextInput,\n  Alert,\n  ActivityIndicator,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { scaleSize } from '../globals/responsive';\nimport { getLoginSidePanelWidth } from '../globals/responsive';\n\ninterface LoginSidePanelProps {\n  visible: boolean;\n  onClose: () => void;\n  onLoginSuccess?: () => void;\n}\n\nconst LoginSidePanel: React.FC<LoginSidePanelProps> = ({\n  visible,\n  onClose,\n  onLoginSuccess\n}) => {\n  const { t } = useTranslation(['common']);\n  const { setSelectedUserWithMode, setGuestMode, selectedUser, isGuestMode } = useUser();\n\n  // Animation values\n  const slideAnim = useRef(new Animated.Value(0)).current;\n  const overlayAnim = useRef(new Animated.Value(0)).current;\n\n  // Login state\n  const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');\n  const [emailValue, setEmailValue] = useState('');\n  const [passwordValue, setPasswordValue] = useState('');\n  const [isEmailBusy, setIsEmailBusy] = useState(false);\n  const [emailExists, setEmailExists] = useState<boolean | null>(null);\n  const [emailStatusMessage, setEmailStatusMessage] = useState<string | null>(null);\n  const [emailSuggestions, setEmailSuggestions] = useState<string[]>([]);\n\n  // Organization login state\n  const [orgLoginOpen, setOrgLoginOpen] = useState(false);\n  const [orgQuery, setOrgQuery] = useState('');\n  const [isCheckingOrg, setIsCheckingOrg] = useState(false);\n  const orgOpenAnim = useRef(new Animated.Value(0)).current;\n\n  // Email login state\n  const [emailLoginOpen, setEmailLoginOpen] = useState(false);\n  const emailOpenAnim = useRef(new Animated.Value(0)).current;\n\n  // Screen dimensions\n  const panelWidth = getLoginSidePanelWidth();\n\n  // Animation effects\n  useEffect(() => {\n    if (visible) {\n      Animated.parallel([\n        Animated.timing(slideAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n        Animated.timing(overlayAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(slideAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: false,\n        }),\n        Animated.timing(overlayAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    }\n  }, [visible, slideAnim, overlayAnim]);\n\n  // Login handlers (simplified versions from LoginScreen)\n  const handleLoginWithCharacter = async (characterType: 'seeker' | 'offerer') => {\n    try {\n      const userData = {\n        id: `guest_${Date.now()}`,\n        name: characterType === 'seeker' ? '××—×¤×©' : '××¦×™×¢',\n        email: `guest_${characterType}@example.com`,\n        characterType,\n        isGuest: true,\n        profileImage: null,\n      };\n\n      await setSelectedUserWithMode(userData as any, 'real');\n      onLoginSuccess?.();\n    } catch (error) {\n      console.error('Login error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××”×œ×š ×”×›× ×™×¡×”');\n    }\n  };\n\n  const handleGuestMode = async () => {\n    try {\n      await setGuestMode();\n      onLoginSuccess?.();\n    } catch (error) {\n      console.error('Guest mode error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××”×œ×š ×”×›× ×™×¡×”');\n    }\n  };\n\n  const resetEmailState = () => {\n    setEmailStep('email');\n    setPasswordValue('');\n    setIsEmailBusy(false);\n    setEmailExists(null);\n    setEmailStatusMessage(null);\n    setEmailSuggestions([]);\n  };\n\n  const resetOrgState = () => {\n    setOrgQuery('');\n    setIsCheckingOrg(false);\n  };\n\n  const toggleOrgLogin = () => {\n    const next = !orgLoginOpen;\n    if (next && emailLoginOpen) {\n      setEmailLoginOpen(false);\n      Animated.timing(emailOpenAnim, { toValue: 0, duration: 200, useNativeDriver: false }).start();\n      resetEmailState();\n    }\n    setOrgLoginOpen(next);\n    if (!next) resetOrgState();\n    Animated.timing(orgOpenAnim, {\n      toValue: next ? 1 : 0,\n      duration: 260,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const toggleEmailLogin = () => {\n    const next = !emailLoginOpen;\n    if (next && orgLoginOpen) {\n      setOrgLoginOpen(false);\n      Animated.timing(orgOpenAnim, { toValue: 0, duration: 200, useNativeDriver: false }).start();\n      resetOrgState();\n    }\n    setEmailLoginOpen(next);\n    if (!next) resetEmailState();\n    Animated.timing(emailOpenAnim, {\n      toValue: next ? 1 : 0,\n      duration: 260,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  // Animation styles\n  const panelAnimatedStyle = {\n    transform: [\n      {\n        translateX: slideAnim.interpolate({\n          inputRange: [0, 1],\n          outputRange: [panelWidth, 0],\n        }),\n      },\n    ],\n  };\n\n  const overlayAnimatedStyle = {\n    opacity: overlayAnim,\n  };\n\n  if (!visible) return null;\n\n  return (\n    <>\n      {/* Overlay */}\n      <Animated.View style={[styles.overlay, overlayAnimatedStyle]}>\n        <TouchableOpacity\n          style={styles.overlayTouchable}\n          activeOpacity={1}\n          onPress={onClose}\n        />\n      </Animated.View>\n\n      {/* Side Panel */}\n      <Animated.View style={[\n        styles.panel,\n        { width: panelWidth },\n        panelAnimatedStyle\n      ]}>\n        {/* Header */}\n        <View style={styles.header}>\n          <Text style={styles.title}>×›× ×™×¡×” ×œ××¤×œ×™×§×¦×™×”</Text>\n          <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n            <Ionicons name=\"close\" size={24} color={colors.textSecondary} />\n          </TouchableOpacity>\n        </View>\n\n        {/* Content */}\n        <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n          {/* Character Selection */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>×‘×—×¨ ×ª×¤×§×™×“</Text>\n            <View style={styles.characterButtons}>\n              <TouchableOpacity\n                style={[styles.characterButton, styles.seekerButton]}\n                onPress={() => handleLoginWithCharacter('seeker')}\n              >\n                <Text style={styles.characterButtonText}>××—×¤×©</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.characterButton, styles.offererButton]}\n                onPress={() => handleLoginWithCharacter('offerer')}\n              >\n                <Text style={styles.characterButtonText}>××¦×™×¢</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* Guest Mode */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.guestButton}\n              onPress={handleGuestMode}\n            >\n              <Text style={styles.guestButtonText}>×”××©×š ×›××•×¨×—</Text>\n            </TouchableOpacity>\n          </View>\n\n          {/* Organization Login */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.loginOptionButton}\n              onPress={toggleOrgLogin}\n            >\n              <Text style={styles.loginOptionText}>×›× ×™×¡×” ×“×¨×š ××¨×’×•×Ÿ</Text>\n              <Ionicons\n                name={orgLoginOpen ? \"chevron-up\" : \"chevron-down\"}\n                size={20}\n                color={colors.textSecondary}\n              />\n            </TouchableOpacity>\n\n            {orgLoginOpen && (\n              <Animated.View style={[\n                styles.loginForm,\n                {\n                  opacity: orgOpenAnim,\n                  transform: [{\n                    scaleY: orgOpenAnim.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [0, 1],\n                    }),\n                  }],\n                }\n              ]}>\n                <TextInput\n                  style={styles.input}\n                  placeholder=\"×©× ×”××¨×’×•×Ÿ\"\n                  value={orgQuery}\n                  onChangeText={setOrgQuery}\n                  placeholderTextColor={colors.textSecondary}\n                />\n                <TouchableOpacity\n                  style={[styles.submitButton, isCheckingOrg && styles.submitButtonDisabled]}\n                  disabled={isCheckingOrg}\n                >\n                  {isCheckingOrg ? (\n                    <ActivityIndicator size=\"small\" color={colors.textPrimary} />\n                  ) : (\n                    <Text style={styles.submitButtonText}>×—×¤×© ××¨×’×•×Ÿ</Text>\n                  )}\n                </TouchableOpacity>\n              </Animated.View>\n            )}\n          </View>\n\n          {/* Email Login */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.loginOptionButton}\n              onPress={toggleEmailLogin}\n            >\n              <Text style={styles.loginOptionText}>×›× ×™×¡×” ×¢× ××™××™×™×œ</Text>\n              <Ionicons\n                name={emailLoginOpen ? \"chevron-up\" : \"chevron-down\"}\n                size={20}\n                color={colors.textSecondary}\n              />\n            </TouchableOpacity>\n\n            {emailLoginOpen && (\n              <Animated.View style={[\n                styles.loginForm,\n                {\n                  opacity: emailOpenAnim,\n                  transform: [{\n                    scaleY: emailOpenAnim.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [0, 1],\n                    }),\n                  }],\n                }\n              ]}>\n                <TextInput\n                  style={styles.input}\n                  placeholder=\"×›×ª×•×‘×ª ××™××™×™×œ\"\n                  value={emailValue}\n                  onChangeText={setEmailValue}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                  placeholderTextColor={colors.textSecondary}\n                />\n                {emailStep === 'password' && (\n                  <TextInput\n                    style={[styles.input, styles.passwordInput]}\n                    placeholder=\"×¡×™×¡××”\"\n                    value={passwordValue}\n                    onChangeText={setPasswordValue}\n                    secureTextEntry\n                    placeholderTextColor={colors.textSecondary}\n                  />\n                )}\n                <TouchableOpacity\n                  style={[styles.submitButton, isEmailBusy && styles.submitButtonDisabled]}\n                  disabled={isEmailBusy}\n                >\n                  {isEmailBusy ? (\n                    <ActivityIndicator size=\"small\" color={colors.textPrimary} />\n                  ) : (\n                    <Text style={styles.submitButtonText}>\n                      {emailStep === 'email' ? '×”××©×š' : '×”×ª×—×‘×¨'}\n                    </Text>\n                  )}\n                </TouchableOpacity>\n              </Animated.View>\n            )}\n          </View>\n        </ScrollView>\n      </Animated.View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 1000,\n  },\n  overlayTouchable: {\n    flex: 1,\n  },\n  panel: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.background,\n    zIndex: 1001,\n    shadowColor: colors.black,\n    shadowOffset: {\n      width: -2,\n      height: 0,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    elevation: 10,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  title: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  section: {\n    marginVertical: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n    textAlign: 'right',\n  },\n  characterButtons: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  characterButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  seekerButton: {\n    backgroundColor: colors.info,\n  },\n  offererButton: {\n    backgroundColor: colors.success,\n  },\n  characterButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  guestButton: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  guestButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '500',\n    color: colors.textSecondary,\n  },\n  loginOptionButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  loginOptionText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '500',\n    color: colors.textPrimary,\n  },\n  loginForm: {\n    marginTop: 12,\n    gap: 12,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  passwordInput: {\n    marginTop: 8,\n  },\n  submitButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  submitButtonDisabled: {\n    opacity: 0.6,\n  },\n  submitButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n});\n\nexport default LoginSidePanel;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:27:21\n  25 |\n  26 |   // Animated values for scale and opacity\n> 27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n  29 |\n  30 |   // Get responsive menu styles","line":27,"column":21,"nodeType":null,"endLine":27,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:27:21\n  25 |\n  26 |   // Animated values for scale and opacity\n> 27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n  29 |\n  30 |   // Get responsive menu styles","line":27,"column":21,"nodeType":null,"endLine":27,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:27:21\n  25 |\n  26 |   // Animated values for scale and opacity\n> 27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n  29 |\n  30 |   // Get responsive menu styles","line":27,"column":21,"nodeType":null,"endLine":27,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:27:21\n  25 |\n  26 |   // Animated values for scale and opacity\n> 27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n  29 |\n  30 |   // Get responsive menu styles","line":27,"column":21,"nodeType":null,"endLine":27,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:28:23\n  26 |   // Animated values for scale and opacity\n  27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n> 28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  29 |\n  30 |   // Get responsive menu styles\n  31 |   const menuStyles = getResponsiveMenuStyles();","line":28,"column":23,"nodeType":null,"endLine":28,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:28:23\n  26 |   // Animated values for scale and opacity\n  27 |   const scaleAnim = useRef(new Animated.Value(0.01)).current;\n> 28 |   const opacityAnim = useRef(new Animated.Value(0)).current;\n     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  29 |\n  30 |   // Get responsive menu styles\n  31 |   const menuStyles = getResponsiveMenuStyles();","line":28,"column":23,"nodeType":null,"endLine":28,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:67:6\n  65 |       ]).start();\n  66 |     }\n> 67 |   }, [isVisible, scaleAnim, opacityAnim]);\n     |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  68 |\n  69 |   return (\n  70 |     <>","line":67,"column":6,"nodeType":null,"endLine":67,"endColumn":41},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:93:22\n   91 |           >\n   92 |             <Animated.View\n>  93 |               style={[\n      |                      ^\n>  94 |                 localStyles.modalContent,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  95 |                 {\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 107 |                 },\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 108 |               ]}\n      | ^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  109 |             >\n  110 |               <ScrollView showsVerticalScrollIndicator={false}>\n  111 |                 {options.map((option, index) => (","line":93,"column":22,"nodeType":null,"endLine":108,"endColumn":16},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx:95:17\n   93 |               style={[\n   94 |                 localStyles.modalContent,\n>  95 |                 {\n      |                 ^\n>  96 |                   opacity: opacityAnim,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  97 |                   transform: [{ scale: scaleAnim }],\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 106 |                   borderRadius: menuStyles.borderRadius,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 107 |                 },\n      | ^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  108 |               ]}\n  109 |             >\n  110 |               <ScrollView showsVerticalScrollIndicator={false}>","line":95,"column":17,"nodeType":null,"endLine":107,"endColumn":18}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect } from \"react\";\nimport {\n  Modal,\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Animated,\n  ScrollView,\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../globals/colors\";\nimport { FontSizes } from \"../globals/constants\";\nimport { getResponsiveMenuStyles, responsiveFontSize, responsiveSpacing, scaleSize } from \"../globals/responsive\";\nimport { createShadowStyle } from \"../globals/styles\";\n\n// Define the props that the MenuComp component will accept\ninterface MenuCompProps {\n  options: string[]; // Array of strings for the menu items\n  onSelectOption: (option: string) => void; // Function to call when an option is selected\n}\n\nconst MenuComp: React.FC<MenuCompProps> = ({ options, onSelectOption }) => {\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n\n  // Animated values for scale and opacity\n  const scaleAnim = useRef(new Animated.Value(0.01)).current;\n  const opacityAnim = useRef(new Animated.Value(0)).current;\n\n  // Get responsive menu styles\n  const menuStyles = getResponsiveMenuStyles();\n\n  const openMenu = () => {\n    setIsVisible(true);\n  };\n\n  const closeMenu = () => setIsVisible(false);\n\n  useEffect(() => {\n    if (isVisible) {\n      Animated.parallel([\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 8,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacityAnim, {\n          toValue: 1,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(scaleAnim, {\n          toValue: 0.01,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacityAnim, {\n          toValue: 0,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    }\n  }, [isVisible, scaleAnim, opacityAnim]);\n\n  return (\n    <>\n      {/* The menu icon that opens the dropdown */}\n      <TouchableOpacity\n        onPress={openMenu}\n        style={localStyles.menuIconPlacement}\n      >\n        <Ionicons name=\"menu\" size={scaleSize(22)} color={colors.menuText} />\n      </TouchableOpacity>\n\n      {/* Modal is only rendered when isVisible is true */}\n      {isVisible && (\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isVisible}\n          onRequestClose={closeMenu}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPressOut={closeMenu}\n          >\n            <Animated.View\n              style={[\n                localStyles.modalContent,\n                {\n                  opacity: opacityAnim,\n                  transform: [{ scale: scaleAnim }],\n                  // Position the modal content relative to the top-right of the screen - responsive\n                  top: menuStyles.top,\n                  right: menuStyles.right,\n                  minWidth: menuStyles.minWidth,\n                  maxWidth: menuStyles.maxWidth,\n                  maxHeight: menuStyles.maxHeight,\n                  paddingVertical: menuStyles.paddingVertical,\n                  paddingHorizontal: menuStyles.paddingHorizontal,\n                  borderRadius: menuStyles.borderRadius,\n                },\n              ]}\n            >\n              <ScrollView showsVerticalScrollIndicator={false}>\n                {options.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.menuOption,\n                      index === options.length - 1 && { borderBottomWidth: 0 },\n                    ]}\n                    onPress={() => {\n                      onSelectOption(option);\n                      closeMenu(); // Close the menu after selection\n                    }}\n                  >\n                    <Text style={localStyles.menuOptionText}>{option}</Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </Animated.View>\n          </TouchableOpacity>\n        </Modal>\n      )}\n    </>\n  );\n};\n\nconst localStyles = StyleSheet.create({\n  menuIconPlacement: {\n    padding: responsiveSpacing(5, 6, 8),\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n  },\n  modalContent: {\n    backgroundColor: colors.menuBackground,\n    position: \"absolute\",\n    // Dynamic styles applied in JSX for responsive sizing\n    ...createShadowStyle(colors.black, { width: 0, height: scaleSize(2) }, 0.25, scaleSize(3.84)),\n    elevation: 5,\n    borderWidth: 1,\n    borderColor: colors.menuBorder,\n  },\n  menuOption: {\n    paddingHorizontal: responsiveSpacing(20, 24, 28),\n    paddingVertical: responsiveSpacing(12, 14, 16),\n    borderBottomWidth: 1,\n    borderBottomColor: colors.menuBorder,\n    width: \"100%\",\n    alignSelf: \"flex-end\", // Align text to the right for rtl layout\n  },\n  menuOptionText: {\n    fontSize: responsiveFontSize(FontSizes.body, 16, 18),\n    textAlign: \"right\", // Text alignment for rtl\n    writingDirection: \"rtl\", // Explicit rtl text direction\n    color: colors.menuText,\n  },\n});\n\nexport default MenuComp;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ModeToggleButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`resetFormState` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx:91:7\n  89 |   useEffect(() => {\n  90 |     if (!isOpen) {\n> 91 |       resetFormState();\n     |       ^^^^^^^^^^^^^^ `resetFormState` accessed before it is declared\n  92 |     }\n  93 |   }, [isOpen]);\n  94 |\n\n/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx:126:3\n  124 |    * Resets the form to its initial state\n  125 |    */\n> 126 |   const resetFormState = () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 127 |     setFormState({\n      | ^^^^^^^^^^^^^^^^^^\n> 128 |       query: '',\n      | ^^^^^^^^^^^^^^^^^^\n> 129 |       isChecking: false,\n      | ^^^^^^^^^^^^^^^^^^\n> 130 |       suggestions: [],\n      | ^^^^^^^^^^^^^^^^^^\n> 131 |     });\n      | ^^^^^^^^^^^^^^^^^^\n> 132 |   };\n      | ^^^^^ `resetFormState` is declared here\n  133 |\n  134 |   /**\n  135 |    * Loads recent emails from AsyncStorage","line":91,"column":7,"nodeType":null,"endLine":91,"endColumn":21},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadRecentEmails` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx:120:5\n  118 |   // Load recent emails on component mount\n  119 |   useEffect(() => {\n> 120 |     loadRecentEmails();\n      |     ^^^^^^^^^^^^^^^^ `loadRecentEmails` accessed before it is declared\n  121 |   }, []);\n  122 |\n  123 |   /**\n\n/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx:137:3\n  135 |    * Loads recent emails from AsyncStorage\n  136 |    */\n> 137 |   const loadRecentEmails = async () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 138 |     try {\n      | ^^^^^^^^^\n> 139 |       const raw = await AsyncStorage.getItem('recent_emails');\n      â€¦\n      | ^^^^^^^^^\n> 158 |     }\n      | ^^^^^^^^^\n> 159 |   };\n      | ^^^^^ `loadRecentEmails` is declared here\n  160 |\n  161 |   /**\n  162 |    * Handles organization confirmation and lookup","line":120,"column":5,"nodeType":null,"endLine":120,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * OrganizationLoginForm Component\n * \n * A comprehensive organization authentication form component that handles organization lookup,\n * approval status checking, and navigation to organization onboarding when needed.\n * Features include organization name/email search, recent email suggestions,\n * and proper error handling with user feedback.\n * \n * @author KC Development Team\n * @version 1.8.0\n * @since 1.0.0\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  Alert,\n  Animated,\n  StyleSheet,\n  Dimensions,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { db } from '../utils/databaseService';\nimport colors from '../globals/colors';\n\n// TypeScript Interfaces\ninterface OrganizationLoginFormProps {\n  /** Whether the form is currently open/expanded */\n  isOpen: boolean;\n  /** Callback to toggle the form open/closed state */\n  onToggle: () => void;\n  /** Callback when user successfully logs in as organization */\n  onLoginSuccess: (userData: any) => void;\n  /** Animation value for form expansion */\n  animationValue: Animated.Value;\n}\n\ninterface OrganizationFormState {\n  query: string;\n  isChecking: boolean;\n  suggestions: string[];\n}\n\ninterface RecentEmailsState {\n  emails: string[];\n  suggestions: string[];\n}\n\nconst KNOWN_EMAILS_KEY = 'known_emails';\n\n/**\n * OrganizationLoginForm Component\n * \n * Handles the complete organization authentication flow including:\n * - Organization name/email search\n * - Approval status checking\n * - Recent email suggestions\n * - Navigation to onboarding for new organizations\n * - Proper error handling and user feedback\n */\nconst OrganizationLoginForm: React.FC<OrganizationLoginFormProps> = ({\n  isOpen,\n  onToggle,\n  onLoginSuccess,\n  animationValue,\n}) => {\n  const { t } = useTranslation(['auth', 'common']);\n  const navigation = useNavigation<any>();\n\n  // Form state management\n  const [formState, setFormState] = useState<OrganizationFormState>({\n    query: '',\n    isChecking: false,\n    suggestions: [],\n  });\n\n  const [recentEmails, setRecentEmails] = useState<RecentEmailsState>({\n    emails: [],\n    suggestions: [],\n  });\n\n  // Reset form state when form is closed\n  useEffect(() => {\n    if (!isOpen) {\n      resetFormState();\n    }\n  }, [isOpen]);\n\n  // Update email suggestions based on current input\n  useEffect(() => {\n    if (!isOpen) {\n      setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n      return;\n    }\n\n    const query = formState.query.trim().toLowerCase();\n    if (!query) {\n      setRecentEmails(prev => ({\n        ...prev,\n        suggestions: recentEmails.emails.slice(0, 5)\n      }));\n      return;\n    }\n\n    const filtered = recentEmails.emails\n      .filter(email => email.toLowerCase().includes(query))\n      .slice(0, 5);\n\n    setRecentEmails(prev => ({ ...prev, suggestions: filtered }));\n  }, [formState.query, isOpen, recentEmails.emails]);\n\n  // Load recent emails on component mount\n  useEffect(() => {\n    loadRecentEmails();\n  }, []);\n\n  /**\n   * Resets the form to its initial state\n   */\n  const resetFormState = () => {\n    setFormState({\n      query: '',\n      isChecking: false,\n      suggestions: [],\n    });\n  };\n\n  /**\n   * Loads recent emails from AsyncStorage\n   */\n  const loadRecentEmails = async () => {\n    try {\n      const raw = await AsyncStorage.getItem('recent_emails');\n      if (raw) {\n        const list = JSON.parse(raw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n          return;\n        }\n      }\n\n      // Fallback to known emails\n      const knownRaw = await AsyncStorage.getItem(KNOWN_EMAILS_KEY);\n      if (knownRaw) {\n        const list = JSON.parse(knownRaw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load recent emails:', error);\n    }\n  };\n\n  /**\n   * Handles organization confirmation and lookup\n   */\n  const handleOrgConfirm = async () => {\n    try {\n      const query = formState.query.trim();\n\n      if (!query) {\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:org.enterNameOrEmail') as string\n        );\n        return;\n      }\n\n      setFormState(prev => ({ ...prev, isChecking: true }));\n\n      // Search for organization applications\n      let applications: any[] = [];\n      const isEmail = query.includes('@');\n\n      if (isEmail) {\n        // Search by email (primary key)\n        const emailKey = query.toLowerCase();\n        applications = await db.listOrgApplications(emailKey);\n      } else {\n        // Search by organization name from admin queue\n        const all = await db.listOrgApplications('admin_org_queue');\n        applications = (all || []).filter((app: any) =>\n          String(app.orgName || '').toLowerCase().includes(query.toLowerCase())\n        );\n      }\n\n      // Check for approved applications\n      const approved = applications.find((app: any) => app.status === 'approved');\n      const pending = applications.find((app: any) => app.status === 'pending');\n\n      if (approved) {\n        // Create organization user and login\n        await handleApprovedOrganization(approved, isEmail, query);\n        return;\n      }\n\n      if (pending) {\n        Alert.alert(\n          t('auth:org.pendingTitle') as string,\n          t('auth:org.pendingMessage') as string\n        );\n        setFormState(prev => ({ ...prev, isChecking: false }));\n        return;\n      }\n\n      // Organization not found - navigate to onboarding\n      navigation.navigate('OrgOnboardingScreen' as never);\n    } catch (error) {\n      console.error('Org login check failed:', error);\n      Alert.alert(\n        t('common:error') as string,\n        t('auth:org.checkFailed') as string\n      );\n      setFormState(prev => ({ ...prev, isChecking: false }));\n    }\n  };\n\n  /**\n   * Handles login for approved organizations\n   */\n  const handleApprovedOrganization = async (approved: any, isEmail: boolean, query: string) => {\n    try {\n      const email = String(approved.contactEmail || (isEmail ? query : '')).toLowerCase();\n\n      const orgUser = {\n        id: `org_${approved.id}`,\n        name: approved.orgName || (t('auth:org.defaultName') as string),\n        email: email || `org_${approved.id}@example.org`,\n        phone: approved.contactPhone || '+9720000000',\n        avatar: 'https://i.pravatar.cc/150?img=12',\n        bio: t('auth:org.defaultBio') as string,\n        karmaPoints: 0,\n        joinDate: new Date().toISOString(),\n        isActive: true,\n        lastActive: new Date().toISOString(),\n        location: {\n          city: approved.city || (t('common:labels.countryIsrael') as string),\n          country: 'IL'\n        },\n        interests: [],\n        roles: ['org_admin'],\n        postsCount: 0,\n        followersCount: 0,\n        followingCount: 0,\n        notifications: [],\n        settings: { language: 'he', darkMode: false, notificationsEnabled: true },\n      };\n\n      onLoginSuccess(orgUser);\n    } catch (error) {\n      console.error('Failed to create organization user:', error);\n      setFormState(prev => ({ ...prev, isChecking: false }));\n    }\n  };\n\n  /**\n   * Handles suggestion selection\n   */\n  const handleSuggestionSelect = (email: string) => {\n    setFormState(prev => ({ ...prev, query: email }));\n    setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n  };\n\n  if (!isOpen) {\n    return (\n      <View style={styles.container}>\n        <TouchableOpacity\n          style={[styles.ctaButton, styles.orgButton]}\n          onPress={onToggle}\n          activeOpacity={0.85}\n        >\n          <Text style={[styles.ctaButtonText, { color: colors.secondary, fontWeight: '700' }]}>\n            {t('auth:org.cta')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.expandedRow}>\n        <Animated.View style={[styles.miniButton, { opacity: animationValue }]}>\n          <TouchableOpacity onPress={onToggle} activeOpacity={0.8}>\n            <Ionicons name=\"business-outline\" size={20} color={colors.secondary} />\n          </TouchableOpacity>\n        </Animated.View>\n\n        <TextInput\n          style={styles.input}\n          placeholder={t('auth:org.placeholder')}\n          placeholderTextColor={colors.textTertiary}\n          value={formState.query}\n          onChangeText={(text) => setFormState(prev => ({ ...prev, query: text }))}\n          autoCapitalize=\"none\"\n          autoCorrect={false}\n          textAlign=\"right\"\n          autoComplete=\"email\"\n          textContentType=\"emailAddress\"\n          inputMode=\"email\"\n          returnKeyType=\"done\"\n          onSubmitEditing={handleOrgConfirm}\n          accessible={true}\n          accessibilityLabel={t('auth:org.placeholder')}\n          accessibilityHint={t('auth:org.accessibilityHint') || 'Enter your organization email'}\n          importantForAccessibility=\"yes\"\n        />\n\n        <TouchableOpacity\n          style={[styles.actionButton, formState.isChecking && styles.disabledButton]}\n          onPress={handleOrgConfirm}\n          disabled={formState.isChecking}\n          activeOpacity={0.85}\n        >\n          <Text style={styles.actionButtonText}>\n            {formState.isChecking ? t('auth:org.checking') : t('auth:org.continue')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Email suggestions dropdown */}\n      {recentEmails.suggestions.length > 0 && (\n        <View style={styles.suggestionsBox}>\n          {recentEmails.suggestions.map((suggestion) => (\n            <TouchableOpacity\n              key={suggestion}\n              style={styles.suggestionItem}\n              onPress={() => handleSuggestionSelect(suggestion)}\n            >\n              <Text style={styles.suggestionText}>{suggestion}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 3,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  ctaButton: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    width: '100%',\n    marginVertical: 6,\n    marginBottom: 22,\n  },\n  orgButton: {\n    borderColor: colors.secondary,\n    width: '100%',\n  },\n  ctaButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: colors.textSecondary,\n    textAlign: 'center',\n    width: '100%',\n  },\n  expandedRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 6,\n    marginHorizontal: 0,\n    marginVertical: 3,\n    gap: 8,\n    width: '100%',\n  },\n  miniButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(255, 107, 157, 0.08)',\n  },\n  input: {\n    flex: 1,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n  },\n  actionButton: {\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 10,\n  },\n  actionButtonText: {\n    color: colors.white,\n    fontWeight: '700',\n    fontSize: 14,\n  },\n  disabledButton: {\n    backgroundColor: colors.textTertiary,\n    opacity: 0.6,\n  },\n  suggestionsBox: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    marginTop: 6,\n    marginBottom: 6,\n    overflow: 'hidden',\n  },\n  suggestionItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  suggestionText: {\n    fontSize: 14,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n});\n\nexport default OrganizationLoginForm;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/PostsReelsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/PostsReelsScreenWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ProfileCompletionBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ScreenWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ScrollContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/SearchBar.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/components/SearchBar.tsx:91:5\n  89 |   useEffect(() => {\n  90 |     const hasActive = selectedFilters.length > 0 || selectedSorts.length > 0;\n> 91 |     handleHasActiveConditionsChange(hasActive);\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  92 |   }, [selectedFilters, selectedSorts]); // Add onHasActiveConditionsChange to dependencies\n  93 |\n  94 |   // Function to perform search with given parameters","line":91,"column":5,"nodeType":null,"endLine":91,"endColumn":36},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleHasActiveConditionsChange'. Either include it or remove the dependency array.","line":92,"column":6,"nodeType":"ArrayExpression","endLine":92,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [handleHasActiveConditionsChange, selectedFilters, selectedSorts]","fix":{"range":[3549,3581],"text":"[handleHasActiveConditionsChange, selectedFilters, selectedSorts]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'onRemoveFilterRequested', 'onRemoveSortRequested', 'removeFilter', and 'removeSort'. Either include them or remove the dependency array. If 'onRemoveFilterRequested' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":295,"column":6,"nodeType":"ArrayExpression","endLine":295,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [onRemoveFilterRequested, onRemoveSortRequested, removeFilter, removeSort, selectedFilters, selectedSorts]","fix":{"range":[10947,10979],"text":"[onRemoveFilterRequested, onRemoveSortRequested, removeFilter, removeSort, selectedFilters, selectedSorts]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  StyleSheet,\n  Modal,\n  ScrollView,\n  Platform,\n  Alert, // Use Alert for messages instead of alert()\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\"; // Ensure @expo/vector-icons is installed\nimport colors from \"../globals/colors\"; // Ensure this path is correct\nimport { FontSizes, filterOptions as defaultFilterOptions, sortOptions as defaultSortOptions } from \"../globals/constants\";\nimport { useTranslation } from 'react-i18next';\nimport { createShadowStyle } from \"../globals/styles\";\nimport { biDiTextAlign, rowDirection, getResponsiveModalStyles, responsiveSpacing, responsiveFontSize, getScreenInfo, BREAKPOINTS, scaleSize } from \"../globals/responsive\";\n\ninterface SearchBarProps {\n  onHasActiveConditionsChange?: (isActive: boolean) => void;\n  onSearch?: (query: string, filters?: string[], sorts?: string[], results?: any[]) => void;\n  placeholder?: string;\n  // New props for dynamic filter/sort options and search data (optional for backward compatibility)\n  filterOptions?: string[];\n  sortOptions?: string[];\n  searchData?: any[];\n  // Props to expose selected filters/sorts to parent\n  onFiltersChange?: (filters: string[]) => void;\n  onSortsChange?: (sorts: string[]) => void;\n  // Callbacks to expose remove functions to parent\n  onRemoveFilterRequested?: (removeFn: (filter: string) => void) => void;\n  onRemoveSortRequested?: (removeFn: () => void) => void;\n  // Whether to render the selected filters/sorts row (false = parent will render it)\n  renderSelectedRow?: boolean;\n  // Whether to hide the sort button explicitly\n  hideSortButton?: boolean;\n}\n\nconst SearchBar = ({\n  onHasActiveConditionsChange,\n  onSearch,\n  placeholder,\n  filterOptions = defaultFilterOptions,\n  sortOptions = defaultSortOptions,\n  searchData = [],\n  onFiltersChange,\n  onSortsChange,\n  onRemoveFilterRequested,\n  onRemoveSortRequested,\n  renderSelectedRow = true,\n  hideSortButton = false,\n}: SearchBarProps) => {\n  const [searchText, setSearchText] = useState(\"\");\n  const { t } = useTranslation(['search', 'common', 'trump']);\n  const [isFilterModalVisible, setIsFilterModalVisible] = useState(false);\n  const [isSortModalVisible, setIsSortModalVisible] = useState(false);\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n  // New state to track if SearchBar has active filters/sorts\n  const [hasActiveConditions, setHasActiveConditions] = useState<boolean>(false);\n\n  // Callback function to be passed to SearchBar\n  const handleHasActiveConditionsChange = (isActive: boolean) => {\n    setHasActiveConditions(isActive);\n    onHasActiveConditionsChange?.(isActive);\n  };\n\n  // Determine paddingBottom based on hasActiveConditions\n  const getPaddingBottom = () => {\n    if (hasActiveConditions) {\n      // If there are filters/sorts, provide less padding to avoid excessive space\n      return Platform.select({\n        ios: 20,\n        android: 0,\n        web: 0,\n      });\n    } else {\n      // If no filters/sorts, provide more padding for the static buttons row\n      return Platform.select({\n        ios: 80,\n        android: 0,\n        web: 0, // Assuming web might handle spacing differently\n      });\n    }\n  };\n\n  // Effect to inform parent about active conditions\n  useEffect(() => {\n    const hasActive = selectedFilters.length > 0 || selectedSorts.length > 0;\n    handleHasActiveConditionsChange(hasActive);\n  }, [selectedFilters, selectedSorts]); // Add onHasActiveConditionsChange to dependencies\n\n  // Function to perform search with given parameters\n  const performSearch = (query: string, filters: string[], sorts: string[]) => {\n    // For backward compatibility, if no searchData is provided, just call onSearch with basic parameters\n    if (searchData.length === 0) {\n      onSearch?.(query, filters, sorts, []);\n      return;\n    }\n\n    // Perform search on the provided data\n    let results = [...searchData];\n\n    // Filter by search text if provided\n    if (query.trim() !== \"\") {\n      results = results.filter(item => {\n        // Enhanced search for charities - check specific fields first\n        if (item.name && item.name.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.description && item.description.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.location && item.location.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.category && item.category.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.organization && item.organization.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.title && item.title.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n\n        // Fallback to generic search for other properties\n        const itemStr = JSON.stringify(item).toLowerCase();\n        return itemStr.includes(query.toLowerCase());\n      });\n    }\n\n    // Apply filters if any are selected\n    if (filters.length > 0) {\n      results = results.filter(item => {\n        // Enhanced filter logic for charities\n        return filters.some(filter => {\n          // Check category field first\n          if (item.category && item.category.toLowerCase().includes(filter.toLowerCase())) {\n            return true;\n          }\n          // Check tags field if it exists\n          if (item.tags && Array.isArray(item.tags)) {\n            return item.tags.some((tag: string) => tag.toLowerCase().includes(filter.toLowerCase()));\n          }\n          // Check organization field\n          if (item.organization && item.organization.toLowerCase().includes(filter.toLowerCase())) {\n            return true;\n          }\n          // Fallback to generic search\n          const itemStr = JSON.stringify(item).toLowerCase();\n          return itemStr.includes(filter.toLowerCase());\n        });\n      });\n    }\n\n    // Apply sorting if any is selected\n    if (sorts.length > 0) {\n      const sortOption = sorts[0]; // Only one sort at a time\n\n      // Enhanced sorting logic for charities\n      if (sortOption === 'alphabetical') {\n        results.sort((a, b) => {\n          const aName = (a.name || a.title || a.organization || '').toLowerCase();\n          const bName = (b.name || b.title || b.organization || '').toLowerCase();\n          return aName.localeCompare(bName, 'he');\n        });\n      } else if (sortOption === 'byLocation') {\n        results.sort((a, b) => {\n          const aLocation = (a.location || '').toLowerCase();\n          const bLocation = (b.location || '').toLowerCase();\n          return aLocation.localeCompare(bLocation, 'he');\n        });\n      } else if (sortOption === 'byCategory') {\n        results.sort((a, b) => {\n          const aCategory = (a.category || '').toLowerCase();\n          const bCategory = (b.category || '').toLowerCase();\n          return aCategory.localeCompare(bCategory, 'he');\n        });\n      } else if (sortOption === 'byDonors') {\n        results.sort((a, b) => {\n          const aDonors = a.donors || a.volunteers || 0;\n          const bDonors = b.donors || b.volunteers || 0;\n          return bDonors - aDonors; // Descending order\n        });\n      } else if (sortOption === 'byRating') {\n        results.sort((a, b) => {\n          const aRating = a.rating || 0;\n          const bRating = b.rating || 0;\n          return bRating - aRating; // Descending order\n        });\n      } else if (sortOption === 'byRelevance') {\n        // Default - by rating\n        results.sort((a, b) => {\n          const aRating = a.rating || 0;\n          const bRating = b.rating || 0;\n          return bRating - aRating; // Descending order\n        });\n      }\n    }\n\n    // Call the parent's search handler with all the parameters\n    onSearch?.(query, filters, sorts, results);\n  };\n\n  const handleSearch = () => {\n    performSearch(searchText, selectedFilters, selectedSorts);\n  };\n\n  const handleFilterSelection = (option: string) => {\n    setSelectedFilters((prevFilters) => {\n      const newFilters = prevFilters.includes(option)\n        ? prevFilters.filter((item) => item !== option)\n        : [...prevFilters, option];\n\n      // Notify parent of filter changes\n      onFiltersChange?.(newFilters);\n\n      // Perform real-time search with new filters\n      performSearch(searchText, newFilters, selectedSorts);\n\n      return newFilters;\n    });\n  };\n\n  const handleSortSelection = (option: string) => {\n    setSelectedSorts((prevSorts) => {\n      const newSorts = prevSorts.includes(option) ? [] : [option];\n\n      // Notify parent of sort changes\n      onSortsChange?.(newSorts);\n\n      // Perform real-time search with new sorts\n      performSearch(searchText, selectedFilters, newSorts);\n\n      return newSorts;\n    });\n  };\n\n  const removeFilter = (filterToRemove: string) => {\n    setSelectedFilters((prevFilters) => {\n      const newFilters = prevFilters.filter((filter) => filter !== filterToRemove);\n\n      // Notify parent of filter changes\n      onFiltersChange?.(newFilters);\n\n      // Perform real-time search with updated filters\n      performSearch(searchText, newFilters, selectedSorts);\n\n      return newFilters;\n    });\n  };\n\n  const removeSort = (sortToRemove: string) => {\n    setSelectedSorts([]); // Remove all sorts, as typically only one can be active\n\n    // Notify parent of sort changes\n    onSortsChange?.([]);\n\n    // Perform real-time search with updated sorts\n    performSearch(searchText, selectedFilters, []);\n  };\n\n  const isFilterSelected = (option: string) => selectedFilters.includes(option);\n  const isSortSelected = (option: string) => selectedSorts.includes(option);\n\n  // Handle text input changes\n  const handleTextChange = (text: string) => {\n    setSearchText(text);\n\n    // Perform real-time search as user types\n    performSearch(text, selectedFilters, selectedSorts);\n  };\n\n  // Handle search on submit\n  const handleSubmitEditing = () => {\n    handleSearch();\n  };\n\n  // Get responsive styles\n  const modalStyles = getResponsiveModalStyles();\n  const { isTablet, isDesktop, isLargeDesktop, width } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobileWeb = Platform.OS === 'web' && width <= BREAKPOINTS.TABLET;\n  // Icon size optimized for mobile web - smaller for better proportions\n  const iconSize = isLargeDesktop ? 28 : isDesktopWeb ? 26 : isTablet ? 24 : isMobileWeb ? 20 : 22;\n  // Default placeholder if none provided\n  const searchPlaceholder = placeholder || t('donations:searchCharitiesForHelp');\n\n  // Expose remove functions to parent component\n  React.useEffect(() => {\n    onRemoveFilterRequested?.(removeFilter);\n    onRemoveSortRequested?.(() => removeSort(''));\n  }, [selectedFilters, selectedSorts]);\n\n  return (\n    <View style={localStyles.container}>\n      {/* --- Main Search Bar Row --- */}\n      <View style={[localStyles.searchBarContainer, { flexDirection: rowDirection('row-reverse') }]}>\n        {/* Sort Button (opens sort modal) - Inside search bar, smaller */}\n        {!hideSortButton && (\n          <TouchableOpacity\n            style={localStyles.buttonContainer}\n            onPress={() => setIsSortModalVisible(true)}\n          >\n            <Text style={localStyles.buttonText}>{t('search:sortTitle')}</Text>\n          </TouchableOpacity>\n        )}\n\n        {/* Filter Button (opens filter modal) - Inside search bar, smaller */}\n        <TouchableOpacity\n          style={localStyles.buttonContainer}\n          onPress={() => setIsFilterModalVisible(true)}\n        >\n          <Text style={localStyles.buttonText}>{t('search:filterTitle')}</Text>\n        </TouchableOpacity>\n\n        {/* Search Input Field */}\n        <TextInput\n          style={[localStyles.searchInput, { textAlign: biDiTextAlign('right') }]}\n          placeholder={searchPlaceholder}\n          placeholderTextColor={colors.textTertiary}\n          value={searchText}\n          onChangeText={handleTextChange}\n          onSubmitEditing={handleSubmitEditing}\n          returnKeyType=\"search\"\n        />\n\n        {/* Search Icon - Inside search bar, before input */}\n        <TouchableOpacity\n          onPress={handleSearch}\n          style={localStyles.searchIconContainer}\n          activeOpacity={0.7}\n        >\n          <Ionicons name=\"search\" size={iconSize} color={colors.textSecondary} />\n        </TouchableOpacity>\n\n        {/* --- Filter Options Modal --- */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isFilterModalVisible}\n          onRequestClose={() => setIsFilterModalVisible(false)}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPress={() => setIsFilterModalVisible(false)}\n          >\n            <View style={[\n              localStyles.modalContent,\n              {\n                width: modalStyles.width,\n                maxWidth: modalStyles.maxWidth,\n                maxHeight: modalStyles.maxHeight,\n                padding: modalStyles.padding,\n                borderRadius: modalStyles.borderRadius,\n              }\n            ]}>\n              <Text style={localStyles.modalTitle}>{t('search:chooseFiltersTitle')}</Text>\n              <ScrollView style={localStyles.modalScrollView}>\n                {filterOptions.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.modalOption,\n                      isFilterSelected(option) && localStyles.modalOptionSelected,\n                    ]}\n                    onPress={() => handleFilterSelection(option)}\n                  >\n                    <Text\n                      style={[\n                        localStyles.modalOptionText,\n                        isFilterSelected(option) && localStyles.modalOptionTextSelected,\n                      ]}\n                    >\n                      {/* Try trump:filters first (for trump screen), then search:filters */}\n                      {t(`trump:filters.${option}`, { defaultValue: t(`search:filters.${option}`, { defaultValue: option }) })}\n                    </Text>\n                    {isFilterSelected(option) && (\n                      <Ionicons\n                        name=\"checkmark-circle\"\n                        size={20}\n                        color={colors.secondary}\n                        style={localStyles.modalCheckmark}\n                      />\n                    )}\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n              <TouchableOpacity\n                style={localStyles.modalCloseButton}\n                onPress={() => setIsFilterModalVisible(false)}\n              >\n                <Text style={localStyles.modalCloseButtonText}>{t('common:close')}</Text>\n              </TouchableOpacity>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n\n        {/* --- Sort Options Modal --- */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isSortModalVisible}\n          onRequestClose={() => setIsSortModalVisible(false)}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPress={() => setIsSortModalVisible(false)}\n          >\n            <View style={[\n              localStyles.modalContent,\n              {\n                width: modalStyles.width,\n                maxWidth: modalStyles.maxWidth,\n                maxHeight: modalStyles.maxHeight,\n                padding: modalStyles.padding,\n                borderRadius: modalStyles.borderRadius,\n              }\n            ]}>\n              <Text style={localStyles.modalTitle}>{t('search:chooseSortsTitle')}</Text>\n              <ScrollView style={localStyles.modalScrollView}>\n                {sortOptions.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.modalOption,\n                      isSortSelected(option) && localStyles.modalOptionSelected,\n                    ]}\n                    onPress={() => handleSortSelection(option)}\n                  >\n                    <Text\n                      style={[\n                        localStyles.modalOptionText,\n                        isSortSelected(option) && localStyles.modalOptionTextSelected,\n                      ]}\n                    >\n                      {t(`search:sort.${option}`)}\n                    </Text>\n                    {isSortSelected(option) && (\n                      <Ionicons\n                        name=\"checkmark-circle\"\n                        size={20}\n                        color={colors.secondary}\n                        style={localStyles.modalCheckmark}\n                      />\n                    )}\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n              <TouchableOpacity\n                style={localStyles.modalCloseButton}\n                onPress={() => setIsSortModalVisible(false)}\n              >\n                <Text style={localStyles.modalCloseButtonText}>{t('common:close')}</Text>\n              </TouchableOpacity>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n      </View>\n\n      {/* --- Selected Filters & Sorts Row (Combined, thin, scrollable) --- */}\n      {renderSelectedRow && (selectedFilters.length > 0 || selectedSorts.length > 0) && (\n        <View style={localStyles.selectedRowWrapper}>\n          <ScrollView\n            horizontal={true}\n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={localStyles.selectedButtonsContainer}\n            style={localStyles.selectedScrollView}\n          >\n            {/* Sort items */}\n            {selectedSorts.length > 0 && (\n              <>\n                <Text style={localStyles.rowLabelInline}>{t('search:sortTitle')}:</Text>\n                {selectedSorts.map((sort) => (\n                  <TouchableOpacity\n                    key={sort}\n                    style={localStyles.selectedFilterSortButton}\n                    onPress={() => removeSort(sort)}\n                  >\n                    <Text style={localStyles.selectedFilterSortButtonText}>\n                      {t(`search:sort.${sort}`)}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={12} color={colors.black} style={localStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n\n            {/* Filter items */}\n            {selectedFilters.length > 0 && (\n              <>\n                {selectedSorts.length > 0 && (\n                  <Text style={localStyles.separator}>â€¢</Text>\n                )}\n                <Text style={localStyles.rowLabelInline}>{t('search:filterTitle')}:</Text>\n                {selectedFilters.map((filter) => (\n                  <TouchableOpacity\n                    key={filter}\n                    style={localStyles.selectedFilterSortButton}\n                    onPress={() => removeFilter(filter)}\n                  >\n                    <Text style={localStyles.selectedFilterSortButtonText}>\n                      {/* Try trump:filters first (for trump screen), then search:filters */}\n                      {t(`trump:filters.${filter}`, { defaultValue: t(`search:filters.${filter}`, { defaultValue: filter }) })}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={12} color={colors.black} style={localStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n          </ScrollView>\n        </View>\n      )}\n\n\n    </View>\n  );\n};\n\nconst localStyles = StyleSheet.create({\n  container: {\n    backgroundColor: \"transparent\",\n    flex: 1, // Take available space instead of fixed 60%\n    minWidth: 0, // Allow shrinking below content size\n  },\n  searchBarContainer: {\n    flexDirection: \"row-reverse\",\n    alignItems: \"center\",\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: responsiveSpacing(18, 20, 22),\n    ...createShadowStyle(colors.black, { width: 0, height: 1 }, 0.08, 2),\n    elevation: 2,\n    height: scaleSize(32), // Match the height of ModeToggleButton\n    paddingVertical: 5, // No vertical padding, height is fixed\n    paddingHorizontal: responsiveSpacing(4, 6, 8), // Optimized horizontal padding for mobile web\n    borderWidth: 0.5,\n    borderColor: colors.black,\n    width: '100%',\n  },\n  buttonContainer: {\n    backgroundColor: colors.pinkLight,\n    borderRadius: responsiveSpacing(12, 14, 16),\n    paddingVertical: responsiveSpacing(1, 2, 3), // Reduced padding to fit in 32px height\n    paddingHorizontal: responsiveSpacing(5, 6, 7), // Optimized padding for mobile web\n    marginLeft: responsiveSpacing(4, 5, 6), // Better spacing for mobile web\n    flexShrink: 0, // Don't shrink buttons\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%', // Match container height\n  },\n  buttonText: {\n    fontSize: responsiveFontSize(FontSizes.caption, 9, 11), // Smaller font for mobile\n    color: colors.textSecondary,\n    fontWeight: \"600\",\n    writingDirection: \"rtl\",\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: responsiveFontSize(FontSizes.small, 13, 15),\n    color: colors.textSecondary,\n    paddingLeft: responsiveSpacing(4, 6, 8),\n    paddingRight: responsiveSpacing(2, 3, 4), // Space between input and icon\n    paddingVertical: 0,\n    minWidth: 0, // Allow shrinking\n    height: '100%', // Take full height of container\n  },\n  searchIconContainer: {\n    paddingRight: responsiveSpacing(6, 8, 10), // More padding for better touch target\n    paddingLeft: responsiveSpacing(2, 3, 4),\n    paddingVertical: 0, // No vertical padding, container height is fixed\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexShrink: 0, // Don't shrink icon container\n    minWidth: scaleSize(32), // Minimum touch target size for mobile web\n    height: '100%', // Match container height\n  },\n\n  // --- Modals Styles ---\n  modalOverlay: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n  },\n  modalContent: {\n    backgroundColor: \"white\",\n    // Dynamic styles applied in JSX for responsive sizing\n    ...createShadowStyle(colors.black, { width: 0, height: 2 }, 0.25, 4),\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: responsiveFontSize(FontSizes.heading2, 20, 22),\n    fontWeight: \"bold\",\n    marginBottom: responsiveSpacing(15, 18, 20),\n    textAlign: \"center\",\n    color: colors.textSecondary,\n  },\n  modalScrollView: {\n    maxHeight: responsiveSpacing(300, 400, 500),\n  },\n  modalOption: {\n    paddingVertical: responsiveSpacing(15, 18, 20),\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    flexDirection: rowDirection(\"row-reverse\"),\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: responsiveSpacing(10, 12, 14),\n  },\n  modalOptionSelected: {\n    backgroundColor: colors.warning,\n  },\n  modalOptionText: {\n    fontSize: responsiveFontSize(FontSizes.medium, 16, 18),\n    textAlign: \"right\",\n    writingDirection: \"rtl\",\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  modalOptionTextSelected: {\n    fontWeight: \"bold\",\n    color: colors.secondary,\n  },\n  modalCheckmark: {\n    marginLeft: responsiveSpacing(10, 12, 14),\n  },\n  modalCloseButton: {\n    marginTop: responsiveSpacing(20, 24, 28),\n    backgroundColor: colors.secondary,\n    paddingVertical: responsiveSpacing(12, 14, 16),\n    borderRadius: responsiveSpacing(8, 10, 12),\n    alignItems: \"center\",\n  },\n  modalCloseButtonText: {\n    color: \"white\",\n    fontSize: responsiveFontSize(FontSizes.medium, 16, 18),\n    fontWeight: \"bold\",\n  },\n\n  // --- Selected Filter/Sort Rows Styles (Thin, scrollable, single row) ---\n  selectedRowWrapper: {\n    marginTop: responsiveSpacing(4, 5, 6),\n    marginHorizontal: responsiveSpacing(8, 10, 12),\n    maxHeight: responsiveSpacing(28, 32, 36),\n  },\n  selectedScrollView: {\n    maxHeight: responsiveSpacing(28, 32, 36),\n  },\n  rowLabelInline: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: \"600\",\n    color: colors.textSecondary,\n    marginLeft: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  separator: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    color: colors.textTertiary,\n    marginHorizontal: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  selectedButtonsContainer: {\n    flexDirection: \"row-reverse\",\n    gap: responsiveSpacing(4, 5, 6),\n    paddingRight: responsiveSpacing(4, 5, 6),\n    alignItems: 'center',\n    flexGrow: 1,\n  },\n  selectedFilterSortButton: {\n    backgroundColor: colors.pinkLight,\n    paddingVertical: responsiveSpacing(2, 3, 4),\n    paddingHorizontal: responsiveSpacing(4, 5, 6),\n    borderRadius: responsiveSpacing(12, 14, 16),\n    flexDirection: \"row-reverse\",\n    alignItems: \"center\",\n    gap: responsiveSpacing(3, 4, 5),\n    ...createShadowStyle(colors.black, { width: 0, height: 0.5 }, 0.05, 1),\n    elevation: 1,\n  },\n  selectedFilterSortButtonText: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: '600',\n    color: colors.black,\n  },\n  removeIcon: {\n    margin: 0,\n  },\n\n  // --- Static Filter Buttons Row Styles ---\n  staticRowWrapper: {\n    marginTop: 10,\n    paddingBottom: 10,\n    minHeight: 40,\n  },\n  staticButtonsContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    gap: 10,\n    paddingHorizontal: 15,\n    flexGrow: 1,\n  },\n  staticFilterButton: {\n    backgroundColor: colors.accent,\n    paddingVertical: 8,\n    paddingHorizontal: 15,\n    borderRadius: 20,\n    flexShrink: 0,\n  },\n  staticFilterButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.black,\n  },\n});\n\nexport default SearchBar;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/SettingsItem.tsx","messages":[{"ruleId":"react/prop-types","severity":1,"message":"'title' is missing in props validation","line":27,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":27,"endColumn":10},{"ruleId":"react/prop-types","severity":1,"message":"'description' is missing in props validation","line":28,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":16},{"ruleId":"react/prop-types","severity":1,"message":"'iconName' is missing in props validation","line":29,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":29,"endColumn":13},{"ruleId":"react/prop-types","severity":1,"message":"'type' is missing in props validation","line":30,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":30,"endColumn":9},{"ruleId":"react/prop-types","severity":1,"message":"'onPress' is missing in props validation","line":31,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":31,"endColumn":12},{"ruleId":"react/prop-types","severity":1,"message":"'value' is missing in props validation","line":32,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":32,"endColumn":10},{"ruleId":"react/prop-types","severity":1,"message":"'onValueChange' is missing in props validation","line":33,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":33,"endColumn":18},{"ruleId":"react/prop-types","severity":1,"message":"'displayValue' is missing in props validation","line":34,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":34,"endColumn":17},{"ruleId":"react/prop-types","severity":1,"message":"'isDestructive' is missing in props validation","line":35,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":35,"endColumn":18},{"ruleId":"react/prop-types","severity":1,"message":"'children' is missing in props validation","line":36,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":36,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ===================================\n// SettingsItem.tsx\n// ===================================\n\nimport React, { memo } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\n\ntype SettingItemType = 'navigate' | 'toggle' | 'button' | 'value';\n\nexport interface SettingsItemProps {\n  title: string;\n  description?: string;\n  iconName?: keyof typeof Ionicons.glyphMap;\n  type: SettingItemType;\n  onPress?: () => void;\n  value?: boolean;\n  onValueChange?: (newValue: boolean) => void;\n  displayValue?: string;\n  isDestructive?: boolean;\n  children?: React.ReactNode;\n}\n\nconst SettingsItem: React.FC<SettingsItemProps> = memo((props) => {\n  const {\n    title,\n    description,\n    iconName,\n    type,\n    onPress,\n    value,\n    onValueChange,\n    displayValue,\n    isDestructive,\n    children\n  } = props;\n\n    const textColor = isDestructive ? colors.danger : colors.textPrimary;\n\n  const renderContent = () => {\n    switch (type) {\n      case 'toggle':\n        return (\n          <Switch\n            value={value}\n            onValueChange={onValueChange}\n            trackColor={{ false: colors.border, true: colors.primary }}\n            thumbColor={value ? colors.primary : colors.backgroundSecondary}\n            ios_backgroundColor={colors.border}\n          />\n        );\n      case 'value':\n        return (\n          <View style={styles.valueContainer}>\n            <Text style={styles.valueText}>{displayValue}</Text>\n            {/* Chevron should appear BEFORE the value text in RTL visually,\n                so we place it after the text when using row-reverse on the container */}\n            <Ionicons \n              name=\"chevron-back-outline\" // Changed to 'chevron-back-outline' for RTL visual consistency\n              size={20} \n              color={colors.textSecondary} \n              style={styles.chevron}\n            />\n          </View>\n        );\n      case 'navigate':\n        return (\n          <Ionicons name=\"chevron-back-outline\" size={20} color={colors.textSecondary} style={styles.chevron}/> // Changed to 'chevron-back-outline' for RTL visual consistency\n        );\n      case 'button':\n        return null;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <TouchableOpacity\n      style={[styles.container, type === 'button' && styles.buttonItem]}\n      onPress={onPress}\n      disabled={!onPress && type !== 'toggle'}\n      activeOpacity={type === 'toggle' ? 1 : 0.7}\n    >\n      {iconName && (\n        <Ionicons name={iconName} size={24} color={textColor} style={styles.icon} />\n      )}\n      <View style={styles.textContainer}>\n        {/* Explicitly setting textAlign: 'right' for all text for RTL */}\n        <Text style={[styles.title, { color: textColor, textAlign: 'right' }]}>{title}</Text>\n        {description && <Text style={[styles.description, { textAlign: 'right' }]}>{description}</Text>}\n      </View>\n      <View style={styles.rightContent}>\n        {renderContent()}\n        {children && (\n          typeof children === 'string' ? (\n            <Text style={[styles.childrenText, { textAlign: 'right' }]}>{children}</Text>\n          ) : (\n            children\n          )\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n});\n\nSettingsItem.displayName = 'SettingsItem';\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row-reverse', // Key for overall RTL layout\n    alignItems: 'center',\n    paddingVertical: 15,\n    paddingHorizontal: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: colors.border,\n    // Removed `writingDirection` and `textAlign` from here as they are for Text components or inherit\n  },\n  buttonItem: {\n    justifyContent: 'center',\n  },\n  icon: {\n    marginHorizontal: 15, // Space to the left of the icon in an RTL row\n  },\n  textContainer: {\n    flex: 1,\n    // Ensure text within this container flows RTL\n    writingDirection: 'rtl',\n  },\n  title: {\n    fontSize: 16,\n    color: colors.textPrimary,\n    // textAlign: 'right' applied inline for explicit text alignment\n  },\n  description: {\n    fontSize: 13,\n    color: colors.textSecondary,\n    marginTop: 2,\n    // textAlign: 'right' applied inline for explicit text alignment\n  },\n  rightContent: {\n    marginLeft: 'auto', // Pushes content to the left (start of RTL row)\n    flexDirection: 'row-reverse', // <--- Changed to 'row-reverse' for internal RTL order of elements like value + chevron\n    alignItems: 'center',\n    writingDirection: 'rtl', // Ensure content within this container flows RTL\n  },\n  valueContainer: {\n    flexDirection: 'row-reverse', // <--- Changed to 'row-reverse' to put chevron before text visually\n    alignItems: 'center',\n  },\n  valueText: {\n    fontSize: 16,\n    color: colors.textSecondary,\n    // If chevron is placed before text, this margin separates them\n    marginRight: 5, // Space between value text and chevron\n  },\n  chevron: {\n    // No explicit margin needed here if using flexbox correctly in valueContainer\n  },\n  childrenText: {\n    fontSize: 16,\n    color: colors.textSecondary,\n  }\n});\n\nexport default SettingsItem;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/StatDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":46,"column":70,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":46,"endColumn":88},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":76,"column":46,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":76,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Modal, View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport StatMiniCharts from './StatMiniCharts';\n\nexport type StatDetails = {\n  key: string;\n  title: string;\n  icon?: string; // emoji or Ionicon name\n  value: string;\n  description?: string;\n  bullets?: string[];\n  color?: string;\n  breakdownByCity?: Array<{ label: string; value: number }>;\n  trend?: number[]; // last N periods\n};\n\ninterface StatDetailsModalProps {\n  visible: boolean;\n  onClose: () => void;\n  details: StatDetails | null;\n}\n\nconst StatDetailsModal: React.FC<StatDetailsModalProps> = ({ visible, onClose, details }) => {\n  if (!details) return null;\n\n  const isEmoji = details.icon && /\\p{Emoji}/u.test(details.icon);\n\n  return (\n    <Modal visible={visible} transparent animationType=\"slide\" onRequestClose={onClose}>\n      <View style={styles.overlay}>\n        <View style={styles.card}>\n          <View style={styles.header}>\n            <View style={styles.titleRow}>\n              {details.icon ? (\n                isEmoji ? (\n                  <Text style={styles.emoji}>{details.icon}</Text>\n                ) : (\n                  <Ionicons name={details.icon as any} size={24} color={details.color || colors.info} />\n                )\n              ) : null}\n              <Text style={styles.title}>{details.title}</Text>\n            </View>\n            <TouchableOpacity onPress={onClose} accessibilityLabel={(require('i18next') as any).t('common:close')}>\n              <Ionicons name=\"close\" size={24} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n            <Text style={styles.value}>{details.value}</Text>\n            {details.description ? (\n              <Text style={styles.description}>{details.description}</Text>\n            ) : null}\n\n            {(details.breakdownByCity || details.trend) ? (\n              <View style={{ marginTop: 12 }}>\n                <StatMiniCharts breakdown={details.breakdownByCity} trend={details.trend} accentColor={details.color || colors.info} />\n              </View>\n            ) : null}\n\n            {details.bullets && details.bullets.length > 0 ? (\n              <View style={styles.list}>\n                {details.bullets.map((b, idx) => (\n                  <View key={idx} style={styles.listItem}>\n                    <View style={styles.dot} />\n                    <Text style={styles.listText}>{b}</Text>\n                  </View>\n                ))}\n              </View>\n            ) : null}\n          </ScrollView>\n\n          <TouchableOpacity style={styles.closeButton} onPress={onClose}>\n            <Text style={styles.closeText}>{(require('i18next') as any).t('common:close')}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.35)',\n    justifyContent: 'flex-end',\n  },\n  card: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 18,\n    borderTopRightRadius: 18,\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  header: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  titleRow: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 8,\n  },\n  emoji: {\n    fontSize: FontSizes.heading2,\n  },\n  title: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  content: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  value: {\n    fontSize: FontSizes.heading1,\n    color: colors.legacyDarkBlue,\n    fontWeight: '800',\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  description: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: 22,\n    textAlign: 'right',\n  },\n  list: {\n    marginTop: 12,\n    gap: 8,\n  },\n  listItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n  },\n  dot: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n    backgroundColor: colors.info,\n    marginLeft: 8,\n    marginRight: 4,\n  },\n  listText: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  closeButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: 12,\n    alignItems: 'center',\n  },\n  closeText: {\n    color: colors.buttonText,\n    fontWeight: '700',\n    fontSize: FontSizes.body,\n  },\n});\n\nexport default StatDetailsModal;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/StatMiniCharts.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":20,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":20,"endColumn":58},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":37,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":37,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n\ninterface StatMiniChartsProps {\n  breakdown?: Array<{ label: string; value: number }>;\n  trend?: number[];\n  accentColor?: string;\n}\n\nconst StatMiniCharts: React.FC<StatMiniChartsProps> = ({ breakdown, trend, accentColor = colors.info }) => {\n  const maxBreakdown = breakdown && breakdown.length > 0 ? Math.max(...breakdown.map(b => b.value)) : 0;\n  const maxTrend = trend && trend.length > 0 ? Math.max(...trend) : 0;\n\n  return (\n    <View style={styles.container}>\n      {breakdown && breakdown.length > 0 && (\n        <View style={styles.card}>\n          <Text style={styles.title}>{(require('i18next') as any).t('home:statsDetails.bullets.byCities')}</Text>\n          <View style={styles.breakdownList}>\n            {breakdown.slice(0, 5).map((b, idx) => (\n              <View key={idx} style={styles.row}>\n                <Text style={styles.label}>{b.label}</Text>\n                <View style={styles.barTrack}>\n                  <View style={[styles.barFill, { width: `${maxBreakdown ? (b.value / maxBreakdown) * 100 : 0}%`, backgroundColor: accentColor }]} />\n                </View>\n                <Text style={styles.value}>{b.value}</Text>\n              </View>\n            ))}\n          </View>\n        </View>\n      )}\n\n      {trend && trend.length > 0 && (\n        <View style={styles.card}>\n          <Text style={styles.title}>{(require('i18next') as any).t('home:statsDetails.bullets.trends')}</Text>\n          <View style={styles.trendRow}>\n            {trend.map((v, idx) => (\n              <View key={idx} style={styles.trendCol}>\n                <View style={[styles.trendBar, { height: Math.max(6, maxTrend ? (v / maxTrend) * 60 : 0), backgroundColor: accentColor }]} />\n              </View>\n            ))}\n          </View>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    gap: 10,\n  },\n  card: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  breakdownList: {\n    gap: 8,\n  },\n  row: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 8,\n  },\n  label: {\n    width: 80,\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  barTrack: {\n    flex: 1,\n    height: 8,\n    backgroundColor: colors.border,\n    borderRadius: 4,\n    overflow: 'hidden',\n  },\n  barFill: {\n    height: '100%',\n    borderRadius: 4,\n  },\n  value: {\n    width: 40,\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'left',\n  },\n  trendRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    gap: 6,\n    height: 70,\n  },\n  trendCol: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  trendBar: {\n    width: 8,\n    borderTopLeftRadius: 4,\n    borderTopRightRadius: 4,\n  },\n});\n\nexport default StatMiniCharts;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TaskHoursModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TaskItem.tsx","messages":[{"ruleId":"react/display-name","severity":1,"message":"Component definition is missing display name","line":18,"column":43,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":208,"endColumn":3},{"ruleId":"react/prop-types","severity":1,"message":"'task' is missing in props validation","line":19,"column":11,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":15},{"ruleId":"react/prop-types","severity":1,"message":"'onToggleComplete' is missing in props validation","line":19,"column":17,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":33},{"ruleId":"react/prop-types","severity":1,"message":"'onEditTask' is missing in props validation","line":19,"column":35,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":45},{"ruleId":"react/prop-types","severity":1,"message":"'onDeleteTask' is missing in props validation","line":19,"column":47,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":59},{"ruleId":"react/prop-types","severity":1,"message":"'task.title' is missing in props validation","line":70,"column":53,"nodeType":"Identifier","messageId":"missingPropType","endLine":70,"endColumn":58},{"ruleId":"react/prop-types","severity":1,"message":"'task.id' is missing in props validation","line":76,"column":44,"nodeType":"Identifier","messageId":"missingPropType","endLine":76,"endColumn":46},{"ruleId":"react/prop-types","severity":1,"message":"'task.id' is missing in props validation","line":87,"column":27,"nodeType":"Identifier","messageId":"missingPropType","endLine":87,"endColumn":29},{"ruleId":"react/prop-types","severity":1,"message":"'task.id' is missing in props validation","line":88,"column":12,"nodeType":"Identifier","messageId":"missingPropType","endLine":88,"endColumn":14},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":92,"column":38,"nodeType":"Identifier","messageId":"missingPropType","endLine":92,"endColumn":47},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":97,"column":88,"nodeType":"Identifier","messageId":"missingPropType","endLine":97,"endColumn":96},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":106,"column":22,"nodeType":"Identifier","messageId":"missingPropType","endLine":106,"endColumn":31},{"ruleId":"react/prop-types","severity":1,"message":"'task.title' is missing in props validation","line":110,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":110,"endColumn":26},{"ruleId":"react/prop-types","severity":1,"message":"'task.description' is missing in props validation","line":112,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":112,"endColumn":30},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":114,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":114,"endColumn":59},{"ruleId":"react/prop-types","severity":1,"message":"'task.description' is missing in props validation","line":117,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":117,"endColumn":34},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":123,"column":88,"nodeType":"Identifier","messageId":"missingPropType","endLine":123,"endColumn":96},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":124,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":124,"endColumn":58},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":124,"column":107,"nodeType":"Identifier","messageId":"missingPropType","endLine":124,"endColumn":115},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":125,"column":79,"nodeType":"Identifier","messageId":"missingPropType","endLine":125,"endColumn":87},{"ruleId":"react/prop-types","severity":1,"message":"'task.priority' is missing in props validation","line":126,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":126,"endColumn":29},{"ruleId":"react/prop-types","severity":1,"message":"'task.dueDate' is missing in props validation","line":133,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":133,"endColumn":24},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":136,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":136,"endColumn":60},{"ruleId":"react/prop-types","severity":1,"message":"'task.dueDate' is missing in props validation","line":137,"column":34,"nodeType":"Identifier","messageId":"missingPropType","endLine":137,"endColumn":41},{"ruleId":"react/prop-types","severity":1,"message":"'task.category' is missing in props validation","line":142,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":25},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":145,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":145,"endColumn":60},{"ruleId":"react/prop-types","severity":1,"message":"'task.category' is missing in props validation","line":146,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":146,"endColumn":31},{"ruleId":"react/prop-types","severity":1,"message":"'task.location' is missing in props validation","line":151,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":151,"endColumn":25},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":154,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":154,"endColumn":60},{"ruleId":"react/prop-types","severity":1,"message":"'task.location' is missing in props validation","line":155,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":155,"endColumn":31},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags' is missing in props validation","line":162,"column":15,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":19},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags' is missing in props validation","line":162,"column":28,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":32},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags.length' is missing in props validation","line":162,"column":33,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":39},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags' is missing in props validation","line":164,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":164,"endColumn":23},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags.slice' is missing in props validation","line":164,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":164,"endColumn":29},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags' is missing in props validation","line":169,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":169,"endColumn":23},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags.length' is missing in props validation","line":169,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":169,"endColumn":30},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags' is missing in props validation","line":171,"column":53,"nodeType":"Identifier","messageId":"missingPropType","endLine":171,"endColumn":57},{"ruleId":"react/prop-types","severity":1,"message":"'task.tags.length' is missing in props validation","line":171,"column":58,"nodeType":"Identifier","messageId":"missingPropType","endLine":171,"endColumn":64},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":182,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":182,"endColumn":32},{"ruleId":"react/prop-types","severity":1,"message":"'task.completed' is missing in props validation","line":185,"column":28,"nodeType":"Identifier","messageId":"missingPropType","endLine":185,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":41,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// TaskItem.tsx\n'use strict';\n\nimport React, { useCallback, memo } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Task } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n\ninterface TaskItemProps {\n  task: Task;\n  onToggleComplete: (id: string) => void;\n  onEditTask: (task: Task) => void;\n  onDeleteTask: (id: string) => void;\n}\n\nconst TaskItem: React.FC<TaskItemProps> = memo((props) => {\n  const { task, onToggleComplete, onEditTask, onDeleteTask } = props;\n\n  const getPriorityColor = useCallback((priority: Task['priority']): string => {\n    switch (priority) {\n      case 'High':\n        return colors.error;\n      case 'Medium':\n        return colors.warning;\n      case 'Low':\n        return colors.success;\n      default:\n        return colors.textSecondary;\n    }\n  }, []);\n\n  const getPriorityIcon = useCallback((priority: Task['priority']): string => {\n    switch (priority) {\n      case 'High':\n        return 'alert-circle';\n      case 'Medium':\n        return 'time';\n      case 'Low':\n        return 'checkmark-circle';\n      default:\n        return 'help-circle';\n    }\n  }, []);\n\n  const getStatusColor = useCallback((completed: boolean): string => {\n    return completed ? colors.success : colors.textSecondary;\n  }, []);\n\n  const formatDate = useCallback((date: Date): string => {\n    const now = new Date();\n    const diffTime = date.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays < 0) {\n      return `××™×—×•×¨ ×©×œ ${Math.abs(diffDays)} ×™××™×`;\n    } else if (diffDays === 0) {\n      return '×”×™×•×';\n    } else if (diffDays === 1) {\n      return '××—×¨';\n    } else {\n      return `×‘×¢×•×“ ${diffDays} ×™××™×`;\n    }\n  }, []);\n\n  const handleDeletePress = useCallback(() => {\n    Alert.alert(\n      '××—×™×§×ª ××©×™××”',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”××©×™××” \"${task.title}\"?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { \n          text: '××—×§', \n          style: 'destructive',\n          onPress: () => onDeleteTask(task.id)\n        }\n      ]\n    );\n  }, [task, onDeleteTask]);\n\n  const handleEditPress = useCallback(() => {\n    onEditTask(task);\n  }, [task, onEditTask]);\n\n  const handleTogglePress = useCallback(() => {\n    onToggleComplete(task.id);\n  }, [task.id, onToggleComplete]);\n\n  return (\n    <TouchableOpacity \n      style={[styles.container, task.completed && styles.completedContainer]}\n      onPress={handleEditPress}\n      activeOpacity={0.7}\n    >\n      {/* Priority Indicator */}\n      <View style={[styles.priorityIndicator, { backgroundColor: getPriorityColor(task.priority) }]} />\n      \n      {/* Main Content */}\n      <View style={styles.contentContainer}>\n        <View style={styles.headerRow}>\n          <View style={styles.titleContainer}>\n            <Text\n              style={[\n                styles.title,\n                task.completed && styles.completedTitle,\n              ]}\n              numberOfLines={2}\n            >\n              {task.title}\n            </Text>\n            {task.description && (\n              <Text \n                style={[styles.description, task.completed && styles.completedText]}\n                numberOfLines={1}\n              >\n                {task.description}\n              </Text>\n            )}\n          </View>\n          \n          {/* Priority Badge */}\n          <View style={[styles.priorityBadge, { backgroundColor: getPriorityColor(task.priority) + '20' }]}>\n            <Ionicons name={getPriorityIcon(task.priority) as any} size={12} color={getPriorityColor(task.priority)} />\n            <Text style={[styles.priorityText, { color: getPriorityColor(task.priority) }]}>\n              {task.priority}\n            </Text>\n          </View>\n        </View>\n\n        {/* Meta Information */}\n        <View style={styles.metaContainer}>\n          {task.dueDate && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"calendar-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {formatDate(task.dueDate)}\n              </Text>\n            </View>\n          )}\n          \n          {task.category && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"folder-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {task.category}\n              </Text>\n            </View>\n          )}\n\n          {task.location && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"location-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {task.location}\n              </Text>\n            </View>\n          )}\n        </View>\n\n        {/* Tags */}\n        {task.tags && task.tags.length > 0 && (\n          <View style={styles.tagsContainer}>\n            {task.tags.slice(0, 3).map((tag, index) => (\n              <View key={index} style={styles.tag}>\n                <Text style={styles.tagText}>{tag}</Text>\n              </View>\n            ))}\n            {task.tags.length > 3 && (\n              <View style={styles.tag}>\n                <Text style={styles.tagText}>+{task.tags.length - 3}</Text>\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n\n      {/* Actions */}\n      <View style={styles.actionsContainer}>\n        {/* Toggle Switch */}\n        <Switch\n          value={task.completed}\n          onValueChange={handleTogglePress}\n          trackColor={{ false: colors.border, true: getStatusColor(true) + '40' }}\n          thumbColor={task.completed ? getStatusColor(true) : colors.white}\n          ios_backgroundColor={colors.border}\n        />\n        \n        {/* Action Buttons */}\n        <View style={styles.actionButtons}>\n          <TouchableOpacity \n            onPress={handleEditPress} \n            style={[styles.actionButton, styles.editButton]}\n          >\n            <Ionicons name=\"create-outline\" size={18} color={colors.secondary} />\n          </TouchableOpacity>\n          \n          <TouchableOpacity \n            onPress={handleDeletePress} \n            style={[styles.actionButton, styles.deleteButton]}\n          >\n            <Ionicons name=\"trash-outline\" size={18} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n});\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    backgroundColor: colors.background,\n    borderRadius: 12,\n    marginBottom: 12,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden',\n  },\n  completedContainer: {\n    opacity: 0.6,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  priorityIndicator: {\n    width: 4,\n    height: '100%',\n  },\n  contentContainer: {\n    flex: 1,\n    padding: 15,\n  },\n  headerRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  titleContainer: {\n    flex: 1,\n    marginRight: 10,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    lineHeight: 20,\n  },\n  completedTitle: {\n    textDecorationLine: 'line-through',\n    color: colors.textSecondary,\n  },\n  description: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: 18,\n  },\n  completedText: {\n    color: colors.textSecondary,\n  },\n  priorityBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n    marginLeft: 8,\n  },\n  priorityText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  metaContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 8,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 15,\n    marginBottom: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  tagsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  tag: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 10,\n    marginRight: 6,\n    marginBottom: 4,\n  },\n  tagText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  actionsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 15,\n    paddingLeft: 0,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    marginLeft: 15,\n  },\n  actionButton: {\n    padding: 8,\n    borderRadius: 8,\n    marginLeft: 8,\n  },\n  editButton: {\n    backgroundColor: colors.secondary + '10',\n  },\n  deleteButton: {\n    backgroundColor: colors.error + '10',\n  },\n});\n\nexport default TaskItem; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TimeInput.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/components/TimeInput.tsx:44:5\n  42 |\n  43 |   useEffect(() => {\n> 44 |     setTime(value || null);\n     |     ^^^^^^^ Avoid calling setState() directly within an effect\n  45 |   }, [value]);\n  46 |\n  47 |   const handleChange = (","line":44,"column":5,"nodeType":null,"endLine":44,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/TimeInput.tsx\nimport React, { useEffect, useState } from \"react\";\nimport {\n  View,\n  Text,\n  Platform,\n  TouchableOpacity,\n  StyleSheet,\n} from \"react-native\";\nimport DateTimePicker, {\n  DateTimePickerEvent,\n} from \"@react-native-community/datetimepicker\";\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\n\n// 1. Define Props Interface\ninterface TimeInputProps {\n  value?: Date | null;\n  onChange: (date: Date | null) => void;\n  label?: string;\n  placeholder?: string;\n}\n\n// Format time to HH:MM string (locale-agnostic)\nconst formatTime = (date: Date): string =>\n  date.toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    hour12: false,\n  });\n\n// 2. Component\nexport default function TimeInput({\n  value,\n  onChange,\n  label,\n  placeholder,\n}: TimeInputProps) {\n  const { t } = useTranslation(['common']);\n  const [time, setTime] = useState<Date | null>(value || null);\n  const [showPicker, setShowPicker] = useState(false);\n\n  useEffect(() => {\n    setTime(value || null);\n  }, [value]);\n\n  const handleChange = (\n    event: DateTimePickerEvent,\n    selectedDate?: Date\n  ): void => {\n    setShowPicker(false);\n    if (selectedDate) {\n      setTime(selectedDate);\n      onChange(selectedDate);\n    } else {\n      setTime(null);\n      onChange(null);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {label && <Text style={styles.label}>{label}</Text>}\n\n      {Platform.OS === \"web\" ? (\n        <input\n          type=\"time\"\n          value={time ? formatTime(time) : \"\"}\n          onChange={(e) => {\n            const text = e.target.value; // \"HH:MM\"\n            if (text === \"\") {\n              setTime(null);\n              onChange(null);\n            } else {\n              const [h, m] = text.split(\":\").map(Number);\n              if (!isNaN(h) && !isNaN(m)) {\n                const updated = time ? new Date(time) : new Date();\n                updated.setHours(h, m, 0, 0);\n                setTime(updated);\n                onChange(updated);\n              }\n            }\n          }}\n          placeholder={placeholder || (t('common:time.selectTime') as string)}\n          style={{\n            ...styles.input,\n            fontSize: 12,\n            ...(Platform.OS === 'web' ? { direction: \"rtl\" } : { writingDirection: \"rtl\" }),\n            appearance: 'auto',\n            WebkitAppearance: \"none\",\n            MozAppearance: \"none\",\n            borderRadius: 6,\n          }}\n        />\n      ) : (\n        <>\n          <TouchableOpacity\n            onPress={() => setShowPicker(true)}\n            style={styles.input}\n          >\n            <Text style={time ? styles.selectedTimeText : styles.placeholderText}>\n              {time ? formatTime(time) : (placeholder || (t('common:time.selectTime') as string))}\n            </Text>\n          </TouchableOpacity>\n          {showPicker && (\n            <DateTimePicker\n              mode=\"time\"\n              display=\"default\"\n              value={time || new Date()}\n              onChange={handleChange}\n              is24Hour={true}\n            />\n          )}\n        </>\n      )}\n    </View>\n  );\n}\n\n// 3. Styles\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 10,\n  },\n  label: {\n    marginBottom: 4,\n    fontSize: 14,\n    fontWeight: \"bold\",\n    textAlign: \"right\",\n  },\n  input: {\n    minWidth: 80,\n    paddingVertical: 6,\n    paddingHorizontal: 10,\n    borderWidth: 1,\n    borderRadius: 6,\n    borderColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  selectedTimeText: {\n    color: colors.black,\n    fontSize: 18,\n  },\n  placeholderText: {\n    color: colors.textTertiary,\n    fontSize: 14,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TimePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:30:22\n  28 |   onHide,\n  29 | }) => {\n> 30 |   const translateY = useRef(new Animated.Value(100)).current;\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  31 |   const opacity = useRef(new Animated.Value(0)).current;\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |","line":30,"column":22,"nodeType":null,"endLine":30,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:30:22\n  28 |   onHide,\n  29 | }) => {\n> 30 |   const translateY = useRef(new Animated.Value(100)).current;\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  31 |   const opacity = useRef(new Animated.Value(0)).current;\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |","line":30,"column":22,"nodeType":null,"endLine":30,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:30:22\n  28 |   onHide,\n  29 | }) => {\n> 30 |   const translateY = useRef(new Animated.Value(100)).current;\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  31 |   const opacity = useRef(new Animated.Value(0)).current;\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |","line":30,"column":22,"nodeType":null,"endLine":30,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:30:22\n  28 |   onHide,\n  29 | }) => {\n> 30 |   const translateY = useRef(new Animated.Value(100)).current;\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  31 |   const opacity = useRef(new Animated.Value(0)).current;\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |","line":30,"column":22,"nodeType":null,"endLine":30,"endColumn":61},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:31:19\n  29 | }) => {\n  30 |   const translateY = useRef(new Animated.Value(100)).current;\n> 31 |   const opacity = useRef(new Animated.Value(0)).current;\n     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |\n  34 |   useEffect(() => {","line":31,"column":19,"nodeType":null,"endLine":31,"endColumn":56},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:31:19\n  29 | }) => {\n  30 |   const translateY = useRef(new Animated.Value(100)).current;\n> 31 |   const opacity = useRef(new Animated.Value(0)).current;\n     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |\n  34 |   useEffect(() => {","line":31,"column":19,"nodeType":null,"endLine":31,"endColumn":56},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:31:19\n  29 | }) => {\n  30 |   const translateY = useRef(new Animated.Value(100)).current;\n> 31 |   const opacity = useRef(new Animated.Value(0)).current;\n     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |\n  34 |   useEffect(() => {","line":31,"column":19,"nodeType":null,"endLine":31,"endColumn":56},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:31:19\n  29 | }) => {\n  30 |   const translateY = useRef(new Animated.Value(100)).current;\n> 31 |   const opacity = useRef(new Animated.Value(0)).current;\n     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   const [shouldRender, setShouldRender] = React.useState(visible);\n  33 |\n  34 |   useEffect(() => {","line":31,"column":19,"nodeType":null,"endLine":31,"endColumn":56},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx:88:6\n  86 |       });\n  87 |     }\n> 88 |   }, [visible, duration, translateY, opacity, onHide]);\n     |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  89 |\n  90 |   if (!shouldRender) {\n  91 |     return null;","line":88,"column":6,"nodeType":null,"endLine":88,"endColumn":54}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Animated,\n  Dimensions,\n  Platform,\n} from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n\nconst { width } = Dimensions.get('window');\n\ninterface ToastProps {\n  visible: boolean;\n  message: string;\n  type?: 'success' | 'error' | 'info';\n  duration?: number;\n  onHide?: () => void;\n}\n\nconst Toast: React.FC<ToastProps> = ({\n  visible,\n  message,\n  type = 'info',\n  duration = 2000,\n  onHide,\n}) => {\n  const translateY = useRef(new Animated.Value(100)).current;\n  const opacity = useRef(new Animated.Value(0)).current;\n  const [shouldRender, setShouldRender] = React.useState(visible);\n\n  useEffect(() => {\n    if (visible) {\n      setShouldRender(true);\n      // Show animation\n      Animated.parallel([\n        Animated.timing(translateY, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacity, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n      ]).start();\n\n      // Hide after duration\n      const timer = setTimeout(() => {\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: 100,\n            duration: 300,\n            useNativeDriver: false,\n          }),\n          Animated.timing(opacity, {\n            toValue: 0,\n            duration: 300,\n            useNativeDriver: false,\n          }),\n        ]).start(() => {\n          setShouldRender(false);\n          onHide?.();\n        });\n      }, duration);\n\n      return () => clearTimeout(timer);\n    } else {\n      // Hide immediately\n      Animated.parallel([\n        Animated.timing(translateY, {\n          toValue: 100,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacity, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n      ]).start(() => {\n        setShouldRender(false);\n      });\n    }\n  }, [visible, duration, translateY, opacity, onHide]);\n\n  if (!shouldRender) {\n    return null;\n  }\n\n  const getBackgroundColor = () => {\n    switch (type) {\n      case 'success':\n        return colors.success;\n      case 'error':\n        return colors.error;\n      default:\n        return colors.primary;\n    }\n  };\n\n  return (\n    <Animated.View\n      style={[\n        styles.container,\n        {\n          transform: [{ translateY }],\n          opacity,\n        },\n      ]}\n      pointerEvents=\"none\"\n    >\n      <View style={[styles.toast, { backgroundColor: getBackgroundColor() }]}>\n        <Text style={styles.message}>{message}</Text>\n      </View>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    bottom: Platform.OS === 'ios' ? 120 : 100, // Increased to be above tab bar\n    left: 0,\n    right: 0,\n    alignItems: 'center',\n    zIndex: 10000,\n    elevation: 10000,\n    pointerEvents: 'none',\n  },\n  toast: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 8,\n    maxWidth: width - 40,\n    minWidth: 200,\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...Platform.select({\n      ios: {\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 8,\n      },\n    }),\n  },\n  message: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n});\n\nexport default Toast;\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/UserSelector.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'query'. Either include it or remove the dependency array.","line":57,"column":8,"nodeType":"ArrayExpression","endLine":57,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [useModal, modalVisible, query]","fix":{"range":[2068,2092],"text":"[useModal, modalVisible, query]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, FlatList, Image, ActivityIndicator, StyleSheet, Modal, TouchableWithoutFeedback, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport apiService from '../utils/apiService';\n\ninterface User {\n    id: string;\n    name: string;\n    email: string;\n    avatar_url?: string;\n    roles?: string[];\n}\n\ninterface UserSelectorProps {\n    selectedUsers: User[];\n    onSelect: (user: User) => void;\n    onRemove: (userId: string) => void;\n    singleSelection?: boolean;\n    useModal?: boolean;\n}\n\nexport default function UserSelector({ selectedUsers, onSelect, onRemove, singleSelection = false, useModal = true }: UserSelectorProps) {\n\n    const [query, setQuery] = useState('');\n    const [results, setResults] = useState<User[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [modalVisible, setModalVisible] = useState(false);\n    const [defaultUsers, setDefaultUsers] = useState<User[]>([]);\n\n    // Fetch default users on mount\n    useEffect(() => {\n        const fetchDefaultUsers = async () => {\n            setLoading(true);\n            try {\n                const res = await apiService.getUsers({ limit: 50 });\n                if (res.success && res.data) {\n                    setDefaultUsers(res.data);\n                    // If no query, show defaults immediately\n                    if (!query) {\n                        setResults(res.data);\n                    }\n                }\n            } catch (err) {\n                console.error('Failed to fetch default users', err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        // Fetch if we open modal, or if inline and it's first load\n        if ((useModal && modalVisible) || !useModal) {\n            // Only fetch if we haven't already (or maybe refresh?)\n            // For now, let's fetch always to ensure fresh data\n            fetchDefaultUsers();\n        }\n    }, [useModal, modalVisible]);\n\n    useEffect(() => {\n        if (!query || query.length < 2) {\n            // If query is empty, show default users\n            setResults(defaultUsers);\n            return;\n        }\n\n        const timer = setTimeout(async () => {\n            setLoading(true);\n            try {\n                const res = await apiService.searchUsers(query);\n                if (res.success && res.data) {\n                    setResults(res.data);\n                }\n            } catch (err) {\n                console.error('Search failed', err);\n            } finally {\n                setLoading(false);\n            }\n        }, 500);\n\n        return () => clearTimeout(timer);\n    }, [query, defaultUsers]);\n\n    // Handle initial selection in modal mode: clear query for fresh search next time\n    const handleSelect = (user: User) => {\n        onSelect(user);\n        if (useModal) {\n            setModalVisible(false);\n            setQuery('');\n            setResults(defaultUsers);\n        } else {\n            setQuery('');\n            setResults(defaultUsers);\n        }\n    };\n\n    const renderSearchInput = () => (\n        <View style={styles.searchBox}>\n            <Ionicons name=\"search\" size={20} color={colors.textSecondary} />\n            <TextInput\n                style={styles.input}\n                placeholder=\"×—×¤×© ××©×ª××©...\"\n                value={query}\n                onChangeText={setQuery}\n                placeholderTextColor={colors.textSecondary}\n                autoFocus={useModal} // Auto focus when modal opens\n            />\n            {loading && <ActivityIndicator size=\"small\" color={colors.primary} />}\n        </View>\n    );\n\n    const renderResultsList = () => (\n        <View style={[styles.resultsList, useModal && styles.resultsListModal]}>\n            <FlatList\n                data={results}\n                keyExtractor={(item) => item.id}\n                keyboardShouldPersistTaps=\"handled\"\n                renderItem={({ item: user }) => {\n                    const isSelected = selectedUsers.some(u => u.id === user.id);\n                    if (isSelected) return null;\n\n                    return (\n                        <TouchableOpacity\n                            style={styles.resultItem}\n                            onPress={() => handleSelect(user)}\n                        >\n                            <Image\n                                source={{ uri: user.avatar_url || `https://ui-avatars.com/api/?name=${user.name}` }}\n                                style={styles.resultAvatar}\n                            />\n                            <View style={{ flex: 1 }}>\n                                <Text style={styles.resultName}>{user.name}</Text>\n                                <Text style={styles.resultEmail}>{user.email}</Text>\n                            </View>\n                            <Ionicons name=\"add-circle-outline\" size={24} color={colors.primary} />\n                        </TouchableOpacity>\n                    );\n                }}\n                ListEmptyComponent={\n                    <View style={{ alignItems: 'center', marginTop: 40, opacity: 0.7 }}>\n                        {loading ? (\n                            <ActivityIndicator size=\"large\" color={colors.primary} />\n                        ) : (\n                            <>\n                                <Ionicons name={query.length < 2 ? \"people-outline\" : \"warning-outline\"} size={40} color={colors.textSecondary} style={{ marginBottom: 8 }} />\n                                <Text style={styles.emptyText}>\n                                    {query.length < 2 ? '××™×Ÿ ××©×ª××©×™× ×œ×”×¦×’×”' : '×œ× × ××¦××• ×ª×•×¦××•×ª'}\n                                </Text>\n                            </>\n                        )}\n                    </View>\n                }\n            />\n        </View>\n    );\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.label}>×”×§×¦××” ×œ××©×ª××©×™×:</Text>\n\n            {/* Selected Users Chips */}\n            <View style={styles.chipsContainer}>\n                {selectedUsers.map(user => (\n                    <View key={user.id} style={styles.chip}>\n                        <Image\n                            source={{ uri: user.avatar_url || `https://ui-avatars.com/api/?name=${user.name}` }}\n                            style={styles.chipAvatar}\n                        />\n                        <Text style={styles.chipText}>{user.name}</Text>\n                        <TouchableOpacity onPress={() => onRemove(user.id)}>\n                            <Ionicons name=\"close-circle\" size={18} color={colors.textSecondary} />\n                        </TouchableOpacity>\n                    </View>\n                ))}\n            </View>\n\n            {/* Modal Trigger or Inline Search */}\n            {(!singleSelection || selectedUsers.length === 0) && (\n                useModal ? (\n                    <>\n                        <TouchableOpacity\n                            style={styles.openModalButton}\n                            onPress={() => setModalVisible(true)}\n                        >\n                            <Ionicons name=\"person-add-outline\" size={20} color={colors.textSecondary} />\n                            <Text style={styles.openModalText}>×œ×—×¥ ×œ×—×™×¤×•×© ×•×”×•×¡×¤×ª ××©×ª××©×™×...</Text>\n                        </TouchableOpacity>\n\n                        <Modal\n                            visible={modalVisible}\n                            transparent\n                            animationType=\"fade\"\n                            onRequestClose={() => setModalVisible(false)}\n                        >\n                            <View style={styles.modalBackdrop}>\n                                <TouchableWithoutFeedback onPress={() => setModalVisible(false)}>\n                                    <View style={styles.modalOverlay} />\n                                </TouchableWithoutFeedback>\n\n                                <View style={styles.modalContent}>\n                                    <View style={styles.modalHeader}>\n                                        <Text style={styles.modalTitle}>×‘×—×™×¨×ª ××©×ª××©</Text>\n                                        <TouchableOpacity onPress={() => setModalVisible(false)}>\n                                            <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                                        </TouchableOpacity>\n                                    </View>\n\n                                    {renderSearchInput()}\n                                    {renderResultsList()}\n                                </View>\n                            </View>\n                        </Modal>\n                    </>\n                ) : (\n                    <>\n                        {renderSearchInput()}\n                        {results.length > 0 && renderResultsList()}\n                    </>\n                )\n            )}\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        marginBottom: 16,\n        zIndex: 100,\n    },\n    label: {\n        fontSize: 14,\n        color: colors.textSecondary,\n        marginBottom: 8,\n        textAlign: 'right',\n    },\n    chipsContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        gap: 8,\n        marginBottom: 8,\n        justifyContent: 'flex-end',\n    },\n    chip: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 20,\n        padding: 4,\n        paddingRight: 12,\n        borderWidth: 1,\n        borderColor: colors.border,\n        gap: 6,\n    },\n    chipAvatar: {\n        width: 24,\n        height: 24,\n        borderRadius: 12,\n    },\n    chipText: {\n        fontSize: 14,\n        color: colors.textPrimary,\n    },\n    // Inline search styles\n    searchBox: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        paddingHorizontal: 12,\n        height: 44,\n        marginBottom: 8,\n    },\n    input: {\n        flex: 1,\n        textAlign: 'right',\n        marginRight: 8,\n        color: colors.textPrimary,\n        height: '100%',\n    },\n    resultsList: {\n        backgroundColor: colors.background,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        maxHeight: 200,\n        overflow: 'hidden',\n    },\n    resultsListModal: {\n        borderWidth: 0,\n        flex: 1,\n        maxHeight: undefined, // Let it fill space in modal\n        marginTop: 8,\n    },\n    resultItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        gap: 12,\n    },\n    resultAvatar: {\n        width: 40,\n        height: 40,\n        borderRadius: 20,\n    },\n    resultName: {\n        fontSize: 16,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    resultEmail: {\n        fontSize: 13,\n        color: colors.textSecondary,\n        textAlign: 'left',\n    },\n    emptyText: {\n        textAlign: 'center',\n        padding: 20,\n        color: colors.textSecondary,\n    },\n\n    // Modal Styles\n    openModalButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        paddingHorizontal: 12,\n        height: 44,\n        justifyContent: 'flex-end',\n        gap: 8,\n    },\n    openModalText: {\n        color: colors.textSecondary,\n        fontSize: 14,\n    },\n    modalBackdrop: {\n        flex: 1,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingTop: 50, // Avoid status bar somewhat\n        paddingHorizontal: 20,\n        paddingBottom: 20,\n    },\n    modalOverlay: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    modalContent: {\n        backgroundColor: colors.background,\n        width: '100%',\n        height: '80%', // Takes most of screen but not all\n        borderRadius: 16,\n        padding: 16,\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 10,\n        elevation: 10,\n    },\n    modalHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 16,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        paddingBottom: 12,\n    },\n    modalTitle: {\n        fontSize: 18,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/VerticalGridSlider.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/components/VerticalGridSlider.tsx:80:21\n  78 |                 style={styles.touchArea}\n  79 |                 pointerEvents=\"auto\"\n> 80 |                 {...panResponder.panHandlers}\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  81 |             >\n  82 |                 {/* Visuals Layer */}\n  83 |                 <View style={styles.visualsContainer} pointerEvents=\"none\">","line":80,"column":21,"nodeType":null,"endLine":80,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\nimport { View, StyleSheet, TouchableOpacity, PanResponder, Platform } from 'react-native';\nimport colors from '../globals/colors';\n\ninterface VerticalGridSliderProps {\n    numColumns: number;\n    onNumColumnsChange: (cols: number) => void;\n    style?: any;\n}\n\nexport default function VerticalGridSlider({\n    numColumns,\n    onNumColumnsChange,\n    style\n}: VerticalGridSliderProps) {\n    const sliderHeight = 160;\n    const stepCount = 5;\n    const stepHeight = sliderHeight / (stepCount - 1); // Height of one interval (40px)\n\n    // Calculate thumb position based on current columns (0-4 index)\n    // 0 -> 0%, 4 -> 100%\n    const thumbPosition = ((numColumns - 1) / 4) * sliderHeight;\n\n    const panResponder = useRef(\n        PanResponder.create({\n            onStartShouldSetPanResponder: () => true,\n            onMoveShouldSetPanResponder: () => true,\n            onPanResponderGrant: (evt, gestureState) => {\n                // When touch starts, we could snap to the touch position immediately\n                const locationY = evt.nativeEvent.locationY;\n                // Adjust for padding (the interaction container starts at top: 10)\n                // Actually, if we put responder on the wrapper, we need to account for it.\n                // Let's simplify: Put responder on a wrapper view that exactly matches the track + padding.\n                handleTouch(locationY - 10);\n            },\n            onPanResponderMove: (evt, gestureState) => {\n                // We use locationY from native event which is relative to the view\n                // This updates as we drag\n                const locationY = evt.nativeEvent.locationY;\n                handleTouch(locationY - 10);\n            },\n            onPanResponderRelease: (evt, gestureState) => {\n                // Already handled in Move\n            }\n        })\n    ).current;\n\n    const handleTouch = (y: number) => {\n        // y is relative to the top of the track (0 to 160)\n\n        // Clamp y to valid range first\n        let clampedY = y;\n        if (clampedY < 0) clampedY = 0;\n        if (clampedY > sliderHeight) clampedY = sliderHeight;\n\n        // Calculate which step we're closest to\n        // We have 5 steps (0, 1, 2, 3, 4) at positions (0, 40, 80, 120, 160)\n        const stepSize = sliderHeight / 4; // 40px per step\n        const rawStep = clampedY / stepSize;\n        const index = Math.round(rawStep);\n\n        const newCols = index + 1;\n\n        // Only update if changed\n        if (newCols !== numColumns) {\n            onNumColumnsChange(newCols);\n        }\n    };\n\n    return (\n        <View\n            style={[styles.columnSliderContainer, style]}\n            collapsable={false}\n            pointerEvents=\"box-none\"\n        >\n            {/* Combined Touch & Visual Area with PanResponder */}\n            <View\n                style={styles.touchArea}\n                pointerEvents=\"auto\"\n                {...panResponder.panHandlers}\n            >\n                {/* Visuals Layer */}\n                <View style={styles.visualsContainer} pointerEvents=\"none\">\n                    {/* Continuous Track Line */}\n                    <View style={styles.columnSliderTrack} />\n\n                    {/* Single Indicator Thumb */}\n                    <View\n                        style={[\n                            styles.columnSliderThumb,\n                            {\n                                top: thumbPosition - 8, // Center thumb\n                            }\n                        ]}\n                    />\n                </View>\n\n                {/* Helper overlay to visualise steps for debugging if needed, currently invisible */}\n                {/* \n                <View style={{...styles.visualsContainer, opacity: 0}} pointerEvents=\"none\">\n                     {[0,1,2,3,4].map(i => (\n                         <View key={i} style={{position:'absolute', top: (i/4)*160 - 2, height:4, width: 10, backgroundColor:'red'}} />\n                     ))}\n                </View>\n                */}\n            </View>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    columnSliderContainer: {\n        position: 'absolute',\n        left: 12,\n        top: 200,\n        zIndex: 999,\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 40,\n        height: 180,\n        ...(Platform.OS === 'android' ? {\n            elevation: 999,\n        } : {}),\n    },\n    touchArea: {\n        width: 40,\n        height: 180, // Full height container\n        alignItems: 'center',\n        paddingTop: 10, // Match visual offset\n    },\n    visualsContainer: {\n        width: '100%',\n        height: 160, // Track height\n        alignItems: 'center',\n    },\n    columnSliderTrack: {\n        width: 2,\n        height: 160,\n        backgroundColor: colors.textSecondary,\n        opacity: 0.3,\n        borderRadius: 1,\n        position: 'absolute',\n        left: 19, // Center in 40px width (40-2)/2 = 19\n    },\n    columnSliderThumb: {\n        position: 'absolute',\n        left: 12, // Center in 40px width (40-16)/2 = 12\n        width: 16,\n        height: 16,\n        borderRadius: 8,\n        backgroundColor: colors.primary,\n        borderWidth: 2,\n        borderColor: colors.white,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.2,\n        shadowRadius: 3,\n        elevation: 4,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/WebModeToggleOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":157,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":157,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// WebModeToggleOverlay.tsx\n// A web-only toggle control to switch between '××¤×œ×™×§×¦×™×”' and '××ª×¨ ×‘×™×ª'. Hidden on native.\n// \n// IMPORTANT CHANGES:\n// - Position changes based on web mode: centered in both 'site' and 'app' modes\n// - In app mode: positioned centered above top bar (higher z-index) and stays persistent across all screens\n// - In site mode: centered at top of screen over landing page content\n// - Seamless switching between site mode (landing page) and app mode (login/home)\n// - Enhanced styling for better visibility and user experience\n// \n// VISIBILITY LOGIC:\n// - Toggle button is HIDDEN for authenticated users (users who created an account)\n// - Toggle button is SHOWN for guest users and non-authenticated users\n// - This provides a cleaner UI for logged-in users who don't need to switch modes\nimport React, { useState, useEffect } from 'react';\nimport { Platform, View, Text, TouchableOpacity, StyleSheet, Image, Dimensions, ScrollView, Modal, I18nManager } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useWebMode } from '../stores/webModeStore';\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\n\nconst MENU_ITEMS = [\n  { id: 'stats', label: '×‘××¡×¤×¨×™×', icon: 'stats-chart-outline' },\n  { id: 'vision', label: '×”×—×–×•×Ÿ', icon: 'bulb-outline' },\n  { id: 'problems', label: '×”×‘×¢×™×•×ª', icon: 'alert-circle-outline' },\n  { id: 'features', label: '×ª×›×•× ×•×ª', icon: 'apps-outline' },\n  { id: 'about', label: '××•×“×•×ª', icon: 'information-circle-outline' },\n  { id: 'how', label: '××™×š ×–×” ×¢×•×‘×“', icon: 'help-circle-outline' },\n  { id: 'who', label: '×œ××™ ×–×” ××ª××™×', icon: 'people-outline' },\n  { id: 'values', label: '×¢×¨×›×™×', icon: 'heart-outline' },\n  { id: 'roadmap', label: '××¤×ª ×“×¨×›×™×', icon: 'map-outline' },\n  { id: 'contact', label: '×™×¦×™×¨×ª ×§×©×¨', icon: 'mail-outline' },\n  { id: 'faq', label: '×©××œ×•×ª × ×¤×•×¦×•×ª', icon: 'chatbubble-ellipses-outline' },\n];\n\nconst WebModeToggleOverlay: React.FC = () => {\n  const { t } = useTranslation('webOverlay'); // Use specific namespace\n  const { mode, setMode } = useWebMode();\n  const { isAuthenticated, isGuestMode, selectedUser, isAdmin } = useUser();\n  const navigation: any = useNavigation<NavigationProp<ParamListBase>>();\n\n  const [windowWidth, setWindowWidth] = useState(Dimensions.get('window').width);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const isMobile = windowWidth < 1024; // Desktop breakpoint\n\n  useEffect(() => {\n    const updateWidth = () => setWindowWidth(Dimensions.get('window').width);\n    const subscription = Dimensions.addEventListener('change', updateWidth);\n    return () => subscription.remove();\n  }, []);\n\n  if (Platform.OS !== 'web') return null as any;\n\n  // Hide top bar if user is authenticated (not guest mode) - standard app user\n  if (isAuthenticated && !isGuestMode && selectedUser) {\n    return null as any;\n  }\n\n  const handleToggle = async () => {\n    const newMode: 'app' | 'site' = mode === 'site' ? 'app' : 'site';\n    setMode(newMode);\n\n    let targetRoute: string;\n    if (newMode === 'app') {\n      if (isAuthenticated || isGuestMode) {\n        targetRoute = 'HomeStack';\n      } else {\n        targetRoute = 'LoginScreen';\n      }\n    } else {\n      targetRoute = 'LandingSiteScreen';\n    }\n\n    const guardContext = {\n      isAuthenticated,\n      isGuestMode,\n      isAdmin,\n      mode: newMode,\n    };\n\n    const guardResult = await checkNavigationGuards(\n      {\n        type: 'reset',\n        index: 0,\n        routes: [{ name: targetRoute }],\n      },\n      guardContext\n    );\n\n    if (!guardResult.allowed) {\n      if (guardResult.redirectTo) {\n        await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n      }\n      return;\n    }\n\n    await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n  };\n\n  const scrollToSection = (id: string) => {\n    if (typeof document !== 'undefined') {\n      const element = document.getElementById(id) || document.getElementById(`section-${id}`);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth' });\n        setMobileMenuOpen(false);\n      }\n    }\n  };\n\n  return (\n    <>\n      <View style={styles.topBar}>\n        <View style={styles.topBarContent}>\n          {/* Right Side: Toggle + Menu (RTL) */}\n          <View style={styles.rightContainer}>\n            {/* Toggle Switch */}\n            <TouchableOpacity onPress={handleToggle} activeOpacity={0.9} style={styles.toggleWrapper}>\n              <View style={styles.toggleBackground}>\n                <View style={[styles.toggleSegment, mode === 'site' ? styles.toggleSelected : styles.toggleUnselected]}>\n                  <Text style={[styles.toggleText, mode === 'site' ? styles.toggleTextSelected : undefined]}>{t('siteMode')}</Text>\n                </View>\n                <View style={[styles.toggleSegment, mode === 'app' ? styles.toggleSelected : styles.toggleUnselected]}>\n                  <Text style={[styles.toggleText, mode === 'app' ? styles.toggleTextSelected : undefined]}>{t('appMode')}</Text>\n                </View>\n              </View>\n            </TouchableOpacity>\n\n            {mode === 'site' && (\n              isMobile ? (\n                <TouchableOpacity onPress={() => setMobileMenuOpen(true)} style={styles.menuButton}>\n                  <Ionicons name=\"menu\" size={28} color={colors.textPrimary} />\n                </TouchableOpacity>\n              ) : (\n                <View style={styles.desktopMenu}>\n                  {MENU_ITEMS.slice(0, 5).map((item) => (\n                    <TouchableOpacity key={item.id} onPress={() => scrollToSection(item.id)} style={styles.desktopMenuItem}>\n                      <Text style={styles.desktopMenuText}>{t(item.id)}</Text>\n                    </TouchableOpacity>\n                  ))}\n                  {/* Show \"More\" if needed or just fit as many as possible. For now showing first few for clean look */}\n                  <TouchableOpacity onPress={() => scrollToSection('contact')} style={styles.desktopMenuItem}>\n                    <Text style={styles.desktopMenuText}>{t('contact')}</Text>\n                  </TouchableOpacity>\n                </View>\n              )\n            )}\n          </View>\n\n          {/* Left Side: Logo */}\n          <View style={styles.logoContainer}>\n            <Image\n              source={require('../assets/images/new_logo_black.png')}\n              style={styles.logo}\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.logoText}>Karma Community</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Mobile Menu Modal for Site Mode */}\n      <Modal visible={mobileMenuOpen} transparent={true} animationType=\"fade\" onRequestClose={() => setMobileMenuOpen(false)}>\n        <TouchableOpacity style={styles.modalOverlay} activeOpacity={1} onPress={() => setMobileMenuOpen(false)}>\n          <View style={styles.mobileMenuContainer}>\n            <View style={styles.mobileMenuHeader}>\n              <Text style={styles.mobileMenuTitle}>{t('menu')}</Text>\n              <TouchableOpacity onPress={() => setMobileMenuOpen(false)}>\n                <Ionicons name=\"close\" size={28} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n            <ScrollView style={styles.mobileMenuItems}>\n              {MENU_ITEMS.map((item) => (\n                <TouchableOpacity key={item.id} onPress={() => scrollToSection(item.id)} style={styles.mobileMenuItem}>\n                  <Ionicons name={item.icon as any} size={20} color={colors.textSecondary} style={{ marginLeft: 10 }} />\n                  <Text style={styles.mobileMenuText}>{t(item.id)}</Text>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  topBar: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 64,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    zIndex: 9999,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 10,\n    elevation: 4,\n    justifyContent: 'center',\n    paddingHorizontal: 16,\n    // Add backdrop filter for glass effect if supported\n    ...((Platform.OS === 'web') ? { backdropFilter: 'blur(10px)' } : {}) as any,\n  },\n  topBarContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    maxWidth: 1200,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  rightContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  logoContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  logo: {\n    width: 32,\n    height: 32,\n  },\n  logoText: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    fontFamily: Platform.OS === 'web' ? 'system-ui, -apple-system, sans-serif' : undefined,\n  },\n  // Toggle Styles\n  toggleWrapper: {\n    borderRadius: 999,\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n  },\n  toggleBackground: {\n    flexDirection: 'row-reverse',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 999,\n    height: 32,\n    borderWidth: 1,\n    borderColor: colors.border,\n    padding: 2,\n  },\n  toggleSegment: {\n    paddingHorizontal: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 14,\n  },\n  toggleSelected: {\n    backgroundColor: colors.white,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  toggleUnselected: {\n    backgroundColor: 'transparent',\n  },\n  toggleText: {\n    fontSize: 13,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  toggleTextSelected: {\n    color: colors.primary,\n    fontWeight: '700',\n  },\n  // Desktop Menu\n  desktopMenu: {\n    flexDirection: 'row-reverse', // RTL\n    alignItems: 'center',\n    gap: 20,\n    marginRight: 20,\n  },\n  desktopMenuItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 4,\n  },\n  desktopMenuText: {\n    fontSize: 15,\n    fontWeight: '500',\n    color: colors.textPrimary,\n  },\n  menuButton: {\n    padding: 4,\n    marginRight: 8,\n  },\n  // Mobile Menu Modal\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.4)',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end', // Slide from right or just align right\n  },\n  mobileMenuContainer: {\n    width: 280,\n    height: '100%',\n    backgroundColor: 'white',\n    paddingTop: 0,\n    shadowColor: colors.black,\n    shadowOffset: { width: -2, height: 0 },\n    shadowOpacity: 0.2,\n    shadowRadius: 10,\n    elevation: 10,\n  },\n  mobileMenuHeader: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    marginTop: Platform.OS === 'ios' ? 40 : 0,\n  },\n  mobileMenuTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  mobileMenuItems: {\n    flex: 1,\n    padding: 16,\n  },\n  mobileMenuItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n  },\n  mobileMenuText: {\n    fontSize: 16,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n});\n\nexport default WebModeToggleOverlay;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideHistoryCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideOfferForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/AppLoadingContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/UserContext.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkAuthStatus'. Either include it or remove the dependency array.","line":94,"column":6,"nodeType":"ArrayExpression","endLine":94,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [checkAuthStatus]","fix":{"range":[3824,3826],"text":"[checkAuthStatus]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Global user/session context managing auth mode (guest/demo/real), selected user, and auth persistence.\n// - Reached from: Wrapped around the app in `App.tsx`; consumed via `useUser()` in many screens.\n// - Provides: Methods to set user with mode, sign out, toggle guest/demo, and resetHomeScreen trigger.\n// - Storage: Persists `current_user`, `guest_mode`, and `auth_mode` in AsyncStorage; clears local collections on real auth.\n\n// TODO: CRITICAL - This context is doing too much. Split into multiple contexts:\n//   - AuthContext for authentication state\n//   - UserProfileContext for user data\n//   - AppStateContext for app-level state\n// TODO: Add proper error handling and recovery mechanisms\n// TODO: Implement proper TypeScript strict typing - remove any types\n// TODO: Add comprehensive state validation and sanitization\n// TODO: Remove hardcoded user data and implement proper user fetching\n// TODO: Add proper loading states for all async operations\n// TODO: Implement proper storage encryption for sensitive data\n// TODO: Add unit tests for all context methods and state changes\n// TODO: Remove console.log statements and use proper logging service\n// TODO: Add proper memory management and cleanup for subscriptions\nimport React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { db } from '../utils/databaseService';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { getAuth, onAuthStateChanged, User as FirebaseUser } from 'firebase/auth';\nimport { getFirebase } from '../utils/firebaseClient';\nimport { logger } from '../utils/loggerService';\n\n// Auth mode of the current session\nexport type AuthMode = 'guest' | 'demo' | 'real';\n// Simplified role model for the app\nexport type Role = 'guest' | 'user' | 'admin';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  avatar: string;\n  bio: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location: { city: string; country: string };\n  interests: string[];\n  roles: string[];\n  postsCount: number;\n  followersCount: number;\n  followingCount: number;\n  notifications: Array<{ type: string; text: string; date: string }>;\n  settings: { language: string; darkMode: boolean; notificationsEnabled: boolean };\n  // Optional org enrichment\n  orgApplicationId?: string;\n  orgName?: string;\n}\n\ninterface UserContextType {\n  selectedUser: User | null;\n  setSelectedUser: (user: User | null) => Promise<void>;\n  setSelectedUserWithMode: (user: User | null, mode: AuthMode) => Promise<void>;\n  // New simplified API\n  role: Role;\n  setCurrentPrincipal: (principal: { user: User | null; role: Role }) => Promise<void>;\n  isUserSelected: boolean;\n  isLoading: boolean;\n  signOut: () => Promise<void>;\n  isAuthenticated: boolean;\n  isGuestMode: boolean;\n  isRealAuth: boolean;\n  isAdmin: boolean;\n  setGuestMode: () => Promise<void>;\n  setDemoUser: () => Promise<void>;\n  resetHomeScreen: () => void;\n  resetHomeScreenTrigger: number;\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\ninterface UserProviderProps {\n  children: ReactNode;\n}\n\nexport const UserProvider: React.FC<UserProviderProps> = ({ children }) => {\n  const [selectedUser, setSelectedUserState] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isGuestMode, setIsGuestMode] = useState(false);\n  const [authMode, setAuthMode] = useState<AuthMode>('guest');\n  const [resetHomeScreenTrigger, setResetHomeScreenTrigger] = useState(0);\n\n  // Check authentication status on app start\n  useEffect(() => {\n    console.log('ğŸ” UserContext - useEffect - Starting auth check');\n    checkAuthStatus();\n  }, []);\n\n  // Firebase Auth State Listener - automatically detects when user logs in/out\n  useEffect(() => {\n    console.log('ğŸ”¥ UserContext - Setting up Firebase Auth listener');\n    let unsubscribe: (() => void) | undefined;\n\n    try {\n      const { app } = getFirebase();\n      const auth = getAuth(app);\n\n      unsubscribe = onAuthStateChanged(auth, async (firebaseUser: FirebaseUser | null) => {\n        logger.info('Auth', 'Firebase Auth State Changed', {\n          hasUser: !!firebaseUser,\n          email: firebaseUser?.email,\n          uid: firebaseUser?.uid,\n          emailVerified: firebaseUser?.emailVerified,\n        });\n\n        if (firebaseUser) {\n          // Firebase user is logged in - restore/create session\n          logger.info('Auth', 'Firebase user detected, restoring session');\n\n          try {\n            // Get UUID from server using firebase_uid\n            const { API_BASE_URL } = await import('../utils/config.constants');\n            const { apiService } = await import('../utils/apiService');\n\n            const resolveResponse = await apiService.resolveUserId({\n              firebase_uid: firebaseUser.uid,\n              email: firebaseUser.email || undefined\n            });\n\n            // Save JWT tokens if provided\n            if (resolveResponse.tokens) {\n              await AsyncStorage.setItem('jwt_access_token', resolveResponse.tokens.accessToken);\n              await AsyncStorage.setItem('jwt_refresh_token', resolveResponse.tokens.refreshToken);\n              await AsyncStorage.setItem('jwt_token_expires_at', \n                String(Date.now() + (resolveResponse.tokens.expiresIn * 1000))\n              );\n              logger.debug('Auth', 'JWT tokens saved from resolve-id');\n            }\n\n            const serverUser = resolveResponse.user || resolveResponse.data;\n            if (!resolveResponse.success || !serverUser) {\n              logger.warn('Auth', 'Failed to resolve user ID from server, using fallback');\n              // Fallback: try to get user by email\n              if (firebaseUser.email) {\n                const userResponse = await apiService.getUserById(firebaseUser.email);\n                if (userResponse.success && userResponse.data) {\n                  const fallbackServerUser = userResponse.data;\n                  const userData: User = {\n                    id: fallbackServerUser.id, // UUID from database\n                    name: fallbackServerUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n                    email: fallbackServerUser.email || firebaseUser.email || '',\n                    phone: fallbackServerUser.phone || firebaseUser.phoneNumber || '+9720000000',\n                    avatar: fallbackServerUser.avatar_url || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n                    bio: fallbackServerUser.bio || '',\n                    karmaPoints: fallbackServerUser.karma_points || 0,\n                    joinDate: fallbackServerUser.join_date || fallbackServerUser.created_at || new Date().toISOString(),\n                    isActive: fallbackServerUser.is_active !== false,\n                    lastActive: fallbackServerUser.last_active || new Date().toISOString(),\n                    location: { city: fallbackServerUser.city || '×™×©×¨××œ', country: fallbackServerUser.country || 'IL' },\n                    interests: fallbackServerUser.interests || [],\n                    roles: fallbackServerUser.roles || ['user'],\n                    postsCount: fallbackServerUser.posts_count || 0,\n                    followersCount: fallbackServerUser.followers_count || 0,\n                    followingCount: fallbackServerUser.following_count || 0,\n                    notifications: [],\n                    settings: fallbackServerUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                  };\n\n                  await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n                  await AsyncStorage.setItem('auth_mode', 'real');\n                  await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n                  const enrichedUser = await enrichUserWithOrgRoles(userData);\n                  setSelectedUserState(enrichedUser);\n                  setIsAuthenticated(true);\n                  setIsGuestMode(false);\n                  setAuthMode('real');\n\n                  logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n                  return;\n                }\n              }\n              throw new Error('Failed to get user from server');\n            }\n\n            // Use UUID from server (serverUser already defined above)\n            const nowIso = new Date().toISOString();\n            const userData: User = {\n              id: serverUser.id, // UUID from database - this is the primary identifier\n              name: serverUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n              email: serverUser.email || firebaseUser.email || '',\n              phone: serverUser.phone || firebaseUser.phoneNumber || '+9720000000',\n              avatar: serverUser.avatar || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n              bio: serverUser.bio || '',\n              karmaPoints: serverUser.karmaPoints || 0,\n              joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n              isActive: serverUser.isActive !== false,\n              lastActive: serverUser.lastActive || nowIso,\n              location: serverUser.location || { city: '×™×©×¨××œ', country: 'IL' },\n              interests: serverUser.interests || [],\n              roles: serverUser.roles || ['user'],\n              postsCount: serverUser.postsCount || 0,\n              followersCount: serverUser.followersCount || 0,\n              followingCount: serverUser.followingCount || 0,\n              notifications: [],\n              settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n            };\n\n            // Save to AsyncStorage for persistence\n            await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n            await AsyncStorage.setItem('auth_mode', 'real');\n            await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n            // Update context state\n            const enrichedUser = await enrichUserWithOrgRoles(userData);\n            setSelectedUserState(enrichedUser);\n            setIsAuthenticated(true);\n            setIsGuestMode(false);\n            setAuthMode('real');\n\n            logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n          } catch (error) {\n            logger.error('Auth', 'Failed to restore Firebase session', { error });\n            // Don't set user state if we can't get UUID from server\n          }\n        } else {\n          // No Firebase user - only clear if we had a Firebase user before\n          const firebaseUserId = await AsyncStorage.getItem('firebase_user_id');\n          if (firebaseUserId) {\n            logger.info('Auth', 'Firebase user logged out, clearing session');\n            await AsyncStorage.multiRemove(['current_user', 'auth_mode', 'firebase_user_id']);\n            setSelectedUserState(null);\n            setIsAuthenticated(false);\n            setIsGuestMode(false);\n            setAuthMode('guest');\n          }\n        }\n      });\n\n      logger.info('Auth', 'Firebase Auth listener set up successfully');\n    } catch (error) {\n      logger.error('Auth', 'Error setting up Firebase Auth listener', { error });\n    }\n\n    // Cleanup function\n    return () => {\n      logger.debug('Auth', 'Cleaning up Firebase Auth listener');\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, []);\n\n  const computeRole = (user: User | null, mode: AuthMode): Role => {\n    if (mode === 'guest' || !user) return 'guest';\n    const roles = Array.isArray(user?.roles) ? user!.roles : [];\n    return (roles.includes('admin') || roles.includes('super_admin') || roles.includes('org_admin')) ? 'admin' : 'user';\n  };\n\n  const checkAuthStatus = async () => {\n    try {\n      console.log('ğŸ” UserContext - checkAuthStatus - Starting auth check');\n      setIsLoading(true);\n\n      // First, check for successful OAuth authentication\n      console.log('ğŸ” UserContext - checkAuthStatus - Checking for OAuth success');\n      const oauthSuccess = await AsyncStorage.getItem('oauth_success_flag');\n      const userData = await AsyncStorage.getItem('google_auth_user');\n      const token = await AsyncStorage.getItem('google_auth_token');\n\n      if (oauthSuccess && userData && token) {\n        try {\n          console.log('ğŸ” UserContext - checkAuthStatus - Found OAuth success data, processing');\n          const parsedUserData = JSON.parse(userData);\n\n          // Validate the user data\n          if (parsedUserData && parsedUserData.id && parsedUserData.email) {\n            console.log('ğŸ” UserContext - checkAuthStatus - Setting authenticated user from OAuth');\n\n            // Enrich user with org roles if applicable\n            const enrichedUser = await enrichUserWithOrgRoles(parsedUserData);\n\n            setSelectedUserState(enrichedUser);\n            setIsAuthenticated(true);\n            setIsGuestMode(false);\n            setAuthMode('real');\n\n            // Clean up OAuth success flags since we've processed them\n            await AsyncStorage.multiRemove(['oauth_success_flag', 'google_auth_user', 'google_auth_token']);\n\n            console.log('ğŸ” UserContext - checkAuthStatus - OAuth authentication restored successfully');\n            return; // Exit early - user is authenticated\n          } else {\n            console.warn('ğŸ” UserContext - checkAuthStatus - Invalid OAuth user data found');\n          }\n        } catch (parseError) {\n          console.error('ğŸ” UserContext - checkAuthStatus - Error parsing OAuth user data:', parseError);\n        }\n      }\n\n      // Check for persistent user session\n      console.log('ğŸ” UserContext - checkAuthStatus - Checking for persistent session');\n      const persistedUser = await AsyncStorage.getItem('current_user');\n      const guestMode = await AsyncStorage.getItem('guest_mode');\n      const authModeStored = await AsyncStorage.getItem('auth_mode');\n\n      if (persistedUser) {\n        try {\n          const parsedUser = JSON.parse(persistedUser);\n          if (parsedUser && parsedUser.id) {\n            console.log('ğŸ” UserContext - checkAuthStatus - Found persisted user, validating token');\n\n            // Validate token before restoring session\n            // Only validate if not in guest mode\n            if (authModeStored !== 'guest') {\n              const { apiService } = await import('../utils/apiService');\n              \n              // Try to get a valid auth token (this will refresh if needed)\n              const authToken = await apiService.getAuthToken();\n              \n              if (!authToken) {\n                console.warn('ğŸ” UserContext - checkAuthStatus - No valid token found, clearing session');\n                // Token validation failed, clear session\n                await AsyncStorage.multiRemove([\n                  'current_user',\n                  'guest_mode',\n                  'auth_mode',\n                  'oauth_in_progress',\n                  'oauth_success_flag',\n                  'google_auth_user',\n                  'google_auth_token',\n                  'jwt_access_token',\n                  'jwt_token_expires_at',\n                  'jwt_refresh_token',\n                ]);\n                // Continue to unauthenticated state below\n              } else {\n                // Token is valid, proceed with session restoration\n                console.log('ğŸ” UserContext - checkAuthStatus - Token validated, restoring session');\n                const enrichedUser = await enrichUserWithOrgRoles(parsedUser);\n                setSelectedUserState(enrichedUser);\n                setIsAuthenticated(true);\n                setIsGuestMode(guestMode === 'true');\n                setAuthMode((authModeStored as AuthMode) || 'real');\n                console.log('ğŸ” UserContext - checkAuthStatus - Persisted session restored successfully');\n                return; // Exit early - user is authenticated\n              }\n            } else {\n              // Guest mode - no token validation needed\n              console.log('ğŸ” UserContext - checkAuthStatus - Guest mode, restoring session without token validation');\n              setSelectedUserState(parsedUser);\n              setIsAuthenticated(true);\n              setIsGuestMode(true);\n              setAuthMode('guest');\n              console.log('ğŸ” UserContext - checkAuthStatus - Guest session restored successfully');\n              return; // Exit early - guest user is authenticated\n            }\n          }\n        } catch (parseError) {\n          console.error('ğŸ” UserContext - checkAuthStatus - Error parsing persisted user:', parseError);\n        }\n      }\n\n      // No valid authentication found - clear any invalid data and set unauthenticated state\n      console.log('ğŸ” UserContext - checkAuthStatus - No valid authentication found, clearing data');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token',\n        'jwt_access_token',\n        'jwt_token_expires_at',\n        'jwt_refresh_token',\n      ]);\n\n      console.log('ğŸ” UserContext - checkAuthStatus - Setting unauthenticated state');\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n\n    } catch (error) {\n      console.error('ğŸ” UserContext - checkAuthStatus - Error:', error);\n      // On error, ensure clean unauthenticated state\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n    } finally {\n      console.log('ğŸ” UserContext - checkAuthStatus - Auth check completed');\n      setIsLoading(false);\n    }\n  };\n\n  // New simplified setter: sets current principal using role model\n  const setCurrentPrincipal = async (principal: { user: User | null; role: Role }) => {\n    try {\n      console.log('ğŸ” UserContext - setCurrentPrincipal:', { user: principal.user?.name || 'null', role: principal.role });\n      if (principal.role === 'guest' || !principal.user) {\n        setSelectedUserState(null);\n        setIsAuthenticated(true);\n        setIsGuestMode(true);\n        setAuthMode('guest');\n        return;\n      }\n      const enriched = await enrichUserWithOrgRoles(principal.user);\n      // Treat any non-guest role as real auth\n      try {\n        const { DatabaseService } = await import('../utils/databaseService');\n        await DatabaseService.clearLocalCollections();\n      } catch (e) {\n        console.log('âš ï¸ Failed to clear local collections on real auth (non-fatal):', e);\n      }\n      setSelectedUserState(enriched);\n      setIsAuthenticated(true);\n      setIsGuestMode(false);\n      setAuthMode('real');\n    } catch (error) {\n      console.error('Error in setCurrentPrincipal:', error);\n      // Fallbacks\n      if (principal.role === 'guest' || !principal.user) {\n        setSelectedUserState(null);\n        setIsAuthenticated(true);\n        setIsGuestMode(true);\n        setAuthMode('guest');\n      } else {\n        setSelectedUserState(principal.user);\n        setIsAuthenticated(true);\n        setIsGuestMode(false);\n        setAuthMode('real');\n      }\n    }\n  };\n\n  const setSelectedUserWithMode = async (user: User | null, mode: AuthMode) => {\n    try {\n      console.log('ğŸ” UserContext - setSelectedUserWithMode:', { user: user?.name || 'null', mode });\n      // Bridge to new API\n      const role = computeRole(user, mode);\n      await setCurrentPrincipal({ user, role });\n      console.log('ğŸ” UserContext - setSelectedUserWithMode - bridged to setCurrentPrincipal');\n    } catch (error) {\n      console.error('Error setting user:', error);\n      const role = computeRole(user, mode);\n      await setCurrentPrincipal({ user, role });\n    }\n  };\n\n  // Backward compatible API\n  const setSelectedUser = async (user: User | null) => setSelectedUserWithMode(user, user ? 'real' as const : 'guest');\n\n  /**\n   * Enriches a user object with organization roles if there is an approved org application\n   * keyed by the user's email (partition key in DB for org applications).\n   */\n  const enrichUserWithOrgRoles = async (user: User): Promise<User> => {\n    try {\n      const emailKey = (user.email || '').toLowerCase();\n      if (!emailKey) return user;\n\n      // Super admin email - hardcoded for main admin\n      const SUPER_ADMINS = ['navesarussi@gmail.com', 'karmacommunity2.0@gmail.com'];\n      const isSuperAdmin = SUPER_ADMINS.includes(emailKey);\n\n      // Grant admin role by env config (comma-separated emails)\n      const adminEmailsEnv = (process.env.EXPO_PUBLIC_ADMIN_EMAILS || '').toLowerCase();\n      const adminEmails = adminEmailsEnv\n        .split(',')\n        .map((s: string) => s.trim())\n        .filter(Boolean);\n      const withAdmin = adminEmails.includes(emailKey) || isSuperAdmin;\n\n      const applications = await db.listOrgApplications(emailKey);\n      const approved = (applications as any[]).find((a) => a.status === 'approved');\n\n      if (approved || withAdmin) {\n        // Super admin gets super_admin role, others get admin\n        const adminRole = isSuperAdmin ? 'super_admin' : 'admin';\n        const extraRoles = [\n          approved ? 'org_admin' : null,\n          withAdmin ? adminRole : null\n        ].filter(Boolean) as string[];\n        const roles = Array.isArray(user.roles)\n          ? Array.from(new Set([...user.roles, ...extraRoles]))\n          : extraRoles;\n        return { ...user, roles, orgApplicationId: approved?.id, orgName: approved?.orgName };\n      }\n      return user;\n    } catch (err) {\n      console.log('ğŸ” UserContext - enrichUserWithOrgRoles - skipped (no backend or no data)', err);\n      return user;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      console.log('ğŸ” UserContext - signOut - Starting sign out process');\n      setIsLoading(true);\n\n      // Sign out from Firebase Auth\n      try {\n        const { app } = getFirebase();\n        const auth = getAuth(app);\n        await auth.signOut();\n        console.log('ğŸ”¥ Firebase - User signed out successfully');\n      } catch (firebaseError) {\n        console.warn('ğŸ”¥ Firebase - Sign out error (non-fatal):', firebaseError);\n      }\n\n      console.log('ğŸ” UserContext - signOut - Removing all auth data from AsyncStorage');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'firebase_user_id',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token'\n      ]);\n\n      console.log('ğŸ” UserContext - signOut - Setting user state to null');\n      setSelectedUserState(null);\n\n      console.log('ğŸ” UserContext - signOut - Setting isAuthenticated to false');\n      setIsAuthenticated(false);\n\n      console.log('ğŸ” UserContext - signOut - Setting isGuestMode to false');\n      setIsGuestMode(false);\n\n      console.log('ğŸ” UserContext - signOut - Setting authMode to guest');\n      setAuthMode('guest');\n\n      console.log('ğŸ” UserContext - signOut - Sign out completed successfully');\n    } catch (error) {\n      console.error('ğŸ” UserContext - signOut - Error during sign out:', error);\n      setSelectedUserState(null);\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setAuthMode('guest');\n    } finally {\n      console.log('ğŸ” UserContext - signOut - Setting isLoading to false');\n      setIsLoading(false);\n    }\n  };\n\n  const setGuestMode = async () => {\n    try {\n      console.log('ğŸ” UserContext - setGuestMode - Starting (session only)');\n      setIsLoading(true);\n\n      // DO NOT SAVE TO AsyncStorage - session only\n      console.log('ğŸ” UserContext - setGuestMode - Setting guest mode for session only');\n\n      // Update state for current session only\n      setSelectedUserState(null);\n      setAuthMode('guest');\n      setIsGuestMode(true);\n      setIsAuthenticated(true);\n\n      console.log('ğŸ” UserContext - setGuestMode - Guest mode set successfully (session only)');\n    } catch (error) {\n      console.error('ğŸ” UserContext - setGuestMode - Error:', error);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n      setIsGuestMode(true);\n      setIsAuthenticated(true);\n    } finally {\n      setIsLoading(false);\n      console.log('ğŸ” UserContext - setGuestMode - Completed');\n    }\n  };\n\n  const setDemoUser = async () => {\n    // Demo mode removed â€“ keep API for backward compatibility, but no-op\n    console.log('ğŸ” UserContext - setDemoUser called (no-op, demo removed)');\n  };\n\n  const resetHomeScreen = () => {\n    console.log('ğŸ  UserContext - resetHomeScreen called');\n    setResetHomeScreenTrigger(prev => prev + 1);\n  };\n\n  /**\n   * Checks if the current user has admin privileges\n   * Returns true if user has 'admin' or 'super_admin' role\n   */\n  const isAdmin = (): boolean => {\n    if (!selectedUser || !selectedUser.roles) return false;\n    const roles = Array.isArray(selectedUser.roles) ? selectedUser.roles : [];\n    return roles.includes('admin') || roles.includes('super_admin');\n  };\n\n  const value: UserContextType = {\n    selectedUser,\n    setSelectedUser,\n    setSelectedUserWithMode,\n    role: computeRole(selectedUser, authMode),\n    setCurrentPrincipal,\n    isUserSelected: selectedUser !== null,\n    isLoading,\n    signOut,\n    isAuthenticated,\n    isGuestMode,\n    isRealAuth: authMode === 'real',\n    isAdmin: isAdmin(),\n    setGuestMode,\n    setDemoUser,\n    resetHomeScreen,\n    resetHomeScreenTrigger,\n  };\n\n  return (\n    <UserContext.Provider value={value}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = (): UserContextType => {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUser must be used within a UserProvider');\n  }\n  return context;\n};\n\nexport type { User }; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/WebModeContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/context/WebModeContext.tsx:35:9\n  33 |       const stored = typeof window !== 'undefined' ? window.localStorage.getItem(STORAGE_KEY) : null;\n  34 |       if (stored === 'site' || stored === 'app') {\n> 35 |         setModeState(stored);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |       } else {\n  37 |         setModeState('site');\n  38 |       }","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// WebModeContext.tsx\n// Provides a simple global mode for Web: 'site' (marketing landing) vs 'app' (application UI)\n//\n// IMPORTANT BEHAVIOR:\n// - Default mode for web is 'site' - new users will see the landing page first\n// - Mode persisted in localStorage to remember user preference\n// - First-time web visitors always start with 'site' mode (landing page)\n// - Navigation automatically handled by MainNavigator based on current mode\n// - 'app' mode for mobile platforms by default (no site mode on native)\nimport React, { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { Platform } from 'react-native';\n\nexport type WebMode = 'site' | 'app';\n\ninterface WebModeContextValue {\n  mode: WebMode;\n  setMode: (next: WebMode) => void;\n  toggleMode: () => void;\n}\n\nconst DEFAULT_MODE: WebMode = Platform.OS === 'web' ? 'site' : 'app';\nconst STORAGE_KEY = 'kc_web_mode';\n\nconst WebModeContext = createContext<WebModeContextValue | undefined>(undefined);\n\nexport const WebModeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [mode, setModeState] = useState<WebMode>(DEFAULT_MODE);\n\n  // Initialize from localStorage on web\n  useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    try {\n      const stored = typeof window !== 'undefined' ? window.localStorage.getItem(STORAGE_KEY) : null;\n      if (stored === 'site' || stored === 'app') {\n        setModeState(stored);\n      } else {\n        setModeState('site');\n      }\n    } catch (_) {\n      setModeState('site');\n    }\n  }, []);\n\n  const setMode = useCallback((next: WebMode) => {\n    setModeState(next);\n    if (Platform.OS === 'web') {\n      try { window.localStorage.setItem(STORAGE_KEY, next); } catch (_) {}\n    }\n  }, []);\n\n  const toggleMode = useCallback(() => {\n    setModeState((prev) => (prev === 'site' ? 'app' : 'site'));\n    if (Platform.OS === 'web') {\n      const newMode = mode === 'site' ? 'app' : 'site';\n      try { window.localStorage.setItem(STORAGE_KEY, newMode); } catch (_) {}\n    }\n  }, [mode]);\n\n  const value = useMemo(() => ({ mode, setMode, toggleMode }), [mode, setMode, toggleMode]);\n\n  return (\n    <WebModeContext.Provider value={value}>{children}</WebModeContext.Provider>\n  );\n};\n\nexport function useWebMode(): WebModeContextValue {\n  const ctx = useContext(WebModeContext);\n  if (!ctx) throw new Error('useWebMode must be used within a WebModeProvider');\n  return ctx;\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/AnimalsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ArtScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/BooksScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/CategoryScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ClothesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/CommunityChallengesScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":106,"column":6,"nodeType":"ArrayExpression","endLine":106,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[4591,4610],"text":"[mode, routeParams.mode]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadChallenges'. Either include it or remove the dependency array.","line":117,"column":8,"nodeType":"ArrayExpression","endLine":117,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadChallenges, mode]","fix":{"range":[4852,4858],"text":"[loadChallenges, mode]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'applyFilters'. Either include it or remove the dependency array.","line":123,"column":6,"nodeType":"ArrayExpression","endLine":123,"endColumn":124,"suggestions":[{"desc":"Update the dependencies array to be: [searchQuery, selectedTypeFilter, selectedFrequencyFilter, selectedDifficultyFilter, showMyCreatedOnly, allChallenges, applyFilters]","fix":{"range":[4960,5078],"text":"[searchQuery, selectedTypeFilter, selectedFrequencyFilter, selectedDifficultyFilter, showMyCreatedOnly, allChallenges, applyFilters]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Community Challenges Screen\n// Main screen for community challenges - similar to ItemsScreen structure\n// Supports two modes: Search (browse challenges) and Offer (create new challenge)\nimport React, { useCallback, useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n  TextInput,\n  Image,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge, ChallengeType, ChallengeFrequency, ChallengeDifficulty } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\n\n// Default challenge images by difficulty\nconst DEFAULT_CHALLENGE_IMAGES = {\n  easy: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400',\n  medium: 'https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400',\n  hard: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400',\n  expert: 'https://images.unsplash.com/photo-1549060279-7e168fcee0c2?w=400',\n};\n\nexport interface CommunityChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\n// Filter options for challenges\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', label: '×›×Ÿ/×œ×', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', label: '××¡×¤×¨×™', icon: 'calculator-outline' },\n  { id: 'DURATION', label: '×–××Ÿ', icon: 'time-outline' },\n];\n\nconst CHALLENGE_FREQUENCY_OPTIONS = [\n  { id: 'DAILY', label: '×™×•××™', icon: 'calendar-outline' },\n  { id: 'WEEKLY', label: '×©×‘×•×¢×™', icon: 'calendar-number-outline' },\n  { id: 'FLEXIBLE', label: '×’××™×©', icon: 'infinite-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', label: '×§×œ', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', label: '×‘×™× ×•× ×™', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', label: '×§×©×”', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', label: '××•××—×”', icon: 'trophy-outline', color: colors.primary },\n];\n\nexport default function CommunityChallengesScreen({ navigation, route }: CommunityChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['donations', 'common', 'challenges']);\n  const { selectedUser: user } = useUser();\n  \n  const routeParams = route?.params as { mode?: string } | undefined;\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n  \n  // Mode: true = ××—×¤×© (search), false = ××¦×™×¢ (offer/create)\n  const [mode, setMode] = useState(initialMode);\n  \n  // State for challenges list\n  const [allChallenges, setAllChallenges] = useState<CommunityChallenge[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<CommunityChallenge[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  \n  // Search and filters\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTypeFilter, setSelectedTypeFilter] = useState<ChallengeType | ''>('');\n  const [selectedFrequencyFilter, setSelectedFrequencyFilter] = useState<ChallengeFrequency | ''>('');\n  const [selectedDifficultyFilter, setSelectedDifficultyFilter] = useState<ChallengeDifficulty | ''>('');\n  const [showMyCreatedOnly, setShowMyCreatedOnly] = useState(false);\n  \n  // Form state for creating challenge\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageUri, setImageUri] = useState('');\n  const [challengeType, setChallengeType] = useState<ChallengeType>('BOOLEAN');\n  const [frequency, setFrequency] = useState<ChallengeFrequency>('DAILY');\n  const [goalValue, setGoalValue] = useState('');\n  const [difficulty, setDifficulty] = useState<ChallengeDifficulty>('easy');\n  const [category, setCategory] = useState('');\n\n  // Update mode from route params\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      // Reset filters when coming back to the screen\n      setShowMyCreatedOnly(false);\n      \n      if (mode) {\n        loadChallenges();\n      }\n    }, [mode])\n  );\n\n  // Apply filters when search or filters change\n  useEffect(() => {\n    applyFilters();\n  }, [searchQuery, selectedTypeFilter, selectedFrequencyFilter, selectedDifficultyFilter, showMyCreatedOnly, allChallenges]);\n\n  const loadChallenges = async () => {\n    try {\n      setLoading(true);\n      const filters: any = {\n        is_active: true,\n        sort_by: 'created_at',\n        sort_order: 'DESC' as const,\n        limit: 100,\n      };\n      \n      const response = await db.getCommunityChallenges(filters);\n      \n      if (response.success && response.data) {\n        setAllChallenges(response.data);\n      } else {\n        setAllChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n      setAllChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const applyFilters = () => {\n    let filtered = [...allChallenges];\n\n    // My created filter\n    if (showMyCreatedOnly && user?.id) {\n      filtered = filtered.filter((c) => c.creator_id === user.id);\n    }\n\n    // Search filter\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (c) =>\n          c.title.toLowerCase().includes(query) ||\n          c.description?.toLowerCase().includes(query) ||\n          c.category?.toLowerCase().includes(query)\n      );\n    }\n\n    // Type filter\n    if (selectedTypeFilter) {\n      filtered = filtered.filter((c) => c.type === selectedTypeFilter);\n    }\n\n    // Frequency filter\n    if (selectedFrequencyFilter) {\n      filtered = filtered.filter((c) => c.frequency === selectedFrequencyFilter);\n    }\n\n    // Difficulty filter\n    if (selectedDifficultyFilter) {\n      filtered = filtered.filter((c) => c.difficulty === selectedDifficultyFilter);\n    }\n\n    setFilteredChallenges(filtered);\n  };\n\n  const pickImage = async () => {\n    try {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert(t('common:error'), t('challenges:imagePermissionRequired'));\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setImageUri(result.assets[0].uri);\n      }\n    } catch (error) {\n      console.error('Error picking image:', error);\n      Alert.alert(t('common:error'), t('challenges:imagePickError'));\n    }\n  };\n\n  const handleCreateChallenge = async () => {\n    try {\n      if (!title.trim()) {\n        Alert.alert(t('common:error'), t('challenges:fields.titleRequired'));\n        return;\n      }\n\n      if (!user?.id) {\n        Alert.alert(t('common:error'), t('challenges:messages.loginRequired'));\n        return;\n      }\n\n      setLoading(true);\n\n      const challengeData = {\n        creator_id: user.id,\n        title: title.trim(),\n        description: description.trim() || undefined,\n        image_url: imageUri || DEFAULT_CHALLENGE_IMAGES[difficulty] || undefined,\n        type: challengeType,\n        frequency,\n        goal_value: goalValue ? parseFloat(goalValue) : undefined,\n        difficulty,\n        category: category.trim() || undefined,\n      };\n\n      const response = await db.createCommunityChallenge(challengeData);\n\n      if (response.success) {\n        showToast(t('challenges:challengeCreated'), 'success');\n        \n        // Reset form\n        setTitle('');\n        setDescription('');\n        setImageUri('');\n        setChallengeType('BOOLEAN');\n        setFrequency('DAILY');\n        setGoalValue('');\n        setDifficulty('easy');\n        setCategory('');\n\n        // Switch to search mode and reload\n        setMode(true);\n        await loadChallenges();\n      } else {\n        showToast(t('challenges:messages.errorCreating'), 'error');\n      }\n    } catch (error: any) {\n      console.error('Error creating challenge:', error);\n      showToast(error.message || t('challenges:messages.errorCreating'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChallengePress = (challenge: CommunityChallenge) => {\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n    });\n  };\n\n  const renderChallengeCard = ({ item }: { item: CommunityChallenge }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((t) => t.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n    const imageUrl = item.image_url || DEFAULT_CHALLENGE_IMAGES[item.difficulty || 'easy'];\n\n    return (\n      <TouchableOpacity\n        style={styles.challengeCard}\n        onPress={() => handleChallengePress(item)}\n        activeOpacity={0.7}\n      >\n        {/* Challenge Image */}\n        {imageUrl && (\n          <Image\n            source={{ uri: imageUrl }}\n            style={styles.cardImage}\n            resizeMode=\"cover\"\n          />\n        )}\n\n        <View style={styles.cardContent}>\n          <View style={styles.cardHeader}>\n            <View style={styles.cardTitleRow}>\n              <Ionicons\n                name={typeOption?.icon as any || 'trophy-outline'}\n                size={24}\n                color={difficultyOption?.color || colors.primary}\n              />\n              <Text style={styles.cardTitle} numberOfLines={2}>\n                {item.title}\n              </Text>\n            </View>\n            {difficultyOption && (\n              <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n                <Text style={styles.difficultyText}>{difficultyOption.label}</Text>\n              </View>\n            )}\n          </View>\n\n          {item.description && (\n            <Text style={styles.cardDescription} numberOfLines={2}>\n              {item.description}\n            </Text>\n          )}\n\n        <View style={styles.cardMeta}>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"person-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{item.creator_name || '××©×ª××©'}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{t('challenges:stats.participantsCount', { count: item.participants_count })}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons\n              name={CHALLENGE_FREQUENCY_OPTIONS.find((f) => f.id === item.frequency)?.icon as any}\n              size={16}\n              color={colors.textSecondary}\n            />\n            <Text style={styles.metaText}>\n              {CHALLENGE_FREQUENCY_OPTIONS.find((f) => f.id === item.frequency)?.label}\n            </Text>\n          </View>\n        </View>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('challenges:messages.noChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>\n        {mode ? t('challenges:messages.noChallengesSubtitle') : t('challenges:createNewChallenge')}\n      </Text>\n    </View>\n  );\n\n  const renderSearchMode = () => (\n    <View style={styles.container}>\n      {/* My Created Filter Badge */}\n      {showMyCreatedOnly && (\n        <View style={styles.myCreatedBanner}>\n          <Text style={styles.myCreatedText}>\n            {t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')}\n          </Text>\n          <TouchableOpacity onPress={() => setShowMyCreatedOnly(false)}>\n            <Ionicons name=\"close-circle\" size={24} color={colors.white} />\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* Filters */}\n      <ScrollContainer horizontal style={styles.filtersContainer} showsHorizontalScrollIndicator={false}>\n        <TouchableOpacity\n          style={[styles.filterChip, !selectedTypeFilter && !showMyCreatedOnly && styles.filterChipActive]}\n          onPress={() => {\n            setSelectedTypeFilter('');\n            setShowMyCreatedOnly(false);\n          }}\n        >\n          <Text style={[styles.filterChipText, !selectedTypeFilter && !showMyCreatedOnly && styles.filterChipTextActive]}>\n            {t('challenges:filters.all')}\n          </Text>\n        </TouchableOpacity>\n        {CHALLENGE_TYPE_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.filterChip, selectedTypeFilter === option.id && styles.filterChipActive]}\n            onPress={() => setSelectedTypeFilter(option.id as ChallengeType)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={16}\n              color={selectedTypeFilter === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text\n              style={[\n                styles.filterChipText,\n                selectedTypeFilter === option.id && styles.filterChipTextActive,\n              ]}\n            >\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </ScrollContainer>\n\n      {/* Challenges List */}\n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n    </View>\n  );\n\n  const renderOfferMode = () => (\n    <ScrollContainer style={styles.formContainer}>\n      <Text style={styles.formTitle}>{t('challenges:createNewChallenge')}</Text>\n\n      {/* Title */}\n      <Text style={styles.label}>{t('challenges:fields.title')} *</Text>\n      <TextInput\n        style={styles.input}\n        placeholder={t('challenges:fields.titlePlaceholder')}\n        value={title}\n        onChangeText={setTitle}\n        maxLength={255}\n      />\n\n      {/* Description */}\n      <Text style={styles.label}>{t('challenges:fields.description')}</Text>\n      <TextInput\n        style={[styles.input, styles.textArea]}\n        placeholder={t('challenges:fields.descriptionPlaceholder')}\n        value={description}\n        onChangeText={setDescription}\n        multiline\n        numberOfLines={4}\n        maxLength={2000}\n      />\n\n      {/* Image */}\n      <Text style={styles.label}>{t('challenges:fields.image')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n      <TouchableOpacity style={styles.imagePickerButton} onPress={pickImage}>\n        {imageUri ? (\n          <Image source={{ uri: imageUri }} style={styles.challengeImage} resizeMode=\"cover\" />\n        ) : (\n          <View style={styles.imagePlaceholder}>\n            <Ionicons name=\"image-outline\" size={48} color={colors.textSecondary} />\n            <Text style={styles.imagePlaceholderText}>{t('challenges:addImage')}</Text>\n            <Text style={styles.imagePlaceholderSubtext}>{t('challenges:defaultImageInfo')}</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n\n      {/* Challenge Type */}\n      <Text style={styles.label}>{t('challenges:fields.type')} *</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_TYPE_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.optionButton, challengeType === option.id && styles.optionButtonActive]}\n            onPress={() => setChallengeType(option.id as ChallengeType)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={challengeType === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text\n              style={[styles.optionText, challengeType === option.id && styles.optionTextActive]}\n            >\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Frequency */}\n      <Text style={styles.label}>{t('challenges:fields.frequency')} *</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_FREQUENCY_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.optionButton, frequency === option.id && styles.optionButtonActive]}\n            onPress={() => setFrequency(option.id as ChallengeFrequency)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={frequency === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text style={[styles.optionText, frequency === option.id && styles.optionTextActive]}>\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Difficulty */}\n      <Text style={styles.label}>{t('challenges:fields.difficulty')}</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_DIFFICULTY_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[\n              styles.optionButton,\n              difficulty === option.id && styles.optionButtonActive,\n              difficulty === option.id && { backgroundColor: option.color },\n            ]}\n            onPress={() => setDifficulty(option.id as ChallengeDifficulty)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={difficulty === option.id ? colors.white : option.color}\n            />\n            <Text style={[styles.optionText, difficulty === option.id && styles.optionTextActive]}>\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Goal Value (optional) */}\n      {challengeType !== 'BOOLEAN' && (\n        <>\n          <Text style={styles.label}>{t('challenges:fields.goalValue')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n          <TextInput\n            style={styles.input}\n            placeholder={challengeType === 'DURATION' ? t('challenges:fields.goalValueMinutes') : t('challenges:fields.goalValuePlaceholder')}\n            value={goalValue}\n            onChangeText={setGoalValue}\n            keyboardType=\"numeric\"\n          />\n        </>\n      )}\n\n      {/* Category (optional) */}\n      <Text style={styles.label}>{t('challenges:fields.category')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n      <TextInput\n        style={styles.input}\n        placeholder={t('challenges:fields.categoryPlaceholder')}\n        value={category}\n        onChangeText={setCategory}\n        maxLength={50}\n      />\n\n      {/* Create Button */}\n      <TouchableOpacity\n        style={[styles.createButton, loading && styles.createButtonDisabled]}\n        onPress={handleCreateChallenge}\n        disabled={loading}\n      >\n        {loading ? (\n          <ActivityIndicator color={colors.white} />\n        ) : (\n          <>\n            <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n            <Text style={styles.createButtonText}>{t('challenges:createButton')}</Text>\n          </>\n        )}\n      </TouchableOpacity>\n    </ScrollContainer>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('challenges:title')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n      {mode ? renderSearchMode() : renderOfferMode()}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  container: {\n    flex: 1,\n  },\n  filtersContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  filterChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  filterChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  filterChipText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  filterChipTextActive: {\n    color: colors.white,\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n    overflow: 'hidden',\n  },\n  cardImage: {\n    width: '100%',\n    height: 120,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  cardContent: {\n    padding: 16,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  cardMeta: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  formContainer: {\n    padding: 16,\n  },\n  formTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    marginTop: 16,\n  },\n  input: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  optionsRow: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  optionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  optionButtonActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  optionText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  optionTextActive: {\n    color: colors.white,\n  },\n  createButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 32,\n    marginBottom: 24,\n  },\n  createButtonDisabled: {\n    opacity: 0.6,\n  },\n  createButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  myCreatedBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  myCreatedText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  imagePickerButton: {\n    marginBottom: 16,\n    borderRadius: 12,\n    overflow: 'hidden',\n    borderWidth: 2,\n    borderColor: colors.border,\n    borderStyle: 'dashed',\n  },\n  challengeImage: {\n    width: '100%',\n    height: 200,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  imagePlaceholder: {\n    width: '100%',\n    height: 200,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n  },\n  imagePlaceholderText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  imagePlaceholderSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textTertiary,\n    textAlign: 'center',\n    paddingHorizontal: 32,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/DreamsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/EducationScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/EnvironmentScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FertilityScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FoodScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FurnitureScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/GamesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/GoldenAgeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/HousingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ItemsScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":139,"column":6,"nodeType":"ArrayExpression","endLine":139,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[5298,5317],"text":"[mode, routeParams.mode]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadItems'. Either include it or remove the dependency array.","line":464,"column":6,"nodeType":"ArrayExpression","endLine":464,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, itemType, mode, loadItems]","fix":{"range":[18498,18528],"text":"[selectedUser, itemType, mode, loadItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'allPosts' and 'mode'. Either include them or remove the dependency array.","line":569,"column":6,"nodeType":"ArrayExpression","endLine":569,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [allItems, allPosts, mode, searchQuery, selectedFilters, selectedSorts]","fix":{"range":[22288,22343],"text":"[allItems, allPosts, mode, searchQuery, selectedFilters, selectedSorts]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'handleClearAll' function makes the dependencies of useCallback Hook (at line 895) change on every render. To fix this, wrap the definition of 'handleClearAll' in its own useCallback() Hook.","line":605,"column":9,"nodeType":"VariableDeclarator","endLine":609,"endColumn":4,"suggestions":[{"desc":"Wrap the definition of 'handleClearAll' in its own useCallback() Hook.","fix":{"range":[23759,23848],"text":"useCallback(() => {\n    setSearchQuery('');\n    setSelectedFilters([]);\n    setSelectedSorts([]);\n  })"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { View, Text, StyleSheet, SafeAreaView, TouchableOpacity, ScrollView, TextInput, Alert, Image, Modal, FlatList, Dimensions, Platform } from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { biDiTextAlign, rowDirection, isLandscape, marginStartEnd, getScreenInfo, BREAKPOINTS, isMobileWeb } from '../globals/responsive';\nimport { getCategoryLabel } from '../utils/itemCategoryUtils';\nimport { useToast } from '../utils/toastService';\nimport VerticalGridSlider from '../components/VerticalGridSlider';\nimport { postsService } from '../utils/postsService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { FeedItem } from '../types/feed';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\nimport { useTranslation } from 'react-i18next';\n\ntype ItemType = 'furniture' | 'clothes' | 'general' | 'books' | 'dry_food' | 'games' | 'electronics' | 'toys' | 'sports' | 'art' | 'kitchen' | 'bathroom' | 'garden' | 'tools' | 'baby' | 'pet' | 'other';\n\n// ×¨×©×™××ª ×§×˜×’×•×¨×™×•×ª ×œ×¤×¨×¡×•× ×¤×¨×™×˜×™×\nconst ITEM_CATEGORIES = [\n  { id: 'clothes', label: '×‘×’×“×™×', icon: 'shirt-outline' },\n  { id: 'books', label: '×¡×¤×¨×™×', icon: 'library-outline' },\n  { id: 'furniture', label: '×¨×”×™×˜×™×', icon: 'bed-outline' },\n  { id: 'dry_food', label: '××•×›×œ ×™×‘×©', icon: 'restaurant-outline' },\n  { id: 'games', label: '××©×—×§×™×', icon: 'game-controller-outline' },\n  { id: 'electronics', label: '×—×©××œ ×•××œ×§×˜×¨×•× ×™×§×”', icon: 'phone-portrait-outline' },\n  { id: 'toys', label: '×¦×¢×¦×•×¢×™×', icon: 'happy-outline' },\n  { id: 'sports', label: '×¡×¤×•×¨×˜', icon: 'football-outline' },\n  { id: 'art', label: '××× ×•×ª', icon: 'color-palette-outline' },\n  { id: 'kitchen', label: '××˜×‘×—', icon: 'cafe-outline' },\n  { id: 'bathroom', label: '×××‘×˜×™×”', icon: 'water-outline' },\n  { id: 'garden', label: '×’×™× ×”', icon: 'leaf-outline' },\n  { id: 'tools', label: '×›×œ×™×', icon: 'construct-outline' },\n  { id: 'baby', label: '×ª×™× ×•×§×•×ª', icon: 'baby-outline' },\n  { id: 'pet', label: '×—×™×•×ª ××—××“', icon: 'paw-outline' },\n  { id: 'other', label: '××—×¨', icon: 'cube-outline' },\n] as const;\n\nexport interface ItemsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n  route?: any;\n}\n\ninterface DonationItem {\n  id: string;\n  ownerId: string;\n  title: string;\n  description?: string;\n  category: ItemType;\n  condition?: 'new' | 'like_new' | 'used' | 'for_parts';\n\n  // Location fields - separate\n  city?: string;\n  address?: string;\n  coordinates?: string;\n\n  price?: number; // 0 means free\n  image_base64?: string; // base64 encoded image\n  rating?: number;\n  timestamp: string;\n  tags?: string; // comma-separated string\n  qty?: number;\n  delivery_method?: string;\n  status?: string;\n  isDeleted?: boolean;\n  deletedAt?: string;\n}\n\nconst itemsFilterOptionsBase = [\n  '×‘×—×™× ×',\n  '×›××• ×—×“×©',\n  '××©×•××©',\n  '×œ×—×œ×¤×™×',\n  '×¢× ××™×¡×•×£ ×¢×¦××™',\n  '××©×œ×•×— ×‘×ª×©×œ×•×',\n  '× ×’×™×©×•×ª',\n];\n\nconst itemsSortOptions = [\n  '××œ×¤×‘×™×ª×™',\n  '×œ×¤×™ ××™×§×•×',\n  '×œ×¤×™ ×ª××¨×™×š',\n  '×œ×¤×™ ×“×™×¨×•×’',\n  '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª',\n];\n\nexport default function ItemsScreen({ navigation, route }: ItemsScreenProps) {\n  const { ToastComponent } = useToast();\n  const { t } = useTranslation(['donations', 'common', 'items']);\n  const itemType: ItemType = (route?.params?.itemType as ItemType) || 'general';\n  const routeParams = route?.params as { mode?: string } | undefined;\n\n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: false = ××¦×™×¢, true = ××—×¤×©\n  // URL mode: 'offer' = false, 'search' = true\n  // Default is search mode (true)\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n  const [mode, setMode] = useState(initialMode);\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'search' : 'offer';\n    const currentMode = routeParams?.mode;\n\n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n\n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n  const [allItems, setAllItems] = useState<DonationItem[]>([]);\n  const [filteredItems, setFilteredItems] = useState<DonationItem[]>([]);\n  const [recentMine, setRecentMine] = useState<DonationItem[]>([]);\n  // Posts state for search mode\n  const [allPosts, setAllPosts] = useState<FeedItem[]>([]);\n  const [filteredPosts, setFilteredPosts] = useState<FeedItem[]>([]);\n  // Posts state for offer mode history\n  const [recentPosts, setRecentPosts] = useState<FeedItem[]>([]);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const titleInputRef = useRef<TextInput | null>(null);\n  const loadItemsRef = useRef<(() => Promise<void>) | undefined>(undefined);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageUri, setImageUri] = useState<string>('');\n  const [price, setPrice] = useState('0');\n  const [city, setCity] = useState('');\n  const [address, setAddress] = useState('');\n  const [qty, setQty] = useState<number>(1);\n  const [condition, setCondition] = useState<'new' | 'like_new' | 'used' | 'for_parts' | ''>('');\n  const [selectedCategory, setSelectedCategory] = useState<ItemType>('general');\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false);\n  const { selectedUser } = useUser();\n  const [selectedItem, setSelectedItem] = useState<DonationItem | null>(null);\n  const [showItemModal, setShowItemModal] = useState(false);\n\n  useFocusEffect(\n    useCallback(() => {\n      setTitle('');\n      setDescription('');\n      setPrice('0');\n      setCity('');\n      setAddress('');\n      setQty(1);\n      setCondition('');\n      setImageUri('');\n      setSelectedCategory('general');\n    }, [])\n  );\n\n  // Convert image URI to base64 with compression\n  const convertImageToBase64 = async (uri: string): Promise<string | null> => {\n    try {\n      console.log('ğŸ–¼ï¸ Converting and compressing image...');\n\n      // Fetch the image\n      const response = await fetch(uri);\n      const blob = await response.blob();\n\n      // Create canvas to compress the image\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const base64 = reader.result as string;\n\n          // Check size and compress if needed\n          const sizeInMB = (base64.length * 0.75) / (1024 * 1024); // Approximate size\n          console.log(`ğŸ“ Image size: ${sizeInMB.toFixed(2)} MB`);\n\n          if (sizeInMB > 5) {\n            console.warn('âš ï¸ Image too large, it may fail to upload. Consider using a smaller image.');\n            Alert.alert(\n              '×ª××•× ×” ×’×“×•×œ×”',\n              '×”×ª××•× ×” ×©×‘×—×¨×ª ×’×“×•×œ×” ×××•×“. ××•××œ×¥ ×œ×”×©×ª××© ×‘×ª××•× ×” ×§×˜× ×” ×™×•×ª×¨.',\n              [\n                { text: '×”××©×š ×‘×›×œ ×–××ª', onPress: () => resolve(base64) },\n                { text: '×‘×˜×œ', onPress: () => resolve(null), style: 'cancel' }\n              ]\n            );\n          } else {\n            console.log('âœ… Image converted to base64');\n            resolve(base64);\n          }\n        };\n        reader.onerror = (error) => {\n          console.error('âŒ Error converting image:', error);\n          reject(error);\n        };\n        reader.readAsDataURL(blob);\n      });\n    } catch (error) {\n      console.error('âŒ Error in convertImageToBase64:', error);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×”××™×¨ ××ª ×”×ª××•× ×”');\n      return null;\n    }\n  };\n\n  const filterOptions = useMemo(() => {\n    // ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”××¤×©×¨×™×•×ª ×œ×¤×¨×™×˜×™×\n    const allCategories = ITEM_CATEGORIES.map(cat => cat.label);\n\n    const typeSpecific = itemType === 'furniture' ? ['×¡×¤×•×ª', '××¨×•× ×•×ª', '××™×˜×•×ª']\n      : itemType === 'clothes' ? ['×’×‘×¨×™×', '× ×©×™×', '×™×œ×“×™×']\n        : ['××˜×‘×—', '×—×©××œ', '×¦×¢×¦×•×¢×™×'];\n\n    // ××—×–×™×¨: ×§×˜×’×•×¨×™×•×ª ×›×œ×œ×™×•×ª + ×¤×™×œ×˜×¨×™× ×¡×¤×¦×™×¤×™×™× ×œ×¡×•×’ + ×¤×™×œ×˜×¨×™× ×‘×¡×™×¡×™×™×\n    return [...allCategories, ...typeSpecific, ...itemsFilterOptionsBase];\n  }, [itemType]);\n\n  const dummyItems: DonationItem[] = useMemo(() => [], []);\n\n  // Helper to map API post to FeedItem (same as useFeedData.mapPostToItem)\n  const mapPostToFeedItem = (post: any): FeedItem | null => {\n    // ×”×’× ×” ××¤× ×™ post null/undefined\n    if (!post || !post.id) {\n      console.warn('âš ï¸ mapPostToFeedItem: post is null or missing id', post);\n      return null;\n    }\n\n    // Extract item data if available\n    const itemData = post.item_data || {};\n    let metadata = {};\n    try {\n      metadata = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : (post.metadata || {});\n    } catch (e) {\n      console.warn('âš ï¸ Failed to parse metadata:', e);\n    }\n\n    // Ensure user is always defined (same format as useFeedData)\n    // ×‘×“×™×§×” ××¤×•×¨×˜×ª ×™×•×ª×¨\n    let author = null;\n    if (post.author) {\n      author = post.author;\n    } else if (post.author_id) {\n      // ×× ××™×Ÿ author object, × ×™×¦×•×¨ ××—×“ ×‘×¡×™×¡×™\n      author = { id: post.author_id, name: null, avatar_url: null };\n    }\n\n    const userId = author?.id || post.author_id || 'unknown';\n    const userName = author?.name || 'common.unknownUser';\n    const userAvatar = author?.avatar_url || undefined;\n\n    // ×•×™×“×•× ×©×”-user ×ª××™×“ ××•×’×“×¨\n    if (!userId || userId === 'unknown') {\n      console.warn('âš ï¸ mapPostToFeedItem: post without valid user', { postId: post.id, author, author_id: post.author_id });\n    }\n\n    // Get status from item_data or ride_data\n    let itemStatus: string | undefined;\n    if (post.item_data) {\n      itemStatus = post.item_data.status;\n    } else if (post.ride_data) {\n      itemStatus = post.ride_data.status;\n    }\n\n    return {\n      id: post.id,\n      type: post.post_type || 'post',\n      subtype: post.post_type, // Same as useFeedData - e.g. 'item', 'donation', 'ride'\n      title: post.title || 'post.noTitle', // Same as useFeedData\n      description: post.description || '',\n      thumbnail: post.images && post.images.length > 0 ? post.images[0] : null, // Same as useFeedData\n      user: {\n        id: userId,\n        name: userName,\n        avatar: userAvatar,\n      },\n      likes: parseInt(post.likes || '0'),\n      comments: parseInt(post.comments || '0'),\n      isLiked: post.is_liked || false,\n      timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n        ? new Date(post.created_at).toISOString()\n        : new Date().toISOString(),\n      // Item-specific fields\n      category: itemData?.category || (metadata as any)?.category,\n      // Add status for items and donations\n      status: itemStatus,\n      // Add IDs for updating posts\n      // IMPORTANT: For items, ALWAYS prefer item_data.id (from JOIN) - this is the most reliable source\n      // item_id column might be a timestamp if post was created incorrectly\n      itemId: post.item_data?.id || (post.item_id && !/^\\d{10,13}$/.test(post.item_id) ? post.item_id : undefined),\n      rideId: post.ride_id || post.ride_data?.id,\n      taskId: post.task_id || post.task?.id,\n    };\n  };\n\n  // ×¤×•× ×§×¦×™×” × ×¤×¨×“×ª ×œ×˜×¢×™× ×ª ×¤×¨×™×˜×™×/×¤×•×¡×˜×™× ×©× ×•×›×œ ×œ×§×¨×•× ×œ×” ×’× ××—×¨×™ ×©××™×¨×”\n  const loadItems = async () => {\n    try {\n      console.log('ğŸ“¥ ×˜×•×¢×Ÿ ×¤×¨×™×˜×™×/×¤×•×¡×˜×™× ××”×©×¨×ª...', { mode, itemType });\n      const uid = selectedUser?.id || 'guest';\n\n      if (mode) {\n        // ××¦×‘ \"××—×¤×©\" - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n        console.log('ğŸ” ××¦×‘ ××—×¤×© - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™×');\n        try {\n          // ×˜×•×¢×Ÿ ××ª ×›×œ ×”×¤×•×¡×˜×™× ×•××– ××¡× ×Ÿ ×œ×¤×™ post_type\n          const postsResponse = await postsService.getPosts(200, 0, uid);\n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n            const itemPosts = postsResponse.data.filter((post: any) => \n              post.post_type === 'item' || post.post_type === 'donation' || post.item_id\n            );\n            \n            console.log('ğŸ“Š ×¡×”\"×› ×¤×•×¡×˜×™×:', postsResponse.data.length, '×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™×:', itemPosts.length);\n            \n            // ×××¤×” ××ª ×”×¤×•×¡×˜×™× ×¢× ×”×’× ×” ××¤× ×™ user undefined\n            const mappedPosts = itemPosts\n              .map(mapPostToFeedItem)\n              .filter((post: FeedItem | null): post is FeedItem => \n                post !== null && post !== undefined && !!post.user && !!post.user.id && !!post.user.name\n              ); // ××¡× ×Ÿ ×¤×•×¡×˜×™× ×œ×œ× user ×ª×§×™×Ÿ\n            \n            setAllPosts(mappedPosts);\n            setFilteredPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n            \n            if (mappedPosts.length === 0 && itemPosts.length > 0) {\n              console.warn('âš ï¸ ×™×© ×¤×•×¡×˜×™× ××‘×œ ×”× ×œ× × ××¤×• × ×›×•×Ÿ. ×“×•×’××”:', itemPosts[0]);\n            }\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× × ×›×©×œ×”:', postsResponse.error);\n            setAllPosts([]);\n            setFilteredPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™×:', error);\n          setAllPosts([]);\n          setFilteredPosts([]);\n        }\n        return; // Don't load items in search mode\n      } else {\n        // ××¦×‘ \"××¦×™×¢\" - ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”\n        console.log('ğŸ”µ ××¦×‘ ××¦×™×¢ - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”:', uid);\n        try {\n          // ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××©\n          const { apiService } = await import('../utils/apiService');\n          const postsResponse = await apiService.getUserPosts(uid, 50, uid);\n          \n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n            const itemPosts = postsResponse.data.filter((post: any) => \n              post.post_type === 'item' || post.post_type === 'donation' || post.item_id\n            );\n            \n            // ×××¤×” ××ª ×”×¤×•×¡×˜×™×\n            const mappedPosts = itemPosts\n              .map(mapPostToFeedItem)\n              .filter((post: FeedItem | null): post is FeedItem => \n                post !== null && post !== undefined && !!post.user && !!post.user.id && !!post.user.name\n              );\n            \n            setRecentPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” × ×›×©×œ×”:', postsResponse.error);\n            setRecentPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×”:', error);\n          setRecentPosts([]);\n        }\n\n        // ×¢×“×™×™×Ÿ ×˜×•×¢×Ÿ ×¤×¨×™×˜×™× ×œ×¦×•×¨×š ×™×¦×™×¨×”/×¢×¨×™×›×” (×× ×¦×¨×™×š)\n        const serverItems = await db.getDedicatedItemsByOwner(uid);\n        const displayItems: DonationItem[] = (serverItems || [])\n          .filter((item: any) => {\n            const isDeleted = item.is_deleted || item.isDeleted;\n            return !isDeleted;\n          })\n          .map((item: any) => ({\n            id: item.id,\n            ownerId: item.owner_id || item.ownerId,\n            title: item.title,\n            description: item.description,\n            category: item.category,\n            condition: item.condition,\n            city: item.city || (item.location && typeof item.location === 'object' ? item.location.city : null),\n            address: item.address || (item.location && typeof item.location === 'object' ? item.location.address : null),\n            coordinates: item.coordinates || (item.location && typeof item.location === 'object' ? item.location.coordinates : null),\n            price: item.price,\n            image_base64: item.image_base64,\n            rating: item.rating,\n            timestamp: item.created_at || item.timestamp,\n            tags: item.tags,\n            qty: item.quantity || item.qty,\n            delivery_method: item.delivery_method,\n            status: item.status,\n            isDeleted: item.is_deleted || item.isDeleted,\n            deletedAt: item.deleted_at || item.deletedAt,\n          }));\n\n        const forType = displayItems.filter(i => itemType === 'general' ? true : i.category === itemType);\n        setAllItems(forType);\n        setRecentMine(forType);\n      }\n\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×™×˜×™×:', error);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×˜×¢×•×Ÿ ××ª ×”×¤×¨×™×˜×™×');\n      setAllItems([]);\n      setRecentMine([]);\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  // Store loadItems in ref so it can be used in callbacks without dependency issues\n  useEffect(() => {\n    loadItemsRef.current = loadItems;\n  });\n\n  useEffect(() => {\n    loadItems();\n  }, [selectedUser, itemType, mode]);\n\n  const getFilteredItems = useCallback(() => {\n    // In search mode, filter posts instead of items\n    if (mode) {\n      let filtered = [...allPosts];\n      if (searchQuery) {\n        const q = searchQuery.toLowerCase();\n        filtered = filtered.filter(p =>\n          p.title.toLowerCase().includes(q) ||\n          (p.description || '').toLowerCase().includes(q) ||\n          (p.user?.name || '').toLowerCase().includes(q)\n        );\n      }\n\n      // Apply filters (category, etc.)\n      if (selectedFilters.length > 0) {\n        selectedFilters.forEach(f => {\n          // Filter by category\n          const matchingCategory = ITEM_CATEGORIES.find(cat => cat.label === f);\n          if (matchingCategory) {\n            filtered = filtered.filter(post => post.category === matchingCategory.id);\n          }\n        });\n      }\n\n      // Sorting\n      const selectedSort = selectedSorts[0];\n      switch (selectedSort) {\n        case '××œ×¤×‘×™×ª×™':\n          filtered.sort((a, b) => a.title.localeCompare(b.title, 'he'));\n          break;\n        case '×œ×¤×™ ×ª××¨×™×š':\n          filtered.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n          break;\n        case '×œ×¤×™ ×“×™×¨×•×’':\n          filtered.sort((a, b) => (b.likes || 0) - (a.likes || 0));\n          break;\n        case '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª':\n          filtered.sort((a, b) => (b.likes || 0) - (a.likes || 0));\n          break;\n      }\n\n      return filtered;\n    }\n\n    // In offer mode, filter items as before\n    let filtered = [...allItems];\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(i =>\n        i.title.toLowerCase().includes(q) ||\n        (i.city || '').toLowerCase().includes(q) ||\n        (i.address || '').toLowerCase().includes(q) ||\n        (i.description || '').toLowerCase().includes(q) ||\n        (i.tags || '').toLowerCase().includes(q)\n      );\n    }\n\n    if (selectedFilters.length > 0) {\n      selectedFilters.forEach(f => {\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ××—×™×¨\n        if (f === '×‘×—×™× ×') filtered = filtered.filter(i => (i.price ?? 0) === 0);\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ××¦×‘\n        if (f === '×›××• ×—×“×©') filtered = filtered.filter(i => i.condition === 'like_new' || i.condition === 'new');\n        if (f === '××©×•××©') filtered = filtered.filter(i => i.condition === 'used');\n        if (f === '×œ×—×œ×¤×™×') filtered = filtered.filter(i => i.condition === 'for_parts');\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ×§×˜×’×•×¨×™×” - ×‘×•×“×§ ×× ×”×¤×™×œ×˜×¨ ×ª×•×× ×œ××—×ª ×”×§×˜×’×•×¨×™×•×ª\n        const matchingCategory = ITEM_CATEGORIES.find(cat => cat.label === f);\n        if (matchingCategory) {\n          filtered = filtered.filter(item => item.category === matchingCategory.id);\n        }\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ×ª×’×™×•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ×¡×•×’\n        if (['×¡×¤×•×ª', '××¨×•× ×•×ª', '××™×˜×•×ª', '×’×‘×¨×™×', '× ×©×™×', '×™×œ×“×™×', '××˜×‘×—', '×—×©××œ', '×¦×¢×¦×•×¢×™×'].includes(f)) {\n          filtered = filtered.filter(item => {\n            const tagsArray = typeof item.tags === 'string' ? item.tags.split(',') : (item.tags || []);\n            return tagsArray.includes(f);\n          });\n        }\n      });\n    }\n\n    const selectedSort = selectedSorts[0];\n    switch (selectedSort) {\n      case '××œ×¤×‘×™×ª×™':\n        filtered.sort((a, b) => a.title.localeCompare(b.title, 'he'));\n        break;\n      case '×œ×¤×™ ××™×§×•×':\n        filtered.sort((a, b) => (a.city || '').localeCompare((b.city || ''), 'he'));\n        break;\n      case '×œ×¤×™ ×ª××¨×™×š':\n        filtered.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n        break;\n      case '×œ×¤×™ ×“×™×¨×•×’':\n        filtered.sort((a, b) => (b.rating ?? 0) - (a.rating ?? 0));\n        break;\n      case '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª':\n        filtered.sort((a, b) => (b.rating ?? 0) - (a.rating ?? 0));\n        break;\n    }\n\n    return filtered;\n  }, [allItems, searchQuery, selectedFilters, selectedSorts]);\n\n  // Update filtered items/posts whenever search/filter/sort changes\n  useEffect(() => {\n    if (mode) {\n      setFilteredPosts(getFilteredItems() as FeedItem[]);\n    } else {\n      setFilteredItems(getFilteredItems() as DonationItem[]);\n    }\n  }, [getFilteredItems, mode]);\n\n  // Calculate grid layout for search mode\n  const { width } = Dimensions.get('window');\n  const { isTablet, isDesktop } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobile = isMobileWeb();\n\n  // Initialize with appropriate default, but allow user control via slider\n  const [numColumns, setNumColumns] = useState(() => (isTablet || isDesktop || isDesktopWeb) ? 3 : 2);\n\n  // Use same padding values as PostsReelsScreen for consistency\n  const HORIZONTAL_PADDING = isMobile ? 8 : 16;\n  const COLUMN_GAP = isMobile ? 8 : 16;\n  const screenPadding = HORIZONTAL_PADDING;\n  const cardGap = COLUMN_GAP;\n  // Calculate card width: full width minus padding on both sides, minus gaps between columns\n  const cardWidth = numColumns === 1 \n    ? width - (screenPadding * 2) \n    : (width - (screenPadding * 2) - (cardGap * (numColumns - 1))) / numColumns;\n\n  const handleSearch = (query: string, filters: string[] = [], sorts: string[] = [], _results?: any[]) => {\n    setSearchQuery(query);\n    setSelectedFilters(filters);\n    setSelectedSorts(sorts);\n  };\n\n  const handleClearAll = () => {\n    setSearchQuery('');\n    setSelectedFilters([]);\n    setSelectedSorts([]);\n  };\n\n  const pickImage = async () => {\n    try {\n      // ×‘×§×©×ª ×”×¨×©××”\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('××™×Ÿ ×”×¨×©××”', '× ×“×¨×©×ª ×”×¨×©××” ×œ×’×©×ª ×œ×’×œ×¨×™×”');\n        return;\n      }\n\n      // ×¤×ª×™×—×ª ×”×’×œ×¨×™×”\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setImageUri(result.assets[0].uri);\n        console.log('âœ… ×ª××•× ×” × ×‘×—×¨×”:', result.assets[0].uri);\n      }\n    } catch (e) {\n      console.error('âŒ ×©×’×™××” ×‘×‘×—×™×¨×ª ×ª××•× ×”:', e);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×˜×¢×•×Ÿ ××ª ×”×ª××•× ×”');\n    }\n  };\n\n  const handleDeleteItem = async (item: DonationItem) => {\n    console.warn('ğŸ—‘ï¸ ××—×™×§×ª ×¤×¨×™×˜ - Soft Delete', { itemId: item.id, title: item.title });\n\n    Alert.alert(\n      'ğŸ—‘ï¸ ××—×™×§×ª ×¤×¨×™×˜',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª:\\n\"${item.title}\"?`,\n      [\n        {\n          text: '×‘×™×˜×•×œ',\n          style: 'cancel'\n        },\n        {\n          text: '××—×§',\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              console.log('ğŸ—‘ï¸ ××•×—×§ ×¤×¨×™×˜:', item.id);\n\n              // Soft Delete ×“×¨×š ×”-API ×”×—×“×©\n              await db.deleteDedicatedItem(item.id);\n\n              console.log('âœ… ×¤×¨×™×˜ × ××—×§ ×‘×©×¨×ª');\n\n              // ×”×¡×¨×” ××”-UI\n              setAllItems(prev => prev.filter(i => i.id !== item.id));\n              setFilteredItems(prev => prev.filter(i => i.id !== item.id));\n              setRecentMine(prev => prev.filter(i => i.id !== item.id));\n\n              Alert.alert('âœ… ×”×¦×œ×—×”', '×”×¤×¨×™×˜ × ××—×§!');\n            } catch (error: any) {\n              console.error('âŒ ×©×’×™××” ×‘××—×™×§×”:', error);\n              Alert.alert('×©×’×™××”', `×œ× ×”×¦×œ×—× ×• ×œ××—×•×§ ××ª ×”×¤×¨×™×˜:\\n${error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”'}`);\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleCreateItem = async () => {\n    try {\n      if (!title.trim()) {\n        Alert.alert('×©×’×™××”', '× × ×œ××œ× ×›×•×ª×¨×ª');\n        titleInputRef.current?.focus();\n        return;\n      }\n\n      console.log('ğŸ”µ ××ª×—×™×œ ×ª×”×œ×™×š ×©××™×¨×ª ×¤×¨×™×˜...');\n\n      // Ensure we have a valid UUID - guests cannot create items\n      if (!selectedUser?.id) {\n        Alert.alert('×©×’×™××”', '× × ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×™×¦×•×¨ ×¤×¨×™×˜');\n        return;\n      }\n      const uid = selectedUser.id; // This is already a UUID from the server\n      // Note: We don't send 'id' to the server - the backend will generate it\n      // This is similar to how rides work - the backend creates the ID\n\n      // ×”××¨×ª ×ª××•× ×” ×œ-base64\n      let imageBase64 = null;\n      if (imageUri) {\n        console.log('ğŸ–¼ï¸ ×××™×¨ ×ª××•× ×” ×œ-base64...');\n        imageBase64 = await convertImageToBase64(imageUri);\n        if (imageBase64) {\n          console.log('âœ… ×”×ª××•× ×” ×”×•××¨×” ×‘×”×¦×œ×—×” (×’×•×“×œ:', imageBase64.length, '×ª×•×•×™×)');\n        }\n      }\n\n      // ×”×›× ×ª ××•×‘×™×™×§×˜ ×¢× ×›×œ ×”×©×“×•×ª ×”× ×¤×¨×“×™×\n      // Note: We don't include 'id' - the backend will generate it\n      // For optional fields, send undefined instead of empty string to avoid validation issues\n      const itemData: any = {\n        owner_id: uid,\n        title: title.trim(),\n        category: selectedCategory || itemType,\n      };\n\n      // Add optional fields only if they have values\n      if (description.trim()) {\n        itemData.description = description.trim();\n      }\n      if (condition) {\n        itemData.condition = condition;\n      }\n      if (city.trim()) {\n        itemData.city = city.trim();\n      }\n      if (address.trim()) {\n        itemData.address = address.trim();\n      }\n      // Note: coordinates is not currently supported in the UI\n      // If needed in the future, add a coordinates state variable and input field\n      if (price && Number(price) > 0) {\n        itemData.price = Number(price);\n      }\n      if (imageBase64) {\n        itemData.image_base64 = imageBase64;\n      }\n      if (selectedFilters.length > 0) {\n        itemData.tags = selectedFilters.join(',');\n      }\n      if (qty && qty > 1) {\n        itemData.quantity = qty;\n      }\n      // Note: delivery_method and status are optional\n      // Backend will use defaults: 'pickup' for delivery_method and 'available' for status\n      // If you want to customize these, add state variables and UI inputs for them\n\n      console.log('ğŸ“¤ ×©×•×œ×— ×œ×©×¨×ª:', {\n        title: itemData.title,\n        city: itemData.city,\n        address: itemData.address,\n        hasImage: !!itemData.image_base64,\n        tagsCount: selectedFilters.length,\n      });\n\n      // ×©×œ×™×—×” ×œ×©×¨×ª ×“×¨×š API ×”×—×“×©\n      const savedItem = await db.createDedicatedItem(itemData);\n\n      console.log('âœ… × ×©××¨ ×‘×”×¦×œ×—×” ×‘×©×¨×ª:', savedItem);\n\n      // Optimistic Update: Add to local state immediately\n      // Use the ID returned from the server (savedItem.id) - this is the proper ID generated by backend\n      const newItemForState: DonationItem = {\n        id: savedItem.id || savedItem.data?.id,\n        ownerId: itemData.owner_id,\n        title: itemData.title,\n        description: itemData.description,\n        category: itemData.category,\n        condition: itemData.condition as any,\n        city: itemData.city,\n        address: itemData.address,\n        coordinates: itemData.coordinates,\n        price: itemData.price,\n        image_base64: itemData.image_base64 || undefined,\n        rating: itemData.rating,\n        timestamp: new Date().toISOString(),\n        tags: itemData.tags,\n        qty: itemData.quantity,\n        delivery_method: itemData.delivery_method,\n        status: itemData.status,\n        isDeleted: false,\n      };\n\n      setAllItems(prev => [newItemForState, ...prev]);\n      // Filter logic will run via useEffect but we can also update explicitly if needed\n      // With optimistic update, we don't strictly need to await loadItems\n      // But we can trigger it in background\n      loadItems();\n\n      // ××™×¤×•×¡ ×›×œ ×”×©×“×•×ª\n      setTitle('');\n      setDescription('');\n      setPrice('0');\n      setCity('');\n      setAddress('');\n      setQty(1);\n      setCondition('');\n      setImageUri('');\n      setSelectedCategory('general');\n      setSelectedFilters([]);\n\n      Alert.alert(\n        'âœ… × ×©××¨ ×‘×”×¦×œ×—×”!',\n        `×”×¤×¨×™×˜ \"${savedItem.title}\" × ×©××¨ ×‘××¢×¨×›×ª`,\n        [{ text: '××™×©×•×¨', style: 'default' }]\n      );\n\n    } catch (error: any) {\n      console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×¤×¨×™×˜:', error);\n      const errorMessage = error.response?.data?.error || error.response?.data?.message || error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n      console.error('âŒ Error details:', {\n        message: errorMessage,\n        status: error.response?.status,\n        data: error.response?.data,\n        fullError: error\n      });\n      Alert.alert(\n        'âŒ ×©×’×™××”',\n        `×œ× ×”×¦×œ×—× ×• ×œ×©××•×¨ ××ª ×”×¤×¨×™×˜:\\n${errorMessage}`,\n        [{ text: '×¡×’×•×¨', style: 'cancel' }]\n      );\n    }\n  };\n\n  const menuOptions = ['×”×™×¡×˜×•×¨×™×™×ª ×¤×¨×™×˜×™×', '×”×’×“×¨×•×ª', '×¢×–×¨×”', '×¦×•×¨ ×§×©×¨'];\n\n  const handleItemPress = (item: DonationItem) => {\n    setSelectedItem(item);\n    setShowItemModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setShowItemModal(false);\n    setSelectedItem(null);\n  };\n\n  // Handle post closed - immediately update UI for fast responsiveness\n  const handlePostClosed = useCallback((postId: string) => {\n    // Optimistic update: remove post from lists immediately for instant UI feedback\n    setAllPosts(prev => prev.filter(p => p.id !== postId));\n    setFilteredPosts(prev => prev.filter(p => p.id !== postId));\n    setRecentPosts(prev => prev.filter(p => p.id !== postId));\n    \n    // Background reload to ensure consistency (non-blocking)\n    // The UI is already updated, so this is just for data sync\n    setTimeout(() => {\n      if (loadItemsRef.current) {\n        loadItemsRef.current().catch(err => {\n          console.error('Error reloading items after close:', err);\n        });\n      }\n    }, 100);\n  }, []);\n\n  // Render item callback for FlatList (search mode)\n  const renderPostItem = useCallback(({ item }: { item: FeedItem }) => {\n    // Calculate available width: screen width minus horizontal padding on both sides\n    const availableWidth = width - (screenPadding * 2);\n    \n    // For grid view: with justifyContent: 'space-between', FlatList distributes items automatically\n    // So each item gets availableWidth / numColumns (no need to account for gaps)\n    const itemWidth = numColumns > 1 \n      ? availableWidth / numColumns\n      : availableWidth; // Full available width for list view\n\n    return (\n      <PostReelItem\n        item={item}\n        cardWidth={itemWidth}\n        numColumns={numColumns}\n        onPress={(item) => {\n          // Navigate to post details or open modal\n          console.log('Post pressed:', item.id);\n        }}\n        onCommentPress={(item) => {\n          // Handle comment press\n          console.log('Comment pressed:', item.id);\n        }}\n        onMorePress={handleMorePress}\n        onPostClosed={handlePostClosed}\n      />\n    );\n  }, [numColumns, screenPadding, width, handleMorePress, handlePostClosed]);\n\n  // Empty component for FlatList\n  const renderEmptyPosts = useCallback(() => (\n    <View style={localStyles.emptyState}>\n      <Icon name=\"search-outline\" size={48} color={colors.textSecondary} />\n      <Text style={localStyles.emptyStateTitle}>×œ× × ××¦××• ×¤×•×¡×˜×™×</Text>\n      <Text style={localStyles.emptyStateText}>× ×¡×” ×œ×©× ×•×ª ××ª ×”×¤×™×œ×˜×¨×™× ××• ×”×—×™×¤×•×©</Text>\n      {(searchQuery || selectedFilters.length > 0 || selectedSorts.length > 0) && (\n        <TouchableOpacity style={localStyles.emptyStateClearButton} onPress={handleClearAll}>\n          <Text style={localStyles.emptyStateClearButtonText}>× ×§×” ×”×›×œ</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  ), [searchQuery, selectedFilters, selectedSorts, handleClearAll]);\n\n  const renderItemCard = ({ item }: { item: DonationItem }) => (\n    <TouchableOpacity style={localStyles.itemCard} onPress={() => handleItemPress(item)}>\n      {/* ×ª××•× ×” base64 */}\n      {item.image_base64 && (\n        <Image\n          source={{ uri: item.image_base64 }}\n          style={{ width: '100%', height: 120, borderRadius: 8, marginBottom: 8 }}\n          resizeMode=\"cover\"\n        />\n      )}\n\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemTitle} numberOfLines={1}>{item.title}</Text>\n        <View style={localStyles.itemBadge}>\n          <Text style={localStyles.itemBadgeText}>\n            {getCategoryLabel(item.category)}\n          </Text>\n        </View>\n      </View>\n\n      {/* ××™×§×•× ××¤×•×¦×œ */}\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta} numberOfLines={1}>\n          ğŸ“ {item.city || '××™×§×•× ×œ× ×–××™×Ÿ'}{item.address ? `, ${item.address}` : ''}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderRecentCard = ({ item }: { item: DonationItem }) => (\n    <View style={localStyles.itemCard}>\n      {/* ×ª××•× ×” base64 */}\n      {item.image_base64 && (\n        <Image\n          source={{ uri: item.image_base64 }}\n          style={{ width: '100%', height: 120, borderRadius: 8, marginBottom: 8 }}\n          resizeMode=\"cover\"\n        />\n      )}\n\n      <View style={localStyles.itemRow}>\n        <View style={{ flexDirection: 'row', alignItems: 'center', flex: 1 }}>\n          <Text style={localStyles.itemTitle} numberOfLines={1}>{item.title}</Text>\n          <TouchableOpacity\n            onPress={() => handleDeleteItem(item)}\n            style={localStyles.deleteButton}\n            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n          >\n            <Icon name=\"trash-outline\" size={20} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n        <Text style={localStyles.itemMeta}>ğŸ“… {new Date(item.timestamp).toLocaleDateString('he-IL')} {new Date(item.timestamp).toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}</Text>\n      </View>\n\n      {/* ×©×•×¨×” × ×•×¡×¤×ª ×¢× ××¦×‘ + ×›××•×ª */}\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta}>\n          {item.condition === 'new' ? 'ğŸ†• ×—×“×©' :\n            item.condition === 'like_new' ? 'âœ¨ ×›××• ×—×“×©' :\n              item.condition === 'used' ? 'ğŸ“¦ ××©×•××©' : 'ğŸ”§ ×œ×—×œ×¤×™×'}\n          {' â€¢ '}\n          ×›××•×ª: {item.qty || 1}\n        </Text>\n      </View>\n\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta} numberOfLines={1}>\n          ğŸ“ {item.city || '××™×§×•× ×œ× ×–××™×Ÿ'}{item.address ? `, ${item.address}` : ''}\n        </Text>\n        <View style={localStyles.itemBadge}>\n          <Text style={localStyles.itemBadgeText}>\n            {getCategoryLabel(item.category)}\n          </Text>\n        </View>\n        <TouchableOpacity\n          style={localStyles.restoreChip}\n          onPress={() => {\n            setTitle(item.title);\n            setDescription(item.description || '');\n            setCity(item.city || '');\n            setAddress(item.address || '');\n            setPrice(String(item.price ?? 0));\n            setQty(item.qty || 1);\n            setCondition(item.condition || '');\n            if (item.image_base64) {\n              setImageUri(item.image_base64);\n            }\n          }}\n        >\n          <Text style={localStyles.restoreChipText}>×©×—×–×¨</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={menuOptions}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(o) => Alert.alert('×ª×¤×¨×™×˜', `× ×‘×—×¨: ${o}`)}\n        title=\"\"\n        placeholder={mode ? '×—×¤×© ×¤×¨×™×˜×™× ×–××™× ×™×' : '×©× ×”×¤×¨×™×˜'}\n        filterOptions={filterOptions}\n        sortOptions={itemsSortOptions}\n        searchData={allItems}\n        onSearch={handleSearch}\n      />\n\n      {mode ? (\n        <View style={{ flex: 1 }}>\n          <VerticalGridSlider\n            numColumns={numColumns}\n            onNumColumnsChange={setNumColumns}\n            style={{\n              top: 10, // Relative to container below header\n              left: 4,\n            }}\n          />\n          <ScrollContainer\n            style={localStyles.container}\n            contentStyle={[\n              localStyles.scrollContent,\n              isLandscape() && { paddingHorizontal: 32 }\n            ]}\n          >\n            {/* Header */}\n            <View style={localStyles.headerRow}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilters.length > 0 ? '×¤×¨×™×˜×™× ×–××™× ×™×' : '×¤×¨×™×˜×™× ××•××œ×¦×™×'}\n              </Text>\n              {(searchQuery || selectedFilters.length > 0 || selectedSorts.length > 0) && (\n                <TouchableOpacity style={localStyles.clearButton} onPress={handleClearAll}>\n                  <Text style={localStyles.clearButtonText}>× ×§×” ×”×›×œ</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n\n            {/* Posts List (in search mode) */}\n            <FlatList\n              data={filteredPosts}\n              renderItem={renderPostItem}\n              keyExtractor={(item) => item.id}\n              key={numColumns} // Force re-render on column change\n              numColumns={numColumns}\n              columnWrapperStyle={numColumns > 1 ? localStyles.columnWrapper : undefined}\n              contentContainerStyle={{ paddingHorizontal: screenPadding }}\n              scrollEnabled={false}\n              nestedScrollEnabled={true}\n              ListEmptyComponent={renderEmptyPosts}\n              showsVerticalScrollIndicator={false}\n            />\n\n            {/* Footer Stats */}\n            <View style={localStyles.section}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×¤×•×¡×˜×™× ×©×¤×•×¨×¡××•', value: filteredPosts.length, icon: 'cube-outline' },\n                  { label: '×œ×™×™×§×™×', value: filteredPosts.reduce((sum, p) => sum + (p.likes || 0), 0), icon: 'heart-outline' },\n                  { label: '×ª×’×•×‘×•×ª', value: filteredPosts.reduce((sum, p) => sum + (p.comments || 0), 0), icon: 'chatbubble-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={localStyles.section}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"items\" />\n            </View>\n          </ScrollContainer>\n        </View>\n      ) : (\n        <ScrollContainer\n          style={localStyles.container}\n          contentStyle={localStyles.scrollContent}\n          keyboardShouldPersistTaps=\"always\"\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={localStyles.formContainer}>\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×›×•×ª×¨×ª ×”×¤×¨×™×˜</Text>\n                <TextInput ref={titleInputRef} style={localStyles.input} value={title} onChangeText={setTitle} placeholder=\"×œ×“×•×’××”: ×¡×¤×” 3 ××•×©×‘×™×\" />\n              </View>\n            </View>\n\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×ª×™××•×¨</Text>\n                <TextInput style={[localStyles.input, { height: 80 }]} value={description} onChangeText={setDescription} placeholder=\"××¦×‘ ×”×¤×¨×™×˜, ××™×“×•×ª, ×”×¢×¨×•×ª\" multiline />\n              </View>\n            </View>\n\n            {/* ×‘×—×™×¨×ª ×§×˜×’×•×¨×™×” - ×“×¨×•×¤×“××•×Ÿ */}\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×§×˜×’×•×¨×™×”</Text>\n                <TouchableOpacity\n                  style={localStyles.dropdownButton}\n                  onPress={() => setShowCategoryDropdown(true)}\n                  activeOpacity={0.7}\n                >\n                  <Text style={[\n                    localStyles.dropdownButtonText,\n                    !selectedCategory && localStyles.dropdownPlaceholder\n                  ]}>\n                    {ITEM_CATEGORIES.find(c => c.id === selectedCategory)?.label || '×‘×—×¨ ×§×˜×’×•×¨×™×”'}\n                  </Text>\n                  <Icon\n                    name={showCategoryDropdown ? \"chevron-up\" : \"chevron-down\"}\n                    size={20}\n                    color={colors.textSecondary}\n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Modal ×œ×‘×—×™×¨×ª ×§×˜×’×•×¨×™×” */}\n            <Modal\n              visible={showCategoryDropdown}\n              transparent\n              animationType=\"fade\"\n              onRequestClose={() => setShowCategoryDropdown(false)}\n            >\n              <TouchableOpacity\n                style={localStyles.modalOverlay}\n                activeOpacity={1}\n                onPress={() => setShowCategoryDropdown(false)}\n              >\n                <View style={localStyles.modalContent} onStartShouldSetResponder={() => true}>\n                  <View style={localStyles.modalHeader}>\n                    <Text style={localStyles.modalTitle}>×‘×—×¨ ×§×˜×’×•×¨×™×”</Text>\n                    <TouchableOpacity\n                      onPress={() => setShowCategoryDropdown(false)}\n                      style={localStyles.modalCloseButton}\n                    >\n                      <Icon name=\"close\" size={24} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                  </View>\n                  <FlatList\n                    data={ITEM_CATEGORIES}\n                    keyExtractor={(item) => item.id}\n                    renderItem={({ item }) => (\n                      <TouchableOpacity\n                        style={[\n                          localStyles.dropdownItem,\n                          selectedCategory === item.id && localStyles.dropdownItemSelected\n                        ]}\n                        onPress={() => {\n                          setSelectedCategory(item.id as ItemType);\n                          setShowCategoryDropdown(false);\n                        }}\n                      >\n                        <Icon\n                          name={item.icon as any}\n                          size={20}\n                          color={selectedCategory === item.id ? colors.primary : colors.textSecondary}\n                          style={localStyles.dropdownItemIcon}\n                        />\n                        <Text style={[\n                          localStyles.dropdownItemText,\n                          selectedCategory === item.id && localStyles.dropdownItemTextSelected\n                        ]}>\n                          {item.label}\n                        </Text>\n                        {selectedCategory === item.id && (\n                          <Icon name=\"checkmark\" size={20} color={colors.success} />\n                        )}\n                      </TouchableOpacity>\n                    )}\n                    style={localStyles.dropdownList}\n                  />\n                </View>\n              </TouchableOpacity>\n            </Modal>\n\n            {/* Location fields - split into city and address */}\n            <View style={localStyles.row}>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×¢×™×¨</Text>\n                <TextInput\n                  style={localStyles.input}\n                  value={city}\n                  onChangeText={setCity}\n                  placeholder=\"×ª×œ ××‘×™×‘\"\n                />\n              </View>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×›×ª×•×‘×ª</Text>\n                <TextInput\n                  style={localStyles.input}\n                  value={address}\n                  onChangeText={setAddress}\n                  placeholder=\"×¨×—×•×‘ 123\"\n                />\n              </View>\n            </View>\n\n            {/* Quantity field */}\n            <View style={localStyles.row}>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×›××•×ª</Text>\n                <View style={localStyles.counterRow}>\n                  <TouchableOpacity style={localStyles.counterBtn} onPress={() => setQty(Math.max(1, qty - 1))}><Text style={localStyles.counterText}>-</Text></TouchableOpacity>\n                  <Text style={localStyles.counterValue}>{qty}</Text>\n                  <TouchableOpacity style={localStyles.counterBtn} onPress={() => setQty(qty + 1)}><Text style={localStyles.counterText}>+</Text></TouchableOpacity>\n                </View>\n              </View>\n            </View>\n\n            <Text style={localStyles.labelInline}>××¦×‘</Text>\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <View style={localStyles.tagsRow}>\n                  {[\n                    { key: 'new', label: '×—×“×©' },\n                    { key: 'like_new', label: '×›××• ×—×“×©' },\n                    { key: 'used', label: '××©×•××©' },\n                    { key: 'for_parts', label: '×œ×—×œ×¤×™×' },\n                  ].map(opt => (\n                    <TouchableOpacity\n                      key={opt.key}\n                      style={[\n                        localStyles.tag,\n                        localStyles.tagSmall,\n                        condition === (opt.key as any) && localStyles.tagSelected,\n                      ]}\n                      onPress={() => setCondition(opt.key as any)}\n                    >\n                      <Text\n                        style={[\n                          localStyles.tagText,\n                          localStyles.tagTextSm,\n                          condition === (opt.key as any) && localStyles.tagTextSelected,\n                        ]}\n                      >\n                        {opt.label}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              </View>\n            </View>\n\n            {/* ×›×¤×ª×•×¨ ×”×¢×œ××ª ×ª××•× ×” */}\n            <View style={localStyles.imageSection}>\n              <Text style={localStyles.labelInline}>×ª××•× ×” (××•×¤×¦×™×•× ×œ×™)</Text>\n              <TouchableOpacity\n                style={localStyles.imagePickerButton}\n                onPress={pickImage}\n              >\n                <Icon name=\"image-outline\" size={24} color={colors.primary} />\n                <Text style={localStyles.imagePickerText}>\n                  {imageUri ? 'âœ… ×ª××•× ×” × ×‘×—×¨×”' : '×‘×—×¨ ×ª××•× ×” ××”×’×œ×¨×™×”'}\n                </Text>\n              </TouchableOpacity>\n\n              {/* ×ª×¦×•×’×” ××§×“×™××” ×©×œ ×”×ª××•× ×” */}\n              {imageUri && (\n                <View style={localStyles.imagePreview}>\n                  <Image source={{ uri: imageUri }} style={localStyles.previewImage} />\n                  <View style={localStyles.imageInfo}>\n                    <Text style={localStyles.imageInfoText}>âœ… ×ª××•× ×” ××•×›× ×”</Text>\n                    <Text style={localStyles.imageInfoSubtext}>80Ã—80 ×¤×™×§×¡×œ×™×</Text>\n                  </View>\n                  <TouchableOpacity\n                    style={localStyles.removeImageButton}\n                    onPress={() => setImageUri('')}\n                  >\n                    <Icon name=\"close-circle\" size={24} color={colors.error} />\n                  </TouchableOpacity>\n                </View>\n              )}\n            </View>\n\n            <TouchableOpacity style={[localStyles.offerButton, !title && { opacity: 0.5 }]} onPress={handleCreateItem} disabled={!title}>\n              <Text style={localStyles.offerButtonText}>×¤×¨×¡× ×¤×¨×™×˜</Text>\n            </TouchableOpacity>\n          </View>\n\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>×¤×¨×™×˜×™× ×©×¤×¨×¡××ª ×œ××—×¨×•× ×”</Text>\n            {recentPosts.length === 0 ? (\n              <Text style={localStyles.emptyStateText}>××™×Ÿ ×¤×•×¡×˜×™× ×©×¤×•×¨×¡××• ×¢×“×™×™×Ÿ</Text>\n            ) : (\n              <View style={localStyles.recentContainer}>\n                {recentPosts.map((post) => {\n                  // Container has paddingHorizontal: 16, scrollContent has paddingHorizontal: 16, \n                  // and recentContainer has paddingHorizontal: 8\n                  // Total padding is 16 + 16 + 8 = 40 on each side\n                  const totalPadding = 16 + 16 + 8;\n                  const recentCardWidth = width - (totalPadding * 2);\n                  return (\n                    <View key={post.id} style={localStyles.recentItemWrapper}>\n                      <PostReelItem\n                        item={post}\n                        cardWidth={recentCardWidth}\n                        numColumns={1}\n                        onPress={(item) => {\n                          console.log('Post pressed:', item.id);\n                        }}\n                        onCommentPress={(item) => {\n                          console.log('Comment pressed:', item.id);\n                        }}\n                        onMorePress={handleMorePress}\n                        onPostClosed={handlePostClosed}\n                      />\n                    </View>\n                  );\n                })}\n              </View>\n            )}\n          </View>\n\n          {/* Add Links Section */}\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n            <AddLinkComponent category=\"items\" />\n          </View>\n        </ScrollContainer>\n      )}\n\n      {/* Item Details Modal */}\n      <ItemDetailsModal\n        visible={showItemModal}\n        onClose={handleCloseModal}\n        item={selectedItem}\n        type=\"item\"\n        navigation={navigation}\n      />\n\n      {/* Post Menu Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n  safeArea: { flex: 1, backgroundColor: colors.backgroundTertiary },\n  container: { flex: 1, paddingHorizontal: 16, paddingTop: 4 },\n  scrollContent: { paddingHorizontal: 16, paddingTop: 4, paddingBottom: 120, flexGrow: 1 },\n  formContainer: { padding: 5, alignItems: 'center', borderRadius: 15, marginBottom: 15 },\n  row: { flexDirection: rowDirection('row-reverse'), gap: 10, width: '100%', paddingHorizontal: 8 },\n  field: { flex: 1 },\n  fieldSmall: { flex: 0.5 },\n  label: { fontSize: FontSizes.medium, fontWeight: '600', color: colors.textPrimary, marginBottom: 10, textAlign: 'center' },\n  labelInline: { marginTop: 3, flex: 1, fontSize: FontSizes.medium, fontWeight: '600', color: colors.textPrimary, ...marginStartEnd(6, 0) },\n  input: { backgroundColor: colors.white, borderRadius: 10, padding: 12, fontSize: FontSizes.body, textAlign: biDiTextAlign('right'), color: colors.textPrimary, borderWidth: 1, borderColor: colors.secondary },\n  inputWrapper: { position: 'relative', justifyContent: 'center' },\n  inputWithAdornment: { paddingRight: 30 },\n  inputAdornment: { position: 'absolute', right: 10, color: colors.textSecondary, fontSize: FontSizes.body },\n  counterRow: { flexDirection: rowDirection('row'), alignItems: 'center', justifyContent: 'space-between', backgroundColor: colors.white, borderRadius: 10, borderWidth: 1, borderColor: colors.secondary, paddingHorizontal: 8, paddingVertical: 6 },\n  counterBtn: { backgroundColor: colors.pinkLight, paddingHorizontal: 10, paddingVertical: 6, borderRadius: 8 },\n  counterText: { fontSize: FontSizes.medium, fontWeight: 'bold', color: colors.textPrimary },\n  counterValue: { fontSize: FontSizes.medium, fontWeight: 'bold', color: colors.textPrimary, minWidth: 30, textAlign: 'center' },\n  tagsRow: { marginTop: 10, alignItems: 'stretch', flexDirection: rowDirection('row-reverse'), flexWrap: 'wrap', gap: 3 },\n  tag: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 999, paddingHorizontal: 10, paddingVertical: 6 },\n  tagSmall: { paddingHorizontal: 8, marginHorizontal: \"4%\", paddingVertical: 4 },\n  tagSelected: { backgroundColor: colors.backgroundSecondary, borderColor: colors.success },\n  tagText: { fontSize: FontSizes.small, color: colors.textPrimary },\n  tagTextSm: { fontSize: FontSizes.caption },\n  tagTextSelected: { color: colors.success, fontWeight: '600' },\n  offerButton: { backgroundColor: colors.accent, padding: 14, borderRadius: 12, alignItems: 'center', marginTop: 10 },\n  offerButtonText: { color: colors.background, fontSize: FontSizes.medium, fontWeight: 'bold' },\n  section: { marginBottom: 10 },\n  sectionTitle: { fontSize: FontSizes.body, fontWeight: 'bold', alignSelf: 'center', color: colors.textPrimary, textAlign: 'center' },\n  headerRow: { flexDirection: rowDirection('row-reverse'), justifyContent: 'space-between', alignItems: 'center', marginBottom: 8, paddingHorizontal: 4 },\n  clearButton: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 8, paddingHorizontal: 12, paddingVertical: 6 },\n  clearButtonText: { fontSize: FontSizes.small, color: colors.textPrimary, fontWeight: '600' },\n  noOuterScrollContainer: { flex: 1 },\n  sectionWithScroller: { flex: 1, backgroundColor: colors.pinkLight, borderRadius: 12, borderWidth: 1, borderColor: colors.secondary, paddingVertical: 8, paddingHorizontal: 8 },\n  innerScroll: { flex: 1 },\n  itemsGridContainer: {},\n  columnWrapper: {\n    justifyContent: 'space-between',\n  },\n  emptyState: { flex: 1, justifyContent: 'center', alignItems: 'center', paddingVertical: 40 },\n  emptyStateTitle: { fontSize: FontSizes.body, fontWeight: 'bold', color: colors.textPrimary, marginTop: 16, marginBottom: 8 },\n  emptyStateText: { fontSize: FontSizes.small, color: colors.textSecondary, textAlign: 'center', marginBottom: 16 },\n  emptyStateClearButton: { backgroundColor: colors.accent, paddingHorizontal: 20, paddingVertical: 10, borderRadius: 8, marginTop: 8 },\n  emptyStateClearButtonText: { fontSize: FontSizes.small, color: colors.background, fontWeight: '600' },\n  itemCardWrapper: { marginBottom: 8, width: '100%' },\n  itemCard: { backgroundColor: colors.pinkLight, borderRadius: 10, padding: 8, borderWidth: 1, borderColor: colors.secondary },\n  itemRow: { flexDirection: rowDirection('row-reverse'), justifyContent: 'space-between', alignItems: 'center', marginBottom: 4 },\n  itemTitle: { fontSize: FontSizes.small, fontWeight: 'bold', color: colors.textPrimary, textAlign: biDiTextAlign('right'), flex: 1, marginLeft: 6 },\n  itemMeta: { fontSize: FontSizes.small, color: colors.textSecondary },\n  itemBadge: { backgroundColor: colors.backgroundSecondary, paddingHorizontal: 6, paddingVertical: 2, borderRadius: 6, marginLeft: 6 },\n  itemBadgeText: { fontSize: FontSizes.small, color: colors.success, fontWeight: 'bold' },\n  recentContainer: { paddingHorizontal: 8, paddingVertical: 8 },\n  recentItemWrapper: { marginBottom: 8, width: '100%' },\n  restoreChip: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 999, paddingHorizontal: 10, paddingVertical: 4 },\n  restoreChipText: { fontSize: FontSizes.small, color: colors.textPrimary, fontWeight: '600' },\n  deleteButton: {\n    padding: 6,\n    marginLeft: 12,\n    backgroundColor: colors.pinkLight,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.pinkLight,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 32,\n    minHeight: 32,\n  },\n  itemImageContainer: {\n    padding: 4,\n    marginBottom: 4,\n  },\n  itemImageIndicator: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  imageSection: {\n    width: '100%',\n    marginTop: 8,\n    marginBottom: 8,\n  },\n  imagePickerButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 2,\n    borderColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    gap: 8,\n    marginTop: 4,\n  },\n  imagePickerText: {\n    color: colors.primary,\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  imagePreview: {\n    marginTop: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  previewImage: {\n    width: 80,\n    height: 80,\n    borderRadius: 8,\n    resizeMode: 'cover',\n  },\n  removeImageButton: {\n    marginLeft: 'auto',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 20,\n    padding: 4,\n  },\n  imageInfo: {\n    flex: 1,\n    marginLeft: 12,\n    justifyContent: 'center',\n  },\n  imageInfoText: {\n    fontSize: FontSizes.medium,\n    color: colors.success,\n    fontWeight: '600',\n  },\n  imageInfoSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 2,\n  },\n  // Dropdown styles\n  dropdownButton: {\n    backgroundColor: colors.white,\n    borderRadius: 10,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    minHeight: 48,\n  },\n  dropdownButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('right'),\n    flex: 1,\n  },\n  dropdownPlaceholder: {\n    color: colors.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: colors.white,\n    borderRadius: 16,\n    width: '85%',\n    maxHeight: '70%',\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: rowDirection('row-reverse'),\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  modalCloseButton: {\n    padding: 4,\n  },\n  dropdownList: {\n    maxHeight: 400,\n  },\n  dropdownItem: {\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  dropdownItemSelected: {\n    backgroundColor: colors.pinkLight,\n  },\n  dropdownItemIcon: {\n    marginLeft: 12,\n  },\n  dropdownItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: biDiTextAlign('right'),\n  },\n  dropdownItemTextSelected: {\n    color: colors.primary,\n    fontWeight: '600',\n  },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/JobsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/KnowledgeScreen.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/KnowledgeScreen.tsx:152:9\n  150 |       // Make sure state reflects this and update URL\n  151 |       if (mode !== false) {\n> 152 |         setMode(false);\n      |         ^^^^^^^ Avoid calling setState() directly within an effect\n  153 |       }\n  154 |       // Update URL to include /search\n  155 |       (navigation as any).setParams({ mode: 'search' });","line":152,"column":9,"nodeType":null,"endLine":152,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'mode' and 'navigation'. Either include them or remove the dependency array.","line":157,"column":6,"nodeType":"ArrayExpression","endLine":157,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, navigation, routeParams.mode]","fix":{"range":[4682,4701],"text":"[mode, navigation, routeParams.mode]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/KnowledgeScreen.tsx:172:9\n  170 |       const newMode = routeParams.mode === 'offer' ? true : false;\n  171 |       if (newMode !== mode) {\n> 172 |         setMode(newMode);\n      |         ^^^^^^^ Avoid calling setState() directly within an effect\n  173 |       }\n  174 |     }\n  175 |   }, [routeParams?.mode]);","line":172,"column":9,"nodeType":null,"endLine":172,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":175,"column":6,"nodeType":"ArrayExpression","endLine":175,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[5515,5534],"text":"[mode, routeParams.mode]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  TouchableOpacity,\n  Image,\n  Linking,\n  Alert,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport HeaderComp from '../components/HeaderComp';\nimport { donationResources } from '../utils/donationResources';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport ScrollContainer from '../components/ScrollContainer';\n\n// Mock data for educational content\nconst educationalLinks = [\n  {\n    id: '1',\n    title: '×§×•×¨×¡ ××ª××˜×™×§×” ×‘×¡×™×¡×™',\n    description: '×œ×™××•×“ ××ª××˜×™×§×” ×‘×¡×™×¡×™×ª ×œ×›×™×ª×•×ª ×-×•',\n    url: 'https://www.khanacademy.org/math',\n    icon: 'calculator-outline',\n    color: colors.success,\n    category: '××ª××˜×™×§×”',\n  },\n  {\n    id: '2',\n    title: '×œ×™××•×“ ×× ×’×œ×™×ª',\n    description: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××ª×—×™×œ×™× ×•××ª×§×“××™×',\n    url: 'https://www.duolingo.com',\n    icon: 'language-outline',\n    color: colors.info,\n    category: '×©×¤×•×ª',\n  },\n  {\n    id: '3',\n    title: '×ª×›× ×•×ª ×‘×¡×™×¡×™',\n    description: '×œ×™××•×“ ×ª×›× ×•×ª ×¢× Python ×•-JavaScript',\n    url: 'https://www.codecademy.com',\n    icon: 'code-outline',\n    color: colors.donationItems,\n    category: '×ª×›× ×•×ª',\n  },\n  {\n    id: '4',\n    title: '××“×¢×™× ×•×˜×‘×¢',\n    description: '×¡×¨×˜×•× ×™× ×—×™× ×•×›×™×™× ×¢×œ ××“×¢ ×•×˜×‘×¢',\n    url: 'https://www.youtube.com/c/Kurzgesagt',\n    icon: 'flask-outline',\n    color: colors.warning,\n    category: '××“×¢×™×',\n  },\n  {\n    id: '5',\n    title: '×”×™×¡×˜×•×¨×™×” ×™×”×•×“×™×ª',\n    description: '×§×•×¨×¡ ×”×™×¡×˜×•×¨×™×” ×™×”×•×“×™×ª ×•×™×©×¨××œ×™×ª',\n    url: 'https://www.youtube.com/c/JewishHistory',\n    icon: 'library-outline',\n    color: colors.textPrimary,\n    category: '×”×™×¡×˜×•×¨×™×”',\n  },\n  {\n    id: '6',\n    title: '××× ×•×ª ×•×™×¦×™×¨×”',\n    description: '×©×™×¢×•×¨×™ ××× ×•×ª ×•×™×¦×™×¨×” ×œ×›×œ ×”×’×™×œ××™×',\n    url: 'https://www.youtube.com/c/ArtForKidsHub',\n    icon: 'brush-outline',\n    color: colors.pinkDeep,\n    category: '××× ×•×ª',\n  },\n];\n\nconst communityContent = [\n  {\n    id: '1',\n    title: '×©×™×¢×•×¨ ×¤×¨×˜×™ ×‘××ª××˜×™×§×”',\n    teacher: '×©×¨×” ×›×”×Ÿ',\n    subject: '××ª××˜×™×§×” - ×›×™×ª×” ×™\"×',\n    description: '×©×™×¢×•×¨ ×¤×¨×˜×™ ×‘××ª××˜×™×§×” ×œ×›×™×ª×” ×™\"×, ×›×•×œ×œ ×”×›× ×” ×œ×‘×’×¨×•×ª',\n    rating: 4.8,\n    students: 15,\n    price: 'â‚ª80 ×œ×©×¢×”',\n    image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400',\n  },\n  {\n    id: '2',\n    title: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××‘×•×’×¨×™×',\n    teacher: '×“×•×“ ×œ×•×™',\n    subject: '×× ×’×œ×™×ª - ××ª×—×™×œ×™×',\n    description: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××‘×•×’×¨×™× ××ª×—×™×œ×™×, ×©×™×¢×•×¨×™× ×§×‘×•×¦×ª×™×™×',\n    rating: 4.9,\n    students: 8,\n    price: 'â‚ª120 ×œ×©×™×¢×•×¨',\n    image: 'https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=400',\n  },\n  {\n    id: '3',\n    title: '×©×™×¢×•×¨ ××•×–×™×§×” - ×¤×¡× ×ª×¨',\n    teacher: '××™×›×œ ×¨×•×–×Ÿ',\n    subject: '××•×–×™×§×” - ×¤×¡× ×ª×¨',\n    description: '×©×™×¢×•×¨×™ ×¤×¡× ×ª×¨ ×œ××ª×—×™×œ×™× ×•××ª×§×“××™×, ×›×•×œ×œ ×ª×™××•×¨×™×”',\n    rating: 4.7,\n    students: 12,\n    price: 'â‚ª100 ×œ×©×¢×”',\n    image: 'https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?w=400',\n  },\n  {\n    id: '4',\n    title: '×§×•×¨×¡ ×ª×›× ×•×ª ×œ×™×œ×“×™×',\n    teacher: '×™×•×¡×™ ×’×•×œ×“×‘×¨×’',\n    subject: '×ª×›× ×•×ª - Scratch',\n    description: '×§×•×¨×¡ ×ª×›× ×•×ª ×œ×™×œ×“×™× ×¢× Scratch, ×œ×™××•×“ ××©×—×§',\n    rating: 4.6,\n    students: 20,\n    price: 'â‚ª90 ×œ×©×™×¢×•×¨',\n    image: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400',\n  },\n];\n\nexport default function KnowledgeScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { selectedUser, isRealAuth } = useUser();\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to teach/share), false = seeker (needs learning)\n  // URL mode: 'offer' = true, 'search' = false or undefined = search\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n  \n  // If no mode in URL, set it to search (default) and update URL\n  useEffect(() => {\n    if (!routeParams?.mode || routeParams.mode === 'undefined' || routeParams.mode === 'null' || routeParams.mode === '') {\n      // URL doesn't have mode, so we're in default search mode\n      // Make sure state reflects this and update URL\n      if (mode !== false) {\n        setMode(false);\n      }\n      // Update URL to include /search\n      (navigation as any).setParams({ mode: 'search' });\n    }\n  }, [routeParams?.mode]);\n  \n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [filteredEducationalLinks, setFilteredEducationalLinks] = useState(educationalLinks);\n  const [filteredCommunityContent, setFilteredCommunityContent] = useState(communityContent);\n  const [selectedMentorship, setSelectedMentorship] = useState<any>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ“š KnowledgeScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setSelectedMentorship(null);\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  // Filter and sort options for knowledge screen\n  const knowledgeFilterOptions = [\n    \"××ª××˜×™×§×”\",\n    \"×©×¤×•×ª\",\n    \"×ª×›× ×•×ª\",\n    \"××“×¢×™×\",\n    \"×”×™×¡×˜×•×¨×™×”\",\n    \"××× ×•×ª\",\n    \"××•×–×™×§×”\",\n    \"×¡×¤×•×¨×˜\",\n    \"×‘×™×©×•×œ\",\n    \"×˜×›× ×•×œ×•×’×™×”\",\n    \"×¤×¡×™×›×•×œ×•×’×™×”\",\n    \"×›×œ×›×œ×”\"\n  ];\n\n  const knowledgeSortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ×§×˜×’×•×¨×™×”\",\n    \"×œ×¤×™ ×“×™×¨×•×’\",\n    \"×œ×¤×™ ××¡×¤×¨ ×ª×œ××™×“×™×\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n  const handleLinkPress = async (url: string, title: string) => {\n    console.log('Opening educational link:', title);\n    try {\n      const supported = await Linking.canOpenURL(url);\n      if (supported) {\n        await Linking.openURL(url);\n      } else {\n        Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨');\n      }\n    } catch (error) {\n      console.error('Error opening link:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×¤×ª×™×—×ª ×”×§×™×©×•×¨');\n    }\n  };\n\n  const handleCommunityContentPress = (content: any) => {\n    console.log('Community content pressed:', content.title);\n    Alert.alert(\n      '×”×¦×˜×¨×¤×•×ª ×œ×§×•×¨×¡',\n      `×”×× ×ª×¨×¦×” ×œ×”×¦×˜×¨×£ ×œ×§×•×¨×¡ \"${content.title}\" ×¢× ${content.teacher}?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { text: '×”×¦×˜×¨×£', onPress: () => Alert.alert('×”×¦×œ×—×”', '×”×¦×˜×¨×¤×ª ×œ×§×•×¨×¡ ×‘×”×¦×œ×—×”!') }\n      ]\n    );\n  };\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('ğŸ“š KnowledgeScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\");\n    setSelectedSort(sorts?.[0] || \"\");\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      // Split results between educational links and community content\n      const educationalResults = results.filter(item => item.url);\n      const communityResults = results.filter(item => item.teacher);\n      \n      setFilteredEducationalLinks(educationalResults);\n      setFilteredCommunityContent(communityResults);\n    } else {\n      // Otherwise, perform local filtering\n      let filteredEducational = [...educationalLinks];\n      let filteredCommunity = [...communityContent];\n      \n      // Filter by search query\n      if (query.trim() !== \"\") {\n        filteredEducational = filteredEducational.filter(item =>\n          item.title.toLowerCase().includes(query.toLowerCase()) ||\n          item.description.toLowerCase().includes(query.toLowerCase()) ||\n          item.category.toLowerCase().includes(query.toLowerCase())\n        );\n        \n        filteredCommunity = filteredCommunity.filter(item =>\n          item.title.toLowerCase().includes(query.toLowerCase()) ||\n          item.subject.toLowerCase().includes(query.toLowerCase()) ||\n          item.description.toLowerCase().includes(query.toLowerCase()) ||\n          item.teacher.toLowerCase().includes(query.toLowerCase())\n        );\n      }\n      \n      setFilteredEducationalLinks(filteredEducational);\n      setFilteredCommunityContent(filteredCommunity);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n      <HeaderComp\n        mode={mode}\n        menuOptions={[]}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={() => {}}\n        title=\"\"\n        placeholder=\"×—×¤×© ×§×•×¨×¡×™× ×•×©×™×¢×•×¨×™×...\"\n        filterOptions={knowledgeFilterOptions}\n        sortOptions={knowledgeSortOptions}\n        searchData={isRealAuth ? [] : [...educationalLinks, ...communityContent]}\n        onSearch={handleSearch}\n      />\n\n      <ScrollContainer\n        style={styles.scrollView}\n        contentStyle={styles.content}\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Educational Links Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×—×™× ×•×›×™×™×</Text>\n          <Text style={styles.sectionDescription}>\n            ×§×™×©×•×¨×™× ×œ××ª×¨×™ ×œ×™××•×“ ××•××œ×¦×™× ×‘×—×™× ×\n          </Text>\n          \n          <View style={styles.linksGrid}>\n            {(isRealAuth ? [] : filteredEducationalLinks).map((link) => (\n              <TouchableOpacity\n                key={link.id}\n                style={styles.linkCard}\n                onPress={() => handleLinkPress(link.url, link.title)}\n              >\n                <View style={styles.linkHeader}>\n                  <View style={[styles.linkIcon, { backgroundColor: link.color }]}>\n                    <Ionicons name={link.icon as any} size={20} color=\"white\" />\n                  </View>\n                  <Text style={styles.linkTitle}>{link.title}</Text>\n                  <Ionicons name=\"open-outline\" size={16} color={colors.textSecondary} />\n                </View>\n                <View style={styles.linkContent}>\n                  <Text style={styles.linkCategory}>{link.category}</Text>\n                  <Text style={styles.linkDescription}>{link.description}</Text>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Recommended Organizations Section */}\n        {!!donationResources.knowledge && donationResources.knowledge.length > 0 && (\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{'×¢××•×ª×•×ª ××•××œ×¦×•×ª'}</Text>\n            <Text style={styles.sectionDescription}>\n              ××¨×’×•× ×™× ××•×‘×™×œ×™× ×‘×™×©×¨××œ ×œ×—×•× ×›×•×ª, ×œ×™××•×“ ×•×ª××™×›×” ×—×™× ×•×›×™×ª\n            </Text>\n            <View style={styles.linksGrid}>\n              {donationResources.knowledge.map((org) => (\n                <TouchableOpacity\n                  key={`knowledge-${org.url}`}\n                  style={styles.linkCard}\n                  onPress={() => handleLinkPress(org.url, org.name)}\n                >\n                  <View style={styles.linkHeader}>\n                    <View style={[styles.linkIcon, { backgroundColor: colors.info }]}>\n                      <Ionicons name={'school-outline' as any} size={20} color=\"white\" />\n                    </View>\n                    <Text style={styles.linkTitle}>{org.name}</Text>\n                    <View style={{ borderWidth: 1, borderColor: colors.info, borderRadius: 999, paddingHorizontal: 8, paddingVertical: 2 }}>\n                      <Text style={{ color: colors.info, fontSize: FontSizes.caption }}>×‘×§×¨ ×‘××ª×¨</Text>\n                    </View>\n                  </View>\n                  <View style={styles.linkContent}>\n                    {!!org.description && (\n                      <Text style={styles.linkDescription}>{org.description}</Text>\n                    )}\n                  </View>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n        )}\n\n        {/* Community Content Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×ª×•×›×Ÿ ×§×”×™×œ×ª×™</Text>\n          <Text style={styles.sectionDescription}>\n            ×©×™×¢×•×¨×™× ×¤×¨×˜×™×™× ×•×§×•×¨×¡×™× ××”×§×”×™×œ×”\n          </Text>\n          \n          <View style={styles.communityGrid}>\n            {(isRealAuth ? [] : filteredCommunityContent).map((content) => (\n              <TouchableOpacity\n                key={content.id}\n                style={styles.communityCard}\n                onPress={() => handleCommunityContentPress(content)}\n              >\n                <Image source={{ uri: content.image }} style={styles.communityImage} />\n                <View style={styles.communityContent}>\n                  <View style={styles.communityHeader}>\n                    <Text style={styles.communityTitle}>{content.title}</Text>\n                    <View style={styles.ratingContainer}>\n                      <Ionicons name=\"star\" size={16} color={colors.warning} />\n                      <Text style={styles.ratingText}>{content.rating}</Text>\n                    </View>\n                  </View>\n                  \n                  <Text style={styles.communitySubject}>{content.subject}</Text>\n                  <Text style={styles.communityDescription}>{content.description}</Text>\n                  \n                  <View style={styles.communityFooter}>\n                    <View style={styles.communityStats}>\n                      <Ionicons name=\"people\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.communityStatsText}>{content.students} ×ª×œ××™×“×™×</Text>\n                    </View>\n                    <Text style={styles.communityPrice}>{content.price}</Text>\n                  </View>\n                  \n                  <View style={styles.communityTeacher}>\n                    <Ionicons name=\"person\" size={16} color={colors.secondary} />\n                    <Text style={styles.communityTeacherText}>{content.teacher}</Text>\n                  </View>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n\n        {/* Add Links Section */}\n        <View style={styles.sectionLinks}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n          <AddLinkComponent category=\"knowledge\" />\n        </View>\n      </ScrollContainer>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n\n  header: {\n    backgroundColor: colors.background,\n    paddingTop: 20,\n    paddingBottom: 15,\n    paddingHorizontal: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: 45,\n    height: 45,\n    borderRadius: 22.5,\n    marginRight: 12,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  welcomeText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 2,\n  },\n  userName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  settingsButton: {\n    padding: 8,\n  },\n  scrollView: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  content: {\n    paddingBottom: 40,\n  },\n  section: {\n    marginTop: 20,\n    marginBottom: 30,\n    paddingHorizontal: 60,\n  },\n  sectionLinks: {\n    marginTop: 20,\n    marginBottom: 130,\n    paddingHorizontal: 60,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n  },\n  sectionDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 16,\n  },\n  linksGrid: {\n    gap: 15,\n  },\n  linkCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    padding: 20,\n    marginBottom: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  linkHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  linkIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  linkContent: {\n    flex: 1,\n  },\n  linkCategory: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 3,\n  },\n  linkTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n    marginRight: 8,\n  },\n  linkDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 6,\n  },\n  communityGrid: {\n    gap: 15,\n  },\n  communityCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    padding: 20,\n    marginBottom: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  communityImage: {\n    width: '100%',\n    height: 150,\n  },\n  communityContent: {\n    padding: 15,\n  },\n  communityHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 6,\n  },\n  communityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  ratingText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    marginLeft: 4,\n  },\n  communitySubject: {\n    fontSize: FontSizes.small,\n    color: colors.secondary,\n    marginBottom: 6,\n  },\n  communityDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 8,\n    lineHeight: 16,\n  },\n  communityFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  communityStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  communityStatsText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  communityPrice: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.secondary,\n  },\n  communityTeacher: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  communityTeacherText: {\n    fontSize: FontSizes.small,\n    color: colors.secondary,\n    marginLeft: 4,\n  },\n  statsSection: {\n    marginBottom: 30,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.secondary,\n    marginTop: 8,\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/LanguagesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MatchmakingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MedicalScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MentalHealthScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx:125:9\n  123 |       const newMode = routeParams.mode === 'offer' ? true : false;\n  124 |       if (newMode !== mode) {\n> 125 |         setMode(newMode);\n      |         ^^^^^^^ Avoid calling setState() directly within an effect\n  126 |       }\n  127 |     }\n  128 |   }, [routeParams?.mode]);","line":125,"column":9,"nodeType":null,"endLine":125,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":128,"column":6,"nodeType":"ArrayExpression","endLine":128,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[4799,4818],"text":"[mode, routeParams.mode]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `isRealAuth`, but the source dependencies were [externalCharities]. Inferred different dependency than source.\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx:196:43\n  194 |   }, [t]);\n  195 |\n> 196 |   const combinedCharities = React.useMemo(() => {\n      |                                           ^^^^^^^\n> 197 |     const mapFromStore = charitiesStore.map((c, index) => ({\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 198 |       id: `store_${c.id}`,\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 210 |     return [...mapFromStore, ...dummies, ...externalCharities];\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 211 |   }, [externalCharities]);\n      | ^^^^ Could not preserve existing manual memoization\n  212 |\n  213 |   const [filteredCharities, setFilteredCharities] = useState(combinedCharities); // Search results\n  214 |","line":196,"column":43,"nodeType":null,"endLine":211,"endColumn":4},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has a missing dependency: 'isRealAuth'. Either include it or remove the dependency array.","line":211,"column":6,"nodeType":"ArrayExpression","endLine":211,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [externalCharities, isRealAuth]","fix":{"range":[7873,7892],"text":"[externalCharities, isRealAuth]"}}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":268,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":268,"endColumn":45,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10557,10589],"text":"// @ts-expect-error window ×§×™×™× ×‘×“×¤×“×¤×Ÿ"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":281,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":281,"endColumn":45,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10936,10968],"text":"// @ts-expect-error window ×§×™×™× ×‘×“×¤×“×¤×Ÿ"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":310,"column":11,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":310,"endColumn":24,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[11955,11968],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx:672:10\n  670 |         showsVerticalScrollIndicator={false}\n  671 |       >\n> 672 |         <FormHeader />\n      |          ^^^^^^^^^^ This component is created during render\n  673 |\n  674 |         {mode ? (\n  675 |           // Donor mode - show charities for donation and donation history\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx:623:22\n  621 |   );\n  622 |\n> 623 |   const FormHeader = () => (\n      |                      ^^^^^^^\n> 624 |     <View>\n      | ^^^^^^^^^^\n> 625 |       {/* Mode toggle is now handled by HeaderComp */}\n      â€¦\n      | ^^^^^^^^^^\n> 647 |     </View>\n      | ^^^^^^^^^^\n> 648 |   );\n      | ^^^^ The component is created during render here\n  649 |   \n  650 |   return (\n  651 |     <SafeAreaView style={localStyles.safeArea}>","line":672,"column":10,"nodeType":null,"endLine":672,"endColumn":20}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  FlatList,\n  TouchableOpacity,\n  Image,\n  Alert,\n  ScrollView,\n  TextInput,\n  Platform,\n  Modal,\n  Linking,\n  PanResponder,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { FontSizes } from '../globals/constants';\n// Empty arrays - replace with real data from API\nconst charityNames: string[] = [];\nconst charities: any[] = [];\nconst donations: any[] = [];\nimport { charitiesStore } from '../utils/charitiesStore';\nimport { donationResources } from '../utils/donationResources';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\n\n// Convert new charity format to old dummy format for compatibility\nconst dummyCharitiesBase = charities.map((charity, index) => ({\n  id: index + 1,\n  name: charity.name,\n  category: charity.tags[0] || \"×›×œ×œ×™\",\n  location: charity.location.city,\n  rating: charity.rating,\n  donors: charity.volunteersCount + charity.beneficiariesCount,\n  description: charity.description.substring(0, 100) + \"...\",\n  image: charity.tags[0] === \"×§×©×™×©×™×\" ? \"ğŸ‘´\" : \n        charity.tags[0] === \"×—×™× ×•×š\" ? \"ğŸ“š\" : \n        charity.tags[0] === \"×‘×¢×œ×™ ×—×™×™×\" ? \"ğŸ•\" : \n        charity.tags[0] === \"×‘×¨×™××•×ª\" ? \"ğŸ¥\" : \"ğŸ’\",\n  minDonation: 20 + (index * 10)\n}));\n\n// Convert donations to old format for recent donations\nconst dummyRecentDonationsBase = donations.slice(0, 5).map((donation, index) => ({\n  id: index + 1,\n  charityName: charities[index % charities.length]?.name || \"×¢××•×ª×” ×œ× ×™×“×•×¢×”\",\n  amount: donation.amount || 100,\n  date: new Date(donation.createdAt).toLocaleDateString('he-IL'),\n  status: \"×”×•×©×œ××”\",\n  category: donation.category || \"×›×œ×œ×™\"\n}));\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { Slider } from '@miblanchard/react-native-slider';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport AddLinkComponent from '../components/AddLinkComponent';\n\n// Slider component using @miblanchard/react-native-slider\nconst DonationAmountSlider: React.FC<{\n  value: number;\n  onChange: (nextValue: number) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n}> = ({ value, onChange, min = 0, max = 1000, step = 5 }) => {\n  const toNumber = (v: number | number[]) => (Array.isArray(v) ? v[0] : v);\n  return (\n    <View style={localStyles.amountSliderContainer}>\n      <Slider\n        value={value}\n        onValueChange={(v: number | number[]) => onChange(toNumber(v))}\n        minimumValue={min}\n        maximumValue={max}\n        step={step}\n        trackClickable\n        containerStyle={{ paddingHorizontal: 0 }}\n        trackStyle={localStyles.sliderTrack}\n        minimumTrackTintColor={colors.secondary}\n        maximumTrackTintColor=\"transparent\"\n        thumbStyle={localStyles.sliderThumb}\n        renderThumbComponent={() => <View style={localStyles.sliderThumbInner} />}\n      />\n      <View style={localStyles.amountRangeRow}>\n        <Text style={localStyles.amountRangeText}>â‚ª{min}</Text>\n        <Text style={localStyles.amountDisplayText}>â‚ª{value}</Text>\n        <Text style={localStyles.amountRangeText}>â‚ª{max}</Text>\n      </View>\n    </View>\n  );\n};\n\nexport default function MoneyScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { isRealAuth } = useUser();\n  const { t } = useTranslation(['donations','common']);\n  // Debug log for MoneyScreen\n  // console.log('ğŸ’° MoneyScreen - Component rendered');\n  // console.log('ğŸ’° MoneyScreen - Navigation object:', navigation);\n  // console.log('ğŸ’° MoneyScreen - Navigation state:', JSON.stringify(navigation.getState(), null, 2));\n  const [selectedRecipient, setSelectedRecipient] = useState<string>('');\n  const [amount, setAmount] = useState<string>('50');\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to donate), false = seeker (needs help)\n  // URL mode: 'offer' = true, 'search' = false\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Build external charities from donationResources to appear as donation cards\n  const externalCharities = React.useMemo(() => {\n    const categoryIds = Object.keys(donationResources || {}) as string[];\n    const toEmoji = (id: string): string => {\n      switch (id) {\n        case 'food': return 'ğŸ';\n        case 'clothes': return 'ğŸ‘•';\n        case 'books': return 'ğŸ“š';\n        case 'furniture': return 'ğŸ›‹ï¸';\n        case 'medical': return 'ğŸ¥';\n        case 'animals': return 'ğŸ¾';\n        case 'housing': return 'ğŸ ';\n        case 'support': return 'ğŸ’Ÿ';\n        case 'education': return 'ğŸ“';\n        case 'environment': return 'ğŸŒ¿';\n        case 'technology': return 'ğŸ’»';\n        case 'knowledge': return 'ğŸ§ ';\n        default: return 'ğŸ’';\n      }\n    };\n    const list: any[] = [];\n    categoryIds.forEach((catId) => {\n      const resources = (donationResources as any)[catId] || [];\n      const categoryTitle = (t(`donations:categories.${catId}.title`) as string) || catId;\n      resources.forEach((res: any, index: number) => {\n        list.push({\n          id: `ext_${catId}_${index}`,\n          name: res.name,\n          category: categoryTitle,\n          location: '×›×œ ×”××¨×¥',\n          rating: 4.7,\n          donors: 500 + (index * 7),\n          description: res.description || categoryTitle,\n          image: toEmoji(catId),\n          minDonation: 20,\n          _extUrl: res.url,\n        });\n      });\n    });\n    // Deduplicate by name\n    const seen = new Set<string>();\n    return list.filter((c) => (seen.has(c.name) ? false : (seen.add(c.name), true)));\n  }, [t]);\n\n  const combinedCharities = React.useMemo(() => {\n    const mapFromStore = charitiesStore.map((c, index) => ({\n      id: `store_${c.id}`,\n      name: c.name,\n      category: (c.categories && c.categories[0]) ? String(c.categories[0]) : '×›×œ×œ×™',\n      location: c.location?.city || '×›×œ ×”××¨×¥',\n      rating: 4.8,\n      donors: 100 + index * 5,\n      description: c.description || '',\n      image: 'ğŸ’',\n      minDonation: 20,\n      _extUrl: c.url,\n    }));\n    const dummies = isRealAuth ? [] : dummyCharitiesBase;\n    return [...mapFromStore, ...dummies, ...externalCharities];\n  }, [externalCharities]);\n\n  const [filteredCharities, setFilteredCharities] = useState(combinedCharities); // Search results\n\n  // Menu modals state\n  const [isSavingsModalVisible, setIsSavingsModalVisible] = useState(false);\n  const [isRecurringModalVisible, setIsRecurringModalVisible] = useState(false);\n  const [isReceiptsModalVisible, setIsReceiptsModalVisible] = useState(false);\n\n  // Charity modal state\n  const [isCharityModalVisible, setIsCharityModalVisible] = useState(false);\n  const [selectedCharityForModal, setSelectedCharityForModal] = useState<any | null>(null);\n  const [charityModalIsOfferMode, setCharityModalIsOfferMode] = useState<boolean>(true);\n  const [charityModalAmount, setCharityModalAmount] = useState<string>('50');\n\n  // Quick donate preferred charity (fallback to top rated)\n  const preferredCharity = filteredCharities.length > 0\n    ? filteredCharities[0]\n    : (isRealAuth ? (charitiesStore[0] ? {\n        id: `store_${charitiesStore[0].id}`,\n        name: charitiesStore[0].name,\n        category: (charitiesStore[0].categories && charitiesStore[0].categories[0]) ? String(charitiesStore[0].categories[0]) : '×›×œ×œ×™',\n        location: charitiesStore[0].location?.city || '×›×œ ×”××¨×¥',\n        rating: 4.8,\n        donors: 100,\n        description: charitiesStore[0].description || '',\n        image: 'ğŸ’',\n        minDonation: 20,\n        _extUrl: charitiesStore[0].url,\n      } : null) : (dummyCharitiesBase[0] || null));\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ’° MoneyScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setAmount('');\n      setSelectedRecipient('');\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n  const PAYBOX_WEB_URL = 'https://payboxapp.com/transfer?phone=0528616878&amount={AMOUNT}&note=×ª×¨×•××”%20×œ×§×”×™×œ×”';\n  const PAYBOX_GROUP_LINK: string | null = 'https://payboxapp.page.link/tfzsUhNpZzRqqe1g8';\n  const BIT_GROUP_LINK: string | null = 'https://www.bitpay.co.il/app/share-info?i=192485429007_19klqS2v';\n\n  const openPaymentApp = async (amount: number) => {\n    const encodedReason = encodeURIComponent('×ª×¨×•××” ×œ×§×”×™×œ×”');\n    const payboxGroupLink: string = (PAYBOX_GROUP_LINK ?? '').trim();\n    const bitGroupLink: string = (BIT_GROUP_LINK ?? '').trim();\n    const bitUrl = `bit://pay?phone=0528616878&amount=${amount}&reason=${encodedReason}`;\n\n    try {\n      // 1) ×¢×“×™×¤×•×ª: ×¤×ª×™×—×” ×™×©×™×¨×” ×©×œ ×§×‘×•×¦×ª PayBox \"Karma Community\" ×× ×¡×•×¤×§ ×§×™×©×•×¨ (× × ×¡×” ×œ×¤×ª×•×— ×™×©×¨)\n      if (payboxGroupLink.length > 0) {\n        try {\n          if (Platform.OS === 'web') {\n            // @ts-ignore window ×§×™×™× ×‘×“×¤×“×¤×Ÿ\n            window.open(payboxGroupLink, '_blank');\n            return;\n          }\n          await Linking.openURL(payboxGroupLink);\n          return;\n        } catch {}\n      }\n\n      // 1b) ×¢×“×™×¤×•×ª ×©× ×™×™×”: ×¤×ª×™×—×” ×™×©×™×¨×” ×©×œ ×§×‘×•×¦×ª Bit ×× ×™×© ×§×™×©×•×¨\n      if (bitGroupLink.length > 0) {\n        try {\n          if (Platform.OS === 'web') {\n            // @ts-ignore window ×§×™×™× ×‘×“×¤×“×¤×Ÿ\n            window.open(bitGroupLink, '_blank');\n            return;\n          }\n          await Linking.openURL(bitGroupLink);\n          return;\n        } catch {}\n      }\n\n      // 2) ×× ×œ× × ×¤×ª×— ×§×™×©×•×¨ ×§×‘×•×¦×”: × ×•×•×“× ×©×™×© ×¡×›×•× ×—×™×•×‘×™ ×œ×¤× ×™ ××¡×œ×•×œ×™ ×¡×›×•× ×™×©×™×¨×™×\n      if (!amount || amount <= 0) {\n        Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ ×¡×›×•× ×—×™×•×‘×™ ×œ×¤× ×™ ×¤×ª×™×—×ª ×”×ª×©×œ×•×.');\n        return;\n      }\n\n      // 3) × ×™×¡×™×•×Ÿ ×œ×¤×ª×•×— PayBox ×¢× ×¡×›×•× ×•×”×¢×¨×” (××¤×œ×™×§×¦×™×”)\n      const payboxScheme = `paybox://transfer?phone=0528616878&amount=${amount}&note=${encodedReason}`;\n      const supportedPb = await Linking.canOpenURL(payboxScheme);\n      if (supportedPb) {\n        await Linking.openURL(payboxScheme);\n        return;\n      }\n\n      // 4) × ×™×¡×™×•×Ÿ ×“×¨×š ×“×¤×“×¤×Ÿ: ×× ×™×© ×§×™×©×•×¨ ×§×‘×•×¦×” â€” × ×©×ª××© ×‘×•; ××—×¨×ª ×§×™×©×•×¨ ×”×¢×‘×¨×” ×¨×’×™×œ\n      const webUrl = payboxGroupLink.length > 0\n        ? payboxGroupLink\n        : PAYBOX_WEB_URL.replace('{AMOUNT}', String(amount));\n      try {\n        if (Platform.OS === 'web') {\n          // @ts-ignore\n          window.open(webUrl, '_blank');\n          return;\n        }\n        await Linking.openURL(webUrl);\n        return;\n      } catch {}\n\n      // 5) Fallback ××—×¨×•×Ÿ: Bit\n      const bitSupported = await Linking.canOpenURL(bitUrl);\n      if (bitSupported) {\n        await Linking.openURL(bitUrl);\n        return;\n      }\n    } catch (error) {\n      console.error('Error opening payment link:', error);\n    }\n    Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×§×™×©×•×¨ ×”×ª×©×œ×•× ×‘××›×©×™×¨ ×–×”.');\n  };\n\n  // Function to filter charities by search and filter\n  const getFilteredCharities = () => {\n    let filtered = [...combinedCharities];\n\n    // Filter by search\n    if (searchQuery) {\n      filtered = filtered.filter(charity =>\n        charity.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        charity.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        charity.location.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Filter by category\n    if (selectedFilter) {\n      filtered = filtered.filter(charity => charity.category === selectedFilter);\n    }\n\n    // Sorting\n    switch (selectedSort) {\n      case \"××œ×¤×‘×™×ª×™\":\n        filtered.sort((a, b) => a.name.localeCompare(b.name));\n        break;\n      case \"×œ×¤×™ ××™×§×•×\":\n        filtered.sort((a, b) => a.location.localeCompare(b.location));\n        break;\n      case \"×œ×¤×™ ×ª×—×•×\":\n        filtered.sort((a, b) => a.category.localeCompare(b.category));\n        break;\n      case \"×œ×¤×™ ××¡×¤×¨ ×ª×•×¨××™×\":\n        filtered.sort((a, b) => b.donors - a.donors);\n        break;\n      case \"×œ×¤×™ ×“×™×¨×•×’\":\n         filtered.sort((a, b) => (Number(b.rating) || 0) - (Number(a.rating) || 0));\n        break;\n      case \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\":\n        // Default - by rating\n        filtered.sort((a, b) => b.rating - a.rating);\n        break;\n    }\n\n    return filtered;\n  };\n\n  // Function to filter recent donations\n  const getFilteredRecentDonations = () => {\n    const base = isRealAuth ? [] : dummyRecentDonationsBase;\n    let filtered = [...base];\n\n    // Filter by search\n    if (searchQuery) {\n      filtered = filtered.filter(donation =>\n        donation.charityName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        donation.category.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Filter by category\n    if (selectedFilter) {\n      filtered = filtered.filter(donation => donation.category === selectedFilter);\n    }\n\n    return filtered;\n  };\n\n  // Function to show charity details in search mode\n  const showCharityDetailsModal = (charity: any) => {\n    Alert.alert(\n      charity.name,\n      `${charity.description}\\n\\nğŸ“ ×¦×•×¨ ×§×©×¨: 03-1234567\\nğŸ“§ ××™××™×™×œ: info@${charity.name.replace(/\\s+/g, '').toLowerCase()}.org.il\\n\\n×”×× ×ª×¨×¦×” ×œ×ª×¨×•× ×œ×¢××•×ª×” ×–×•?`,\n      [\n        {\n          text: '×œ× ×¢×›×©×™×•',\n          style: 'cancel',\n        },\n        {\n          text: '×ª×¨×•× ×¢×›×©×™×•',\n          onPress: () => showDonationAmountModal(charity),\n        },\n      ]\n    );\n  };\n\n  // Function to select donation amount\n  const showDonationAmountModal = (charity: any) => {\n    Alert.prompt(\n      '×‘×—×¨ ×¡×›×•× ×œ×ª×¨×•××”',\n      `×œ×ª×¨×•××” ×œ: ${charity.name}\\n\\n×”×›× ×¡ ×¡×›×•×:`,\n      [\n        {\n          text: '×‘×™×˜×•×œ',\n          style: 'cancel',\n        },\n        {\n          text: '×ª×¨×•×',\n          onPress: (amount) => {\n            if (amount && !isNaN(Number(amount))) {\n              Alert.alert(\n                '×ª×¨×•××” ×‘×•×¦×¢×”',\n                `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${amount} ×œ-${charity.name}!`\n              );\n            } else {\n              Alert.alert('×©×’×™××”', '×× × ×”×›× ×¡ ×¡×›×•× ×ª×§×™×Ÿ');\n            }\n          },\n        },\n      ],\n      'plain-text',\n      '50'\n    );\n  };\n\n \n  const menuOptions = [\n    '×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”',\n    '×”×•×¨××•×ª ×§×‘×¢',\n    '×§×‘×œ×•×ª ×•×“×•×—×•×ª',\n    '×”×™×¡×˜×•×¨×™×™×ª ×ª×¨×•××•×ª',\n    '×”×’×“×¨×•×ª ×ª×©×œ×•×',\n    '×¢×–×¨×”',\n    '×¦×•×¨ ×§×©×¨'\n  ];\n\n  // Specific filter and sort options for money screen\n  const moneyFilterOptions = [\n    \"×—×™× ×•×š\",\n    \"×‘×¨×™××•×ª\",\n    \"×¨×•×•×—×”\",\n    \"×¡×‘×™×‘×”\",\n    \"×‘×¢×œ×™ ×—×™×™×\",\n    \"× ×•×¢×¨ ×‘×¡×™×›×•×Ÿ\",\n    \"×§×©×™×©×™×\",\n    \"× ×›×™×\",\n    \"×—×•×œ×™×\",\n    \"××©×¤×—×•×ª ×‘××¦×•×§×”\",\n    \"×¢×•×œ×™× ×—×“×©×™×\",\n    \"×§×”×™×œ×”\",\n  ];\n\n  const moneySortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ××™×§×•×\",\n    \"×œ×¤×™ ×ª×—×•×\",\n    \"×œ×¤×™ ×ª××¨×™×š ×”×§××”\",\n    \"×œ×¤×™ ××¡×¤×¨ ×ª×•×¨××™×\",\n    \"×œ×¤×™ ×“×™×¨×•×’\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('ğŸ’° MoneyScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\"); // Only first filter\n    setSelectedSort(sorts?.[0] || \"\"); // Only first sort\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      setFilteredCharities(results);\n    } else {\n      // Otherwise, perform local filtering\n      const filtered = getFilteredCharities();\n      setFilteredCharities(filtered);\n    }\n  };\n\n  const handleDonate = () => {\n    if (!selectedRecipient || !amount) {\n      Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ × ××¢×Ÿ ×•×¡×›×•× ×œ×¤× ×™ ×”×ª×¨×•××”.');\n    } else {\n      Alert.alert(\n        '×ª×¨×•××” ×‘×•×¦×¢×”',\n        `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${amount} ×œ-${selectedRecipient}!`\n      );\n    }\n  };\n\n  // Open Bit app to donate to a specific phone with optional amount and note\n  const openBitDonation = async (phone: string, amountValue: number, note: string = '×ª×¨×•××” ×œ×§×”×™×œ×”') => {\n    try {\n      // Deep link patterns used by Bit app; try multiple known schemes\n      const encodedNote = encodeURIComponent(note);\n      const attempts = [\n        // iOS modern\n        `bit://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n        // Android possible\n        `com.poalim.bit://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n        // Generic\n        `bitapp://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n      ];\n\n      for (const url of attempts) {\n        const supported = await Linking.canOpenURL(url);\n        if (supported) {\n          await Linking.openURL(url);\n          return;\n        }\n      }\n\n      // Fallbacks: try to open Bit app page or provide instruction\n      const appStoreLink = Platform.OS === 'ios'\n        ? 'https://apps.apple.com/il/app/bit/id1148052748'\n        : 'https://play.google.com/store/apps/details?id=com.poalim.bit';\n      await Linking.openURL(appStoreLink);\n    } catch (e) {\n      Alert.alert('Bit', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª Bit ×‘××›×©×™×¨ ×–×” ×›×¨×’×¢.');\n    }\n  };\n\n  const handleToggleMode = useCallback(() => {\n    setMode(!mode);\n    console.log('Mode toggled:', !mode ? '× ×–×§×§' : '×ª×•×¨×');\n  }, [mode]);\n\n  const handleSelectMenuItem = useCallback((option: string) => {\n    if (option === '×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”') {\n      setIsSavingsModalVisible(true);\n      return;\n    }\n    if (option === '×”×•×¨××•×ª ×§×‘×¢') {\n      setIsRecurringModalVisible(true);\n      return;\n    }\n    if (option === '×§×‘×œ×•×ª ×•×“×•×—×•×ª') {\n      setIsReceiptsModalVisible(true);\n      return;\n    }\n    // Default fallback\n    Alert.alert('×ª×¤×¨×™×˜', `× ×‘×—×¨: ${option}`);\n  }, []);\n\n  const openCharityModal = (charity: any, isOfferMode: boolean) => {\n    setSelectedCharityForModal(charity);\n    setCharityModalIsOfferMode(isOfferMode);\n    setCharityModalAmount(String(charity.minDonation || 50));\n    setIsCharityModalVisible(true);\n  };\n\n  const renderCharityCard = ({ item }: { item: any }) => (\n    <TouchableOpacity \n      style={localStyles.charityCard}\n      onPress={() => {\n        if (item._extUrl && typeof item._extUrl === 'string') {\n          Linking.openURL(item._extUrl).catch(() => Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'));\n          return;\n        }\n        openCharityModal(item, !!mode);\n      }}\n    >\n      <View style={localStyles.charityCardHeader}>\n        <Text style={localStyles.charityEmoji}>{item.image}</Text>\n        <View style={localStyles.charityRating}>\n          <Text style={localStyles.ratingText}>â­ {item.rating}</Text>\n        </View>\n      </View>\n      <Text style={localStyles.charityName}>{item.name}</Text>\n      <Text style={[localStyles.charityDescription, mode && localStyles.charityDescriptionCompact]} numberOfLines={mode ? 2 : 3}>\n        {item.description}\n      </Text>\n      <View style={localStyles.charityDetails}>\n        <Text style={localStyles.charityLocation}>ğŸ“ {item.location}</Text>\n        <Text style={localStyles.charityCategory}>ğŸ·ï¸ {item.category}</Text>\n      </View>\n      <View style={localStyles.charityStats}>\n        <Text style={localStyles.charityDonors}>ğŸ‘¥ {item.donors} ×ª×•×¨××™×</Text>\n        <Text style={localStyles.charityMinDonation}>ğŸ’° ×-â‚ª{item.minDonation}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderRecentDonationCard = ({ item }: { item: any }) => (\n    <TouchableOpacity style={localStyles.recentDonationCard}>\n      <View style={localStyles.recentDonationHeader}>\n        <Text style={localStyles.recentDonationCharity}>{item.charityName}</Text>\n        <Text style={localStyles.recentDonationAmount}>â‚ª{item.amount}</Text>\n      </View>\n      <View style={localStyles.recentDonationDetails}>\n        <Text style={localStyles.recentDonationDate}>ğŸ“… {item.date}</Text>\n        <Text style={localStyles.recentDonationCategory}>ğŸ·ï¸ {item.category}</Text>\n      </View>\n      <View style={localStyles.recentDonationStatus}>\n        <Text style={localStyles.recentDonationStatusText}>âœ… {item.status}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const FormHeader = () => (\n    <View>\n      {/* Mode toggle is now handled by HeaderComp */}\n\n      {mode ? (\n        <></>\n      ) : (\n        <View style={localStyles.formContainer}>\n          {/* Beneficiary mode - help search message */}\n          <View style={localStyles.searchHelpContainer}>\n            <Text style={localStyles.searchHelpTitle}>××—×¤×© ×¢×–×¨×” ×›×¡×¤×™×ª?</Text>\n            <Text style={localStyles.searchHelpText}>\n              ×”×©×ª××© ×‘×¡×¨×’×œ ×”×—×™×¤×•×© ×œ××¢×œ×” ×›×“×™ ×œ××¦×•× ×¢××•×ª×•×ª ×©×™×›×•×œ×•×ª ×œ×¢×–×•×¨ ×œ×š ××‘×—×™× ×” ×›×¡×¤×™×ª\n            </Text>\n            <View style={localStyles.searchHelpTipsContainer}>\n              <Text style={localStyles.searchHelpTipsTitle}>××™×š ×œ××¦×•× ×¢×–×¨×”:</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ×ª×—×•×: ×—×™× ×•×š, ×‘×¨×™××•×ª, ×¨×•×•×—×”</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ××™×§×•×: ×¢×™×¨, ××–×•×¨</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ×¡×•×’ ×¢×–×¨×”: ××–×•×Ÿ, ×‘×™×’×•×“, ×˜×™×¤×•×œ ×¨×¤×•××™</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×¤× ×” ×™×©×™×¨×•×ª ×œ×¢××•×ª×” ×“×¨×š ×¤×¨×˜×™ ×”×§×©×¨</Text>\n            </View>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n  \n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={menuOptions}\n        onToggleMode={handleToggleMode}\n        onSelectMenuItem={handleSelectMenuItem}\n        title=\"\"\n        placeholder={mode ? (t('donations:searchCharitiesForDonation') as string) : (t('donations:searchCharitiesForHelp') as string)}\n        filterOptions={moneyFilterOptions}\n        sortOptions={moneySortOptions}\n        searchData={combinedCharities}\n        onSearch={handleSearch}\n      />\n\n      {/* Quick Donate Section */}\n     \n      <ScrollContainer \n        style={localStyles.container} \n        contentStyle={localStyles.scrollContent}\n        showsVerticalScrollIndicator={false}\n      >\n        <FormHeader />\n\n        {mode ? (\n          // Donor mode - show charities for donation and donation history\n          <View style={localStyles.sectionsContainer}>\n        <View style={localStyles.quickDonatePanel}>\n          <Text style={localStyles.quickDonateTitle}>×ª×¨×•××” ×œ×§×”×™×œ×”</Text>\n          {(() => {\n            const numericAmount = Number(amount) || 0;\n            const isZeroAmount = numericAmount <= 0;\n            return (\n              <>\n                <DonationAmountSlider \n                  value={numericAmount}\n                  min={0}\n                  max={1000}\n                  step={5}\n                  onChange={(v) => setAmount(String(v))}\n                />\n                <View style={localStyles.quickDonateActionsRow}>\n                  <TouchableOpacity\n                    disabled={isZeroAmount}\n                    style={[localStyles.donateMainButton, isZeroAmount ? localStyles.donateMainButtonDisabled : localStyles.donateMainButtonActive]}\n                    onPress={() => Alert.alert('×ª×¨×•××” ×‘×•×¦×¢×”', `×ª×¨×•××” ×‘×¡×š â‚ª${numericAmount} ×œ××¢×Ÿ ×”×§×”×™×œ×”`)}\n                  >\n                    <Text style={[localStyles.donateMainButtonText, isZeroAmount ? localStyles.donateMainButtonTextDisabled : localStyles.donateMainButtonTextActive]}>×ª×¨×•×</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={localStyles.bitCornerButton}\n                    onPress={() => openPaymentApp(numericAmount)}\n                  >\n                    <Text style={localStyles.bitCornerButtonText}>bit</Text>\n                  </TouchableOpacity>\n                </View>\n              </>\n            );\n          })()}\n        </View>\n\n\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilter ? '×ª×•×¦××•×ª ×—×™×¤×•×©' : '×¢××•×ª×•×ª ××•××œ×¦×•×ª ×œ×ª×¨×•××”'}\n              </Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.charitiesScrollContainer}\n              >\n                {filteredCharities.map((charity) => (\n                  <View key={charity.id} style={[localStyles.charityCardWrapper, mode && localStyles.charityCardWrapperCompact]}>\n                    {renderCharityCard({ item: charity })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×”×™×¡×˜×•×¨×™×™×ª ×ª×¨×•××•×ª ×©×œ×š</Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.recentDonationsScrollContainer}\n              >\n                {getFilteredRecentDonations().map((donation) => (\n                  <View key={donation.id} style={localStyles.recentDonationCardWrapper}>\n                    {renderRecentDonationCard({ item: donation })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            {/* Bottom small stats */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×ª×¨××ª ×¢×“ ×¢×›×©×™×•', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'cash-outline' },\n                  { label: '× ×ª×¨× ×‘××¤×œ×™×§×¦×™×”', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'trending-up-outline' },\n                  { label: '×¢××•×ª×•×ª ×©× ×ª××›×•', value: new Set(getFilteredRecentDonations().map(d => d.charityName)).size, icon: 'business-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"money\" />\n            </View>\n          </View>\n        ) : (\n          // Beneficiary mode - show charities that can help\n          <View style={localStyles.sectionsContainer}>\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilter ? '×¢××•×ª×•×ª ×©×™×›×•×œ×•×ª ×œ×¢×–×•×¨' : '×¢××•×ª×•×ª ××•××œ×¦×•×ª ×œ×¢×–×¨×”'}\n              </Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.charitiesScrollContainer}\n              >\n                {getFilteredCharities().map((charity) => (\n                  <View key={charity.id} style={localStyles.charityCardWrapper}>\n                    {renderCharityCard({ item: charity })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            {/* Bottom small stats */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×ª×¨××ª ×¢×“ ×¢×›×©×™×•', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'cash-outline' },\n                  { label: '× ×ª×¨× ×‘××¤×œ×™×§×¦×™×”', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}` , icon: 'trending-up-outline' },\n                  { label: '×¢××•×ª×•×ª ×©× ×ª××›×•', value: new Set(getFilteredRecentDonations().map(d => d.charityName)).size, icon: 'business-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"money\" />\n            </View>\n          </View>\n        )}\n      </ScrollContainer>\n\n      {/* Charity Details Modal (centered, not full screen) */}\n      <Modal\n        animationType=\"fade\"\n        transparent\n        visible={isCharityModalVisible}\n        onRequestClose={() => setIsCharityModalVisible(false)}\n      >\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsCharityModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            {selectedCharityForModal && (\n              <>\n                <Text style={localStyles.modalTitle}>{selectedCharityForModal.name}</Text>\n                <Text style={localStyles.modalSubtitle}>ğŸ“ {selectedCharityForModal.location}   Â·   ğŸ·ï¸ {selectedCharityForModal.category}</Text>\n                <Text style={localStyles.modalDescription} numberOfLines={6}>{selectedCharityForModal.description}</Text>\n                {charityModalIsOfferMode ? (\n                  <>\n                    <Text style={localStyles.modalFieldLabel}>×‘×—×¨ ×¡×›×•× ×œ×ª×¨×•××”</Text>\n                    <TextInput\n                      style={[localStyles.input, localStyles.modalAmountInput]}\n                      keyboardType=\"number-pad\"\n                      value={charityModalAmount}\n                      onChangeText={(t) => setCharityModalAmount(t.replace(/[^0-9]/g, ''))}\n                      placeholder=\"50\"\n                    />\n                    <View style={localStyles.modalActionsRow}>\n                      <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => {\n                        setIsCharityModalVisible(false);\n                        Alert.alert('×ª×¨×•××” ×‘×•×¦×¢×”', `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${charityModalAmount} ×œ-${selectedCharityForModal.name}!`);\n                      }}>\n                        <Text style={localStyles.modalPrimaryButtonText}>×ª×¨×•× ×¢×›×©×™×•</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        style={localStyles.bitButton}\n                        onPress={() => openPaymentApp(Number(charityModalAmount) || 0)}\n                      >\n                        <Text style={localStyles.bitButtonText}>×ª×¨×•× ×¢× Bit</Text>\n                      </TouchableOpacity>\n                    </View>\n                    <TouchableOpacity style={localStyles.contactButton} onPress={() => Alert.alert('×™×¦×™×¨×ª ×§×©×¨', '×¤×¨×˜×™ ×§×©×¨: 03-1234567 Â· info@example.org')}>\n                      <Text style={localStyles.contactButtonText}>×™×¦×™×¨×ª ×§×©×¨</Text>\n                    </TouchableOpacity>\n                  </>\n                ) : (\n                  <>\n                    <TouchableOpacity style={localStyles.contactButton} onPress={() => Alert.alert('×™×¦×™×¨×ª ×§×©×¨', '×¤×¨×˜×™ ×§×©×¨: 03-1234567 Â· info@example.org')}>\n                      <Text style={localStyles.contactButtonText}>×™×¦×™×¨×ª ×§×©×¨</Text>\n                    </TouchableOpacity>\n                  </>\n                )}\n              </>\n            )}\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Savings Modal */}\n      <Modal animationType=\"fade\" transparent visible={isSavingsModalVisible} onRequestClose={() => setIsSavingsModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsSavingsModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”</Text>\n            <Text style={localStyles.modalDescription}>×§×‘×¢ ×™×¢×“ ×—×™×¡×›×•×Ÿ ×—×•×“×©×™ ×œ×ª×¨×•××” ×¢×ª×™×“×™×ª. ×‘×›×œ ×—×•×“×© × ×•×¡×™×£ ××ª ×”×¡×›×•× ×œ×§×•×¤×ª ×—×™×¡×›×•×Ÿ ×™×™×¢×•×“×™×ª.</Text>\n            <Text style={localStyles.modalFieldLabel}>×¡×›×•× ×—×•×“×©×™ (â‚ª)</Text>\n            <TextInput style={[localStyles.input, localStyles.modalAmountInput]} keyboardType=\"number-pad\" placeholder=\"50\" />\n            <Text style={localStyles.modalFieldLabel}>×™×¢×“ (×¢××•×ª×”/×§×˜×’×•×¨×™×”)</Text>\n            <TextInput style={[localStyles.input]} placeholder=\"×œ×“×•×’××”: ×—×™× ×•×š\" />\n            <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => { setIsSavingsModalVisible(false); Alert.alert('× ×©××¨', '×ª×•×›× ×™×ª ×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××” × ×©××¨×”'); }}>\n              <Text style={localStyles.modalPrimaryButtonText}>×©××•×¨ ×—×™×¡×›×•×Ÿ</Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Recurring Donations Modal */}\n      <Modal animationType=\"fade\" transparent visible={isRecurringModalVisible} onRequestClose={() => setIsRecurringModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsRecurringModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×”×•×¨××•×ª ×§×‘×¢</Text>\n            <Text style={localStyles.modalDescription}>×§×‘×¢ ×ª×¨×•××” ×§×‘×•×¢×” (×—×•×“×©×™×ª/×©×‘×•×¢×™×ª) ×œ×¢××•×ª×” ×©×‘×—×¨×ª.</Text>\n            <Text style={localStyles.modalFieldLabel}>×¡×›×•× ×§×‘×•×¢ (â‚ª)</Text>\n            <TextInput style={[localStyles.input, localStyles.modalAmountInput]} keyboardType=\"number-pad\" placeholder=\"36\" />\n            <Text style={localStyles.modalFieldLabel}>×ª×“×™×¨×•×ª</Text>\n            <View style={localStyles.modalActionsRow}>\n              <TouchableOpacity style={localStyles.quickAmountButton}><Text style={localStyles.quickAmountButtonText}>×—×•×“×©×™</Text></TouchableOpacity>\n              <TouchableOpacity style={localStyles.quickAmountButton}><Text style={localStyles.quickAmountButtonText}>×©×‘×•×¢×™</Text></TouchableOpacity>\n            </View>\n            <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => { setIsRecurringModalVisible(false); Alert.alert('× ×©××¨', '×”×•×¨××ª ×”×§×‘×¢ × ×©××¨×”'); }}>\n              <Text style={localStyles.modalPrimaryButtonText}>×©××•×¨ ×”×•×¨××”</Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Receipts/Reports Modal */}\n      <Modal animationType=\"fade\" transparent visible={isReceiptsModalVisible} onRequestClose={() => setIsReceiptsModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsReceiptsModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×§×‘×œ×•×ª ×•×“×•×—×•×ª</Text>\n            <Text style={localStyles.modalDescription}>×™×™×¦×•× ×§×‘×œ×•×ª ×©× ×ª×™×•×ª, ×¦×¤×™×™×” ×‘×¡×™×›×•× ×—×•×“×©×™ ×•×”×©×•×•××ª ×ª×¨×•××•×ª.</Text>\n            <View style={localStyles.modalActionsRow}>\n              <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => Alert.alert('×§×‘×œ×•×ª', '×§×•×‘×¥ ×§×‘×œ×•×ª ×™×¨×•×›×– ×›××Ÿ')}>\n                <Text style={localStyles.modalPrimaryButtonText}>×™×™×¦× ×§×‘×œ×•×ª</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={localStyles.bitButton} onPress={() => Alert.alert('×“×•×— ×—×•×“×©×™', '× ×¡×›× ×¢×‘×•×¨×š ××ª ×”×—×•×“×© ×”××—×¨×•×Ÿ')}>\n                <Text style={localStyles.bitButtonText}>×“×•×— ×—×•×“×©×™</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n    safeArea: {\n      flex: 1,\n      backgroundColor: colors.backgroundTertiary,\n    },\n    container: {\n        flex: 1,\n        paddingHorizontal: 16,\n        paddingTop: 4,\n    },\n    scrollContent: {\n        paddingBottom: 100, // Bottom margin for screen\n    },\n    formContainer: {\n      backgroundColor: colors.pinkLight,\n      padding: 16,\n      borderRadius: 15,\n      marginBottom: 24,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n    },\n    inputContainer: {\n        marginBottom: 20,\n    },\n    label: {\n        fontSize: FontSizes.medium,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        textAlign: 'right',\n    },\n    input: {\n        backgroundColor: colors.white,\n        borderRadius: 10,\n        padding: 15,\n        fontSize: FontSizes.body,\n        textAlign: 'right',\n        color: colors.textPrimary,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    amountContainer: {\n        marginBottom: 25,\n    },\n    suggestedAmountsContainer: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginBottom: 15,\n    },\n    amountButton: {\n        backgroundColor: colors.white,\n        paddingVertical: 12,\n        paddingHorizontal: 20,\n        borderRadius: 20,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    selectedAmount: {\n        backgroundColor: colors.secondary,\n        borderColor: colors.secondary,\n    },\n    amountButtonText: {\n        fontSize: FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    selectedAmountText: {\n        color: colors.background,\n    },\n    customAmountInput: {\n        textAlign: 'center',\n    },\n    donateButton: {\n        // backgroundColor: colors.accent,\n        padding: 16,\n        borderRadius: 12,\n        alignItems: 'center',\n        marginTop: 10,\n    },\n    donateButtonText: {\n        color: colors.background,\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n    },\n    section: {\n        marginBottom: 10,\n    },\n    sectionTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'center',\n    },\n    sectionsContainer: {\n        flex: 1,\n        gap: 5,\n    },\n    sectionPanel: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        paddingVertical: 8,\n        paddingHorizontal: 8,\n    },\n    recommendationCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 15,\n        padding: 15,\n        marginRight: 15,\n        width: 150,\n        alignItems: 'center',\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    cardImage: {\n        width: 60,\n        height: 60,\n        borderRadius: 30,\n        marginBottom: 10,\n    },\n    cardTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n    cardDescription: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    historyCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 16,\n        marginBottom: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    historyContent: {\n        flex: 1,\n    },\n    historyTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 4,\n    },\n    historyAmount: {\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n        color: colors.accent,\n        marginBottom: 2,\n    },\n    historyDate: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    historyStatus: {\n        backgroundColor: colors.successLight,\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 8,\n    },\n    historyStatusText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: '600',\n    },\n    searchContainer: {\n        marginBottom: 20,\n    },\n    searchInput: {\n        marginBottom: 15,\n    },\n    searchButton: {\n        backgroundColor: colors.accent,\n        padding: 16,\n        borderRadius: 12,\n        alignItems: 'center',\n        marginTop: 10,\n    },\n    searchButtonText: {\n        color: colors.background,\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n    },\n    recommendationsContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        paddingVertical: 10,\n    },\n    historyContainer: {\n        paddingVertical: 5,\n    },\n    searchInfoContainer: {\n        alignItems: 'center',\n        paddingVertical: 20,\n    },\n    searchInfoTitle: {\n        fontSize: FontSizes.heading3,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        textAlign: 'center',\n    },\n    searchInfoText: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        textAlign: 'center',\n        marginBottom: 20,\n        lineHeight: 24,\n    },\n    searchTipsContainer: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    searchTipsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'right',\n    },\n    searchTip: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 4,\n        textAlign: 'right',\n    },\n    // Charity Cards Styles\n    charitiesScrollContainer: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n    },\n    charityCardWrapper: {\n        marginRight: 12,\n        width: 280,\n    },\n    charityCardWrapperCompact: {\n        width: 220,\n    },\n    charityCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        minHeight: 200,\n    },\n    charityCardHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 8,\n    },\n    charityEmoji: {\n        fontSize: FontSizes.displayLarge,\n    },\n    charityRating: {\n        backgroundColor: colors.successLight,\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 8,\n    },\n    ratingText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: 'bold',\n    },\n    charityName: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 6,\n        textAlign: 'right',\n    },\n    charityDescription: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 8,\n        textAlign: 'right',\n        lineHeight: 18,\n    },\n    charityDescriptionCompact: {\n        fontSize: FontSizes.small,\n        lineHeight: 16,\n    },\n    charityDetails: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 8,\n    },\n    charityLocation: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    charityCategory: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    charityStats: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginTop: 'auto',\n    },\n    charityDonors: {\n        fontSize: FontSizes.small,\n        color: colors.accent,\n        fontWeight: '600',\n    },\n    charityMinDonation: {\n        fontSize: FontSizes.small,\n        color: colors.accent,\n        fontWeight: '600',\n    },\n    // Recent Donations Styles\n    recentDonationsScrollContainer: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n    },\n    recentDonationCardWrapper: {\n        marginRight: 12,\n        width: 200,\n    },\n    recentDonationCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        minHeight: 120,\n    },\n    recentDonationHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 6,\n    },\n    recentDonationCharity: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        textAlign: 'right',\n        flex: 1,\n    },\n    recentDonationAmount: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.accent,\n    },\n    recentDonationDetails: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 6,\n    },\n    recentDonationDate: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    recentDonationCategory: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    recentDonationStatus: {\n        alignItems: 'flex-end',\n    },\n    recentDonationStatusText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: '600',\n    },\n    // Quick Donate Panel\n    quickDonatePanel: {\n      backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n\n      marginHorizontal: 0,\n      paddingVertical: 10,\n      paddingHorizontal: 12,\n    },\n    bitCornerButton: {\n      position: 'absolute',\n      top: 8,\n      left: 8,\n      padding: 8,\n      paddingHorizontal: 10,\n      borderRadius: 999,\n      backgroundColor: 'rgba(33, 150, 243, 0.12)',\n      borderWidth: 1,\n      borderColor: 'rgba(33, 150, 243, 0.35)',\n      zIndex: 2,\n    },\n    bitCornerButtonText: {\n      color: 'rgba(33, 150, 243, 0.9)',\n      fontSize: FontSizes.small,\n      fontWeight: '700',\n    },\n    quickDonateTitle: {\n      fontSize: FontSizes.body,\n      fontWeight: '700',\n      color: 'rgba(44,44,44,0.85)',\n      textAlign: 'center',\n    },\n    quickDonateSubtitle: {\n      fontSize: FontSizes.small,\n      color: 'rgba(102,102,102,0.75)',\n      textAlign: 'center',\n      marginTop: 2,\n      marginBottom: 6,\n    },\n    quickDonateAmountsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'center',\n      gap: 8,\n      marginBottom: 6,\n    },\n    quickAmountButton: {\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      borderRadius: 999,\n      paddingHorizontal: 12,\n      paddingVertical: 6,\n    },\n    quickAmountButtonText: {\n      fontSize: FontSizes.small,\n      color: colors.textPrimary,\n      fontWeight: '600',\n      textAlign: 'center',\n    },\n    quickDonateActionsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'center',\n      gap: 8,\n      marginTop: 4,\n    },\n    // Slider styles (modern, subtle)\n    amountSliderContainer: {\n      marginTop: 6,\n      marginBottom: 8,\n      paddingHorizontal: 6,\n    },\n    sliderTrack: {\n      height: \"20%\",\n      borderRadius: 999,\n      backgroundColor: 'rgba(255, 255, 255, 0.85)',\n      borderWidth: 1,\n      borderColor: colors.border,\n      overflow: 'hidden',\n    },\n    sliderFill: {\n      backgroundColor: colors.secondary,\n    },\n    sliderThumb: {\n      // height: 30,\n      borderRadius: 14,\n      backgroundColor: colors.secondary,\n      borderWidth: 2,\n      borderColor: colors.pinkDeep,\n      shadowColor: colors.black,\n      shadowOpacity: 0.08,\n      shadowRadius: 4,\n      shadowOffset: { width: 0, height: 2 },\n      elevation: 2,\n    },\n    sliderThumbInner: {\n      width: 12,\n      height: 12,\n      borderRadius: 6,\n      backgroundColor: colors.pinkLight,\n      alignSelf: 'center',\n      // marginTop: 7,\n    },\n    amountDisplayRow: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      marginTop: 8,\n    },\n    amountDisplayText: {\n      fontSize: FontSizes.medium,\n      fontWeight: '700',\n      color: 'rgba(44,44,44,0.9)',\n    },\n    amountRangeRow: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      marginTop: 4,\n    },\n    amountRangeText: {\n      fontSize: FontSizes.caption,\n      color: 'rgba(102,102,102,0.7)',\n    },\n    // Donate CTA styles\n    donateMainButton: {\n      paddingVertical: 8,\n      paddingHorizontal: 16,\n      borderRadius: 999,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minWidth: 88,\n    },\n    donateMainButtonActive: {\n      backgroundColor: 'rgba(255, 107, 157, 0.2)',\n      borderWidth: 1,\n      borderColor: 'rgba(255, 107, 157, 0.4)',\n    },\n    donateMainButtonDisabled: {\n      backgroundColor: 'rgba(0,0,0,0.05)',\n      borderWidth: 1,\n      borderColor: 'rgba(0,0,0,0.06)',\n    },\n    donateMainButtonText: {\n      fontSize: FontSizes.body,\n      fontWeight: '700',\n      textAlign: 'center',\n    },\n    donateMainButtonTextActive: {\n      color: 'rgba(44,44,44,0.9)',\n    },\n    donateMainButtonTextDisabled: {\n      color: 'rgba(0,0,0,0.3)',\n    },\n    // removed inline bitSmallButton in favor of corner button\n    // Search Help Styles\n    searchHelpContainer: {\n        alignItems: 'center',\n        paddingVertical: 20,\n    },\n    searchHelpTitle: {\n        fontSize: FontSizes.heading2,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 12,\n        textAlign: 'center',\n    },\n    searchHelpText: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        textAlign: 'center',\n        marginBottom: 20,\n        lineHeight: 24,\n    },\n    searchHelpTipsContainer: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        width: '100%',\n    },\n    searchHelpTipsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        writingDirection: 'rtl',\n    },\n    searchHelpTip: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 6,\n        writingDirection: 'rtl',\n        lineHeight: 20,\n    },\n    // Bottom small stats\n    bottomStatsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'space-between',\n      gap: 6,\n    },\n    statChip: {\n      flex: 1,\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      borderRadius: 10,\n      paddingVertical: 8,\n      paddingHorizontal: 10,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    statLabel: {\n      fontSize: FontSizes.caption,\n      color: colors.textSecondary,\n      marginBottom: 4,\n    },\n    statValue: {\n      fontSize: FontSizes.body,\n      color: colors.textPrimary,\n      fontWeight: 'bold',\n    },\n\n    // Modal shared styles\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0,0,0,0.4)',\n      alignItems: 'center',\n      justifyContent: 'center',\n      paddingHorizontal: 16,\n    },\n    centerModalContent: {\n      width: '85%',\n      maxHeight: '75%',\n      backgroundColor: colors.surface,\n      borderRadius: 12,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      padding: 14,\n    },\n    modalTitle: {\n      fontSize: FontSizes.heading3,\n      fontWeight: 'bold',\n      color: colors.textPrimary,\n      textAlign: 'center',\n    },\n    modalSubtitle: {\n      fontSize: FontSizes.small,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginTop: 4,\n      marginBottom: 8,\n    },\n    modalDescription: {\n      fontSize: FontSizes.body,\n      color: colors.textSecondary,\n      textAlign: 'right',\n      marginBottom: 10,\n      lineHeight: 20,\n    },\n    modalFieldLabel: {\n      fontSize: FontSizes.small,\n      color: colors.textPrimary,\n      fontWeight: '600',\n      textAlign: 'right',\n      marginBottom: 6,\n      marginTop: 4,\n    },\n    modalAmountInput: {\n      textAlign: 'center',\n      marginBottom: 10,\n    },\n    modalActionsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'space-between',\n      gap: 8,\n      marginBottom: 8,\n    },\n    // Dedicated modal primary button styles to avoid duplicate keys\n    modalPrimaryButton: {\n      backgroundColor: colors.accent,\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n      flex: 1,\n    },\n    modalPrimaryButtonText: {\n      color: colors.background,\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n    bitButton: {\n      backgroundColor: 'transparent',\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n      flex: 1,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    bitButtonText: {\n      color: 'rgba(44,44,44,0.85)',\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n    contactButton: {\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n    },\n    contactButtonText: {\n      color: colors.textPrimary,\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MusicScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/PlantsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/RecipesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/RiddlesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/SportsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/SupportScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TechnologyScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TimeScreen.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/donationScreens/TimeScreen.tsx:135:9\n  133 |       const newMode = routeParams.mode === 'offer' ? true : false;\n  134 |       if (newMode !== mode) {\n> 135 |         setMode(newMode);\n      |         ^^^^^^^ Avoid calling setState() directly within an effect\n  136 |       }\n  137 |     }\n  138 |   }, [routeParams?.mode]);","line":135,"column":9,"nodeType":null,"endLine":135,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":138,"column":6,"nodeType":"ArrayExpression","endLine":138,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[4388,4407],"text":"[mode, routeParams.mode]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  ScrollView,\n  TouchableOpacity,\n  Image,\n  Linking,\n  Alert,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport AddLinkComponent from '../components/AddLinkComponent';\n\n// Mock data for volunteer opportunities\nconst volunteerOpportunities = [\n  {\n    id: '1',\n    title: '×”×ª× ×“×‘×•×ª ×‘×‘×™×ª ××‘×•×ª',\n    organization: '×‘×™×ª ××‘×•×ª \"×‘×™×ª ×—×\"',\n    description: '×¢×–×¨×” ×œ×§×©×™×©×™×, ×©×™×—×”, ×œ×™×•×•×™ ×œ×˜×™×•×œ×™× ×•×¤×¢×™×œ×•×™×•×ª',\n    location: '×ª×œ ××‘×™×‘',\n    duration: '2-4 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 8,\n    needed: 12,\n    image: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400',\n    category: '×§×©×™×©×™×',\n  },\n  {\n    id: '2',\n    title: '×¢×–×¨×” ×‘×©×™×¢×•×¨×™ ×‘×™×ª',\n    organization: '××¨×›×– ×œ××™×“×” ×§×”×™×œ×ª×™',\n    description: '×¢×–×¨×” ×œ×™×œ×“×™× ×‘×©×™×¢×•×¨×™ ×‘×™×ª ×‘××ª××˜×™×§×” ×•×× ×’×œ×™×ª',\n    location: '×™×¨×•×©×œ×™×',\n    duration: '1-2 ×©×¢×•×ª',\n    frequency: '×¤×¢××™×™× ×‘×©×‘×•×¢',\n    volunteers: 15,\n    needed: 20,\n    image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400',\n    category: '×—×™× ×•×š',\n  },\n  {\n    id: '3',\n    title: '××™×¡×•×£ ××–×•×Ÿ ×œ× ×–×§×§×™×',\n    organization: '×œ×§×˜ ×™×©×¨××œ',\n    description: '××™×¡×•×£ ××–×•×Ÿ ×¢×•×“×£ ××—× ×•×™×•×ª ×•×—×œ×•×§×” ×œ× ×–×§×§×™×',\n    location: '×—×™×¤×”',\n    duration: '3-5 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 25,\n    needed: 30,\n    image: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400',\n    category: '×¨×•×•×—×”',\n  },\n  {\n    id: '4',\n    title: '×˜×™×¤×•×œ ×‘×—×™×•×ª ××—××“',\n    organization: '××§×œ×˜ ×—×™×•×ª \"×œ×‘ ×–×”×‘\"',\n    description: '×˜×™×¤×•×œ ×‘×—×™×•×ª ××—××“, ×˜×™×•×œ×™×, ×”××›×œ×” ×•× ×™×§×™×•×Ÿ',\n    location: '×‘××¨ ×©×‘×¢',\n    duration: '2-3 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 12,\n    needed: 18,\n    image: 'https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=400',\n    category: '×—×™×•×ª',\n  },\n  {\n    id: '5',\n    title: '×¢×–×¨×” ×‘×¤×¨×•×™×§×˜×™× ×§×”×™×œ×ª×™×™×',\n    organization: '×§×”×™×œ×” ×™×¨×•×§×”',\n    description: '×¢×–×¨×” ×‘×¤×¨×•×™×§×˜×™× ×™×¨×•×§×™×, × ×˜×™×¢×•×ª ×•× ×™×§×™×•×Ÿ',\n    location: '××¨×™××œ',\n    duration: '4-6 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×—×•×“×©',\n    volunteers: 40,\n    needed: 50,\n    image: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400',\n    category: '×¡×‘×™×‘×”',\n  },\n  {\n    id: '6',\n    title: '×œ×™×•×•×™ ×—×•×œ×™×',\n    organization: '×‘×™×ª ×—×•×œ×™× \"×©×¢×¨×™ ×¦×“×§\"',\n    description: '×œ×™×•×•×™ ×—×•×œ×™× ×œ×‘×“×™×§×•×ª, ×©×™×—×” ×•×¢×–×¨×” ×›×œ×œ×™×ª',\n    location: '×™×¨×•×©×œ×™×',\n    duration: '3-4 ×©×¢×•×ª',\n    frequency: '×¤×¢××™×™× ×‘×©×‘×•×¢',\n    volunteers: 20,\n    needed: 25,\n    image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400',\n    category: '×‘×¨×™××•×ª',\n  },\n];\n\nexport default function TimeScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { selectedUser, isRealAuth } = useUser();\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to volunteer), false = seeker (needs volunteers)\n  // URL mode: 'offer' = true, 'search' = false\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n  \n  const [selectedCategory, setSelectedCategory] = useState<string>('×›×œ ×”×§×˜×’×•×¨×™×•×ª');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [filteredOpportunities, setFilteredOpportunities] = useState(volunteerOpportunities);\n  const [selectedTask, setSelectedTask] = useState<any>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('â° TimeScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setSelectedTask(null);\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  const categories = ['×›×œ ×”×§×˜×’×•×¨×™×•×ª', '×§×©×™×©×™×', '×—×™× ×•×š', '×¨×•×•×—×”', '×—×™×•×ª', '×¡×‘×™×‘×”', '×‘×¨×™××•×ª'];\n  \n  // Filter and sort options for time screen\n  const timeFilterOptions = [\n    \"×§×©×™×©×™×\",\n    \"×—×™× ×•×š\", \n    \"×¨×•×•×—×”\",\n    \"×—×™×•×ª\",\n    \"×¡×‘×™×‘×”\",\n    \"×‘×¨×™××•×ª\",\n    \"× ×•×¢×¨\",\n    \"×§×”×™×œ×”\",\n    \"×¡×¤×•×¨×˜\",\n    \"×ª×¨×‘×•×ª\",\n    \"××–×•×Ÿ\",\n    \"×‘×™×’×•×“\"\n  ];\n\n  const timeSortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ××™×§×•×\",\n    \"×œ×¤×™ ×ª×—×•×\",\n    \"×œ×¤×™ ××©×š ×–××Ÿ\",\n    \"×œ×¤×™ ×ª×“×™×¨×•×ª\",\n    \"×œ×¤×™ ××¡×¤×¨ ××ª× ×“×‘×™× × ×“×¨×©\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n\n  const handleVolunteerPress = (opportunity: any) => {\n    console.log('Volunteer opportunity pressed:', opportunity.title);\n    Alert.alert(\n      '×”×¦×˜×¨×¤×•×ª ×œ×”×ª× ×“×‘×•×ª',\n      `×”×× ×ª×¨×¦×” ×œ×”×¦×˜×¨×£ ×œ×”×ª× ×“×‘×•×ª \"${opportunity.title}\"?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { \n          text: '×”×¦×˜×¨×£', \n          onPress: () => {\n            Alert.alert(\n              '×”×¦×œ×—×”!',\n              '×”×¦×˜×¨×¤×ª ×œ×”×ª× ×“×‘×•×ª ×‘×”×¦×œ×—×”. × ×¦×™×’ ×”××¨×’×•×Ÿ ×™×¦×•×¨ ××™×ª×š ×§×©×¨ ×‘×§×¨×•×‘.',\n              [{ text: '××™×©×•×¨', style: 'default' }]\n            );\n          }\n        }\n      ]\n    );\n  };\n\n  const handleEmergencyLink = async () => {\n    console.log('Emergency volunteer link pressed');\n    const url = 'https://www.volunteer.gov.il';\n    try {\n      const supported = await Linking.canOpenURL(url);\n      if (supported) {\n        await Linking.openURL(url);\n      } else {\n        Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨');\n      }\n    } catch (error) {\n      console.error('Error opening link:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×¤×ª×™×—×ª ×”×§×™×©×•×¨');\n    }\n  };\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('â° TimeScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\");\n    setSelectedSort(sorts?.[0] || \"\");\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      setFilteredOpportunities(results);\n    } else {\n      // Otherwise, perform local filtering\n      let filtered = [...volunteerOpportunities];\n      \n      // Filter by search query\n      if (query.trim() !== \"\") {\n        filtered = filtered.filter(opp =>\n          opp.title.toLowerCase().includes(query.toLowerCase()) ||\n          opp.organization.toLowerCase().includes(query.toLowerCase()) ||\n          opp.description.toLowerCase().includes(query.toLowerCase()) ||\n          opp.location.toLowerCase().includes(query.toLowerCase()) ||\n          opp.category.toLowerCase().includes(query.toLowerCase())\n        );\n      }\n      \n      // Filter by category\n      if (selectedCategory !== '×›×œ ×”×§×˜×’×•×¨×™×•×ª') {\n        filtered = filtered.filter(opp => opp.category === selectedCategory);\n      }\n      \n      setFilteredOpportunities(filtered);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n      <HeaderComp\n        mode={mode}\n        menuOptions={['×”×’×“×¨×•×ª', '×¢×–×¨×”', '×¦×•×¨ ×§×©×¨']}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(option: string) => console.log('Menu selected:', option)}\n        title=\"\"\n        placeholder=\"×—×¤×© ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª...\"\n        filterOptions={timeFilterOptions}\n        sortOptions={timeSortOptions}\n         searchData={isRealAuth ? [] : volunteerOpportunities}\n        onSearch={handleSearch}\n      />\n\n       <ScrollView style={styles.content} showsVerticalScrollIndicator={false} nestedScrollEnabled>\n        {/* Emergency Volunteer Link */}\n        <View style={styles.emergencySection}>\n          <TouchableOpacity\n            style={styles.emergencyCard}\n            onPress={handleEmergencyLink}\n          >\n            <View style={styles.emergencyContent}>\n              <Ionicons name=\"flash\" size={32} color={colors.accent} />\n              <View style={styles.emergencyText}>\n                <Text style={styles.emergencyTitle}>×”×ª× ×“×‘×•×ª ×“×—×•×¤×”</Text>\n                <Text style={styles.emergencyDescription}>\n                  ××¦× ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª ×“×—×•×¤×•×ª ×‘××–×•×¨ ×©×œ×š\n                </Text>\n              </View>\n              <Ionicons name=\"arrow-forward\" size={24} color={colors.accent} />\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Categories Filter */}\n        <View style={styles.categoriesSection}>\n          <Text style={styles.sectionTitle}>×§×˜×’×•×¨×™×•×ª</Text>\n          <ScrollView \n            horizontal \n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={styles.categoriesScroll}\n          >\n            {categories.map((category) => (\n              <TouchableOpacity\n                key={category}\n                style={[\n                  styles.categoryButton,\n                  selectedCategory === category && styles.categoryButtonActive\n                ]}\n                onPress={() => setSelectedCategory(category)}\n              >\n                <Text style={[\n                  styles.categoryButtonText,\n                  selectedCategory === category && styles.categoryButtonTextActive\n                ]}>\n                  {category}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n\n        {/* Volunteer Opportunities */}\n        <View style={styles.opportunitiesSection}>\n          <Text style={styles.sectionTitle}>×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª</Text>\n          <Text style={styles.sectionDescription}>\n            ××¦× ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª ××ª××™××•×ª ×œ×š\n          </Text>\n          \n          <View style={styles.opportunitiesGrid}>\n             {(isRealAuth ? [] : filteredOpportunities).map((opportunity) => (\n              <TouchableOpacity\n                key={opportunity.id}\n                style={styles.opportunityCard}\n                onPress={() => handleVolunteerPress(opportunity)}\n              >\n                <Image source={{ uri: opportunity.image }} style={styles.opportunityImage} />\n                <View style={styles.opportunityContent}>\n                  <View style={styles.opportunityHeader}>\n                    <Text style={styles.opportunityTitle}>{opportunity.title}</Text>\n                    <View style={styles.opportunityCategory}>\n                      <Text style={styles.opportunityCategoryText}>{opportunity.category}</Text>\n                    </View>\n                  </View>\n                  \n                  <Text style={styles.opportunityOrganization}>{opportunity.organization}</Text>\n                  <Text style={styles.opportunityDescription}>{opportunity.description}</Text>\n                  <TouchableOpacity\n                    style={styles.visitButton}\n                    onPress={() => Linking.openURL('https://www.ruachtova.org.il/').catch(() => Alert.alert('×©×’×™××”','×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'))}\n                  >\n                    <Text style={styles.visitButtonText}>××¦× ×”×ª× ×“×‘×•×™×•×ª ×“×•××•×ª</Text>\n                  </TouchableOpacity>\n                  \n                  <View style={styles.opportunityDetails}>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"location\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.location}</Text>\n                    </View>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"time\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.duration}</Text>\n                    </View>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"calendar\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.frequency}</Text>\n                    </View>\n                  </View>\n                  \n                  <View style={styles.volunteersInfo}>\n                    <View style={styles.volunteersProgress}>\n                      <View style={styles.progressBar}>\n                        <View \n                          style={[\n                            styles.progressFill, \n                            { width: `${(opportunity.volunteers / opportunity.needed) * 100}%` }\n                          ]} \n                        />\n                      </View>\n                      <Text style={styles.volunteersText}>\n                        {opportunity.volunteers}/{opportunity.needed} ××ª× ×“×‘×™×\n                      </Text>\n                    </View>\n                    <TouchableOpacity style={styles.joinButton}>\n                      <Text style={styles.joinButtonText}>×”×¦×˜×¨×£</Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Stats Section */}\n        <View style={styles.statsSection}>\n          <DonationStatsFooter\n            stats={[\n              { label: '××ª× ×“×‘×™× ×¤×¢×™×œ×™×', value: 2847, icon: 'people-outline' },\n              { label: '×©×¢×•×ª ×”×ª× ×“×‘×•×ª', value: 15234, icon: 'time-outline' },\n              { label: '××¨×’×•× ×™× ×¤×¢×™×œ×™×', value: 156, icon: 'heart-outline' },\n            ]}\n          />\n        </View>\n\n        {/* Add Links Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n          <AddLinkComponent category=\"time\" />\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n\n  content: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingTop: 16,\n  },\n  emergencySection: {\n    marginTop: 20,\n    marginBottom: 20,\n  },\n  emergencyCard: {\n    backgroundColor: colors.warningLight,\n    borderRadius: 15,\n    padding: 20,\n    borderWidth: 2,\n    borderColor: colors.accent,\n  },\n  emergencyContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  emergencyText: {\n    flex: 1,\n    marginLeft: 15,\n  },\n  emergencyTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.accent,\n    marginBottom: 4,\n  },\n  emergencyDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  categoriesSection: {\n    marginBottom: 20,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 15,\n  },\n  categoriesScroll: {\n    paddingRight: 20,\n  },\n  categoryButton: {\n    backgroundColor: colors.background,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 20,\n    marginRight: 10,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  categoryButtonActive: {\n    backgroundColor: colors.secondary,\n    borderColor: colors.secondary,\n  },\n  categoryButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n  },\n  categoryButtonTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  opportunitiesSection: {\n    marginBottom: 30,\n  },\n  sectionDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 20,\n  },\n  opportunitiesGrid: {\n    gap: 15,\n  },\n  opportunityCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    overflow: 'hidden',\n    boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    elevation: 3,\n  },\n  opportunityImage: {\n    width: '100%',\n    height: 150,\n  },\n  opportunityContent: {\n    padding: 15,\n  },\n  visitButton: {\n    marginTop: 6,\n    alignSelf: 'flex-start',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n    borderRadius: 999,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n  },\n  visitButtonText: {\n    color: colors.textPrimary,\n    fontSize: FontSizes.caption,\n    fontWeight: '600',\n  },\n  opportunityHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  opportunityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  opportunityCategory: {\n    backgroundColor: colors.pinkLight,\n    borderRadius: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    marginLeft: 8,\n  },\n  opportunityCategoryText: {\n    color: colors.pinkDeep,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  opportunityOrganization: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 4,\n  },\n  opportunityDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 8,\n  },\n  opportunityDetails: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  detailText: {\n    fontSize: FontSizes.small,\n    color: colors.textTertiary,\n    marginLeft: 4,\n  },\n  volunteersInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  volunteersProgress: {\n    flex: 1,\n    marginRight: 8,\n  },\n  progressBar: {\n    height: 6,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: 3,\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: 6,\n    backgroundColor: colors.accent,\n    borderRadius: 3,\n  },\n  volunteersText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  joinButton: {\n    backgroundColor: colors.accent,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    borderRadius: 20,\n  },\n  joinButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n  },\n  statsSection: {\n    marginBottom: 30,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    elevation: 2,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.accent,\n    marginTop: 8,\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TrumpScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":91,"column":6,"nodeType":"ArrayExpression","endLine":91,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [mode, routeParams.mode]","fix":{"range":[3366,3385],"text":"[mode, routeParams.mode]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'mode'. Either include it or remove the dependency array.","line":456,"column":6,"nodeType":"ArrayExpression","endLine":456,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser.id, mode, selectedFilters]","fix":{"range":[17854,17892],"text":"[selectedUser.id, mode, selectedFilters]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'allPosts' and 'mode'. Either include them or remove the dependency array.","line":559,"column":6,"nodeType":"ArrayExpression","endLine":559,"endColumn":64,"suggestions":[{"desc":"Update the dependencies array to be: [allPosts, allRides, mode, searchQuery, selectedFilters, selectedSorts, t]","fix":{"range":[22029,22087],"text":"[allPosts, allRides, mode, searchQuery, selectedFilters, selectedSorts, t]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadRides'. Either include it or remove the dependency array.","line":465,"column":6,"nodeType":"ArrayExpression","endLine":465,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [selectedFilters, mode, loadRides]","fix":{"range":[18185,18208],"text":"[selectedFilters, mode, loadRides]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  Alert,\n  ScrollView,\n  FlatList,\n  Dimensions,\n  Platform,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useTranslation } from 'react-i18next';\nimport * as Location from 'expo-location';\n\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport { useToast } from '../utils/toastService';\nimport { getScreenInfo, BREAKPOINTS, isMobileWeb } from '../globals/responsive';\n\n// New Modular Components\nimport RideCard from '../components/rides/RideCard';\nimport RideHistoryCard from '../components/rides/RideHistoryCard';\nimport RideOfferForm from '../components/rides/RideOfferForm';\nimport VerticalGridSlider from '../components/VerticalGridSlider';\nimport { postsService } from '../utils/postsService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\nimport { FeedItem } from '../types/feed';\n\nexport default function TrumpScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  console.log('ğŸš— TrumpScreen - Refactored Component Rendered');\n\n  const { ToastComponent } = useToast();\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n\n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: false = Offer Mode (Driver/×¤×¨×¡×•×), true = Search Mode (Passenger/×—×™×¤×•×©)\n  // URL mode: 'offer' = false, 'search' = true\n  // Default is search mode (true)\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n\n  const [mode, setMode] = useState(initialMode); // false = Offer Mode (Driver/×¤×¨×¡×•×), true = Search Mode (Passenger/×—×™×¤×•×©)\n  const { t } = useTranslation(['donations', 'common', 'trump', 'search']);\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'search' : 'offer';\n    const currentMode = routeParams?.mode;\n\n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n\n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // === Shared State ===\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // === Data State ===\n  const [allRides, setAllRides] = useState<any[]>([]); // Active rides for search (legacy, for offer mode)\n  const [filteredRides, setFilteredRides] = useState<any[]>([]); // Filtered active rides (legacy, for offer mode)\n  const [recentRides, setRecentRides] = useState<any[]>([]); // User's Published History (legacy)\n  // Posts state for search mode\n  const [allPosts, setAllPosts] = useState<FeedItem[]>([]);\n  const [filteredPosts, setFilteredPosts] = useState<FeedItem[]>([]);\n  // Posts state for offer mode history\n  const [recentPosts, setRecentPosts] = useState<FeedItem[]>([]);\n\n  // === Modal State ===\n  const [selectedRide, setSelectedRide] = useState<any | null>(null);\n  const [showRideModal, setShowRideModal] = useState(false);\n\n  // === Search Mode State ===\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n\n  // === Offer Mode Form State ===\n  const [toLocation, setToLocation] = useState(\"\");\n  const [fromLocation, setFromLocation] = useState(\"\");\n  const [useCurrentLocation, setUseCurrentLocation] = useState(true);\n  const [detectedAddress, setDetectedAddress] = useState<string>(\"\");\n  const [isLocating, setIsLocating] = useState(false);\n  const [isLocationError, setIsLocationError] = useState(false);\n\n  // Location Fetching Effect - Only run if mounted\n  useEffect(() => {\n    if (!isMounted) return;\n\n    let isMountedLocal = true;\n\n    const getLocation = async () => {\n      if (!useCurrentLocation) {\n        setDetectedAddress(\"\");\n        setIsLocationError(false);\n        return;\n      }\n\n      setIsLocating(true);\n      setIsLocationError(false);\n      try {\n        const { status } = await Location.requestForegroundPermissionsAsync();\n        if (status !== 'granted') {\n          if (isMountedLocal) {\n            setDetectedAddress(t('trump:errors.locationPermissionDenied') || \"Permission denied\");\n            setIsLocationError(true);\n            setIsLocating(false);\n          }\n          return;\n        }\n\n        const location = await Location.getCurrentPositionAsync({ accuracy: Location.Accuracy.High });\n        const reverseGeocode = await Location.reverseGeocodeAsync({\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude\n        });\n\n        console.log('ğŸ“ Reverse Geocode Result:', JSON.stringify(reverseGeocode, null, 2));\n\n        if (isMountedLocal && reverseGeocode && reverseGeocode.length > 0) {\n          const addr = reverseGeocode[0];\n\n          // Construct a robust address string\n          // 1. Street + Number\n          const streetPart = [addr.street, addr.streetNumber].filter(Boolean).join(' ');\n\n          // 2. Fallback to 'name' if street is missing (often 'name' contains the PoI or street equivalent)\n          const firstPart = streetPart || addr.name || '';\n\n          // 3. City hierarchy: City -> Subregion -> District -> Region\n          const cityPart = addr.city || addr.subregion || addr.district || addr.region || '';\n\n          // 4. Combine\n          let formattedAddress = [firstPart, cityPart].filter(Boolean).join(', ');\n\n          // 5. Final fallback if empty\n          if (!formattedAddress.trim()) {\n            formattedAddress = `${t('trump:near')} ${location.coords.latitude.toFixed(4)}, ${location.coords.longitude.toFixed(4)}`;\n          }\n\n          setDetectedAddress(formattedAddress);\n          setIsLocationError(false);\n        } else {\n          if (isMountedLocal) {\n            setDetectedAddress(t('trump:errors.locationFetchFailed') || \"Address not found\");\n            setIsLocationError(true);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching location:\", error);\n        if (isMountedLocal) {\n          setDetectedAddress(t('trump:errors.locationFetchFailed') || \"Location unavailable\");\n          setIsLocationError(true);\n        }\n      } finally {\n        if (isMountedLocal) setIsLocating(false);\n      }\n    };\n\n    if (useCurrentLocation) {\n      getLocation();\n    }\n\n    return () => { isMountedLocal = false; };\n  }, [useCurrentLocation, t, isMounted]);\n\n  // Advanced Scheduling State\n  const [immediateDeparture, setImmediateDeparture] = useState(true); // 1. Immediate?\n  const [departureTime, setDepartureTime] = useState(\"\");           // 2. If not, what time?\n  const [leavingToday, setLeavingToday] = useState(true);           // 3. If time set, is it today?\n  const [rideDate, setRideDate] = useState<Date>(new Date());       // 4. If not today, what date?\n  const [isRecurring, setIsRecurring] = useState(false);            // 5. Recurring?\n  const [recurrenceFrequency, setRecurrenceFrequency] = useState(1);\n  const [recurrenceUnit, setRecurrenceUnit] = useState<'day' | 'week' | 'month' | null>(null);\n\n  // Ensure rideDate is always valid\n  const handleDateChange = (date: Date) => {\n    if (date && date instanceof Date && !isNaN(date.getTime())) {\n      setRideDate(date);\n    } else {\n      setRideDate(new Date());\n    }\n  };\n\n  // Other Offer Details\n  const [seats, setSeats] = useState(3);\n  const [price, setPrice] = useState(\"0\");\n  const [needToPay, setNeedToPay] = useState(false);\n  const [selectedFormTags, setSelectedFormTags] = useState<string[]>([]);\n\n  // Static Options (Now Translated Keys mapped to Labels)\n  // trump:filters is now an object with keys like {noCostSharing: \"...\", noSmoking: \"...\", ...}\n  const filtersObj = (t('trump:filters', { returnObjects: true }) as Record<string, string>) || {};\n  // Use keys instead of values so SearchBar can translate them properly\n  const trumpFilterOptions = Object.keys(filtersObj);\n\n  const trumpSortOptions = (t('trump:sorts', { returnObjects: true }) as unknown as string[]) || [];\n\n  // Inside render / HeaderComp prop:\n  // placeholder={mode ? t('trump:ui.searchPlaceholder.offer') : t('trump:ui.searchPlaceholder.seek')}\n\n  // Helper to map API post to FeedItem (same as useFeedData.mapPostToItem)\n  const mapPostToFeedItem = (post: any): FeedItem => {\n    // For ride posts, extract ride-specific data (same logic as useFeedData)\n    let rideData: any = {};\n    const formatRideTime = (dateIso: string) => {\n      if (!dateIso) return { time: '', date: '' };\n      const dep = new Date(dateIso);\n      if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n      const hours = dep.getHours().toString().padStart(2, '0');\n      const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n      const day = dep.getDate().toString().padStart(2, '0');\n      const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n      const year = dep.getFullYear();\n\n      return {\n        time: `${hours}:${minutes}`,\n        date: `${day}.${month}.${year}`\n      };\n    };\n\n    // 1. Try ride_data from DB Join (same as useFeedData)\n    if (post.ride_data) {\n      const rd = post.ride_data;\n      const { time, date } = formatRideTime(rd.departure_time);\n\n      rideData = {\n        from: typeof rd.from_location === 'string' ? rd.from_location : (rd.from_location?.name || rd.from_location?.city || ''),\n        to: typeof rd.to_location === 'string' ? rd.to_location : (rd.to_location?.name || rd.to_location?.city || ''),\n        seats: rd.available_seats || 0,\n        price: rd.price_per_seat || 0,\n        time,\n        date\n      };\n    }\n    // 2. Fallback to metadata (same as useFeedData)\n    else if ((post.post_type === 'ride' || post.post_type === 'ride_offered') && post.metadata) {\n      const meta = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n      const r = meta.ride || meta;\n\n      // Check departure_time (schema) or time/date (legacy/manual)\n      let timeStr = r.time || '';\n      let dateStr = r.date || '';\n\n      if (r.departure_time) {\n        const formatted = formatRideTime(r.departure_time);\n        if (formatted.time) timeStr = formatted.time;\n        if (formatted.date) dateStr = formatted.date;\n      }\n\n      rideData = {\n        from: typeof r.from_location === 'string' ? r.from_location : (r.from_location?.name || r.from_location?.city || r.from || ''),\n        to: typeof r.to_location === 'string' ? r.to_location : (r.to_location?.name || r.to_location?.city || r.to || ''),\n        seats: r.available_seats || r.seats || 0,\n        price: r.price_per_seat || r.price || 0,\n        time: timeStr,\n        date: dateStr\n      };\n    }\n\n    // Ensure user is always defined (same format as useFeedData)\n    const author = post.author || {};\n    const userId = author.id || post.author_id || 'unknown';\n    const userName = author.name || 'common.unknownUser';\n    const userAvatar = author.avatar_url || undefined;\n\n    return {\n      id: post.id,\n      type: post.post_type || 'post',\n      subtype: post.post_type, // Same as useFeedData - e.g. 'ride', 'ride_offered'\n      title: post.title || 'post.noTitle', // Same as useFeedData\n      description: post.description || '',\n      thumbnail: post.images && post.images.length > 0 ? post.images[0] : null, // Same as useFeedData\n      user: {\n        id: userId,\n        name: userName,\n        avatar: userAvatar,\n      },\n      likes: parseInt(post.likes || '0'),\n      comments: parseInt(post.comments || '0'),\n      isLiked: post.is_liked || false,\n      timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n        ? new Date(post.created_at).toISOString()\n        : new Date().toISOString(),\n      // Add ride-specific fields if this is a ride post (same as useFeedData)\n      ...rideData\n    };\n  };\n\n  // --- 1. Data Loading ---\n  const loadRides = useCallback(async (includePastOverride?: boolean) => {\n    try {\n      const uid = selectedUser?.id || 'guest';\n      console.log('ğŸ”„ Loading rides/posts for user:', uid, 'mode:', mode);\n\n      if (mode) {\n        // Search mode - load posts\n        console.log('ğŸ” ××¦×‘ ××—×¤×© - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×˜×¨××¤×™×');\n        try {\n          const postsResponse = await postsService.getPosts(100, 0, uid, 'ride');\n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            const mappedPosts = postsResponse.data.map(mapPostToFeedItem);\n            setAllPosts(mappedPosts);\n            setFilteredPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× × ×›×©×œ×”:', postsResponse.error);\n            setAllPosts([]);\n            setFilteredPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™×:', error);\n          setAllPosts([]);\n          setFilteredPosts([]);\n        }\n        return; // Don't load rides in search mode\n      }\n\n      // Offer mode - load posts for history\n      console.log('ğŸ”µ ××¦×‘ ××¦×™×¢ - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”:', uid);\n      try {\n        // ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××©\n        const { apiService } = await import('../utils/apiService');\n        const postsResponse = await apiService.getUserPosts(uid, 50, uid);\n        \n        if (postsResponse.success && Array.isArray(postsResponse.data)) {\n          // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×˜×¨××¤×™×\n          const ridePosts = postsResponse.data.filter((post: any) => \n            post.post_type === 'ride' || post.post_type === 'ride_offered' || post.ride_id\n          );\n          \n          // ×××¤×” ××ª ×”×¤×•×¡×˜×™×\n          const mappedPosts = ridePosts\n            .map(mapPostToFeedItem)\n            .filter((post: FeedItem | null): post is FeedItem => \n              post !== null && post !== undefined && post.user && post.user.id && post.user.name\n            );\n          \n          setRecentPosts(mappedPosts);\n          console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n        } else {\n          console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” × ×›×©×œ×”:', postsResponse.error);\n          setRecentPosts([]);\n        }\n      } catch (error) {\n        console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×”:', error);\n        setRecentPosts([]);\n      }\n\n      // ×¢×“×™×™×Ÿ ×˜×•×¢×Ÿ rides ×œ×¦×•×¨×š history (legacy support)\n      const shouldIncludePast = includePastOverride !== undefined\n        ? includePastOverride\n        : selectedFilters.includes('includePast');\n\n      const [activeRides, myHistory] = await Promise.all([\n        db.listRides(uid, { includePast: shouldIncludePast }),\n        selectedUser?.id ? db.getUserRides(selectedUser.id, 'driver') : Promise.resolve([])\n      ]);\n\n      // Enrich activeRides with real user names\n      const enrichedRides = await Promise.all((activeRides || []).map(async (ride: any) => {\n        const driverId = ride.driverId;\n        const needsFetch = !ride.driverName || ride.driverName === driverId || ride.driverName === 'Driver';\n\n        if (needsFetch && driverId) {\n          try {\n            const user = await db.getUser(driverId) as any;\n            if (user && user.name && user.name !== driverId) {\n              return { ...ride, driverName: user.name };\n            }\n          } catch (e) {\n            // Ignore error\n          }\n        }\n        return ride;\n      }));\n\n      setAllRides(enrichedRides);\n\n      // Map history to UI format (legacy)\n      const userRecent = (myHistory || []).map((r: any) => ({\n        ...r,\n        status: r.status || 'active',\n        price: r.price || 0,\n      }));\n      setRecentRides(userRecent);\n    } catch (e) {\n      console.error(\"âŒ Failed to load rides\", e);\n      setAllRides([]);\n      setRecentRides([]);\n    }\n  }, [selectedUser?.id, t, selectedFilters]);\n\n  // Reload rides when includePast filter changes\n  useEffect(() => {\n    if (mode) { // Only in search mode\n      const shouldIncludePast = selectedFilters.includes('includePast');\n      loadRides(shouldIncludePast);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedFilters, mode]); // Reload when filters change\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”„ useFocusEffect triggered, refreshKey:', refreshKey);\n      loadRides();\n    }, [loadRides, refreshKey])\n  );\n\n  // --- 2. Search Logic (Search Mode) ---\n  const getFilteredRides = useCallback(() => {\n    // In search mode, filter posts instead of rides\n    if (mode) {\n      let filtered = [...allPosts];\n\n      console.log('ğŸ” Filtering posts - Total:', allPosts.length, 'Search query:', searchQuery, 'Filters:', selectedFilters.length);\n\n      // Filter by text\n      if (searchQuery) {\n        const q = searchQuery.toLowerCase();\n        filtered = filtered.filter(post =>\n          (post.user?.name?.toLowerCase()?.includes(q) ?? false) ||\n          (post.from?.toLowerCase()?.includes(q) ?? false) ||\n          (post.to?.toLowerCase()?.includes(q) ?? false) ||\n          (post.title?.toLowerCase()?.includes(q) ?? false) ||\n          (post.description?.toLowerCase()?.includes(q) ?? false)\n        );\n        console.log('ğŸ” After text filter:', filtered.length);\n      }\n\n      // Apply Filters\n      if (selectedFilters.length > 0) {\n        selectedFilters.forEach(f => {\n          if (f === 'noCostSharing') filtered = filtered.filter(p => (p.price ?? 0) === 0);\n          // Add other filters as needed\n        });\n        console.log('ğŸ” After tag filters:', filtered.length);\n      }\n\n      // Sorting\n      const selectedSort = selectedSorts[0];\n      if (selectedSort) {\n        if (selectedSort === t('trump:sort.byPrice')) filtered.sort((a, b) => (a.price || 0) - (b.price || 0));\n        else if (selectedSort === t('trump:sort.byDate')) filtered.sort((a, b) => new Date(a.timestamp || 0).getTime() - new Date(b.timestamp || 0).getTime());\n      }\n\n      console.log('âœ… Final filtered posts:', filtered.length);\n      return filtered;\n    }\n\n    // In offer mode, filter rides as before\n    let filtered = [...allRides];\n\n    console.log('ğŸ” Filtering rides - Total:', allRides.length, 'Search query:', searchQuery, 'Filters:', selectedFilters.length);\n\n    // Filter by text\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(ride =>\n        (ride.driverName?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.from?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.to?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.category?.toLowerCase()?.includes(q) ?? false)\n      );\n      console.log('ğŸ” After text filter:', filtered.length);\n    }\n\n    // Apply Filters (Search Mode Tags)\n    if (selectedFilters.length > 0) {\n      selectedFilters.forEach(f => {\n        // f is now a key like 'noCostSharing', not the translated value\n        if (f === 'noCostSharing') filtered = filtered.filter(r => (r.price ?? 0) === 0);\n        if (f === 'noSmoking') filtered = filtered.filter(r => r.noSmoking);\n        if (f === 'withPets') filtered = filtered.filter(r => r.petsAllowed);\n        if (f === 'withKids') filtered = filtered.filter(r => r.kidsFriendly);\n        if (f === 'includePast') {\n          // Include past rides - don't filter them out\n          // This filter is handled by the server, so we don't need to filter here\n          // But we can add a visual indicator if needed\n        }\n      });\n      console.log('ğŸ” After tag filters:', filtered.length);\n    }\n\n    // Sorting\n    const selectedSort = selectedSorts[0];\n    if (selectedSort) {\n      if (selectedSort === t('trump:sort.byPrice')) filtered.sort((a, b) => (a.price || 0) - (b.price || 0));\n      else if (selectedSort === t('trump:sort.byDate')) filtered.sort((a, b) => new Date(a.date || 0).getTime() - new Date(b.date || 0).getTime());\n      // Add other sorts as needed\n    }\n\n    console.log('âœ… Final filtered rides:', filtered.length);\n    return filtered;\n  }, [allRides, searchQuery, selectedFilters, selectedSorts, t]);\n\n  useEffect(() => {\n    if (mode) {\n      setFilteredPosts(getFilteredRides() as FeedItem[]);\n    } else {\n      setFilteredRides(getFilteredRides() as any[]);\n    }\n  }, [getFilteredRides, mode]);\n\n  const handleSearch = (query: string, filters?: string[], sorts?: string[]) => {\n    if (!mode) {\n      // Offer Mode: Header search input acts as \"Destination\"\n      setToLocation(query);\n    } else {\n      // Search Mode: Standard search\n      setSearchQuery(query);\n      setSelectedFilters(filters || []);\n      setSelectedSorts(sorts || []);\n    }\n  };\n\n  // --- 3. Offer Logic (Create Ride) ---\n  const isFormValid = (): boolean => {\n    const hasDest = Boolean(toLocation && toLocation.trim().length > 0);\n    // Origin validity:\n    // If using current location, we MUST have a detected address.\n    // Otherwise, we need a manual fromLocation.\n    const hasOrigin = useCurrentLocation\n      ? Boolean(detectedAddress && detectedAddress.length > 0 && !isLocationError)\n      : Boolean(fromLocation && fromLocation.trim().length > 0);\n\n    // Time validity:\n    // If immediate, valid.\n    // If not immediate, must have time.\n    // If not immediate and not today, Date is technically always present (default), but conceptually checked.\n    const hasTime = immediateDeparture || Boolean(departureTime && departureTime.trim().length > 0);\n\n    // If recurring is selected, recurrence unit must be selected\n    const hasRecurrenceUnit = !isRecurring || Boolean(recurrenceUnit);\n\n    return Boolean(hasDest && hasOrigin && hasTime && hasRecurrenceUnit);\n  };\n\n  const handleCreateRide = async () => {\n    if (!isFormValid()) {\n      // Provide detailed error messages\n      const errors: string[] = [];\n\n      if (!toLocation || !toLocation.trim()) {\n        errors.push('×™×© ×œ×”×–×™×Ÿ ×™×¢×“');\n      }\n\n      if (useCurrentLocation) {\n        if (!detectedAddress || isLocationError) {\n          errors.push('×× × ×”××ª×Ÿ ×œ×–×™×”×•×™ ×”××™×§×•× ××• ×”×–×Ÿ ×›×ª×•×‘×ª ×™×“× ×™×ª');\n        }\n      } else {\n        if (!fromLocation || !fromLocation.trim()) {\n          errors.push('×™×© ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ×™×¦×™××”');\n        }\n      }\n\n      if (!immediateDeparture && (!departureTime || !departureTime.trim())) {\n        errors.push('×™×© ×œ×”×–×™×Ÿ ×©×¢×ª ×™×¦×™××”');\n      }\n\n      if (isRecurring && !recurrenceUnit) {\n        errors.push('×™×© ×œ×‘×—×•×¨ ×ª×“×™×¨×•×ª ×œ× ×¡×™×¢×” ×—×•×–×¨×ª');\n      }\n\n      Alert.alert(\n        t('common:errorTitle') || '×©×’×™××”',\n        errors.length > 0 ? errors.join('\\n') : (t('trump:errors.formInvalid') || '×™×© ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™×')\n      );\n      return;\n    }\n\n    try {\n      const uid = selectedUser?.id || 'guest';\n      const rideId = `${Date.now()}`; // Or DB generated\n\n      // --- Calculate Final Date ---\n      let dateToSave: string;\n      if (immediateDeparture || leavingToday) {\n        dateToSave = new Date().toISOString().split('T')[0]; // Current date YYYY-MM-DD\n      } else {\n        // Ensure rideDate is valid before using toISOString\n        const validDate = rideDate && rideDate instanceof Date && !isNaN(rideDate.getTime())\n          ? rideDate\n          : new Date();\n        dateToSave = validDate.toISOString().split('T')[0]; // Selected date YYYY-MM-DD\n      }\n\n      // --- Calculate Final Time ---\n      let timeToSave: string;\n      if (immediateDeparture) {\n        // Current time HH:MM in local timezone (not UTC)\n        const now = new Date();\n        // Use local time, not UTC\n        const localHours = now.getHours();\n        const localMinutes = now.getMinutes();\n        timeToSave = `${String(localHours).padStart(2, '0')}:${String(localMinutes).padStart(2, '0')}`;\n        console.log('â° Immediate departure time (local):', timeToSave);\n      } else {\n        timeToSave = departureTime; // Selected HH:MM\n        console.log('â° Selected departure time:', timeToSave);\n      }\n\n      const baseRideData = {\n        driverId: uid,\n        driverName: selectedUser?.name || 'Me', // Fallback name\n        from: useCurrentLocation ? (detectedAddress || (t('trump:currentLocation') as string)) : fromLocation,\n        to: toLocation,\n        date: dateToSave,\n        time: timeToSave,\n        seats: seats,\n        price: Number(price) || 0,\n        noSmoking: selectedFormTags.includes('noSmoking') || selectedFormTags.includes(t('trump:filters.noSmoking') as string),\n        petsAllowed: selectedFormTags.includes('withPets') || selectedFormTags.includes(t('trump:filters.withPets') as string),\n        kidsFriendly: selectedFormTags.includes('withKids') || selectedFormTags.includes(t('trump:filters.withKids') as string),\n        isRecurring: isRecurring,\n        recurrenceFrequency: recurrenceFrequency,\n        recurrenceUnit: recurrenceUnit,\n        status: 'active' // Changed from 'published' to 'active' to match server filter\n      };\n\n      // Calculate base departure datetime for recurring rides\n      // Use local timezone, not UTC\n      const [hours, minutes] = timeToSave.split(':').map(Number);\n      const baseDate = new Date(dateToSave + 'T00:00:00'); // Create date in local timezone\n      baseDate.setHours(hours, minutes, 0, 0);\n      console.log('ğŸ“… Base date calculated:', baseDate.toISOString(), 'Local:', baseDate.toLocaleString('he-IL'));\n\n      // Create the first ride\n      console.log('ğŸš— Creating ride with data:', JSON.stringify(baseRideData, null, 2));\n      await db.createRide(uid, rideId, baseRideData);\n      console.log('âœ… Ride created successfully');\n\n      // If recurring, create 5 future instances\n      if (isRecurring && recurrenceUnit) {\n        const instancesToCreate = 5;\n        for (let i = 1; i <= instancesToCreate; i++) {\n          const nextDate = new Date(baseDate);\n\n          // Calculate next occurrence based on frequency and unit\n          switch (recurrenceUnit) {\n            case 'day':\n              // Every X days\n              nextDate.setDate(nextDate.getDate() + (recurrenceFrequency * i));\n              break;\n            case 'week':\n              // Every X weeks\n              nextDate.setDate(nextDate.getDate() + (recurrenceFrequency * 7 * i));\n              break;\n            case 'month':\n              // Every X months\n              nextDate.setMonth(nextDate.getMonth() + (recurrenceFrequency * i));\n              break;\n          }\n\n          const nextDateStr = nextDate.toISOString().split('T')[0];\n          const nextTimeStr = `${String(nextDate.getHours()).padStart(2, '0')}:${String(nextDate.getMinutes()).padStart(2, '0')}`;\n\n          const recurringRideData = {\n            ...baseRideData,\n            date: nextDateStr,\n            time: nextTimeStr,\n          };\n\n          const recurringRideId = `${Date.now()}_${i}`;\n          await db.createRide(uid, recurringRideId, recurringRideData);\n        }\n      }\n\n      // Reset Form\n      setToLocation('');\n      setFromLocation('');\n      setDepartureTime('');\n      setImmediateDeparture(true); // Default back to immediate\n      setLeavingToday(true);         // Default back to today\n      setRideDate(new Date());       // Reset date\n      setIsRecurring(false);         // Reset recurring\n      setRecurrenceFrequency(1);     // Reset recurrence frequency\n      setRecurrenceUnit(null);       // Reset recurrence unit\n      setUseCurrentLocation(true);\n      setSeats(3);\n      setPrice('0');\n      setSelectedFormTags([]);\n\n      // Also clear header search if possible via searchQuery state if it was bound\n      if (!mode) setSearchQuery('');\n\n      Alert.alert(t('trump:success.title') as string, t('trump:success.ridePublished') as string);\n\n      // Refresh Data - wait a bit for backend to update cache\n      setTimeout(() => {\n        setRefreshKey(prev => prev + 1);\n      }, 1500);\n\n    } catch (e) {\n      console.error(\"Failed to create ride\", e);\n      const errorMessage = e instanceof Error ? e.message : String(e);\n      Alert.alert(\n        t('common:errorTitle') as string,\n        `${t('trump:errors.saveFailed') as string}\\n${errorMessage}`\n      );\n    }\n  };\n\n  // --- 4. History Actions ---\n  const handleDeleteRide = async (ride: any) => {\n    Alert.alert(\n      t('trump:alerts.deleteRideTitle') || '××—×™×§×ª ×˜×¨××¤',\n      t('trump:alerts.deleteRideBody') || '×”×× ×œ××—×•×§ ×˜×¨××¤ ×–×”?',\n      [\n        { text: t('common:cancel') as string, style: 'cancel' },\n        {\n          text: t('common:delete') as string,\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              await db.updateRide(selectedUser?.id || 'guest', ride.id, { status: 'cancelled' });\n              // Optimistic UI Update\n              setRecentRides(prev => prev.map(r => r.id === ride.id ? { ...r, status: 'cancelled' } : r));\n            } catch (e) {\n              console.error('Delete ride failed', e);\n              Alert.alert('Error', 'Failed to delete ride');\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleRestoreRide = (ride: any) => {\n    // Populate form with ride data\n    setToLocation(ride.to || '');\n    setFromLocation(ride.from || '');\n    setUseCurrentLocation(ride.from === t('trump:currentLocation'));\n    setDepartureTime(ride.time || '');\n\n    // Logic for restoring specific time vs immediate is tricky, default to explicit time\n    setImmediateDeparture(false);\n    setSeats(ride.seats || 3);\n    setPrice(String(ride.price || 0));\n    // If date is in future, we set it, otherwise default to today logic or keep it old? \n    // Usually restore is for convenience, so let's default to logic that user can adjust.\n    // Let's assume user wants to repost for today or same settings\n    setLeavingToday(true);\n    setRideDate(new Date());\n\n    Alert.alert(t('trump:alerts.restoreDoneTitle') || '×©×•×—×–×¨', '×¤×¨×˜×™ ×”×˜×¨××¤ ×”×•×¢×ª×§×• ×œ×˜×•×¤×¡');\n  };\n\n  // --- Render Helpers ---\n  const handleToggleMode = () => setMode(!mode);\n\n  const handleSelectRide = (ride: any) => {\n    setSelectedRide(ride);\n    setShowRideModal(true);\n  };\n\n  // Calculate grid layout for search mode\n  const { width } = Dimensions.get('window');\n  const { isTablet, isDesktop } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobile = isMobileWeb();\n\n  // Initialize with appropriate default, but allow user control via slider\n  const [numColumns, setNumColumns] = useState(() => (isTablet || isDesktop || isDesktopWeb) ? 3 : 2);\n\n  // Use same padding values as PostsReelsScreen for consistency\n  const HORIZONTAL_PADDING = isMobile ? 8 : 16;\n  const COLUMN_GAP = isMobile ? 8 : 16;\n  const screenPadding = HORIZONTAL_PADDING;\n  const cardGap = COLUMN_GAP;\n  // Calculate card width: full width minus padding on both sides, minus gaps between columns\n  const cardWidth = numColumns === 1 \n    ? width - (screenPadding * 2) \n    : (width - (screenPadding * 2) - (cardGap * (numColumns - 1))) / numColumns;\n\n  const handleCloseRideModal = () => {\n    setShowRideModal(false);\n    setSelectedRide(null);\n  };\n\n  // Render item callback for FlatList (search mode)\n  const renderPostItem = useCallback(({ item }: { item: FeedItem }) => {\n    // Calculate available width: screen width minus horizontal padding on both sides\n    const availableWidth = width - (screenPadding * 2);\n    \n    // For grid view: with justifyContent: 'space-between', FlatList distributes items automatically\n    // So each item gets availableWidth / numColumns (no need to account for gaps)\n    const itemWidth = numColumns > 1 \n      ? availableWidth / numColumns\n      : availableWidth; // Full available width for list view\n\n    return (\n      <PostReelItem\n        item={item}\n        cardWidth={itemWidth}\n        numColumns={numColumns}\n        onPress={(item) => {\n          // Navigate to post details or open modal\n          console.log('Post pressed:', item.id);\n        }}\n        onCommentPress={(item) => {\n          // Handle comment press\n          console.log('Comment pressed:', item.id);\n        }}\n        onMorePress={handleMorePress}\n      />\n    );\n  }, [numColumns, screenPadding, width, handleMorePress]);\n\n  // Empty component for FlatList\n  const renderEmptyPosts = useCallback(() => (\n    <View style={localStyles.emptyState}>\n      <Text style={localStyles.emptyStateTitle}>{t('trump:ui.noRidesFoundTitle')}</Text>\n      <Text style={localStyles.emptyStateText}>{t('trump:ui.noRidesFoundBody')}</Text>\n    </View>\n  ), [t]);\n\n  const handleSelectRideOld = (ride: any) => {\n    // In Search Mode: Show join details/contact\n    Alert.alert(\n      t('trump:rideOf', { name: ride.driverName }) as string,\n      `${ride.from} â ${ride.to}\\nâ° ${ride.time}\\nğŸ’° â‚ª${ride.price}\\n\\n${t('trump:joinQuestion')}`,\n      [\n        { text: t('common:cancel') as string, style: 'cancel' },\n        { text: t('trump:joinRide') as string, onPress: () => Alert.alert('×‘×§×©×” × ×©×œ×—×”') }\n      ]\n    );\n  };\n\n  if (!isMounted) {\n    return <View style={localStyles.safeArea} />;\n  }\n\n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      {/* Header handles Search Mode inputs & Mode Toggle */}\n      <HeaderComp\n        mode={mode}\n        menuOptions={['×”×™×¡×˜×•×¨×™×”', '×”×’×“×¨×•×ª']}\n        onToggleMode={handleToggleMode}\n        onSelectMenuItem={() => { }}\n        title=\"\"\n        // Dynamic placeholder based on mode\n        placeholder={mode ? t('trump:ui.searchPlaceholder.seek') : t('trump:ui.searchPlaceholder.offer')}\n        filterOptions={trumpFilterOptions}\n        sortOptions={trumpSortOptions}\n        searchData={allRides}\n        onSearch={handleSearch}\n        // Hide sort button in offer mode (mode === false)\n        hideSortButton={!mode}\n      />\n\n      {!mode ? (\n        // === OFFER MODE (Driver) - Show Form ===\n        <ScrollContainer\n          style={localStyles.container}\n          contentStyle={localStyles.scrollContent}\n          keyboardShouldPersistTaps=\"always\"\n        >\n          {/* 1. Form */}\n          <RideOfferForm\n            destination={toLocation}\n            onDestinationChange={setToLocation}\n\n            fromLocation={fromLocation}\n            onFromLocationChange={setFromLocation}\n            useCurrentLocation={useCurrentLocation}\n            onToggleCurrentLocation={setUseCurrentLocation}\n            detectedAddress={detectedAddress}\n            isLocating={isLocating}\n            isLocationError={isLocationError}\n\n            // Scheduling\n            departureTime={departureTime}\n            onDepartureTimeChange={setDepartureTime}\n            immediateDeparture={immediateDeparture}\n            onToggleImmediateDeparture={setImmediateDeparture}\n            leavingToday={leavingToday}\n            onToggleLeavingToday={setLeavingToday}\n            rideDate={rideDate}\n            onDateChange={handleDateChange}\n            isRecurring={isRecurring}\n            onToggleRecurring={setIsRecurring}\n            recurrenceFrequency={recurrenceFrequency}\n            onRecurrenceFrequencyChange={setRecurrenceFrequency}\n            recurrenceUnit={recurrenceUnit}\n            onRecurrenceUnitChange={setRecurrenceUnit}\n\n            seats={seats}\n            onSeatsChange={setSeats}\n            price={price}\n            onPriceChange={setPrice}\n\n            selectedTags={selectedFormTags}\n            onToggleTag={(tag) => {\n              setSelectedFormTags(prev => prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]);\n            }}\n            availableTags={trumpFilterOptions}\n\n            onSubmit={handleCreateRide}\n            isValid={isFormValid()}\n            hideDestinationInput={true} // New prop to hide internal input\n          />\n\n          {/* 2. History */}\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>{t('trump:ui.yourRecentRides')}</Text>\n            {recentPosts.length === 0 ? (\n              <Text style={localStyles.emptyStateText}>{t('trump:ui.noRecentRides')}</Text>\n            ) : (\n              recentPosts.map((post) => {\n                // Container has paddingHorizontal: 16, so card width should account for that\n                const containerPadding = 16;\n                const historyCardWidth = width - (containerPadding * 2);\n                return (\n                  <View key={post.id} style={{ marginBottom: 16, width: '100%' }}>\n                    <PostReelItem\n                      item={post}\n                      cardWidth={historyCardWidth}\n                      numColumns={1}\n                      onPress={(item) => {\n                        console.log('Post pressed:', item.id);\n                      }}\n                      onCommentPress={(item) => {\n                        console.log('Comment pressed:', item.id);\n                      }}\n                      onMorePress={handleMorePress}\n                    />\n                  </View>\n                );\n              })\n            )}\n          </View>\n\n          {/* 3. Groups Section */}\n          <View style={[localStyles.section, { marginTop: 30, paddingBottom: 20 }]}>\n            <View style={{ flexDirection: 'row-reverse', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\n              <Text style={localStyles.sectionTitle}>{t('trump:ui.whatsappGroups')}</Text>\n            </View>\n            <AddLinkComponent category=\"trump\" />\n          </View>\n        </ScrollContainer>\n      ) : (\n        // === SEARCH MODE (Passenger) - Show Search Results ===\n        <View style={localStyles.searchContainer}>\n          <VerticalGridSlider\n            numColumns={numColumns}\n            onNumColumnsChange={setNumColumns}\n            style={{\n              top: 10, // Relative to searchContainer\n              left: 4,\n              height: 160 // Pass height if needed by style? No, it's defined inside.\n            }}\n          />\n          <View style={localStyles.resultsHeader}>\n            <Text style={localStyles.resultsTitle}>\n              {searchQuery ? `${t('trump:ui.searchResultsPrefix')} \"${searchQuery}\"` : t('trump:ui.availableRides')} ({filteredPosts.length})\n            </Text>\n          </View>\n\n          <ScrollContainer\n            contentStyle={localStyles.resultsList}\n            showsVerticalScrollIndicator={false}\n          >\n            <FlatList\n              data={filteredPosts}\n              renderItem={renderPostItem}\n              keyExtractor={(item) => item.id || String(Math.random())}\n              key={numColumns} // Force re-render on column change\n              numColumns={numColumns}\n              columnWrapperStyle={numColumns > 1 ? localStyles.columnWrapper : undefined}\n              contentContainerStyle={{ paddingHorizontal: screenPadding }}\n              scrollEnabled={false}\n              nestedScrollEnabled={true}\n              ListEmptyComponent={renderEmptyPosts}\n              showsVerticalScrollIndicator={false}\n            />\n\n            {/* Groups Section (Restored) */}\n            <View style={[localStyles.section, { marginTop: 30, paddingBottom: 40 }]}>\n              <View style={{ flexDirection: 'row-reverse', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\n                <Text style={localStyles.sectionTitle}>\n                  {t('trump:ui.whatsappGroups')}\n                </Text>\n              </View>\n              <AddLinkComponent category=\"trump\" />\n            </View>\n\n          </ScrollContainer>\n        </View>\n      )}\n\n      {/* Ride Details Modal */}\n      <ItemDetailsModal\n        visible={showRideModal}\n        onClose={handleCloseRideModal}\n        item={selectedRide}\n        type=\"ride\"\n        navigation={navigation}\n      />\n\n      {/* Post Menu Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n\n      {/* Footer Stats (Visible in Search Mode usually, or always) */}\n      {mode && (\n        <DonationStatsFooter\n          stats={[\n            { label: t('trump:stats.availableRides') || '×–××™× ×™×', value: filteredPosts.length, icon: 'car-outline' },\n            { label: '×œ×™×™×§×™×', value: filteredPosts.reduce((sum, p) => sum + (p.likes || 0), 0), icon: 'heart-outline' },\n            { label: '×ª×’×•×‘×•×ª', value: filteredPosts.reduce((sum, p) => sum + (p.comments || 0), 0), icon: 'chatbubble-outline' },\n          ]}\n        />\n      )}\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary_2,\n  },\n  container: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n  },\n  scrollContent: {\n    paddingBottom: 100,\n  },\n  section: {\n    marginTop: 24,\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 12,\n    textAlign: 'center',\n  },\n  emptyStateText: {\n    textAlign: 'center',\n    color: colors.textSecondary,\n    marginTop: 20,\n  },\n  // Search Mode Styles\n  searchContainer: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    // paddingBottom: 80, // Removed to allow full usage of space; footer is in-flow\n  },\n  resultsHeader: {\n    marginBottom: 10,\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  resultsTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  resultsList: {\n    paddingBottom: 20,\n    flexGrow: 1, // ensure it fills space if needed\n  },\n  emptyState: {\n    alignItems: 'center',\n    marginTop: 60,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8,\n  },\n  columnWrapper: {\n    justifyContent: 'space-between',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/WasteScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/expo-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/colors.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/constants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/responsive.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/styles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/types.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/AuthConfiguration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/GoogleAuthService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/SecureApiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/index.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":183,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":183,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * GOOGLE AUTHENTICATION SYSTEM - MAIN EXPORTS\n * ========================================\n * \n * This is the main entry point for the Karma Community Google Authentication System.\n * Import everything you need for authentication from this single file.\n * \n * MAIN EXPORTS:\n * - GoogleAuthService: Main authentication service (singleton)\n * - SecureGoogleAuthButton: React component for Google login\n * - SecureApiService: API client with automatic authentication\n * - AuthConfiguration: Configuration and settings\n * - Types: All TypeScript interfaces and types\n * \n * USAGE:\n * ```typescript\n * import { \n *   googleAuthService, \n *   SecureGoogleAuthButton,\n *   secureApiService \n * } from './google_auth';\n * ```\n * \n * AUTHOR: AI Assistant\n * VERSION: 1.0.1\n * SECURITY LEVEL: Enterprise Grade\n */\n\n// ========================================\n// MAIN SERVICES\n// ========================================\n\n/**\n * Main authentication service (singleton)\n * Handles all Google OAuth operations, token management, and session handling\n */\nexport { \n  googleAuthService,\n  GoogleAuthService \n} from './GoogleAuthService';\n\n/**\n * Secure API service for authenticated requests\n * Automatically handles authentication headers, token refresh, and error handling\n */\nexport { \n  secureApiService,\n  SecureApiService \n} from './SecureApiService';\n\n// ========================================\n// REACT COMPONENTS\n// ========================================\n\n/**\n * Secure Google authentication button component\n * Drop-in replacement for old authentication buttons with enterprise-grade security\n */\nexport { \n  default as SecureGoogleAuthButton\n} from './SecureGoogleAuthButton';\n\n// ========================================\n// CONFIGURATION\n// ========================================\n\n/**\n * Authentication configuration and settings\n * All OAuth, security, and performance settings\n */\nexport {\n  default as AuthConfiguration,\n  AUTH_CONFIG,\n  getGoogleClientIds,\n  isGoogleOAuthConfigured,\n  getRedirectUri,\n  createOAuthConfig,\n  getApiBaseUrl,\n  validateAuthConfiguration,\n  ERROR_MESSAGES\n} from './AuthConfiguration';\n\n// ========================================\n// TYPE DEFINITIONS\n// ========================================\n\n/**\n * Main authentication types\n */\nexport type {\n  AuthTokens,\n  SecureAuthUser,\n  AuthResponse,\n  AuthState,\n} from './GoogleAuthService';\n\n/**\n * API service types\n */\nexport type {\n  ApiResponse,\n  RequestOptions,\n  ApiError,\n  ApiErrorType,\n} from './SecureApiService';\n\n/**\n * Component prop types\n */\nexport type {\n  SecureGoogleAuthButtonProps as GoogleAuthButtonProps,\n} from './SecureGoogleAuthButton';\n\n// ========================================\n// UTILITY FUNCTIONS\n// ========================================\n\n/**\n * Quick initialization function for easy setup\n * Call this once in your App.tsx or main component\n * \n * @example\n * ```typescript\n * import { initializeGoogleAuth } from './google_auth';\n * \n * useEffect(() => {\n *   initializeGoogleAuth().then(() => {\n *     console.log('Google Auth initialized');\n *   });\n * }, []);\n * ```\n */\nexport const initializeGoogleAuth = async (): Promise<{\n  success: boolean;\n  error?: string;\n}> => {\n  try {\n    // Import services dynamically to avoid circular dependencies\n    const { googleAuthService } = await import('./GoogleAuthService');\n    const { validateAuthConfiguration } = await import('./AuthConfiguration');\n    \n    // Validate configuration\n    const validation = validateAuthConfiguration();\n    if (!validation.isValid) {\n      throw new Error(`Configuration errors: ${validation.errors.join(', ')}`);\n    }\n\n    // Initialize the service\n    await googleAuthService.initialize();\n    \n    return { success: true };\n    \n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Initialization failed'\n    };\n  }\n};\n\n/**\n * Quick authentication status check\n * Useful for navigation guards and conditional rendering\n * \n * @returns Object with authentication status and user data\n * \n * @example\n * ```typescript\n * const { isAuthenticated, user } = getAuthStatus();\n * if (isAuthenticated) {\n *   console.log('User logged in:', user.email);\n * }\n * ```\n */\nexport const getAuthStatus = (): {\n  isAuthenticated: boolean;\n  user: any | null;\n  state: any;\n  hasValidTokens: boolean;\n} => {\n  // Import services dynamically to avoid circular dependencies\n  const { googleAuthService } = require('./GoogleAuthService');\n  \n  return {\n    isAuthenticated: googleAuthService.isAuthenticated(),\n    user: googleAuthService.getCurrentUser(),\n    state: googleAuthService.getAuthState(),\n    hasValidTokens: !!googleAuthService.getAccessToken(),\n  };\n};\n\n/**\n * Quick logout function\n * Performs complete logout with cleanup\n * \n * @returns Promise resolving when logout is complete\n * \n * @example\n * ```typescript\n * const handleLogout = async () => {\n *   await logoutUser();\n *   navigation.navigate('LoginScreen');\n * };\n * ```\n */\nexport const logoutUser = async (): Promise<void> => {\n  const { googleAuthService } = await import('./GoogleAuthService');\n  await googleAuthService.logout();\n};\n\n/**\n * Health check for the authentication system\n * Useful for debugging and monitoring\n * \n * @returns Health status of all authentication components\n * \n * @example\n * ```typescript\n * const health = await checkAuthHealth();\n * console.log('Auth system health:', health);\n * ```\n */\nexport const checkAuthHealth = async (): Promise<{\n  overall: 'healthy' | 'degraded' | 'unhealthy';\n  components: {\n    authService: 'healthy' | 'unhealthy';\n    apiService: 'healthy' | 'unhealthy';\n    serverConnection: 'healthy' | 'unhealthy';\n  };\n  details: {\n    configurationValid: boolean;\n    hasStoredTokens: boolean;\n    serverReachable: boolean;\n  };\n}> => {\n  try {\n    // Import services dynamically to avoid circular dependencies\n    const { validateAuthConfiguration } = await import('./AuthConfiguration');\n    const { googleAuthService } = await import('./GoogleAuthService');\n    const { secureApiService } = await import('./SecureApiService');\n    \n    // Check configuration\n    const configValidation = validateAuthConfiguration();\n    \n    // Check stored authentication\n    const authStatus = getAuthStatus();\n    \n    // Check server connectivity\n    const serverHealth = await secureApiService.healthCheck();\n    \n    // Determine component health\n    const components = {\n      authService: (authStatus.state !== 'error' ? 'healthy' : 'unhealthy') as 'healthy' | 'unhealthy',\n      apiService: 'healthy' as const, // API service is always functional\n      serverConnection: (serverHealth.success ? 'healthy' : 'unhealthy') as 'healthy' | 'unhealthy',\n    };\n    \n    // Determine overall health\n    const healthyComponents = Object.values(components).filter(h => h === 'healthy').length;\n    const overall = \n      healthyComponents === 3 ? 'healthy' :\n      healthyComponents >= 2 ? 'degraded' : \n      'unhealthy';\n    \n    return {\n      overall,\n      components,\n      details: {\n        configurationValid: configValidation.isValid,\n        hasStoredTokens: authStatus.hasValidTokens,\n        serverReachable: serverHealth.success,\n      }\n    };\n    \n  } catch (error) {\n    return {\n      overall: 'unhealthy',\n      components: {\n        authService: 'unhealthy',\n        apiService: 'unhealthy', \n        serverConnection: 'unhealthy',\n      },\n      details: {\n        configurationValid: false,\n        hasStoredTokens: false,\n        serverReachable: false,\n      }\n    };\n  }\n};\n\n// ========================================\n// MIGRATION HELPERS\n// ========================================\n\n/**\n * Migration helper for upgrading from old authentication system\n * \n * @returns Promise resolving when migration is complete\n * \n * @example\n * ```typescript\n * // Call this once when upgrading to new auth system\n * await migrateFromLegacyAuth();\n * ```\n */\nexport const migrateFromLegacyAuth = async (): Promise<{\n  migrated: boolean;\n  clearedData: string[];\n}> => {\n  const clearedData: string[] = [];\n  \n  try {\n    // List of old authentication storage keys to clean up\n    const oldKeys = [\n      'current_user',\n      'guest_mode',\n      'auth_mode', \n      'oauth_success_flag',\n      'google_auth_user',\n      'google_auth_token',\n      'oauth_in_progress',\n    ];\n    \n    // Clear old authentication data from AsyncStorage\n    const { default: AsyncStorage } = await import('@react-native-async-storage/async-storage');\n    \n    for (const key of oldKeys) {\n      const value = await AsyncStorage.getItem(key);\n      if (value !== null) {\n        await AsyncStorage.removeItem(key);\n        clearedData.push(key);\n      }\n    }\n    \n    if (clearedData.length > 0) {\n      const { logger } = await import('../utils/loggerService');\n      logger.info('GoogleAuth', 'Legacy authentication data cleared', {\n        clearedKeys: clearedData\n      });\n    }\n    \n    return {\n      migrated: true,\n      clearedData\n    };\n    \n  } catch (error) {\n    const { logger } = await import('../utils/loggerService');\n    logger.error('GoogleAuth', 'Failed to migrate from legacy auth', {\n      error: String(error)\n    });\n    \n    return {\n      migrated: false,\n      clearedData\n    };\n  }\n};\n\n// ========================================\n// CONSTANTS\n// ========================================\n\n/**\n * Current version of the authentication system\n */\nexport const AUTH_SYSTEM_VERSION = '1.0.1';\n\n/**\n * System capabilities\n */\nexport const CAPABILITIES = {\n  HAS_SERVER_VERIFICATION: true,\n  HAS_SECURE_STORAGE: true,\n  HAS_AUTOMATIC_REFRESH: true,\n  HAS_RATE_LIMITING: true,\n  HAS_SESSION_MANAGEMENT: true,\n  HAS_ERROR_RECOVERY: true,\n  HAS_OFFLINE_SUPPORT: false, // TODO\n  HAS_BIOMETRIC_AUTH: false,  // TODO\n} as const;\n\n/**\n * ========================================\n * QUICK START GUIDE\n * ========================================\n * \n * 1. SETUP ENVIRONMENT VARIABLES:\n * ```env\n * EXPO_PUBLIC_API_BASE_URL=your-server-url\n * EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID=your-client-id\n * ```\n * \n * 2. INITIALIZE IN APP:\n * ```typescript\n * import { initializeGoogleAuth } from './google_auth';\n * \n * useEffect(() => {\n *   initializeGoogleAuth();\n * }, []);\n * ```\n * \n * 3. USE LOGIN BUTTON:\n * ```tsx\n * import { SecureGoogleAuthButton } from './google_auth';\n * \n * <SecureGoogleAuthButton\n *   onSuccess={(user) => navigation.navigate('Home')}\n * />\n * ```\n * \n * 4. MAKE API CALLS:\n * ```typescript\n * import { secureApiService } from './google_auth';\n * \n * const data = await secureApiService.getCurrentUser();\n * ```\n * \n * That's it! The authentication system handles everything else automatically.\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/types/ApiTypes.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":178,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":178,"endColumn":38,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[4185,4396],"text":"type TokenRefreshResponse = BaseApiResponse<{\n  /** New access token */\n  accessToken: string;\n  /** Expiration time in seconds */\n  expiresIn: number;\n  /** Token type */\n  tokenType: 'Bearer';\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":202,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":202,"endColumn":38,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[4695,4942],"text":"type UserSessionsResponse = BaseApiResponse<Array<{\n  sessionId: string;\n  createdAt: string;\n  expiresAt: string;\n  lastActivity: string;\n  ipAddress: string;\n  userAgent: string;\n  platform: string;\n  isCurrentSession: boolean;\n}>>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":220,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":220,"endColumn":37,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[5091,5711],"text":"type UserProfileResponse = BaseApiResponse<{\n  id: string;\n  email: string;\n  name: string;\n  phone?: string;\n  avatar: string;\n  bio?: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  interests: string[];\n  roles: string[];\n  settings: {\n    language: string;\n    darkMode: boolean;\n    notificationsEnabled: boolean;\n    [key: string]: any;\n  };\n  stats: {\n    postsCount: number;\n    followersCount: number;\n    followingCount: number;\n    donationsCount: number;\n    ridesCount: number;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":397,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":397,"endColumn":35,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[8789,8859],"text":"type DonationsResponse = PaginatedResponse<DonationItem>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":402,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":402,"endColumn":44,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[8908,9088],"text":"type DonationCategoriesResponse = BaseApiResponse<Array<{\n  id: string;\n  name: string;\n  nameHe: string;\n  icon: string;\n  count: number;\n  description?: string;\n}>>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":790,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":790,"endColumn":36,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[16982,17422],"text":"type FileUploadResponse = BaseApiResponse<{\n  /** Unique file identifier */\n  fileId: string;\n  /** Direct URL to uploaded file */\n  url: string;\n  /** CDN URL for optimized delivery */\n  cdnUrl?: string;\n  /** Thumbnail URL (for images) */\n  thumbnailUrl?: string;\n  /** Upload metadata */\n  metadata: {\n    originalName: string;\n    size: number;\n    mimeType: string;\n    uploadedAt: string;\n    expiresAt?: string;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":935,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":935,"endColumn":37,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[20118,20824],"text":"type HealthCheckResponse = BaseApiResponse<{\n  /** Overall service status */\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  \n  /** Individual service components */\n  services: {\n    database: 'healthy' | 'unhealthy';\n    redis: 'healthy' | 'unhealthy';\n    googleOAuth: 'healthy' | 'unhealthy';\n    storage: 'healthy' | 'unhealthy';\n  };\n  \n  /** Performance metrics */\n  metrics: {\n    responseTime: number;\n    memoryUsage: number;\n    cpuUsage: number;\n    activeConnections: number;\n  };\n  \n  /** Version information */\n  version: {\n    api: string;\n    database: string;\n    node: string;\n  };\n  \n  /** Uptime information */\n  uptime: {\n    seconds: number;\n    human: string;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An interface declaring no members is equivalent to its supertype.","line":1000,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":1000,"endColumn":39,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[21441,21825],"text":"type BulkOperationResponse<T = any> = BaseApiResponse<{\n  /** Number of items processed successfully */\n  successCount: number;\n  /** Number of items that failed */\n  errorCount: number;\n  /** Total items attempted */\n  totalCount: number;\n  /** Results for each item */\n  results: Array<{\n    id: string;\n    success: boolean;\n    data?: T;\n    error?: string;\n  }>;\n}>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * API TYPE DEFINITIONS  \n * ========================================\n * \n * Type definitions for all API operations in the Google Authentication System.\n * These types ensure type safety for all server communication and data structures.\n * \n * CATEGORIES:\n * - Request/Response types for all API endpoints\n * - Data Transfer Objects (DTOs) for validation\n * - Server response formats and error structures\n * - Pagination and filtering types\n * - Real-time communication types\n * \n * AUTHOR: AI Assistant\n * LAST UPDATED: 2024\n */\n\n// ========================================\n// BASE API TYPES\n// ========================================\n\n/**\n * Standard API response wrapper used by all endpoints\n * Provides consistent response structure across the entire API\n */\nexport interface BaseApiResponse<TData = any> {\n  /** Whether the operation was successful */\n  success: boolean;\n  \n  /** Response data (present when success is true) */\n  data?: TData;\n  \n  /** Error message (present when success is false) */\n  error?: string;\n  \n  /** Additional context message */\n  message?: string;\n  \n  /** Response metadata for debugging and monitoring */\n  metadata?: {\n    /** Unique request identifier for tracing */\n    requestId: string;\n    \n    /** Response timestamp in ISO format */\n    timestamp: string;\n    \n    /** Request processing duration in milliseconds */\n    duration: number;\n    \n    /** API version that handled the request */\n    version?: string;\n    \n    /** Whether response was cached */\n    cached?: boolean;\n    \n    /** Rate limiting information */\n    rateLimit?: {\n      /** Remaining requests in current window */\n      remaining: number;\n      /** When the rate limit window resets */\n      resetTime: number;\n      /** Total request limit per window */\n      limit: number;\n    };\n  };\n}\n\n/**\n * Pagination metadata for list responses\n */\nexport interface PaginationMeta {\n  /** Current page number (1-based) */\n  page: number;\n  \n  /** Number of items per page */\n  limit: number;\n  \n  /** Total number of items across all pages */\n  total: number;\n  \n  /** Total number of pages */\n  totalPages: number;\n  \n  /** Whether there are more pages after this one */\n  hasNext: boolean;\n  \n  /** Whether there are pages before this one */\n  hasPrev: boolean;\n  \n  /** Cursor for efficient pagination (if using cursor-based pagination) */\n  cursor?: {\n    next?: string;\n    prev?: string;\n  };\n}\n\n/**\n * Paginated response wrapper\n */\nexport interface PaginatedResponse<TData> extends BaseApiResponse<TData[]> {\n  /** Pagination metadata */\n  pagination: PaginationMeta;\n}\n\n// ========================================\n// AUTHENTICATION API TYPES\n// ========================================\n\n/**\n * Google OAuth token verification request\n */\nexport interface GoogleAuthRequest {\n  /** Google ID token to verify */\n  idToken: string;\n  \n  /** Optional access token (alternative to ID token) */\n  accessToken?: string;\n  \n  /** Client metadata for security logging */\n  metadata?: {\n    platform: string;\n    appVersion?: string;\n    deviceId?: string;\n    userAgent?: string;\n  };\n}\n\n/**\n * Successful authentication response\n */\nexport interface AuthSuccessResponse extends BaseApiResponse<{\n  /** JWT token pair for session management */\n  tokens: {\n    accessToken: string;\n    refreshToken: string;\n    expiresIn: number;\n    refreshExpiresIn: number;\n    tokenType: 'Bearer';\n  };\n  \n  /** Verified user profile data */\n  user: {\n    id: string;\n    email: string;\n    name: string;\n    avatar: string;\n    roles: string[];\n    emailVerified: boolean;\n    settings: Record<string, any>;\n  };\n}> {\n  /** Additional authentication metadata */\n  metadata?: BaseApiResponse['metadata'] & {\n    /** Whether this is a new user registration */\n    isNewUser?: boolean;\n    /** Previous login timestamp */\n    lastLogin?: string;\n    /** Login count */\n    loginCount?: number;\n    /** Security warnings */\n    securityWarnings?: string[];\n  };\n}\n\n/**\n * Token refresh request\n */\nexport interface TokenRefreshRequest {\n  /** Current refresh token */\n  refreshToken: string;\n}\n\n/**\n * Token refresh response\n */\nexport interface TokenRefreshResponse extends BaseApiResponse<{\n  /** New access token */\n  accessToken: string;\n  /** Expiration time in seconds */\n  expiresIn: number;\n  /** Token type */\n  tokenType: 'Bearer';\n}> {}\n\n/**\n * Logout request\n */\nexport interface LogoutRequest {\n  /** Current access token (optional) */\n  token?: string;\n  /** Current refresh token (optional) */\n  refreshToken?: string;\n  /** Whether to logout from all devices */\n  allDevices?: boolean;\n}\n\n/**\n * User sessions response\n */\nexport interface UserSessionsResponse extends BaseApiResponse<Array<{\n  sessionId: string;\n  createdAt: string;\n  expiresAt: string;\n  lastActivity: string;\n  ipAddress: string;\n  userAgent: string;\n  platform: string;\n  isCurrentSession: boolean;\n}>> {}\n\n// ========================================\n// USER API TYPES\n// ========================================\n\n/**\n * User profile response\n */\nexport interface UserProfileResponse extends BaseApiResponse<{\n  id: string;\n  email: string;\n  name: string;\n  phone?: string;\n  avatar: string;\n  bio?: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  interests: string[];\n  roles: string[];\n  settings: {\n    language: string;\n    darkMode: boolean;\n    notificationsEnabled: boolean;\n    [key: string]: any;\n  };\n  stats: {\n    postsCount: number;\n    followersCount: number;\n    followingCount: number;\n    donationsCount: number;\n    ridesCount: number;\n  };\n}> {}\n\n/**\n * User profile update request\n */\nexport interface UserUpdateRequest {\n  /** Updated name */\n  name?: string;\n  /** Updated phone number */\n  phone?: string;\n  /** Updated avatar URL */\n  avatar?: string;\n  /** Updated bio */\n  bio?: string;\n  /** Updated location */\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  /** Updated interests */\n  interests?: string[];\n  /** Updated settings */\n  settings?: {\n    language?: string;\n    darkMode?: boolean;\n    notificationsEnabled?: boolean;\n    [key: string]: any;\n  };\n}\n\n/**\n * User list filters\n */\nexport interface UserListFilters {\n  /** Filter by city */\n  city?: string;\n  /** Filter by country */\n  country?: string;\n  /** Search by name or email */\n  search?: string;\n  /** Filter by role */\n  role?: string;\n  /** Filter by activity status */\n  isActive?: boolean;\n  /** Sort field */\n  sortBy?: 'name' | 'joinDate' | 'karmaPoints' | 'lastActive';\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n}\n\n// ========================================\n// DONATION API TYPES\n// ========================================\n\n/**\n * Donation item structure\n */\nexport interface DonationItem {\n  id: string;\n  title: string;\n  description: string;\n  category: string;\n  type: 'item' | 'service' | 'money' | 'time';\n  status: 'available' | 'reserved' | 'completed' | 'cancelled';\n  donorId: string;\n  donorName: string;\n  location: {\n    city: string;\n    country: string;\n    address?: string;\n  };\n  images: string[];\n  tags: string[];\n  createdAt: string;\n  updatedAt: string;\n  expiresAt?: string;\n  value?: number;\n  currency?: string;\n  contactInfo?: {\n    phone?: string;\n    email?: string;\n    preferredContact?: 'phone' | 'email' | 'app';\n  };\n}\n\n/**\n * Create donation request\n */\nexport interface CreateDonationRequest {\n  title: string;\n  description: string;\n  category: string;\n  type: 'item' | 'service' | 'money' | 'time';\n  location: {\n    city: string;\n    country: string;\n    address?: string;\n  };\n  images?: string[];\n  tags?: string[];\n  expiresAt?: string;\n  value?: number;\n  currency?: string;\n  contactInfo?: {\n    phone?: string;\n    email?: string;\n    preferredContact?: 'phone' | 'email' | 'app';\n  };\n}\n\n/**\n * Donation filters for search and listing\n */\nexport interface DonationFilters {\n  /** Filter by category */\n  category?: string;\n  /** Filter by type */\n  type?: 'item' | 'service' | 'money' | 'time';\n  /** Filter by city */\n  city?: string;\n  /** Filter by status */\n  status?: 'available' | 'reserved' | 'completed';\n  /** Search by title or description */\n  search?: string;\n  /** Filter by value range */\n  minValue?: number;\n  maxValue?: number;\n  /** Filter by creation date */\n  dateFrom?: string;\n  dateTo?: string;\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n  /** Sort field */\n  sortBy?: 'createdAt' | 'title' | 'value' | 'location';\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Donation list response\n */\nexport interface DonationsResponse extends PaginatedResponse<DonationItem> {}\n\n/**\n * Donation categories response\n */\nexport interface DonationCategoriesResponse extends BaseApiResponse<Array<{\n  id: string;\n  name: string;\n  nameHe: string;\n  icon: string;\n  count: number;\n  description?: string;\n}>> {}\n\n// ========================================\n// RIDE API TYPES  \n// ========================================\n\n/**\n * Ride sharing item structure\n */\nexport interface RideItem {\n  id: string;\n  title: string;\n  driverId: string;\n  driverName: string;\n  driverRating: number;\n  from: {\n    name: string;\n    city: string;\n    address?: string;\n    coordinates?: {\n      lat: number;\n      lng: number;\n    };\n  };\n  to: {\n    name: string;\n    city: string;\n    address?: string;\n    coordinates?: {\n      lat: number;\n      lng: number;\n    };\n  };\n  departureTime: string;\n  estimatedArrival?: string;\n  availableSeats: number;\n  totalSeats: number;\n  pricePerSeat: number;\n  currency: string;\n  status: 'available' | 'full' | 'in_progress' | 'completed' | 'cancelled';\n  requirements?: string[];\n  description?: string;\n  vehicle?: {\n    model?: string;\n    color?: string;\n    licensePlate?: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Create ride request\n */\nexport interface CreateRideRequest {\n  title: string;\n  fromLocation: {\n    name: string;\n    city: string;\n    address?: string;\n  };\n  toLocation: {\n    name: string;\n    city: string;\n    address?: string;\n  };\n  departureTime: string;\n  availableSeats: number;\n  pricePerSeat: number;\n  currency?: string;\n  requirements?: string[];\n  description?: string;\n  vehicle?: {\n    model?: string;\n    color?: string;\n  };\n}\n\n/**\n * Ride filters for search\n */\nexport interface RideFilters {\n  /** Filter by departure city */\n  fromCity?: string;\n  /** Filter by destination city */\n  toCity?: string;\n  /** Filter by departure date */\n  date?: string;\n  /** Filter by time range */\n  timeFrom?: string;\n  timeTo?: string;\n  /** Filter by available seats */\n  minSeats?: number;\n  /** Filter by price range */\n  maxPrice?: number;\n  /** Filter by status */\n  status?: 'available' | 'full';\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n  /** Sort options */\n  sortBy?: 'departureTime' | 'price' | 'availableSeats';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Ride booking request\n */\nexport interface RideBookingRequest {\n  /** Number of seats to book */\n  seats: number;\n  /** Passenger contact information */\n  passengerInfo: {\n    name: string;\n    phone: string;\n    email?: string;\n  };\n  /** Special requests or notes */\n  notes?: string;\n}\n\n// ========================================\n// COMMUNITY STATS TYPES\n// ========================================\n\n/**\n * Community statistics structure\n */\nexport interface CommunityStats {\n  /** Total statistics */\n  totals: {\n    activeUsers: number;\n    totalDonations: number;\n    totalRides: number;\n    karmaPointsDistributed: number;\n    citiesCovered: number;\n  };\n  \n  /** Recent activity (last 30 days) */\n  recentActivity: {\n    newUsers: number;\n    newDonations: number;\n    newRides: number;\n    completedTransactions: number;\n  };\n  \n  /** Top performing cities */\n  topCities: Array<{\n    city: string;\n    country: string;\n    userCount: number;\n    donationCount: number;\n    rideCount: number;\n    karmaPoints: number;\n  }>;\n  \n  /** Category breakdown */\n  categoryStats: Array<{\n    category: string;\n    count: number;\n    percentage: number;\n    growth: number; // percentage change from previous period\n  }>;\n  \n  /** Time-based statistics */\n  timeStats: {\n    hourlyActivity: number[]; // 24 hours\n    weeklyActivity: number[]; // 7 days  \n    monthlyActivity: number[]; // 12 months\n  };\n}\n\n/**\n * Community stats filters\n */\nexport interface StatsFilters {\n  /** Filter by city */\n  city?: string;\n  /** Filter by time period */\n  period?: 'day' | 'week' | 'month' | 'year';\n  /** Start date for custom period */\n  dateFrom?: string;\n  /** End date for custom period */\n  dateTo?: string;\n  /** Specific statistic type */\n  statType?: string;\n}\n\n// ========================================\n// ERROR TYPES\n// ========================================\n\n/**\n * API error response structure\n */\nexport interface ApiErrorResponse extends BaseApiResponse<never> {\n  /** Always false for error responses */\n  success: false;\n  \n  /** Error message for display to user */\n  error: string;\n  \n  /** Additional error details */\n  details?: {\n    /** Error code for programmatic handling */\n    code?: string;\n    /** Field-specific validation errors */\n    fieldErrors?: Record<string, string[]>;\n    /** Suggestions for fixing the error */\n    suggestions?: string[];\n    /** Documentation link for the error */\n    docsUrl?: string;\n  };\n}\n\n/**\n * Network error information\n */\nexport interface NetworkError {\n  /** Error type classification */\n  type: 'NETWORK_ERROR' | 'TIMEOUT_ERROR' | 'CONNECTIVITY_ERROR';\n  /** User-friendly error message */\n  message: string;\n  /** Technical error details */\n  technical?: string;\n  /** Whether the operation can be retried */\n  retryable: boolean;\n  /** Suggested retry delay in milliseconds */\n  retryDelay?: number;\n}\n\n// ========================================\n// REQUEST TYPES\n// ========================================\n\n/**\n * Base filter interface for list endpoints\n */\nexport interface BaseFilters {\n  /** Search query string */\n  search?: string;\n  /** Results per page (max 100) */\n  limit?: number;\n  /** Page offset for pagination */\n  offset?: number;\n  /** Sort field */\n  sortBy?: string;\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Date range filter\n */\nexport interface DateRangeFilter {\n  /** Start date (ISO format) */\n  dateFrom?: string;\n  /** End date (ISO format) */\n  dateTo?: string;\n}\n\n/**\n * Location filter\n */\nexport interface LocationFilter {\n  /** City name */\n  city?: string;\n  /** Country code or name */\n  country?: string;\n  /** Radius for geographic search (in km) */\n  radius?: number;\n  /** Geographic coordinates */\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n}\n\n// ========================================\n// CHAT API TYPES\n// ========================================\n\n/**\n * Chat conversation structure\n */\nexport interface ChatConversation {\n  id: string;\n  participants: Array<{\n    userId: string;\n    name: string;\n    avatar: string;\n    role: 'owner' | 'participant';\n    joinedAt: string;\n  }>;\n  title?: string;\n  type: 'direct' | 'group' | 'support';\n  lastMessage?: {\n    id: string;\n    text: string;\n    senderId: string;\n    timestamp: string;\n    type: 'text' | 'image' | 'file';\n  };\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n  isArchived: boolean;\n  isMuted: boolean;\n  settings?: {\n    allowInvites: boolean;\n    deleteAfterDays?: number;\n  };\n}\n\n/**\n * Chat message structure\n */\nexport interface ChatMessage {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  senderName: string;\n  senderAvatar: string;\n  type: 'text' | 'image' | 'file' | 'system' | 'voice';\n  content: {\n    text?: string;\n    imageUrl?: string;\n    fileUrl?: string;\n    fileName?: string;\n    fileSize?: number;\n    voiceDuration?: number;\n  };\n  timestamp: string;\n  editedAt?: string;\n  isEdited: boolean;\n  replyTo?: {\n    messageId: string;\n    text: string;\n    senderName: string;\n  };\n  reactions?: Array<{\n    emoji: string;\n    count: number;\n    users: string[];\n  }>;\n  readBy: Array<{\n    userId: string;\n    readAt: string;\n  }>;\n  metadata?: {\n    platform: string;\n    ipAddress?: string;\n    edited?: boolean;\n    deleted?: boolean;\n  };\n}\n\n// ========================================\n// FILE UPLOAD TYPES\n// ========================================\n\n/**\n * File upload request\n */\nexport interface FileUploadRequest {\n  /** File name */\n  fileName: string;\n  /** File MIME type */\n  fileType: string;\n  /** File size in bytes */\n  fileSize: number;\n  /** Upload purpose/context */\n  purpose: 'avatar' | 'donation_image' | 'chat_attachment' | 'document';\n  /** Associated resource ID */\n  resourceId?: string;\n}\n\n/**\n * File upload response\n */\nexport interface FileUploadResponse extends BaseApiResponse<{\n  /** Unique file identifier */\n  fileId: string;\n  /** Direct URL to uploaded file */\n  url: string;\n  /** CDN URL for optimized delivery */\n  cdnUrl?: string;\n  /** Thumbnail URL (for images) */\n  thumbnailUrl?: string;\n  /** Upload metadata */\n  metadata: {\n    originalName: string;\n    size: number;\n    mimeType: string;\n    uploadedAt: string;\n    expiresAt?: string;\n  };\n}> {}\n\n// ========================================\n// NOTIFICATION TYPES\n// ========================================\n\n/**\n * Push notification structure\n */\nexport interface PushNotification {\n  id: string;\n  userId: string;\n  type: 'system' | 'social' | 'transaction' | 'security' | 'promotional';\n  title: string;\n  body: string;\n  data?: Record<string, any>;\n  priority: 'low' | 'normal' | 'high' | 'critical';\n  scheduledFor?: string;\n  sentAt?: string;\n  readAt?: string;\n  actionButtons?: Array<{\n    id: string;\n    title: string;\n    action: string;\n  }>;\n  expiresAt?: string;\n  metadata?: {\n    campaign?: string;\n    source?: string;\n    category?: string;\n  };\n}\n\n/**\n * Notification preferences\n */\nexport interface NotificationPreferences {\n  /** Push notification settings */\n  push: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n    quietHours?: {\n      start: string;\n      end: string;\n      timezone: string;\n    };\n  };\n  \n  /** Email notification settings */\n  email: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n    frequency: 'immediate' | 'daily' | 'weekly';\n  };\n  \n  /** SMS notification settings */\n  sms: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n  };\n}\n\n// ========================================\n// ANALYTICS TYPES\n// ========================================\n\n/**\n * User analytics data\n */\nexport interface UserAnalytics {\n  /** User engagement metrics */\n  engagement: {\n    sessionsThisWeek: number;\n    averageSessionDuration: number; // minutes\n    screenViews: Record<string, number>;\n    actionsPerSession: number;\n  };\n  \n  /** User activity metrics */\n  activity: {\n    donationsCreated: number;\n    donationsReceived: number;\n    ridesOffered: number;\n    ridesTaken: number;\n    messagesExchanged: number;\n    karmaPointsEarned: number;\n  };\n  \n  /** User behavior patterns */\n  behavior: {\n    mostActiveHours: number[];\n    preferredCategories: string[];\n    averageResponseTime: number; // minutes\n    completionRate: number; // percentage\n  };\n}\n\n/**\n * Event tracking structure\n */\nexport interface AnalyticsEvent {\n  /** Event name */\n  event: string;\n  /** User who triggered the event */\n  userId?: string;\n  /** Event properties */\n  properties: Record<string, any>;\n  /** Event timestamp */\n  timestamp: string;\n  /** Session identifier */\n  sessionId?: string;\n  /** Platform/device information */\n  context: {\n    platform: string;\n    appVersion: string;\n    userAgent?: string;\n    screenResolution?: string;\n    timezone: string;\n  };\n}\n\n// ========================================\n// HEALTH CHECK TYPES\n// ========================================\n\n/**\n * Service health check response\n */\nexport interface HealthCheckResponse extends BaseApiResponse<{\n  /** Overall service status */\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  \n  /** Individual service components */\n  services: {\n    database: 'healthy' | 'unhealthy';\n    redis: 'healthy' | 'unhealthy';\n    googleOAuth: 'healthy' | 'unhealthy';\n    storage: 'healthy' | 'unhealthy';\n  };\n  \n  /** Performance metrics */\n  metrics: {\n    responseTime: number;\n    memoryUsage: number;\n    cpuUsage: number;\n    activeConnections: number;\n  };\n  \n  /** Version information */\n  version: {\n    api: string;\n    database: string;\n    node: string;\n  };\n  \n  /** Uptime information */\n  uptime: {\n    seconds: number;\n    human: string;\n  };\n}> {}\n\n// ========================================\n// UTILITY TYPES\n// ========================================\n\n/**\n * Generic list response\n */\nexport type ListResponse<T> = PaginatedResponse<T>;\n\n/**\n * Generic create response\n */\nexport type CreateResponse<T> = BaseApiResponse<T & { id: string; createdAt: string }>;\n\n/**\n * Generic update response\n */\nexport type UpdateResponse<T> = BaseApiResponse<T & { updatedAt: string }>;\n\n/**\n * Generic delete response\n */\nexport type DeleteResponse = BaseApiResponse<{ \n  deleted: boolean; \n  deletedAt: string; \n  id: string \n}>;\n\n/**\n * Bulk operation response\n */\nexport interface BulkOperationResponse<T = any> extends BaseApiResponse<{\n  /** Number of items processed successfully */\n  successCount: number;\n  /** Number of items that failed */\n  errorCount: number;\n  /** Total items attempted */\n  totalCount: number;\n  /** Results for each item */\n  results: Array<{\n    id: string;\n    success: boolean;\n    data?: T;\n    error?: string;\n  }>;\n}> {}\n\n// ========================================\n// TYPE GUARDS\n// ========================================\n\n/**\n * Type guard for successful API responses\n */\nexport function isSuccessResponse<T>(response: BaseApiResponse<T>): response is BaseApiResponse<T> & { \n  success: true; \n  data: T \n} {\n  return response.success === true && response.data !== undefined;\n}\n\n/**\n * Type guard for error API responses\n */\nexport function isErrorResponse<T>(response: BaseApiResponse<T>): response is ApiErrorResponse {\n  return response.success === false && typeof response.error === 'string';\n}\n\n/**\n * Type guard for paginated responses\n */\nexport function isPaginatedResponse<T>(response: BaseApiResponse<T[]>): response is PaginatedResponse<T> {\n  return response.success === true && \n         Array.isArray(response.data) && \n         'pagination' in response;\n}\n\n// ========================================\n// EXPORT ALL TYPES\n// ========================================\n\n// All types are exported via their interface/type declarations above\n\n/**\n * ========================================\n * USAGE EXAMPLES\n * ========================================\n * \n * // Type-safe API call\n * const response: UserProfileResponse = await api.getCurrentUser();\n * if (isSuccessResponse(response)) {\n *   console.log('User name:', response.data.name);\n * }\n * \n * // Create donation with validation\n * const donationData: CreateDonationRequest = {\n *   title: '×¡×¤×¨ ×œ×™××•×“',\n *   description: '×¡×¤×¨ ×¤×™×–×™×§×” ×œ××›×™×¨×”',\n *   category: 'education',\n *   type: 'item',\n *   location: {\n *     city: '×ª×œ ××‘×™×‘',\n *     country: '×™×©×¨××œ'\n *   }\n * };\n * \n * // Filter rides with type safety\n * const filters: RideFilters = {\n *   fromCity: '×ª×œ ××‘×™×‘',\n *   toCity: '×™×¨×•×©×œ×™×',\n *   date: '2024-01-15',\n *   maxPrice: 50\n * };\n * \n * const rides = await api.getRides(filters);\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/types/AuthTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/utils/ErrorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/utils/SecureStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useAdminProtection.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has unnecessary dependencies: 'isAuthenticated' and 'isGuestMode'. Either exclude them or remove the dependency array.","line":75,"column":12,"nodeType":"ArrayExpression","endLine":75,"endColumn":142,"suggestions":[{"desc":"Update the dependencies array to be: [isAdmin, isLoading, selectedUser, verifyAdminStatus, handleUnauthorized, allowViewOnly, isViewOnly]","fix":{"range":[2957,3087],"text":"[isAdmin, isLoading, selectedUser, verifyAdminStatus, handleUnauthorized, allowViewOnly, isViewOnly]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useRef } from 'react';\nimport { Alert } from 'react-native';\nimport { useNavigation, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\n\nexport function useAdminProtection(allowViewOnly?: boolean) {\n    const { isAdmin, isLoading, selectedUser, refreshUserRoles, isAuthenticated, isGuestMode } = useUser();\n    const navigation = useNavigation<any>();\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const isViewOnly = routeParams?.viewOnly === true;\n    const isVerifyingRef = useRef(false);\n    const lastCheckRef = useRef<number>(0);\n\n    const handleUnauthorized = useCallback(() => {\n        Alert.alert('×©×’×™××”', '××™×Ÿ ×œ×š ×”×¨×©××•×ª ×œ×¦×¤×•×ª ×‘×“×£ ×–×”');\n        if (navigation.canGoBack()) {\n            navigation.goBack();\n        } else {\n            navigation.navigate('Home');\n        }\n    }, [navigation]);\n\n    const verifyAdminStatus = useCallback(async () => {\n        // Prevent multiple simultaneous checks\n        if (!selectedUser?.id || isVerifyingRef.current) return;\n\n        // Throttle checks - don't check more than once every 5 seconds\n        const now = Date.now();\n        if (now - lastCheckRef.current < 5000) {\n            return;\n        }\n\n        try {\n            isVerifyingRef.current = true;\n            lastCheckRef.current = now;\n\n            console.log('ğŸ” Admin protection: Verifying admin status for user:', selectedUser.email);\n\n            // Refresh user roles from database\n            // This will update the store if roles changed\n            await refreshUserRoles();\n\n            // The isAdmin flag will be updated automatically by the store\n            // If it becomes false, the next render will catch it in the local check below\n\n        } catch (err) {\n            console.warn('ğŸ” Admin verification failed (network error or other)', err);\n        } finally {\n            isVerifyingRef.current = false;\n        }\n    }, [selectedUser?.id, selectedUser?.email, refreshUserRoles]);\n\n    useFocusEffect(\n        useCallback(() => {\n            // If view-only mode is allowed and active, allow everyone (including unauthenticated)\n            if (allowViewOnly && isViewOnly) {\n                // In view-only mode, allow everyone - no authentication required\n                console.log('ğŸ” View-only protection: Allowing access (view-only mode)');\n                return;\n            }\n\n            // 1. Immediate local check for admin access\n            if (!isLoading && !isAdmin) {\n                console.log('ğŸ” Admin protection: User not admin (local check), redirecting');\n                handleUnauthorized();\n                return;\n            }\n\n            // 2. Server check if locally admin\n            // This runs every time the screen comes into focus\n            if (!isLoading && isAdmin && selectedUser) {\n                verifyAdminStatus();\n            }\n        }, [isAdmin, isLoading, selectedUser, verifyAdminStatus, handleUnauthorized, allowViewOnly, isViewOnly, isAuthenticated, isGuestMode])\n    );\n\n    return { isAuthorized: isAdmin || (allowViewOnly && isViewOnly && (isAuthenticated || isGuestMode)) };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useFeedData.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":203,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":203,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\nimport { postsService } from '../utils/postsService';\nimport databaseService from '../utils/databaseService';\nimport { logger } from '../utils/loggerService';\nimport { FeedItem } from '../types/feed';\nimport { useUser } from '../stores/userStore';\n\nconst NUM_ITEMS = 50; // Per page/batch\n\nexport const useFeedData = (feedMode: 'friends' | 'discovery') => {\n    const { selectedUser: currentUser } = useUser();\n    const [feed, setFeed] = useState<FeedItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [refreshing, setRefreshing] = useState(false);\n\n    // Helper to map API post to FeedItem\n    const mapPostToItem = (post: any): FeedItem => {\n        // For ride posts, extract ride-specific data\n        // Helper to format date/time safely\n        let rideData: any = {};\n        const formatRideTime = (dateIso: string) => {\n            if (!dateIso) return { time: '', date: '' };\n            const dep = new Date(dateIso);\n            if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n            const hours = dep.getHours().toString().padStart(2, '0');\n            const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n            const day = dep.getDate().toString().padStart(2, '0');\n            const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n            const year = dep.getFullYear();\n\n            return {\n                time: `${hours}:${minutes}`,\n                date: `${day}.${month}.${year}`\n            };\n        };\n\n        // 1. Try ride_data from DB Join\n        if (post.ride_data) {\n            const rd = post.ride_data;\n            const { time, date } = formatRideTime(rd.departure_time);\n\n            rideData = {\n                from: typeof rd.from_location === 'string' ? rd.from_location : (rd.from_location?.name || rd.from_location?.city || ''),\n                to: typeof rd.to_location === 'string' ? rd.to_location : (rd.to_location?.name || rd.to_location?.city || ''),\n                seats: rd.available_seats || 0,\n                price: rd.price_per_seat || 0,\n                time,\n                date,\n                status: rd.status // Add status for ride\n            };\n        }\n        // 2. Fallback to metadata\n        else if ((post.post_type === 'ride' || post.post_type === 'ride_offered') && post.metadata) {\n            const meta = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n            const r = meta.ride || meta;\n\n            // Check departure_time (schema) or time/date (legacy/manual)\n            let timeStr = r.time || '';\n            let dateStr = r.date || '';\n\n            if (r.departure_time) {\n                const formatted = formatRideTime(r.departure_time);\n                if (formatted.time) timeStr = formatted.time;\n                if (formatted.date) dateStr = formatted.date;\n            }\n\n            rideData = {\n                from: typeof r.from_location === 'string' ? r.from_location : (r.from_location?.name || r.from_location?.city || r.from || ''),\n                to: typeof r.to_location === 'string' ? r.to_location : (r.to_location?.name || r.to_location?.city || r.to || ''),\n                seats: r.available_seats || r.seats || 0,\n                price: r.price_per_seat || r.price || 0,\n                time: timeStr,\n                date: dateStr\n            };\n        }\n\n        // Ensure user is always defined\n        const author = post.author || {};\n        const userId = author.id || post.author_id || 'unknown';\n        const userName = author.name || 'common.unknownUser';\n        const userAvatar = author.avatar_url || undefined;\n\n        // Get status from item_data or ride_data or default\n        let itemStatus: string | undefined;\n        if (post.item_data) {\n            itemStatus = post.item_data.status;\n        } else if (post.ride_data) {\n            itemStatus = post.ride_data.status;\n        }\n\n        // Parse metadata to get item_id if needed\n        let metadataItemId: string | undefined;\n        try {\n            if (post.metadata) {\n                const metadata = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n                metadataItemId = metadata?.item_id;\n            }\n        } catch (e) {\n            // Ignore parse errors\n        }\n\n        // For items: ALWAYS prefer item_data.id (from JOIN with items table) - this is the most reliable source\n        // Then try metadata.item_id, then item_id column (if not timestamp)\n        // This is a workaround for cases where item_id column was stored incorrectly as timestamp\n        let finalItemId: string | undefined;\n        if (post.item_data?.id) {\n            // item_data.id comes from JOIN with items table - this is the most reliable\n            finalItemId = post.item_data.id;\n        } else if (metadataItemId && !/^\\d{10,13}$/.test(metadataItemId)) {\n            // metadata.item_id is valid (not timestamp) - this is stored when post is created\n            finalItemId = metadataItemId;\n        } else if (post.item_id && !/^\\d{10,13}$/.test(post.item_id)) {\n            // item_id column is valid (not timestamp)\n            finalItemId = post.item_id;\n        } else {\n            // If all else fails and we have a timestamp, we can't use it\n            // But we'll log it for debugging\n            finalItemId = undefined;\n        }\n\n        // Debug log for item/donation posts to help diagnose issues\n        if ((post.post_type === 'item' || post.post_type === 'donation')) {\n            if (!finalItemId || /^\\d{10,13}$/.test(finalItemId || '')) {\n                console.warn('âš ï¸ Invalid item ID for post:', {\n                    postId: post.id,\n                    postType: post.post_type,\n                    finalItemId,\n                    item_id_column: post.item_id,\n                    item_data_id: post.item_data?.id,\n                    metadata_item_id: metadataItemId,\n                    hasItemData: !!post.item_data\n                });\n            }\n        }\n\n        return {\n            id: post.id,\n            type: post.post_type || 'post',\n            subtype: post.post_type, // e.g. 'task_assignment', 'ride'\n            title: post.title || 'post.noTitle', // Use key or default in UI\n            description: post.description || '',\n            thumbnail: post.images && post.images.length > 0 ? post.images[0] : null,\n            user: {\n                id: userId,\n                name: userName,\n                avatar: userAvatar,\n            },\n            likes: parseInt(post.likes || '0'),\n            comments: parseInt(post.comments || '0'),\n            isLiked: post.is_liked || false,\n            timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n                ? new Date(post.created_at).toISOString()\n                : new Date().toISOString(),\n            taskData: post.task ? {\n                id: post.task.id,\n                title: post.task.title,\n                status: post.task.status\n            } : undefined,\n            // Add status for items and donations\n            status: itemStatus,\n            // Add IDs for updating posts\n            itemId: finalItemId,\n            rideId: post.ride_id || post.ride_data?.id,\n            taskId: post.task_id || post.task?.id,\n            // Add ride-specific fields if this is a ride post\n            ...rideData\n        };\n    };\n\n    const loadFeed = useCallback(async (isRefresh = false) => {\n        if (isRefresh) {\n            setRefreshing(true);\n        } else {\n            setLoading(true);\n        }\n\n        try {\n            logger.debug('useFeedData', 'Loading feed', { feedMode, userId: currentUser?.id });\n\n            // 1. Fetch Posts from Backend\n            const postsResponse = await postsService.getPosts(NUM_ITEMS, 0, feedMode === 'friends' ? currentUser?.id : undefined);\n            const rawPosts = postsResponse.success ? (postsResponse.data || []) : [];\n            const mappedPosts = rawPosts.map(mapPostToItem);\n\n            const allContent: FeedItem[] = [...mappedPosts];\n            const existingIds = new Set(allContent.map(item => item.id));\n\n            // Track IDs of tasks that already have a post to avoid duplicates\n            const postedTaskIds = new Set(\n                rawPosts\n                    .filter((p: any) => p.task_id || p.task?.id)\n                    .map((p: any) => p.task_id || p.task?.id)\n            );\n\n            // Note: Rides are now included in posts with post_type='ride', so no need to fetch separately\n            // Note: Items are now included in posts with post_type='item' or 'donation', so no need to fetch separately\n            // When an item is created, a post is automatically created for it in the backend\n\n            // 4. Fetch Tasks (Match ProfileScreen logic - independent tasks)\n            try {\n                const { apiService } = require('../utils/apiService');\n                const [openTasksRes, progressTasksRes] = await Promise.all([\n                    apiService.getTasks({ status: 'open', limit: 20 }),\n                    apiService.getTasks({ status: 'in_progress', limit: 20 })\n                ]);\n\n                const rawTasks = [\n                    ...(openTasksRes.success ? (openTasksRes.data || []) : []),\n                    ...(progressTasksRes.success ? (progressTasksRes.data || []) : [])\n                ];\n\n                // Map tasks to FeedItems\n                rawTasks.forEach((task: any) => {\n                    // Check if this task is already in a post\n                    if (postedTaskIds.has(task.id)) {\n                        return;\n                    }\n\n                    // Use actual task ID (UUID) without prefix\n                    if (!existingIds.has(task.id)) {\n                        const creator = task.creator_details || {};\n\n                        const taskItem: FeedItem = {\n                            id: task.id, // Use actual task ID\n                            type: 'post', // Show as post\n                            subtype: 'task_assignment',\n                            title: `×™×¦×¨/×” ××©×™××” ×—×“×©×”: ${task.title}`,\n                            description: task.description || '',\n                            thumbnail: null,\n                            user: {\n                                id: creator.id || task.created_by || 'unknown',\n                                name: creator.name || 'Unknown User',\n                                avatar: creator.avatar_url || undefined\n                            },\n                            likes: 0,\n                            comments: 0,\n                            isLiked: false,\n                            timestamp: task.created_at || new Date().toISOString(),\n                            taskData: {\n                                id: task.id,\n                                title: task.title,\n                                status: task.status\n                            }\n                        };\n                        allContent.push(taskItem);\n                        existingIds.add(task.id);\n                    }\n                });\n            } catch (e) {\n                logger.warn('useFeedData', 'Failed to load tasks', { error: e });\n            }\n\n            // Sort by timestamp\n            allContent.sort((a, b) => {\n                return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();\n            });\n\n            setFeed(allContent);\n\n        } catch (error) {\n            logger.error('useFeedData', 'Error loading feed', { error });\n            // Don't clear feed on error, maybe show toast\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    }, [feedMode, currentUser?.id]);\n\n    useEffect(() => {\n        loadFeed();\n    }, [loadFeed]);\n\n    return {\n        feed,\n        loading,\n        refreshing,\n        refresh: () => loadFeed(true),\n        loadMore: () => { } // Implement pagination later\n    };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostDeletion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostInteractions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostMenu.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useProfileNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useScrollPosition.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has an unnecessary dependency: 'scrollRef.current'. Either exclude it or remove the dependency array. Mutable values like 'scrollRef.current' aren't valid dependencies because mutating them doesn't re-render the component.","line":148,"column":6,"nodeType":"ArrayExpression","endLine":148,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [enabled]","fix":{"range":[4956,4984],"text":"[enabled]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'debounce'. Either include it or remove the dependency array.","line":206,"column":8,"nodeType":"ArrayExpression","endLine":206,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [enabled, screenKey, selectedUser?.id, debounce, debounceDelay]","fix":{"range":[6966,7019],"text":"[enabled, screenKey, selectedUser?.id, debounce, debounceDelay]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `selectedUser`, but the source dependencies were [screenKey, selectedUser?.id, enabled]. Inferred less specific property than source.\n\n/Users/navesarussi/KC/DEV/MVP/hooks/useScrollPosition.ts:278:17\n  276 |   // Load saved position when screen gains focus\n  277 |   useFocusEffect(\n> 278 |     useCallback(() => {\n      |                 ^^^^^^^\n> 279 |       if (!enabled) {\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 280 |         return;\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 326 |       restorePosition();\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 327 |     }, [screenKey, selectedUser?.id, enabled])\n      | ^^^^^^ Could not preserve existing manual memoization\n  328 |   );\n  329 |\n  330 |   return {","line":278,"column":17,"nodeType":null,"endLine":327,"endColumn":6}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// useScrollPosition.ts\n// Hook for preserving scroll position across re-renders\n// Works with both ScrollView and FlatList components\n// Session-only persistence - position is cleared when app closes\n\nimport { useEffect, useRef, useLayoutEffect, useCallback } from 'react';\nimport { Platform, ScrollView, FlatList } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\n\nconst LOG_SOURCE = 'useScrollPosition';\n\n// Storage key format: scroll_pos_{screenKey}_{userId}\nconst getStorageKey = (screenKey: string, userId: string | null): string => {\n  const userIdPart = userId || 'guest';\n  return `scroll_pos_${screenKey}_${userIdPart}`;\n};\n\n// Debounce function to limit save frequency\nconst createDebouncer = () => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  return (fn: () => void, delay: number) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(fn, delay);\n  };\n};\n\ninterface UseScrollPositionOptions {\n  enabled?: boolean;\n  debounceDelay?: number;\n}\n\n/**\n * Hook to preserve scroll position for a screen\n * \n * @param screenKey - Unique identifier for the screen (e.g., 'AdminMoneyScreen')\n * @param options - Configuration options\n * @returns ref to attach to ScrollView or FlatList component\n * \n * @example\n * ```tsx\n * const scrollRef = useScrollPosition('AdminMoneyScreen');\n * \n * <ScrollView ref={scrollRef}>\n *   {content}\n * </ScrollView>\n * ```\n */\nexport const useScrollPosition = (\n  screenKey: string,\n  options: UseScrollPositionOptions = {}\n): React.RefObject<ScrollView | FlatList> => {\n  const { enabled = true, debounceDelay = 200 } = options;\n  const { selectedUser } = useUser();\n  const scrollRef = useRef<ScrollView | FlatList>(null);\n  const debounce = useRef(createDebouncer()).current;\n  const isRestoringRef = useRef(false);\n  const lastSavedPositionRef = useRef<number>(0);\n\n  // Load saved position when screen gains focus\n  useFocusEffect(\n    useCallback(() => {\n      if (!enabled) {\n        return;\n      }\n\n      const restorePosition = async () => {\n        try {\n          const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n          let savedPosition: string | null = null;\n\n          if (Platform.OS === 'web') {\n            // Web: synchronous localStorage\n            if (typeof window !== 'undefined' && window.localStorage) {\n              savedPosition = window.localStorage.getItem(storageKey);\n            }\n          } else {\n            // Native: asynchronous AsyncStorage\n            savedPosition = await AsyncStorage.getItem(storageKey);\n          }\n\n          if (savedPosition) {\n            const position = parseFloat(savedPosition);\n            if (!isNaN(position) && position > 0 && scrollRef.current) {\n              isRestoringRef.current = true;\n              \n              // Small delay to ensure ScrollView is fully rendered\n              setTimeout(() => {\n                try {\n                  if (scrollRef.current) {\n                    if ('scrollTo' in scrollRef.current) {\n                      // ScrollView\n                      scrollRef.current.scrollTo({ y: position, animated: false });\n                    } else if ('scrollToOffset' in scrollRef.current) {\n                      // FlatList\n                      (scrollRef.current as FlatList<any>).scrollToOffset({\n                        offset: position,\n                        animated: false,\n                      });\n                    }\n                    logger.debug(LOG_SOURCE, 'Scroll position restored', {\n                      screenKey,\n                      position,\n                    });\n                  }\n                } catch (error) {\n                  logger.error(LOG_SOURCE, 'Error restoring scroll position', { error });\n                } finally {\n                  // Reset flag after a short delay\n                  setTimeout(() => {\n                    isRestoringRef.current = false;\n                  }, 100);\n                }\n              }, 100);\n            }\n          }\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error loading scroll position', { error });\n        }\n      };\n\n      restorePosition();\n    }, [screenKey, selectedUser?.id, enabled])\n  );\n\n  // Save position when scrolling\n  useEffect(() => {\n    if (!enabled || !scrollRef.current) {\n      return;\n    }\n\n    // For ScrollView - attach scroll event handler\n    if ('scrollTo' in scrollRef.current) {\n      const scrollView = scrollRef.current as ScrollView;\n      \n      // Note: ScrollView's onScroll event needs to be passed as a prop\n      // We'll need to handle this differently - see usage example\n      // For now, we'll save on blur/focus change\n    }\n\n    return () => {\n      // Cleanup if needed\n    };\n  }, [enabled, scrollRef.current]);\n\n  // Save position when screen loses focus\n  useFocusEffect(\n    useCallback(() => {\n      return () => {\n        // Cleanup function - called when screen loses focus\n        if (!enabled || isRestoringRef.current) {\n          return;\n        }\n\n        const savePosition = async () => {\n          try {\n            if (!scrollRef.current) {\n              return;\n            }\n\n            let position: number | null = null;\n\n            // Try to get current scroll position\n            // Note: ScrollView and FlatList don't expose scroll position directly\n            // This is a limitation - we'll need to track it via onScroll callback\n            // For now, we save the last known position\n\n            if (lastSavedPositionRef.current > 0) {\n              position = lastSavedPositionRef.current;\n            }\n\n            if (position !== null && position > 0) {\n              const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n              const positionString = position.toString();\n\n              debounce(() => {\n                if (Platform.OS === 'web') {\n                  // Web: synchronous localStorage\n                  if (typeof window !== 'undefined' && window.localStorage) {\n                    window.localStorage.setItem(storageKey, positionString);\n                  }\n                } else {\n                  // Native: asynchronous AsyncStorage\n                  AsyncStorage.setItem(storageKey, positionString).catch((error) => {\n                    logger.error(LOG_SOURCE, 'Failed to save scroll position', { error });\n                  });\n                }\n              }, debounceDelay);\n\n              logger.debug(LOG_SOURCE, 'Scroll position saved', {\n                screenKey,\n                position,\n              });\n            }\n          } catch (error) {\n            logger.error(LOG_SOURCE, 'Error saving scroll position', { error });\n          }\n        };\n\n        savePosition();\n      };\n    }, [screenKey, selectedUser?.id, enabled, debounceDelay])\n  );\n\n  return scrollRef;\n};\n\n/**\n * Hook that returns both ref and onScroll handler for ScrollView\n * Use this version when you need full control over scroll events\n * \n * @param screenKey - Unique identifier for the screen\n * @param options - Configuration options\n * @returns { ref, onScroll } - ref to attach and onScroll handler\n */\nexport const useScrollPositionWithHandler = (\n  screenKey: string,\n  options: UseScrollPositionOptions = {}\n): {\n  ref: React.RefObject<ScrollView | FlatList>;\n  onScroll: (event: any) => void;\n} => {\n  const { enabled = true, debounceDelay = 200 } = options;\n  const { selectedUser } = useUser();\n  const scrollRef = useRef<ScrollView | FlatList>(null);\n  const debounce = useRef(createDebouncer()).current;\n  const lastSavedPositionRef = useRef<number>(0);\n\n  const handleScroll = useCallback(\n    (event: any) => {\n      if (!enabled) {\n        return;\n      }\n\n      const {\n        nativeEvent: { contentOffset },\n      } = event;\n\n      const position = contentOffset?.y || 0;\n      lastSavedPositionRef.current = position;\n\n      // Debounce the save operation\n      debounce(() => {\n        const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n        const positionString = position.toString();\n\n        try {\n          if (Platform.OS === 'web') {\n            // Web: synchronous localStorage\n            if (typeof window !== 'undefined' && window.localStorage) {\n              window.localStorage.setItem(storageKey, positionString);\n            }\n          } else {\n            // Native: asynchronous AsyncStorage\n            AsyncStorage.setItem(storageKey, positionString).catch((error) => {\n              logger.error(LOG_SOURCE, 'Failed to save scroll position', { error });\n            });\n          }\n\n          logger.debug(LOG_SOURCE, 'Scroll position saved during scroll', {\n            screenKey,\n            position,\n          });\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error saving scroll position during scroll', { error });\n        }\n      }, debounceDelay);\n    },\n    [screenKey, selectedUser?.id, enabled, debounceDelay, debounce]\n  );\n\n  // Load saved position when screen gains focus\n  useFocusEffect(\n    useCallback(() => {\n      if (!enabled) {\n        return;\n      }\n\n      const restorePosition = async () => {\n        try {\n          const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n          let savedPosition: string | null = null;\n\n          if (Platform.OS === 'web') {\n            if (typeof window !== 'undefined' && window.localStorage) {\n              savedPosition = window.localStorage.getItem(storageKey);\n            }\n          } else {\n            savedPosition = await AsyncStorage.getItem(storageKey);\n          }\n\n          if (savedPosition) {\n            const position = parseFloat(savedPosition);\n            if (!isNaN(position) && position > 0 && scrollRef.current) {\n              setTimeout(() => {\n                try {\n                  if (scrollRef.current) {\n                    if ('scrollTo' in scrollRef.current) {\n                      scrollRef.current.scrollTo({ y: position, animated: false });\n                    } else if ('scrollToOffset' in scrollRef.current) {\n                      (scrollRef.current as FlatList<any>).scrollToOffset({\n                        offset: position,\n                        animated: false,\n                      });\n                    }\n                    logger.debug(LOG_SOURCE, 'Scroll position restored', {\n                      screenKey,\n                      position,\n                    });\n                  }\n                } catch (error) {\n                  logger.error(LOG_SOURCE, 'Error restoring scroll position', { error });\n                }\n              }, 100);\n            }\n          }\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error loading scroll position', { error });\n        }\n      };\n\n      restorePosition();\n    }, [screenKey, selectedUser?.id, enabled])\n  );\n\n  return {\n    ref: scrollRef,\n    onScroll: handleScroll,\n  };\n};\n\n\n\n\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useUnreadNotificationsCount.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/hooks/useUnreadNotificationsCount.ts:33:5\n  31 |   // Load initial count when user changes\n  32 |   useEffect(() => {\n> 33 |     loadUnreadCount();\n     |     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |   }, [loadUnreadCount]);\n  35 |\n  36 |   // Refresh count when screen comes into focus","line":33,"column":5,"nodeType":null,"endLine":33,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { getUnreadNotificationCount, subscribeToNotificationEvents } from '../utils/notificationService';\n\n/**\n * Hook to get and maintain the count of unread notifications for the current user.\n * Updates in real-time when new notifications arrive.\n * \n * @returns {number} The count of unread notifications\n */\nexport const useUnreadNotificationsCount = (): number => {\n  const { selectedUser } = useUser();\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  const loadUnreadCount = useCallback(async () => {\n    if (!selectedUser) {\n      setUnreadCount(0);\n      return;\n    }\n\n    try {\n      const count = await getUnreadNotificationCount(selectedUser.id);\n      setUnreadCount(count);\n    } catch (error) {\n      console.error('âŒ Failed to load unread notification count:', error);\n      setUnreadCount(0);\n    }\n  }, [selectedUser]);\n\n  // Load initial count when user changes\n  useEffect(() => {\n    loadUnreadCount();\n  }, [loadUnreadCount]);\n\n  // Refresh count when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      loadUnreadCount();\n    }, [loadUnreadCount])\n  );\n\n  // Subscribe to real-time notification events\n  useEffect(() => {\n    if (!selectedUser) {\n      return;\n    }\n\n    const unsubscribe = subscribeToNotificationEvents((notification) => {\n      // Only process notifications for the current user\n      if (notification.userId !== selectedUser.id) {\n        return;\n      }\n\n      // Reload count to ensure accuracy when notifications change\n      // This is more reliable than trying to track individual notification states\n      loadUnreadCount();\n    });\n\n    return () => {\n      unsubscribe?.();\n    };\n  }, [selectedUser, loadUnreadCount]);\n\n  return unreadCount;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/AdminStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:66:17\n  64 | // TODO: Add proper accessibility for animated elements\n  65 | const DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n> 66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n  68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n  69 |","line":66,"column":17,"nodeType":null,"endLine":66,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:66:17\n  64 | // TODO: Add proper accessibility for animated elements\n  65 | const DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n> 66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n  68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n  69 |","line":66,"column":17,"nodeType":null,"endLine":66,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:67:17\n  65 | const DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n  66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n> 67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n  69 |\n  70 |   const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {","line":67,"column":17,"nodeType":null,"endLine":67,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:67:17\n  65 | const DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n  66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n> 67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n  69 |\n  70 |   const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {","line":67,"column":17,"nodeType":null,"endLine":67,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:68:17\n  66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n  67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n> 68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  69 |\n  70 |   const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {\n  71 |     return Animated.loop(","line":68,"column":17,"nodeType":null,"endLine":68,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:68:17\n  66 |   const ring1 = React.useRef(new Animated.Value(0)).current;\n  67 |   const ring2 = React.useRef(new Animated.Value(0)).current;\n> 68 |   const ring3 = React.useRef(new Animated.Value(0)).current;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  69 |\n  70 |   const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {\n  71 |     return Animated.loop(","line":68,"column":17,"nodeType":null,"endLine":68,"endColumn":60},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx:101:6\n   99 |       a3.stop();\n  100 |     };\n> 101 |   }, [ring1, ring2, ring3, runPulse]);\n      |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  102 |\n  103 |   const containerSize = size * 1.6;\n  104 |   const ringBaseStyle = {","line":101,"column":6,"nodeType":null,"endLine":101,"endColumn":37}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Bottom tab navigator hosting main tabs: Home, Search, Donations, Profile (hidden in guest mode).\n// - Reached from: `MainNavigator` route 'HomeStack'.\n// - Provides: Tab bar with custom styling, responsive insets, icons per route; hides tab bar when nested route sets `hideBottomBar` param.\n// - Reads from context: `useUser()` -> `isGuestMode`, `resetHomeScreen()` used on Home tab press.\n// - Child stacks: `HomeTabStack`, `SearchTabStack`, `DonationsStack`, `ProfileTabStack`.\n// - Navigation params pattern: nested screens can pass `{ hideBottomBar: true }` to hide tab bar; Home tab press triggers reset via context.\n// - External deps: react-navigation/bottom-tabs, Ionicons, responsive helpers, colors/constants.\n// BottomNavigator.tsx\n\n// TODO: Extract complex animation logic to custom hooks (usePulseAnimation, useTabBarAnimation)\n// TODO: Add comprehensive TypeScript interfaces for all navigation types\n// TODO: Implement proper accessibility for tab navigation\n// TODO: Add comprehensive error handling for navigation failures  \n// TODO: Remove hardcoded animation values and use constants\n// TODO: Implement proper tab badge system for notifications/updates\n// TODO: Add comprehensive performance optimization with React.memo\n// TODO: Remove 'use strict' directive - not needed in modern JavaScript\n// TODO: Add comprehensive unit tests for all navigation logic\n// TODO: Implement proper deep linking support for tab navigation\n'use strict';\nimport React from \"react\";\nimport { Platform, Animated, Easing, View, StyleSheet } from \"react-native\";\nimport { createBottomTabNavigator, BottomTabNavigationOptions } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useFocusEffect, useNavigation, CommonActions } from \"@react-navigation/native\";\nimport HomeTabStack from \"./HomeTabStack\";\nimport SearchTabStack from \"./SearchTabStack\";\nimport ProfileTabStack from \"./ProfileTabStack\";\nimport DonationsStack from \"./DonationsStack\";\nimport AdminStack from \"./AdminStack\";\nimport BookmarksScreen from \"../screens/BookmarksScreen\";\nimport SettingsScreen from \"../topBarScreens/SettingsScreen\";\nimport ChatListScreen from \"../topBarScreens/ChatListScreen\";\nimport AboutKarmaCommunityScreen from \"../topBarScreens/AboutKarmaCommunityScreen\";\nimport NotificationsScreen from \"../screens/NotificationsScreen\";\nimport colors from \"../globals/colors\"; // Adjust path if needed\nimport { vw, getScreenInfo, isLandscape } from \"../globals/responsive\";\nimport { LAYOUT_CONSTANTS } from \"../globals/constants\";\nimport { useUser } from \"../stores/userStore\";\nimport { useWebMode } from \"../stores/webModeStore\";\nimport { logger } from \"../utils/loggerService\";\n\n// Define the type for your bottom tab navigator's route names and their parameters.\nexport type BottomTabNavigatorParamList = {\n  DonationsTab: undefined;\n  HomeScreen: undefined;\n  SearchTab: undefined;\n  ProfileScreen: undefined;\n  AdminTab: undefined;\n  SettingsScreen: undefined;\n  ChatListScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  NotificationsScreen: undefined;\n};\n\n// Create an instance of the Bottom Tab Navigator with its parameter list type\nconst Tab = createBottomTabNavigator<BottomTabNavigatorParamList>();\n\n// Animated icon for Donations tab when not focused\n// TODO: Extract this component to separate file (components/AnimatedTabIcon.tsx)\n// TODO: Add proper cleanup for animations on unmount\n// TODO: Implement proper animation performance optimization\n// TODO: Add proper accessibility for animated elements\nconst DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n  const ring1 = React.useRef(new Animated.Value(0)).current;\n  const ring2 = React.useRef(new Animated.Value(0)).current;\n  const ring3 = React.useRef(new Animated.Value(0)).current;\n\n  const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {\n    return Animated.loop(\n      Animated.sequence([\n        Animated.delay(delayMs),\n        Animated.timing(anim, {\n          toValue: 1,\n          duration: 2000,\n          easing: Easing.out(Easing.quad),\n          useNativeDriver: false,\n        }),\n        Animated.timing(anim, {\n          toValue: 0,\n          duration: 0,\n          useNativeDriver: false,\n        }),\n      ])\n    );\n  }, []);\n\n  React.useEffect(() => {\n    const a1 = runPulse(ring1, 0);\n    const a2 = runPulse(ring2, 500);\n    const a3 = runPulse(ring3, 1000);\n    a1.start();\n    a2.start();\n    a3.start();\n    return () => {\n      a1.stop();\n      a2.stop();\n      a3.stop();\n    };\n  }, [ring1, ring2, ring3, runPulse]);\n\n  const containerSize = size * 1.6;\n  const ringBaseStyle = {\n    width: containerSize,\n    height: containerSize,\n    borderRadius: containerSize / 2,\n    borderColor: color,\n  } as const;\n\n  const ringStyleFrom = (anim: Animated.Value) => ({\n    opacity: anim.interpolate({ inputRange: [0, 1], outputRange: [0.22, 0] }),\n    transform: [\n      {\n        scale: anim.interpolate({ inputRange: [0, 1], outputRange: [0.8, 1.35] }),\n      },\n    ],\n  });\n\n  return (\n    <View style={[styles.pulseContainer, { width: containerSize, height: containerSize }]}\n      pointerEvents=\"none\"\n      accessibilityElementsHidden>\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring1)]} />\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring2)]} />\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring3)]} />\n      <Ionicons name=\"heart-outline\" size={size} color={color} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  pulseContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  ring: {\n    position: \"absolute\",\n    borderWidth: 1,\n  },\n});\n\n/**\n * BottomNavigator Component.\n *\n * This component sets up the main bottom tab navigation for the application.\n * It defines the screens accessible via the tab bar, their icons, and the\n * overall styling and behavior of the tab bar itself, including responsive\n * positioning and shadow effects.\n *\n * @returns {React.FC} A React component rendering the Bottom Tab Navigator.\n */\nexport default function BottomNavigator(): React.ReactElement {\n  const { isGuestMode, resetHomeScreen, isAdmin, refreshUserRoles, isAuthenticated } = useUser();\n  const { mode } = useWebMode();\n  const navigation = useNavigation();\n\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('BottomNavigator', 'Navigator focused');\n      // Refresh user roles when navigator comes into focus to detect admin changes\n      if (isAuthenticated && !isGuestMode) {\n        refreshUserRoles();\n      }\n    }, [isAuthenticated, isGuestMode, refreshUserRoles])\n  );\n\n\n\n  /**\n   * Helper function to determine the Ionicons name based on the route and focus state.\n   * @param {string} routeName - The name of the current route.\n   * @param {boolean} focused - True if the tab is currently focused.\n   * @returns {string} The Ionicons icon name (e.g., \"home\" or \"home-outline\").\n   */\n  const getTabBarIconName = (routeName: keyof BottomTabNavigatorParamList, focused: boolean): keyof typeof Ionicons.glyphMap => {\n    switch (routeName) {\n      case \"HomeScreen\":\n        return focused ? \"home\" : \"home-outline\";\n      case \"SearchTab\":\n        return focused ? \"search\" : \"search-outline\";\n      case \"DonationsTab\":\n        return focused ? \"heart\" : \"heart-outline\";\n      case \"ProfileScreen\":\n        return focused ? \"person\" : \"person-outline\";\n      case \"AdminTab\":\n        return focused ? \"shield\" : \"shield-outline\";\n      default:\n        return \"help-circle-outline\";\n    }\n  };\n\n  const getActiveNestedParams = (route: any): Record<string, any> | undefined => {\n    const state = route.state ?? route.params?.state;\n    if (!state) return route.params;\n    const nestedRoute = state.routes?.[state.index ?? 0];\n    if (nestedRoute) return getActiveNestedParams(nestedRoute);\n    return route.params;\n  };\n\n  // Map tab route names to their initial stack route names\n  const TAB_INITIAL_ROUTES: Record<string, string> = {\n    HomeScreen: 'HomeMain',\n    SearchTab: 'SearchScreen',\n    DonationsTab: 'DonationsScreen',\n    ProfileScreen: 'ProfileMain',\n    AdminTab: 'AdminDashboard',\n  };\n\n  const handleTabPress = (e: any, navigation: any, routeName: string) => {\n    // Only act if the tab is already focused\n    if (navigation.isFocused()) {\n      const initialRoute = TAB_INITIAL_ROUTES[routeName];\n      if (initialRoute) {\n        logger.debug('BottomNavigator', `Tab ${routeName} pressed while focused - resetting stack to ${initialRoute}`);\n\n        e.preventDefault();\n\n        // Special handling for Home logic (refresh/reset via store)\n        if (routeName === 'HomeScreen') {\n          resetHomeScreen();\n        }\n\n        // Perform a deep reset of the tab's stack\n        // This resets the Tab Navigator history to just this tab, with the stack reset to initial route\n        navigation.dispatch(CommonActions.reset({\n          index: 0,\n          routes: [{\n            name: routeName,\n            state: {\n              routes: [{ name: initialRoute }]\n            }\n          }]\n        }));\n      }\n    }\n  };\n\n  return (\n    <Tab.Navigator\n      id={undefined}\n      initialRouteName=\"HomeScreen\"\n      screenOptions={({ route }): BottomTabNavigationOptions => {\n        const activeParams = getActiveNestedParams(route as any) || {};\n        const hideBottomBar = activeParams.hideBottomBar === true;\n        const hideDueToSiteMode = (typeof window !== 'undefined' && mode === 'site');\n        const shouldHideTabBar = hideBottomBar || hideDueToSiteMode;\n        const { isTablet, isDesktop } = getScreenInfo();\n        const landscape = isLandscape();\n        const horizontalInset = isDesktop ? vw(20) : isTablet ? vw(10) : LAYOUT_CONSTANTS.SPACING.MD;\n        const barHeight = landscape ? 40 : (isDesktop ? 56 : isTablet ? 54 : 46);\n        return ({\n          headerShown: false,\n          tabBarIcon: ({ focused, color, size }: { focused: boolean; color: string; size: number; }) => {\n            if (route.name === \"DonationsTab\") {\n              return focused ? (\n                <Ionicons name=\"heart\" size={size} color={color} />\n              ) : (\n                <DonationsPulseIcon size={size} color={color} />\n              );\n            }\n            const iconName = getTabBarIconName(route.name, focused);\n            return <Ionicons name={iconName} size={size} color={color} />;\n          },\n          tabBarActiveTintColor: colors.bottomNavActive,\n          tabBarInactiveTintColor: colors.bottomNavInactive,\n          tabBarShowLabel: false,\n          tabBarStyle: {\n            position: \"absolute\",\n            left: horizontalInset,\n            right: horizontalInset,\n            borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.XLARGE,\n            elevation: LAYOUT_CONSTANTS.SHADOW.MEDIUM.elevation,\n            height: barHeight,\n            backgroundColor: colors.cardBackground,\n            display: shouldHideTabBar ? 'none' as const : 'flex' as const,\n          },\n        });\n      }}\n    >\n      {!isGuestMode && (\n        <Tab.Screen\n          name=\"ProfileScreen\"\n          component={ProfileTabStack}\n          listeners={({ navigation, route }) => ({\n            tabPress: (e) => handleTabPress(e, navigation, route.name),\n          })}\n        />\n      )}\n      <Tab.Screen\n        name=\"DonationsTab\"\n        component={DonationsStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n      <Tab.Screen\n        name=\"SearchTab\"\n        component={SearchTabStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n      {isAdmin && (\n        <Tab.Screen\n          name=\"AdminTab\"\n          component={AdminStack}\n          listeners={({ navigation, route }) => ({\n            tabPress: (e) => handleTabPress(e, navigation, route.name),\n          })}\n        />\n      )}\n      <Tab.Screen\n        name=\"HomeScreen\"\n        component={HomeTabStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n\n    </Tab.Navigator>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/DonationsStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/HomeStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/HomeTabStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/MainNavigator.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":144,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":144,"endColumn":68,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/ProfileTabStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/SearchTabStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/TopBarNavigator.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'translateY'. Either include it or remove the dependency array.","line":109,"column":6,"nodeType":"ArrayExpression","endLine":109,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [shouldHideTopBar, measuredHeight, translateY]","fix":{"range":[4594,4628],"text":"[shouldHideTopBar, measuredHeight, translateY]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Shared top navigation bar component for stacks; shows title and quick actions (Settings, Notifications, Chat/About).\n// - Reached from: `HomeTabStack`, `SearchTabStack`, `ProfileTabStack`, `DonationsStack` as a custom header.\n// - Inputs: Props `hideTopBar` and `showPosts`; also reads `route.params.hideTopBar`. Title resolves by current route with i18n.\n// - Reads from context: `useUser()` for guest mode to toggle Chat/About icon.\n// - Side effects: Logs focus and state changes via `logger`; animates show/hide with Reanimated.\nimport React from 'react';\nimport styles from '../globals/styles'; // your styles file\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { View, Text, TouchableOpacity, StyleProp, ViewStyle, TextStyle } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { NavigationProp, ParamListBase, StackActions } from '@react-navigation/native';\nimport { useRoute, useFocusEffect, useNavigationState } from '@react-navigation/native';\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport colors from '../globals/colors';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { rowDirection } from '../globals/responsive';\nimport { useTranslation } from 'react-i18next';\nimport AboutButton from '../components/AboutButton';\nimport { useUnreadNotificationsCount } from '../hooks/useUnreadNotificationsCount';\n\n\ninterface TopBarNavigatorProps {\n  navigation: NavigationProp<ParamListBase>;\n  hideTopBar?: boolean;\n  showPosts?: boolean;\n}\n\nfunction TopBarNavigator({ navigation, hideTopBar = false, showPosts = false }: TopBarNavigatorProps) {\n  const { t } = useTranslation(['home', 'common', 'settings', 'donations', 'notifications', 'profile']);\n\n  const route = useRoute();\n  const { isGuestMode } = useUser();\n  const unreadCount = useUnreadNotificationsCount();\n  const translateY = useSharedValue(0);\n  const [measuredHeight, setMeasuredHeight] = React.useState(56);\n\n  // Get the current active route name from navigation state\n  const activeRouteName = useNavigationState(state => {\n    if (!state) return 'HomeMain';\n\n    const findActiveRoute = (routes: any[], index: number): string => {\n      const currentRoute = routes[index];\n      if (currentRoute?.state?.routes) {\n        // This route has nested navigation, go deeper\n        return findActiveRoute(currentRoute.state.routes, currentRoute.state.index || 0);\n      }\n      return currentRoute?.name || 'HomeMain';\n    };\n\n    return findActiveRoute(state.routes, state.index || 0);\n  });\n\n  // List of top bar screens that should be mutually exclusive\n  const topBarScreens = ['SettingsScreen', 'NotificationsScreen', 'ChatListScreen', 'LandingSiteScreen'];\n\n  // Handler for toggling screens (open if closed, close if open)\n  // Only one top bar screen can be open at a time\n  const handleScreenToggle = (screenName: string) => {\n    // Get current route name for comparison\n    const currentRoute = activeRouteName || route.name;\n\n    if (currentRoute === screenName) {\n      // Screen is open, close it by going back\n      if (navigation.canGoBack()) {\n        navigation.goBack();\n      }\n    } else {\n      // Check if any other top bar screen is currently open\n      const otherTopBarScreenOpen = topBarScreens.find(\n        screen => screen !== screenName && currentRoute === screen\n      );\n\n      if (otherTopBarScreenOpen) {\n        // Another top bar screen is open, replace it with the new screen\n        // This ensures only one top bar screen is open at a time\n        navigation.dispatch(\n          StackActions.replace(screenName, {})\n        );\n      } else {\n        // No other top bar screen is open, navigate to the new screen\n        navigation.navigate(screenName as never);\n      }\n    }\n  };\n\n  // Log render for debugging\n  React.useEffect(() => {\n    logger.debug('TopBarNavigator', 'Component rendered', {\n      routeName: route.name,\n      isGuestMode,\n    });\n  }, [route.name, isGuestMode]);\n\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('TopBarNavigator', 'Navigator focused', { routeName: route.name });\n    }, [route.name])\n  );\n\n  ////console.log('ğŸ” TopBarNavigator - hideTopBar prop:', hideTopBar);\n\n  const shouldHideTopBar = hideTopBar || (route?.params as any)?.hideTopBar === true;\n\n  React.useEffect(() => {\n    translateY.value = withTiming(shouldHideTopBar ? -measuredHeight : 0, { duration: 200 });\n  }, [shouldHideTopBar, measuredHeight]);\n\n\n\n  const animatedStyle = useAnimatedStyle(() => {\n    //console.log('ğŸ” TopBarNavigator - translateY value:', translateY.value);\n    return {\n      transform: [{ translateY: translateY.value }],\n    };\n  });\n\n  // Debug logs\n  //console.log('ğŸ” TopBarNavigator - Current route name:', route.name);\n  //console.log('ğŸ” TopBarNavigator - Route params:', route.params);\n  //console.log('ğŸ” TopBarNavigator - Route key:', route.key);\n  //console.log('ğŸ” TopBarNavigator - Full route object:', JSON.stringify(route, null, 2));\n\n  // Map route names to titles using translations\n  const routeTitles: Record<string, string> = {\n    SearchTab: t('common:search'),\n    SearchScreen: t('common:search'),\n    DonationsTab: t('donations:title'),\n    DonationsScreen: t('donations:title'),\n    ProfileScreen: t('profile:title'),\n    LandingSiteScreen: '××•×“×•×ª ×”×§×”×™×œ×”',\n\n    MoneyScreen: t('donations:categories.money.title'),\n    TrumpScreen: t('donations:categories.trump.title'),\n    KnowledgeScreen: t('donations:categories.knowledge.title'),\n    TimeScreen: t('donations:categories.time.title'),\n    CategoryScreen: t('donations:categoriesTitle'),\n    ItemsScreen: t('donations:categories.items.title'),\n    FoodScreen: t('donations:categories.food.title'),\n    ClothesScreen: t('donations:categories.clothes.title'),\n    BooksScreen: t('donations:categories.books.title'),\n    FurnitureScreen: t('donations:categories.furniture.title'),\n    MedicalScreen: t('donations:categories.medical.title'),\n    AnimalsScreen: t('donations:categories.animals.title'),\n    HousingScreen: t('donations:categories.housing.title'),\n    SupportScreen: t('donations:categories.support.title'),\n    EducationScreen: t('donations:categories.education.title'),\n    EnvironmentScreen: t('donations:categories.environment.title'),\n    TechnologyScreen: t('donations:categories.technology.title'),\n    MusicScreen: t('donations:categories.music.title'),\n    GamesScreen: t('donations:categories.games.title'),\n    RiddlesScreen: t('donations:categories.riddles.title'),\n    RecipesScreen: t('donations:categories.recipes.title'),\n    PlantsScreen: t('donations:categories.plants.title'),\n    WasteScreen: t('donations:categories.waste.title'),\n    ArtScreen: t('donations:categories.art.title'),\n    SportsScreen: t('donations:categories.sports.title'),\n    DreamsScreen: t('donations:categories.dreams.title'),\n    FertilityScreen: t('donations:categories.fertility.title'),\n    JobsScreen: t('donations:categories.jobs.title'),\n    DiscoverPeopleScreen: t('profile:discover'),\n    NewChatScreen: t('common:newChat'),\n    SettingsScreen: t('settings:title'),\n    ChatListScreen: t('chat:title'),\n    NotificationsScreen: t('notifications:title'),\n    AboutKarmaCommunityScreen: t('settings:about'),\n\n    UserProfileScreen: t('profile:title'),\n    FollowersScreen: t('profile:followers'),\n    ChatDetailScreen: t('common:chat'),\n    BookmarksScreen: t('common:favorites'),\n    PostsReelsScreen: t('common:posts'),\n    InactiveScreen: t('common:inactive'),\n    WebViewScreen: t('common:web'),\n    LoginScreen: t('auth:login'),\n  };\n\n  // Get current route name\n  const currentRouteName = activeRouteName || route.name;\n\n  // Determine title based on current route\n  let title = 'KC';\n\n  if (currentRouteName === 'HomeScreen' || currentRouteName === 'HomeMain') {\n    title = showPosts ? t('home:newsTitle') : t('home:numbersTitle');\n  } else {\n    // Use the routeTitles mapping for all other screens\n    title = routeTitles[currentRouteName] ?? 'KC';\n  }\n\n  // Log important state changes\n  React.useEffect(() => {\n    logger.logUserAction('state-change', 'TopBarNavigator', {\n      currentRouteName,\n      activeRouteName,\n      title,\n      isGuestMode,\n      hideTopBar,\n      showPosts\n    });\n  }, [title, currentRouteName, activeRouteName, showPosts, hideTopBar, isGuestMode]);\n\n\n  return (\n    <SafeAreaView edges={['top']} style={{ backgroundColor: 'transparent' }}>\n      <Animated.View\n        style={[styles.container_top_bar as StyleProp<ViewStyle>, animatedStyle]}\n        onLayout={(e) => setMeasuredHeight(e.nativeEvent.layout.height)}\n      >\n\n        <View style={styles.topBarIconsRow as StyleProp<ViewStyle>}>\n          <TouchableOpacity onPress={() => handleScreenToggle('SettingsScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n            <Icon name=\"settings-outline\" size={24} color={colors.black} />\n          </TouchableOpacity>\n          <TouchableOpacity onPress={() => handleScreenToggle('NotificationsScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n            <View style={{ position: 'relative' }}>\n              <Icon name=\"notifications-circle-outline\" size={24} color={colors.black} />\n              {unreadCount > 0 && (\n                <View style={(styles as any).notificationBadge as StyleProp<ViewStyle>}>\n                  <Text style={(styles as any).notificationBadgeText as StyleProp<TextStyle>}>\n                    {unreadCount > 99 ? '99+' : unreadCount}\n                  </Text>\n                </View>\n              )}\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Title */}\n        <View style={styles.topBarTitleContainer as StyleProp<ViewStyle>}>\n          <Text style={styles.topBarTitle as StyleProp<TextStyle>}>{title}</Text>\n        </View>\n        {/* Left Icons Group: Notifications + Settings */}\n\n        {/* Right Icons Group: Chat + About (for authenticated users) OR About only (for guests) */}\n        {/* \n        About button is now available in both guest and authenticated modes:\n        - Guest mode: Shows only About button (replaces Chat button)\n        - Authenticated mode: Shows both Chat and About buttons\n        This provides consistent access to About information across all user states.\n      */}\n        <View style={styles.topBarIconsRow as StyleProp<ViewStyle>}>\n          {isGuestMode ? (\n            // Guest mode: Show only About button\n            <AboutButton\n              style={styles.topBarIconButton as StyleProp<ViewStyle>}\n              onPress={() => handleScreenToggle('LandingSiteScreen')}\n              iconColor={colors.black}\n            />\n          ) : (\n            // Authenticated mode: Show both Chat and About buttons\n            <>\n              <TouchableOpacity onPress={() => handleScreenToggle('ChatListScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n                <Icon name=\"chatbubbles-outline\" size={24} color={colors.black} />\n              </TouchableOpacity>\n              <AboutButton\n                style={styles.topBarIconButton as StyleProp<ViewStyle>}\n                onPress={() => handleScreenToggle('LandingSiteScreen')}\n                iconColor={colors.black}\n              />\n            </>\n          )}\n        </View>\n      </Animated.View>\n    </SafeAreaView>\n  );\n}\n\nexport default TopBarNavigator;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/polyfills/tslib-default.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminAdminsScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUsers'. Either include it or remove the dependency array.","line":57,"column":8,"nodeType":"ArrayExpression","endLine":57,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [loadUsers, searchQuery, selectedUser.id]","fix":{"range":[2028,2059],"text":"[loadUsers, searchQuery, selectedUser.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    TouchableOpacity,\n    Alert,\n    RefreshControl,\n    ActivityIndicator,\n    TextInput,\n    Platform,\n    FlatList,\n    Modal,\n    SafeAreaView,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminAdminsScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\nconst LOG_SOURCE = 'AdminAdminsScreen';\n\nexport default function AdminAdminsScreen({ navigation }: AdminAdminsScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const [usersList, setUsersList] = useState<any[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [activeTab, setActiveTab] = useState<'admins' | 'volunteers' | 'users'>('admins');\n\n    // Manager Assignment State\n    const [showManagerModal, setShowManagerModal] = useState(false);\n    const [selectedForManager, setSelectedForManager] = useState<any>(null);\n    const [newManager, setNewManager] = useState<any>(null);\n    const [isRemovingManager, setIsRemovingManager] = useState(false);\n\n    // Store eligible users separately\n    const [eligibleUsers, setEligibleUsers] = useState<any[]>([]);\n\n    // Store all managers for manager assignment\n    const [allManagers, setAllManagers] = useState<any[]>([]);\n\n    useEffect(() => {\n        loadUsers();\n    }, [searchQuery, selectedUser?.id]);\n\n    const loadUsers = async (forceRefresh: boolean = false) => {\n        if (!selectedUser?.id) {\n            console.log('[AdminAdminsScreen] No selectedUser.id, skipping load');\n            return;\n        }\n\n        try {\n            setIsLoading(true);\n            const filters: any = { limit: 100 };\n            if (searchQuery.trim()) {\n                filters.search = searchQuery.trim();\n            }\n\n            // Force refresh after admin operations to ensure fresh data\n            if (forceRefresh) {\n                filters.forceRefresh = true;\n                console.log('[AdminAdminsScreen] ğŸ”„ FORCE REFRESH - Loading users with filters:', filters);\n            } else {\n                console.log('[AdminAdminsScreen] ğŸ”„ Loading users with filters:', filters);\n            }\n\n            // Load all users for display\n            const response = await apiService.getUsers(filters);\n\n            console.log('[AdminAdminsScreen] ğŸ“¡ Response from getUsers:', {\n                success: response.success,\n                dataLength: response.data?.length,\n                error: response.error\n            });\n\n            if (response.success && Array.isArray(response.data)) {\n                // Keep only other users (not current user)\n                const otherUsers = response.data.filter((u: any) => u.email !== selectedUser?.email);\n                setUsersList(otherUsers);\n\n                // Extract managers from the list (admins + super admin)\n                const managers = response.data.filter((u: any) => {\n                    const roles = u.roles || [];\n                    return roles.includes('admin') || roles.includes('super_admin') || u.email === 'navesarussi@gmail.com';\n                });\n                setAllManagers(managers);\n\n                console.log(`[AdminAdminsScreen] âœ… Loaded ${otherUsers.length} users, ${managers.length} managers`);\n                console.log(`[AdminAdminsScreen] ğŸ“Š Sample user data:`, otherUsers.slice(0, 2).map(u => ({\n                    id: u.id,\n                    name: u.name,\n                    email: u.email,\n                    roles: u.roles,\n                    parent_manager_id: u.parent_manager_id,\n                    manager_details: u.manager_details\n                })));\n            } else {\n                setUsersList([]);\n                setAllManagers([]);\n                console.log('[AdminAdminsScreen] âŒ Failed to load users:', response.error);\n            }\n\n            // Load eligible users for promotion (to know who can be promoted)\n            const eligibleResponse = await apiService.getEligibleForPromotion(selectedUser.id);\n            if (eligibleResponse.success && Array.isArray(eligibleResponse.data)) {\n                setEligibleUsers(eligibleResponse.data);\n                console.log(`[AdminAdminsScreen] Loaded ${eligibleResponse.data.length} eligible users for promotion`);\n            } else {\n                setEligibleUsers([]);\n                console.log('[AdminAdminsScreen] Failed to load eligible users:', eligibleResponse.error);\n            }\n        } catch (error) {\n            console.error('[AdminAdminsScreen] Error loading users:', error);\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×”××©×ª××©×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Check if current user is super admin - based on roles, not email\n    const currentUserRoles = selectedUser?.roles || [];\n    const isCurrentUserSuperAdmin = currentUserRoles.includes('super_admin') ||\n        currentUserRoles.includes('admin');\n\n    console.log('[AdminAdminsScreen] ğŸ” Current user check:', {\n        userId: selectedUser?.id,\n        email: selectedUser?.email,\n        roles: selectedUser?.roles,\n        isAdmin: isCurrentUserSuperAdmin\n    });\n\n    // Check if a user can be promoted by current admin\n    const canPromote = (user: any): boolean => {\n        // Admin/super_admin can promote users who are not already admins\n        if (isCurrentUserSuperAdmin) {\n            const targetRoles = user.roles || [];\n            const targetIsAlreadyAdmin = targetRoles.includes('admin') || targetRoles.includes('super_admin');\n            const canPromoteUser = !targetIsAlreadyAdmin;\n\n            console.log('[AdminAdminsScreen] ğŸ” canPromote check:', {\n                targetId: user.id,\n                targetEmail: user.email,\n                targetRoles: user.roles,\n                targetIsAlreadyAdmin,\n                canPromoteUser\n            });\n\n            return canPromoteUser;\n        }\n        // Regular admins - check eligible list from server\n        const isEligible = eligibleUsers.some(e => e.id === user.id);\n        console.log('[AdminAdminsScreen] ğŸ” canPromote (regular admin):', {\n            targetId: user.id,\n            targetEmail: user.email,\n            isEligible,\n            eligibleCount: eligibleUsers.length\n        });\n        return isEligible;\n    };\n\n    // Check if current admin can demote a user\n    // We simplify this - let the server do the full validation\n    // Just check basic conditions on client side\n    const canDemote = (user: any): boolean => {\n        const isSameUser = user.id === selectedUser?.id;\n\n        // Cannot demote yourself\n        if (isSameUser) {\n            console.log('[AdminAdminsScreen] ğŸ” canDemote: false (cannot demote yourself)');\n            return false;\n        }\n\n        // Admin/super_admin can demote admins\n        if (isCurrentUserSuperAdmin) {\n            console.log('[AdminAdminsScreen] ğŸ” canDemote (admin):', {\n                targetId: user.id,\n                targetEmail: user.email,\n                canDemote: true\n            });\n            return true;\n        }\n\n        // For regular admins - check if user is in their subordinate tree\n        // Let the server do the full tree validation\n        const isDirectSubordinate = user.parent_manager_id === selectedUser?.id;\n\n        console.log('[AdminAdminsScreen] ğŸ” canDemote (checking hierarchy):', {\n            targetId: user.id,\n            isDirectSubordinate,\n            allowForServerValidation: true\n        });\n\n        // Let server validate hierarchy - show button as enabled\n        return true;\n    };\n\n    const handleToggleAdmin = async (user: any) => {\n        console.log('[AdminAdminsScreen] ğŸ¯ handleToggleAdmin called with:', {\n            userId: user?.id,\n            userName: user?.name,\n            userEmail: user?.email,\n            userRoles: user?.roles,\n            selectedUserId: selectedUser?.id,\n            selectedUserEmail: selectedUser?.email\n        });\n\n        const currentRoles = Array.isArray(user.roles) ? user.roles : [];\n        const isAdmin = currentRoles.includes('admin') || currentRoles.includes('super_admin');\n        const superAdminEmails = ['navesarussi@gmail.com', 'karmacommunity2.0@gmail.com'];\n        const isSuperAdmin = superAdminEmails.includes(user.email?.toLowerCase() || '');\n\n        console.log('[AdminAdminsScreen] ğŸ” User check:', {\n            isAdmin,\n            isSuperAdmin,\n            currentRoles\n        });\n\n        if (isSuperAdmin) {\n            console.log('[AdminAdminsScreen] âŒ Blocked: Super admin');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×©× ×•×ª ×”×¨×©××•×ª ×œ×× ×”×œ ×”×¨××©×™');\n            return;\n        }\n\n        if (!selectedUser?.id) {\n            console.log('[AdminAdminsScreen] âŒ No selectedUser.id');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n\n        const title = isAdmin ? '×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ' : '×”×¤×™×›×” ×œ×× ×”×œ';\n        const message = isAdmin\n            ? `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ×”×¨×©××•×ª ×× ×”×œ ×-${user.name || user.email}?`\n            : `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××ª ${user.name || user.email} ×œ×× ×”×œ ×ª×—×ª×™×š?`;\n\n        console.log('[AdminAdminsScreen] ğŸ“¢ Showing Alert.alert:', { title, message });\n\n        Alert.alert(title, message, [\n            { \n                text: '×‘×™×˜×•×œ', \n                style: 'cancel',\n                onPress: () => {\n                    console.log('[AdminAdminsScreen] âŒ User cancelled');\n                }\n            },\n            {\n                text: '××™×©×•×¨',\n                style: isAdmin ? 'destructive' : 'default',\n                onPress: async () => {\n                    console.log('[AdminAdminsScreen] âœ… User confirmed');\n                    console.log(`[AdminAdminsScreen] ${isAdmin ? 'Demoting' : 'Promoting'} user:`, {\n                        userId: user.id,\n                        userName: user.name,\n                        currentRoles: user.roles,\n                        requestingAdminId: selectedUser.id\n                    });\n\n                    let res;\n                    if (isAdmin) {\n                        // Demote admin\n                        console.log('[AdminAdminsScreen] ğŸ“¡ Calling demoteAdmin');\n                        res = await apiService.demoteAdmin(user.id, selectedUser.id);\n                    } else {\n                        // Promote to admin (will also set as subordinate)\n                        console.log('[AdminAdminsScreen] ğŸ“¡ Calling promoteToAdmin');\n                        res = await apiService.promoteToAdmin(user.id, selectedUser.id);\n                    }\n\n                    console.log(`[AdminAdminsScreen] ğŸ“¡ ${isAdmin ? 'Demote' : 'Promote'} response:`, res);\n\n                    if (res.success) {\n                        Alert.alert('×”×¦×œ×—×”', res.message || '×”×¢×“×›×•×Ÿ ×‘×•×¦×¢ ×‘×”×¦×œ×—×”');\n                        console.log('[AdminAdminsScreen] âœ… Operation successful, reloading users with force refresh...');\n                        await loadUsers(true); // Force refresh to bypass cache\n                    } else {\n                        Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×¢×“×›×•×Ÿ');\n                        console.log('[AdminAdminsScreen] âŒ Operation failed:', res.error);\n                    }\n                }\n            }\n        ]);\n    };\n\n    const openManagerModal = (user: any) => {\n        setSelectedForManager(user);\n        // Pre-select current manager if exists\n        if (user.manager_details) {\n            setNewManager({\n                id: user.manager_details.id,\n                name: user.manager_details.name,\n                email: user.manager_details.email,\n                avatar_url: user.manager_details.avatar_url\n            });\n        } else {\n            setNewManager(null);\n        }\n        setShowManagerModal(true);\n    };\n\n    const saveManager = async () => {\n        if (!selectedForManager) return;\n\n        try {\n            const managerId = newManager ? newManager.id : null;\n            console.log(`[AdminAdminsScreen] ğŸ“ Setting manager:`, {\n                userId: selectedForManager.id,\n                userName: selectedForManager.name,\n                currentManagerId: selectedForManager.parent_manager_id,\n                newManagerId: managerId,\n                newManagerName: newManager?.name,\n                requestedBy: selectedUser?.id\n            });\n\n            const res = await apiService.setManager(selectedForManager.id, managerId, selectedUser?.id);\n\n            console.log('[AdminAdminsScreen] ğŸ“¡ setManager response:', res);\n\n            if (res.success) {\n                Alert.alert('×”×¦×œ×—×”', managerId ? '×× ×”×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”' : '×©×™×•×š ×× ×”×œ ×”×•×¡×¨ ×‘×”×¦×œ×—×”');\n                setShowManagerModal(false);\n                console.log('[AdminAdminsScreen] âœ… Manager updated successfully, reloading users with force refresh...');\n                await loadUsers(true); // Force refresh to bypass cache\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×¢×“×›×•×Ÿ ×× ×”×œ');\n                console.log('[AdminAdminsScreen] âŒ Failed to update manager:', res.error);\n            }\n        } catch (e) {\n            console.error('[AdminAdminsScreen] âŒ Error saving manager:', e);\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××”');\n        }\n    };\n\n    // Direct remove function (without confirmation - used from modal button)\n    const performRemoveManager = async () => {\n        if (!selectedForManager) {\n            console.log('[AdminAdminsScreen] performRemoveManager called but no selectedForManager');\n            return;\n        }\n\n        try {\n            console.log(`[AdminAdminsScreen] â³ Starting to remove manager for userId=${selectedForManager.id}, requestedBy=${selectedUser?.id}`);\n            setIsRemovingManager(true);\n\n            const res = await apiService.setManager(selectedForManager.id, null, selectedUser?.id);\n\n            console.log(`[AdminAdminsScreen] ğŸ“¡ Response from setManager:`, res);\n\n            if (res.success) {\n                Alert.alert('×”×¦×œ×—×”', '×©×™×•×š ×× ×”×œ ×”×•×¡×¨ ×‘×”×¦×œ×—×”');\n                setShowManagerModal(false);\n                console.log('[AdminAdminsScreen] âœ… Manager removed successfully, reloading users with force refresh...');\n                await loadUsers(true); // Force refresh to bypass cache\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×”×¡×¨×ª ×©×™×•×š ×× ×”×œ');\n            }\n        } catch (e) {\n            console.error('[AdminAdminsScreen] âŒ Error removing manager:', e);\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×”×¡×¨×ª ×©×™×•×š ×× ×”×œ');\n        } finally {\n            setIsRemovingManager(false);\n        }\n    };\n\n    // Remove manager with confirmation (used from outside modal)\n    const removeManager = async () => {\n        if (!selectedForManager) {\n            console.log('[AdminAdminsScreen] removeManager called but no selectedForManager');\n            return;\n        }\n\n        console.log('[AdminAdminsScreen] removeManager called for:', selectedForManager.name || selectedForManager.email);\n        console.log('[AdminAdminsScreen] selectedForManager.id:', selectedForManager.id);\n        console.log('[AdminAdminsScreen] selectedUser?.id:', selectedUser?.id);\n\n        if (Platform.OS === 'web') {\n            if (typeof window !== 'undefined' && window.confirm(`×”×× ×œ×”×¡×™×¨ ××ª ×©×™×•×š ×”×× ×”×œ ×-${selectedForManager.name || selectedForManager.email}?`)) {\n                await performRemoveManager();\n            }\n        } else {\n            Alert.alert(\n                '×”×¡×¨×ª ×©×™×•×š ×× ×”×œ',\n                `×”×× ×œ×”×¡×™×¨ ××ª ×©×™×•×š ×”×× ×”×œ ×-${selectedForManager.name || selectedForManager.email}?`,\n                [\n                    { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                    {\n                        text: '×”×¡×¨',\n                        style: 'destructive',\n                        onPress: performRemoveManager\n                    }\n                ]\n            );\n        }\n    };\n\n    const handlePromoteToVolunteer = async (targetUser: any) => {\n        logger.info(LOG_SOURCE, 'handlePromoteToVolunteer called', {\n            targetUserId: targetUser.id,\n            targetUserName: targetUser.name,\n            targetUserEmail: targetUser.email,\n            requestingAdminId: selectedUser?.id\n        });\n\n        if (!selectedUser?.id) {\n            logger.warn(LOG_SOURCE, 'handlePromoteToVolunteer: No selectedUser.id', {});\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n        \n        Alert.alert(\n            '×”×¤×•×š ×œ××ª× ×“×‘',\n            `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××ª ${targetUser.name || targetUser.email} ×œ××ª× ×“×‘?`,\n            [\n                { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                {\n                    text: '××™×©×•×¨',\n                    style: 'destructive',\n                    onPress: async () => {\n                        try {\n                            logger.info(LOG_SOURCE, 'Promoting user to volunteer - API call started', {\n                                targetUserId: targetUser.id,\n                                requestingAdminId: selectedUser.id\n                            });\n\n                            const res = await apiService.promoteToVolunteer(targetUser.id, selectedUser.id);\n                            \n                            logger.info(LOG_SOURCE, 'Promote to volunteer API response', {\n                                success: res.success,\n                                message: res.message,\n                                error: res.error,\n                                targetUserId: targetUser.id\n                            });\n\n                            if (res.success) {\n                                logger.info(LOG_SOURCE, 'User promoted to volunteer successfully', {\n                                    targetUserId: targetUser.id,\n                                    targetUserName: targetUser.name\n                                });\n                                Alert.alert('×”×¦×œ×—×”', res.message || '×”××©×ª××© ×”×¤×š ×œ××ª× ×“×‘');\n                                await loadUsers(true);\n                            } else {\n                                logger.error(LOG_SOURCE, 'Failed to promote user to volunteer', {\n                                    targetUserId: targetUser.id,\n                                    error: res.error\n                                });\n                                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×”×¤×™×›×” ×œ××ª× ×“×‘');\n                            }\n                        } catch (e: any) {\n                            logger.error(LOG_SOURCE, 'Error promoting to volunteer', {\n                                targetUserId: targetUser.id,\n                                error: e?.message || String(e),\n                                stack: e?.stack\n                            });\n                            console.error('[AdminAdminsScreen] Error promoting to volunteer:', e);\n                            Alert.alert('×©×’×™××”', '× ×›×©×œ ×‘×”×¤×™×›×” ×œ××ª× ×“×‘');\n                        }\n                    }\n                }\n            ]\n        );\n    };\n\n    const handleDemoteToVolunteer = async (targetUser: any) => {\n        console.log('[AdminAdminsScreen] ğŸ¯ handleDemoteToVolunteer called with:', {\n            targetUserId: targetUser?.id,\n            targetUserName: targetUser?.name,\n            targetUserEmail: targetUser?.email,\n            targetUserRoles: targetUser?.roles,\n            requestingAdminId: selectedUser?.id,\n            selectedUserEmail: selectedUser?.email\n        });\n\n        logger.info(LOG_SOURCE, 'handleDemoteToVolunteer called', {\n            targetUserId: targetUser.id,\n            targetUserName: targetUser.name,\n            targetUserEmail: targetUser.email,\n            targetUserRoles: targetUser.roles,\n            requestingAdminId: selectedUser?.id\n        });\n\n        if (!selectedUser?.id) {\n            logger.warn(LOG_SOURCE, 'handleDemoteToVolunteer: No selectedUser.id', {});\n            console.error('[AdminAdminsScreen] âŒ No selectedUser.id');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n\n        console.log('[AdminAdminsScreen] ğŸ“¢ Showing Alert.alert for demote to volunteer');\n        \n        Alert.alert(\n            '×”×¤×•×š ×œ××ª× ×“×‘',\n            `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ×”×¨×©××•×ª ×× ×”×œ ×-${targetUser.name || targetUser.email} ×•×œ×”×¤×•×š ××•×ª×• ×œ××ª× ×“×‘?`,\n            [\n                { \n                    text: '×‘×™×˜×•×œ', \n                    style: 'cancel',\n                    onPress: () => {\n                        console.log('[AdminAdminsScreen] âŒ User cancelled demote to volunteer');\n                    }\n                },\n                {\n                    text: '××™×©×•×¨',\n                    style: 'destructive',\n                    onPress: async () => {\n                        console.log('[AdminAdminsScreen] âœ… User confirmed demote to volunteer');\n                        try {\n                            logger.info(LOG_SOURCE, 'Demoting admin to volunteer - Starting process', {\n                                targetUserId: targetUser.id,\n                                requestingAdminId: selectedUser.id\n                            });\n\n                            console.log('[AdminAdminsScreen] ğŸ“¡ Calling apiService.demoteAdmin with convertToVolunteer=true');\n                            // Demote admin and convert to volunteer in one step\n                            logger.info(LOG_SOURCE, 'Demoting admin to volunteer', {\n                                targetUserId: targetUser.id,\n                                convertToVolunteer: true\n                            });\n                            const demoteRes = await apiService.demoteAdmin(targetUser.id, selectedUser.id, true);\n                            \n                            console.log('[AdminAdminsScreen] ğŸ“¡ API Response:', demoteRes);\n                            logger.info(LOG_SOURCE, 'Demote admin to volunteer API response', {\n                                success: demoteRes.success,\n                                message: demoteRes.message,\n                                error: demoteRes.error,\n                                targetUserId: targetUser.id\n                            });\n\n                            if (demoteRes.success) {\n                                logger.info(LOG_SOURCE, 'Admin demoted to volunteer successfully', {\n                                    targetUserId: targetUser.id,\n                                    targetUserName: targetUser.name\n                                });\n                                console.log('[AdminAdminsScreen] âœ… Success! Reloading users...');\n                                Alert.alert('×”×¦×œ×—×”', demoteRes.message || '×”××©×ª××© ×”×•×¡×¨ ××× ×”×œ×™× ×•×”×¤×š ×œ××ª× ×“×‘');\n                                await loadUsers(true);\n                            } else {\n                                logger.error(LOG_SOURCE, 'Failed to demote admin to volunteer', {\n                                    targetUserId: targetUser.id,\n                                    error: demoteRes.error\n                                });\n                                console.error('[AdminAdminsScreen] âŒ Failed:', demoteRes.error);\n                                Alert.alert('×©×’×™××”', demoteRes.error || '× ×›×©×œ ×‘×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ ×•×”×¤×™×›×” ×œ××ª× ×“×‘');\n                            }\n                        } catch (e: any) {\n                            logger.error(LOG_SOURCE, 'Error demoting admin to volunteer', {\n                                targetUserId: targetUser.id,\n                                error: e?.message || String(e),\n                                stack: e?.stack\n                            });\n                            console.error('[AdminAdminsScreen] âŒ Exception:', e);\n                            Alert.alert('×©×’×™××”', '× ×›×©×œ ×‘×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ');\n                        }\n                    }\n                }\n            ]\n        );\n    };\n\n    // Get managers that can be assigned (exclude the user themselves and create cycle prevention)\n    const getEligibleManagersForUser = (user: any) => {\n        if (!user) return allManagers;\n        // Filter out: the user themselves, and users who would create a cycle\n        return allManagers.filter((m: any) => m.id !== user.id);\n    };\n\n    const getFilteredUsers = () => {\n        return usersList.filter(user => {\n            const hasManager = !!user.parent_manager_id;\n            const currentRoles = Array.isArray(user.roles) ? user.roles : [];\n            const isAdminRole = currentRoles.includes('admin') || currentRoles.includes('super_admin');\n            const isVolunteerRole = currentRoles.includes('volunteer');\n\n            if (activeTab === 'admins') {\n                // ×× ×”×œ×™×: ××©×ª××©×™× ×¢× role admin/super_admin (×’× ×× ××™×Ÿ ×œ×”× manager)\n                return isAdminRole;\n            } else if (activeTab === 'volunteers') {\n                // ××ª× ×“×‘×™×: ××©×ª××©×™× ×¢× role volunteer (×œ×œ× admin)\n                return isVolunteerRole && !isAdminRole;\n            } else {\n                // ××©×ª××©×™× ×¨×’×™×œ×™×: ×œ×œ× manager ×•×œ×œ× roles ××™×•×—×“×™×\n                return !hasManager && !isAdminRole && !isVolunteerRole;\n            }\n        });\n    };\n\n    const filteredUsers = getFilteredUsers();\n\n    const renderHeader = () => (\n        <>\n            <View style={styles.header}>\n                <Text style={styles.title}>× ×™×”×•×œ ×× ×”×œ×™×</Text>\n            </View>\n            <View style={styles.tabsContainer}>\n                <TouchableOpacity style={[styles.tab, activeTab === 'admins' && styles.activeTab]} onPress={() => setActiveTab('admins')}>\n                    <Text style={[styles.tabText, activeTab === 'admins' && styles.activeTabText]}>×× ×”×œ×™×</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.tab, activeTab === 'volunteers' && styles.activeTab]} onPress={() => setActiveTab('volunteers')}>\n                    <Text style={[styles.tabText, activeTab === 'volunteers' && styles.activeTabText]}>××ª× ×“×‘×™×</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.tab, activeTab === 'users' && styles.activeTab]} onPress={() => setActiveTab('users')}>\n                    <Text style={[styles.tabText, activeTab === 'users' && styles.activeTabText]}>××©×ª××©×™×</Text>\n                </TouchableOpacity>\n            </View>\n            <View style={styles.searchContainer}>\n                <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                <TextInput\n                    style={styles.searchInput}\n                    value={searchQuery}\n                    onChangeText={setSearchQuery}\n                    placeholder=\"×—×¤×© ××©×ª××©...\"\n                    placeholderTextColor={colors.textTertiary}\n                />\n            </View>\n        </>\n    );\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <FlatList\n                data={filteredUsers}\n                keyExtractor={(item) => item.id}\n                contentContainerStyle={[\n                    styles.listContentContainer,\n                    Platform.OS === 'web' && { paddingBottom: 120 }\n                ]}\n                refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadUsers} />}\n                ListHeaderComponent={renderHeader}\n                scrollEnabled={true}\n                nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                showsVerticalScrollIndicator={true}\n                removeClippedSubviews={Platform.OS !== 'web'}\n                style={styles.flatList}\n                renderItem={({ item: user }) => {\n                    const userRoles = user.roles || [];\n                    const isAdmin = userRoles.includes('admin') || userRoles.includes('super_admin');\n                    const isVolunteer = userRoles.includes('volunteer');\n                    const isSameUser = user.id === selectedUser?.id;\n                    const isRootAdmin = user.email === 'karmacommunity2.0@gmail.com'; // ×”×× ×”×œ ×”×¨××©×™ - ××•×’×Ÿ ×œ×—×œ×•×˜×™×Ÿ\n                    const userCanBePromoted = canPromote(user);\n                    const userCanBeDemoted = canDemote(user);\n                    const hierarchyLevel = user.hierarchy_level;\n                    \n                    // Determine hierarchy level display\n                    let levelText = '';\n                    if (hierarchyLevel === 0) {\n                        levelText = '×“×¨×’×” 0 - ×× ×”×œ ×¨××©×™ ğŸ‘‘';\n                    } else if (hierarchyLevel === 1) {\n                        levelText = '×“×¨×’×” 1 - ×¡×•×¤×¨ ×× ×”×œ';\n                    } else if (hierarchyLevel !== null && hierarchyLevel !== undefined) {\n                        levelText = `×“×¨×’×” ${hierarchyLevel}`;\n                    }\n\n                    return (\n                        <View style={styles.userCard}>\n                            <View style={styles.userInfo}>\n                                <Text style={styles.userName}>{user.name || '×œ×œ× ×©×'}</Text>\n                                <Text style={styles.userEmail}>{user.email}</Text>\n                                \n                                {/* Display hierarchy level */}\n                                {levelText && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.primary + '20', marginTop: 4 }]}>\n                                        <Ionicons name=\"layers-outline\" size={12} color={colors.primary} />\n                                        <Text style={[styles.managerText, { color: colors.primary }]}>{levelText}</Text>\n                                    </View>\n                                )}\n                                \n                                {/* Show \"Reports to\" only if NOT root admin and has manager */}\n                                {!isRootAdmin && user.manager_details && (\n                                    <View style={styles.managerBadge}>\n                                        <Ionicons name=\"people-outline\" size={12} color={colors.primary} />\n                                        <Text style={styles.managerText}>××“×•×•×— ×œ- {user.manager_details.name}</Text>\n                                    </View>\n                                )}\n                                {isAdmin && user.parent_manager_id === selectedUser?.id && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.success + '20' }]}>\n                                        <Ionicons name=\"checkmark-circle\" size={12} color={colors.success} />\n                                        <Text style={[styles.managerText, { color: colors.success }]}>×× ×”×œ ×ª×—×ª×™×š</Text>\n                                    </View>\n                                )}\n                                {isVolunteer && !isAdmin && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.warning + '20' }]}>\n                                        <Ionicons name=\"heart-outline\" size={12} color={colors.warning} />\n                                        <Text style={[styles.managerText, { color: colors.warning }]}>××ª× ×“×‘</Text>\n                                    </View>\n                                )}\n                            </View>\n\n                            {!viewOnly && !isRootAdmin && (\n                                <View style={styles.actionsColumn}>\n                                    <TouchableOpacity\n                                        style={[styles.actionButton, styles.managerBtn]}\n                                        onPress={() => openManagerModal(user)}\n                                    >\n                                        <Text style={styles.actionBtnText}>×©×™×•×š ×× ×”×œ</Text>\n                                    </TouchableOpacity>\n                                    \n                                    {/* In volunteers tab: Show \"×”×¤×•×š ×œ×× ×”×œ\" button for volunteers who can be promoted */}\n                                    {(() => {\n                                        const shouldShow = activeTab === 'volunteers' && isVolunteer && !isAdmin && userCanBePromoted;\n                                        console.log('[AdminAdminsScreen] ğŸ” Button visibility check:', {\n                                            userId: user.id,\n                                            userName: user.name,\n                                            activeTab,\n                                            isVolunteer,\n                                            isAdmin,\n                                            userCanBePromoted,\n                                            shouldShow\n                                        });\n                                        return shouldShow;\n                                    })() && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.primary, marginTop: 8 }]}\n                                            onPress={() => {\n                                                console.log('[AdminAdminsScreen] ğŸ¯ \"×”×¤×•×š ×œ×× ×”×œ\" button pressed for user:', user.id, user.name);\n                                                handleToggleAdmin(user);\n                                            }}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ×× ×”×œ</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                    \n                                    {/* In admins tab: Show \"×”×¤×•×š ×œ××ª× ×“×‘\" button for admins who can be demoted */}\n                                    {activeTab === 'admins' && isAdmin && userCanBeDemoted && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.warning, marginTop: 8 }]}\n                                            onPress={() => handleDemoteToVolunteer(user)}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ××ª× ×“×‘</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                    \n                                    {/* Show \"Promote to Volunteer\" button for non-volunteers in volunteers tab */}\n                                    {activeTab === 'volunteers' && !isVolunteer && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.warning, marginTop: 8 }]}\n                                            onPress={() => handlePromoteToVolunteer(user)}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ××ª× ×“×‘</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                </View>\n                            )}\n                            \n                            {/* Show protected message for root admin */}\n                            {isRootAdmin && (\n                                <View style={[styles.managerBadge, { backgroundColor: colors.error + '20', marginTop: 8 }]}>\n                                    <Ionicons name=\"shield-checkmark\" size={12} color={colors.error} />\n                                    <Text style={[styles.managerText, { color: colors.error }]}>×× ×”×œ ×¨××©×™</Text>\n                                </View>\n                            )}\n                        </View>\n                    );\n                }}\n            />\n\n            < Modal visible={showManagerModal && !viewOnly} animationType=\"fade\" transparent >\n                <View style={styles.modalBackdrop}>\n                    <View style={styles.modalCard}>\n                        <View style={styles.modalHeader}>\n                            <Text style={styles.modalTitle}>×”×’×“×¨×ª ×× ×”×œ ×¢×‘×•×¨ {selectedForManager?.name || '××©×ª××©'}</Text>\n                            <TouchableOpacity onPress={() => setShowManagerModal(false)}>\n                                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                            </TouchableOpacity>\n                        </View>\n\n                        {selectedForManager?.manager_details && (\n                            <View style={styles.currentManagerBox}>\n                                <Text style={styles.currentManagerLabel}>×× ×”×œ × ×•×›×—×™:</Text>\n                                <Text style={styles.currentManagerName}>{selectedForManager.manager_details.name}</Text>\n                                <TouchableOpacity\n                                    style={[styles.removeManagerBtn, isRemovingManager && { opacity: 0.5 }]}\n                                    onPress={viewOnly ? undefined : () => {\n                                        console.log('[AdminAdminsScreen] Remove manager button pressed in modal');\n                                        performRemoveManager();\n                                    }}\n                                    disabled={viewOnly || isRemovingManager}\n                                    activeOpacity={0.7}\n                                >\n                                    {isRemovingManager ? (\n                                        <ActivityIndicator size=\"small\" color={colors.error} />\n                                    ) : (\n                                        <>\n                                            <Ionicons name=\"trash-outline\" size={16} color={colors.error} />\n                                            <Text style={styles.removeManagerText}>×”×¡×¨ ×©×™×•×š</Text>\n                                        </>\n                                    )}\n                                </TouchableOpacity>\n                            </View>\n                        )}\n\n                        <Text style={styles.modalSubtitle}>\n                            {selectedForManager?.manager_details ? '×”×—×œ×£ ×œ×× ×”×œ ××—×¨:' : '×‘×—×¨ ×× ×”×œ:'}\n                        </Text>\n\n                        <View style={styles.managersList}>\n                            <FlatList\n                                data={getEligibleManagersForUser(selectedForManager)}\n                                keyExtractor={(item) => item.id}\n                                style={{ maxHeight: 200 }}\n                                renderItem={({ item: manager }) => {\n                                    const isSelected = newManager?.id === manager.id;\n                                    const isCurrentManager = selectedForManager?.manager_details?.id === manager.id;\n\n                                    return (\n                                        <TouchableOpacity\n                                            style={[\n                                                styles.managerItem,\n                                                isSelected && styles.managerItemSelected,\n                                                isCurrentManager && styles.managerItemCurrent\n                                            ]}\n                                            onPress={() => setNewManager(manager)}\n                                        >\n                                            <View style={styles.managerItemInfo}>\n                                                <Text style={styles.managerItemName}>{manager.name || '×œ×œ× ×©×'}</Text>\n                                                <Text style={styles.managerItemEmail}>{manager.email}</Text>\n                                            </View>\n                                            {isSelected && (\n                                                <Ionicons name=\"checkmark-circle\" size={24} color={colors.primary} />\n                                            )}\n                                            {isCurrentManager && !isSelected && (\n                                                <Text style={styles.currentBadge}>× ×•×›×—×™</Text>\n                                            )}\n                                        </TouchableOpacity>\n                                    );\n                                }}\n                                ListEmptyComponent={\n                                    <Text style={styles.emptyManagersText}>××™×Ÿ ×× ×”×œ×™× ×–××™× ×™×</Text>\n                                }\n                            />\n                        </View>\n\n                        <View style={styles.modalActions}>\n                            <TouchableOpacity style={[styles.modalBtn, styles.modalCancel]} onPress={() => setShowManagerModal(false)}>\n                                <Text style={[styles.modalBtnText, { color: colors.textPrimary }]}>×‘×™×˜×•×œ</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity\n                                style={[\n                                    styles.modalBtn,\n                                    styles.modalSave,\n                                    (!newManager || newManager.id === selectedForManager?.manager_details?.id) && styles.modalBtnDisabled\n                                ]}\n                                onPress={viewOnly ? undefined : saveManager}\n                                disabled={viewOnly || !newManager || newManager.id === selectedForManager?.manager_details?.id}\n                            >\n                                <Text style={styles.modalBtnText}>×©××•×¨</Text>\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                </View>\n            </Modal >\n        </SafeAreaView >\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: colors.backgroundSecondary,\n        ...(Platform.OS === 'web' && {\n            position: 'relative' as any,\n            height: '100vh' as any,\n        }),\n    },\n    flatList: {\n        flex: 1,\n        ...(Platform.OS === 'web' && {\n            overflowY: 'auto' as any,\n            WebkitOverflowScrolling: 'touch' as any,\n        }),\n    },\n    header: { padding: LAYOUT_CONSTANTS.SPACING.LG, backgroundColor: colors.background, alignItems: 'center' },\n    title: { fontSize: FontSizes.heading1, fontWeight: 'bold', color: colors.textPrimary },\n    tabsContainer: { flexDirection: 'row', padding: 8, margin: 16, backgroundColor: colors.background, borderRadius: 8 },\n    tab: { flex: 1, padding: 8, alignItems: 'center', borderRadius: 4 },\n    activeTab: { backgroundColor: colors.primary + '20' },\n    tabText: { color: colors.textSecondary },\n    activeTabText: { color: colors.primary, fontWeight: 'bold' },\n    searchContainer: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.background, marginHorizontal: 16, padding: 12, borderRadius: 8 },\n    searchIcon: { marginRight: 8 },\n    searchInput: { flex: 1, textAlign: 'right', fontSize: 16 },\n    listContentContainer: { paddingBottom: 100 },\n\n    userCard: { backgroundColor: colors.background, marginHorizontal: 16, marginBottom: 12, padding: 16, borderRadius: 12, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n    userInfo: { flex: 1 },\n    userName: { fontSize: 18, fontWeight: 'bold', color: colors.textPrimary, textAlign: 'left' },\n    userEmail: { fontSize: 14, color: colors.textSecondary, marginBottom: 4, textAlign: 'left' },\n    managerBadge: { flexDirection: 'row', alignItems: 'center', gap: 4, marginTop: 4 },\n    managerText: { fontSize: 12, color: colors.primary },\n\n    actionsColumn: { gap: 8 },\n    actionButton: { paddingHorizontal: 12, paddingVertical: 6, borderRadius: 8, alignItems: 'center', minWidth: 80 },\n    managerBtn: { backgroundColor: colors.info },\n    addButton: { backgroundColor: colors.primary },\n    removeButton: { backgroundColor: colors.error },\n    lockedButton: { backgroundColor: colors.textTertiary },\n    actionBtnText: { color: 'white', fontSize: 12, fontWeight: 'bold' },\n\n    modalBackdrop: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n    modalCard: { backgroundColor: colors.background, borderRadius: 16, padding: 20, maxHeight: '80%' },\n    modalHeader: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 },\n    modalTitle: { fontSize: 18, fontWeight: 'bold', flex: 1 },\n    modalSubtitle: { fontSize: 14, color: colors.textSecondary, marginBottom: 12, textAlign: 'right' },\n    modalActions: { flexDirection: 'row', gap: 12, marginTop: 16 },\n    modalBtn: { flex: 1, padding: 12, borderRadius: 8, alignItems: 'center' },\n    modalCancel: { backgroundColor: colors.backgroundSecondary },\n    modalSave: { backgroundColor: colors.primary },\n    modalBtnDisabled: { backgroundColor: colors.textTertiary },\n    modalBtnText: { color: 'white', fontWeight: 'bold' },\n\n    // Current manager box\n    currentManagerBox: {\n        backgroundColor: colors.backgroundSecondary,\n        padding: 12,\n        borderRadius: 8,\n        marginBottom: 16,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n    },\n    currentManagerLabel: { fontSize: 12, color: colors.textSecondary },\n    currentManagerName: { fontSize: 14, fontWeight: 'bold', color: colors.textPrimary, flex: 1, marginLeft: 8 },\n    removeManagerBtn: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 4,\n        padding: 8,\n        borderRadius: 6,\n        backgroundColor: colors.error + '15'\n    },\n    removeManagerText: { fontSize: 12, color: colors.error, fontWeight: '600' },\n\n    // Managers list\n    managersList: { borderWidth: 1, borderColor: colors.border, borderRadius: 8, overflow: 'hidden' },\n    managerItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        backgroundColor: colors.background\n    },\n    managerItemSelected: { backgroundColor: colors.primary + '15' },\n    managerItemCurrent: { backgroundColor: colors.info + '10' },\n    managerItemInfo: { flex: 1 },\n    managerItemName: { fontSize: 14, fontWeight: '600', color: colors.textPrimary },\n    managerItemEmail: { fontSize: 12, color: colors.textSecondary },\n    currentBadge: {\n        fontSize: 10,\n        color: colors.info,\n        fontWeight: 'bold',\n        backgroundColor: colors.info + '20',\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4\n    },\n    emptyManagersText: { padding: 20, textAlign: 'center', color: colors.textSecondary },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminCRMScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadContacts'. Either include it or remove the dependency array.","line":90,"column":8,"nodeType":"ArrayExpression","endLine":90,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [statusFilter, searchQuery, loadContacts]","fix":{"range":[2964,2991],"text":"[statusFilter, searchQuery, loadContacts]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    SafeAreaView,\n    TouchableOpacity,\n    Modal,\n    TextInput,\n    Alert,\n    ScrollView,\n    RefreshControl,\n    ActivityIndicator,\n    Platform,\n    Dimensions,\n    StatusBar,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminCRMScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface CrmContact {\n    id: string;\n    name: string;\n    capabilities?: string;\n    desire?: string;\n    time_availability?: string;\n    source?: string;\n    referrer?: string;\n    status: 'active' | 'inactive';\n    created_at: string;\n}\n\ninterface ContactFormData {\n    name: string;\n    capabilities: string;\n    desire: string;\n    time_availability: string;\n    source: string;\n    referrer: string;\n    status: 'active' | 'inactive';\n}\n\nconst LOG_SOURCE = 'AdminCRMScreen';\n\nexport default function AdminCRMScreen({ navigation }: AdminCRMScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const tabBarHeight = useBottomTabBarHeight() || 0;\n    const [contacts, setContacts] = useState<CrmContact[]>([]);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [isEditMode, setIsEditMode] = useState(false);\n    const [editingId, setEditingId] = useState<string | null>(null);\n    const [formData, setFormData] = useState<ContactFormData>({\n        name: '',\n        capabilities: '',\n        desire: '',\n        time_availability: '',\n        source: '',\n        referrer: '',\n        status: 'active',\n    });\n    const [isLoading, setIsLoading] = useState(false);\n    const [isMutating, setIsMutating] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\n    const [headerHeight, setHeaderHeight] = useState(0);\n    const [filtersHeight, setFiltersHeight] = useState(0);\n    const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n    const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n        ? screenHeight - tabBarHeight - headerHeight - filtersHeight\n        : undefined;\n\n    useEffect(() => {\n        loadContacts();\n    }, [statusFilter, searchQuery]);\n\n    const loadContacts = async () => {\n        try {\n            setIsLoading(true);\n            const res = await apiService.crm.getAll({\n                status: statusFilter !== 'all' ? statusFilter : undefined,\n                search: searchQuery || undefined,\n            });\n\n            if (res.success && Array.isArray(res.data)) {\n                setContacts(res.data);\n            } else {\n                setContacts([]);\n            }\n        } catch (error) {\n            logger.error(LOG_SOURCE, 'Error loading contacts', { error });\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ××ª ×¨×©×™××ª ×”×§×©×¨×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleAdd = () => {\n        setIsEditMode(false);\n        setEditingId(null);\n        setFormData({\n            name: '',\n            capabilities: '',\n            desire: '',\n            time_availability: '',\n            source: '',\n            referrer: '',\n            status: 'active',\n        });\n        setIsModalVisible(true);\n    };\n\n    const handleEdit = (contact: CrmContact) => {\n        setIsEditMode(true);\n        setEditingId(contact.id);\n        setFormData({\n            name: contact.name,\n            capabilities: contact.capabilities || '',\n            desire: contact.desire || '',\n            time_availability: contact.time_availability || '',\n            source: contact.source || '',\n            referrer: contact.referrer || '',\n            status: contact.status || 'active',\n        });\n        setIsModalVisible(true);\n    };\n\n    const handleDelete = (contact: CrmContact) => {\n        Alert.alert('××—×™×§×ª ××™×© ×§×©×¨', `×”×× ×œ××—×•×§ ××ª ${contact.name}?`, [\n            { text: '×‘×™×˜×•×œ', style: 'cancel' },\n            {\n                text: '××—×§',\n                style: 'destructive',\n                onPress: async () => {\n                    try {\n                        setIsMutating(true);\n                        const res = await apiService.crm.delete(contact.id);\n                        if (res.success) {\n                            loadContacts();\n                        } else {\n                            Alert.alert('×©×’×™××”', '××—×™×§×” × ×›×©×œ×”');\n                        }\n                    } catch (e) {\n                        Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××—×™×§×”');\n                    } finally {\n                        setIsMutating(false);\n                    }\n                },\n            },\n        ]);\n    };\n\n    const handleSave = async () => {\n        if (!formData.name.trim()) {\n            Alert.alert('×©×’×™××”', '×©× ×”×•× ×©×“×” ×—×•×‘×”');\n            return;\n        }\n\n        try {\n            setIsMutating(true);\n            const payload = {\n                ...formData,\n                created_by: selectedUser?.id,\n            };\n\n            let res;\n            if (isEditMode && editingId) {\n                res = await apiService.crm.update(editingId, payload);\n            } else {\n                res = await apiService.crm.create(payload);\n            }\n\n            if (res.success) {\n                setIsModalVisible(false);\n                loadContacts();\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '×©××™×¨×” × ×›×©×œ×”');\n            }\n        } catch (e) {\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×©××™×¨×”');\n        } finally {\n            setIsMutating(false);\n        }\n    };\n\n    return (\n        <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n            <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n            <View \n                style={styles.header}\n                onLayout={(event) => {\n                    if (Platform.OS === 'web') {\n                        const { height } = event.nativeEvent.layout;\n                        setHeaderHeight(height);\n                    }\n                }}\n            >\n                <Text style={styles.title}>× ×™×”×•×œ ×§×©×¨×™×</Text>\n                {!viewOnly && (\n                    <TouchableOpacity style={styles.addButton} onPress={handleAdd}>\n                        <Ionicons name=\"add\" size={24} color=\"white\" />\n                        <Text style={styles.addButtonText}>×”×•×¡×£</Text>\n                    </TouchableOpacity>\n                )}\n            </View>\n\n            <View \n                style={styles.filtersContainer}\n                onLayout={(event) => {\n                    if (Platform.OS === 'web') {\n                        const { height } = event.nativeEvent.layout;\n                        setFiltersHeight(height);\n                    }\n                }}\n            >\n                <View style={styles.searchContainer}>\n                    <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                    <TextInput\n                        style={styles.searchInput}\n                        value={searchQuery}\n                        onChangeText={setSearchQuery}\n                        placeholder=\"×—×¤×© ×©×, ×™×›×•×œ×•×ª...\"\n                        placeholderTextColor={colors.textTertiary}\n                    />\n                </View>\n                <View style={styles.statusFilterContainer}>\n                    {['all', 'active', 'inactive'].map((s) => (\n                        <TouchableOpacity\n                            key={s}\n                            style={[styles.filterButton, statusFilter === s && styles.filterButtonActive]}\n                            onPress={() => setStatusFilter(s as any)}\n                        >\n                            <Text style={[styles.filterButtonText, statusFilter === s && styles.filterButtonTextActive]}>\n                                {s === 'all' ? '×”×›×œ' : s === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                            </Text>\n                        </TouchableOpacity>\n                    ))}\n                </View>\n            </View>\n\n            {/* List container - limited height on web to ensure scrolling works */}\n            <View style={[\n                styles.listWrapper,\n                Platform.OS === 'web' && maxListHeight ? {\n                    maxHeight: maxListHeight,\n                } : undefined\n            ]}>\n                {isLoading ? (\n                    <View style={styles.loadingContainer}>\n                        <ActivityIndicator size=\"large\" color={colors.primary} />\n                    </View>\n                ) : (\n                    <ScrollView\n                        contentContainerStyle={styles.listContent}\n                        refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadContacts} />}\n                        scrollEnabled={true}\n                        nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                        scrollEventThrottle={16}\n                    >\n                    {contacts.map((c) => (\n                        <View key={c.id} style={styles.card}>\n                            <View style={styles.cardHeader}>\n                                <View>\n                                    <Text style={styles.cardTitle}>{c.name}</Text>\n                                    <Text style={styles.cardDate}>{new Date(c.created_at).toLocaleDateString('he-IL')}</Text>\n                                </View>\n                                <View style={styles.cardActions}>\n                                    {!viewOnly && (\n                                        <>\n                                            <TouchableOpacity onPress={() => handleEdit(c)} style={styles.actionButton}>\n                                                <Ionicons name=\"create-outline\" size={20} color={colors.primary} />\n                                            </TouchableOpacity>\n                                            <TouchableOpacity onPress={() => handleDelete(c)} style={styles.actionButton}>\n                                                <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                                            </TouchableOpacity>\n                                        </>\n                                    )}\n                                </View>\n                            </View>\n\n                            <View style={styles.cardDetails}>\n                                {c.capabilities ? <Text style={styles.detailText}><Text style={styles.bold}>×™×›×•×œ×•×ª:</Text> {c.capabilities}</Text> : null}\n                                {c.desire ? <Text style={styles.detailText}><Text style={styles.bold}>×¨×¦×•×Ÿ:</Text> {c.desire}</Text> : null}\n                                {c.time_availability ? <Text style={styles.detailText}><Text style={styles.bold}>×–××Ÿ:</Text> {c.time_availability}</Text> : null}\n                                {c.source ? <Text style={styles.detailText}><Text style={styles.bold}>××§×•×¨:</Text> {c.source}</Text> : null}\n                                {c.referrer ? <Text style={styles.detailText}><Text style={styles.bold}>××¤× ×”:</Text> {c.referrer}</Text> : null}\n                            </View>\n\n                            <View style={[styles.statusBadge, c.status === 'active' ? styles.statusActive : styles.statusInactive]}>\n                                <Text style={[styles.statusText, c.status === 'active' ? styles.statusTextActive : styles.statusTextInactive]}>\n                                    {c.status === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                                </Text>\n                            </View>\n                        </View>\n                    ))}\n                    {contacts.length === 0 && (\n                        <Text style={styles.emptyText}>×œ× × ××¦××• ×× ×©×™ ×§×©×¨</Text>\n                    )}\n                    </ScrollView>\n                )}\n            </View>\n\n            <Modal visible={isModalVisible && !viewOnly} animationType=\"slide\" transparent>\n                <View style={styles.modalOverlay}>\n                    <View style={styles.modalContent}>\n                        <View style={styles.modalHeader}>\n                            <Text style={styles.modalTitle}>{isEditMode ? '×¢×¨×•×š' : '×”×•×¡×£'}</Text>\n                            <TouchableOpacity onPress={() => setIsModalVisible(false)}>\n                                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                            </TouchableOpacity>\n                        </View>\n                        <ScrollView style={styles.modalForm}>\n                            <FormInput label=\"×©× *\" value={formData.name} onChange={(v: string) => setFormData({ ...formData, name: v })} />\n                            <FormInput label=\"×™×›×•×œ×•×ª\" value={formData.capabilities} onChange={(v: string) => setFormData({ ...formData, capabilities: v })} multiline />\n                            <FormInput label=\"×¨×¦×•×Ÿ\" value={formData.desire} onChange={(v: string) => setFormData({ ...formData, desire: v })} multiline />\n                            <FormInput label=\"×–××Ÿ / ×–××™× ×•×ª\" value={formData.time_availability} onChange={(v: string) => setFormData({ ...formData, time_availability: v })} />\n                            <FormInput label=\"×××™×¤×” ×”×’×¢× ×• (××§×•×¨)\" value={formData.source} onChange={(v: string) => setFormData({ ...formData, source: v })} />\n                            <FormInput label=\"××™ ×”×¤×¢×™×œ/×”×‘×™× (××¤× ×”)\" value={formData.referrer} onChange={(v: string) => setFormData({ ...formData, referrer: v })} />\n\n                            <Text style={styles.label}>×¡×˜×˜×•×¡</Text>\n                            <View style={styles.statusSwitches}>\n                                <TouchableOpacity\n                                    style={[styles.statusSwitch, formData.status === 'active' && styles.statusSwitchActive]}\n                                    onPress={() => setFormData({ ...formData, status: 'active' })}\n                                >\n                                    <Text style={formData.status === 'active' ? styles.wt : styles.bt}>×¤×¢×™×œ</Text>\n                                </TouchableOpacity>\n                                <TouchableOpacity\n                                    style={[styles.statusSwitch, formData.status === 'inactive' && styles.statusSwitchActive]}\n                                    onPress={() => setFormData({ ...formData, status: 'inactive' })}\n                                >\n                                    <Text style={formData.status === 'inactive' ? styles.wt : styles.bt}>×œ× ×¤×¢×™×œ</Text>\n                                </TouchableOpacity>\n                            </View>\n\n                            <TouchableOpacity style={styles.saveButton} onPress={handleSave} disabled={isMutating}>\n                                {isMutating ? <ActivityIndicator color=\"white\" /> : <Text style={styles.saveButtonText}>×©××•×¨</Text>}\n                            </TouchableOpacity>\n                        </ScrollView>\n                    </View>\n                </View>\n            </Modal>\n        </SafeAreaView>\n    );\n}\n\nconst FormInput = ({ label, value, onChange, multiline = false }: any) => (\n    <View style={styles.formGroup}>\n        <Text style={styles.label}>{label}</Text>\n        <TextInput\n            style={[styles.input, multiline && styles.textArea]}\n            value={value}\n            onChangeText={onChange}\n            multiline={multiline}\n            textAlignVertical={multiline ? 'top' : 'center'}\n        />\n    </View>\n);\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.backgroundSecondary, position: 'relative' },\n    listWrapper: { flex: 1, backgroundColor: colors.backgroundSecondary },\n    header: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: LAYOUT_CONSTANTS.SPACING.LG, backgroundColor: colors.background, paddingVertical: 20 },\n    title: { fontSize: FontSizes.heading2, fontWeight: 'bold' },\n    addButton: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.primary, padding: 8, borderRadius: 8 },\n    addButtonText: { color: 'white', marginLeft: 5, fontWeight: '600' },\n    filtersContainer: { padding: 10, backgroundColor: colors.background },\n    searchContainer: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.backgroundSecondary, borderRadius: 8, padding: 8, marginBottom: 10 },\n    searchIcon: { marginRight: 8 },\n    searchInput: { flex: 1, textAlign: 'right' },\n    statusFilterContainer: { flexDirection: 'row', justifyContent: 'space-around' },\n    filterButton: { padding: 8, borderRadius: 15, width: '30%', alignItems: 'center', backgroundColor: '#eee' },\n    filterButtonActive: { backgroundColor: colors.primary },\n    filterButtonText: { color: '#666' },\n    filterButtonTextActive: { color: 'white', fontWeight: 'bold' },\n    loadingContainer: { flex: 1, justifyContent: 'center', alignItems: 'center' },\n    listContent: { padding: 15, paddingBottom: 100 },\n    card: { backgroundColor: 'white', padding: 15, borderRadius: 10, marginBottom: 15, shadowColor: '#000', shadowOpacity: 0.1, shadowRadius: 5, elevation: 2 },\n    cardHeader: { flexDirection: 'row', justifyContent: 'space-between', marginBottom: 10 },\n    cardTitle: { fontSize: 18, fontWeight: 'bold', textAlign: 'left' },\n    cardDate: { fontSize: 12, color: '#999', textAlign: 'left' },\n    cardActions: { flexDirection: 'row' },\n    actionButton: { padding: 5, marginLeft: 10 },\n    cardDetails: { marginBottom: 10 },\n    detailText: { fontSize: 14, marginBottom: 4, textAlign: 'left' },\n    bold: { fontWeight: 'bold' },\n    statusBadge: { alignSelf: 'flex-start', paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 },\n    statusActive: { backgroundColor: '#e6fffa' },\n    statusInactive: { backgroundColor: '#fff5f5' },\n    statusText: { fontSize: 12, fontWeight: 'bold' },\n    statusTextActive: { color: colors.success },\n    statusTextInactive: { color: colors.error },\n    emptyText: { textAlign: 'center', marginTop: 50, color: '#999' },\n    modalOverlay: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'flex-end' },\n    modalContent: { backgroundColor: 'white', borderTopLeftRadius: 20, borderTopRightRadius: 20, height: '80%' },\n    modalHeader: { padding: 20, borderBottomWidth: 1, borderBottomColor: '#eee', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n    modalTitle: { fontSize: 20, fontWeight: 'bold' },\n    modalForm: { padding: 20 },\n    formGroup: { marginBottom: 15 },\n    label: { marginBottom: 5, fontWeight: '600', textAlign: 'left' },\n    input: { borderWidth: 1, borderColor: '#ddd', borderRadius: 8, padding: 10, textAlign: 'right' },\n    textArea: { height: 80 },\n    saveButton: { backgroundColor: colors.primary, padding: 15, borderRadius: 8, alignItems: 'center', marginTop: 20 },\n    saveButtonText: { color: 'white', fontWeight: 'bold', fontSize: 16 },\n    statusSwitches: { flexDirection: 'row', marginTop: 5 },\n    statusSwitch: { flex: 1, padding: 10, alignItems: 'center', borderColor: colors.primary, borderWidth: 1 },\n    statusSwitchActive: { backgroundColor: colors.primary },\n    wt: { color: 'white' },\n    bt: { color: colors.primary },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminDashboardScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminFilesScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadFiles'. Either include it or remove the dependency array.","line":57,"column":8,"nodeType":"ArrayExpression","endLine":57,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [currentFolder, loadFiles]","fix":{"range":[1926,1941],"text":"[currentFolder, loadFiles]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    SafeAreaView,\n    TouchableOpacity,\n    Modal,\n    TextInput,\n    Alert,\n    ScrollView,\n    RefreshControl,\n    Linking,\n    ActivityIndicator,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport { pickDocument, validateFile, FileData, formatFileSize } from '../utils/fileService';\nimport { uploadFileWithProgress, buildAdminFilePath } from '../utils/storageService';\n\ninterface AdminFilesScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface GeneralFile {\n    id: string;\n    name: string;\n    url: string;\n    folder_path: string;\n    created_at: string;\n    mime_type?: string;\n    size?: number;\n}\n\nexport default function AdminFilesScreen({ navigation }: AdminFilesScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const [files, setFiles] = useState<GeneralFile[]>([]);\n    const [currentFolder, setCurrentFolder] = useState('/');\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isMutating, setIsMutating] = useState(false);\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const [selectedFile, setSelectedFile] = useState<FileData | null>(null);\n\n    useEffect(() => {\n        loadFiles();\n    }, [currentFolder]);\n\n    const loadFiles = async () => {\n        try {\n            setIsLoading(true);\n            const res = await apiService.adminFiles.getAll({ folder: currentFolder });\n            if (res.success && Array.isArray(res.data)) {\n                setFiles(res.data);\n            } else {\n                setFiles([]);\n            }\n        } catch (e) {\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×§×‘×¦×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleOpen = (url: string) => {\n        Linking.openURL(url).catch(() => Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'));\n    };\n\n    const handleDelete = (file: GeneralFile) => {\n        // Check hierarchy - simplified to checking if admin\n        Alert.alert('××—×™×§×”', `×œ××—×•×§ ××ª ${file.name}?`, [\n            { text: '×‘×™×˜×•×œ' },\n            {\n                text: '××—×§',\n                style: 'destructive',\n                onPress: async () => {\n                    setIsMutating(true);\n                    const res = await apiService.adminFiles.delete(file.id);\n                    setIsMutating(false);\n                    if (res.success) loadFiles();\n                    else Alert.alert('×©×’×™××”', '××—×™×§×” × ×›×©×œ×”');\n                }\n            }\n        ]);\n    };\n\n    const handlePickFile = async () => {\n        const result = await pickDocument();\n        if (result.success && result.fileData) {\n            setSelectedFile(result.fileData);\n        } else if (result.error) {\n            Alert.alert('×©×’×™××”', result.error);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (!selectedFile) {\n            Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ ×§×•×‘×¥ ×œ×”×¢×œ××”');\n            return;\n        }\n\n        // Validate file size (max 10MB for admin files)\n        const maxSize = 10 * 1024 * 1024; // 10MB\n        const validation = validateFile(selectedFile, maxSize);\n        if (!validation.isValid) {\n            Alert.alert('×©×’×™××”', validation.error || '×”×§×•×‘×¥ ××™× ×• ×ª×§×™×Ÿ');\n            return;\n        }\n\n        setIsMutating(true);\n        setUploadProgress(0);\n\n        try {\n            // Generate file ID\n            const fileId = `file_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n            \n            // Build file path in Firebase Storage\n            const fullPath = buildAdminFilePath(currentFolder, fileId, selectedFile.name);\n            \n            // Upload file to Firebase Storage with progress tracking\n            let uploadedUrl: string;\n            try {\n                const uploadResult = await uploadFileWithProgress(\n                    fullPath,\n                    selectedFile.uri,\n                    selectedFile.mimeType,\n                    (progress) => {\n                        setUploadProgress(progress);\n                    }\n                );\n                uploadedUrl = uploadResult.url;\n            } catch (uploadError: any) {\n                console.error('âŒ Upload file error:', uploadError);\n                const errorMessage = uploadError?.message || uploadError?.code || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n                console.error('âŒ Upload error details:', {\n                    error: uploadError,\n                    fullPath,\n                    fileName: selectedFile.name,\n                    fileSize: selectedFile.size,\n                    mimeType: selectedFile.mimeType,\n                });\n                Alert.alert(\n                    '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥',\n                    `×œ× × ×™×ª×Ÿ ×œ×”×¢×œ×•×ª ××ª ×”×§×•×‘×¥. ${errorMessage.includes('CORS') ? '×‘×¢×™×™×ª CORS - ×‘×“×•×§ ××ª ×”×’×“×¨×•×ª Firebase Storage.' : errorMessage}`\n                );\n                setIsMutating(false);\n                setUploadProgress(0);\n                return;\n            }\n\n            // Save file metadata to database\n            const res = await apiService.adminFiles.create({\n                name: selectedFile.name,\n                url: uploadedUrl,\n                mime_type: selectedFile.mimeType,\n                size: selectedFile.size || 0,\n                folder_path: currentFolder,\n                uploaded_by: selectedUser?.id\n            });\n\n            if (res.success) {\n                setIsModalVisible(false);\n                setSelectedFile(null);\n                setUploadProgress(0);\n                loadFiles();\n            } else {\n                Alert.alert('×©×’×™××”', '×”×•×¡×¤×” × ×›×©×œ×”');\n            }\n        } catch (error) {\n            console.error('âŒ Upload error:', error);\n            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥. ×× × × ×¡×” ×©×•×‘.');\n        } finally {\n            setIsMutating(false);\n            setUploadProgress(0);\n        }\n    };\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <View style={styles.header}>\n                <Text style={styles.title}>×§×‘×¦×™× ××©×•×ª×¤×™×</Text>\n                {!viewOnly && (\n                    <TouchableOpacity style={styles.addButton} onPress={() => setIsModalVisible(true)}>\n                        <Ionicons name=\"add\" size={24} color=\"white\" />\n                        <Text style={styles.addText}>×”×•×¡×£ ×§×•×‘×¥</Text>\n                    </TouchableOpacity>\n                )}\n            </View>\n\n            <View style={styles.folderBar}>\n                <Ionicons name=\"folder-open\" size={20} color={colors.primary} />\n                <Text style={styles.folderName}>{currentFolder === '/' ? '×ª×™×§×™×™×” ×¨××©×™×ª' : currentFolder}</Text>\n            </View>\n\n            {isLoading ? (\n                <ActivityIndicator style={{ marginTop: 20 }} size=\"large\" color={colors.primary} />\n            ) : (\n                <ScrollView\n                    contentContainerStyle={styles.list}\n                    refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadFiles} />}\n                >\n                    {files.map((f) => (\n                        <View key={f.id} style={styles.fileItem}>\n                            <TouchableOpacity style={styles.fileInfo} onPress={() => handleOpen(f.url)}>\n                                <Ionicons name=\"document-text-outline\" size={30} color={colors.secondary} />\n                                <View style={styles.textContainer}>\n                                    <Text style={styles.fileName}>{f.name}</Text>\n                                    <View style={styles.fileMeta}>\n                                        <Text style={styles.fileDate}>{new Date(f.created_at).toLocaleDateString('he-IL')}</Text>\n                                        {f.size && f.size > 0 && (\n                                            <Text style={styles.fileSize}> â€¢ {formatFileSize(f.size)}</Text>\n                                        )}\n                                    </View>\n                                </View>\n                            </TouchableOpacity>\n                            {!viewOnly && (\n                                <TouchableOpacity onPress={() => handleDelete(f)} style={styles.deleteBtn}>\n                                    <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                                </TouchableOpacity>\n                            )}\n                        </View>\n                    ))}\n                    {files.length === 0 && (\n                        <Text style={styles.emptyText}>××™×Ÿ ×§×‘×¦×™× ×‘×ª×™×§×™×™×” ×–×•</Text>\n                    )}\n                </ScrollView>\n            )}\n\n            <Modal visible={isModalVisible && !viewOnly} transparent animationType=\"slide\">\n                <View style={styles.modalOverlay}>\n                    <View style={styles.modalContent}>\n                        <Text style={styles.modalTitle}>×”×•×¡×¤×ª ×§×•×‘×¥</Text>\n\n                        {!selectedFile ? (\n                            <>\n                                <Text style={styles.label}>×‘×—×¨ ×§×•×‘×¥ ××”×˜×œ×¤×•×Ÿ/××—×©×‘</Text>\n                                <TouchableOpacity style={styles.pickFileButton} onPress={handlePickFile}>\n                                    <Ionicons name=\"document-outline\" size={24} color={colors.primary} />\n                                    <Text style={styles.pickFileText}>×‘×—×¨ ×§×•×‘×¥</Text>\n                                </TouchableOpacity>\n                                <Text style={styles.hintText}>××§×¡×™××•× 10MB</Text>\n                            </>\n                        ) : (\n                            <>\n                                <View style={styles.selectedFileContainer}>\n                                    <Ionicons name=\"document\" size={24} color={colors.primary} />\n                                    <View style={styles.selectedFileInfo}>\n                                        <Text style={styles.selectedFileName}>{selectedFile.name}</Text>\n                                        {selectedFile.size && (\n                                            <Text style={styles.selectedFileSize}>{formatFileSize(selectedFile.size)}</Text>\n                                        )}\n                                    </View>\n                                    <TouchableOpacity onPress={() => setSelectedFile(null)}>\n                                        <Ionicons name=\"close-circle\" size={24} color={colors.error} />\n                                    </TouchableOpacity>\n                                </View>\n\n                                {isMutating && uploadProgress > 0 && (\n                                    <View style={styles.progressContainer}>\n                                        <View style={styles.progressBarContainer}>\n                                            <View style={[styles.progressBar, { width: `${uploadProgress}%` }]} />\n                                        </View>\n                                        <Text style={styles.progressText}>{Math.round(uploadProgress)}%</Text>\n                                    </View>\n                                )}\n                            </>\n                        )}\n\n                        <View style={styles.modalActions}>\n                            <TouchableOpacity \n                                onPress={() => {\n                                    setIsModalVisible(false);\n                                    setSelectedFile(null);\n                                    setUploadProgress(0);\n                                }} \n                                style={styles.cancelBtn}\n                                disabled={isMutating}\n                            >\n                                <Text>×‘×™×˜×•×œ</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity \n                                onPress={handleUpload} \n                                style={[styles.saveBtn, (!selectedFile || isMutating) && styles.saveBtnDisabled]} \n                                disabled={!selectedFile || isMutating}\n                            >\n                                {isMutating ? (\n                                    <ActivityIndicator color=\"white\" />\n                                ) : (\n                                    <Text style={{ color: 'white' }}>×”×¢×œ×”</Text>\n                                )}\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                </View>\n            </Modal>\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.backgroundSecondary },\n    header: { padding: 20, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', backgroundColor: colors.background },\n    title: { fontSize: 22, fontWeight: 'bold' },\n    addButton: { flexDirection: 'row', backgroundColor: colors.primary, padding: 8, borderRadius: 8 },\n    addText: { color: 'white', marginLeft: 5, fontWeight: 'bold' },\n    folderBar: { flexDirection: 'row', padding: 15, alignItems: 'center', backgroundColor: '#eef' },\n    folderName: { marginLeft: 10, fontWeight: 'bold', color: colors.primary },\n    list: { padding: 15 },\n    fileItem: { flexDirection: 'row', backgroundColor: 'white', padding: 15, borderRadius: 10, marginBottom: 10, alignItems: 'center', justifyContent: 'space-between' },\n    fileInfo: { flexDirection: 'row', alignItems: 'center', flex: 1 },\n    textContainer: { marginLeft: 15, flex: 1 },\n    fileName: { fontSize: 16, fontWeight: 'bold', textAlign: 'left' },\n    fileMeta: { flexDirection: 'row', alignItems: 'center' },\n    fileDate: { fontSize: 12, color: '#888', textAlign: 'left' },\n    fileSize: { fontSize: 12, color: '#888', textAlign: 'left' },\n    deleteBtn: { padding: 10 },\n    emptyText: { textAlign: 'center', marginTop: 30, color: '#999' },\n    modalOverlay: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n    modalContent: { backgroundColor: 'white', padding: 20, borderRadius: 10 },\n    modalTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },\n    label: { marginBottom: 5, fontWeight: 'bold', textAlign: 'right' },\n    hintText: { fontSize: 12, color: '#888', textAlign: 'center', marginTop: 8 },\n    pickFileButton: { \n        flexDirection: 'row', \n        alignItems: 'center', \n        justifyContent: 'center',\n        borderWidth: 2, \n        borderColor: colors.primary, \n        borderStyle: 'dashed',\n        padding: 20, \n        borderRadius: 10, \n        marginBottom: 15 \n    },\n    pickFileText: { marginLeft: 10, color: colors.primary, fontWeight: 'bold' },\n    selectedFileContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        padding: 15,\n        borderRadius: 10,\n        marginBottom: 15,\n    },\n    selectedFileInfo: { flex: 1, marginLeft: 10 },\n    selectedFileName: { fontSize: 14, fontWeight: 'bold', textAlign: 'right' },\n    selectedFileSize: { fontSize: 12, color: '#888', textAlign: 'right', marginTop: 4 },\n    progressContainer: { marginBottom: 15 },\n    progressBarContainer: {\n        width: '100%',\n        height: 8,\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 4,\n        overflow: 'hidden',\n        marginBottom: 8,\n    },\n    progressBar: {\n        height: '100%',\n        backgroundColor: colors.primary,\n        borderRadius: 4,\n    },\n    progressText: {\n        fontSize: 12,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    input: { borderWidth: 1, borderColor: '#ddd', padding: 10, borderRadius: 5, marginBottom: 15, textAlign: 'right' },\n    modalActions: { flexDirection: 'row', justifyContent: 'space-between', marginTop: 10 },\n    cancelBtn: { padding: 10 },\n    saveBtn: { backgroundColor: colors.primary, padding: 10, borderRadius: 5, width: 100, alignItems: 'center' },\n    saveBtnDisabled: { backgroundColor: colors.textSecondary, opacity: 0.5 },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminMoneyScreen.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":664,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&quot;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&ldquo;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&#34;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&rdquo;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":664,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&quot; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&ldquo; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&#34; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&rdquo; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  Platform,\n  Switch,\n  RefreshControl,\n  Dimensions,\n} from 'react-native';\nimport { NavigationProp, useRoute, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { enhancedDB, wipeAllDataAdmin, DonationData } from '../utils/enhancedDatabaseService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport ScrollContainer from '../components/ScrollContainer';\nimport DatePicker from '../components/DatePicker';\n\ninterface Donation {\n  id: string;\n  type: 'money' | 'time' | 'items' | 'rides';\n  title: string;\n  description?: string;\n  amount?: number;\n  category?: string;\n  createdBy: string;\n  createdAt: string;\n  status?: string;\n  metadata?: Record<string, unknown> | null;\n  is_recurring?: boolean;\n  isRecurring?: boolean;\n}\n\ninterface AdminMoneyScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface DonationFormData {\n  donorName: string;\n  amount: string;\n  category: string;\n  date: string;\n  notes: string;\n  isRecurring: boolean;\n}\n\nconst DONATION_CATEGORIES = [\n  '×›×¡×£',\n  '××•×›×œ',\n  '×‘×’×“×™×',\n  '×¡×¤×¨×™×',\n  '×¨×”×™×˜×™×',\n  '×¨×¤×•××™',\n  '×‘×¢×œ×™ ×—×™×™×',\n  '×“×™×•×¨',\n  '×ª××™×›×”',\n  '×—×™× ×•×š',\n  '×¡×‘×™×‘×”',\n  '×˜×›× ×•×œ×•×’×™×”',\n  '××•×–×™×§×”',\n  '××©×—×§×™×',\n  '××× ×•×ª',\n  '×¡×¤×•×¨×˜',\n  '×›×œ×œ×™',\n];\n\nconst LOG_SOURCE = 'AdminMoneyScreen';\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminMoneyScreen({ navigation }: AdminMoneyScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { isAdmin } = useUser();\n\n  // Ensure top bar and bottom bar are visible in view-only mode\n  useFocusEffect(\n    React.useCallback(() => {\n      if (viewOnly) {\n        (navigation as any).setParams({\n          hideTopBar: false,\n          hideBottomBar: false,\n        });\n      }\n    }, [viewOnly, navigation])\n  );\n  const [donationsList, setDonationsList] = useState<Donation[]>([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [formData, setFormData] = useState<DonationFormData>({\n    donorName: '',\n    amount: '',\n    category: '×›×¡×£',\n    date: new Date().toISOString().split('T')[0],\n    notes: '',\n    isRecurring: false,\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMutating, setIsMutating] = useState(false);\n  const [pollingId, setPollingId] = useState<ReturnType<typeof setInterval> | null>(null);\n  const [isWipeVisible, setIsWipeVisible] = useState(false);\n  const [confirmText, setConfirmText] = useState('');\n  const [isMounted, setIsMounted] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editingDonationId, setEditingDonationId] = useState<string | null>(null);\n\n  useEffect(() => {\n    logger.info(LOG_SOURCE, 'Initializing admin donations screen');\n    loadDonations();\n    // Lightweight polling to approximate real-time updates\n    const id = setInterval(() => {\n      logger.debug(LOG_SOURCE, 'Polling donations tick');\n      loadDonations();\n    }, 5000);\n    setPollingId(id);\n    setIsMounted(true);\n    return () => {\n      if (id) {\n        clearInterval(id);\n        logger.info(LOG_SOURCE, 'Stopped donations polling interval');\n      }\n    };\n  }, []);\n\n  const loadDonations = async (forceRefresh = false) => {\n    logger.info(LOG_SOURCE, 'Loading donations list', { useBackend: USE_BACKEND, forceRefresh });\n    try {\n      setIsLoading(true);\n      if (USE_BACKEND) {\n        const donationsData = await enhancedDB.getDonations({}, forceRefresh);\n        setDonationsList(donationsData as unknown as Donation[]);\n        logger.info(LOG_SOURCE, 'Donations loaded from backend', {\n          count: Array.isArray(donationsData) ? donationsData.length : 0,\n          forceRefresh,\n        });\n      } else {\n        // No backend - show empty state\n        setDonationsList([]);\n        logger.warn(LOG_SOURCE, 'Backend disabled - showing empty donations list');\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error loading donations', { error });\n      // Show empty state on error\n      setDonationsList([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleWipeAll = async () => {\n    logger.warn(LOG_SOURCE, 'Attempting to wipe all donations and data');\n    try {\n      if (!isAdmin) {\n        logger.warn(LOG_SOURCE, 'Wipe all blocked - missing admin permissions');\n        Alert.alert('×©×’×™××”', '×¤×¢×•×œ×” ×–×• ×“×•×¨×©×ª ×”×¨×©××ª ×× ×”×œ');\n        return;\n      }\n      if (confirmText.trim().toUpperCase() !== 'CONFIRM') {\n        logger.warn(LOG_SOURCE, 'Wipe all blocked - confirmation text invalid');\n        Alert.alert('××™××•×ª × ×“×¨×©', '× × ×œ×”×§×œ×™×“ CONFIRM ×‘×× ×’×œ×™×ª ×›×“×™ ×œ××©×¨ ××—×™×§×” ×›×•×œ×œ×ª');\n        return;\n      }\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, 'Sending wipe all request to backend');\n      const res = await wipeAllDataAdmin();\n      if (!res.success) {\n        throw new Error(res.error || 'wipe failed');\n      }\n      setIsWipeVisible(false);\n      setConfirmText('');\n      await loadDonations();\n      logger.info(LOG_SOURCE, 'Wipe all completed successfully');\n      Alert.alert('×‘×•×¦×¢', '×›×œ ×”× ×ª×•× ×™× × ××—×§×• ×‘×”×¦×œ×—×”');\n    } catch (e) {\n      logger.error(LOG_SOURCE, 'Admin wipe error', { error: e });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×›×œ ×”× ×ª×•× ×™×');\n    } finally {\n      setIsMutating(false);\n      logger.debug(LOG_SOURCE, 'Wipe all mutation finished');\n    }\n  };\n\n  const handleAddDonation = () => {\n    logger.info(LOG_SOURCE, 'Opening add donation modal');\n    setIsEditMode(false);\n    setEditingDonationId(null);\n    setFormData({\n      donorName: '',\n      amount: '',\n      category: '×›×¡×£',\n      date: new Date().toISOString().split('T')[0],\n      notes: '',\n      isRecurring: false,\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleEditDonation = (donation: Donation) => {\n    logger.info(LOG_SOURCE, 'Opening edit donation modal', { donationId: donation.id });\n    setIsEditMode(true);\n    setEditingDonationId(donation.id);\n    // × ×™×¡×™×•×Ÿ ×¤×©×•×˜ ×œ×—×œ×¥ ×©× ×ª×•×¨× ××”×›×•×ª×¨×ª \"×ª×¨×•××” ×-<×©×>\"\n    const donorFromTitle =\n      donation.title?.startsWith('×ª×¨×•××” ×-') ? donation.title.replace('×ª×¨×•××” ×-', '') : donation.title || '';\n    // × ×¨××•×œ ×ª××¨×™×š ×‘×˜×•×—: × ×¡×” ×œ×§×—×ª ××ª××¨×™×š ×©× ×‘×—×¨ ×¢×œ ×™×“×™ ×”××©×ª××© (metadata), ××—×¨×ª ×-createdAt\n    let normalizedDate = '';\n    let dateToUse: string | null = null;\n\n    // Try to get date from metadata first (user-selected date)\n    if (donation.metadata && typeof donation.metadata === 'object' && donation.metadata !== null) {\n      const metadata = donation.metadata as Record<string, unknown>;\n      if (metadata.selectedDate && typeof metadata.selectedDate === 'string') {\n        dateToUse = metadata.selectedDate;\n      }\n    }\n\n    // Fallback to createdAt if metadata not available\n    if (!dateToUse) {\n      dateToUse = donation.createdAt;\n    }\n\n    try {\n      const parsed = new Date(dateToUse);\n      normalizedDate = isNaN(parsed.getTime())\n        ? new Date().toISOString().split('T')[0]\n        : parsed.toISOString().split('T')[0];\n    } catch {\n      normalizedDate = new Date().toISOString().split('T')[0];\n    }\n    setFormData({\n      donorName: donorFromTitle,\n      amount: donation.amount ? String(donation.amount) : '',\n      category: donation.category || '×›×œ×œ×™',\n      date: normalizedDate,\n      notes: donation.description || '',\n      isRecurring: Boolean(donation.is_recurring ?? donation.isRecurring ?? false),\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleSaveDonation = async () => {\n    // Validation\n    if (!formData.donorName.trim()) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×©× ×ª×•×¨×');\n      return;\n    }\n    if (!formData.amount.trim() || isNaN(Number(formData.amount)) || Number(formData.amount) <= 0) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×¡×›×•× ×ª×§×™×Ÿ');\n      return;\n    }\n\n    // Validate date - must be in YYYY-MM-DD format and valid date\n    if (!formData.date || !formData.date.trim()) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×ª××¨×™×š');\n      return;\n    }\n\n    // Check if date is in correct format (YYYY-MM-DD)\n    const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!dateRegex.test(formData.date.trim())) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×ª××¨×™×š ×‘×¤×•×¨××˜ YYYY-MM-DD (×œ××©×œ: 2024-01-15)');\n      return;\n    }\n\n    // Check if date is valid\n    const dateParts = formData.date.trim().split('-');\n    const year = parseInt(dateParts[0], 10);\n    const month = parseInt(dateParts[1], 10);\n    const day = parseInt(dateParts[2], 10);\n    const testDate = new Date(year, month - 1, day);\n\n    if (\n      testDate.getFullYear() !== year ||\n      testDate.getMonth() !== month - 1 ||\n      testDate.getDate() !== day\n    ) {\n      Alert.alert('×©×’×™××”', '×”×ª××¨×™×š ×©×”×•×–×Ÿ ×œ× ×ª×§×™×Ÿ. ×× × ×”×–×Ÿ ×ª××¨×™×š ×—×•×§×™');\n      return;\n    }\n\n    try {\n      setIsMutating(true);\n\n      // Convert date from YYYY-MM-DD to ISO string format\n      let createdAtISO: string;\n      try {\n        const dateParts = formData.date.trim().split('-');\n        const year = parseInt(dateParts[0], 10);\n        const month = parseInt(dateParts[1], 10);\n        const day = parseInt(dateParts[2], 10);\n        const donationDate = new Date(year, month - 1, day);\n        // Set time to midnight UTC to ensure consistent date\n        createdAtISO = donationDate.toISOString();\n      } catch (error) {\n        logger.warn(LOG_SOURCE, 'Error parsing date, using current date', { error, date: formData.date });\n        createdAtISO = new Date().toISOString();\n      }\n\n      const basePayload = {\n        title: `×ª×¨×•××” ×-${formData.donorName}`,\n        description: formData.notes || '',\n        amount: Number(formData.amount),\n        category: formData.category,\n        isRecurring: formData.isRecurring,\n        // Store the selected date in metadata so we can use it later\n        metadata: {\n          selectedDate: createdAtISO,\n        },\n      };\n\n      if (isEditMode && editingDonationId) {\n        logger.info(LOG_SOURCE, 'Updating donation', { editingDonationId, selectedDate: createdAtISO });\n        const res = await enhancedDB.updateDonation(editingDonationId, basePayload as Partial<DonationData>);\n        if (!res.success) {\n          throw new Error(res.error || 'update failed');\n        }\n        // × ×§×” ×§××© ×›×“×™ ×œ×× ×•×¢ × ×ª×•× ×™× ××™×•×©× ×™×\n        await enhancedDB.clearAllCache();\n      } else {\n        logger.info(LOG_SOURCE, 'Creating donation', {\n          donorName: formData.donorName.trim(),\n          amount: Number(formData.amount),\n          category: formData.category,\n          selectedDate: createdAtISO,\n        });\n        const res = await enhancedDB.createDonation({\n          type: 'money' as const,\n          ...basePayload,\n        });\n        if (!res.success) {\n          throw new Error(res.error || 'create failed');\n        }\n        await enhancedDB.clearAllCache();\n      }\n      // Always refetch from server to ensure canonical data and IDs\n      await loadDonations(true);\n      logger.info(LOG_SOURCE, 'Donation saved successfully');\n\n      // Reset form\n      setFormData({\n        donorName: '',\n        amount: '',\n        category: '×›×¡×£',\n        date: new Date().toISOString().split('T')[0],\n        notes: '',\n        isRecurring: false,\n      });\n\n      setIsModalVisible(false);\n      setIsEditMode(false);\n      setEditingDonationId(null);\n      Alert.alert('×”×¦×œ×—×”', isEditMode ? '×”×ª×¨×•××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”' : '×”×ª×¨×•××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error saving donation', { error });\n      Alert.alert('×©×’×™××”', isEditMode ? '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×¢×“×›×Ÿ ××ª ×”×ª×¨×•××”' : '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×©××•×¨ ××ª ×”×ª×¨×•××”');\n    } finally {\n      setIsMutating(false);\n    }\n  };\n\n  const handleDeleteDonation = async (donationId: string) => {\n    logger.info(LOG_SOURCE, 'Prompting delete donation', { donationId });\n\n    // Use confirm for web compatibility\n    const confirmed = Platform.OS === 'web'\n      ? (typeof window !== 'undefined' && window.confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×ª×¨×•××” ×–×•?'))\n      : await new Promise<boolean>((resolve) => {\n        Alert.alert(\n          '××—×™×§×ª ×ª×¨×•××”',\n          '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×ª×¨×•××” ×–×•?',\n          [\n            {\n              text: '×‘×™×˜×•×œ',\n              style: 'cancel',\n              onPress: () => resolve(false)\n            },\n            {\n              text: '××—×§',\n              style: 'destructive',\n              onPress: () => resolve(true)\n            },\n          ]\n        );\n      });\n\n    if (!confirmed) {\n      logger.info(LOG_SOURCE, 'Delete cancelled by user', { donationId });\n      return;\n    }\n\n    logger.info(LOG_SOURCE, 'Delete confirmed, starting deletion', { donationId });\n    // Optimistic UI with rollback\n    const prev = donationsList;\n    setDonationsList((p) => p.filter((d) => d.id !== donationId));\n\n    try {\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, 'Calling deleteDonation API', { donationId });\n      const res = await enhancedDB.deleteDonation(donationId);\n\n      logger.info(LOG_SOURCE, 'deleteDonation API response', { donationId, success: res.success, error: res.error });\n\n      if (!res.success) {\n        throw new Error(res.error || 'delete failed');\n      }\n\n      // × ×§×” ×§××© ×›×“×™ ×œ×× ×•×¢ × ×ª×•× ×™× ××™×•×©× ×™×\n      logger.info(LOG_SOURCE, 'Clearing cache after deletion', { donationId });\n      await enhancedDB.clearAllCache();\n\n      // Force refresh from server, ignoring cache\n      logger.info(LOG_SOURCE, 'Loading donations with force refresh', { donationId });\n      await loadDonations(true);\n\n      logger.info(LOG_SOURCE, 'Donation deleted successfully', { donationId });\n      Alert.alert('×”×¦×œ×—×”', '×”×ª×¨×•××” × ××—×§×” ×‘×”×¦×œ×—×”');\n    } catch (e) {\n      logger.error(LOG_SOURCE, 'Error deleting donation', { donationId, error: e, errorMessage: e instanceof Error ? e.message : String(e) });\n      setDonationsList(prev); // rollback\n      Alert.alert('×©×’×™××”', `×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×”×ª×¨×•××”: ${e instanceof Error ? e.message : String(e)}`);\n    } finally {\n      setIsMutating(false);\n      logger.debug(LOG_SOURCE, 'Delete donation mutation finished', { donationId });\n    }\n  };\n\n  const formatDate = (donation: Donation) => {\n    try {\n      // Try to get date from metadata first (user-selected date)\n      let dateString: string | null | undefined = null;\n      if (donation.metadata && typeof donation.metadata === 'object' && donation.metadata !== null) {\n        const metadata = donation.metadata as Record<string, unknown>;\n        if (metadata.selectedDate && typeof metadata.selectedDate === 'string') {\n          dateString = metadata.selectedDate;\n        }\n      }\n\n      // Fallback to createdAt if metadata not available\n      if (!dateString) {\n        dateString = donation.createdAt;\n      }\n\n      if (!dateString || typeof dateString !== 'string' || dateString.trim() === '') {\n        return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n      }\n      const date = new Date(dateString);\n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n      }\n      return date.toLocaleDateString('he-IL');\n    } catch {\n      return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n    }\n  };\n\n  const formatAmount = (amount?: number) => {\n    if (!amount) return '×œ× ×¦×•×™×Ÿ';\n    return `â‚ª${amount.toLocaleString('he-IL')}`;\n  };\n\n  const renderDonationItem = ({ item }: { item: Donation }) => (\n    <View style={styles.donationCard}>\n      <View style={styles.donationHeader}>\n        <View style={styles.donationInfo}>\n          <Text style={styles.donationTitle}>{item.title}</Text>\n          <Text style={styles.donationCategory}>{item.category}</Text>\n        </View>\n        {!viewOnly && (\n          <View style={{ flexDirection: 'row', alignItems: 'center', gap: LAYOUT_CONSTANTS.SPACING.XS }}>\n            <TouchableOpacity\n              onPress={() => handleEditDonation(item)}\n              style={styles.iconButton}\n              hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}\n            >\n              <Ionicons name=\"create-outline\" size={20} color={colors.textPrimary} />\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => handleDeleteDonation(item.id)}\n              style={styles.deleteButton}\n              hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}\n            >\n              <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n      <View style={styles.donationDetails}>\n        <View style={styles.detailRow}>\n          <Ionicons name=\"cash-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.detailText}>{isMounted ? formatAmount(item.amount) : ''}</Text>\n        </View>\n        <View style={styles.detailRow}>\n          <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.detailText}>{isMounted ? formatDate(item) : ''}</Text>\n        </View>\n        {Boolean(item.description?.trim()) && (\n          <View style={styles.detailRow}>\n            <Ionicons name=\"document-text-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.detailText} numberOfLines={2}>\n              {item.description}\n            </Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <Text style={styles.title}>× ×™×”×•×œ ×ª×¨×•××•×ª</Text>\n        </View>\n\n        {isLoading && donationsList.length === 0 ? (\n          <View style={styles.loadingContainer}>\n            <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×ª×¨×•××•×ª...</Text>\n          </View>\n        ) : donationsList.length === 0 ? (\n          <View style={styles.emptyContainer}>\n            <Ionicons name=\"heart-outline\" size={64} color={colors.textSecondary} />\n            <Text style={styles.emptyText}>××™×Ÿ ×ª×¨×•××•×ª ×¢×“×™×™×Ÿ</Text>\n            <Text style={styles.emptySubtext}>×”×•×¡×£ ×ª×¨×•××” ×—×“×©×” ×›×“×™ ×œ×”×ª×—×™×œ</Text>\n          </View>\n        ) : (\n          <ScrollContainer\n            contentStyle={styles.listContent}\n            showsVerticalScrollIndicator={false}\n            refreshControl={\n              <RefreshControl\n                refreshing={isLoading || isMutating}\n                onRefresh={loadDonations}\n                tintColor={colors.secondary}\n              />\n            }\n          >\n            {donationsList.map((item) => (\n              <React.Fragment key={item.id}>\n                {renderDonationItem({ item })}\n              </React.Fragment>\n            ))}\n          </ScrollContainer>\n        )}\n      </View>\n\n      {/* Floating Add Donation Button - Always visible on top */}\n      {!viewOnly && (\n        <TouchableOpacity\n          style={styles.fabButton}\n          onPress={handleAddDonation}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"add\" size={28} color=\"white\" />\n          <Text style={styles.fabButtonText}>×”×•×¡×£ ×ª×¨×•××”</Text>\n        </TouchableOpacity>\n      )}\n\n\n      {/* Add Donation Modal */}\n      <Modal\n        visible={isModalVisible && !viewOnly}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsModalVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>{isEditMode ? '×¢×¨×•×š ×ª×¨×•××”' : '×”×•×¡×£ ×ª×¨×•××” ×—×“×©×”'}</Text>\n              <TouchableOpacity\n                onPress={() => setIsModalVisible(false)}\n                style={styles.closeButton}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×©× ×”×ª×•×¨× *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.donorName}\n                  onChangeText={(text) => setFormData({ ...formData, donorName: text })}\n                  placeholder=\"×”×–×Ÿ ×©× ×ª×•×¨×\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×¡×›×•× (â‚ª) *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.amount}\n                  onChangeText={(text) => setFormData({ ...formData, amount: text })}\n                  placeholder=\"×”×–×Ÿ ×¡×›×•×\"\n                  keyboardType=\"numeric\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×§×˜×’×•×¨×™×”</Text>\n                <View style={styles.categoryContainer}>\n                  {DONATION_CATEGORIES.map((category) => (\n                    <TouchableOpacity\n                      key={category}\n                      style={[\n                        styles.categoryChip,\n                        formData.category === category && styles.categoryChipSelected,\n                      ]}\n                      onPress={() => setFormData({ ...formData, category })}\n                    >\n                      <Text\n                        style={[\n                          styles.categoryChipText,\n                          formData.category === category && styles.categoryChipTextSelected,\n                        ]}\n                      >\n                        {category}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª××¨×™×š *</Text>\n                <DatePicker\n                  value={formData.date ? new Date(formData.date + 'T00:00:00') : new Date()}\n                  onChange={(date) => {\n                    if (date && date instanceof Date && !isNaN(date.getTime())) {\n                      const dateStr = date.toISOString().split('T')[0];\n                      setFormData({ ...formData, date: dateStr });\n                    }\n                  }}\n                  placeholder=\"×‘×—×¨ ×ª××¨×™×š\"\n                />\n              </View>\n\n              <View style={[styles.formGroup, styles.recurringGroup]}>\n                <View style={styles.recurringRow}>\n                  <Text style={styles.label}>×¡××Ÿ ×›×”×•×¨××ª ×§×‘×¢</Text>\n                  <Switch\n                    value={formData.isRecurring}\n                    onValueChange={(value) => setFormData({ ...formData, isRecurring: value })}\n                    thumbColor={colors.white}\n                    trackColor={{ false: colors.border, true: colors.info }}\n                  />\n                </View>\n                <Text style={styles.helperText}>\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                </Text>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×”×¢×¨×•×ª</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={formData.notes}\n                  onChangeText={(text) => setFormData({ ...formData, notes: text })}\n                  placeholder=\"×”×¢×¨×•×ª × ×•×¡×¤×•×ª (××•×¤×¦×™×•× ×œ×™)\"\n                  multiline\n                  numberOfLines={4}\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n            </ScrollView>\n\n            <View style={styles.modalFooter}>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setIsModalVisible(false)}\n              >\n                <Text style={styles.cancelButtonText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.saveButton]}\n                onPress={handleSaveDonation}\n                disabled={isMutating}\n              >\n                <Text style={styles.saveButtonText}>{isMutating ? (isEditMode ? '××¢×“×›×Ÿ...' : '×©×•××¨...') : (isEditMode ? '×¢×“×›×Ÿ' : '×©××•×¨')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Wipe All Confirmation Modal */}\n      <Modal\n        visible={isWipeVisible}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsWipeVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>××™×©×•×¨ ××—×™×§×ª ×›×œ ×”× ×ª×•× ×™×</Text>\n              <TouchableOpacity\n                onPress={() => setIsWipeVisible(false)}\n                style={styles.closeButton}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n            <View style={styles.modalBody}>\n              <Text style={{ color: colors.textPrimary, marginBottom: LAYOUT_CONSTANTS.SPACING.SM }}>\n                ×¤×¢×•×œ×” ××¡×•×›× ×ª! ××—×™×§×ª ×›×œ ×”× ×ª×•× ×™× ×ª×‘×•×¦×¢ ×‘××•×¤×Ÿ ×¡×•×¤×™ ×‘×¦×“ ×”×©×¨×ª. ×›×“×™ ×œ××©×¨, ×”×§×œ×“/×™ CONFIRM:\n              </Text>\n              <TextInput\n                style={styles.input}\n                value={confirmText}\n                onChangeText={setConfirmText}\n                placeholder=\"CONFIRM\"\n                autoCapitalize=\"characters\"\n                placeholderTextColor={colors.textTertiary}\n              />\n            </View>\n            <View style={styles.modalFooter}>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setIsWipeVisible(false)}\n              >\n                <Text style={styles.cancelButtonText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.saveButton, { backgroundColor: colors.error }]}\n                onPress={handleWipeAll}\n                disabled={isMutating}\n              >\n                <Text style={styles.saveButtonText}>{isMutating ? '××•×—×§...' : '××—×§ ×”×›×œ'}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  content: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    alignSelf: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.secondary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  addButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  dangerButton: {\n    backgroundColor: colors.error,\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  listContent: {\n    paddingBottom: 120, // ××§×•× ×œ×›×¤×ª×•×¨ FAB + ××¨×•×•×— × ×•×¡×£\n  },\n  donationCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  donationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  donationInfo: {\n    flex: 1,\n  },\n  donationTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  donationCategory: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  deleteButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  iconButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  donationDetails: {\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderTopLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderTopRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modalBody: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    maxHeight: 500,\n  },\n  formGroup: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  recurringGroup: {\n    borderTopWidth: 1,\n    borderTopColor: colors.backgroundTertiary,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  recurringRow: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 6,\n  },\n  helperText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  categoryContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryChip: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  categoryChipSelected: {\n    backgroundColor: colors.secondary,\n    borderColor: colors.secondary,\n  },\n  categoryChipText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  categoryChipTextSelected: {\n    color: 'white',\n    fontWeight: '600',\n  },\n  modalFooter: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  modalButton: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  saveButton: {\n    backgroundColor: colors.secondary,\n  },\n  saveButtonText: {\n    fontSize: FontSizes.medium,\n    color: 'white',\n    fontWeight: '600',\n  },\n  fabButton: {\n    ...(Platform.OS === 'web' ? { position: 'fixed' as any } : { position: 'absolute' }),\n    right: LAYOUT_CONSTANTS.SPACING.XL,\n    bottom: 200, // ××¨×•×•×— ××”-bottom bar\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n    backgroundColor: colors.secondary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 6,\n    elevation: 10,\n    opacity: 0.8,\n    zIndex: 1000,\n    minWidth: 140,\n  },\n  fabButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminOrgApprovalsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminPeopleScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadMembers'. Either include it or remove the dependency array.","line":83,"column":6,"nodeType":"ArrayExpression","endLine":83,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [statusFilter, searchQuery, loadMembers]","fix":{"range":[2416,2443],"text":"[statusFilter, searchQuery, loadMembers]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\n\ninterface AdminPeopleScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface CommunityMember {\n  id: string;\n  name: string;\n  role: string; // ×”×ª×¤×§×™×“/×”×ª×¨×•××” ×©×œ×• ×œ×§×”×™×œ×”\n  description?: string;\n  contact_info?: {\n    email?: string;\n    phone?: string;\n    [key: string]: any;\n  };\n  status: 'active' | 'inactive';\n  created_by?: string;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface MemberFormData {\n  name: string;\n  role: string;\n  description: string;\n  email: string;\n  phone: string;\n  status: 'active' | 'inactive';\n}\n\nconst LOG_SOURCE = 'AdminPeopleScreen';\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminPeopleScreen({ navigation }: AdminPeopleScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser, isAdmin } = useUser();\n  const [membersList, setMembersList] = useState<CommunityMember[]>([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editingMemberId, setEditingMemberId] = useState<string | null>(null);\n  const [formData, setFormData] = useState<MemberFormData>({\n    name: '',\n    role: '',\n    description: '',\n    email: '',\n    phone: '',\n    status: 'active',\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMutating, setIsMutating] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\n\n  useEffect(() => {\n    logger.info(LOG_SOURCE, 'Initializing admin people screen');\n    loadMembers();\n  }, [statusFilter, searchQuery]);\n\n  const loadMembers = async () => {\n    logger.info(LOG_SOURCE, 'Loading community members list');\n    try {\n      setIsLoading(true);\n      const filters: { status?: 'active' | 'inactive'; search?: string } = {};\n\n      if (statusFilter !== 'all') {\n        filters.status = statusFilter;\n      }\n\n      if (searchQuery.trim()) {\n        filters.search = searchQuery.trim();\n      }\n\n      const response = await apiService.getCommunityMembers(filters);\n\n      if (response.success && Array.isArray(response.data)) {\n        setMembersList(response.data);\n        logger.info(LOG_SOURCE, 'Members loaded successfully', {\n          count: response.data.length,\n        });\n      } else {\n        logger.warn(LOG_SOURCE, 'Failed to load members', { response });\n        setMembersList([]);\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error loading members', { error });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×¨×©×™××ª ×”×× ×©×™×');\n      setMembersList([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddMember = () => {\n    logger.info(LOG_SOURCE, 'Opening add member modal');\n    setIsEditMode(false);\n    setEditingMemberId(null);\n    setFormData({\n      name: '',\n      role: '',\n      description: '',\n      email: '',\n      phone: '',\n      status: 'active',\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleEditMember = (member: CommunityMember) => {\n    logger.info(LOG_SOURCE, 'Opening edit member modal', { memberId: member.id });\n    setIsEditMode(true);\n    setEditingMemberId(member.id);\n    setFormData({\n      name: member.name || '',\n      role: member.role || '',\n      description: member.description || '',\n      email: member.contact_info?.email || '',\n      phone: member.contact_info?.phone || '',\n      status: member.status || 'active',\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleDeleteMember = (member: CommunityMember) => {\n    Alert.alert(\n      '××—×™×§×ª ×¨×©×•××”',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ${member.name}?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        {\n          text: '××—×§',\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              setIsMutating(true);\n              logger.info(LOG_SOURCE, 'Deleting member', { memberId: member.id });\n              const response = await apiService.deleteCommunityMember(member.id);\n\n              if (response.success) {\n                logger.info(LOG_SOURCE, 'Member deleted successfully');\n                await loadMembers();\n                Alert.alert('×‘×•×¦×¢', '×”×¨×©×•××” × ××—×§×” ×‘×”×¦×œ×—×”');\n              } else {\n                throw new Error(response.error || 'Failed to delete member');\n              }\n            } catch (error) {\n              logger.error(LOG_SOURCE, 'Error deleting member', { error });\n              Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×”×¨×©×•××”');\n            } finally {\n              setIsMutating(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const handleSaveMember = async () => {\n    if (!formData.name.trim() || !formData.role.trim()) {\n      Alert.alert('×©×’×™××”', '×©× ×•×ª×¤×§×™×“ ×”× ×©×“×•×ª ×—×•×‘×”');\n      return;\n    }\n\n    try {\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, isEditMode ? 'Updating member' : 'Creating member', {\n        isEditMode,\n        memberId: editingMemberId,\n      });\n\n      const memberData: any = {\n        name: formData.name.trim(),\n        role: formData.role.trim(),\n        description: formData.description.trim() || undefined,\n        status: formData.status,\n        contact_info: {},\n      };\n\n      if (formData.email.trim()) {\n        memberData.contact_info.email = formData.email.trim();\n      }\n      if (formData.phone.trim()) {\n        memberData.contact_info.phone = formData.phone.trim();\n      }\n\n      if (Object.keys(memberData.contact_info).length === 0) {\n        memberData.contact_info = undefined;\n      }\n\n      if (selectedUser?.id) {\n        memberData.created_by = selectedUser.id;\n      }\n\n      let response;\n      if (isEditMode && editingMemberId) {\n        response = await apiService.updateCommunityMember(editingMemberId, memberData);\n      } else {\n        response = await apiService.createCommunityMember(memberData);\n      }\n\n      if (response.success) {\n        logger.info(LOG_SOURCE, 'Member saved successfully');\n        setIsModalVisible(false);\n        await loadMembers();\n        Alert.alert('×‘×•×¦×¢', isEditMode ? '×”×¨×©×•××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”' : '×”×¨×©×•××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');\n      } else {\n        throw new Error(response.error || 'Failed to save member');\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error saving member', { error });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×©××•×¨ ××ª ×”×¨×©×•××”');\n    } finally {\n      setIsMutating(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('he-IL', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n      });\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>× ×™×”×•×œ ×× ×©×™×</Text>\n        <TouchableOpacity\n          style={styles.addButton}\n          onPress={viewOnly ? undefined : handleAddMember}\n          disabled={viewOnly || isMutating}\n        >\n          <Ionicons name=\"add\" size={24} color=\"white\" />\n          <Text style={styles.addButtonText}>×”×•×¡×£ ×¨×©×•××”</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Filters */}\n      <View style={styles.filtersContainer}>\n        <View style={styles.searchContainer}>\n          <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholder=\"×—×¤×© ×œ×¤×™ ×©×, ×ª×¤×§×™×“ ××• ×ª×™××•×¨...\"\n            placeholderTextColor={colors.textTertiary}\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity onPress={() => setSearchQuery('')} style={styles.clearButton}>\n              <Ionicons name=\"close-circle\" size={20} color={colors.textSecondary} />\n            </TouchableOpacity>\n          )}\n        </View>\n\n        <View style={styles.statusFilterContainer}>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'all' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('all')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'all' && styles.filterButtonTextActive]}>\n              ×”×›×œ\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'active' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('active')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'active' && styles.filterButtonTextActive]}>\n              ×¤×¢×™×œ\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'inactive' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('inactive')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'inactive' && styles.filterButtonTextActive]}>\n              ×œ× ×¤×¢×™×œ\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Members List */}\n      {isLoading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n          <Text style={styles.loadingText}>×˜×•×¢×Ÿ...</Text>\n        </View>\n      ) : membersList.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"people-outline\" size={64} color={colors.textSecondary} />\n          <Text style={styles.emptyText}>××™×Ÿ ×¨×©×•××•×ª</Text>\n          <Text style={styles.emptySubtext}>\n            {searchQuery || statusFilter !== 'all'\n              ? '×œ× × ××¦××• ×¨×©×•××•×ª ×”×ª×•×××•×ª ×œ×—×™×¤×•×©'\n              : '×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¨×©×•××”\" ×›×“×™ ×œ×”×ª×—×™×œ'}\n          </Text>\n        </View>\n      ) : (\n        <ScrollView\n          style={styles.listContainer}\n          contentContainerStyle={{\n            flexGrow: 1,\n            minHeight: '150%' // Ensure content is always scrollable\n          }}\n          refreshControl={\n            <RefreshControl refreshing={isLoading} onRefresh={loadMembers} />\n          }\n        >\n          {membersList.map((member) => (\n            <View key={member.id} style={styles.memberCard}>\n              <View style={styles.memberHeader}>\n                <View style={styles.memberInfo}>\n                  <Text style={styles.memberName}>{member.name}</Text>\n                  <View style={styles.memberMeta}>\n                    <View style={[styles.statusBadge, member.status === 'active' ? styles.statusBadgeActive : styles.statusBadgeInactive]}>\n                      <Text style={[styles.statusText, member.status === 'active' ? styles.statusTextActive : styles.statusTextInactive]}>\n                        {member.status === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                      </Text>\n                    </View>\n                    <Text style={styles.memberDate}>{formatDate(member.created_at)}</Text>\n                  </View>\n                </View>\n                <View style={styles.memberActions}>\n                  {!viewOnly && (\n                    <>\n                      <TouchableOpacity\n                        style={styles.actionButton}\n                        onPress={() => handleEditMember(member)}\n                        disabled={isMutating}\n                      >\n                        <Ionicons name=\"create-outline\" size={20} color={colors.primary} />\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        style={styles.actionButton}\n                        onPress={() => handleDeleteMember(member)}\n                        disabled={isMutating}\n                      >\n                        <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                      </TouchableOpacity>\n                    </>\n                  )}\n                </View>\n              </View>\n\n              <View style={styles.memberDetails}>\n                <View style={styles.detailRow}>\n                  <Ionicons name=\"briefcase-outline\" size={16} color={colors.textSecondary} />\n                  <Text style={styles.detailLabel}>×ª×¤×§×™×“/×ª×¨×•××”:</Text>\n                  <Text style={styles.detailValue}>{member.role}</Text>\n                </View>\n\n                {member.description && (\n                  <View style={styles.detailRow}>\n                    <Ionicons name=\"document-text-outline\" size={16} color={colors.textSecondary} />\n                    <Text style={styles.detailValue} numberOfLines={2}>{member.description}</Text>\n                  </View>\n                )}\n\n                {(member.contact_info?.email || member.contact_info?.phone) && (\n                  <View style={styles.contactInfo}>\n                    {member.contact_info?.email && (\n                      <View style={styles.detailRow}>\n                        <Ionicons name=\"mail-outline\" size={16} color={colors.textSecondary} />\n                        <Text style={styles.detailValue}>{member.contact_info.email}</Text>\n                      </View>\n                    )}\n                    {member.contact_info?.phone && (\n                      <View style={styles.detailRow}>\n                        <Ionicons name=\"call-outline\" size={16} color={colors.textSecondary} />\n                        <Text style={styles.detailValue}>{member.contact_info.phone}</Text>\n                      </View>\n                    )}\n                  </View>\n                )}\n              </View>\n            </View>\n          ))}\n        </ScrollView>\n      )}\n\n      {/* Add/Edit Modal */}\n      <Modal\n        visible={isModalVisible && !viewOnly}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsModalVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>\n                {isEditMode ? '×¢×¨×•×š ×¨×©×•××”' : '×”×•×¡×£ ×¨×©×•××” ×—×“×©×”'}\n              </Text>\n              <TouchableOpacity\n                onPress={() => setIsModalVisible(false)}\n                style={styles.closeButton}\n                disabled={isMutating}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×©× *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.name}\n                  onChangeText={(text) => setFormData({ ...formData, name: text })}\n                  placeholder=\"×”×–×Ÿ ×©×\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª×¤×§×™×“/×ª×¨×•××” ×œ×§×”×™×œ×” *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.role}\n                  onChangeText={(text) => setFormData({ ...formData, role: text })}\n                  placeholder=\"×”×–×Ÿ ×ª×¤×§×™×“ ××• ×ª×¨×•××”\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª×™××•×¨</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={formData.description}\n                  onChangeText={(text) => setFormData({ ...formData, description: text })}\n                  placeholder=\"×ª×™××•×¨ × ×•×¡×£ ×¢×œ ×”×ª×¨×•××” (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  multiline\n                  numberOfLines={4}\n                  textAlignVertical=\"top\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>××™××™×™×œ</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.email}\n                  onChangeText={(text) => setFormData({ ...formData, email: text })}\n                  placeholder=\"××™××™×™×œ (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×˜×œ×¤×•×Ÿ</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.phone}\n                  onChangeText={(text) => setFormData({ ...formData, phone: text })}\n                  placeholder=\"×˜×œ×¤×•×Ÿ (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  keyboardType=\"phone-pad\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×¡×˜×˜×•×¡</Text>\n                <View style={styles.statusSelector}>\n                  <TouchableOpacity\n                    style={[\n                      styles.statusOption,\n                      formData.status === 'active' && styles.statusOptionActive,\n                    ]}\n                    onPress={() => setFormData({ ...formData, status: 'active' })}\n                  >\n                    <Text\n                      style={[\n                        styles.statusOptionText,\n                        formData.status === 'active' && styles.statusOptionTextActive,\n                      ]}\n                    >\n                      ×¤×¢×™×œ\n                    </Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[\n                      styles.statusOption,\n                      formData.status === 'inactive' && styles.statusOptionActive,\n                    ]}\n                    onPress={() => setFormData({ ...formData, status: 'inactive' })}\n                  >\n                    <Text\n                      style={[\n                        styles.statusOptionText,\n                        formData.status === 'inactive' && styles.statusOptionTextActive,\n                      ]}\n                    >\n                      ×œ× ×¤×¢×™×œ\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              <TouchableOpacity\n                style={[styles.saveButton, isMutating && styles.saveButtonDisabled]}\n                onPress={handleSaveMember}\n                disabled={isMutating}\n              >\n                {isMutating ? (\n                  <ActivityIndicator size=\"small\" color=\"white\" />\n                ) : (\n                  <Text style={styles.saveButtonText}>\n                    {isEditMode ? '×¢×“×›×Ÿ' : '×©××•×¨'}\n                  </Text>\n                )}\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.primary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  addButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  filtersContainer: {\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  searchIcon: {\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  clearButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statusFilterContainer: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  filterButton: {\n    flex: 1,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n  },\n  filterButtonActive: {\n    backgroundColor: colors.primary,\n  },\n  filterButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  filterButtonTextActive: {\n    color: 'white',\n    fontWeight: '600',\n  },\n  listContainer: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  memberCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  memberHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  memberInfo: {\n    flex: 1,\n  },\n  memberName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  memberMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statusBadge: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingVertical: 2,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  statusBadgeActive: {\n    backgroundColor: colors.successLight,\n  },\n  statusBadgeInactive: {\n    backgroundColor: colors.errorLight,\n  },\n  statusText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  statusTextActive: {\n    color: colors.success,\n  },\n  statusTextInactive: {\n    color: colors.error,\n  },\n  memberDate: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  memberActions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  actionButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  memberDetails: {\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  detailValue: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  contactInfo: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.XS,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderTopLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderTopRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modalBody: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  formGroup: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  statusSelector: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statusOption: {\n    flex: 1,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    borderWidth: 2,\n    borderColor: 'transparent',\n  },\n  statusOptionActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  statusOptionText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  statusOptionTextActive: {\n    color: 'white',\n  },\n  saveButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminReviewScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTableRowsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTablesScreen.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":289,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &quot;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &ldquo;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &#34;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &rdquo;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":289,"column":66,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&quot; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&ldquo; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&#34; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&rdquo; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":396,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &quot;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &ldquo;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &#34;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &rdquo;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":396,"column":87,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&quot; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&ldquo; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&#34; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&rdquo; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n  FlatList,\n  Platform,\n} from 'react-native';\nimport { NavigationProp } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { apiService, ApiResponse } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminTablesScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface TableColumn {\n  id: string;\n  name: string;\n  data_type: 'text' | 'number' | 'date';\n  is_required: boolean;\n  display_order: number;\n}\n\ninterface AdminTable {\n  id: string;\n  name: string;\n  description?: string;\n  created_by?: string;\n  created_at: string;\n  columns?: TableColumn[];\n  row_count?: number;\n}\n\ninterface ColumnForm {\n  name: string;\n  data_type: 'text' | 'number' | 'date';\n  is_required: boolean;\n}\n\nexport default function AdminTablesScreen({ navigation }: AdminTablesScreenProps) {\n  useAdminProtection();\n  const { selectedUser } = useUser();\n  const [tables, setTables] = useState<AdminTable[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n\n  // Form state\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    columns: [] as ColumnForm[],\n  });\n\n  const fetchTables = useCallback(async () => {\n    setLoading(true);\n    try {\n      const res: ApiResponse<AdminTable[]> = await apiService.adminTables.getAll();\n      if (res.success && res.data) {\n        setTables(res.data);\n      } else {\n        Alert.alert('×©×’×™××”', res.error || '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×˜×‘×œ××•×ª');\n      }\n    } catch (error) {\n      console.error('Error fetching tables:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×˜×‘×œ××•×ª');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchTables();\n  }, [fetchTables]);\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      columns: [],\n    });\n  };\n\n  const addColumn = () => {\n    setFormData({\n      ...formData,\n      columns: [\n        ...formData.columns,\n        { name: '', data_type: 'text', is_required: false },\n      ],\n    });\n  };\n\n  const removeColumn = (index: number) => {\n    setFormData({\n      ...formData,\n      columns: formData.columns.filter((_, i) => i !== index),\n    });\n  };\n\n  const updateColumn = (index: number, field: keyof ColumnForm, value: any) => {\n    const newColumns = [...formData.columns];\n    newColumns[index] = { ...newColumns[index], [field]: value };\n    setFormData({ ...formData, columns: newColumns });\n  };\n\n  const handleCreateTable = async () => {\n    if (!formData.name.trim()) {\n      Alert.alert('×©×’×™××”', '×©× ×”×˜×‘×œ×” ×”×•× ×—×•×‘×”');\n      return;\n    }\n\n    if (formData.columns.length === 0) {\n      Alert.alert('×©×’×™××”', '×—×™×™×‘ ×œ×”×’×“×™×¨ ×œ×¤×—×•×ª ×¢××•×“×” ××—×ª');\n      return;\n    }\n\n    // Validate columns\n    for (const col of formData.columns) {\n      if (!col.name.trim()) {\n        Alert.alert('×©×’×™××”', '×›×œ ×”×¢××•×“×•×ª ×¦×¨×™×›×•×ª ×©×');\n        return;\n      }\n    }\n\n    // Check for duplicate column names\n    const columnNames = formData.columns.map(c => c.name.trim());\n    if (new Set(columnNames).size !== columnNames.length) {\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×”×’×“×™×¨ ×¢××•×“×•×ª ×¢× ××•×ª×• ×©×');\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const res: ApiResponse<AdminTable> = await apiService.adminTables.create({\n        name: formData.name.trim(),\n        description: formData.description.trim() || undefined,\n        columns: formData.columns.map((col, index) => ({\n          name: col.name.trim(),\n          data_type: col.data_type,\n          is_required: col.is_required,\n          display_order: index,\n        })),\n      });\n\n      if (res.success && res.data) {\n        setShowCreateModal(false);\n        resetForm();\n        // Refresh tables list\n        await fetchTables();\n      } else {\n        Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘×™×¦×™×¨×ª ×˜×‘×œ×”');\n      }\n    } catch (error) {\n      console.error('Error creating table:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×˜×‘×œ×”');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const handleDeleteTable = (table: AdminTable) => {\n    Alert.alert('××—×™×§×ª ×˜×‘×œ×”', `×œ××—×•×§ ××ª ×”×˜×‘×œ×” \"${table.name}\"?\\n×¤×¢×•×œ×” ×–×• ×ª××—×§ ×’× ××ª ×›×œ ×”×¨×©×•××•×ª ×‘×˜×‘×œ×”.`, [\n      { text: '×‘×™×˜×•×œ', style: 'cancel' },\n      {\n        text: '××—×§',\n        style: 'destructive',\n        onPress: async () => {\n          setDeleting(table.id);\n          try {\n            const res = await apiService.adminTables.delete(table.id);\n            if (res.success) {\n              Alert.alert('×”×¦×œ×—×”', '×˜×‘×œ×” × ××—×§×” ×‘×”×¦×œ×—×”');\n              await fetchTables();\n            } else {\n              Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘××—×™×§×ª ×˜×‘×œ×”');\n            }\n          } catch (error) {\n            console.error('Error deleting table:', error);\n            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘××—×™×§×ª ×˜×‘×œ×”');\n          } finally {\n            setDeleting(null);\n          }\n        },\n      },\n    ]);\n  };\n\n  const handleTablePress = (table: AdminTable) => {\n    (navigation as any).navigate('AdminTableRows', { tableId: table.id, tableName: table.name });\n  };\n\n  const renderTableItem = ({ item }: { item: AdminTable }) => (\n    <TouchableOpacity\n      style={styles.tableCard}\n      onPress={() => handleTablePress(item)}\n      disabled={deleting === item.id}\n    >\n      <View style={styles.tableHeader}>\n        <View style={styles.tableInfo}>\n          <Text style={styles.tableName}>{item.name}</Text>\n          {item.description && (\n            <Text style={styles.tableDescription} numberOfLines={2}>\n              {item.description}\n            </Text>\n          )}\n        </View>\n        <TouchableOpacity\n          style={styles.deleteBtn}\n          onPress={() => handleDeleteTable(item)}\n          disabled={deleting === item.id}\n        >\n          {deleting === item.id ? (\n            <ActivityIndicator size=\"small\" color={colors.error} />\n          ) : (\n            <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n          )}\n        </TouchableOpacity>\n      </View>\n      <View style={styles.tableMeta}>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"grid-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {item.columns?.length || 0} ×¢××•×“×•×ª\n          </Text>\n        </View>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"list-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {item.row_count || 0} ×¨×©×•××•×ª\n          </Text>\n        </View>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {new Date(item.created_at).toLocaleDateString('he-IL')}\n          </Text>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>×˜×‘×œ××•×ª ×“×™× ××™×•×ª</Text>\n        <TouchableOpacity\n          style={styles.addButton}\n          onPress={() => {\n            resetForm();\n            setShowCreateModal(true);\n          }}\n        >\n          <Ionicons name=\"add\" size={24} color={colors.white} />\n          <Text style={styles.addText}>×˜×‘×œ×” ×—×“×©×”</Text>\n        </TouchableOpacity>\n      </View>\n\n      {loading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      ) : (\n        <FlatList\n          data={tables}\n          keyExtractor={(item) => item.id}\n          renderItem={renderTableItem}\n          contentContainerStyle={styles.list}\n          refreshControl={<RefreshControl refreshing={loading} onRefresh={fetchTables} />}\n          ListEmptyComponent={\n            <View style={styles.emptyContainer}>\n              <Ionicons name=\"grid-outline\" size={64} color={colors.textSecondary} />\n              <Text style={styles.emptyText}>××™×Ÿ ×˜×‘×œ××•×ª</Text>\n              <Text style={styles.emptySubtext}>×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ</Text>\n            </View>\n          }\n        />\n      )}\n\n      {/* Create Table Modal */}\n      <Modal\n        visible={showCreateModal}\n        animationType=\"slide\"\n        transparent\n        onRequestClose={() => setShowCreateModal(false)}\n      >\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <ScrollView>\n              <Text style={styles.modalTitle}>×˜×‘×œ×” ×—×“×©×”</Text>\n\n              <TextInput\n                style={styles.input}\n                placeholder=\"×©× ×”×˜×‘×œ×” *\"\n                placeholderTextColor={colors.textSecondary}\n                value={formData.name}\n                onChangeText={(text) => setFormData({ ...formData, name: text })}\n              />\n\n              <TextInput\n                style={[styles.input, styles.textArea]}\n                placeholder=\"×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)\"\n                placeholderTextColor={colors.textSecondary}\n                value={formData.description}\n                onChangeText={(text) => setFormData({ ...formData, description: text })}\n                multiline\n                numberOfLines={3}\n              />\n\n              <View style={styles.columnsSection}>\n                <View style={styles.sectionHeader}>\n                  <Text style={styles.sectionTitle}>×¢××•×“×•×ª</Text>\n                  <TouchableOpacity style={styles.addColumnBtn} onPress={addColumn}>\n                    <Ionicons name=\"add-circle-outline\" size={20} color={colors.primary} />\n                    <Text style={styles.addColumnText}>×”×•×¡×£ ×¢××•×“×”</Text>\n                  </TouchableOpacity>\n                </View>\n\n                {formData.columns.map((column, index) => (\n                  <View key={index} style={styles.columnCard}>\n                    <View style={styles.columnHeader}>\n                      <Text style={styles.columnNumber}>×¢××•×“×” {index + 1}</Text>\n                      <TouchableOpacity onPress={() => removeColumn(index)}>\n                        <Ionicons name=\"close-circle\" size={24} color={colors.error} />\n                      </TouchableOpacity>\n                    </View>\n\n                    <TextInput\n                      style={styles.input}\n                      placeholder=\"×©× ×¢××•×“×” *\"\n                      placeholderTextColor={colors.textSecondary}\n                      value={column.name}\n                      onChangeText={(text) => updateColumn(index, 'name', text)}\n                    />\n\n                    <View style={styles.row}>\n                      <View style={styles.pickerContainer}>\n                        <Text style={styles.label}>×¡×•×’ × ×ª×•×Ÿ</Text>\n                        <View style={styles.pickerRow}>\n                          {(['text', 'number', 'date'] as const).map((type) => (\n                            <TouchableOpacity\n                              key={type}\n                              style={[\n                                styles.pickerOption,\n                                column.data_type === type && styles.pickerOptionActive,\n                              ]}\n                              onPress={() => updateColumn(index, 'data_type', type)}\n                            >\n                              <Text\n                                style={[\n                                  styles.pickerOptionText,\n                                  column.data_type === type && styles.pickerOptionTextActive,\n                                ]}\n                              >\n                                {type === 'text' ? '×˜×§×¡×˜' : type === 'number' ? '××¡×¤×¨' : '×ª××¨×™×š'}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      </View>\n\n                      <TouchableOpacity\n                        style={[\n                          styles.checkbox,\n                          column.is_required && styles.checkboxActive,\n                        ]}\n                        onPress={() => updateColumn(index, 'is_required', !column.is_required)}\n                      >\n                        <Ionicons\n                          name={column.is_required ? 'checkbox' : 'square-outline'}\n                          size={24}\n                          color={column.is_required ? colors.primary : colors.textSecondary}\n                        />\n                        <Text style={styles.checkboxLabel}>×—×•×‘×”</Text>\n                      </TouchableOpacity>\n                    </View>\n                  </View>\n                ))}\n\n                {formData.columns.length === 0 && (\n                  <Text style={styles.emptyColumnsText}>××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ.</Text>\n                )}\n              </View>\n\n              <View style={styles.modalActions}>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalCancel]}\n                  onPress={() => {\n                    setShowCreateModal(false);\n                    resetForm();\n                  }}\n                >\n                  <Text style={styles.modalBtnText}>×‘×™×˜×•×œ</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalSave]}\n                  onPress={handleCreateTable}\n                  disabled={creating}\n                >\n                  {creating ? (\n                    <ActivityIndicator size=\"small\" color={colors.white} />\n                  ) : (\n                    <Text style={styles.modalBtnText}>×¦×•×¨</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  title: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.primary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: 8,\n  },\n  addText: {\n    color: colors.white,\n    fontWeight: '600',\n    fontSize: FontSizes.medium,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  list: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: 100,\n  },\n  tableCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  tableHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  tableInfo: {\n    flex: 1,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  tableName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  tableDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  deleteBtn: {\n    padding: 4,\n  },\n  tableMeta: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.SM,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modalBackdrop: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    maxHeight: '90%',\n    ...(Platform.OS === 'web' && {\n      maxWidth: 600,\n      alignSelf: 'center',\n    }),\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    textAlign: 'right',\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'right',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top',\n  },\n  columnsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addColumnBtn: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  addColumnText: {\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  columnCard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  columnHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  columnNumber: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  row: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  pickerContainer: {\n    flex: 1,\n  },\n  label: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 4,\n    textAlign: 'right',\n  },\n  pickerRow: {\n    flexDirection: 'row',\n    gap: 8,\n    flexWrap: 'wrap',\n  },\n  pickerOption: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    borderWidth: 1,\n    borderColor: colors.border,\n    backgroundColor: colors.background,\n  },\n  pickerOptionActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  pickerOptionText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  pickerOptionTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  checkbox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingVertical: 8,\n  },\n  checkboxActive: {},\n  checkboxLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  emptyColumnsText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontStyle: 'italic',\n  },\n  modalActions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginTop: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalBtn: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n  },\n  modalCancel: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  modalSave: {\n    backgroundColor: colors.primary,\n  },\n  modalBtnText: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.white,\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTasksScreen.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":515,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&quot;×™ "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&ldquo;×™ "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&#34;×™ "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&rdquo;×™ "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, TextInput, ActivityIndicator, Modal, Image, SafeAreaView, Platform, StatusBar, Dimensions } from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useRoute, useFocusEffect, useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { Ionicons } from '@expo/vector-icons';\nimport apiService, { ApiResponse } from '../utils/apiService';\nimport { useUser } from '../stores/userStore';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport UserSelector from '../components/UserSelector';\nimport TaskHoursModal from '../components/TaskHoursModal';\n\ntype TaskStatus = 'open' | 'in_progress' | 'done' | 'archived' | 'stuck' | 'testing';\ntype TaskPriority = 'low' | 'medium' | 'high';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  avatar_url?: string;\n}\n\ntype AdminTask = {\n  id: string;\n  title: string;\n  description?: string;\n  status: TaskStatus;\n  priority: TaskPriority;\n  category?: string | null;\n  due_date?: string | null;\n  assignees: string[]; // UUIDs\n  assignees_details?: User[]; // Full objects\n  creator_details?: User;\n  tags: string[];\n  checklist?: { id: string; text: string; done: boolean }[];\n  created_by?: string | null;\n  parent_task_id?: string | null;\n  parent_task_details?: { id: string; title: string } | null;\n  subtask_count?: number;\n  level?: number; // Depth level (0 = root, 1 = subtask, 2 = sub-subtask, etc.)\n  estimated_hours?: number | null;\n  actual_hours?: number | null;\n  created_at?: string;\n  updated_at?: string;\n};\n\nexport default function AdminTasksScreen() {\n  const route = useRoute();\n  const navigation = useNavigation<any>();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser } = useUser();\n\n  // Ensure top bar and bottom bar are visible in view-only mode\n  useFocusEffect(\n    React.useCallback(() => {\n      if (viewOnly) {\n        navigation.setParams({\n          hideTopBar: false,\n          hideBottomBar: false,\n        });\n      }\n    }, [viewOnly, navigation])\n  );\n  const [tasks, setTasks] = useState<AdminTask[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [creating, setCreating] = useState<boolean>(false);\n  const [updating, setUpdating] = useState<string | null>(null);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [showForm, setShowForm] = useState<boolean>(false);\n\n  // Form State\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    priority: 'medium' as TaskPriority,\n    status: 'open' as TaskStatus,\n    category: 'development',\n    due_date: '',\n    assignees: [] as User[],\n    tagsText: '' as string,\n    parent_task_id: '' as string,\n    estimated_hours: '' as string,\n  });\n\n  // Task Hours Modal State\n  const [showHoursModal, setShowHoursModal] = useState(false);\n  const [pendingTaskId, setPendingTaskId] = useState<string | null>(null);\n  const [pendingTask, setPendingTask] = useState<AdminTask | null>(null);\n\n  const [query, setQuery] = useState('');\n  const [filterStatus, setFilterStatus] = useState<TaskStatus | ''>('');\n  const [filterPriority, setFilterPriority] = useState<TaskPriority | ''>('');\n  const [filterCategory, setFilterCategory] = useState<string | ''>('');\n  const [filterAssignee, setFilterAssignee] = useState<'all' | 'me'>('all');\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [expandedTasks, setExpandedTasks] = useState<Set<string>>(new Set());\n  const [subtasks, setSubtasks] = useState<Record<string, AdminTask[]>>({});\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n  const [loadingSubtasks, setLoadingSubtasks] = useState<string | null>(null);\n\n  useEffect(() => {\n    console.log('ğŸ“‹ Tasks List Updated in Component:', tasks.map(t => `${t.id.substring(0, 8)}:${t.title}`).join(', '));\n  }, [tasks]);\n\n  const sortedTasks = useMemo(() => {\n    const priorityOrder: Record<TaskPriority, number> = { high: 0, medium: 1, low: 2 };\n    // Filter out subtasks - only show root level tasks (those without parent_task_id)\n    const rootTasks = tasks.filter(t => !t.parent_task_id);\n    return [...rootTasks].sort((a, b) => {\n      // First sort by ownership if \"My Tasks\" is NOT active (to bring mine to top implicitly? No, sticking to date/priority)\n      if (a.status === b.status) {\n        return priorityOrder[a.priority] - priorityOrder[b.priority];\n      }\n      const statusRank: Record<TaskStatus, number> = { open: 0, in_progress: 1, stuck: 1.5, testing: 1.7, done: 2, archived: 3 };\n      return statusRank[a.status] - statusRank[b.status];\n    });\n  }, [tasks]);\n\n  const fetchTasks = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    console.log('ğŸ”„ Fetching tasks...', { query, filterStatus, filterPriority, filterCategory, filterAssignee, selectedUserId: selectedUser?.id });\n    try {\n      const res: ApiResponse<AdminTask[]> = await apiService.getTasks({\n        q: query || undefined,\n        status: filterStatus || undefined,\n        priority: filterPriority || undefined,\n        category: filterCategory || undefined,\n        assignee: filterAssignee === 'me' ? selectedUser?.id : undefined,\n      });\n      console.log('âœ… Fetch tasks response:', res.success, res.data?.length);\n      if (!res.success) {\n        setError(res.error || '×©×’×™××” ×‘×˜×¢×™× ×ª ××©×™××•×ª');\n      } else {\n        setTasks(res.data || []);\n      }\n    } catch (err) {\n      console.error('Error fetching tasks:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª ××©×™××•×ª - × ×¡×” ×©×•×‘');\n    } finally {\n      setLoading(false);\n    }\n  }, [query, filterStatus, filterPriority, filterCategory, filterAssignee, selectedUser]);\n\n  useEffect(() => {\n    let timeout: ReturnType<typeof setTimeout> | undefined;\n    if (query) {\n      timeout = setTimeout(() => fetchTasks(), 500);\n    } else {\n      fetchTasks();\n    }\n    return () => { if (timeout) clearTimeout(timeout); };\n  }, [query, filterStatus, filterPriority, filterCategory, filterAssignee, fetchTasks]);\n\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      priority: 'medium',\n      status: 'open',\n      category: 'development',\n      due_date: '',\n      assignees: [],\n      tagsText: '',\n      parent_task_id: '',\n      estimated_hours: '',\n    });\n    setEditingId(null);\n  };\n\n  const checkAndUpdateParentStatus = async (taskId: string) => {\n    // Check if task has incomplete subtasks, if so, set to 'stuck'\n    try {\n      const res = await apiService.getSubtasks(taskId);\n      if (res.success && res.data && res.data.length > 0) {\n        // If there are any subtasks, automatically set parent to 'stuck'\n        const hasIncompleteSubtasks = res.data.some((st: AdminTask) => st.status !== 'done');\n        if (hasIncompleteSubtasks) {\n          console.log(`âš ï¸ Setting task ${taskId} to 'stuck' - has incomplete subtasks`);\n          await apiService.updateTask(taskId, { status: 'stuck' as TaskStatus });\n          return true;\n        }\n      }\n    } catch (err) {\n      console.error('Failed to check parent status:', err);\n    }\n    return false;\n  };\n\n  const toggleSubtasks = async (taskId: string) => {\n    if (expandedTasks.has(taskId)) {\n      // Collapse\n      const newExpanded = new Set(expandedTasks);\n      newExpanded.delete(taskId);\n      setExpandedTasks(newExpanded);\n    } else {\n      // Expand and load subtasks\n      setLoadingSubtasks(taskId);\n      try {\n        const res = await apiService.getSubtasks(taskId);\n        if (res.success && res.data) {\n          setSubtasks(prev => ({ ...prev, [taskId]: res.data }));\n          // Check if parent should be marked as stuck\n          const updated = await checkAndUpdateParentStatus(taskId);\n          if (updated) {\n            // Refresh tasks if status was updated\n            await fetchTasks();\n          }\n        }\n        const newExpanded = new Set(expandedTasks);\n        newExpanded.add(taskId);\n        setExpandedTasks(newExpanded);\n      } catch (err) {\n        console.error('Failed to load subtasks:', err);\n      } finally {\n        setLoadingSubtasks(null);\n      }\n    }\n  };\n\n  const createSubtask = (parentTask: AdminTask) => {\n    setFormData({\n      title: '',\n      description: '',\n      priority: parentTask.priority,\n      status: 'open',\n      category: parentTask.category || 'development',\n      due_date: '',\n      assignees: parentTask.assignees_details || [],\n      tagsText: '',\n      parent_task_id: parentTask.id,\n      estimated_hours: '',\n    });\n    setEditingId(null);\n    setShowForm(true);\n  };\n\n  const createTask = async () => {\n    if (!formData.title.trim()) return;\n    \n    // Validate created_by is available\n    if (!selectedUser?.id) {\n      setError('×©×’×™××”: ×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™. × ×¡×” ×œ×”×ª×—×‘×¨ ××—×“×©.');\n      return;\n    }\n    \n    setCreating(true);\n    setError(null);\n    try {\n      let parsedDueDate = null;\n      if (formData.due_date.trim()) {\n        const date = new Date(formData.due_date);\n        if (isNaN(date.getTime())) {\n          setError('×ª××¨×™×š ×œ× ×ª×§×™×Ÿ - ×× × ×”×©×ª××© ×‘×¤×•×¨××˜ YYYY-MM-DD');\n          setCreating(false);\n          return;\n        }\n        parsedDueDate = date.toISOString();\n      }\n\n      // Parse estimated_hours\n      let parsedEstimatedHours = null;\n      if (formData.estimated_hours && formData.estimated_hours.trim()) {\n        const hours = parseFloat(formData.estimated_hours.trim());\n        if (!isNaN(hours) && hours > 0) {\n          parsedEstimatedHours = hours;\n        }\n      }\n\n      const body = {\n        title: formData.title.trim(),\n        description: formData.description.trim() || null,\n        priority: formData.priority,\n        status: formData.status,\n        category: formData.category || null,\n        due_date: parsedDueDate,\n        assignees: formData.assignees.map(u => u.id), // UUIDs - server will set defaults if empty\n        tags: formData.tagsText.trim()\n          ? formData.tagsText.split(',').map((t) => t.trim()).filter(Boolean)\n          : [],\n        created_by: selectedUser.id, // Always required\n        parent_task_id: formData.parent_task_id || null,\n        estimated_hours: parsedEstimatedHours,\n      };\n\n      console.log('ğŸ“¤ Creating task with payload:', body);\n\n      const res: ApiResponse<AdminTask> = await apiService.createTask(body);\n      if (!res.success) {\n        // Handle specific permission error\n        if (res.error?.includes('×”×¨×©××”')) {\n          setError('××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×§×¦×•×ª ××©×™××” ×œ××©×ª××©×™× ××œ×”. × ×™×ª×Ÿ ×œ×”×§×¦×•×ª ××©×™××•×ª ×¨×§ ×œ×¢×•×‘×“×™× ×©×œ×š.');\n        } else {\n          setError(res.error || '×©×’×™××” ×‘×™×¦×™×¨×ª ××©×™××”');\n        }\n      } else if (res.data) {\n        // If this is a subtask, update parent status to 'stuck' FIRST\n        if (formData.parent_task_id) {\n          await checkAndUpdateParentStatus(formData.parent_task_id);\n        }\n        // Then refresh tasks\n        await fetchTasks();\n        resetForm();\n        setShowForm(false);\n      }\n    } catch (err) {\n      console.error('Error creating task:', err);\n      setError('×©×’×™××” ×‘×™×¦×™×¨×ª ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const toggleDone = async (task: AdminTask) => {\n    // If trying to mark as done, check if hours are logged first\n    if (task.status !== 'done') {\n      // Open hours modal first\n      setPendingTaskId(task.id);\n      setPendingTask(task);\n      setShowHoursModal(true);\n      return;\n    }\n\n    // If unmarking as done, just update status\n    setUpdating(task.id);\n    setError(null);\n    try {\n      const res: ApiResponse<AdminTask> = await apiService.updateTask(task.id, { status: 'open' });\n      if (res.success && res.data) {\n        await fetchTasks();\n      } else {\n        setError(res.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××”');\n      }\n    } catch (err) {\n      console.error('Error toggling task status:', err);\n      setError('×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setUpdating(null);\n    }\n  };\n\n  const handleSaveHours = async (hours: number) => {\n    if (!pendingTaskId || !selectedUser?.id) {\n      throw new Error('××©×ª××© ×œ× ×–×•×”×”');\n    }\n\n    // Log hours first\n    const logRes = await apiService.logTaskHours(pendingTaskId, hours, selectedUser.id);\n    if (!logRes.success) {\n      throw new Error(logRes.error || '×©×’×™××” ×‘×¨×™×©×•× ×©×¢×•×ª');\n    }\n\n    // Then update status to done\n    const updateRes = await apiService.updateTask(pendingTaskId, { status: 'done' });\n    if (!updateRes.success) {\n      throw new Error(updateRes.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××”');\n    }\n\n    // Refresh tasks\n    await fetchTasks();\n\n    // Close modal and reset state\n    setShowHoursModal(false);\n    setPendingTaskId(null);\n    setPendingTask(null);\n  };\n\n  const renderItem = ({ item, isSubtask = false, level = 0 }: { item: AdminTask; isSubtask?: boolean; level?: number }) => {\n    const isDone = item.status === 'done';\n    const hasSubtasks = (item.subtask_count || 0) > 0;\n    const isExpanded = expandedTasks.has(item.id);\n    const taskSubtasks = subtasks[item.id] || [];\n    const taskLevel = item.level ?? level;\n\n    return (\n      <View>\n        <View style={[\n          styles.taskItem, \n          isDone && styles.taskItemDone, \n          isSubtask && styles.subtaskItem,\n          isSubtask && { marginRight: taskLevel * 16 }\n        ]}>\n          {/* Subtask Indicator */}\n          {isSubtask && (\n            <View style={styles.subtaskIndicator}>\n              <Ionicons name=\"return-down-forward\" size={16} color={colors.info} />\n              <Text style={styles.levelText}>×“×¨×’×” {taskLevel}</Text>\n            </View>\n          )}\n\n          <TouchableOpacity\n            style={styles.checkbox}\n            onPress={() => toggleDone(item)}\n            disabled={updating === item.id}\n          >\n            {updating === item.id ? (\n              <ActivityIndicator size=\"small\" color={colors.textSecondary} />\n            ) : (\n              <Ionicons name={isDone ? 'checkbox' : 'square-outline'} size={24} color={isDone ? colors.success : colors.textSecondary} />\n            )}\n          </TouchableOpacity>\n          <View style={styles.taskContent}>\n            {/* Parent Task Reference */}\n            {item.parent_task_details && (\n              <View style={styles.parentBadge}>\n                <Ionicons name=\"git-branch-outline\" size={12} color={colors.info} />\n                <Text style={styles.parentText}>×ª×ª-××©×™××” ×©×œ: {item.parent_task_details.title}</Text>\n              </View>\n            )}\n\n            <Text style={[styles.taskTitle, isDone && styles.taskTitleDone]} numberOfLines={2}>\n              {item.title}\n            </Text>\n            {item.description ? (\n              <Text style={styles.description} numberOfLines={2}>{item.description}</Text>\n            ) : null}\n\n            <View style={styles.metaRow}>\n              {/* Priority Badge */}\n              <View style={[styles.badge, styles[`priority_${item.priority}` as const]]}>\n                <Text style={styles.badgeText}>\n                  {item.priority === 'high' ? '×’×‘×•×”×”' : item.priority === 'medium' ? '×‘×™× ×•× ×™×ª' : '× ××•×›×”'}\n                </Text>\n              </View>\n\n              {/* Status Badge */}\n              <View style={[styles.badge, styles[`status_${item.status}` as const]]}>\n                <Text style={styles.badgeText}>\n                  {item.status === 'open' ? '×¤×ª×•×—×”' : \n                   item.status === 'in_progress' ? '×‘×ª×”×œ×™×š' : \n                   item.status === 'stuck' ? '×ª×§×•×¢' :\n                   item.status === 'testing' ? '×‘×‘×“×™×§×”' :\n                   item.status === 'done' ? '×‘×•×¦×¢×”' : '×‘××¨×›×™×•×Ÿ'}\n                </Text>\n              </View>\n\n              {/* Subtasks Count Badge */}\n              {hasSubtasks && (\n                <TouchableOpacity \n                  style={[styles.badge, styles.subtaskBadge]}\n                  onPress={() => toggleSubtasks(item.id)}\n                >\n                  {loadingSubtasks === item.id ? (\n                    <ActivityIndicator size=\"small\" color={colors.info} />\n                  ) : (\n                    <>\n                      <Ionicons \n                        name={isExpanded ? 'chevron-up' : 'chevron-down'} \n                        size={12} \n                        color={colors.info} \n                      />\n                      <Text style={styles.subtaskBadgeText}>{item.subtask_count} ×ª×ª-××©×™××•×ª</Text>\n                    </>\n                  )}\n                </TouchableOpacity>\n              )}\n\n              {/* Assignees */}\n              <View style={styles.assigneesContainer}>\n                {item.assignees_details && item.assignees_details.length > 0 ? (\n                  <View style={styles.assigneesContent}>\n                    <Text style={styles.assigneeText} numberOfLines={1}>\n                      ××©×•×™×™×š ×œ: {item.assignees_details.map(u => u.name).join(', ')}\n                    </Text>\n                    <View style={styles.avatarsRow}>\n                      {item.assignees_details.slice(0, 3).map((u, i) => (\n                        <Image\n                          key={u.id}\n                          source={{ uri: u.avatar_url || `https://ui-avatars.com/api/?name=${u.name}` }}\n                          style={[styles.avatarSmall, { marginRight: i > 0 ? -10 : 0, zIndex: 3 - i }]}\n                        />\n                      ))}\n                      {item.assignees_details.length > 3 && (\n                        <View style={[styles.avatarSmall, styles.moreAvatar]}>\n                          <Text style={styles.moreAvatarText}>+{item.assignees_details.length - 3}</Text>\n                        </View>\n                      )}\n                    </View>\n                  </View>\n                ) : (\n                  <Text style={styles.unassignedText}>âš ï¸ ×”××©×™××” ×œ× ×©×•×™×™×›×” ×œ××£ ××—×“</Text>\n                )}\n              </View>\n            </View>\n\n            {/* Hours Display */}\n            {((item.estimated_hours && parseFloat(String(item.estimated_hours)) > 0) || \n              (item.actual_hours && parseFloat(String(item.actual_hours)) > 0)) && (\n              <View style={styles.hoursRow}>\n                {item.estimated_hours && parseFloat(String(item.estimated_hours)) > 0 && (\n                  <View style={[styles.badge, styles.hoursBadge]}>\n                    <Ionicons name=\"time-outline\" size={12} color={colors.info} />\n                    <Text style={styles.hoursText}>××•×¢×¨×š: {parseFloat(String(item.estimated_hours)).toFixed(1)} ×©×¢×•×ª</Text>\n                  </View>\n                )}\n                {item.actual_hours && parseFloat(String(item.actual_hours)) > 0 && (\n                  <View style={[styles.badge, styles.hoursBadge, styles.actualHoursBadge]}>\n                    <Ionicons name=\"checkmark-circle-outline\" size={12} color={colors.success} />\n                    <Text style={[styles.hoursText, { color: colors.success }]}>×‘×•×¦×¢: {parseFloat(String(item.actual_hours)).toFixed(1)} ×©×¢×•×ª</Text>\n                  </View>\n                )}\n              </View>\n            )}\n\n            {item.creator_details && (\n              <Text style={styles.creatorText}>× ×•×¦×¨ ×¢\"×™ {item.creator_details.name}</Text>\n            )}\n\n          {!viewOnly && (\n            <View style={styles.actionsRow}>\n              <TouchableOpacity style={styles.actionBtn} onPress={() => openEdit(item)}>\n                <Ionicons name=\"create-outline\" size={18} color={colors.textPrimary} />\n                <Text style={styles.actionText}>×¢×¨×•×š</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={styles.actionBtn} onPress={() => createSubtask(item)}>\n                <Ionicons name=\"add-circle-outline\" size={18} color={colors.info} />\n                <Text style={[styles.actionText, { color: colors.info }]}>×ª×ª-××©×™××”</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={styles.actionBtn}\n                onPress={() => deleteTask(item.id)}\n                disabled={deleting === item.id}\n              >\n                {deleting === item.id ? (\n                  <ActivityIndicator size=\"small\" color={colors.error} />\n                ) : (\n                  <>\n                    <Ionicons name=\"trash-outline\" size={18} color={colors.error} />\n                    <Text style={[styles.actionText, { color: colors.error }]}>××—×§</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n      </View>\n\n      {/* Subtasks List */}\n      {isExpanded && taskSubtasks.length > 0 && (\n        <View style={styles.subtasksList}>\n          {taskSubtasks.map((subtask) => (\n            <View key={subtask.id}>\n              {renderItem({ item: subtask, isSubtask: true, level: taskLevel + 1 })}\n            </View>\n          ))}\n        </View>\n      )}\n    </View>\n    );\n  };\n\n  const openEdit = (task: AdminTask) => {\n    setFormData({\n      title: task.title || '',\n      description: task.description || '',\n      priority: task.priority,\n      status: task.status,\n      category: task.category || 'development',\n      due_date: task.due_date ? new Date(task.due_date).toISOString().slice(0, 10) : '',\n      assignees: task.assignees_details || [],\n      tagsText: (task.tags || []).join(', '),\n      parent_task_id: task.parent_task_id || '',\n      estimated_hours: (task.estimated_hours !== null && task.estimated_hours !== undefined && task.estimated_hours > 0) ? String(task.estimated_hours) : '',\n    });\n    setEditingId(task.id);\n    setShowForm(true);\n  };\n\n  const saveEdit = async () => {\n    if (!editingId) return;\n    setUpdating(editingId);\n    setError(null);\n    try {\n      let parsedDueDate = null;\n      if (formData.due_date.trim()) {\n        const date = new Date(formData.due_date);\n        if (isNaN(date.getTime())) {\n          setError('×ª××¨×™×š ×œ× ×ª×§×™×Ÿ - ×× × ×”×©×ª××© ×‘×¤×•×¨××˜ YYYY-MM-DD');\n          setUpdating(null);\n          return;\n        }\n        parsedDueDate = date.toISOString();\n      }\n\n      // Parse estimated_hours\n      let parsedEstimatedHours = null;\n      if (formData.estimated_hours && formData.estimated_hours.trim()) {\n        const hours = parseFloat(formData.estimated_hours.trim());\n        if (!isNaN(hours) && hours > 0) {\n          parsedEstimatedHours = hours;\n        }\n      }\n\n      const body: any = {\n        title: formData.title.trim(),\n        description: formData.description.trim() || null,\n        priority: formData.priority,\n        status: formData.status,\n        category: formData.category || null,\n        due_date: parsedDueDate,\n        tags: formData.tagsText ? formData.tagsText.split(',').map((t) => t.trim()).filter(Boolean) : [],\n        assignees: formData.assignees.map(u => u.id),\n        estimated_hours: parsedEstimatedHours,\n      };\n\n      const res = await apiService.updateTask(editingId, body);\n      if (res.success && res.data) {\n        await fetchTasks();\n        setShowForm(false);\n        resetForm();\n        setEditingId(null);\n      } else {\n        // Handle specific permission error\n        if (res.error?.includes('×”×¨×©××”')) {\n          setError('××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×§×¦×•×ª ××©×™××” ×œ××©×ª××©×™× ××œ×”. × ×™×ª×Ÿ ×œ×”×§×¦×•×ª ××©×™××•×ª ×¨×§ ×œ×¢×•×‘×“×™× ×©×œ×š.');\n        } else {\n          setError(res.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ××©×™××”');\n        }\n      }\n    } catch (err) {\n      console.error('Error updating task:', err);\n      setError('×©×’×™××” ×‘×¢×“×›×•×Ÿ ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setUpdating(null);\n    }\n  };\n\n  const deleteTask = async (taskId: string) => {\n    setDeleting(taskId);\n    setError(null);\n    try {\n      const res = await apiService.deleteTask(taskId);\n      if (res.success) {\n        await fetchTasks();\n      } else {\n        setError(res.error || '×©×’×™××” ×‘××—×™×§×ª ××©×™××”');\n      }\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setError('×©×’×™××” ×‘××—×™×§×ª ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setDeleting(null);\n    }\n  };\n\n  const renderHeader = () => (\n    <View\n      onLayout={(event) => {\n        if (Platform.OS === 'web') {\n          const { height } = event.nativeEvent.layout;\n          setHeaderHeight(height);\n        }\n      }}\n    >\n      <Text style={styles.header}>× ×™×”×•×œ ××©×™××•×ª ×•×¦×•×•×ª</Text>\n\n      <View style={styles.filtersRow}>\n        <TextInput\n          style={styles.input}\n          placeholder=\"×—×™×¤×•×© ××©×™××•×ª...\"\n          placeholderTextColor={colors.textSecondary}\n          value={query}\n          onChangeText={setQuery}\n        />\n        <TouchableOpacity style={styles.refreshBtn} onPress={fetchTasks}>\n          <Ionicons name=\"search-outline\" size={22} color={colors.white} />\n        </TouchableOpacity>\n      </View>\n\n      {error && (\n        <Text style={{ color: colors.error, textAlign: 'right', marginBottom: 8, fontWeight: 'bold' }}>{error}</Text>\n      )}\n\n\n      <View style={styles.chipsRow}>\n        <FilterChip label=\"×œ××™ ××•×§×¦×”\" value={filterAssignee} setValue={setFilterAssignee} options={[\n          { value: 'all', label: '×›×•×œ×' },\n          { value: 'me', label: '×¨×§ ×©×œ×™' },\n        ]} />\n        <FilterChip label=\"×¡×˜×˜×•×¡\" value={filterStatus} setValue={setFilterStatus} options={[\n          { value: '', label: '×”×›×œ' },\n          { value: 'open', label: '×¤×ª×•×—×”' },\n          { value: 'in_progress', label: '×‘×ª×”×œ×™×š' },\n          { value: 'stuck', label: '×ª×§×•×¢' },\n          { value: 'testing', label: '×‘×‘×“×™×§×”' },\n          { value: 'done', label: '×‘×•×¦×¢×”' },\n        ]} />\n        <FilterChip label=\"×¢×“×™×¤×•×ª\" value={filterPriority} setValue={setFilterPriority} options={[\n          { value: '', label: '×”×›×œ' },\n          { value: 'high', label: '×’×‘×•×”×”' },\n          { value: 'medium', label: '×‘×™× ×•× ×™×ª' },\n        ]} />\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={sortedTasks}\n          keyExtractor={(item) => item.id}\n          renderItem={renderItem}\n          contentContainerStyle={[\n            stylesWithListContent.listContent,\n            Platform.OS === 'web' && { paddingBottom: 120 }\n          ]}\n          ListHeaderComponent={renderHeader}\n          ListEmptyComponent={<Text style={styles.emptyText}>××™×Ÿ ××©×™××•×ª ×›×¨×’×¢</Text>}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n          showsVerticalScrollIndicator={true}\n          removeClippedSubviews={Platform.OS !== 'web'}\n          style={styles.flatList}\n        />\n      </View>\n\n      <Modal visible={showForm} animationType=\"slide\" transparent>\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <Text style={styles.modalTitle}>{editingId ? '×¢×¨×™×›×ª ××©×™××”' : '××©×™××” ×—×“×©×”'}</Text>\n\n            <TextInput style={styles.modalInput} placeholder=\"×›×•×ª×¨×ª\" value={formData.title} onChangeText={(v) => setFormData({ ...formData, title: v })} />\n            <TextInput style={[styles.modalInput, { height: 60 }]} placeholder=\"×ª×™××•×¨\" multiline value={formData.description} onChangeText={(v) => setFormData({ ...formData, description: v })} />\n\n            <View style={styles.row2}>\n              <PickerField\n                label=\"×¢×“×™×¤×•×ª\"\n                value={formData.priority}\n                onChange={(v: string) => setFormData({ ...formData, priority: v as TaskPriority })}\n                options={[\n                  { value: 'high', label: '×’×‘×•×”×”' },\n                  { value: 'medium', label: '×‘×™× ×•× ×™×ª' },\n                  { value: 'low', label: '× ××•×›×”' },\n                ]}\n              />\n              <PickerField\n                label=\"×¡×˜×˜×•×¡\"\n                value={formData.status}\n                onChange={(v: string) => setFormData({ ...formData, status: v as TaskStatus })}\n                options={[\n                  { value: 'open', label: '×¤×ª×•×—×”' },\n                  { value: 'in_progress', label: '×‘×ª×”×œ×™×š' },\n                  { value: 'stuck', label: '×ª×§×•×¢' },\n                  { value: 'testing', label: '×‘×‘×“×™×§×”' },\n                  { value: 'done', label: '×‘×•×¦×¢×”' },\n                ]}\n              />\n            </View>\n\n            {/* User Selector for Assignees */}\n            <UserSelector\n              selectedUsers={formData.assignees}\n              onSelect={(u) => setFormData({ ...formData, assignees: [...formData.assignees, u] })}\n              onRemove={(id) => setFormData({ ...formData, assignees: formData.assignees.filter(u => u.id !== id) })}\n            />\n\n            <TextInput style={styles.modalInput} placeholder=\"×ª×’×™×•×ª (××•×¤×¨×“×•×ª ××•×ª)\" value={formData.tagsText} onChangeText={(v) => setFormData({ ...formData, tagsText: v })} />\n            \n            <TextInput \n              style={styles.modalInput} \n              placeholder=\"×–××Ÿ ×¢×‘×•×“×” ××•×¢×¨×š ×‘×©×¢×•×ª (××•×¤×¦×™×•× ×œ×™)\" \n              value={formData.estimated_hours} \n              onChangeText={(v) => setFormData({ ...formData, estimated_hours: v })} \n              keyboardType=\"decimal-pad\"\n            />\n\n            <View style={styles.modalActions}>\n              <TouchableOpacity style={[styles.modalBtn, styles.modalCancel]} onPress={() => { setShowForm(false); resetForm(); }}>\n                <Text style={styles.modalBtnText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={[styles.modalBtn, styles.modalSave]} onPress={editingId ? saveEdit : createTask}>\n                <Text style={styles.modalBtnText}>{editingId ? '×©××•×¨' : '×¦×•×¨'}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      <TaskHoursModal\n        visible={showHoursModal}\n        onClose={() => {\n          setShowHoursModal(false);\n          setPendingTaskId(null);\n          setPendingTask(null);\n        }}\n        onSave={handleSaveHours}\n        estimatedHours={pendingTask?.estimated_hours || null}\n        taskTitle={pendingTask?.title}\n      />\n\n      {!viewOnly && (\n        <TouchableOpacity style={styles.addButton} onPress={() => { resetForm(); setShowForm(true); }}>\n          <Ionicons name=\"add\" size={24} color={colors.white} />\n        </TouchableOpacity>\n      )}\n    </SafeAreaView>\n  );\n}\n\n// Sub-components\nfunction PickerField({ label, value, onChange, options }: any) {\n  return (\n    <View style={{ flex: 1 }}>\n      <Text style={styles.pickerLabel}>{label}</Text>\n      <View style={styles.pickerOptions}>\n        {options.map((opt: any) => (\n          <TouchableOpacity key={opt.value} onPress={() => onChange(opt.value)} style={[styles.chip, value === opt.value && styles.chipActive]}>\n            <Text style={[styles.chipText, value === opt.value && styles.chipTextActive]}>{opt.label}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nfunction FilterChip({ label, value, setValue, options }: any) {\n  return (\n    <View style={{ flexDirection: 'row', alignItems: 'center', gap: 8 }}>\n      <Text style={{ color: colors.textSecondary }}>{label}:</Text>\n      <View style={{ flexDirection: 'row', gap: 6, flexWrap: 'wrap' }}>\n        {options.map((opt: any) => (\n          <TouchableOpacity key={`${label}-${opt.value}`} onPress={() => setValue(opt.value)} style={[styles.chip, value === opt.value && styles.chipActive]}>\n            <Text style={[styles.chipText, value === opt.value && styles.chipTextActive]}>{opt.label}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n    ...(Platform.OS === 'web' ? {\n      position: 'relative' as any,\n      height: '100vh' as any,\n    } : {\n      padding: LAYOUT_CONSTANTS.SPACING.LG,\n    }),\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'right',\n  },\n  filtersRow: { flexDirection: 'row', gap: 8, marginBottom: 8 },\n  input: { flex: 1, height: 44, backgroundColor: colors.background, borderRadius: 8, paddingHorizontal: 10, textAlign: 'right', color: colors.textPrimary },\n  refreshBtn: { width: 44, height: 44, backgroundColor: colors.primary, borderRadius: 8, alignItems: 'center', justifyContent: 'center' },\n  chipsRow: { flexDirection: 'row', flexWrap: 'wrap', gap: 12, marginBottom: 16 },\n  emptyText: { textAlign: 'center', color: colors.textSecondary, marginTop: 40 },\n\n  taskItem: { flexDirection: 'row', padding: 12, backgroundColor: colors.background, borderRadius: 12, borderWidth: 1, borderColor: colors.border },\n  taskItemDone: { opacity: 0.6 },\n  checkbox: { marginRight: 12, paddingTop: 4 },\n  taskContent: { flex: 1 },\n  taskTitle: { fontSize: 16, fontWeight: 'bold', color: colors.textPrimary, textAlign: 'right' },\n  taskTitleDone: { textDecorationLine: 'line-through', color: colors.textSecondary },\n  description: { fontSize: 14, color: colors.textSecondary, textAlign: 'right', marginBottom: 6 },\n\n  metaRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: 8, marginTop: 6, flexWrap: 'wrap' },\n  badge: { paddingHorizontal: 8, paddingVertical: 2, borderRadius: 12, backgroundColor: colors.backgroundSecondary, borderWidth: 1, borderColor: colors.border },\n  badgeText: { fontSize: 12, color: colors.textSecondary },\n  priority_high: { backgroundColor: colors.pinkLight, borderColor: colors.pinkLight },\n  priority_medium: { backgroundColor: colors.warningLight, borderColor: colors.warningLight },\n  priority_low: { backgroundColor: colors.successLight, borderColor: colors.successLight },\n  \n  status_open: { backgroundColor: colors.infoLight, borderColor: colors.info },\n  status_in_progress: { backgroundColor: colors.warningLight, borderColor: colors.warning },\n  status_stuck: { backgroundColor: colors.errorLight, borderColor: colors.error },\n  status_testing: { backgroundColor: '#E8F5E9', borderColor: '#4CAF50' },\n  status_done: { backgroundColor: colors.successLight, borderColor: colors.success },\n  status_archived: { backgroundColor: colors.backgroundSecondary, borderColor: colors.border },\n\n  avatarsRow: { flexDirection: 'row-reverse', alignItems: 'center' },\n  avatarSmall: { width: 24, height: 24, borderRadius: 12, borderWidth: 1, borderColor: colors.white },\n  moreAvatar: { backgroundColor: colors.textSecondary, alignItems: 'center', justifyContent: 'center' },\n  moreAvatarText: { color: colors.white, fontSize: 10, fontWeight: 'bold' },\n\n  creatorText: { fontSize: 11, color: colors.textSecondary, textAlign: 'right', marginTop: 4 },\n\n  hoursRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: 8, marginTop: 6, flexWrap: 'wrap' },\n  hoursBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    backgroundColor: colors.infoLight,\n    borderColor: colors.info,\n  },\n  actualHoursBadge: {\n    backgroundColor: colors.successLight,\n    borderColor: colors.success,\n  },\n  hoursText: { \n    fontSize: 11, \n    color: colors.info, \n    fontWeight: '600',\n  },\n\n  actionsRow: { flexDirection: 'row-reverse', gap: 16, marginTop: 8 },\n  actionBtn: { flexDirection: 'row', alignItems: 'center', gap: 4 },\n  actionText: { fontSize: 12, color: colors.textPrimary },\n\n  assigneesContainer: { marginTop: 4 },\n  assigneesContent: { flexDirection: 'row-reverse', alignItems: 'center', gap: 6 },\n  assigneeText: { fontSize: 12, color: colors.textSecondary },\n  unassignedText: { fontSize: 12, color: colors.error, fontWeight: 'bold' },\n\n  // Subtask styles\n  subtaskItem: { \n    marginLeft: 24, \n    borderLeftWidth: 3, \n    borderLeftColor: colors.info,\n    backgroundColor: '#F0F8FF',\n  },\n  subtaskIndicator: { \n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingRight: 8, \n    justifyContent: 'center',\n  },\n  levelText: {\n    fontSize: 10,\n    color: colors.info,\n    fontWeight: '600',\n  },\n  subtasksList: { \n    marginTop: 8, \n    gap: 8,\n  },\n  subtaskBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    backgroundColor: colors.infoLight,\n    borderColor: colors.info,\n  },\n  subtaskBadgeText: { \n    fontSize: 11, \n    color: colors.info, \n    fontWeight: '600',\n  },\n  parentBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    marginBottom: 4,\n    backgroundColor: colors.infoLight,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n    alignSelf: 'flex-end',\n  },\n  parentText: { \n    fontSize: 10, \n    color: colors.info,\n  },\n\n  flatList: {\n    flex: 1,\n    ...(Platform.OS === 'web' && {\n      overflowY: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n    }),\n  },\n  addButton: { \n    ...(Platform.OS === 'web' ? { position: 'fixed' as any } : { position: 'absolute' }),\n    left: 20, \n    bottom: 20, \n    width: 56, \n    height: 56, \n    borderRadius: 28, \n    backgroundColor: colors.success, \n    alignItems: 'center', \n    justifyContent: 'center', \n    shadowColor: '#000', \n    shadowOpacity: 0.3, \n    shadowRadius: 4, \n    shadowOffset: { width: 0, height: 2 },\n    elevation: 5,\n    zIndex: 1000\n  },\n\n  modalBackdrop: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n  modalCard: { backgroundColor: colors.background, borderRadius: 16, padding: 20 },\n  modalTitle: { fontSize: 20, fontWeight: 'bold', textAlign: 'right', marginBottom: 16, color: colors.textPrimary },\n  modalInput: { height: 44, backgroundColor: colors.backgroundSecondary, borderRadius: 8, paddingHorizontal: 12, textAlign: 'right', marginBottom: 12, color: colors.textPrimary, borderWidth: 1, borderColor: colors.border },\n  row2: { flexDirection: 'row', gap: 12, marginBottom: 12 },\n  pickerLabel: { textAlign: 'right', marginBottom: 4, color: colors.textSecondary },\n  pickerOptions: { flexDirection: 'row', flexWrap: 'wrap', gap: 8 },\n  chip: { paddingHorizontal: 10, paddingVertical: 6, borderRadius: 16, borderWidth: 1, borderColor: colors.border, backgroundColor: colors.background },\n  chipActive: { backgroundColor: colors.infoLight, borderColor: colors.info },\n  chipText: { fontSize: 12, color: colors.textSecondary },\n  chipTextActive: { color: colors.textPrimary, fontWeight: 'bold' },\n\n  modalActions: { flexDirection: 'row', gap: 12, marginTop: 16 },\n  modalBtn: { flex: 1, height: 44, borderRadius: 8, alignItems: 'center', justifyContent: 'center' },\n  modalCancel: { backgroundColor: colors.backgroundSecondary, borderWidth: 1, borderColor: colors.border },\n  modalSave: { backgroundColor: colors.primary },\n  modalBtnText: { color: colors.white, fontWeight: 'bold' },\n});\n\n// Define listContent outside StyleSheet.create() because it needs dynamic Platform check\nconst listContentStyle = Platform.OS === 'web' ? {\n  paddingBottom: 100,\n  gap: 12,\n  paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n  paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n} : {\n  paddingBottom: 100,\n  gap: 12,\n};\n\n// Merge with base styles\nconst stylesWithListContent = {\n  ...styles,\n  listContent: listContentStyle,\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTimeManagementScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadReport'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [loadReport, selectedUser.id]","fix":{"range":[2094,2112],"text":"[loadReport, selectedUser.id]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":176,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5867,5882],"text":"×¡×”&quot;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5867,5882],"text":"×¡×”&ldquo;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5867,5882],"text":"×¡×”&#34;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5867,5882],"text":"×¡×”&rdquo;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n  TouchableOpacity,\n  Platform,\n  Dimensions,\n  StatusBar,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport { apiService } from '../utils/apiService';\n\ninterface AdminTimeManagementScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface HoursReport {\n  manager_hours: number;\n  team_total_hours: number;\n  by_task: Array<{\n    task_id: string;\n    task_title: string;\n    hours: number;\n  }>;\n  by_period: Array<{\n    period: string;\n    hours: number;\n  }>;\n  by_user: Array<{\n    user_id: string;\n    user_name: string;\n    hours: number;\n  }>;\n}\n\nexport default function AdminTimeManagementScreen({ navigation }: AdminTimeManagementScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [report, setReport] = useState<HoursReport | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n\n  useEffect(() => {\n    loadReport();\n  }, [selectedUser?.id]);\n\n  const loadReport = async () => {\n    if (!selectedUser?.id) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await apiService.getHoursReport(selectedUser.id);\n      if (res.success && res.data) {\n        setReport(res.data);\n      } else {\n        setError(res.error || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×“×•×—');\n      }\n    } catch (err: any) {\n      console.error('Error loading hours report:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×“×•×—');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadReport();\n    setRefreshing(false);\n  };\n\n  const formatHours = (hours: number) => {\n    return hours.toFixed(1);\n  };\n\n  const formatPeriod = (period: string) => {\n    // period format: \"YYYY-MM\"\n    const [year, month] = period.split('-');\n    const months = [\n      '×™× ×•××¨', '×¤×‘×¨×•××¨', '××¨×¥', '××¤×¨×™×œ', '×××™', '×™×•× ×™',\n      '×™×•×œ×™', '××•×’×•×¡×˜', '×¡×¤×˜××‘×¨', '××•×§×˜×•×‘×¨', '× ×•×‘××‘×¨', '×“×¦××‘×¨'\n    ];\n    return `${months[parseInt(month) - 1]} ${year}`;\n  };\n\n  return (\n    <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View \n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.title}>× ×™×”×•×œ ×–××Ÿ ×¢×•×‘×“×™×</Text>\n      </View>\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <ScrollView\n          contentContainerStyle={styles.scrollContent}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} />\n          }\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n        >\n\n        {loading && !report && (\n          <View style={styles.centerContainer}>\n            <ActivityIndicator size=\"large\" color={colors.primary} />\n            <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×“×•×—×•×ª...</Text>\n          </View>\n        )}\n\n        {error && (\n          <View style={styles.errorContainer}>\n            <Ionicons name=\"alert-circle-outline\" size={24} color={colors.error} />\n            <Text style={styles.errorText}>{error}</Text>\n            <TouchableOpacity style={styles.retryButton} onPress={loadReport}>\n              <Text style={styles.retryButtonText}>× ×¡×” ×©×•×‘</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {report && (\n          <>\n            {/* Summary Cards */}\n            <View style={styles.summaryContainer}>\n              <View style={styles.summaryCard}>\n                <Ionicons name=\"person-outline\" size={32} color={colors.primary} />\n                <Text style={styles.summaryValue}>{formatHours(report.manager_hours)}</Text>\n                <Text style={styles.summaryLabel}>×©×¢×•×ª ×”×× ×”×œ</Text>\n              </View>\n              <View style={styles.summaryCard}>\n                <Ionicons name=\"people-outline\" size={32} color={colors.success} />\n                <Text style={styles.summaryValue}>{formatHours(report.team_total_hours)}</Text>\n                <Text style={styles.summaryLabel}>×¡×”\"×› ×©×¢×•×ª ×”×¦×•×•×ª</Text>\n              </View>\n            </View>\n\n            {/* Hours by User */}\n            {report.by_user && report.by_user.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"people-outline\" size={20} color={colors.primary} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ××©×ª××©</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_user.map((item, index) => (\n                    <View key={item.user_id} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle}>{item.user_name}</Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < report.by_user.length - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {/* Hours by Task */}\n            {report.by_task && report.by_task.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"checkmark-done-outline\" size={20} color={colors.info} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ××©×™××”</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_task.slice(0, 10).map((item, index) => (\n                    <View key={item.task_id} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle} numberOfLines={2}>\n                          {item.task_title}\n                        </Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < Math.min(report.by_task.length, 10) - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {/* Hours by Period */}\n            {report.by_period && report.by_period.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"calendar-outline\" size={20} color={colors.warning} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ×ª×§×•×¤×”</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_period.map((item, index) => (\n                    <View key={item.period} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle}>{formatPeriod(item.period)}</Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < report.by_period.length - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {(!report.by_user || report.by_user.length === 0) &&\n              (!report.by_task || report.by_task.length === 0) &&\n              (!report.by_period || report.by_period.length === 0) && (\n                <View style={styles.emptyContainer}>\n                  <Ionicons name=\"time-outline\" size={48} color={colors.textSecondary} />\n                  <Text style={styles.emptyText}>××™×Ÿ × ×ª×•× ×™ ×©×¢×•×ª ×¢×‘×•×“×” ×œ×”×¦×’×”</Text>\n                </View>\n              )}\n          </>\n        )}\n        </ScrollView>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  scrollContent: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: 100,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  backButton: {\n    padding: 8,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: 'right',\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  loadingText: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  errorContainer: {\n    backgroundColor: colors.errorLight,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.error,\n    textAlign: 'center',\n  },\n  retryButton: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    backgroundColor: colors.error,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  retryButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  summaryContainer: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  summaryCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    alignItems: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  summaryValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  summaryLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  section: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  list: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    overflow: 'hidden',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  listItem: {\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  listItemContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  listItemTitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: 'right',\n    marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  listItemValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  separator: {\n    height: 1,\n    backgroundColor: colors.border,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  emptyText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/BookmarksScreen.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/navesarussi/KC/DEV/MVP/screens/BookmarksScreen.tsx:72:5\n  70 |\n  71 |   useEffect(() => {\n> 72 |     loadBookmarks();\n     |     ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  73 |   }, [selectedUser]);\n  74 |\n  75 |   // Refresh data when screen comes into focus","line":72,"column":5,"nodeType":null,"endLine":72,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadBookmarks'. Either include it or remove the dependency array.","line":73,"column":6,"nodeType":"ArrayExpression","endLine":73,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [loadBookmarks, selectedUser]","fix":{"range":[3091,3105],"text":"[loadBookmarks, selectedUser]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `loadBookmarks`, but the source dependencies were [selectedUser]. Inferred different dependency than source.\n\n/Users/navesarussi/KC/DEV/MVP/screens/BookmarksScreen.tsx:77:17\n  75 |   // Refresh data when screen comes into focus\n  76 |   useFocusEffect(\n> 77 |     useCallback(() => {\n     |                 ^^^^^^^\n> 78 |       console.log('ğŸ”– BookmarksScreen - Screen focused, refreshing bookmarks...');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 79 |       loadBookmarks();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 80 |       // Force re-render by updating refresh key\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 81 |       setRefreshKey(prev => prev + 1);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 82 |     }, [selectedUser])\n     | ^^^^^^ Could not preserve existing manual memoization\n  83 |   );\n  84 |\n  85 |   const onRefresh = async () => {","line":77,"column":17,"nodeType":null,"endLine":82,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadBookmarks'. Either include it or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [loadBookmarks]","fix":{"range":[3399,3413],"text":"[loadBookmarks]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Shows user's bookmarked posts with remove and clear-all actions.\n// - Reached from: Home/Profile menus and routes as 'BookmarksScreen'.\n// - Provides: Loads bookmarks by user, pull-to-refresh, remove single bookmark, clear all (client-side for now).\n// - Reads from context: `useUser()` -> `selectedUser`.\n// - External deps/services: `bookmarksService` (get/remove), i18n translations.\n\n// TODO: Add comprehensive error handling with user-friendly messages\n// TODO: Implement proper loading states and skeleton screens\n// TODO: Add bookmark synchronization with backend when available\n// TODO: Implement proper pagination for large bookmark lists\n// TODO: Add bookmark categories and filtering functionality\n// TODO: Implement proper offline support with cache management\n// TODO: Add comprehensive accessibility support\n// TODO: Replace console.log with proper logging service\n// TODO: Add unit tests for all bookmark operations\n// TODO: Implement proper image loading and caching for bookmark thumbnails\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  SafeAreaView,\n  Alert,\n  RefreshControl,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { getBookmarks, removeBookmark, Bookmark } from '../utils/bookmarksService';\nimport colors from '../globals/colors';\nimport { FontSizes, IconSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\n\nexport default function BookmarksScreen() {\n  // TODO: Extract state management to custom hook (useBookmarksState)\n  // TODO: Add proper TypeScript interfaces for all props and state\n  // TODO: Implement proper error boundaries for crash prevention\n  // TODO: Add comprehensive analytics tracking for bookmark actions\n  const navigation = useNavigation();\n  const { selectedUser } = useUser();\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const { t } = useTranslation(['bookmarks','common']);\n\n  const loadBookmarks = async () => {\n    // TODO: Add proper loading state management\n    // TODO: Implement retry logic for failed requests\n    // TODO: Add proper error classification and handling\n    // TODO: Implement caching mechanism to reduce API calls\n    if (!selectedUser) {\n      Alert.alert(t('common:errorTitle'), t('bookmarks:selectUserFirst'));\n      return;\n    }\n\n    try {\n      const userBookmarks = await getBookmarks(selectedUser.id);\n      setBookmarks(userBookmarks);\n    } catch (error) {\n      console.error('âŒ Load bookmarks error:', error);\n      // TODO: Replace Alert.alert with proper toast/snackbar notification\n      // TODO: Add error tracking and monitoring\n      Alert.alert(t('common:errorTitle'), t('bookmarks:loadError'));\n    }\n  };\n\n  useEffect(() => {\n    loadBookmarks();\n  }, [selectedUser]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”– BookmarksScreen - Screen focused, refreshing bookmarks...');\n      loadBookmarks();\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [selectedUser])\n  );\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadBookmarks();\n    setRefreshing(false);\n  };\n\n  const handleRemoveBookmark = async (bookmark: Bookmark) => {\n    if (!selectedUser) return;\n\n    Alert.alert(\n      t('bookmarks:removeTitle'),\n      t('bookmarks:removeMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('bookmarks:removeConfirm'),\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              await removeBookmark(selectedUser.id, bookmark.postId);\n              setBookmarks(prev => prev.filter(b => b.id !== bookmark.id));\n              console.log('âœ… Bookmark removed');\n            } catch (error) {\n              console.error('âŒ Remove bookmark error:', error);\n              Alert.alert(t('common:errorTitle'), t('bookmarks:removeError'));\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleClearAll = () => {\n    if (!selectedUser) return;\n\n    Alert.alert(\n      t('bookmarks:clearTitle'),\n      t('bookmarks:clearMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('bookmarks:clearConfirm'),\n          style: 'destructive',\n          onPress: () => {\n            setBookmarks([]);\n            console.log('âœ… All bookmarks cleared');\n          }\n        }\n      ]\n    );\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));\n    \n    if (diffInHours < 1) return t('common:time.now');\n    if (diffInHours < 24) return t('common:time.hoursAgo', { count: diffInHours });\n    return date.toLocaleDateString();\n  };\n\n  const renderBookmark = ({ item }: { item: Bookmark }) => (\n    <View style={styles.bookmarkContainer}>\n      <Image source={{ uri: item.postData.thumbnail }} style={styles.thumbnail} />\n      \n      <View style={styles.contentContainer}>\n        <View style={styles.bookmarkHeader}>\n          <View style={styles.userInfo}>\n            <Image source={{ uri: item.postData.user.avatar }} style={styles.userAvatar} />\n            <View style={styles.userDetails}>\n              <Text style={styles.userName}>{item.postData.user.name}</Text>\n              <Text style={styles.timestamp}>{formatTimestamp(item.timestamp)}</Text>\n            </View>\n          </View>\n          \n          <TouchableOpacity \n            style={styles.removeButton}\n            onPress={() => handleRemoveBookmark(item)}\n          >\n            <Ionicons name=\"close-circle\" size={IconSizes.small} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n        \n        <Text style={styles.title}>{item.postData.title}</Text>\n        <Text style={styles.description} numberOfLines={2}>\n          {item.postData.description}\n        </Text>\n      </View>\n    </View>\n  );\n\n  if (!selectedUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"person-outline\" size={IconSizes.xxlarge} color={colors.textSecondary} />\n          <Text style={styles.emptyTitle}>{t('bookmarks:selectUserTitle')}</Text>\n          <Text style={styles.emptySubtitle}>{t('bookmarks:selectUserSubtitle')}</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>{t('bookmarks:title')}</Text>\n        {bookmarks.length > 0 && (\n          <TouchableOpacity onPress={handleClearAll} style={styles.clearButton}>\n            <Ionicons name=\"trash-outline\" size={IconSizes.xsmall} color={colors.error} />\n            <Text style={styles.clearButtonText}>{t('bookmarks:clearConfirm')}</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {bookmarks.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"bookmark-outline\" size={IconSizes.xxlarge} color={colors.textSecondary} />\n          <Text style={styles.emptyTitle}>{t('bookmarks:emptyTitle')}</Text>\n          <Text style={styles.emptySubtitle}>{t('bookmarks:emptySubtitle')}</Text>\n        </View>\n      ) : (\n        <FlatList\n          data={bookmarks}\n          renderItem={renderBookmark}\n          keyExtractor={(item) => item.id}\n          contentContainerStyle={styles.listContainer}\n          showsVerticalScrollIndicator={false}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n          }\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.large,\n    //TODO: change font size to be relative to the screen size\n    //TODO: move font to globals\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  clearButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 8,\n  },\n  clearButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.error,\n    //TODO: change margin to be relative to the screen size\n    marginLeft: 4,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 32,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    //TODO: change margin to be relative to the screen size\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  listContainer: {\n    //TODO: change padding to be relative to the screen size\n    padding: 16,\n  },\n  bookmarkContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    overflow: 'hidden',\n    elevation: 2,\n    boxShadow: '0 1px 4px rgba(0, 0, 0, 0.1)',\n  },\n  thumbnail: {\n    width: 80,\n    height: 80,\n  },\n  contentContainer: {\n    flex: 1,\n    padding: 12,\n  },\n  bookmarkHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    marginRight: 8,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  timestamp: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  removeButton: {\n    padding: 4,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  description: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    lineHeight: 16,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChallengeDetailsScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadChallengeDetails'. Either include it or remove the dependency array.","line":66,"column":8,"nodeType":"ArrayExpression","endLine":66,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [loadChallengeDetails]","fix":{"range":[2421,2434],"text":"[loadChallengeDetails]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Challenge Details Screen\n// Shows full challenge information, join button, and entry tracking\nimport React, { useCallback, useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  ScrollView,\n  ActivityIndicator,\n  Alert,\n  TextInput,\n  Modal,\n  Image,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute, RouteProp } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport {\n  CommunityChallenge,\n  ChallengeParticipant,\n  ChallengeEntry,\n  DonationsStackParamList,\n} from '../globals/types';\nimport CommentsModal from '../components/CommentsModal';\n\ntype ChallengeDetailsScreenRouteProp = RouteProp<DonationsStackParamList, 'ChallengeDetailsScreen'>;\n\ninterface ChallengeDetailsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n}\n\nexport default function ChallengeDetailsScreen({ navigation }: ChallengeDetailsScreenProps) {\n  const route = useRoute<ChallengeDetailsScreenRouteProp>();\n  const { challengeId } = route.params;\n  const { selectedUser: user } = useUser();\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n\n  const [loading, setLoading] = useState(true);\n  const [challenge, setChallenge] = useState<CommunityChallenge | null>(null);\n  const [participants, setParticipants] = useState<ChallengeParticipant[]>([]);\n  const [userParticipation, setUserParticipation] = useState<ChallengeParticipant | null>(null);\n  const [recentEntries, setRecentEntries] = useState<ChallengeEntry[]>([]);\n  const [isJoined, setIsJoined] = useState(false);\n\n  // Entry form state\n  const [entryValue, setEntryValue] = useState('');\n  const [entryNotes, setEntryNotes] = useState('');\n  const [submittingEntry, setSubmittingEntry] = useState(false);\n  const [showEntryModal, setShowEntryModal] = useState(false);\n  \n  // Comments state\n  const [showCommentsModal, setShowCommentsModal] = useState(false);\n  const [challengePostId, setChallengePostId] = useState<string | null>(null);\n\n  useFocusEffect(\n    useCallback(() => {\n      loadChallengeDetails();\n    }, [challengeId])\n  );\n\n  const loadChallengeDetails = async () => {\n    try {\n      setLoading(true);\n      const response = await db.getChallengeDetails(challengeId);\n\n      if (response.success && response.data) {\n        setChallenge(response.data);\n        setParticipants(response.data.participants || []);\n\n        // Get the post_id for comments (challenges auto-create posts)\n        console.log('ğŸ“ Challenge post_id:', response.data.post_id);\n        if (response.data.post_id) {\n          setChallengePostId(response.data.post_id);\n        } else {\n          console.warn('âš ï¸ Challenge has no post_id - comments will not be available');\n        }\n\n        // Check if user is participating\n        if (user?.id) {\n          const userPart = response.data.participants?.find(\n            (p: ChallengeParticipant) => p.user_id === user.id\n          );\n          setUserParticipation(userPart || null);\n          setIsJoined(!!userPart);\n\n          // Load user's entries if joined\n          if (userPart) {\n            await loadUserEntries();\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading challenge details:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserEntries = async () => {\n    if (!user?.id) return;\n    try {\n      const response = await db.getChallengeEntries(challengeId, user.id, 10, 0);\n      if (response.success && response.data) {\n        setRecentEntries(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading entries:', error);\n    }\n  };\n\n  const handleJoinChallenge = async () => {\n    if (!user?.id) {\n      Alert.alert(t('common:error'), t('challenges:messages.loginToJoin'));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await db.joinChallenge(challengeId, user.id);\n\n      if (response.success) {\n        showToast(t('challenges:challengeJoined'), 'success');\n        await loadChallengeDetails();\n      }\n    } catch (error: any) {\n      console.error('Error joining challenge:', error);\n      if (error.message?.includes('Already joined')) {\n        showToast(t('challenges:alreadyJoined'), 'info');\n      } else {\n        showToast(t('challenges:messages.errorJoining'), 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddEntry = async () => {\n    if (!user?.id) {\n      Alert.alert(t('common:error'), t('challenges:messages.loginRequired'));\n      return;\n    }\n\n    if (!isJoined) {\n      Alert.alert(t('common:error'), '× × ×œ×”×¦×˜×¨×£ ×œ××ª×’×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    // Validate entry value\n    let value = 0;\n    if (challenge?.type === 'BOOLEAN') {\n      value = 1; // Always 1 for boolean (completed)\n    } else {\n      const parsedValue = parseFloat(entryValue);\n      if (isNaN(parsedValue) || parsedValue < 0) {\n        Alert.alert(t('common:error'), '× × ×œ×”×–×™×Ÿ ×¢×¨×š ×—×•×§×™');\n        return;\n      }\n      value = parsedValue;\n    }\n\n    try {\n      setSubmittingEntry(true);\n      const response = await db.addChallengeEntry(challengeId, {\n        user_id: user.id,\n        value,\n        notes: entryNotes.trim() || undefined,\n      });\n\n      if (response.success) {\n        const streak = response.data?.current_streak || 0;\n        showToast(`${t('challenges:entryAdded')} ${t('challenges:stats.streakDays', { count: streak })}`, 'success');\n        \n        // Reset form\n        setEntryValue('');\n        setEntryNotes('');\n        setShowEntryModal(false);\n\n        // Reload details\n        await loadChallengeDetails();\n      }\n    } catch (error: any) {\n      console.error('Error adding entry:', error);\n      if (error.message?.includes('already exists')) {\n        showToast(t('challenges:messages.alreadyCompletedToday'), 'info');\n      } else {\n        showToast(t('challenges:messages.errorAddingEntry'), 'error');\n      }\n    } finally {\n      setSubmittingEntry(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return t('challenges:details.today');\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return t('challenges:details.yesterday');\n    } else {\n      const daysAgo = Math.floor((today.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n      return t('challenges:details.daysAgo', { count: daysAgo });\n    }\n  };\n\n  const getDifficultyColor = (difficulty?: string) => {\n    switch (difficulty) {\n      case 'easy':\n        return colors.success;\n      case 'medium':\n        return colors.warning;\n      case 'hard':\n        return colors.error;\n      case 'expert':\n        return colors.primary;\n      default:\n        return colors.textSecondary;\n    }\n  };\n\n  if (loading && !challenge) {\n    return (\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  if (!challenge) {\n    return (\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"alert-circle-outline\" size={64} color={colors.error} />\n          <Text style={styles.errorText}>{t('challenges:messages.challengeNotFound')}</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => navigation.goBack()}\n          >\n            <Text style={styles.backButtonText}>{t('common:back')}</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity\n            style={styles.backIcon}\n            onPress={() => navigation.goBack()}\n          >\n            <Ionicons name=\"arrow-back\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>{t('challenges:details.title')}</Text>\n          <View style={{ width: 24 }} />\n        </View>\n\n        {/* Challenge Info */}\n        <View style={styles.challengeCard}>\n          <View style={styles.challengeHeader}>\n            <Text style={styles.challengeTitle}>{challenge.title}</Text>\n            {challenge.difficulty && (\n              <View\n                style={[\n                  styles.difficultyBadge,\n                  { backgroundColor: getDifficultyColor(challenge.difficulty) },\n                ]}\n              >\n                <Text style={styles.difficultyText}>\n                  {t(`challenges:difficulty.${challenge.difficulty}`)}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {challenge.description && (\n            <Text style={styles.challengeDescription}>{challenge.description}</Text>\n          )}\n\n          <View style={styles.challengeMeta}>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"person-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t('challenges:stats.createdBy')}: {challenge.creator_name || t('common:unknownUser')}\n              </Text>\n            </View>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t('challenges:stats.participantsCount', { count: challenge.participants_count })}\n              </Text>\n            </View>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t(`challenges:frequency.${challenge.frequency}`)}\n              </Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Join Button (if not joined) */}\n        {!isJoined && (\n          <TouchableOpacity\n            style={styles.joinButton}\n            onPress={handleJoinChallenge}\n            disabled={loading}\n          >\n            {loading ? (\n              <ActivityIndicator color={colors.white} />\n            ) : (\n              <>\n                <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n                <Text style={styles.joinButtonText}>{t('challenges:joinChallenge')}</Text>\n              </>\n            )}\n          </TouchableOpacity>\n        )}\n\n        {/* Participation Status (if joined) */}\n        {isJoined && (\n          <View style={styles.participationCard}>\n            <View style={styles.participationHeader}>\n              <Ionicons name=\"checkmark-circle\" size={24} color={colors.success} />\n              <Text style={styles.participationText}>\n                {t('challenges:messages.youAreParticipating', '××ª×” ××©×ª×ª×£ ×‘××ª×’×¨ ×–×”')}\n              </Text>\n            </View>\n            <TouchableOpacity\n              style={styles.viewStatsButton}\n              onPress={() => (navigation as any).navigate('ChallengeStatisticsScreen')}\n            >\n              <Ionicons name=\"stats-chart-outline\" size={20} color={colors.primary} />\n              <Text style={styles.viewStatsText}>{t('challenges:viewStatistics')}</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {/* Entry Modal */}\n        <Modal\n          visible={showEntryModal}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setShowEntryModal(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>{t('challenges:addEntryButton')}</Text>\n                <TouchableOpacity onPress={() => setShowEntryModal(false)}>\n                  <Ionicons name=\"close\" size={28} color={colors.textPrimary} />\n                </TouchableOpacity>\n              </View>\n\n              {challenge.type !== 'BOOLEAN' && (\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>{t('challenges:fields.value')} *</Text>\n                  <TextInput\n                    style={styles.input}\n                    placeholder={\n                      challenge.type === 'DURATION'\n                        ? t('challenges:fields.goalValueMinutes')\n                        : t('challenges:fields.goalValuePlaceholder')\n                    }\n                    value={entryValue}\n                    onChangeText={setEntryValue}\n                    keyboardType=\"numeric\"\n                  />\n                </View>\n              )}\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>{t('challenges:fields.notes')}</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  placeholder={t('challenges:fields.notesPlaceholder')}\n                  value={entryNotes}\n                  onChangeText={setEntryNotes}\n                  multiline\n                  numberOfLines={3}\n                />\n              </View>\n\n              <TouchableOpacity\n                style={[styles.addEntryButton, submittingEntry && styles.addEntryButtonDisabled]}\n                onPress={handleAddEntry}\n                disabled={submittingEntry}\n              >\n                {submittingEntry ? (\n                  <ActivityIndicator color={colors.white} />\n                ) : (\n                  <>\n                    <Ionicons name=\"checkmark-circle-outline\" size={24} color={colors.white} />\n                    <Text style={styles.addEntryButtonText}>{t('challenges:addEntry')}</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Recent Activity (Anonymous - shows activity without personal data) */}\n        {isJoined && (\n          <View style={styles.activityCard}>\n            <Text style={styles.sectionTitle}>{t('challenges:details.recentActivity', '×¤×¢×™×œ×•×ª ××—×¨×•× ×”')}</Text>\n            <Text style={styles.activitySubtitle}>\n              {t('challenges:messages.anonymousActivity', '×”×‘×™×¦×•×¢×™× ×©×œ×š ×¤×¨×˜×™×™× ×•×× ×•× ×™××™×™×')}\n            </Text>\n            {recentEntries.length > 0 ? (\n              recentEntries.slice(0, 5).map((entry) => (\n                <View key={entry.id} style={styles.activityItem}>\n                  <Ionicons name=\"checkmark-circle\" size={20} color={colors.success} />\n                  <Text style={styles.activityDate}>{formatDate(entry.entry_date)}</Text>\n                  {entry.notes && (\n                    <Text style={styles.activityNote} numberOfLines={1}>\n                      - {entry.notes}\n                    </Text>\n                  )}\n                </View>\n              ))\n            ) : (\n              <Text style={styles.noActivityText}>\n                {t('challenges:messages.noEntries')}\n              </Text>\n            )}\n          </View>\n        )}\n\n        {/* Top Participants */}\n        {participants.length > 0 && (\n          <View style={styles.participantsCard}>\n            <Text style={styles.sectionTitle}>{t('challenges:details.topParticipants')}</Text>\n            {participants.slice(0, 5).map((participant, index) => (\n              <View key={participant.id} style={styles.participantItem}>\n                <View style={styles.participantRank}>\n                  <Text style={styles.rankNumber}>#{index + 1}</Text>\n                </View>\n                <Text style={styles.participantName}>{participant.user_name || t('common:unknownUser')}</Text>\n                <View style={styles.participantStats}>\n                  <Ionicons name=\"flame\" size={16} color={colors.error} />\n                  <Text style={styles.participantStreak}>{participant.best_streak}</Text>\n                </View>\n              </View>\n            ))}\n          </View>\n        )}\n\n        {/* Comments Section */}\n        <View style={styles.commentsSection}>\n          <TouchableOpacity\n            style={styles.commentsButton}\n            onPress={() => setShowCommentsModal(true)}\n            disabled={!challengePostId}\n          >\n            <Ionicons name=\"chatbubbles-outline\" size={24} color={colors.primary} />\n            <Text style={styles.commentsButtonText}>{t('challenges:viewComments')}</Text>\n            <Ionicons name=\"chevron-forward\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n          <Text style={styles.commentsHint}>{t('challenges:commentsHint')}</Text>\n        </View>\n      </ScrollView>\n\n      {/* Floating Action Button (if joined) */}\n      {isJoined && (\n        <TouchableOpacity\n          style={styles.fab}\n          onPress={() => setShowEntryModal(true)}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"add\" size={28} color={colors.white} />\n        </TouchableOpacity>\n      )}\n\n      {/* Comments Modal */}\n      {challengePostId && challenge && (\n        <CommentsModal\n          visible={showCommentsModal}\n          postId={challengePostId}\n          postTitle={challenge.title || '××ª×’×¨'}\n          postUser={{\n            id: challenge.creator_id || '',\n            name: challenge.creator_name || '××©×ª××©',\n            avatar: 'https://picsum.photos/seed/user/100/100',\n          }}\n          onClose={() => setShowCommentsModal(false)}\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  errorText: {\n    fontSize: FontSizes.large,\n    color: colors.error,\n    marginTop: 16,\n    marginBottom: 24,\n    textAlign: 'center' as const,\n  },\n  backButton: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    backgroundColor: colors.primary,\n    borderRadius: 8,\n  },\n  backButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  backIcon: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  challengeHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 12,\n  },\n  challengeTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    flex: 1,\n    marginRight: 8,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  challengeDescription: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    lineHeight: 22,\n    marginBottom: 16,\n  },\n  challengeMeta: {\n    gap: 8,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  joinButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n  },\n  joinButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  participationCard: {\n    backgroundColor: colors.successLight,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.success,\n  },\n  participationHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 12,\n  },\n  participationText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.success,\n  },\n  viewStatsButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    backgroundColor: colors.white,\n    borderRadius: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: colors.primary,\n  },\n  viewStatsText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n  },\n  formGroup: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top' as const,\n  },\n  addEntryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.success,\n    borderRadius: 8,\n    padding: 14,\n    marginTop: 8,\n  },\n  addEntryButtonDisabled: {\n    opacity: 0.6,\n  },\n  addEntryButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  activityCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  activitySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    fontStyle: 'italic' as const,\n  },\n  activityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  activityDate: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  activityNote: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    flex: 1,\n  },\n  noActivityText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n    paddingVertical: 20,\n  },\n  participantsCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  participantItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  participantRank: {\n    width: 40,\n    alignItems: 'center',\n  },\n  rankNumber: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.primary,\n  },\n  participantName: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  participantStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  participantStreak: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.error,\n  },\n  fab: {\n    position: 'absolute' as const,\n    bottom: 24,\n    right: 24,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: colors.success,\n    justifyContent: 'center' as const,\n    alignItems: 'center' as const,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 8,\n  },\n  commentsSection: {\n    marginTop: 24,\n    paddingTop: 24,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  commentsButton: {\n    flexDirection: 'row' as const,\n    alignItems: 'center' as const,\n    justifyContent: 'space-between' as const,\n    backgroundColor: colors.white,\n    padding: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    marginBottom: 8,\n  },\n  commentsButtonText: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    fontWeight: '600' as const,\n    color: colors.textPrimary,\n    marginLeft: 12,\n  },\n  commentsHint: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n    marginBottom: 24,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end' as const,\n  },\n  modalContent: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx:31:20\n  29 | // Animated Card Component\n  30 | const AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n> 31 |   const fadeAnim = useRef(new Animated.Value(0)).current;\n     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   const slideAnim = useRef(new Animated.Value(30)).current;\n  33 |\n  34 |   useEffect(() => {","line":31,"column":20,"nodeType":null,"endLine":31,"endColumn":57},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx:32:21\n  30 | const AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n  31 |   const fadeAnim = useRef(new Animated.Value(0)).current;\n> 32 |   const slideAnim = useRef(new Animated.Value(30)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  33 |\n  34 |   useEffect(() => {\n  35 |     Animated.parallel([","line":32,"column":21,"nodeType":null,"endLine":32,"endColumn":59},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx:32:21\n  30 | const AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n  31 |   const fadeAnim = useRef(new Animated.Value(0)).current;\n> 32 |   const slideAnim = useRef(new Animated.Value(30)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  33 |\n  34 |   useEffect(() => {\n  35 |     Animated.parallel([","line":32,"column":21,"nodeType":null,"endLine":32,"endColumn":59},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx:32:21\n  30 | const AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n  31 |   const fadeAnim = useRef(new Animated.Value(0)).current;\n> 32 |   const slideAnim = useRef(new Animated.Value(30)).current;\n     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  33 |\n  34 |   useEffect(() => {\n  35 |     Animated.parallel([","line":32,"column":21,"nodeType":null,"endLine":32,"endColumn":59},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'delay', 'fadeAnim', and 'slideAnim'. Either include them or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [delay, fadeAnim, slideAnim]","fix":{"range":[1618,1620],"text":"[delay, fadeAnim, slideAnim]"}}]},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx:53:14\n  51 |   return (\n  52 |     <Animated.View\n> 53 |       style={{\n     |              ^\n> 54 |         opacity: fadeAnim,\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |         transform: [{ translateY: slideAnim }],\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |       }}\n     | ^^^^^^^^ Cannot access ref value during render\n  57 |     >\n  58 |       {children}\n  59 |     </Animated.View>","line":53,"column":14,"nodeType":null,"endLine":56,"endColumn":8},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadStatistics'. Either include it or remove the dependency array.","line":78,"column":8,"nodeType":"ArrayExpression","endLine":78,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadStatistics]","fix":{"range":[2340,2342],"text":"[loadStatistics]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'challenges' logical expression could make the dependencies of useMemo Hook (at line 134) change on every render. To fix this, wrap the initialization of 'challenges' in its own useMemo() Hook.","line":103,"column":9,"nodeType":"VariableDeclarator","endLine":103,"endColumn":50},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'challenges' logical expression could make the dependencies of useMemo Hook (at line 146) change on every render. To fix this, wrap the initialization of 'challenges' in its own useMemo() Hook.","line":103,"column":9,"nodeType":"VariableDeclarator","endLine":103,"endColumn":50},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'challenges' logical expression could make the dependencies of useMemo Hook (at line 187) change on every render. To fix this, wrap the initialization of 'challenges' in its own useMemo() Hook.","line":103,"column":9,"nodeType":"VariableDeclarator","endLine":103,"endColumn":50},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'challenges' logical expression could make the dependencies of useMemo Hook (at line 201) change on every render. To fix this, wrap the initialization of 'challenges' in its own useMemo() Hook.","line":103,"column":9,"nodeType":"VariableDeclarator","endLine":103,"endColumn":50},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'challenges' logical expression could make the dependencies of useMemo Hook (at line 226) change on every render. To fix this, wrap the initialization of 'challenges' in its own useMemo() Hook.","line":103,"column":9,"nodeType":"VariableDeclarator","endLine":103,"endColumn":50},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":408,"column":93,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[14971,15013],"text":" ×¡×”&quot;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[14971,15013],"text":" ×¡×”&ldquo;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[14971,15013],"text":" ×¡×”&#34;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[14971,15013],"text":" ×¡×”&rdquo;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Challenge Statistics Screen\n// Shows user's personal statistics across all community challenges with interactive charts\nimport React, { useCallback, useState, useMemo, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  ActivityIndicator,\n  TouchableOpacity,\n  Dimensions,\n  Animated,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { LineChart, BarChart, ProgressChart, PieChart } from 'react-native-chart-kit';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { ChallengeStatistics } from '../globals/types';\n\nconst screenWidth = Dimensions.get('window').width;\n\n// Animated Card Component\nconst AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const slideAnim = useRef(new Animated.Value(30)).current;\n\n  useEffect(() => {\n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 1,\n        duration: 500,\n        delay,\n        useNativeDriver: true,\n      }),\n      Animated.timing(slideAnim, {\n        toValue: 0,\n        duration: 500,\n        delay,\n        useNativeDriver: true,\n      }),\n    ]).start();\n  }, []);\n\n  return (\n    <Animated.View\n      style={{\n        opacity: fadeAnim,\n        transform: [{ translateY: slideAnim }],\n      }}\n    >\n      {children}\n    </Animated.View>\n  );\n};\n\ninterface ChallengeStatisticsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n}\n\nexport default function ChallengeStatisticsScreen({ navigation }: ChallengeStatisticsScreenProps) {\n  const { selectedUser: user } = useUser();\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n\n  const [loading, setLoading] = useState(true);\n  const [statistics, setStatistics] = useState<ChallengeStatistics | null>(null);\n\n  useFocusEffect(\n    useCallback(() => {\n      loadStatistics();\n    }, [])\n  );\n\n  const loadStatistics = async () => {\n    if (!user?.id) {\n      showToast(t('challenges:messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await db.getChallengeStatistics(user.id);\n\n      if (response.success && response.data) {\n        setStatistics(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading statistics:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const overall = statistics?.overall;\n  const challenges = statistics?.challenges || [];\n\n  // Chart configuration\n  const chartConfig = {\n    backgroundColor: colors.white,\n    backgroundGradientFrom: colors.white,\n    backgroundGradientTo: colors.white,\n    decimalPlaces: 0,\n    color: (opacity = 1) => `rgba(74, 144, 226, ${opacity})`,\n    labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\n    style: {\n      borderRadius: 16,\n    },\n    propsForDots: {\n      r: '6',\n      strokeWidth: '2',\n      stroke: colors.primary,\n    },\n  };\n\n  // Prepare data for charts\n  const streakData = useMemo(() => {\n    const sorted = [...challenges].sort((a, b) => b.best_streak - a.best_streak).slice(0, 5);\n    return {\n      labels: sorted.map((c) => c.title.substring(0, 10) + '...'),\n      datasets: [\n        {\n          data: sorted.map((c) => c.best_streak || 0),\n        },\n      ],\n    };\n  }, [challenges]);\n\n  const entriesData = useMemo(() => {\n    const sorted = [...challenges].sort((a, b) => b.total_entries - a.total_entries).slice(0, 5);\n    return {\n      labels: sorted.map((c) => c.title.substring(0, 10) + '...'),\n      datasets: [\n        {\n          data: sorted.map((c) => c.total_entries || 0),\n        },\n      ],\n    };\n  }, [challenges]);\n\n  const difficultyDistribution = useMemo(() => {\n    const distribution = challenges.reduce(\n      (acc, c) => {\n        acc[c.difficulty || 'easy'] = (acc[c.difficulty || 'easy'] || 0) + 1;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    return [\n      {\n        name: '×§×œ',\n        population: distribution.easy || 0,\n        color: colors.success,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '×‘×™× ×•× ×™',\n        population: distribution.medium || 0,\n        color: colors.warning,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '×§×©×”',\n        population: distribution.hard || 0,\n        color: colors.error,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '××•××—×”',\n        population: distribution.expert || 0,\n        color: colors.primary,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n    ].filter((item) => item.population > 0);\n  }, [challenges]);\n\n  const progressData = useMemo(() => {\n    const avgProgress = challenges.length > 0\n      ? challenges.reduce((sum, c) => {\n          const progress = c.goal_value ? Math.min(1, c.total_entries / c.goal_value) : 0.5;\n          return sum + progress;\n        }, 0) / challenges.length\n      : 0;\n\n    return {\n      labels: ['×××•×¦×¢ ×”×©×œ××ª ×™×¢×“×™×'],\n      data: [avgProgress],\n    };\n  }, [challenges]);\n\n  // Calculate insights\n  const insights = useMemo(() => {\n    if (challenges.length === 0) return null;\n\n    const totalStreaks = challenges.reduce((sum, c) => sum + (c.current_streak || 0), 0);\n    const avgStreak = (totalStreaks / challenges.length).toFixed(1);\n    \n    const mostActiveChallenge = challenges.reduce((max, c) => \n      (c.total_entries > max.total_entries ? c : max), challenges[0]);\n    \n    const longestStreak = challenges.reduce((max, c) => \n      (c.best_streak > max.best_streak ? c : max), challenges[0]);\n\n    const completionRate = challenges.filter(c => \n      c.goal_value && c.total_entries >= c.goal_value\n    ).length;\n\n    return {\n      avgStreak,\n      mostActiveChallenge: mostActiveChallenge?.title || '',\n      longestStreak: longestStreak?.best_streak || 0,\n      completionRate,\n    };\n  }, [challenges]);\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => navigation.goBack()}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('challenges:statistics')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={[]}\n        onSearch={() => {}}\n        hideSortButton={true}\n      />\n\n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:statistics')}</Text>\n      </View>\n\n      {loading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      ) : (\n        <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n          {challenges.length === 0 ? (\n            <View style={styles.emptyState}>\n              <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n              <Text style={styles.emptyText}>{t('challenges:messages.noChallenges')}</Text>\n            </View>\n          ) : (\n            <>\n              {/* Overall Statistics */}\n              <AnimatedCard delay={0}>\n                <View style={styles.overallCard}>\n                  <Text style={styles.cardTitle}>{t('challenges:stats.overallSuccess')}</Text>\n                  <View style={styles.statsGrid}>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"trophy-outline\" size={32} color={colors.warning} />\n                      <Text style={styles.statValue}>{overall?.active_challenges || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.activeChallenges')}</Text>\n                    </View>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"flame-outline\" size={32} color={colors.error} />\n                      <Text style={styles.statValue}>{overall?.best_streak_overall || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.bestStreak')}</Text>\n                    </View>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"checkmark-done-outline\" size={32} color={colors.success} />\n                      <Text style={styles.statValue}>{overall?.total_entries || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.totalEntries')}</Text>\n                    </View>\n                  </View>\n                </View>\n              </AnimatedCard>\n\n              {/* Insights Card */}\n              {insights && (\n                <AnimatedCard delay={100}>\n                  <View style={styles.insightsCard}>\n                    <Text style={styles.cardTitle}>\n                      <Ionicons name=\"bulb\" size={20} color={colors.warning} /> ×ª×•×‘× ×•×ª\n                    </Text>\n                    <View style={styles.insightsGrid}>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"analytics\" size={24} color={colors.primary} />\n                        <Text style={styles.insightLabel}>×××•×¦×¢ ×¨×¦×£</Text>\n                        <Text style={styles.insightValue}>{insights.avgStreak} ×™××™×</Text>\n                      </View>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"trophy\" size={24} color={colors.warning} />\n                        <Text style={styles.insightLabel}>×¨×¦×£ ×”×›×™ ××¨×•×š</Text>\n                        <Text style={styles.insightValue}>{insights.longestStreak} ×™××™×</Text>\n                      </View>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"checkmark-circle\" size={24} color={colors.success} />\n                        <Text style={styles.insightLabel}>××ª×’×¨×™× ×©×”×•×©×œ××•</Text>\n                        <Text style={styles.insightValue}>{insights.completionRate}</Text>\n                      </View>\n                    </View>\n                    {insights.mostActiveChallenge && (\n                      <View style={styles.highlightBox}>\n                        <Ionicons name=\"star\" size={20} color={colors.warning} />\n                        <Text style={styles.highlightText}>\n                          ×”××ª×’×¨ ×”×›×™ ×¤×¢×™×œ ×©×œ×š: <Text style={styles.highlightBold}>{insights.mostActiveChallenge}</Text>\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Progress Chart */}\n              {progressData.data[0] > 0 && (\n                <AnimatedCard delay={200}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"trending-up\" size={20} color={colors.primary} /> ×”×©×œ××ª ×™×¢×“×™×\n                    </Text>\n                    <ProgressChart\n                      data={progressData}\n                      width={screenWidth - 64}\n                      height={180}\n                      strokeWidth={16}\n                      radius={50}\n                      chartConfig={chartConfig}\n                      hideLegend={false}\n                      style={styles.chart}\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Difficulty Distribution Pie Chart */}\n              {difficultyDistribution.length > 0 && (\n                <AnimatedCard delay={300}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"pie-chart\" size={20} color={colors.primary} /> ×”×ª×¤×œ×’×•×ª ×œ×¤×™ ×¨××ª ×§×•×©×™\n                    </Text>\n                    <PieChart\n                      data={difficultyDistribution}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={chartConfig}\n                      accessor=\"population\"\n                      backgroundColor=\"transparent\"\n                      paddingLeft=\"15\"\n                      center={[10, 0]}\n                      absolute\n                      style={styles.chart}\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Best Streaks Bar Chart */}\n              {streakData.datasets[0].data.length > 0 && streakData.datasets[0].data.some(d => d > 0) && (\n                <AnimatedCard delay={400}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"flame\" size={20} color={colors.error} /> ×”×¨×¦×¤×™× ×”×˜×•×‘×™× ×‘×™×•×ª×¨\n                    </Text>\n                    <BarChart\n                      data={streakData}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={{\n                        ...chartConfig,\n                        color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\n                      }}\n                      yAxisLabel=\"\"\n                      yAxisSuffix=\"\"\n                      style={styles.chart}\n                      showValuesOnTopOfBars\n                      fromZero\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Total Entries Bar Chart */}\n              {entriesData.datasets[0].data.length > 0 && entriesData.datasets[0].data.some(d => d > 0) && (\n                <AnimatedCard delay={500}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"checkmark-done\" size={20} color={colors.success} /> ×¡×”\"×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    </Text>\n                    <BarChart\n                      data={entriesData}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={{\n                        ...chartConfig,\n                        color: (opacity = 1) => `rgba(34, 197, 94, ${opacity})`,\n                      }}\n                      yAxisLabel=\"\"\n                      yAxisSuffix=\"\"\n                      style={styles.chart}\n                      showValuesOnTopOfBars\n                      fromZero\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Individual Challenges List */}\n              <Text style={styles.sectionTitle}>\n                <Ionicons name=\"list\" size={24} color={colors.primary} /> {t('challenges:filters.joined')}\n              </Text>\n              {challenges.map((challenge) => (\n                <View key={challenge.challenge_id} style={styles.challengeCard}>\n                  <View style={styles.challengeHeader}>\n                    <Text style={styles.challengeTitle}>{challenge.title}</Text>\n                    <View\n                      style={[\n                        styles.difficultyBadge,\n                        {\n                          backgroundColor:\n                            challenge.difficulty === 'easy'\n                              ? colors.success\n                              : challenge.difficulty === 'medium'\n                              ? colors.warning\n                              : challenge.difficulty === 'hard'\n                              ? colors.error\n                              : colors.primary,\n                        },\n                      ]}\n                    >\n                      <Text style={styles.difficultyText}>\n                        {t(`challenges:difficulty.${challenge.difficulty || 'easy'}`)}\n                      </Text>\n                    </View>\n                  </View>\n\n                  <View style={styles.progressSection}>\n                    <View style={styles.progressBar}>\n                      <View\n                        style={[\n                          styles.progressFill,\n                          {\n                            width: `${Math.min(\n                              100,\n                              challenge.goal_value\n                                ? (challenge.total_entries / challenge.goal_value) * 100\n                                : 50\n                            )}%`,\n                          },\n                        ]}\n                      />\n                    </View>\n                  </View>\n\n                  <View style={styles.challengeStats}>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"flame\" size={16} color={colors.error} />\n                      <Text style={styles.miniStatValue}>{challenge.current_streak}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.currentStreak')}</Text>\n                    </View>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"trophy\" size={16} color={colors.warning} />\n                      <Text style={styles.miniStatValue}>{challenge.best_streak}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.bestStreak')}</Text>\n                    </View>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"checkmark-done\" size={16} color={colors.success} />\n                      <Text style={styles.miniStatValue}>{challenge.total_entries}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.entries')}</Text>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </>\n          )}\n        </ScrollView>\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  overallCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: 24,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  insightsCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: 24,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  insightsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 16,\n  },\n  insightItem: {\n    alignItems: 'center',\n    gap: 6,\n    flex: 1,\n  },\n  insightLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  insightValue: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  highlightBox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.backgroundSecondary,\n    padding: 12,\n    borderRadius: 8,\n    borderLeftWidth: 3,\n    borderLeftColor: colors.warning,\n  },\n  highlightText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  highlightBold: {\n    fontWeight: '700',\n    color: colors.primary,\n  },\n  cardTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    textAlign: 'center' as const,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  statBox: {\n    alignItems: 'center',\n    gap: 8,\n  },\n  statValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  statLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n  },\n  chartCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 20,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  chartTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    textAlign: 'center',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  chart: {\n    marginVertical: 8,\n    borderRadius: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    marginTop: 8,\n  },\n  emptyState: {\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: 16,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  challengeHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  challengeTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  progressSection: {\n    marginBottom: 12,\n  },\n  progressBar: {\n    height: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 4,\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: colors.success,\n    borderRadius: 4,\n  },\n  challengeStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  miniStat: {\n    alignItems: 'center',\n    gap: 4,\n  },\n  miniStatValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  miniStatLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChatDetailScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'isLoadingProfile'. Either include it or remove the dependency array.","line":113,"column":6,"nodeType":"ArrayExpression","endLine":113,"endColumn":58,"suggestions":[{"desc":"Update the dependencies array to be: [otherUserId, isLoadingProfile, initialUserName, t, initialUserAvatar]","fix":{"range":[5241,5293],"text":"[otherUserId, isLoadingProfile, initialUserName, t, initialUserAvatar]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Conversation detail screen showing messages, input box, and media attachments.\n// - Reached from: 'ChatListScreen' and notifications deep links; route name 'ChatDetailScreen'.\n// - Expects route params: `{ conversationId: string, userName: string, userAvatar: string, otherUserId: string }`.\n// - Provides: Loads messages, subscribes to updates, marks as read, sends text/files, optional fake auto-replies for demo.\n// - Reads from context: `useUser()` -> selectedUser.\n// - External deps/services: `chatService` (get/subscribe/send/mark), `fileService` (pick/validate), i18n.\n// screens/ChatDetailScreen.tsx\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  KeyboardAvoidingView,\n  Platform,\n  Image,\n  Alert,\n  SafeAreaView,\n  StatusBar,\n  ActivityIndicator,\n  Dimensions,\n  Modal,\n} from 'react-native';\nimport { useNavigation, useRoute, RouteProp, useFocusEffect, NavigationProp } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport ChatMessageBubble from '../components/ChatMessageBubble';\nimport { RootStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { getMessages, sendMessage, markMessagesAsRead, Message, subscribeToMessages } from '../utils/chatService';\nimport { pickImage, pickVideo, takePhoto, pickDocument, validateFile, FileData } from '../utils/fileService';\nimport { uploadFileWithProgress, buildChatFilePath } from '../utils/storageService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/config.constants';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\n\ntype ChatDetailRouteParams = {\n  conversationId: string;\n  userName: string;\n  userAvatar: string;\n  otherUserId: string;\n};\n\nexport default function ChatDetailScreen() {\n  const navigation = useNavigation<NavigationProp<RootStackParamList>>();\n  const route = useRoute<RouteProp<Record<string, ChatDetailRouteParams>, string>>();\n  const routeParams = route.params || {};\n  const { conversationId: initialConversationId, userName: initialUserName, userAvatar: initialUserAvatar, otherUserId } = routeParams;\n  const { selectedUser } = useUser();\n  const { t } = useTranslation(['chat']);\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const [inputHeight, setInputHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxMessagesHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0 && inputHeight > 0\n    ? screenHeight - tabBarHeight - inputHeight - headerHeight\n    : undefined;\n\n  const [conversationId, setConversationId] = useState(initialConversationId);\n  const [inputText, setInputText] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSending, setIsSending] = useState(false);\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\n  const [userName, setUserName] = useState(initialUserName);\n  const [userAvatar, setUserAvatar] = useState(initialUserAvatar);\n  const [isLoadingProfile, setIsLoadingProfile] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadingFile, setUploadingFile] = useState<FileData | null>(null);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const flatListRef = useRef<FlatList>(null);\n\n  // Load user profile for the other user\n  const loadUserProfile = useCallback(async () => {\n    if (!USE_BACKEND || !otherUserId || isLoadingProfile) return;\n\n    setIsLoadingProfile(true);\n    try {\n      const response = await apiService.getUserById(otherUserId);\n      if (response.success && response.data) {\n        const userData = response.data;\n        // Only update if we got valid data and the initial name was \"unknown user\"\n        const newName = userData.name || initialUserName || t('chat:unknownUser');\n        const newAvatar = userData.avatar_url || userData.avatar || initialUserAvatar || '';\n\n        // Always update, but prioritize loaded data\n        setUserName(newName);\n        setUserAvatar(newAvatar);\n      } else {\n        // If user not found, keep initial values but log warning\n        console.warn('User not found:', otherUserId);\n        if (initialUserName && initialUserName !== t('chat:unknownUser')) {\n          // Keep the initial name if it's not \"unknown user\"\n          setUserName(initialUserName);\n          setUserAvatar(initialUserAvatar);\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to load user profile:', error);\n      // Keep the initial values if loading fails, but only if they're not \"unknown user\"\n      if (initialUserName && initialUserName !== t('chat:unknownUser')) {\n        setUserName(initialUserName);\n        setUserAvatar(initialUserAvatar);\n      }\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  }, [otherUserId, initialUserName, initialUserAvatar, t]);\n\n  const loadMessages = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      if (selectedUser) {\n        const conversationMessages = await getMessages(conversationId, selectedUser.id);\n        setMessages(conversationMessages);\n\n        await markMessagesAsRead(conversationId, selectedUser.id);\n      }\n    } catch (error) {\n      console.error('âŒ Load messages error:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×•×“×¢×•×ª');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [conversationId, selectedUser]);\n\n  // Update state when screen comes into focus (e.g., when returning from profile)\n  useFocusEffect(\n    React.useCallback(() => {\n      const params = route.params;\n      if (params) {\n        // Update userName if provided and different\n        if (params.userName) {\n          setUserName(prev => params.userName !== prev ? params.userName : prev);\n        }\n        // Update userAvatar if provided and different\n        if (params.userAvatar) {\n          setUserAvatar(prev => params.userAvatar !== prev ? params.userAvatar : prev);\n        }\n        // Update conversationId if provided and different\n        if (params.conversationId) {\n          setConversationId(prev => params.conversationId !== prev ? params.conversationId : prev);\n        }\n      }\n    }, [route.params])\n  );\n\n  // Load user profile on mount - prioritize loading if initial name is \"unknown user\"\n  useEffect(() => {\n    // If initial name is \"unknown user\", load immediately\n    // Load user profile on mount\n    loadUserProfile();\n  }, [loadUserProfile, initialUserName, t]);\n\n  // Real-time subscription\n  useEffect(() => {\n    loadMessages();\n\n    let unsubscribe: (() => void) | undefined;\n\n    // Subscribe to real-time updates\n    if (selectedUser) {\n      unsubscribe = subscribeToMessages(conversationId, selectedUser.id, (newMessages) => {\n        setMessages(newMessages);\n\n        // Mark messages as read when they arrive\n        markMessagesAsRead(conversationId, selectedUser.id).catch(console.error);\n      });\n    }\n\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, [conversationId, selectedUser, loadMessages]);\n\n  const generateFakeResponse = async () => {\n    const responses = [\n      '×ª×•×“×” ×¢×œ ×”××™×“×¢! ××ª×™ ××¤×©×¨ ×œ×‘×•× ×œ×§×—×ª?',\n      '×”×× ××¤×©×¨ ×œ×§×‘×œ ×ª××•× ×” ×©×œ ×”×¡×¤×”?',\n      '××” ×”××™×“×•×ª ×©×œ ×”×¡×¤×”?',\n      '×”×× ×™×© ××¤×©×¨×•×ª ×œ××©×œ×•×—?',\n    ];\n\n    const responseText = responses[Math.floor(Math.random() * responses.length)];\n\n    try {\n      await sendMessage({\n        conversationId,\n        senderId: otherUserId,\n        text: responseText,\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: 'text',\n        status: 'sent',\n      });\n    } catch (error) {\n      console.error('âŒ Send fake response error:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (inputText.trim() === '' || !selectedUser || isSending) return;\n\n    const messageText = inputText.trim();\n    const tempMessageId = `temp_${Date.now()}`;\n\n    // Add message to local state immediately with \"sending\" status\n    const tempMessage: Message = {\n      id: tempMessageId,\n      conversationId,\n      senderId: selectedUser.id,\n      text: messageText,\n      timestamp: new Date().toISOString(),\n      read: false,\n      type: 'text',\n      status: 'sending',\n    };\n\n    setMessages(prev => [...prev, tempMessage]);\n    setInputText('');\n    setIsSending(true);\n\n    try {\n      // Send the message with fallback participants in case conversation not found\n      // Note: sendMessage may update conversationId if backend creates new conversation\n      const currentConversationId = conversationId;\n      const messageId = await sendMessage({\n        conversationId: currentConversationId,\n        senderId: selectedUser.id,\n        text: messageText,\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: 'text',\n        status: 'sent',\n      }, [selectedUser.id, otherUserId]); // Provide fallback participants\n\n      // Check if conversation was updated (backend may have created new UUID)\n      // We'll reload messages to get the updated conversation\n      await loadMessages();\n\n      // Extract the actual message ID (handle both string and object return types)\n      const actualMessageId = typeof messageId === 'string' ? messageId : messageId.messageId;\n\n      // Update the temp message with the real message ID and status\n      setMessages(prev => prev.map(msg =>\n        msg.id === tempMessageId\n          ? { ...msg, id: actualMessageId, status: 'sent' as const }\n          : msg\n      ));\n\n    } catch (error) {\n      console.error('âŒ Send message error:', error);\n\n      // Remove the temp message and restore the text\n      setMessages(prev => prev.filter(msg => msg.id !== tempMessageId));\n      setInputText(messageText);\n\n      Alert.alert(\n        '×©×’×™××”',\n        '×©×’×™××” ×‘×©×œ×™×—×ª ×”×”×•×“×¢×”. ×× × × ×¡×” ×©×•×‘.',\n        [{ text: '××™×©×•×¨', style: 'default' }]\n      );\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handleSendFile = async (fileData: FileData) => {\n    if (!selectedUser) return;\n\n    try {\n      setIsSending(true);\n      setUploadProgress(0);\n      setUploadingFile(fileData);\n      setShowUploadModal(true);\n\n      // Validate file\n      const validation = validateFile(fileData);\n      if (!validation.isValid) {\n        setShowUploadModal(false);\n        setUploadingFile(null);\n        setIsSending(false);\n        Alert.alert('×©×’×™××”', validation.error || '×”×§×•×‘×¥ ××™× ×• ×ª×§×™×Ÿ');\n        return;\n      }\n\n      // Generate temp messageId for file path\n      const tempMessageId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n      // Build file path in Firebase Storage\n      const fullPath = buildChatFilePath(conversationId, tempMessageId, fileData.name);\n\n      // Upload file to Firebase Storage with progress tracking\n      let uploadedUrl: string;\n      try {\n        const uploadResult = await uploadFileWithProgress(\n          fullPath,\n          fileData.uri,\n          fileData.mimeType,\n          (progress) => {\n            setUploadProgress(progress);\n          }\n        );\n        uploadedUrl = uploadResult.url;\n      } catch (uploadError: any) {\n        console.error('âŒ Upload file error:', uploadError);\n        const errorMessage = uploadError?.message || uploadError?.code || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n        console.error('âŒ Upload error details:', {\n          error: uploadError,\n          fullPath,\n          fileName: fileData.name,\n          fileSize: fileData.size,\n          mimeType: fileData.mimeType,\n        });\n        setShowUploadModal(false);\n        setUploadingFile(null);\n        setIsSending(false);\n        Alert.alert(\n          '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥',\n          `×œ× × ×™×ª×Ÿ ×œ×”×¢×œ×•×ª ××ª ×”×§×•×‘×¥. ${errorMessage.includes('CORS') ? '×‘×¢×™×™×ª CORS - ×‘×“×•×§ ××ª ×”×’×“×¨×•×ª Firebase Storage.' : errorMessage}`\n        );\n        return;\n      }\n\n      // Update fileData with Firebase Storage URL\n      const updatedFileData: FileData = {\n        ...fileData,\n        uri: uploadedUrl,\n      };\n\n      // Hide upload modal\n      setShowUploadModal(false);\n      setUploadingFile(null);\n      setUploadProgress(0);\n\n      // Send message with uploaded file URL\n      await sendMessage({\n        conversationId,\n        senderId: selectedUser.id,\n        text: '',\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: fileData.type,\n        status: 'sent',\n        fileData: updatedFileData,\n      }, [selectedUser.id, otherUserId]);\n\n      console.log('âœ… File message sent');\n\n      // Reload messages to show the new message\n      await loadMessages();\n\n    } catch (error) {\n      console.error('âŒ Send file error:', error);\n      setShowUploadModal(false);\n      setUploadingFile(null);\n      setUploadProgress(0);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×©×œ×™×—×ª ×”×§×•×‘×¥. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handlePickImage = async () => {\n    setShowMediaOptions(false);\n    const result = await pickImage();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handleTakePhoto = async () => {\n    setShowMediaOptions(false);\n    const result = await takePhoto();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handlePickVideo = async () => {\n    setShowMediaOptions(false);\n    const result = await pickVideo();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handlePickDocument = async () => {\n    setShowMediaOptions(false);\n    const result = await pickDocument();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const renderMessage = ({ item }: { item: Message }) => (\n    <ChatMessageBubble\n      message={item}\n      isMyMessage={item.senderId === selectedUser?.id}\n      userAvatar={userAvatar}\n    />\n  );\n\n  const renderLoadingIndicator = () => (\n    <View style={styles.loadingContainer}>\n      <ActivityIndicator size=\"large\" color={colors.secondary} />\n      <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×”×•×“×¢×•×ª...</Text>\n    </View>\n  );\n\n  const InputChildren = () => (\n    <>\n      <TouchableOpacity onPress={() => setShowMediaOptions(!showMediaOptions)}>\n        <Icon name=\"add-circle-outline\" size={24} color={colors.primary} style={styles.icon} />\n      </TouchableOpacity>\n      <TextInput\n        style={styles.textInput}\n        value={inputText}\n        onChangeText={setInputText}\n        placeholder={t('chat:placeholder')}\n        placeholderTextColor={colors.textSecondary}\n        multiline\n        textAlignVertical=\"center\"\n        editable={!isSending}\n      />\n      <TouchableOpacity\n        onPress={handleSendMessage}\n        style={[styles.sendButton, isSending && styles.sendButtonDisabled]}\n        disabled={isSending}\n      >\n        {isSending ? (\n          <ActivityIndicator size=\"small\" color={colors.background} />\n        ) : (\n          <Text style={styles.sendButtonText}>×©×œ×—</Text>\n        )}\n      </TouchableOpacity>\n    </>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View\n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.headerButton}>\n          <Icon name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => {\n            navigation.navigate('UserProfileScreen', {\n              userId: otherUserId,\n              userName: userName,\n              userAvatar: userAvatar,\n            });\n          }}\n          style={styles.headerUserInfo}\n          activeOpacity={0.7}\n        >\n          <Image source={{ uri: userAvatar || 'https://i.pravatar.cc/150?img=1' }} style={styles.headerAvatar} />\n          <Text style={styles.headerTitle}>{userName}</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => {\n            navigation.navigate('UserProfileScreen', {\n              userId: otherUserId,\n              userName: userName,\n              userAvatar: userAvatar,\n            });\n          }}\n          style={styles.headerButton}\n        >\n          <Icon name=\"person-circle-outline\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n      </View>\n\n      {/* Messages container - limited height on web to leave space for input */}\n      <View style={[\n        styles.messagesWrapper,\n        Platform.OS === 'web' && maxMessagesHeight ? {\n          maxHeight: maxMessagesHeight,\n        } : undefined\n      ]}>\n        {isLoading ? (\n          renderLoadingIndicator()\n        ) : (\n          <FlatList\n            ref={flatListRef}\n            data={messages}\n            keyExtractor={(item) => item.id}\n            renderItem={renderMessage}\n            contentContainerStyle={[\n              styles.messagesContainer,\n              (() => {\n                // For web with fixed position input, we need extra padding since fixed elements don't take space in flow\n                // Input height is approximately 70px, but we need more padding to ensure scrolling works\n                const inputHeight = 70;\n                const paddingBottom = Platform.OS === 'web'\n                  ? tabBarHeight + inputHeight + 40  // Extra 40px for web to ensure scrolling works\n                  : tabBarHeight + (showMediaOptions ? 150 : 70);\n                return { paddingBottom };\n              })()\n            ]}\n            onContentSizeChange={(contentWidth, contentHeight) => {\n              // Use setTimeout to ensure scroll happens after layout\n              setTimeout(() => {\n                flatListRef.current?.scrollToEnd({ animated: true });\n              }, 100);\n            }}\n            onLayout={(event) => {\n              flatListRef.current?.scrollToEnd({ animated: true });\n            }}\n            showsVerticalScrollIndicator={false}\n            style={styles.messagesList}\n            scrollEnabled={true}\n            nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n            scrollEventThrottle={16}\n          />\n        )}\n      </View>\n\n      {/* Media Options - Absolutely positioned above input */}\n      {showMediaOptions && (\n        <View style={[\n          styles.mediaOptionsContainer,\n          { bottom: tabBarHeight + 70, zIndex: 1000 }\n        ]}>\n          <TouchableOpacity style={styles.mediaOption} onPress={handleTakePhoto}>\n            <Icon name=\"camera\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×¦×œ× ×ª××•× ×”</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickImage}>\n            <Icon name=\"image\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×ª××•× ×”</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickVideo}>\n            <Icon name=\"videocam\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×¡×¨×˜×•×Ÿ</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickDocument}>\n            <Icon name=\"document\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×§×•×‘×¥</Text>\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* Input Container - Fixed positioned at bottom for web */}\n      {Platform.OS === 'web' ? (\n        <View\n          style={(() => {\n            const inputStyle = {\n              position: 'fixed' as any,\n              left: 0,\n              right: 0,\n              bottom: tabBarHeight,\n              zIndex: 999,\n              backgroundColor: 'transparent'\n            };\n            return inputStyle;\n          })()}\n        >\n          <View\n            style={styles.inputContainer}\n            onLayout={(event) => {\n              if (Platform.OS === 'web') {\n                const { height } = event.nativeEvent.layout;\n                setInputHeight(height);\n              }\n            }}\n          >\n            <InputChildren />\n          </View>\n        </View>\n      ) : (\n        <KeyboardAvoidingView\n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n          keyboardVerticalOffset={Platform.OS === 'ios' ? 0 : 0}\n          style={{\n            position: 'absolute',\n            left: 0,\n            right: 0,\n            bottom: tabBarHeight,\n            zIndex: 999,\n            backgroundColor: 'transparent'\n          }}\n          pointerEvents=\"box-none\"\n        >\n          <View style={styles.inputContainer}>\n            <InputChildren />\n          </View>\n        </KeyboardAvoidingView>\n      )}\n\n      {/* Upload Progress Modal */}\n      <Modal\n        visible={showUploadModal}\n        transparent\n        animationType=\"fade\"\n      >\n        <View style={styles.uploadModalOverlay}>\n          <View style={styles.uploadModalContent}>\n            <ActivityIndicator size=\"large\" color={colors.primary} style={styles.uploadSpinner} />\n            <Text style={styles.uploadText}>\n              {uploadingFile ? `××¢×œ×” ${uploadingFile.name}...` : '××¢×œ×” ×§×•×‘×¥...'}\n            </Text>\n            <View style={styles.progressBarContainer}>\n              <View style={[styles.progressBar, { width: `${uploadProgress}%` }]} />\n            </View>\n            <Text style={styles.progressText}>{Math.round(uploadProgress)}%</Text>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative', // Ensure absolute children are positioned relative to this\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center',\n  },\n  headerAvatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 10,\n    borderWidth: 2,\n    borderColor: colors.primary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  backButton: {\n    marginRight: 15,\n  },\n  // Content container for messages\n  contentContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Messages wrapper - takes all available space\n  messagesWrapper: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Messages list\n  messagesList: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Loading indicator\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  // Chat messages container\n  messagesContainer: {\n    backgroundColor: colors.background,\n    paddingHorizontal: 10,\n    paddingTop: 10,\n  },\n  // Input container wrapper - ABSOLUTE POSITION\n  inputContainerWrapper: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    backgroundColor: 'transparent',\n    zIndex: 99, // Ensure it sits on top of messages\n    elevation: 5, // For Android shadow\n  },\n  // Input container at bottom\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    paddingBottom: Platform.OS === 'android' ? 15 : 10,\n    backgroundColor: colors.background,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  icon: {\n    paddingHorizontal: 5,\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 20,\n    paddingHorizontal: 15,\n    paddingVertical: Platform.OS === 'ios' ? 10 : 8,\n    marginHorizontal: 8,\n    fontSize: FontSizes.body,\n    maxHeight: 80,\n    textAlign: 'right',\n    color: colors.textPrimary,\n    backgroundColor: colors.background,\n  },\n  sendButton: {\n    backgroundColor: colors.secondary,\n    borderRadius: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 60,\n  },\n  sendButtonDisabled: {\n    backgroundColor: colors.textSecondary,\n  },\n  sendButtonText: {\n    color: colors.background,\n    fontWeight: 'bold',\n    fontSize: FontSizes.body,\n  },\n  androidBottomSpacer: {\n    height: 20,\n    backgroundColor: colors.background,\n  },\n  // Media options container - ABSOLUTE POSITION\n  mediaOptionsContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.background,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n    zIndex: 100, // Above input container\n    elevation: 6,\n  },\n  mediaOption: {\n    alignItems: 'center',\n    padding: 8,\n  },\n  mediaOptionText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginTop: 4,\n    textAlign: 'center',\n  },\n  // Upload progress modal\n  uploadModalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  uploadModalContent: {\n    backgroundColor: colors.background,\n    borderRadius: 16,\n    padding: 24,\n    alignItems: 'center',\n    minWidth: 250,\n    maxWidth: '80%',\n  },\n  uploadSpinner: {\n    marginBottom: 16,\n  },\n  uploadText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  progressBarContainer: {\n    width: '100%',\n    height: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 4,\n    overflow: 'hidden',\n    marginBottom: 8,\n  },\n  progressBar: {\n    height: '100%',\n    backgroundColor: colors.primary,\n    borderRadius: 4,\n  },\n  progressText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/CommunityStatsScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadStats' and 'selectedUser?.id'. Either include them or remove the dependency array.","line":140,"column":8,"nodeType":"ArrayExpression","endLine":140,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadStats, selectedUser?.id]","fix":{"range":[4535,4537],"text":"[loadStats, selectedUser?.id]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'loadStats'. Either include it or remove the dependency array.","line":238,"column":8,"nodeType":"ArrayExpression","endLine":238,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadStats]","fix":{"range":[9532,9534],"text":"[loadStats]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// screens/CommunityStatsScreen.tsx\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, SafeAreaView, Dimensions, ActivityIndicator, Platform, RefreshControl, StatusBar } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { db } from '../utils/databaseService';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { apiService } from '../utils/apiService';\n\nconst { width, height } = Dimensions.get('window');\n\n// Responsive breakpoints\nconst isSmallScreen = width < 375;\nconst isMediumScreen = width >= 375 && width < 768;\nconst isLargeScreen = width >= 768;\n\n// Calculate responsive sizes\nconst getResponsiveCardWidth = () => {\n    if (isLargeScreen) return (width - 64 - 24) / 3; // 3 cards per row on large screens\n    if (isMediumScreen) return (width - 48 - 16) / 2; // 2 cards per row on medium screens\n    return (width - 32 - 12) / 2; // 2 cards per row on small screens\n};\n\nconst getResponsivePadding = () => {\n    if (isLargeScreen) return 24;\n    if (isMediumScreen) return 20;\n    return 16;\n};\n\nconst getResponsiveFontSize = (base: number) => {\n    if (isSmallScreen) return base * 0.9;\n    if (isLargeScreen) return base * 1.1;\n    return base;\n};\n\ninterface StatItemProps {\n    icon: string;\n    value: string;\n    label: string;\n    color?: string;\n}\n\nconst StatItem: React.FC<StatItemProps> = ({ icon, value, label, color = colors.info }) => (\n    <View style={styles.statItem}>\n        <Ionicons name={icon as any} size={isSmallScreen ? 28 : 32} color={color} />\n        <Text style={styles.statValue}>{value}</Text>\n        <Text style={styles.statLabel} numberOfLines={2}>{label}</Text>\n    </View>\n);\n\ninterface CommunityStats {\n    // Community stats from landing page\n    siteVisits: number;\n    totalMoneyDonated: number;\n    totalUsers: number;\n    itemDonations: number;\n    completedRides: number;\n    recurringDonationsAmount: number;\n    uniqueDonors: number;\n    completedTasks: number;\n    \n    // Dashboard stats (tasks)\n    tasks_open: number;\n    tasks_in_progress: number;\n    tasks_done: number;\n    tasks_total: number;\n    \n    // Dashboard stats (users)\n    admins_count: number;\n    regular_users_count: number;\n    total_users: number;\n    \n    // Dashboard stats (volunteer hours)\n    total_volunteer_hours: number;\n    avg_hours_per_user: number;\n    current_month_hours: number;\n    \n    // Legacy stats\n    totalRides: number;\n    totalItems: number;\n    totalDonations: number;\n    activeCities: number;\n    monthlyGrowth: number;\n}\n\nexport default function CommunityStatsScreen() {\n    const { t } = useTranslation();\n    const { selectedUser } = useUser();\n    const tabBarHeight = useBottomTabBarHeight() || 0;\n    const [stats, setStats] = useState<CommunityStats>({\n        // Community stats from landing page\n        siteVisits: 0,\n        totalMoneyDonated: 0,\n        totalUsers: 0,\n        itemDonations: 0,\n        completedRides: 0,\n        recurringDonationsAmount: 0,\n        uniqueDonors: 0,\n        completedTasks: 0,\n        \n        // Dashboard stats (tasks)\n        tasks_open: 0,\n        tasks_in_progress: 0,\n        tasks_done: 0,\n        tasks_total: 0,\n        \n        // Dashboard stats (users)\n        admins_count: 0,\n        regular_users_count: 0,\n        total_users: 0,\n        \n        // Dashboard stats (volunteer hours)\n        total_volunteer_hours: 0,\n        avg_hours_per_user: 0,\n        current_month_hours: 0,\n        \n        // Legacy stats\n        totalRides: 0,\n        totalItems: 0,\n        totalDonations: 0,\n        activeCities: 0,\n        monthlyGrowth: 0,\n    });\n    const [loading, setLoading] = useState(true);\n    const [refreshing, setRefreshing] = useState(false);\n    const [headerHeight, setHeaderHeight] = useState(0);\n    const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n    const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n        ? screenHeight - tabBarHeight - headerHeight\n        : undefined;\n\n    useEffect(() => {\n        logger.debug('CommunityStatsScreen', 'Screen viewed', { userId: selectedUser?.id });\n        loadStats();\n    }, []);\n\n    const loadStats = async (forceRefresh = false) => {\n        try {\n            if (!forceRefresh) {\n                setLoading(true);\n            } else {\n                setRefreshing(true);\n            }\n\n            // Load community stats from landing page (EnhancedStatsService)\n            const communityStats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n            \n            // Extract values - handle both direct values and nested value objects\n            const getValue = (stat: any): number => {\n                if (typeof stat === 'number') return stat;\n                if (stat && typeof stat === 'object' && 'value' in stat) return stat.value || 0;\n                return 0;\n            };\n\n            // Load dashboard stats (tasks, users, volunteer hours)\n            const dashboardRes = await apiService.getDashboardStats();\n            const dashboardStats = dashboardRes.success && dashboardRes.data ? dashboardRes.data : null;\n\n            // Load legacy rides stats\n            const rides = await db.listRides(selectedUser?.id || '', { includePast: true }).catch(() => []);\n            const totalRides = rides.length;\n\n            // Calculate active cities from rides\n            const cities = new Set<string>();\n            rides.forEach((ride: any) => {\n                if (ride.from) cities.add(ride.from);\n                if (ride.to) cities.add(ride.to);\n            });\n\n            // Get unique drivers from rides as a proxy for users\n            const drivers = new Set<string>();\n            rides.forEach((ride: any) => {\n                if (ride.driverId) drivers.add(ride.driverId);\n            });\n\n            // Calculate monthly growth (mock for now - would need historical data)\n            const monthlyGrowth = Math.floor(Math.random() * 30) + 10;\n\n            // For now, use rides count as a proxy for items until we have a proper API\n            const estimatedItems = Math.floor(totalRides * 1.5);\n\n            setStats({\n                // Community stats from landing page\n                siteVisits: getValue(communityStats.siteVisits) || 0,\n                totalMoneyDonated: getValue(communityStats.totalMoneyDonated) || 0,\n                totalUsers: getValue(communityStats.totalUsers) || Math.max(drivers.size, 1),\n                itemDonations: getValue(communityStats.itemDonations) || estimatedItems,\n                completedRides: getValue(communityStats.completedRides) || totalRides,\n                recurringDonationsAmount: getValue(communityStats.recurringDonationsAmount) || 0,\n                uniqueDonors: getValue(communityStats.uniqueDonors) || 0,\n                completedTasks: getValue(communityStats.completed_tasks) || 0,\n                \n                // Dashboard stats (tasks)\n                tasks_open: dashboardStats?.metrics?.tasks_open ? Number(dashboardStats.metrics.tasks_open) : 0,\n                tasks_in_progress: dashboardStats?.metrics?.tasks_in_progress ? Number(dashboardStats.metrics.tasks_in_progress) : 0,\n                tasks_done: dashboardStats?.metrics?.tasks_done ? Number(dashboardStats.metrics.tasks_done) : 0,\n                tasks_total: dashboardStats?.metrics?.tasks_total ? Number(dashboardStats.metrics.tasks_total) : 0,\n                \n                // Dashboard stats (users)\n                admins_count: dashboardStats?.metrics?.admins_count ? Number(dashboardStats.metrics.admins_count) : 0,\n                regular_users_count: dashboardStats?.metrics?.regular_users_count ? Number(dashboardStats.metrics.regular_users_count) : 0,\n                total_users: dashboardStats?.metrics?.total_users ? Number(dashboardStats.metrics.total_users) : 0,\n                \n                // Dashboard stats (volunteer hours)\n                total_volunteer_hours: dashboardStats?.metrics?.total_volunteer_hours ? Number(dashboardStats.metrics.total_volunteer_hours) : 0,\n                avg_hours_per_user: dashboardStats?.metrics?.avg_hours_per_user ? Number(dashboardStats.metrics.avg_hours_per_user) : 0,\n                current_month_hours: dashboardStats?.metrics?.current_month_hours ? Number(dashboardStats.metrics.current_month_hours) : 0,\n                \n                // Legacy stats\n                totalRides,\n                totalItems: estimatedItems,\n                totalDonations: estimatedItems + totalRides,\n                activeCities: cities.size,\n                monthlyGrowth,\n            });\n\n            logger.debug('CommunityStatsScreen', 'Stats loaded', {\n                communityStats,\n                dashboardStats,\n                totalRides,\n                activeCities: cities.size,\n            });\n        } catch (error) {\n            logger.error('CommunityStatsScreen', 'Failed to load stats', { error });\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    };\n\n    const onRefresh = React.useCallback(async () => {\n        await loadStats(true);\n    }, []);\n\n    if (loading) {\n        return (\n            <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n                <StatusBar backgroundColor={colors.background} barStyle=\"dark-content\" />\n                <View style={styles.loadingContainer}>\n                    <ActivityIndicator size=\"large\" color={colors.primary} />\n                    <Text style={styles.loadingText}>{t('common:loading')}</Text>\n                </View>\n            </SafeAreaView>\n        );\n    }\n\n    return (\n        <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n            <StatusBar backgroundColor={colors.background} barStyle=\"dark-content\" />\n            {/* List container - limited height on web to ensure scrolling works */}\n            <View style={[\n                styles.listWrapper,\n                Platform.OS === 'web' && maxListHeight ? {\n                    maxHeight: maxListHeight,\n                } : undefined\n            ]}>\n                <ScrollView\n                    style={styles.scrollView}\n                    contentContainerStyle={styles.scrollContent}\n                    showsVerticalScrollIndicator={true}\n                    bounces={true}\n                    scrollEnabled={true}\n                    nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                    scrollEventThrottle={16}\n                    refreshControl={\n                        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} />\n                    }\n                >\n                    <View \n                        style={styles.header}\n                        onLayout={(event) => {\n                            if (Platform.OS === 'web') {\n                                const { height } = event.nativeEvent.layout;\n                                setHeaderHeight(height);\n                            }\n                        }}\n                    >\n                    <Text style={styles.title}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×§×”×™×œ×”</Text>\n                    <Text style={styles.subtitle}>×”×©×¤×¢×” ×××™×ª×™×ª, ×‘××¡×¤×¨×™×</Text>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ×§×”×™×œ×” ×›×œ×œ×™×•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×§×”×™×œ×”</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"eye-outline\"\n                            value={stats.siteVisits.toLocaleString('he-IL')}\n                            label=\"×‘×™×§×•×¨×™× ×‘××ª×¨\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"cash-outline\"\n                            value={`${stats.totalMoneyDonated.toLocaleString('he-IL')} â‚ª`}\n                            label={'×©\"×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª'}\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"heart-outline\"\n                            value={stats.totalUsers.toLocaleString('he-IL')}\n                            label=\"×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×\"\n                            color={colors.secondary}\n                        />\n                        <StatItem\n                            icon=\"cube-outline\"\n                            value={stats.itemDonations.toLocaleString('he-IL')}\n                            label=\"×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•\"\n                            color={colors.accent}\n                        />\n                        <StatItem\n                            icon=\"car-outline\"\n                            value={stats.completedRides.toLocaleString('he-IL')}\n                            label=\"× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª\"\n                            color={colors.greenBright || colors.success}\n                        />\n                        <StatItem\n                            icon=\"repeat-outline\"\n                            value={`${stats.recurringDonationsAmount.toLocaleString('he-IL')} â‚ª`}\n                            label=\"×ª×¨×•××•×ª ×§×‘×•×¢×•×ª ×¤×¢×™×œ×•×ª\"\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"people-outline\"\n                            value={stats.uniqueDonors.toLocaleString('he-IL')}\n                            label=\"×ª×•×¨××™× ×¤×¢×™×œ×™×\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"checkmark-done-outline\"\n                            value={stats.completedTasks.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×©×‘×•×¦×¢×•\"\n                            color={colors.success}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×™××•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×™××•×ª</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"list-outline\"\n                            value={stats.tasks_open.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×¤×ª×•×—×•×ª\"\n                            color={colors.primary}\n                        />\n                        <StatItem\n                            icon=\"hourglass-outline\"\n                            value={stats.tasks_in_progress.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×‘×ª×”×œ×™×š\"\n                            color={colors.warning}\n                        />\n                        <StatItem\n                            icon=\"checkmark-done-outline\"\n                            value={stats.tasks_done.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×©×”×•×©×œ××•\"\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"stats-chart-outline\"\n                            value={stats.tasks_total.toLocaleString('he-IL')}\n                            label={'×¡×”\"×› ××©×™××•×ª'}\n                            color={colors.info}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×ª××©×™× */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×ª××©×™×</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"shield-outline\"\n                            value={stats.admins_count.toLocaleString('he-IL')}\n                            label=\"×× ×”×œ×™× ×‘××¢×¨×›×ª\"\n                            color={colors.secondary}\n                        />\n                        <StatItem\n                            icon=\"people-outline\"\n                            value={stats.regular_users_count.toLocaleString('he-IL')}\n                            label=\"××©×ª××©×™× ×¨×’×™×œ×™×\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"person-outline\"\n                            value={stats.total_users.toLocaleString('he-IL')}\n                            label={'×¡×”\"×› ××©×ª××©×™×'}\n                            color={colors.textSecondary}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×ª× ×“×‘×•×ª */}\n                {stats.total_volunteer_hours > 0 && (\n                    <View style={styles.section}>\n                        <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×ª× ×“×‘×•×ª</Text>\n                        <View style={styles.statsGrid}>\n                            <StatItem\n                                icon=\"time-outline\"\n                                value={stats.total_volunteer_hours.toFixed(1)}\n                                label={'×¡×”\"×› ×©×¢×•×ª ×”×ª× ×“×‘×•×ª'}\n                                color={colors.accent}\n                            />\n                            {stats.avg_hours_per_user > 0 && (\n                                <StatItem\n                                    icon=\"stats-chart-outline\"\n                                    value={stats.avg_hours_per_user.toFixed(1)}\n                                    label=\"×××•×¦×¢ ×©×¢×•×ª ×œ××©×ª××©\"\n                                    color={colors.info}\n                                />\n                            )}\n                            {stats.current_month_hours > 0 && (\n                                <StatItem\n                                    icon=\"calendar-outline\"\n                                    value={stats.current_month_hours.toFixed(1)}\n                                    label=\"×©×¢×•×ª ×”×—×•×“×© ×”× ×•×›×—×™\"\n                                    color={colors.warning}\n                                />\n                            )}\n                        </View>\n                    </View>\n                )}\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª × ×¡×™×¢×•×ª ×•×¤×¢×™×œ×•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¤×¢×™×œ×•×ª ×§×”×™×œ×ª×™×ª</Text>\n                    <View style={styles.impactCard}>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"car\" size={24} color={colors.info} />\n                            <Text style={styles.impactText}>\n                                {stats.totalRides.toLocaleString('he-IL')} × ×¡×™×¢×•×ª\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"gift\" size={24} color={colors.secondary} />\n                            <Text style={styles.impactText}>\n                                {stats.totalItems.toLocaleString('he-IL')} ×¤×¨×™×˜×™× ×©× ×ª×¨××•\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"globe\" size={24} color={colors.primary} />\n                            <Text style={styles.impactText}>\n                                {stats.activeCities.toLocaleString('he-IL')} ×¢×¨×™× ×¤×¢×™×œ×•×ª\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"trending-up\" size={24} color={colors.success} />\n                            <Text style={styles.impactText}>\n                                +{stats.monthlyGrowth}% ×¦××™×—×” ×—×•×“×©×™×ª\n                            </Text>\n                        </View>\n                    </View>\n                </View>\n\n                {/* Bottom padding for safe area */}\n                <View style={{ height: Platform.OS === 'ios' ? 100 : 80 }} />\n                </ScrollView>\n            </View>\n        </SafeAreaView>\n    );\n}\n\nconst responsivePadding = getResponsivePadding();\nconst cardWidth = getResponsiveCardWidth();\n\nconst styles = StyleSheet.create({\n    safeArea: {\n        flex: 1,\n        backgroundColor: colors.background,\n        position: 'relative',\n    },\n    listWrapper: {\n        flex: 1,\n        backgroundColor: colors.background,\n    },\n    loadingContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: 20,\n    },\n    loadingText: {\n        marginTop: 16,\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    scrollView: {\n        flex: 1,\n    },\n    scrollContent: {\n        flexGrow: 1,\n        paddingBottom: Platform.OS === 'ios' ? 20 : 40,\n    },\n    header: {\n        padding: responsivePadding,\n        paddingTop: 16,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        backgroundColor: colors.background,\n    },\n    title: {\n        fontSize: getResponsiveFontSize(FontSizes.heading2),\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        textAlign: 'right',\n    },\n    subtitle: {\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textSecondary,\n        marginTop: 4,\n        textAlign: 'right',\n    },\n    section: {\n        marginBottom: 24,\n        paddingHorizontal: responsivePadding,\n    },\n    sectionTitle: {\n        fontSize: getResponsiveFontSize(FontSizes.heading3),\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 16,\n        textAlign: 'right',\n    },\n    statsGrid: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        gap: isSmallScreen ? 8 : 12,\n    },\n    statItem: {\n        width: cardWidth,\n        backgroundColor: colors.white,\n        padding: isSmallScreen ? 12 : 16,\n        borderRadius: 16,\n        alignItems: 'center',\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 4,\n        elevation: 2,\n        borderWidth: 1,\n        borderColor: colors.border,\n        minHeight: isSmallScreen ? 100 : 120,\n        justifyContent: 'center',\n    },\n    statValue: {\n        fontSize: getResponsiveFontSize(FontSizes.heading2),\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginTop: 8,\n        textAlign: 'center',\n    },\n    statLabel: {\n        fontSize: getResponsiveFontSize(FontSizes.small),\n        color: colors.textSecondary,\n        marginTop: 4,\n        textAlign: 'center',\n    },\n    impactCard: {\n        backgroundColor: colors.white,\n        padding: responsivePadding,\n        borderRadius: 16,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 4,\n        elevation: 2,\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    impactRow: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        marginBottom: 16,\n        paddingVertical: 4,\n    },\n    impactText: {\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textPrimary,\n        marginRight: 16,\n        flex: 1,\n        textAlign: 'right',\n    },\n    graphPlaceholder: {\n        height: isSmallScreen ? 150 : 200,\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 16,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 2,\n        borderColor: colors.border,\n        borderStyle: 'dashed',\n    },\n    graphText: {\n        color: colors.textSecondary,\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        marginTop: 12,\n        textAlign: 'center',\n        paddingHorizontal: 20,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/DiscoverPeopleScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/EditProfileScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/FollowersScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUsers'. Either include it or remove the dependency array.","line":54,"column":6,"nodeType":"ArrayExpression","endLine":54,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [userId, type, loadUsers]","fix":{"range":[1934,1948],"text":"[userId, type, loadUsers]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'loadUsers'. Either include it or remove the dependency array.","line":66,"column":8,"nodeType":"ArrayExpression","endLine":66,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [loadUsers]","fix":{"range":[2325,2339],"text":"[loadUsers]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: List of followers or following for a given user, with ability to follow/unfollow from the list.\n// - Reached from: Profile/UserProfile screens via 'FollowersScreen'.\n// - Expects route params: `{ userId: string, type: 'followers' | 'following', title: string }`.\n// - Provides: Fetches users list and per-user follow state; navigates to 'UserProfileScreen' on item press.\n// - Reads from context: `useUser()` -> `selectedUser` to perform follow toggles.\n// - External deps/services: `followService` (get lists, follow/unfollow, stats).\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  FlatList,\n  Image,\n  TouchableOpacity,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useRoute, useNavigation, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport { \n  getFollowers, \n  getFollowing, \n  followUser, \n  unfollowUser,\n  getFollowStats \n} from '../utils/followService';\nimport { useUser } from '../stores/userStore';\n\ntype FollowersScreenRouteParams = {\n  userId: string;\n  type: 'followers' | 'following';\n  title: string;\n};\n\nexport default function FollowersScreen() {\n  const route = useRoute();\n  const navigation = useNavigation();\n  const { userId, type, title } = route.params as FollowersScreenRouteParams;\n  const { selectedUser } = useUser();\n  const [users, setUsers] = useState<CharacterType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [followStats, setFollowStats] = useState<Record<string, { isFollowing: boolean }>>({});\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    const loadUsersEffect = async () => {\n      await loadUsers();\n    };\n    loadUsersEffect();\n  }, [userId, type]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      const refreshUsers = async () => {\n        console.log('ğŸ‘¥ FollowersScreen - Screen focused, refreshing data...');\n        await loadUsers();\n        // Force re-render by updating refresh key\n        setRefreshKey(prev => prev + 1);\n      };\n      refreshUsers();\n    }, [userId, type])\n  );\n\n  const loadUsers = async () => {\n    setLoading(true);\n    try {\n      let userList: CharacterType[] = [];\n      \n      if (type === 'followers') {\n        userList = await getFollowers(userId);\n      } else {\n        userList = await getFollowing(userId);\n      }\n      \n      setUsers(userList);\n      \n      // Load follow stats for all users\n      const stats: Record<string, { isFollowing: boolean }> = {};\n      \n      for (const user of userList) {\n        if (selectedUser) {\n          const userStats = await getFollowStats(user.id, selectedUser.id);\n          stats[user.id] = { isFollowing: userStats.isFollowing };\n        }\n      }\n      \n      setFollowStats(stats);\n    } catch (error) {\n      console.error('Error loading users:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×”××©×ª××©×™×');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFollowToggle = async (targetUserId: string) => {\n    if (!selectedUser) {\n      Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    try {\n      const currentStats = followStats[targetUserId] || { isFollowing: false };\n      \n      if (currentStats.isFollowing) {\n        const success = await unfollowUser(selectedUser.id, targetUserId);\n        if (success) {\n          setFollowStats(prev => ({\n            ...prev,\n            [targetUserId]: { isFollowing: false }\n          }));\n          Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n        }\n      } else {\n        const success = await followUser(selectedUser.id, targetUserId);\n        if (success) {\n          setFollowStats(prev => ({\n            ...prev,\n            [targetUserId]: { isFollowing: true }\n          }));\n          Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Follow toggle error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n    }\n  };\n\n  const renderUserItem = ({ item }: { item: CharacterType }) => {\n    const currentStats = followStats[item.id] || { isFollowing: false };\n    const isCurrentUser = selectedUser?.id === item.id;\n\n    return (\n      <View style={styles.userItem}>\n        <TouchableOpacity \n          style={styles.userInfo}\n          onPress={() => {\n            (navigation as any).navigate('UserProfileScreen', {\n              userId: item.id,\n              userName: item.name,\n              characterData: item\n            });\n          }}\n        >\n          <Image source={{ uri: item.avatar }} style={styles.avatar} />\n          <View style={styles.userDetails}>\n            <Text style={styles.userName}>{item.name}</Text>\n            <Text style={styles.userBio} numberOfLines={2}>\n              {item.bio}\n            </Text>\n            <View style={styles.userStats}>\n              <Text style={styles.statText}>\n                {item.karmaPoints} × ×§×•×“×•×ª ×§××¨××”\n              </Text>\n              <Text style={styles.statText}>\n                {item.completedTasks} ××©×™××•×ª ×”×•×©×œ××•\n              </Text>\n            </View>\n          </View>\n        </TouchableOpacity>\n\n        {!isCurrentUser && (\n          <TouchableOpacity\n            style={[\n              styles.followButton,\n              currentStats.isFollowing && styles.followingButton\n            ]}\n            onPress={() => handleFollowToggle(item.id)}\n          >\n            <Text style={[\n              styles.followButtonText,\n              currentStats.isFollowing && styles.followingButtonText\n            ]}>\n              {currentStats.isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n            </Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons \n        name={type === 'followers' ? 'people-outline' : 'person-add-outline'} \n        size={60} \n        color={colors.textSecondary} \n      />\n      <Text style={styles.emptyStateTitle}>\n        {type === 'followers' ? '××™×Ÿ ×¢×•×§×‘×™× ×¢×“×™×™×Ÿ' : '×œ× ×¢×•×§×‘ ××—×¨×™ ××£ ××—×“ ×¢×“×™×™×Ÿ'}\n      </Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {type === 'followers' \n          ? '×›××©×¨ ×× ×©×™× ×™×ª×—×™×œ×• ×œ×¢×§×•×‘ ××—×¨×™×š, ×”× ×™×•×¤×™×¢×• ×›××Ÿ'\n          : '×”×ª×—×œ ×œ×¢×§×•×‘ ××—×¨×™ ×× ×©×™× ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×ª ×©×œ×”×'\n        }\n      </Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <TouchableOpacity \n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>{title}</Text>\n        <View style={styles.headerSpacer} />\n      </View>\n\n      {/* Users List */}\n      <FlatList\n        data={users}\n        renderItem={renderUserItem}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContainer}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={renderEmptyState}\n        refreshing={loading}\n        onRefresh={loadUsers}\n      />\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  backButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  headerSpacer: {\n    width: 40,\n  },\n  listContainer: {\n    flexGrow: 1,\n  },\n  userItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  userInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  userBio: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 6,\n    lineHeight: 16,\n  },\n  userStats: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  statText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  followButton: {\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    minWidth: 60,\n    alignItems: 'center',\n  },\n  followingButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  followButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  followingButtonText: {\n    color: colors.textPrimary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 60,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/LandingSiteScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/Feature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/FloatingMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:31:25\n  29 |   const { t } = useTranslation('landing');\n  30 |   // Animation setup for fade-in and slide-up effect\n> 31 |   const heroAnimation = useRef(new Animated.Value(0)).current;\n     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   \n  33 |   useEffect(() => {\n  34 |     Animated.timing(heroAnimation, {","line":31,"column":25,"nodeType":null,"endLine":31,"endColumn":62},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:31:25\n  29 |   const { t } = useTranslation('landing');\n  30 |   // Animation setup for fade-in and slide-up effect\n> 31 |   const heroAnimation = useRef(new Animated.Value(0)).current;\n     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  32 |   \n  33 |   useEffect(() => {\n  34 |     Animated.timing(heroAnimation, {","line":31,"column":25,"nodeType":null,"endLine":31,"endColumn":62},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:61:18\n  59 |         {/* Animated hero content */}\n  60 |         <Animated.View \n> 61 |           style={[\n     |                  ^\n> 62 |             styles.heroContent,\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 63 |             {\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |             }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |           ]}\n     | ^^^^^^^^^^^^ Cannot access ref value during render\n  73 |         >\n  74 |           {/* Welcome tagline with mixed font sizes */}\n  75 |           <Text style={styles.welcomeTitle}>","line":61,"column":18,"nodeType":null,"endLine":72,"endColumn":12},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:63:13\n  61 |           style={[\n  62 |             styles.heroContent,\n> 63 |             {\n     |             ^\n> 64 |               opacity: heroAnimation,\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 65 |               transform: [{\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 66 |                 translateY: heroAnimation.interpolate({\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 67 |                   inputRange: [0, 1],\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 68 |                   outputRange: [20, 0]\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 69 |                 })\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |               }]\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |             }\n     | ^^^^^^^^^^^^^^ Cannot access ref value during render\n  72 |           ]}\n  73 |         >\n  74 |           {/* Welcome tagline with mixed font sizes */}","line":63,"column":13,"nodeType":null,"endLine":71,"endColumn":14},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:64:24\n  62 |             styles.heroContent,\n  63 |             {\n> 64 |               opacity: heroAnimation,\n     |                        ^^^^^^^^^^^^^ Cannot access ref value during render\n  65 |               transform: [{\n  66 |                 translateY: heroAnimation.interpolate({\n  67 |                   inputRange: [0, 1],","line":64,"column":24,"nodeType":null,"endLine":64,"endColumn":37},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:66:29\n  64 |               opacity: heroAnimation,\n  65 |               transform: [{\n> 66 |                 translateY: heroAnimation.interpolate({\n     |                             ^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  67 |                   inputRange: [0, 1],\n  68 |                   outputRange: [20, 0]\n  69 |                 })","line":66,"column":29,"nodeType":null,"endLine":66,"endColumn":42},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx:66:29\n  64 |               opacity: heroAnimation,\n  65 |               transform: [{\n> 66 |                 translateY: heroAnimation.interpolate({\n     |                             ^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  67 |                   inputRange: [0, 1],\n  68 |                   outputRange: [20, 0]\n  69 |                 })","line":66,"column":29,"nodeType":null,"endLine":66,"endColumn":54},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":86,"column":25,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":86,"endColumn":77}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file HeroSection Component\n * @description Hero section with animated welcome message and CTAs\n * @module Landing/Components\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport { View, Text, TouchableOpacity, Image, Animated, Linking } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { logger } from '../../../utils/loggerService';\nimport type { HeroSectionProps } from '../types';\nimport { IS_MOBILE_WEB, ANIMATION_DURATION, WHATSAPP_URL } from '../constants';\nimport { styles } from '../styles';\n\n/**\n * HeroSection Component\n * Landing page hero with animated entrance, logo, tagline, and CTAs\n * Features decorative circles and gradient background\n * \n * @component\n * @example\n * ```tsx\n * <HeroSection onDonate={() => setDonationModalVisible(true)} />\n * ```\n */\nexport const HeroSection: React.FC<HeroSectionProps> = ({ onDonate }) => {\n  const { t } = useTranslation('landing');\n  // Animation setup for fade-in and slide-up effect\n  const heroAnimation = useRef(new Animated.Value(0)).current;\n  \n  useEffect(() => {\n    Animated.timing(heroAnimation, {\n      toValue: 1,\n      duration: ANIMATION_DURATION.HERO,\n      delay: ANIMATION_DURATION.HERO_DELAY,\n      useNativeDriver: false,\n    }).start();\n  }, [heroAnimation]);\n\n  /**\n   * Handle WhatsApp button click\n   * Logs analytics and opens WhatsApp with predefined number\n   */\n  const handleWhatsAppClick = () => {\n    logger.info('LandingSite', 'Click - whatsapp direct');\n    Linking.openURL(WHATSAPP_URL);\n  };\n\n  return (\n    <View style={styles.hero}>\n      <View style={styles.heroGradient}>\n        {/* Decorative background circles */}\n        <View style={styles.decoCircle1} />\n        <View style={styles.decoCircle2} />\n        <View style={styles.decoCircle3} />\n        \n        {/* Animated hero content */}\n        <Animated.View \n          style={[\n            styles.heroContent,\n            {\n              opacity: heroAnimation,\n              transform: [{\n                translateY: heroAnimation.interpolate({\n                  inputRange: [0, 1],\n                  outputRange: [20, 0]\n                })\n              }]\n            }\n          ]}\n        >\n          {/* Welcome tagline with mixed font sizes */}\n          <Text style={styles.welcomeTitle}>\n            <Text style={styles.welcomeTitleLarge}>{t('hero.welcomeTitle.large1')} </Text>\n            <Text style={styles.welcomeTitleSmall}> {t('hero.welcomeTitle.small1')}  </Text>\n            <Text style={styles.welcomeTitleLarge}>{t('hero.welcomeTitle.large2')} </Text>\n            <Text style={styles.welcomeTitleSmall}> {t('hero.welcomeTitle.small2')} </Text>\n          </Text>\n          \n          {/* Logo container */}\n          <View style={styles.logoContainer}>\n            <View style={styles.logoBackground}>\n              <Image \n                source={require('../../../assets/images/new_logo_black.png')} \n                style={styles.logo} \n                resizeMode=\"contain\"\n                accessible={true}\n                accessibilityLabel=\"Karma Community Logo\"\n              />\n            </View>\n          </View>\n          \n          {/* App title */}\n          <Text style={styles.title}>Karma Community</Text>\n          \n          {/* Core values row */}\n          <View style={styles.subtitlesRow}>\n            <View style={styles.subtitleItem}>\n              <Ionicons \n                name=\"people-circle-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.info} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.unity')}</Text>\n            </View>\n            <View style={[styles.subtitleItem, styles.subtitleItemGreen]}>\n              <Ionicons \n                name=\"eye-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.greenBright} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.transparency')}</Text>\n            </View>\n            <View style={styles.subtitleItem}>\n              <Ionicons \n                name=\"checkmark-circle-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.info} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.order')}</Text>\n            </View>\n          </View>\n          \n          {/* Description */}\n          <Text style={styles.subtitle}>\n            {t('hero.subtitle')}\n          </Text>\n\n          {/* WhatsApp CTA button */}\n          <View style={styles.ctaRow}>\n            <TouchableOpacity \n              style={[styles.contactButton, { backgroundColor: colors.success }]} \n              onPress={handleWhatsAppClick}\n              activeOpacity={0.8}\n              accessibilityLabel={t('hero.accessibility.whatsapp')}\n              accessibilityRole=\"button\"\n            >\n              <Ionicons \n                name=\"logo-whatsapp\" \n                color={colors.white} \n                size={IS_MOBILE_WEB ? 14 : 18} \n              />\n              <Text style={styles.contactButtonText}>{t('hero.whatsappButton')} </Text>\n            </TouchableOpacity>\n          </View>\n          \n          {/* Donation CTA button */}\n          <TouchableOpacity\n            style={[styles.donationCtaButton, { backgroundColor: colors.greenBright }]}\n            onPress={onDonate}\n            activeOpacity={0.8}\n            accessibilityLabel={t('hero.accessibility.donate')}\n            accessibilityRole=\"button\"\n          >\n            <Ionicons \n              name=\"heart\" \n              size={IS_MOBILE_WEB ? 18 : 24} \n              color={colors.white} \n            />\n            <Text style={styles.donationCtaButtonText}>{t('hero.donateButton')}</Text>\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    </View>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/LazySection.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'ref.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'ref.current' to a variable inside the effect, and use that variable in the cleanup function.","line":59,"column":32,"nodeType":"Identifier","endLine":59,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file LazySection Component\n * @description Lazy loading wrapper for sections with intersection observer\n * @module Landing/Components\n */\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { View, ActivityIndicator } from 'react-native';\nimport colors from '../../../globals/colors';\nimport type { LazySectionProps } from '../types';\nimport { IS_WEB, LAZY_LOADING } from '../constants';\n\n/**\n * LazySection Component\n * Wrapper that implements lazy loading for section components\n * On web, sections load immediately to ensure DOM elements exist for navigation\n * On native, uses IntersectionObserver for performance optimization\n * \n * @component\n * @example\n * ```tsx\n * <LazySection section={ProblemsSection} />\n * ```\n */\nexport const LazySection: React.FC<LazySectionProps> = ({ \n  section: SectionComponent, \n  ...props \n}) => {\n  // On web, load immediately to ensure DOM elements exist for navigation\n  const [isVisible, setIsVisible] = useState(IS_WEB);\n  const ref = useRef<View>(null);\n\n  useEffect(() => {\n    // On web, sections are loaded immediately\n    if (IS_WEB) {\n      return;\n    }\n\n    // For native platforms, use lazy loading with IntersectionObserver\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        // Start loading when the section is 100px away from viewport\n        rootMargin: LAZY_LOADING.ROOT_MARGIN,\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current as any);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current as any);\n      }\n    };\n  }, []);\n\n  return (\n    <View ref={ref} style={{ minHeight: LAZY_LOADING.MIN_HEIGHT }}>\n      {isVisible ? (\n        <SectionComponent {...props} />\n      ) : (\n        <ActivityIndicator \n          size=\"large\" \n          color={colors.info} \n          style={{ marginVertical: 50 }} \n        />\n      )}\n    </View>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/Section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/styles/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'ref.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'ref.current' to a variable inside the effect, and use that variable in the cleanup function.","line":219,"column":32,"nodeType":"Identifier","endLine":219,"endColumn":39},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:235:25\n  233 |\n  234 | const HeroSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => {\n> 235 |   const heroAnimation = useRef(new Animated.Value(0)).current;\n      |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  236 |   useEffect(() => {\n  237 |     Animated.timing(heroAnimation, {\n  238 |       toValue: 1,","line":235,"column":25,"nodeType":null,"endLine":235,"endColumn":62},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:235:25\n  233 |\n  234 | const HeroSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => {\n> 235 |   const heroAnimation = useRef(new Animated.Value(0)).current;\n      |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  236 |   useEffect(() => {\n  237 |     Animated.timing(heroAnimation, {\n  238 |       toValue: 1,","line":235,"column":25,"nodeType":null,"endLine":235,"endColumn":62},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:251:31\n  249 |         <View style={styles.decoCircle2} />\n  250 |         <View style={styles.decoCircle3} />\n> 251 |         <Animated.View style={[\n      |                               ^\n> 252 |           styles.heroContent,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 253 |           {\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 261 |           }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 262 |         ]}>\n      | ^^^^^^^^^^ Cannot access ref value during render\n  263 |\n  264 |           <Text style={styles.welcomeTitle}>\n  265 |             <Text style={styles.welcomeTitleLarge}>×”××§×•× </Text>","line":251,"column":31,"nodeType":null,"endLine":262,"endColumn":10},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:253:11\n  251 |         <Animated.View style={[\n  252 |           styles.heroContent,\n> 253 |           {\n      |           ^\n> 254 |             opacity: heroAnimation,\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 255 |             transform: [{\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 256 |               translateY: heroAnimation.interpolate({\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 257 |                 inputRange: [0, 1],\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 258 |                 outputRange: [20, 0]\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 259 |               })\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 260 |             }]\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 261 |           }\n      | ^^^^^^^^^^^^ Cannot access ref value during render\n  262 |         ]}>\n  263 |\n  264 |           <Text style={styles.welcomeTitle}>","line":253,"column":11,"nodeType":null,"endLine":261,"endColumn":12},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:254:22\n  252 |           styles.heroContent,\n  253 |           {\n> 254 |             opacity: heroAnimation,\n      |                      ^^^^^^^^^^^^^ Cannot access ref value during render\n  255 |             transform: [{\n  256 |               translateY: heroAnimation.interpolate({\n  257 |                 inputRange: [0, 1],","line":254,"column":22,"nodeType":null,"endLine":254,"endColumn":35},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:256:27\n  254 |             opacity: heroAnimation,\n  255 |             transform: [{\n> 256 |               translateY: heroAnimation.interpolate({\n      |                           ^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  257 |                 inputRange: [0, 1],\n  258 |                 outputRange: [20, 0]\n  259 |               })","line":256,"column":27,"nodeType":null,"endLine":256,"endColumn":40},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:256:27\n  254 |             opacity: heroAnimation,\n  255 |             transform: [{\n> 256 |               translateY: heroAnimation.interpolate({\n      |                           ^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  257 |                 inputRange: [0, 1],\n  258 |                 outputRange: [20, 0]\n  259 |               })","line":256,"column":27,"nodeType":null,"endLine":256,"endColumn":52},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":272,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":272,"endColumn":76},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":326,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13154,13170],"text":"&quot;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13154,13170],"text":"&ldquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13154,13170],"text":"&#34;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13154,13170],"text":"&rdquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":326,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":330,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13481,13528],"text":"&quot;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13481,13528],"text":"&ldquo;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13481,13528],"text":"&#34;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13481,13528],"text":"&rdquo;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":330,"column":86,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":713,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[28508,28525],"text":"×©&quot;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[28508,28525],"text":"×©&ldquo;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[28508,28525],"text":"×©&#34;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[28508,28525],"text":"×©&rdquo;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":826,"column":132,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&quot;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&ldquo;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&#34;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&rdquo;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":826,"column":138,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&quot; ×”××œ×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&ldquo; ×”××œ×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&#34; ×”××œ×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&rdquo; ×”××œ×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1070,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1070,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1071,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1071,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1072,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1072,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1073,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1073,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1074,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1074,"endColumn":77},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1178,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1178,"endColumn":79},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1179,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1179,"endColumn":76},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1180,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1180,"endColumn":80},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1189,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1189,"endColumn":80},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1269:25\n  1267 |   };\n  1268 |\n> 1269 |   const contentHeight = animatedHeight.interpolate({\n       |                         ^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  1270 |     inputRange: [0, 1],\n  1271 |     outputRange: [0, 200], // Max height for answer\n  1272 |   });","line":1269,"column":25,"nodeType":null,"endLine":1269,"endColumn":39},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1269:25\n  1267 |   };\n  1268 |\n> 1269 |   const contentHeight = animatedHeight.interpolate({\n       |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  1270 |     inputRange: [0, 1],\n  1271 |     outputRange: [0, 200], // Max height for answer\n  1272 |   });","line":1269,"column":25,"nodeType":null,"endLine":1269,"endColumn":51},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1274:29\n  1272 |   });\n  1273 |\n> 1274 |   const rotateInterpolate = animatedRotation.interpolate({\n       |                             ^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  1275 |     inputRange: [0, 1],\n  1276 |     outputRange: ['0deg', '180deg'],\n  1277 |   });","line":1274,"column":29,"nodeType":null,"endLine":1274,"endColumn":45},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1274:29\n  1272 |   });\n  1273 |\n> 1274 |   const rotateInterpolate = animatedRotation.interpolate({\n       |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  1275 |     inputRange: [0, 1],\n  1276 |     outputRange: ['0deg', '180deg'],\n  1277 |   });","line":1274,"column":29,"nodeType":null,"endLine":1274,"endColumn":57},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1305:29\n  1303 |         </Animated.View>\n  1304 |       </TouchableOpacity>\n> 1305 |       <Animated.View style={[styles.faqAnswerContainer, { maxHeight: contentHeight, opacity: animatedHeight }]}>\n       |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  1306 |         <Text style={styles.faqA}>{answer}</Text>\n  1307 |       </Animated.View>\n  1308 |     </View>","line":1305,"column":29,"nodeType":null,"endLine":1305,"endColumn":111},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1305:57\n  1303 |         </Animated.View>\n  1304 |       </TouchableOpacity>\n> 1305 |       <Animated.View style={[styles.faqAnswerContainer, { maxHeight: contentHeight, opacity: animatedHeight }]}>\n       |                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  1306 |         <Text style={styles.faqA}>{answer}</Text>\n  1307 |       </Animated.View>\n  1308 |     </View>","line":1305,"column":57,"nodeType":null,"endLine":1305,"endColumn":110},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx:1305:94\n  1303 |         </Animated.View>\n  1304 |       </TouchableOpacity>\n> 1305 |       <Animated.View style={[styles.faqAnswerContainer, { maxHeight: contentHeight, opacity: animatedHeight }]}>\n       |                                                                                              ^^^^^^^^^^^^^^ Cannot access ref value during render\n  1306 |         <Text style={styles.faqA}>{answer}</Text>\n  1307 |       </Animated.View>\n  1308 |     </View>","line":1305,"column":94,"nodeType":null,"endLine":1305,"endColumn":108},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadStats'. Either include it or remove the dependency array.","line":1746,"column":6,"nodeType":"ArrayExpression","endLine":1746,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadStats]","fix":{"range":[76933,76935],"text":"[loadStats]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has an unnecessary dependency: 'isWeb'. Either exclude it or remove the dependency array. Outer scope values like 'isWeb' aren't valid dependencies because mutating them doesn't re-render the component.","line":1827,"column":6,"nodeType":"ArrayExpression","endLine":1827,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[79788,79795],"text":"[]"}}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LandingSiteScreen.tsx\n// Web-only marketing landing page for KarmaCommunity\nimport React, { useEffect, useState, useRef, useCallback, Suspense, lazy } from 'react';\nimport { Platform, View, Text, StyleSheet, Image, TouchableOpacity, Linking, Dimensions, ActivityIndicator, ScrollView, Animated, Modal, FlatList, Alert } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons } from '@expo/vector-icons';\nimport { logger } from '../utils/loggerService';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ScreenWrapper from '../components/ScreenWrapper';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useWebMode } from '../stores/webModeStore';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport AdminHierarchyTree from '../components/AdminHierarchyTree';\n\ninterface LandingStats {\n  siteVisits: number;\n  totalMoneyDonated: number;\n  totalUsers: number;\n  itemDonations: number;\n  completedRides: number;\n  recurringDonationsAmount: number;\n  uniqueDonors: number;\n  completedTasks: number;\n}\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst isWeb = Platform.OS === 'web';\nconst isTablet = SCREEN_WIDTH > 768;\nconst isMobileWeb = isWeb && SCREEN_WIDTH <= 768;\n\nconst getSectionElement = (sectionId: string): HTMLElement | null => {\n  if (!isWeb || typeof document === 'undefined') {\n    return null;\n  }\n  const domId = sectionId.startsWith('section-') ? sectionId : `section-${sectionId}`;\n  return (\n    document.getElementById(domId) ??\n    (document.querySelector(`[data-nativeid=\"${domId}\"]`) as HTMLElement | null)\n  );\n};\n\n// Calculate responsive sizes for floating menu based on screen width\nconst getMenuSizes = () => {\n  if (isMobileWeb) {\n    // Mobile web - smaller menu\n    const menuWidth = SCREEN_WIDTH * 0.12; // 12% of screen width for mobile\n    return {\n      fontSize: Math.max(9, menuWidth * 0.12), // Smaller font for mobile\n      iconSize: Math.max(12, menuWidth * 0.15), // Smaller icons\n      titleSize: Math.max(10, menuWidth * 0.13), // Smaller title\n      padding: Math.max(6, menuWidth * 0.08), // Smaller padding\n    };\n  }\n  // Desktop/Tablet - original sizes\n  const menuWidth = SCREEN_WIDTH * 0.1; // 10% of screen width\n  return {\n    fontSize: Math.max(10, menuWidth * 0.065), // ~6.5% of menu width, min 10px\n    iconSize: Math.max(14, menuWidth * 0.08), // ~8% of menu width, min 14px\n    titleSize: Math.max(12, menuWidth * 0.075), // ~7.5% of menu width, min 12px\n    padding: Math.max(8, menuWidth * 0.05), // ~5% of menu width, min 8px\n  };\n};\n\nconst Section: React.FC<{ id?: string; title: string; subtitle?: string; children?: React.ReactNode, style?: any }> = ({ id, title, subtitle, children, style }) => (\n  <View\n    style={[styles.section, style]}\n    nativeID={id}\n    {...(isWeb && id ? { id } : {})}\n  >\n    <Text style={styles.sectionTitle}>{title}</Text>\n    <View style={styles.titleDecorator} />\n    {subtitle ? <Text style={styles.sectionSubtitle}>{subtitle}</Text> : null}\n    {children || null}\n  </View>\n);\n\nconst Feature: React.FC<{ emoji: string; title: string; text: string; greenAccent?: boolean }> = ({ emoji, title, text, greenAccent }) => (\n  <View style={[styles.feature, greenAccent && { backgroundColor: colors.greenBright + '12', borderColor: colors.greenBright + '30' }]}>\n    <Text style={styles.featureEmoji}>{emoji}</Text>\n    <Text style={styles.featureTitle}>{title}</Text>\n    <Text style={styles.featureText}>{text}</Text>\n  </View>\n);\n\n// Floating Navigation Menu Component\nconst FloatingMenu: React.FC<{\n  onNavigate: (section: string) => void;\n  activeSection: string | null;\n}> = ({ onNavigate, activeSection }) => {\n  const [isMinimized, setIsMinimized] = useState(false);\n  const menuSizes = getMenuSizes();\n\n  const menuItems = [\n    { id: 'stats', label: '×‘××¡×¤×¨×™×', icon: 'stats-chart-outline' },\n    { id: 'vision', label: '×”×—×–×•×Ÿ', icon: 'bulb-outline' },\n    { id: 'problems', label: '×”×‘×¢×™×•×ª', icon: 'alert-circle-outline' },\n    { id: 'features', label: '×ª×›×•× ×•×ª', icon: 'apps-outline' },\n    { id: 'about', label: '××•×“×•×ª', icon: 'information-circle-outline' },\n    { id: 'how', label: '××™×š ×–×” ×¢×•×‘×“', icon: 'help-circle-outline' },\n    { id: 'who', label: '×œ××™ ×–×” ××ª××™×', icon: 'people-outline' },\n    { id: 'values', label: '×¢×¨×›×™×', icon: 'heart-outline' },\n    { id: 'hierarchy', label: '××‘× ×” × ×™×”×•×œ', icon: 'git-network-outline' },\n    { id: 'roadmap', label: '××¤×ª ×“×¨×›×™×', icon: 'map-outline' },\n    { id: 'contact', label: '×™×¦×™×¨×ª ×§×©×¨', icon: 'mail-outline' },\n    { id: 'faq', label: '×©××œ×•×ª × ×¤×•×¦×•×ª', icon: 'chatbubble-ellipses-outline' },\n  ];\n\n  if (isMinimized) {\n    return (\n      <View style={styles.floatingMenuMinimized}>\n        <TouchableOpacity\n          onPress={() => setIsMinimized(false)}\n          style={styles.menuToggleButton}\n        >\n          <Ionicons name=\"menu-outline\" size={menuSizes.iconSize * 1.2} color={colors.info} />\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <>\n      {/* Overlay ×©×§×•×£ ×©×¡×•×’×¨ ××ª ×”×ª×¤×¨×™×˜ ×›××©×¨ ×œ×•×—×¦×™× ×¢×œ×™×• */}\n      <TouchableOpacity\n        style={styles.menuOverlay}\n        activeOpacity={1}\n        onPress={() => setIsMinimized(true)}\n      />\n      {/* ×”×ª×¤×¨×™×˜ ×”×¤×ª×•×— */}\n      <View style={styles.floatingMenu}>\n        <TouchableOpacity\n          onPress={() => setIsMinimized(true)}\n          style={styles.menuHeader}\n          activeOpacity={0.7}\n        >\n          <Text style={[styles.menuTitle, { fontSize: menuSizes.titleSize }]}>×ª×¤×¨×™×˜ × ×™×•×•×˜</Text>\n          <Ionicons name=\"chevron-forward-outline\" size={menuSizes.iconSize * 0.9} color={colors.textSecondary} />\n        </TouchableOpacity>\n        <ScrollView style={styles.menuItems} showsVerticalScrollIndicator={false}>\n          {menuItems.map((item) => (\n            <TouchableOpacity\n              key={item.id}\n              style={[\n                styles.menuItem,\n                { paddingVertical: menuSizes.padding, paddingHorizontal: menuSizes.padding * 1.5 },\n                activeSection === item.id && styles.menuItemActive,\n              ]}\n              onPress={() => {\n                onNavigate(item.id);\n                logger.info('FloatingMenu', `Navigate to ${item.id}`);\n              }}\n              activeOpacity={0.7}\n            >\n              <Ionicons\n                name={item.icon as any}\n                size={menuSizes.iconSize}\n                color={activeSection === item.id ? colors.info : colors.textSecondary}\n                style={styles.menuItemIcon}\n              />\n              <Text style={[\n                styles.menuItemText,\n                { fontSize: menuSizes.fontSize },\n                activeSection === item.id && styles.menuItemTextActive,\n              ]}>\n                {item.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n    </>\n  );\n};\n\ntype LazySectionProps = {\n  section: React.ComponentType<any>;\n  [key: string]: any;\n};\n\nconst LazySection: React.FC<LazySectionProps> = ({ section: SectionComponent, ...props }) => {\n  // On web, load immediately to ensure DOM elements exist for navigation\n  // ×‘-web, ×˜×¢×™× ×” ××™×™×“×™×ª ×›×“×™ ×œ×”×‘×˜×™×— ×©××œ×× ×˜×™ DOM ×§×™×™××™× ×œ× ×™×•×•×˜\n  const [isVisible, setIsVisible] = useState(isWeb);\n  const ref = useRef<View>(null);\n\n  useEffect(() => {\n    // On web, sections are loaded immediately, so no need for lazy loading\n    // ×‘-web, ×”×¡×¢×™×¤×™× × ×˜×¢× ×™× ××™×“, ××– ××™×Ÿ ×¦×•×¨×š ×‘-lazy loading\n    if (isWeb) {\n      return;\n    }\n\n    // For native, use lazy loading\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        rootMargin: '0px 0px 100px 0px', // Start loading when the section is 100px away from the viewport\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current as any);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current as any);\n      }\n    };\n  }, []);\n\n  return (\n    <View ref={ref} style={{ minHeight: 200 }}>\n      {isVisible ? (\n        <SectionComponent {...props} />\n      ) : <ActivityIndicator size=\"large\" color={colors.info} style={{ marginVertical: 50 }} />}\n    </View>\n  );\n};\n\n\nconst HeroSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => {\n  const heroAnimation = useRef(new Animated.Value(0)).current;\n  useEffect(() => {\n    Animated.timing(heroAnimation, {\n      toValue: 1,\n      duration: 800,\n      delay: 200,\n      useNativeDriver: false,\n    }).start();\n  }, [heroAnimation]);\n\n  return (\n    <View style={styles.hero}>\n      <View style={styles.heroGradient}>\n        <View style={styles.decoCircle1} />\n        <View style={styles.decoCircle2} />\n        <View style={styles.decoCircle3} />\n        <Animated.View style={[\n          styles.heroContent,\n          {\n            opacity: heroAnimation,\n            transform: [{\n              translateY: heroAnimation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [20, 0]\n              })\n            }]\n          }\n        ]}>\n\n          <Text style={styles.welcomeTitle}>\n            <Text style={styles.welcomeTitleLarge}>×”××§×•× </Text>\n            <Text style={styles.welcomeTitleSmall}> ×‘×•  </Text>\n            <Text style={styles.welcomeTitleLarge}>×”×˜×•×‘ </Text>\n            <Text style={styles.welcomeTitleSmall}> ×§×•×¨×” </Text>\n          </Text>\n          <View style={styles.logoContainer}>\n            <View style={styles.logoBackground}>\n              <Image source={require('../assets/images/new_logo_black.png')} style={styles.logo} resizeMode=\"contain\" />\n            </View>\n          </View>\n          <Text style={styles.title}>Karma Community</Text>\n          <View style={styles.subtitlesRow}>\n            <View style={styles.subtitleItem}>\n              <Ionicons name=\"people-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>××—×“×•×ª</Text>\n            </View>\n            <View style={[styles.subtitleItem, styles.subtitleItemGreen]}>\n              <Ionicons name=\"eye-outline\" size={isMobileWeb ? 18 : 24} color={colors.greenBright} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>×©×§×™×¤×•×ª</Text>\n            </View>\n            <View style={styles.subtitleItem}>\n              <Ionicons name=\"checkmark-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>×¡×“×¨</Text>\n            </View>\n          </View>\n          <Text style={styles.subtitle}>×¨×©×ª ×—×‘×¨×ª×™×ª ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¦×¨×™×›×™× ×¢×–×¨×”, ×œ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×–×•×¨. ×¤×©×•×˜, ×©×§×•×£ ×•××”×œ×‘.</Text>\n\n\n          <View style={styles.ctaRow}>\n            <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp direct'); Linking.openURL('https://wa.me/972528616878'); }}>\n              <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤ </Text>\n            </TouchableOpacity>\n          </View>\n          {/* Donation Button */}\n          <TouchableOpacity\n            style={[styles.donationCtaButton, { backgroundColor: colors.greenBright }]}\n            onPress={onDonate}\n            activeOpacity={0.8}\n          >\n            <Ionicons name=\"heart\" size={isMobileWeb ? 18 : 24} color={colors.white} />\n            <Text style={styles.donationCtaButtonText}>×ª×¨××• ×œ× ×•</Text>\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    </View>\n  );\n}\n\nconst VisionSection: React.FC<{ onGoToApp: () => void }> = ({ onGoToApp }) => (\n  <Section id=\"section-vision\" title=\"×”×—×–×•×Ÿ ×©×œ× ×•\" subtitle=\"×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™\" style={styles.sectionAltBackground}>\n    <Text style={styles.paragraph}>\n      <Text style={styles.emphasis}>×§×™×‘×•×¥ ×“×’×™×˜×œ×™ ×‘×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™. </Text>×¨×©×ª ×—×‘×¨×ª×™×ª ×œ××™×—×•×“, ×¨×™×›×•×–, ×”× ×’×©×”, ×•×”×¤×¦×ª ×¤×™×œ× ×ª×¨×•×¤×™×” ×•×¢×©×™×™×” ×—×‘×¨×ª×™×ª ××›×œ ×”×¡×•×’×™× ×•×œ×›×œ ×”×× ×©×™×.\n      {\"\\n\\n\"}\n      <Text style={styles.emphasis}>×›×¨×’×¢ ×× ×—× ×• ×‘×ª×”×œ×™×š ×”×§××”.</Text> ×›×œ ××” ×©×¨×©×•× ×‘×”××©×š ×”×•× ×—×œ×§ ××”×—×–×•×Ÿ ×©×× ×—× ×• ×¨×•×¦×™× ×œ×‘× ×•×ª, ×•×›×¨×’×¢ ×× ×—× ×• ××–××™× ×™× ××ª×›× ×œ×¢×–×•×¨ ×œ× ×• ×œ×‘× ×•×ª ××ª ×–×”.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×× ×—× ×• ××–××™× ×™× ××ª×›× ×œ×”×¦×˜×¨×£ ××œ×™× ×• ×œ×©× ×•×ª ××ª ×”×¢×•×œ× ×•×œ×™×¦×•×¨ ×©×™× ×•×™ ×—×‘×¨×ª×™ ×××™×ª×™. ×œ×”×™×•×ª ×—×œ×§ ×××©×”×• ×’×“×•×œ, ××•×¡×¨×™ ×‘×¨××” ×”×›×™ ×’×‘×•×”×”, ×˜×›× ×•×œ×•×’×™, ×—×‘×¨×ª×™ ×•×¢×•×“ ××œ× ×“×‘×¨×™× ×˜×•×‘×™×.\n    </Text>\n    <View style={styles.mottoContainer}>\n      <View style={styles.mottoCard}>\n        <Ionicons name=\"swap-horizontal-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.mottoIcon} />\n        <Text style={styles.mottoText}>\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\"</Text>\n      </View>\n      <View style={[styles.mottoCard, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '40' }]}>\n        <Ionicons name=\"gift-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.mottoIcon} />\n        <Text style={styles.mottoText}>\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\"</Text>\n      </View>\n    </View>\n    <Text style={styles.paragraph}>\n      KarmaCommunity ×”×™× ×™×•×ª×¨ ××¨×©×ª ×—×‘×¨×ª×™×ª - ×”×™× ×ª× ×•×¢×” ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×©×•×ª ×˜×•×‘, ×œ×œ× ××™× ×˜×¨×¡×™× ××¡×—×¨×™×™×, ×œ×œ× ×¤×¨×¡×•××•×ª, ×¨×§ ×× ×•×©×™×•×ª ×•×§×”×™×œ×ª×™×•×ª ×××™×ª×™×ª.\n    </Text>\n    <View style={styles.visionHighlights}>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"heart\" size={isMobileWeb ? 20 : 28} color={colors.secondary} />\n        <Text style={styles.visionHighlightText}>××•×¡×¨×™ ×‘×¨××” ×”×’×‘×•×”×” ×‘×™×•×ª×¨</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"code-working\" size={isMobileWeb ? 20 : 28} color={colors.info} />\n        <Text style={styles.visionHighlightText}>×˜×›× ×•×œ×•×’×™ ×•×—×“×©× ×™</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"people\" size={isMobileWeb ? 20 : 28} color={colors.accent} />\n        <Text style={styles.visionHighlightText}>×—×‘×¨×ª×™ ×•××—×‘×¨</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"globe\" size={isMobileWeb ? 20 : 28} color={colors.greenBright} />\n        <Text style={styles.visionHighlightText}>×©×™× ×•×™ ×¢×•×œ××™ ×××™×ª×™</Text>\n      </View>\n    </View>\n\n    {/* CTA Button - Join Us */}\n    {/* <View style={styles.ctaRow}>\n      <TouchableOpacity\n        style={styles.primaryCta}\n        onPress={onGoToApp}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"people-outline\" size={isMobileWeb ? 16 : 22} color={colors.white} style={styles.ctaIcon} />\n        <Text style={styles.primaryCtaText}>×”×¦×˜×¨×¤×• ××œ×™× ×•</Text>\n      </TouchableOpacity>\n    </View> */}\n  </Section>\n);\n\n// Stats Detail Modal Component\nconst StatsDetailModal: React.FC<{\n  visible: boolean;\n  onClose: () => void;\n  statType: string;\n  statTitle: string;\n  statValue: number;\n  iconName: string;\n  iconColor: string;\n}> = ({ visible, onClose, statType, statTitle, statValue, iconName, iconColor }) => {\n  const [detailData, setDetailData] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const loadDetailData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      logger.info('StatsDetailModal', `Loading detail data for ${statType}`);\n      const response = await apiService.getStatDetails(statType);\n      if (response.success && response.data) {\n        setDetailData(response.data);\n        logger.info('StatsDetailModal', `Loaded ${response.data.length} items for ${statType}`);\n      }\n    } catch (error) {\n      logger.error('StatsDetailModal', 'Failed to load detail data', { error, statType });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [statType]);\n\n  useEffect(() => {\n    if (visible && USE_BACKEND) {\n      loadDetailData();\n    }\n  }, [visible, loadDetailData]);\n\n  const renderDetailItem = ({ item, index }: { item: any; index: number }) => {\n    // Different rendering based on stat type\n    switch (statType) {\n      case 'siteVisits':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {new Date(item.timestamp || item.created_at).toLocaleString('he-IL')}\n              </Text>\n              {item.user_agent && (\n                <Text style={styles.detailItemSubtext}>{item.user_agent.substring(0, 50)}...</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'totalUsers':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.name || item.email || '××©×ª××©'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                ×”×¦×˜×¨×£: {new Date(item.join_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.city && <Text style={styles.detailItemSubtext}>×¢×™×¨: {item.city}</Text>}\n            </View>\n          </View>\n        );\n\n      case 'totalMoneyDonated':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.donor_name || '×ª×•×¨× ×× ×•× ×™××™'} â€¢ {item.amount?.toLocaleString('he-IL')} â‚ª\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.donation_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.category_name && (\n                <Text style={styles.detailItemSubtext}>×§×˜×’×•×¨×™×”: {item.category_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'itemDonations':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.title || item.item_name || '×¤×¨×™×˜'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.donor_name && (\n                <Text style={styles.detailItemSubtext}>×ª×•×¨×: {item.donor_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'completedRides':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.from_city || '××•×¦×'} â†’ {item.to_city || '×™×¢×“'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.ride_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.driver_name && (\n                <Text style={styles.detailItemSubtext}>× ×”×’: {item.driver_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'uniqueDonors':\n      case 'recurringDonationsAmount':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.donor_name || '×ª×•×¨×'}\n                {item.amount && ` â€¢ ${item.amount.toLocaleString('he-IL')} â‚ª`}\n              </Text>\n              {item.frequency && (\n                <Text style={styles.detailItemSubtext}>×ª×“×™×¨×•×ª: {item.frequency}</Text>\n              )}\n              {item.start_date && (\n                <Text style={styles.detailItemSubtext}>\n                  ×”×—×œ ×: {new Date(item.start_date).toLocaleDateString('he-IL')}\n                </Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'completedTasks':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.title || '××©×™××”'}\n              </Text>\n              {item.category && (\n                <Text style={styles.detailItemSubtext}>×§×˜×’×•×¨×™×”: {item.category}</Text>\n              )}\n              {item.updated_at && (\n                <Text style={styles.detailItemSubtext}>\n                  ×”×•×©×œ××”: {new Date(item.updated_at).toLocaleDateString('he-IL')}\n                </Text>\n              )}\n            </View>\n          </View>\n        );\n\n      default:\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>{JSON.stringify(item)}</Text>\n            </View>\n          </View>\n        );\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContainer}>\n          <View style={styles.modalHeader}>\n            <View style={styles.modalTitleRow}>\n              <Ionicons name={iconName as any} size={isMobileWeb ? 28 : 36} color={iconColor} />\n              <View style={styles.modalTitleContainer}>\n                <Text style={styles.modalTitle}>{statTitle}</Text>\n                <Text style={styles.modalSubtitle}>\n                  {statValue.toLocaleString('he-IL')} {statType === 'totalMoneyDonated' || statType === 'recurringDonationsAmount' ? 'â‚ª' : '×¤×¨×™×˜×™×'}\n                </Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={onClose} style={styles.modalCloseButton}>\n              <Ionicons name=\"close\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.modalContent}>\n            {isLoading ? (\n              <View style={styles.modalLoadingContainer}>\n                <ActivityIndicator size=\"large\" color={colors.info} />\n                <Text style={styles.modalLoadingText}>×˜×•×¢×Ÿ ×¤×¨×˜×™×...</Text>\n              </View>\n            ) : detailData.length === 0 ? (\n              <View style={styles.modalEmptyContainer}>\n                <Ionicons name=\"information-circle-outline\" size={isMobileWeb ? 48 : 64} color={colors.textSecondary} />\n                <Text style={styles.modalEmptyText}>××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”</Text>\n              </View>\n            ) : (\n              <FlatList\n                data={detailData}\n                renderItem={renderDetailItem}\n                keyExtractor={(item, index) => `${statType}-${index}`}\n                showsVerticalScrollIndicator={true}\n                contentContainerStyle={styles.detailList}\n              />\n            )}\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\n// Donation Modal Component\nconst DonationModal: React.FC<{\n  visible: boolean;\n  onClose: () => void;\n}> = ({ visible, onClose }) => {\n  const handleWhatsApp = () => {\n    logger.info('DonationModal', 'Click - whatsapp');\n    Linking.openURL('https://wa.me/972528616878');\n  };\n\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"fade\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.donationModalContainer}>\n          <View style={styles.donationModalHeader}>\n            <View style={styles.donationModalTitleRow}>\n              <Ionicons name=\"heart\" size={isMobileWeb ? 32 : 40} color={colors.secondary} />\n              <View style={styles.donationModalTitleContainer}>\n                <Text style={styles.donationModalTitle}>×ª×¨××• ×œ× ×•</Text>\n                <Text style={styles.donationModalSubtitle}>×›×œ ×ª×¨×•××” ×¢×•×–×¨×ª ×œ× ×• ×œ×’×“×•×œ</Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={onClose} style={styles.modalCloseButton}>\n              <Ionicons name=\"close\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.donationModalContent}>\n            <View style={styles.donationMessageContainer}>\n              <Ionicons name=\"information-circle\" size={isMobileWeb ? 24 : 32} color={colors.info} />\n              <Text style={styles.donationMessageText}>\n                ××•×–×× ×™× ×œ×”×¢×‘×™×¨ ×œ××¡×¤×¨ 0528616878 ×œ× ×•×” ×”××™×™×¡×“ ×‘×‘×™×˜/×¤×™×™×‘×•×§×¡\n              </Text>\n            </View>\n\n            <View style={styles.donationButtonsContainer}>\n              <TouchableOpacity\n                style={[styles.donationButton, styles.donationButtonWhatsApp]}\n                onPress={handleWhatsApp}\n                activeOpacity={0.8}\n              >\n                <Ionicons name=\"logo-whatsapp\" size={isMobileWeb ? 20 : 28} color={colors.white} />\n                <Text style={styles.donationButtonText}>×•×•×˜×¡××¤</Text>\n              </TouchableOpacity>\n\n            </View>\n\n            <Text style={styles.donationNoteText}>\n              ×ª×•×“×” ×¢×œ ×”×ª××™×›×” ×©×œ×›×! ×›×œ ×ª×¨×•××” ×¢×•×–×¨×ª ×œ× ×• ×œ×”××©×™×š ×•×œ×¤×ª×— ××ª ×”×§×”×™×œ×”.\n            </Text>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst StatsSection: React.FC<{ stats: LandingStats; isLoadingStats: boolean; onGoToApp: () => void }> = ({ stats, isLoadingStats, onGoToApp }) => {\n  const [selectedStat, setSelectedStat] = useState<{\n    type: string;\n    title: string;\n    value: number;\n    icon: string;\n    color: string;\n  } | null>(null);\n\n  const handleStatPress = (type: string, title: string, value: number, icon: string, color: string) => {\n    logger.info('StatsSection', `Stat card pressed: ${type}`);\n    setSelectedStat({ type, title, value, icon, color });\n  };\n\n  return (\n    <Section id=\"section-stats\" title=\"×”×›×•×— ×©×œ ×”×§×”×™×œ×” ×©×œ× ×•\" subtitle=\"×”×©×¤×¢×” ×××™×ª×™×ª, ×‘××¡×¤×¨×™×\">\n      {selectedStat && (\n        <StatsDetailModal\n          visible={!!selectedStat}\n          onClose={() => setSelectedStat(null)}\n          statType={selectedStat.type}\n          statTitle={selectedStat.title}\n          statValue={selectedStat.value}\n          iconName={selectedStat.icon}\n          iconColor={selectedStat.color}\n        />\n      )}\n\n      {isLoadingStats ? (\n        <View style={styles.statsLoadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.info} />\n          <Text style={styles.statsLoadingText}>×˜×•×¢×Ÿ × ×ª×•× ×™×...</Text>\n        </View>\n      ) : (\n        <View style={styles.statsGrid}>\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('siteVisits', '×‘×™×§×•×¨×™× ×‘××ª×¨', stats.siteVisits, 'eye-outline', colors.info)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"eye-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.siteVisits.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×‘×™×§×•×¨×™× ×‘××ª×¨</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('totalMoneyDonated', '×ª×¨×•××•×ª ×›×¡×¤×™×•×ª', stats.totalMoneyDonated, 'cash-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"cash-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.totalMoneyDonated.toLocaleString('he-IL')} â‚ª</Text>\n            <Text style={styles.statLabel}>×©\"×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('totalUsers', '×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×', stats.totalUsers, 'heart-outline', colors.secondary)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"heart-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.totalUsers.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('itemDonations', '×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•', stats.itemDonations, 'cube-outline', colors.accent)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"cube-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.itemDonations.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.statCard, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '40' }]}\n            onPress={() => handleStatPress('completedRides', '× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª', stats.completedRides, 'car-outline', colors.greenBright)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"car-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.completedRides.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('recurringDonationsAmount', '×ª×¨×•××•×ª ×§×‘×•×¢×•×ª', stats.recurringDonationsAmount, 'repeat-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"repeat-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.recurringDonationsAmount.toLocaleString('he-IL')} â‚ª</Text>\n            <Text style={styles.statLabel}>×ª×¨×•××•×ª ×§×‘×•×¢×•×ª ×¤×¢×™×œ×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('uniqueDonors', '×ª×•×¨××™× ×¤×¢×™×œ×™×', stats.uniqueDonors, 'people-outline', colors.info)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"people-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.uniqueDonors.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×ª×•×¨××™× ×¤×¢×™×œ×™×</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.statCard, { backgroundColor: colors.success + '15', borderColor: colors.success + '40' }]}\n            onPress={() => handleStatPress('completedTasks', '××©×™××•×ª ×©×‘×•×¦×¢×•', stats.completedTasks, 'checkmark-done-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"checkmark-done-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.completedTasks.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>××©×™××•×ª ×©×‘×•×¦×¢×•</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* CTA Button - Go to App */}\n      {/* <View style={styles.ctaRow}>\n        <TouchableOpacity\n          style={styles.primaryCta}\n          onPress={onGoToApp}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"phone-portrait-outline\" size={isMobileWeb ? 16 : 22} color={colors.white} style={styles.ctaIcon} />\n          <Text style={styles.primaryCtaText}>×¢×‘×•×¨ ×œ××¤×œ×™×§×¦×™×”</Text>\n        </TouchableOpacity>\n      </View> */}\n    </Section>\n  );\n};\n\nconst ProblemsSection = () => (\n  <Section id=\"section-problems\" title=\"×”×‘×¢×™×•×ª ×©×× ×—× ×• ×‘××™× ×œ×¤×ª×•×¨\" subtitle=\"×œ××” ×¦×¨×™×š ×‘×›×œ×œ ××ª KC?\">\n    <View style={styles.problemsContent}>\n      <View style={styles.problemCard}>\n        <Ionicons name=\"copy-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×›×¤×™×œ×•×ª, ×¤×™×–×•×¨ ×•×—×•×¡×¨ ×××™× ×•×ª</Text>\n        <Text style={styles.problemText}>\n          ×”×™×•× ×™×© ×›×œ ×›×š ×”×¨×‘×” ×¤×œ×˜×¤×•×¨××•×ª, ×§×‘×•×¦×•×ª ×•×•××˜×¡××¤, ×•×¢××•×ª×•×ª ×©×× ×¡×•×ª ×œ×¢×–×•×¨. ×›×œ ××—×“ ×¢×•×‘×“ ×œ×‘×“, ×™×© ×›×¤×™×œ×•×™×•×ª, ×—×•×¡×¨ ×ª×™××•×, ×•×§×©×” ×œ×“×¢×ª ×¢×œ ××™ ××¤×©×¨ ×œ×¡××•×š.\n          Karma Community ×××—×“×ª ××ª ×›×œ ×–×” ×œ××§×•× ××—×“, ×©×§×•×£ ×•×××™×Ÿ.\n        </Text>\n      </View>\n\n      <View style={styles.problemCard}>\n        <Ionicons name=\"people-circle-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×§×”×™×œ×” ×œ×—×•×¤×©×™×•×ª</Text>\n        <Text style={styles.problemText}>\n          ×›×‘×¨ ×©× ×™× ×©×™×© ×œ××“× ××ª ×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×”×¨×¦×•×Ÿ ×œ×§×”×™×œ×” ×•×”×¨×¦×•×Ÿ ×œ×—×•×¤×©×™×•×ª. ×”×¨×™ ×›×œ ×§×”×™×œ×” ×¢× ×”×’×‘×œ×•×ª ×•××•×¡×›××•×ª ××©×œ×”.\n          {'\\n\\n'}\n          Karma Community ×‘××” ×œ×”×¦×™×¢ ×¤×œ×˜×¤×•×¨××”, ××™×Ÿ ×¨×©×ª ×—×‘×¨×ª×™×ª, ××©×¨ ××¦×“ ××—×“ ×©××” ×“×’×© ×¢×œ ×‘×™×—×“ ×•××¦×“ ×©× ×™ ×“×’×© ×¢×œ ×—×•×¤×© ×•×œ×™×‘×¨×œ×™×•×ª.\n        </Text>\n      </View>\n\n      <View style={styles.problemCard}>\n        <Ionicons name=\"ban-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ××•× ×¢×•×ª ×××™× ×˜×¨×¡×™×</Text>\n        <Text style={styles.problemText}>\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª\" ×”××œ×”.\n          {'\\n\\n'}\n          Karma Community ×‘××” ×œ×”×¦×™×¢ ×¨×©×ª ×—×‘×¨×ª×™×ª ×œ×œ× ×¤×¨×¡×•××•×ª ×•×œ×œ× ×ª×•×›×Ÿ ×—×•××¨×™/×¤×•×’×¢× ×™. ×¤×œ×˜×¤×•×¨××” ×”××§×“×©×ª ×§×”×™×œ×ª×™×•×ª ×•×©×™×ª×•×£.\n        </Text>\n      </View>\n    </View>\n  </Section>\n);\n\nconst FeaturesSection = () => (\n  <Section id=\"section-features\" title=\"×›×œ ××” ×©×¦×¨×™×š ×›×“×™ ×œ×¢×©×•×ª ×˜×•×‘\" subtitle=\"×›×œ×™× ×¤×©×•×˜×™× ×©×”×•×¤×›×™× ×¢×–×¨×” ×”×“×“×™×ª ×œ×—×œ×§ ××”×™×•×-×™×•×\" style={styles.sectionAltBackground}>\n    <View style={styles.featuresGrid}>\n      <Feature emoji=\"ğŸ¤\" title=\"×¦×¨×™×›×™× ×¢×–×¨×”? ×¨×•×¦×™× ×œ×¢×–×•×¨?\" text=\"×¤×¨×¡××• ×‘×§×œ×•×ª ×‘×§×©×” ××• ×”×¦×¢×”, ×•×§×‘×œ×• ××¢× ×” ××”×§×”×™×œ×” ×¡×‘×™×‘×›×. ××©×™×¢×•×¨×™ ×¢×–×¨ ×•×¢×“ ×ª×™×§×•× ×™× ×§×˜× ×™× ×‘×‘×™×ª.\" />\n      <Feature emoji=\"ğŸ’¬\" title=\"×”×ª×—×‘×¨×• ×œ×× ×©×™× ×›××•×›×\" text=\"××¦××• ×§×‘×•×¦×•×ª ×¢× ×™×™×Ÿ, ×”×¦×˜×¨×¤×• ×œ×“×™×•× ×™×, ×•×¦×¨×• ×§×©×¨×™× ×—×“×©×™× ×¢× ×× ×©×™× ×©××›×¤×ª ×œ×”×.\" />\n      <Feature emoji=\"ğŸ“\" title=\"×’×œ×• ×”×–×“×× ×•×™×•×ª ×¡×‘×™×‘×›×\" text=\"×”××¤×” ×”×—×›××” ×©×œ× ×• ×ª×¨××” ×œ×›× ××™×¤×” ×¦×¨×™×›×™× ××ª×›×, ×××© ×œ×™×“ ×”×‘×™×ª.\" greenAccent />\n      <Feature emoji=\"ğŸ”’\" title=\"×¤×œ×˜×¤×•×¨××” ×‘×˜×•×—×” ×•×©×§×•×¤×”\" text=\"×‘×œ×™ ×¤×¨×¡×•××•×ª, ×‘×œ×™ ×ª×•×›×Ÿ ×¤×•×’×¢× ×™, ×¨×§ ×§×”×™×œ×ª×™×•×ª ×××™×ª×™×ª ×•×××•×Ÿ ×”×“×“×™.\" />\n    </View>\n  </Section>\n);\n\nconst HowItWorksSection = () => (\n  <Section id=\"section-how\" title=\"××™×š ×–×” ×¢×•×‘×“?\" subtitle=\"×ª×”×œ×™×š ×¤×©×•×˜ ×•×‘×¨×•×¨ ×©××—×‘×¨ ×‘×™×Ÿ ×× ×©×™×\">\n    <Text style={styles.paragraph}>\n      ×§×”×™×œ×ª ×§××¨××” ×‘× ×•×™×” ×¢×œ ×¢×§×¨×•×Ÿ ×¤×©×•×˜: ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ. ×”×ª×”×œ×™×š ×©×œ× ×• × ×•×¢×“ ×œ×”×™×•×ª ×¤×©×•×˜, ×©×§×•×£ ×•×™×“×™×“×•×ª×™.\n    </Text>\n    <View style={styles.stepsRow}>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>1</Text>\n        </View>\n        <Ionicons name=\"person-add-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×”</Text>\n        <Text style={styles.stepText}>\n          ×”×™×¨×©××• ×‘×›××” ×©× ×™×•×ª - ×¨×§ ×¤×¨×˜×™× ×‘×¡×™×¡×™×™×. ×¡×¤×¨×• ×œ× ×• ××” ××¢× ×™×™×Ÿ ××ª×›×, ××™×¤×” ××ª×, ×•××” ××ª× ×™×›×•×œ×™× ×œ×”×¦×™×¢ ××• ××” ××ª× ×¦×¨×™×›×™×. ××™×Ÿ ×¦×•×¨×š ×‘××™×“×¢ ××™×•×ª×¨, ×¨×§ ××” ×©×—×©×•×‘.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>2</Text>\n        </View>\n        <Ionicons name=\"create-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¤×¨×¡××• ××• ×—×¤×©×•</Text>\n        <Text style={styles.stepText}>\n          ×¦×¨×™×›×™× ×¢×–×¨×”? ×¤×¨×¡××• ×‘×§×©×” ×‘×¨×•×¨×” ×¢× ××” ××ª× ×¦×¨×™×›×™×, ××ª×™ ×•××™×¤×”. ×¨×•×¦×™× ×œ×¢×–×•×¨? ×¤×¨×¡××• ×”×¦×¢×” ×¢× ××” ××ª× ×™×›×•×œ×™× ×œ×ª×ª. ××• ×¤×©×•×˜ ×“×¤×“×¤×• ×‘×¤×™×“ ×•×¨××• ××” ×§×•×¨×” ×¡×‘×™×‘×›×.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>3</Text>\n        </View>\n        <Ionicons name=\"search-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×’×œ×• ×”×–×“×× ×•×™×•×ª</Text>\n        <Text style={styles.stepText}>\n          ×”××¤×” ×”×—×›××” ×©×œ× ×• ×ª×¨××” ×œ×›× ××™×¤×” ×¦×¨×™×›×™× ××ª×›×, ×××© ×œ×™×“ ×”×‘×™×ª. ×”×¤×™×“ ×”××™×©×™ ×©×œ×›× ×™×¦×™×’ ×œ×›× ×‘×§×©×•×ª ×•×”×¦×¢×•×ª ×¨×œ×•×•× ×˜×™×•×ª ×œ×¤×™ ×”××™×§×•× ×•×”×¢× ×™×™×Ÿ ×©×œ×›×.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>4</Text>\n        </View>\n        <Ionicons name=\"chatbubble-ellipses-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¦×¨×• ×§×©×¨</Text>\n        <Text style={styles.stepText}>\n          ×¨××™×ª× ××©×”×• ×©××¢× ×™×™×Ÿ ××ª×›×? ×©×œ×—×• ×”×•×“×¢×” ×™×©×™×¨×”, ×ª×××• ×¤×¨×˜×™×, ×”×›×™×¨×• ××ª ×”××“× ×©×××—×•×¨×™ ×”×‘×§×©×” ××• ×”×”×¦×¢×”. ×”×›×œ ×©×§×•×£, ×‘×˜×•×— ×•×¤×©×•×˜.\n        </Text>\n      </View>\n      <View style={[styles.stepCard, { backgroundColor: colors.greenBright + '12', borderColor: colors.greenBright + '40' }]}>\n        <View style={[styles.stepNumberBadge, { backgroundColor: colors.greenBright }]}>\n          <Text style={styles.stepNumber}>5</Text>\n        </View>\n        <Ionicons name=\"heart-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¢×©×• ×˜×•×‘ ×•×”×¨×’×™×©×• ××ª ×”×”×‘×“×œ</Text>\n        <Text style={styles.stepText}>\n          ×ª×××•, ×¤×’×©×•, ×¢×–×¨×• ××• ×§×‘×œ×• ×¢×–×¨×”. ×›×œ ×¤×¢×•×œ×” ×›×–×• ×™×•×¦×¨×ª ×§×©×¨ ×× ×•×©×™ ×××™×ª×™ ×•××—×–×§×ª ××ª ×”×§×”×™×œ×”. ××ª× ×ª×¨××• ××ª ×”×”×©×¤×¢×” ×©×œ×›×, ×•×”×§×”×™×œ×” ×ª×¨××” ××ª ×”×ª×¨×•××” ×©×œ×›×.\n        </Text>\n      </View>\n    </View>\n    <View style={styles.howItWorksNote}>\n      <Ionicons name=\"information-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} />\n      <Text style={styles.howItWorksNoteText}>\n        ×”×›×œ ×‘×—×™× ×, ×”×›×œ ×©×§×•×£, ×”×›×œ ×œ××¢×Ÿ ×”×§×”×™×œ×”. ××™×Ÿ ×‘×™×¨×•×§×¨×˜×™×”, ××™×Ÿ ×¢××œ×•×ª, ×¨×§ ×× ×©×™× ×©×¢×•×–×¨×™× ×œ×× ×©×™×.\n      </Text>\n    </View>\n  </Section>\n);\n\nconst WhoIsItForSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => (\n  <Section id=\"section-who\" title=\"×œ××™ ×–×” ××ª××™×?\" subtitle=\"×œ×›×•×œ×. ×‘×××ª.\" style={styles.sectionAltBackground}>\n    <Text style={styles.paragraph}>\n      <Text style={styles.emphasis}>×§×”×™×œ×ª ×§××¨××” ××™×•×¢×“×ª ×œ×›×•×œ×.</Text> ×¢×©×™×¨×™× ×•×¢× ×™×™×, ××¨×›×– ×•×¤×¨×™×¤×¨×™×”, ×œ× ××©× ×” ×“×ª, ×’×–×¢, ××™×Ÿ, ×œ××•× ×•××¤×™×œ×• ×œ× ××™×§×•× ×¤×™×–×™. ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ.\n    </Text>\n    <View style={styles.whoContent}>\n      <View style={styles.whoMainCard}>\n        <Ionicons name=\"people-outline\" size={isMobileWeb ? 32 : 48} color={colors.info} style={styles.whoMainIcon} />\n        <Text style={styles.splitTitle}>×œ×× ×©×™× ×¤×¨×˜×™×™×</Text>\n        <Text style={styles.paragraph}>\n          ×‘×©×œ×‘×™× ×”×¨××©×•× ×™×, KarmaCommunity ××ª××§×“×ª ×‘×× ×©×™× ×¤×¨×˜×™×™× - ×©×›× ×™×, ×—×‘×¨×™×, ×•×›×œ ××™ ×©×¨×•×¦×” ×œ×ª×ª ××”×–××Ÿ, ×”×™×“×¢ ××• ×”×—×¤×¦×™× ×©×œ×• ×›×“×™ ×œ×¢×–×•×¨ ×œ××—×¨×™×.\n        </Text>\n        <View style={styles.iconBullets}>\n          <View style={styles.iconBulletRow}><Ionicons name=\"gift-outline\" size={isMobileWeb ? 14 : 18} color={colors.secondary} /><Text style={styles.iconBulletText}>×©×™×ª×•×£ ×—×¤×¦×™×, ××–×•×Ÿ ×•×¦×™×•×“</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"time-outline\" size={isMobileWeb ? 14 : 18} color={colors.accent} /><Text style={styles.iconBulletText}>×”×ª× ×“×‘×•×ª ×•×¡×™×•×¢ × ×§×•×“×ª×™</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"school-outline\" size={isMobileWeb ? 14 : 18} color={colors.info} /><Text style={styles.iconBulletText}>×©×™×ª×•×£ ×™×“×¢ ×•×©×™×¢×•×¨×™ ×¢×–×¨</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"heart-outline\" size={isMobileWeb ? 14 : 18} color={colors.greenBright} /><Text style={styles.iconBulletText}>×™×¦×™×¨×ª ×§×©×¨×™× ×× ×•×©×™×™× ×××™×ª×™×™×</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"people-outline\" size={isMobileWeb ? 14 : 18} color={colors.success} /><Text style={styles.iconBulletText}>×›××•×‘×Ÿ ×›×•×œ× ××•×–×× ×™× ×œ×”×ª× ×“×‘ ×•×œ×ª×¨×•× ×’× ×œ×§×”×™×œ×” ×¢×¦××” ×•×œ×”×™×•×ª ×—×œ×§ ××”××™×™×¡×“×™×</Text></View>\n        </View>\n\n        {/* Donation Button */}\n        <TouchableOpacity\n          style={styles.donationCtaButton}\n          onPress={onDonate}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"heart\" size={isMobileWeb ? 18 : 24} color={colors.white} />\n          <Text style={styles.donationCtaButtonText}>×ª×¨××• ×œ× ×•</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.whoFutureCard}>\n        <Ionicons name=\"business-outline\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} style={styles.whoFutureIcon} />\n        <Text style={styles.whoFutureTitle}>×¢××•×ª×•×ª ×•××¨×’×•× ×™× - ×‘×”××©×š</Text>\n        <Text style={styles.whoFutureText}>\n          ×‘×©×œ×‘×™× ×”×‘××™× × ×—×‘×¨ ×’× ×¢××•×ª×•×ª ×•××¨×’×•× ×™× ×¢× ×›×œ×™× ×™×™×¢×•×“×™×™× ×œ× ×™×”×•×œ ××ª× ×“×‘×™×, ×ª×¨×•××•×ª ×•×¤× ×™×•×ª. ×“×’×© ×—×©×•×‘ - ×–×” ×™×§×¨×” ×¨×§ ××—×¨×™ ×©× ×‘×¡×¡ ×§×”×™×œ×” ×—×–×§×” ×©×œ ×× ×©×™× ×¤×¨×˜×™×™×.\n        </Text>\n      </View>\n    </View>\n  </Section>\n);\n\nconst ValuesSection = () => {\n  const valuePills = [\n    '×©×§×™×¤×•×ª ××œ××”',\n    '×××•×Ÿ ×•×‘×˜×™×—×•×ª',\n    '×§×”×™×œ×ª×™×•×ª ×¤×¢×™×œ×”',\n    '××—×¨×™×•×ª ××©×•×ª×¤×ª',\n    '×’×™×©×” ××›×œ ××§×•×',\n    '××“×™×“×” ×•×œ××™×“×”',\n  ];\n  const commitments = [\n    { icon: 'shield-checkmark-outline', text: '××™××•×ª ××©×ª××©×™× ×•××¨×’×•× ×™× ×œ×¤× ×™ ×¢×œ×™×™×” ×œ××•×•×™×¨', color: colors.success },\n    { icon: 'sparkles-outline', text: '×—×•×•×™×™×ª ×©×™××•×© × ×•×—×” ×•× ×§×™×™×” ××”×¡×—×•×ª ×“×¢×ª', color: colors.secondary },\n    { icon: 'leaf-outline', text: '×”×ª×¤×ª×—×•×ª ×‘×¨×ª ×§×™×™×× â€“ ×‘×œ×™ ×¤×¨×¡×•××•×ª ×•×‘×œ×™ ×“××˜×” ××™×•×ª×¨', color: colors.greenBright },\n  ];\n\n  return (\n    <Section id=\"section-values\" title=\"×”×¢×¨×›×™× ×©×× ×—×™× ××•×ª× ×•\" subtitle=\"××” ×”×•×¤×š ××ª Karma Community ×œ×§×”×™×œ×” ×‘×˜×•×—×” ×•×××™× ×”\" style={styles.sectionAltBackground}>\n      <Text style={styles.paragraph}>\n        ×× ×• ××•×‘×™×œ×™× ×©×™× ×•×™ ×‘×××¦×¢×•×ª ××¢×¨×›×ª ×©××¢××™×“×” ××ª ×”××“× ×‘××¨×›×–. ×›×œ ×¤×™×¦×³×¨ × ×‘×—×Ÿ ×œ×¤×™ ×ª×¨×•××ª×• ×œ×©×§×™×¤×•×ª, ×œ×—×™×‘×•×¨×™× ×× ×•×©×™×™× ×•×œ×™×›×•×œ×ª ×œ××“×•×“ ×”×©×¤×¢×” ×××™×ª×™×ª.\n      </Text>\n      <View style={styles.valuesRow}>\n        {valuePills.map((value) => (\n          <View key={value} style={styles.valuePill}>\n            <Text style={styles.valuePillText}>{value}</Text>\n          </View>\n        ))}\n      </View>\n      <View style={styles.trustList}>\n        {commitments.map((item) => (\n          <View key={item.text} style={styles.trustRow}>\n            <Ionicons name={item.icon as any} size={isMobileWeb ? 14 : 18} color={item.color} />\n            <Text style={styles.trustText}>{item.text}</Text>\n          </View>\n        ))}\n      </View>\n    </Section>\n  );\n};\n\nconst CoreMottosSection = () => (\n  <Section id=\"section-core-mottos\" title=\"×”×¢×§×¨×•× ×•×ª ×”×× ×—×™× ×©×œ× ×•\" subtitle=\"××” ×©×× ×™×¢ ××•×ª× ×• ×§×“×™××”\">\n    <View style={styles.coreMottosContainer}>\n      <View style={styles.coreMottoItem}>\n        <Ionicons name=\"sparkles\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×”×©××¨×™×•×ª ×©×œ ×”××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×”××•×¦×¨ ×©×œ ××™×©×”×• ××—×¨</Text>\n      </View>\n\n      <View style={[styles.coreMottoItem, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '50' }]}>\n        <Ionicons name=\"heart-circle\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×œ×›×œ ××—×“ ×××™×ª× ×• ×™×© ××©×”×• ×œ×ª×ª ×•×’× ××©×”×• ×©×”×•× ×”×™×” ×©××— ×œ×§×‘×œ</Text>\n      </View>\n\n      <View style={styles.coreMottoItem}>\n        <Ionicons name=\"swap-horizontal\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ</Text>\n      </View>\n    </View>\n  </Section>\n);\n\n// Admin Hierarchy Section - Visual tree of the management structure\nconst AdminHierarchySection = () => {\n  const navigation = useNavigation<any>();\n  const { isAuthenticated, isGuestMode } = useUser();\n\n  const handleViewAdminDashboard = () => {\n    // Allow everyone to view, including unauthenticated users\n    navigation.navigate('AdminDashboard', { viewOnly: true, hideTopBar: false, hideBottomBar: false });\n  };\n\n  return (\n    <Section id=\"section-hierarchy\" title=\"××‘× ×” ×”× ×™×”×•×œ\" subtitle=\"×”×¦×•×•×ª ×©××•×‘×™×œ ××ª ×”×§×”×™×œ×”\" style={styles.sectionAltBackground}>\n      <View style={styles.hierarchyContainer}>\n        <AdminHierarchyTree />\n      </View>\n      <TouchableOpacity\n        style={[styles.contactButton, { backgroundColor: colors.primary, marginTop: 20 }]}\n        onPress={handleViewAdminDashboard}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"eye-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n        <Text style={styles.contactButtonText}>×œ×××—×•×¨×™ ×”×§×œ×¢×™× ×©×œ KC</Text>\n      </TouchableOpacity>\n    </Section>\n  );\n};\n\nconst RoadmapSection = () => {\n  const roadmapSteps = [\n    {\n      time: 'Q1 2026',\n      label: '×”×•×¦××ª ×’×¨×¡×” ×¨××©×•× ×” ×œ××¤×œ×§×¦×™×” ×œandroid ×•ios',\n      icon: 'phone-portrait-outline',\n      color: colors.info\n    },\n    {\n      time: 'Q2 2026',\n      label: '×¤×™×¦×™×¨×™× ××ª×§×“××™× ×œ×©×™×ª×•×£ ××™×“×¢ ×¢× ×©××¨ ×”×¢××•×ª×•×ª ×•×§×‘×•×¦×•×ª ×”×•×•××˜×¡×¤ ×•×”×¤×™×™×¡×‘×•×§',\n      icon: 'share-social-outline',\n      color: colors.secondary\n    },\n    {\n      time: 'Q3 2026',\n      label: '×©×™×ª×•×¤×™ ×¤×¢×•×œ×” ×¢× ×¢×™×¨×™×•×ª ×•×’×•×¨××™ ×¨×•×•×—×”',\n      icon: 'business-outline',\n      color: colors.accent\n    },\n    {\n      time: 'Q4 2026',\n      label: '×™×¦×™××” ×œ×—×•×´×œ ×›×¤×œ×˜×¤×•×¨××” ×‘×™× ×œ××•××™×ª',\n      icon: 'globe-outline',\n      color: colors.success\n    },\n  ];\n\n  const logoEvolution = [\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-0.jpeg'), label: '×”×ª×—×œ×”' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-1.jpeg'), label: '×¤×™×ª×•×—' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-2.jpeg'), label: '×©×™×¤×•×¨' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-3.jpeg'), label: '×¢×“×›×•×Ÿ' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-4.png'), label: '×¢×›×©×™×•' },\n  ];\n\n  return (\n    <Section id=\"section-roadmap\" title=\"××¤×ª ×”×“×¨×›×™× ×©×œ× ×•\" subtitle=\"×”×ª×•×›× ×™×ª ×œ×”×¨×—×‘×ª ×”××™××¤×§×˜ ×©×œ ×”×§×”×™×œ×”\">\n      <View style={styles.roadmapContainer}>\n        {roadmapSteps.map((step, index) => (\n          <View key={step.label} style={styles.roadmapItemWrapper}>\n            <View style={styles.roadmapItem}>\n              <View style={[styles.roadmapIconContainer, { backgroundColor: step.color + '15' }]}>\n                <Ionicons\n                  name={step.icon as any}\n                  size={isMobileWeb ? 24 : 32}\n                  color={step.color}\n                />\n              </View>\n              <View style={styles.roadmapContent}>\n                <View style={[styles.roadmapTimeBadge, { backgroundColor: step.color }]}>\n                  <Text style={styles.roadmapTimeText}>{step.time}</Text>\n                </View>\n                <Text style={styles.roadmapLabel}>{step.label}</Text>\n              </View>\n            </View>\n            {index < roadmapSteps.length - 1 && (\n              <View style={styles.roadmapConnector}>\n                <View style={[styles.roadmapConnectorLine, { borderColor: step.color + '40' }]} />\n              </View>\n            )}\n          </View>\n        ))}\n      </View>\n\n      {/* Logo Evolution Section */}\n      <View style={styles.logoEvolutionContainer}>\n        <Text style={styles.logoEvolutionTitle}>××™×š ×”×“×‘×¨×™× ××ª×¤×ª×—×™×</Text>\n        <Text style={styles.logoEvolutionSubtitle}>×”×œ×•×’×• ×©×œ× ×• ×¢×‘×¨ ×›××” ×’×¨×¡××•×ª ×‘×“×¨×š ×œ×›××Ÿ</Text>\n        <View style={styles.logoEvolutionGrid}>\n          {logoEvolution.map((logo, index) => (\n            <View key={index} style={styles.logoEvolutionItem}>\n              <Image source={logo.image} style={styles.logoEvolutionImage} resizeMode=\"contain\" />\n              <Text style={styles.logoEvolutionLabel}>{logo.label}</Text>\n            </View>\n          ))}\n        </View>\n      </View>\n\n      <View style={styles.brandStrip}>\n        <Ionicons name=\"rocket-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} />\n        <Text style={styles.trustText}>××ª×§×“××™× ×™×—×“ ×¢× ×”×§×”×™×œ×” â€“ ×›×œ ×¤×™×“×‘×§ ××©×¤×™×¢ ×¢×œ ×¡×“×¨ ×”×¢×“×™×¤×•×™×•×ª ×©×œ× ×•.</Text>\n      </View>\n    </Section>\n  );\n};\n\nconst AboutSection: React.FC = () => (\n  <Section id=\"section-about\" title=\"×§×”×™×œ×” ××—×ª. ××˜×¨×” ××—×ª.\" subtitle=\"×”×¡×™×¤×•×¨ ×©×œ ×§×”×™×œ×ª ×§××¨××”\">\n    <Text style={styles.paragraph}>\n      ×‘×¢×•×œ× ××œ× ×‘×¨×¢×©, ×× ×—× ×• ××××™× ×™× ×‘×›×•×— ×”×©×§×˜ ×©×œ ×¢×©×™×™×ª ×”×˜×•×‘. ×§×”×™×œ×ª ×§××¨××” × ×•×œ×“×” ××ª×•×š ×¦×•×¨×š ×¤×©×•×˜: ×œ×—×‘×¨ ×‘×™×Ÿ ×× ×©×™×. ×‘×™×Ÿ ××œ×” ×©×¦×¨×™×›×™× ×¢×–×¨×”, ×œ×‘×™×Ÿ ××œ×” ×©×™×›×•×œ×™× ×•×¨×•×¦×™× ×œ×”×•×©×™×˜ ×™×“. ×¨××™× ×• ××ª ×”×›×¤×™×œ×•×™×•×ª, ××ª ×—×•×¡×¨ ×”×××•×Ÿ ×•××ª ×”××××¦×™× ×”××¤×•×–×¨×™×, ×•×”×—×œ×˜× ×• ×œ×™×¦×•×¨ ×¤×œ×˜×¤×•×¨××” ××—×ª ×©×××—×“×ª ××ª ×›×•×œ×.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×‘×œ×™ ×¤×¨×¡×•××•×ª, ×‘×œ×™ ××™× ×˜×¨×¡×™×, ×¨×§ ×˜×›× ×•×œ×•×’×™×” ×‘×©×™×¨×•×ª ×”×× ×•×©×™×•×ª. ×”××©×™××” ×©×œ× ×• ×”×™× ×œ×”×¤×•×š ××ª ×”× ×ª×™× ×” ×œ×—×œ×§ ×˜×‘×¢×™ ×•×¤×©×•×˜ ××”×™×•×-×™×•× ×©×œ ×›×•×œ× ×•, ×•×œ×™×¦×•×¨ ×—×‘×¨×” ×™×©×¨××œ×™×ª ××—×•×‘×¨×ª, ×ª×•××›×ª ×•××›×¤×ª×™×ª ×™×•×ª×¨.\n    </Text>\n    <Text style={[styles.sectionSubTitle, { marginTop: 30 }]}>××™×œ×” ××”××™×™×¡×“, × ×•×” ×¡×¨×•×¡×™</Text>\n    <Text style={styles.paragraph}>\n      ××’×™×œ ×¦×¢×™×¨ ×”×¨×’×©×ª×™ ×¤×¨×™×‘×™×œ×’×™×” ×•×©×”×—×™×™× ×©×œ×™ ××¡×•×“×¨×™×. ×“×•×•×§× ×‘×¦×‘×, ×œ××¨×•×ª ×©×”×’×¢×ª×™ ×œ×ª×¤×§×™×“ ×˜×•×‘ ×‘×ª×•×¨ ××ª×›× ×ª ××˜×•×¡×™×, ×œ× ×”×¨×’×©×ª×™ ××ª ×”××©××¢×•×ª ×©×—×™×¤×©×ª×™. ×›×œ ×”×–××Ÿ ×—×©×‘×ª×™ ××™×š ×× ×™ ×™×›×•×œ ×œ×”×‘×™× ×©×™× ×•×™ ×××™×ª×™ ×•×˜×•×‘ ×œ×¢×•×œ×. ×ª××™×“ ×¢× ×™×™×Ÿ ××•×ª×™ ×œ×¢×‘×•×“ ×‘×¡×§×™×™×œ×™× ×’×“×•×œ×™× ×•×œ×”×©×¤×™×¢ ×œ×˜×•×‘×” ×¢×œ ×›××” ×©×™×•×ª×¨ ×× ×©×™×.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×§×”×™×œ×ª ×§××¨××” ×”×™× ×”×“×¨×š ×©×œ×™ ×œ×”×¤×•×š ××ª ×”×˜×•×‘ ×œ× ×’×™×© ×™×•×ª×¨, ×œ×™×¦×•×¨ ×¤×œ×˜×¤×•×¨××” ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×–×•×¨ ×œ×× ×©×™× ×©×¦×¨×™×›×™× ×¢×–×¨×”. ×× ×™ ××××™×Ÿ ×‘×›×•×— ×©×œ ×§×”×™×œ×” ×œ×©× ×•×ª ××¦×™××•×ª, ×•××©××— ×©×ª×¦×˜×¨×¤×• ××œ×™×™ ×œ××¡×¢ ×”×–×”.\n    </Text>\n\n    {/* WhatsApp CTA Button */}\n    <View style={styles.ctaRow}>\n      <TouchableOpacity\n        style={[styles.contactButton, { backgroundColor: colors.success }]}\n        onPress={() => {\n          logger.info('LandingSite', 'Click - whatsapp from founder section');\n          Linking.openURL('https://wa.me/972528616878');\n        }}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n        <Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n    </View>\n\n    <View style={styles.githubLinkContainer}>\n      <TouchableOpacity\n        style={styles.githubLinkButton}\n        onPress={() => { logger.info('LandingSite', 'Click - github org'); Linking.openURL('https://github.com/KarmaCummunity'); }}\n      >\n        <Ionicons name=\"logo-github\" size={isMobileWeb ? 18 : 24} color={colors.textPrimary} />\n        <View style={styles.githubLinkTextContainer}>\n          <Text style={styles.githubLinkTitle}>×’×™×˜×”××‘ - ×”×§×•×“ ×”×¤×ª×•×—</Text>\n          <Text style={styles.githubLinkDescription}>×–×” ×”×§×•×“ ×©×œ ×”××¤×œ×™×§×¦×™×”. ×›×•×œ× ××•×–×× ×™× ×œ×”×¡×ª×›×œ ×•×œ×¢×–×•×¨</Text>\n        </View>\n        <Ionicons name=\"arrow-forward-outline\" size={isMobileWeb ? 16 : 20} color={colors.info} />\n      </TouchableOpacity>\n    </View>\n  </Section>\n);\n\nconst GallerySection = () => (\n  <Section title=\"×¨×’×¢×™× ××”×§×”×™×œ×”\" subtitle=\"×ª××•× ×•×ª ×©×©×•×•×ª ××œ×£ ××™×œ×™×\">\n    <View style={styles.galleryGrid}>\n      <Image source={require('../assets/images/landingScreen/found-money.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n      <Image source={require('../assets/images/landingScreen/together.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n      <Image source={require('../assets/images/landingScreen/toy_donation.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n    </View>\n  </Section>\n);\n\nconst PartnersSection = () => (\n  <Section title=\"×‘×™×—×“ ×™×•×¦×¨×™× ×©×™× ×•×™\" subtitle=\"×’××™× ×œ×©×ª×£ ×¤×¢×•×œ×” ×¢× ××¨×’×•× ×™× ×©×—×•×œ×§×™× ××ª ×”×—×–×•×Ÿ ×©×œ× ×•\" style={styles.sectionAltBackground}>\n    <View style={styles.partnersContainer}>\n      <View style={styles.partnerCard}>\n        <Image source={require('../assets/images/landingScreen/jgive-logo.png')} style={styles.partnerLogo} resizeMode=\"contain\" />\n      </View>\n    </View>\n  </Section>\n);\n\nconst InstagramSection = () => {\n  const [webViewKey, setWebViewKey] = useState(0);\n\n  return (\n    <Section id=\"section-instagram\" title=\"×¢×§×‘×• ××—×¨×™× ×• ×‘××™× ×¡×˜×’×¨×\" subtitle=\"×ª××•× ×•×ª ×•×¡×¨×˜×•× ×™× ××”×§×”×™×œ×” ×©×œ× ×•\" style={styles.sectionAltBackground}>\n      <View style={styles.instagramContainer}>\n        {isWeb ? (\n          <View style={styles.instagramWebViewContainer}>\n            <WebView\n              key={webViewKey}\n              source={{ uri: 'https://www.instagram.com/karma_community_/' }}\n              style={styles.instagramWebView}\n              javaScriptEnabled={true}\n              domStorageEnabled={true}\n              startInLoadingState={true}\n              renderLoading={() => (\n                <View style={styles.instagramLoadingContainer}>\n                  <ActivityIndicator size=\"large\" color={colors.secondary} />\n                  <Text style={styles.instagramLoadingText}>×˜×•×¢×Ÿ ××™× ×¡×˜×’×¨×...</Text>\n                </View>\n              )}\n              onError={() => {\n                logger.error('LandingSite', 'Instagram WebView error');\n                setWebViewKey(prev => prev + 1); // Retry\n              }}\n            />\n          </View>\n        ) : (\n          <View style={styles.instagramFallback}>\n            <Ionicons name=\"logo-instagram\" size={isMobileWeb ? 48 : 64} color={colors.secondary} />\n            <Text style={styles.instagramFallbackText}>\n              ×¢×§×‘×• ××—×¨×™× ×• ×‘××™× ×¡×˜×’×¨×\n            </Text>\n            <TouchableOpacity\n              style={[styles.contactButton, { backgroundColor: colors.secondary }]}\n              onPress={() => {\n                logger.info('LandingSite', 'Click - instagram from section');\n                Linking.openURL('https://www.instagram.com/karma_community_/');\n              }}\n            >\n              <Ionicons name=\"logo-instagram\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n              <Text style={styles.contactButtonText}>×¤×ª×— ×‘××™× ×¡×˜×’×¨×</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n    </Section>\n  );\n};\n\n\n\nconst FAQItem: React.FC<{ question: string; answer: string; icon?: string }> = ({ question, answer, icon }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const animatedHeight = useRef(new Animated.Value(0)).current;\n  const animatedRotation = useRef(new Animated.Value(0)).current;\n\n  const toggleExpanded = () => {\n    const toValue = isExpanded ? 0 : 1;\n    Animated.parallel([\n      Animated.timing(animatedHeight, {\n        toValue,\n        duration: 300,\n        useNativeDriver: false,\n      }),\n      Animated.timing(animatedRotation, {\n        toValue,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n    ]).start();\n    setIsExpanded(!isExpanded);\n  };\n\n  const contentHeight = animatedHeight.interpolate({\n    inputRange: [0, 1],\n    outputRange: [0, 200], // Max height for answer\n  });\n\n  const rotateInterpolate = animatedRotation.interpolate({\n    inputRange: [0, 1],\n    outputRange: ['0deg', '180deg'],\n  });\n\n  return (\n    <View style={styles.faqCard}>\n      <TouchableOpacity\n        style={styles.faqQuestionRow}\n        onPress={toggleExpanded}\n        activeOpacity={0.7}\n      >\n        <View style={styles.faqQuestionContent}>\n          {icon && (\n            <Ionicons\n              name={icon as any}\n              size={isMobileWeb ? 20 : 24}\n              color={colors.info}\n              style={styles.faqIcon}\n            />\n          )}\n          <Text style={styles.faqQ}>{question}</Text>\n        </View>\n        <Animated.View style={{ transform: [{ rotate: rotateInterpolate }] }}>\n          <Ionicons\n            name=\"chevron-down-outline\"\n            size={isMobileWeb ? 20 : 24}\n            color={colors.info}\n          />\n        </Animated.View>\n      </TouchableOpacity>\n      <Animated.View style={[styles.faqAnswerContainer, { maxHeight: contentHeight, opacity: animatedHeight }]}>\n        <Text style={styles.faqA}>{answer}</Text>\n      </Animated.View>\n    </View>\n  );\n};\n\nconst FAQSection = () => {\n  const faqData = [\n    {\n      question: '×”×× ×”×©×™××•×© ×‘××¤×œ×™×§×¦×™×” ×¢×•×œ×” ×›×¡×£?',\n      answer: '×œ×. ×§×”×™×œ×ª ×§××¨××” ×”×™× ××™×–× ×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×•×”×©×™××•×© ×‘×” ×™×”×™×” ×ª××™×“ ×‘×—×™× ×, ×œ×›×•×œ×. ×× ×—× ×• ××××™× ×™× ×©×¢×–×¨×” ×”×“×“×™×ª ×¦×¨×™×›×” ×œ×”×™×•×ª × ×’×™×©×” ×œ×›×•×œ×, ×œ×œ× ×›×œ ×¢×œ×•×ª.',\n      icon: 'cash-outline',\n    },\n    {\n      question: '××™×š ××¤×©×¨ ×œ×ª×¨×•× ××• ×œ×”×ª× ×“×‘?',\n      answer: '×”×“×¨×š ×”×˜×•×‘×” ×‘×™×•×ª×¨ ×”×™× ×œ×”×•×¨×™×“ ××ª ×”××¤×œ×™×§×¦×™×”, ×œ×”×¦×˜×¨×£ ×œ×§×”×™×œ×” ×•×œ×”×ª×—×™×œ ×œ×”×’×™×‘ ×œ×‘×§×©×•×ª ×©×¢×•×œ×•×ª. ×‘× ×•×¡×£, ×ª××™×“ ××¤×©×¨ ×œ×™×¦×•×¨ ××™×ª× ×• ×§×©×¨ ×™×©×™×¨×•×ª ×“×¨×š ×•×•×˜×¡××¤, ××™×™×œ ××• ×œ×§×‘×•×¦×ª ×”×•×•×˜×¡××¤ ×©×œ× ×•. ×›×œ ×¢×–×¨×” ××•×¢×¨×›×ª!',\n      icon: 'heart-outline',\n    },\n    {\n      question: '×”×× ×”××¤×œ×™×§×¦×™×” ×–××™× ×” ×’× ×œ×× ×“×¨×•××™×“ ×•×’× ×œ-iOS?',\n      answer: '×”××¤×œ×™×§×¦×™×” × ××¦××ª ×›×¨×’×¢ ×‘×ª×”×œ×™×š ×‘× ×™×™×”. ×‘×™× ×ª×™×™×, ×™×© ×œ× ×• ××ª×¨ Web ×–××™×Ÿ ×œ×©×™××•×© ×©× ×™×ª×Ÿ ×œ×’×©×ª ××œ×™×• ××›×œ ×“×¤×“×¤×Ÿ, ×’× ×”×•× ×‘×ª×”×œ×™×š ×‘× ×™×™×” ×•×”×ª×¤×ª×—×•×ª ××ª××©×›×ª. ×× ×• ×¢×•×‘×“×™× ×¢×œ ×’×¨×¡××•×ª ×œ×× ×“×¨×•××™×“ ×•-iOS ×©×™×•×©×§×• ×‘×¢×ª×™×“.',\n      icon: 'phone-portrait-outline',\n    },\n    {\n      question: '×”×× ×™×© ×¤×¨×¡×•××•×ª?',\n      answer: '×××© ×œ×. ×”×¤×œ×˜×¤×•×¨××” × ×§×™×™×” ×œ×—×œ×•×˜×™×Ÿ ××¤×¨×¡×•××•×ª ×•××§×“×©×ª ×ª×•×›×Ÿ ×§×”×™×œ×ª×™ ×‘×œ×‘×“. ×× ×—× ×• ××—×•×™×‘×™× ×œ×©××•×¨ ×¢×œ ×—×•×•×™×™×ª ××©×ª××© × ×§×™×™×” ×•×××•×§×“×ª ×‘×§×”×™×œ×”, ×œ×œ× ×”×¡×—×•×ª ×“×¢×ª ××¡×—×¨×™×•×ª.',\n      icon: 'ban-outline',\n    },\n    {\n      question: '××™×š ××ª×—×™×œ×™× ×œ×”×©×ª××© ×‘××¤×œ×™×§×¦×™×”?',\n      answer: '×¤×©×•×˜ ×××•×“! ×”×•×¨×™×“×• ××ª ×”××¤×œ×™×§×¦×™×”, ×”×™×¨×©××• ×¢× ×›××” ×¤×¨×˜×™× ×‘×¡×™×¡×™×™× (××• ×”×©×ª××©×• ×‘××¦×‘ ××•×¨×—), ×•××™×“ ×ª×•×›×œ×• ×œ×”×ª×—×™×œ ×œ×¤×¨×¡× ×‘×§×©×•×ª ××• ×”×¦×¢×•×ª, ××• ×œ×“×¤×“×£ ×•×œ×’×œ×•×ª ××” ×§×•×¨×” ×‘×§×”×™×œ×” ×¡×‘×™×‘×›×.',\n      icon: 'play-circle-outline',\n    },\n    {\n      question: '××” ×–×” ××•××¨ \"×§×™×‘×•×¥ ×“×™×’×™×˜×œ×™\"?',\n      answer: '×–×” ×”×—×–×•×Ÿ ×©×œ× ×• - ×œ×™×¦×•×¨ ×§×”×™×œ×” ×“×™×’×™×˜×œ×™×ª ×©××ª×¤×§×“×ª ×›××• ×§×™×‘×•×¥: ×©×™×ª×•×£, ×¢×–×¨×” ×”×“×“×™×ª, ××—×¨×™×•×ª ××©×•×ª×¤×ª, ××‘×œ ×‘×¢×•×œ× ×”××•×“×¨× ×™ ×•×”×“×™×’×™×˜×œ×™. ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ, ×‘×œ×™ ×‘×™×¨×•×§×¨×˜×™×” ×•×‘×œ×™ ×¢××œ×•×ª.',\n      icon: 'people-circle-outline',\n    },\n    {\n      question: '××™×š ××ª× ××‘×˜×™×—×™× ××‘×˜×—×” ×•×¤×¨×˜×™×•×ª?',\n      answer: '×× ×—× ×• ×œ×•×§×—×™× ××ª ×”××‘×˜×—×” ×•×”×¤×¨×˜×™×•×ª ×‘×¨×¦×™× ×•×ª ×¨×‘×”. ×›×œ ×”××™×“×¢ ××•×¦×¤×Ÿ, ×× ×—× ×• ×œ× ××©×ª×¤×™× ××™×“×¢ ×¢× ×¦×“×“×™× ×©×œ×™×©×™×™×, ×•×™×© ×œ× ×• ××¢×¨×›×ª ××™××•×ª ××©×ª××©×™×. ×‘× ×•×¡×£, ×›×œ ×”××©×ª××©×™× ×™×›×•×œ×™× ×œ×©×œ×•×˜ ×‘×¤×¨×˜×™×•×ª ×©×œ×”× ×•×œ×”×—×œ×™×˜ ××” ×œ×—×©×•×£.',\n      icon: 'shield-checkmark-outline',\n    },\n    {\n      question: '××” ×”×”×‘×“×œ ×‘×™×Ÿ Karma Community ×œ×‘×™×Ÿ ×¤×œ×˜×¤×•×¨××•×ª ××—×¨×•×ª?',\n      answer: '×”×”×‘×“×œ ×”×¢×™×§×¨×™ ×”×•× ×©×× ×—× ×• ×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×œ×œ× ×¤×¨×¡×•××•×ª, ×•×××•×§×“×™× 100% ×‘×§×”×™×œ×” ×•×‘×¢×–×¨×” ×”×“×“×™×ª. ×× ×—× ×• ×œ× ××•×›×¨×™× ××™×“×¢, ×œ× ×× ×¡×™× ×œ×”×¨×•×•×™×— ×›×¡×£ ××”××©×ª××©×™×, ×•×›×œ ××” ×©×× ×—× ×• ×¢×•×©×™× ×”×•× ×œ××¢×Ÿ ×”×§×”×™×œ×”.',\n      icon: 'star-outline',\n    },\n    {\n      question: '××™×š ××¤×©×¨ ×œ×¢×–×•×¨ ×‘×¤×™×ª×•×— ×”××¤×œ×™×§×¦×™×”?',\n      answer: '×× ×—× ×• ×ª××™×“ ×©××—×™× ×œ×¢×–×¨×”! ××¤×©×¨ ×œ×¢×–×•×¨ ×‘×§×•×“ (×”×›×œ ×¤×ª×•×— ×‘×’×™×˜×”××‘), ×‘×¢×™×¦×•×‘, ×‘×ª×•×›×Ÿ, ×‘×‘×“×™×§×•×ª, ××• ×¤×©×•×˜ ×œ×”×™×•×ª ×—×œ×§ ××”×§×”×™×œ×” ×•×œ×©×ª×£ ×¤×™×“×‘×§. ×¦×¨×• ××™×ª× ×• ×§×©×¨ ×“×¨×š ×•×•×˜×¡××¤ ××• ××™×™×œ ×•× ×©××— ×œ×¡×¤×¨ ×œ×›× ××™×š ××¤×©×¨ ×œ×¢×–×•×¨.',\n      icon: 'code-working-outline',\n    },\n    {\n      question: '××” ×§×•×¨×” ×× ×™×© ×‘×¢×™×” ×˜×›× ×™×ª?',\n      answer: '×× × ×ª×§×œ×ª× ×‘×‘×¢×™×” ×˜×›× ×™×ª, ×× ×—× ×• ×›××Ÿ ×œ×¢×–×•×¨! ×¦×¨×• ××™×ª× ×• ×§×©×¨ ×“×¨×š ×•×•×˜×¡××¤, ××™×™×œ, ××• ×“×¨×š ×§×‘×•×¦×ª ×”×•×•×˜×¡××¤ ×©×œ× ×•. × ×©×ª×“×œ ×œ×¢× ×•×ª ××”×¨ ×›×›×œ ×”××¤×©×¨ ×•×œ×¤×ª×•×¨ ××ª ×”×‘×¢×™×”. ×”×¤×™×“×‘×§ ×©×œ×›× ×—×©×•×‘ ×œ× ×• ×××•×“!',\n      icon: 'help-circle-outline',\n    },\n  ];\n\n  return (\n    <Section id=\"section-faq\" title=\"×©××œ×•×ª ×•×ª×©×•×‘×•×ª\" subtitle=\"×›×œ ××” ×©×¨×¦×™×ª× ×œ×“×¢×ª ×¢×œ Karma Community\">\n      <View style={styles.faqContainer}>\n        {faqData.map((item, index) => (\n          <FAQItem\n            key={index}\n            question={item.question}\n            answer={item.answer}\n            icon={item.icon}\n          />\n        ))}\n      </View>\n    </Section>\n  );\n};\n\nconst ContactSection = () => (\n  <Section id=\"section-contact\" title=\"×“×‘×¨×• ××™×ª× ×• ×•×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×” ×©×¢×•×©×” ×˜×•×‘\" subtitle=\"× ×©××— ×œ×©××•×¢ ××›×, ×œ×§×‘×œ ×¤×™×“×‘×§ ××• ××• ×‘×™×§×•×¨×ª ×•×›××•×‘×Ÿ ×œ×—×‘×¨ ××ª×›× ×œ×§×”×™×œ×”\" style={styles.sectionAltBackground}>\n    <View style={styles.contactRow}>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp direct'); Linking.openURL('https://wa.me/972528616878'); }}>\n        <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.info }]} onPress={() => { logger.info('LandingSite', 'Click - email'); Linking.openURL('mailto:navesarussi@gmail.com'); }}>\n        <Ionicons name=\"mail-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ××™×™×œ</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.secondary }]} onPress={() => { logger.info('LandingSite', 'Click - instagram'); Linking.openURL('https://www.instagram.com/karma_community_/'); }}>\n        <Ionicons name=\"logo-instagram\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×¢×§×‘×• ×‘××™× ×¡×˜×’×¨×</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp group'); Linking.openURL('https://chat.whatsapp.com/Hi2TpFcO5huKVKarvecz00'); }}>\n        <Ionicons name=\"chatbubbles-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×”×¦×˜×¨×¤×• ×œ×§×‘×•×¦×ª ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n    </View>\n  </Section>\n);\n\n{/* <Section title=\"×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×” ×©×¢×•×©×” ×˜×•×‘\" subtitle=\"×›×œ ××—×“ ×™×›×•×œ ×œ×”×©×¤×™×¢. ×‘×•××• × ×‘× ×” ××ª ×–×” ×™×—×“.\" style={styles.sectionAltBackground}> */ }\n\nconst LandingSiteScreen: React.FC = () => {\n  logger.debug('LandingSite', 'Component rendered', undefined, { periodic: true });\n\n  const { setMode } = useWebMode();\n  const navigation = useNavigation<any>();\n  const { isAuthenticated, isGuestMode, isAdmin } = useUser();\n\n  const [stats, setStats] = useState<LandingStats>({\n    siteVisits: 0,\n    totalMoneyDonated: 0,\n    totalUsers: 0,\n    itemDonations: 0,\n    completedRides: 0,\n    recurringDonationsAmount: 0,\n    uniqueDonors: 0,\n    completedTasks: 0,\n  });\n  const [isLoadingStats, setIsLoadingStats] = useState(true);\n  const [activeSection, setActiveSection] = useState<string | null>(null);\n  const statsVersionRef = useRef<string>(''); // Use ref instead of state to prevent unnecessary re-renders\n  const [showDonationModal, setShowDonationModal] = useState(false);\n  const scrollViewRef = useRef<ScrollView | null>(null);\n  const scrollSpyObserverRef = useRef<IntersectionObserver | null>(null);\n  const observedElementsRef = useRef<Set<HTMLElement>>(new Set());\n\n  // Ensure top bar and bottom bar are visible when this screen is focused\n  // This fixes the issue where bars disappear when navigating from TopBar's AboutButton\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ  LandingSiteScreen - Screen focused, ensuring bars are visible');\n      navigation.setParams({\n        hideTopBar: false,\n        hideBottomBar: false,\n      });\n    }, [navigation])\n  );\n\n  // Handle navigation to app mode\n  const handleGoToApp = async () => {\n    logger.info('LandingSiteScreen', 'Navigate to app mode', { isAuthenticated, isGuestMode });\n    setMode('app');\n\n    // Determine target route based on authentication status\n    const targetRoute = (isAuthenticated || isGuestMode) ? 'HomeStack' : 'LoginScreen';\n\n    // Check guards before navigation\n    const guardContext = {\n      isAuthenticated,\n      isGuestMode,\n      isAdmin,\n      mode: 'app' as const,\n    };\n\n    const guardResult = await checkNavigationGuards(\n      {\n        type: 'reset',\n        index: 0,\n        routes: [{ name: targetRoute }],\n      },\n      guardContext\n    );\n\n    if (!guardResult.allowed) {\n      // If guard blocks, try redirect if provided\n      if (guardResult.redirectTo) {\n        await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n      }\n      return;\n    }\n\n    // Use navigation queue with high priority (2) for mode changes\n    await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n  };\n\n  // Handle navigation from floating menu\n  const handleNavigate = (sectionId: string) => {\n    logger.info('LandingSiteScreen', `Navigate to section: ${sectionId}`, {\n      isWeb,\n      hasScrollRef: !!scrollViewRef.current,\n      platform: Platform.OS,\n    });\n\n    // For web, use DOM scrolling with container targeting to prevent window scroll\n    if (isWeb) {\n      const scrollToSection = (retryCount = 0) => {\n        try {\n          if (sectionId === 'top') {\n            // Find the specific scroll container specifically to avoid window scrolling\n            const scrollContainer = document.querySelector('[data-scroll-container=\"true\"]');\n            if (scrollContainer) {\n              scrollContainer.scrollTo({ top: 0, behavior: 'smooth' });\n              setActiveSection(sectionId);\n              logger.info('LandingSiteScreen', 'Scrolled to top via container');\n            } else {\n              // Fallback if container not found\n              window.scrollTo({ top: 0, behavior: 'smooth' });\n            }\n            return;\n          }\n\n          const element = getSectionElement(sectionId);\n          logger.info('LandingSiteScreen', `Found element for ${sectionId}:`, {\n            found: !!element,\n            elementId: element?.id || element?.getAttribute?.('data-nativeid') || null,\n            retryCount,\n          });\n\n          if (element) {\n            // Find the nearest scrollable parent explicitly\n            let parent = element.parentElement;\n            let scrollContainer: HTMLElement | null = null;\n\n            while (parent) {\n              const style = window.getComputedStyle(parent);\n              // Check for our specific scroll container or general overflow\n              if (\n                parent.getAttribute('data-scroll-container') === 'true' ||\n                style.overflowY === 'auto' ||\n                style.overflowY === 'scroll'\n              ) {\n                scrollContainer = parent;\n                break;\n              }\n              parent = parent.parentElement;\n            }\n\n            if (scrollContainer) {\n              // Calculate position relative to the container\n              // We need to account for the element's position inside the container\n              const containerRect = scrollContainer.getBoundingClientRect();\n              const elementRect = element.getBoundingClientRect();\n\n              // Current scroll position + difference in tops\n              const scrollTop = scrollContainer.scrollTop + (elementRect.top - containerRect.top);\n\n              // Add a small offset for breathing room (e.g., 20px)\n              const offset = 20;\n\n              scrollContainer.scrollTo({\n                top: scrollTop - offset,\n                behavior: 'smooth',\n              });\n\n              setActiveSection(sectionId);\n              logger.info('LandingSiteScreen', `Scrolled to section via container: ${sectionId}`);\n            } else {\n              // Fallback to scrollIntoView only if no container found (unlikely in our app structure)\n              // Use block: 'center' to avoid aggressive top alignment that might pull the window\n              element.scrollIntoView({\n                behavior: 'smooth',\n                block: 'start',\n              });\n              setActiveSection(sectionId);\n              logger.warn('LandingSiteScreen', 'Scroll container not found, using scrollIntoView fallback');\n            }\n          } else if (retryCount < 10) {\n            // Retry if element not found yet (DOM might still be rendering)\n            setTimeout(() => scrollToSection(retryCount + 1), 100);\n            logger.info('LandingSiteScreen', `Retrying to find section: ${sectionId}, attempt ${retryCount + 1}`);\n          } else {\n            logger.warn('LandingSiteScreen', `Section not found after ${retryCount} retries: ${sectionId}`);\n          }\n        } catch (error) {\n          logger.error('LandingSiteScreen', 'Error scrolling to section', { error, sectionId });\n        }\n      };\n\n      scrollToSection();\n    } else {\n      // For native, use ScrollView ref\n      if (sectionId === 'top' && scrollViewRef.current) {\n        scrollViewRef.current.scrollTo?.({ y: 0, animated: true });\n        logger.info('LandingSiteScreen', 'Scrolled to top via ScrollView ref');\n      } else {\n        // Should implemented map of refs for sections if needed for native\n        // But currently this feature is mostly for web landing page\n        logger.warn('LandingSiteScreen', 'Native scrolling not implemented for specific sections');\n      }\n    }\n  };\n\n  // Shared loadStats function - used by both initial load and auto-refresh\n  // ×¤×•× ×§×¦×™×” ××©×•×ª×¤×ª ×œ×˜×¢×™× ×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª - ××©××©×ª ×’× ×œ×˜×¢×™× ×” ×¨××©×•× ×™×ª ×•×’× ×œ×¨×¢× ×•×Ÿ ××•×˜×•××˜×™\n  const loadStats = useCallback(async (forceRefresh = false) => {\n    try {\n      setIsLoadingStats(true);\n      logger.info('LandingSite', 'Loading stats', { forceRefresh });\n      const communityStats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n\n      // Extract values - handle both direct values and nested value objects\n      // ×ª××™×›×” ×‘×©× ×™ ×¤×•×¨××˜×™×: ××¡×¤×¨ ×™×©×™×¨ ××• ××•×‘×™×™×§×˜ ×¢× ×©×“×” value\n      // Support for two formats: direct number or object with value field\n      const getValue = (stat: any): number => {\n        if (typeof stat === 'number') return stat;\n        if (stat && typeof stat === 'object' && 'value' in stat) return stat.value || 0;\n        return 0;\n      };\n\n      const statsData = {\n        siteVisits: getValue(communityStats.siteVisits) || 0,\n        totalMoneyDonated: getValue(communityStats.totalMoneyDonated) || 0,\n        totalUsers: getValue(communityStats.totalUsers) || 0,\n        itemDonations: getValue(communityStats.itemDonations) || 0,\n        completedRides: getValue(communityStats.completedRides) || 0,\n        recurringDonationsAmount: getValue(communityStats.recurringDonationsAmount) || 0,\n        uniqueDonors: getValue(communityStats.uniqueDonors) || 0,\n        completedTasks: getValue(communityStats.completed_tasks) || 0,\n      };\n\n      logger.info('LandingSite', 'Stats loaded', statsData, { periodic: true });\n      setStats(statsData);\n    } catch (error) {\n      logger.error('LandingSite', 'Failed to load stats', { error });\n      // Keep default values (0) on error\n    } finally {\n      setIsLoadingStats(false);\n    }\n  }, []);\n\n  // Smart polling - only refresh when stats actually change\n  // ×‘×“×™×§×” ×—×›××” - ×¨×§ ××¨×¢× ×Ÿ ×›×©×™×© ×©×™× ×•×™ ×××™×ª×™ ×‘×¡×˜×˜×™×¡×˜×™×§×•×ª\n  useEffect(() => {\n    if (!USE_BACKEND) {\n      logger.info('LandingSite', 'Backend not available, skipping smart polling');\n      return;\n    }\n\n    logger.info('LandingSite', 'Setting up smart polling (checks every 30 seconds)');\n\n    const checkForUpdates = async () => {\n      try {\n        // Lightweight check - only gets version hash\n        const response = await apiService.getCommunityStatsVersion();\n        if (response.success && response.version) {\n          const newVersion = response.version;\n          const currentVersion = statsVersionRef.current;\n\n          // Only reload if version actually changed\n          if (currentVersion && newVersion !== currentVersion) {\n            logger.info('LandingSite', 'Stats version changed, reloading...', {\n              oldVersion: currentVersion,\n              newVersion: newVersion\n            });\n            await loadStats(true); // Force refresh to get latest data\n            // Update version ref only after successful reload\n            statsVersionRef.current = newVersion;\n          } else if (!currentVersion) {\n            // First time - set initial version without reloading (stats already loaded on mount)\n            statsVersionRef.current = newVersion;\n            logger.info('LandingSite', 'Initial stats version set', { version: newVersion });\n          }\n          // If version didn't change, do nothing - no re-render needed\n        }\n      } catch (error) {\n        logger.error('LandingSite', 'Failed to check stats version', { error });\n      }\n    };\n\n    // Check immediately on mount (but don't reload if stats already loaded)\n    checkForUpdates();\n\n    // Set up interval to check for updates every 30 seconds (reduced from 5 seconds to prevent excessive checks)\n    // Only reloads if version actually changed in database\n    const pollInterval = setInterval(checkForUpdates, 30000);\n\n    // Cleanup interval on unmount\n    return () => {\n      logger.info('LandingSite', 'Clearing smart polling interval');\n      clearInterval(pollInterval);\n    };\n  }, [loadStats]); // Removed statsVersion from dependencies to prevent re-renders\n\n  useEffect(() => {\n    logger.info('LandingSite', 'useEffect triggered - Landing page mounted', { isWeb, USE_BACKEND });\n\n    // Use sessionStorage to prevent double tracking across all instances\n    // ×©×™××•×© ×‘-sessionStorage ×œ×× ×™×¢×ª ×¡×¤×™×¨×” ×›×¤×•×œ×” ×‘×›×œ ×”-instances\n    const VISIT_TRACKED_KEY = 'kc_site_visit_tracked';\n\n    // Track site visit - only on web and if backend is available\n    // ×¡×¤×™×¨×ª ×‘×™×§×•×¨ ×‘××ª×¨ - ×¨×§ ×‘-web ×•×× ×”×©×¨×ª ×–××™×Ÿ\n    // ×©×™× ×•×™: ×©×™××•×© ×‘-sessionStorage ×œ×× ×™×¢×ª ×›×¤×™×œ×•×ª ×‘×›×œ ×”-instances\n    // Change: Use sessionStorage to prevent double tracking across all instances\n    const trackVisitAndLoadStats = async () => {\n      // Check if visit already tracked in this session (shared across all component instances)\n      // ×‘×“×™×§×” ×× ×”×‘×™×§×•×¨ ×›×‘×¨ × ×¡×¤×¨ ×‘-session ×–×” (××©×•×ª×£ ×œ×›×œ ×”-instances ×©×œ ×”×§×•××¤×•× × ×˜×”)\n      const visitTracked = isWeb && typeof window !== 'undefined'\n        ? sessionStorage.getItem(VISIT_TRACKED_KEY) === 'true'\n        : false;\n\n      if (visitTracked) {\n        logger.info('LandingSite', 'Visit already tracked in this session, skipping');\n        await loadStats(false);\n        return;\n      }\n\n      if (isWeb && USE_BACKEND) {\n        try {\n          // Mark as tracked immediately in sessionStorage to prevent double calls\n          // ×¡×™××•×Ÿ ×›× ×¡×¤×¨ ××™×“ ×‘-sessionStorage ×›×“×™ ×œ×× ×•×¢ ×§×¨×™××•×ª ×›×¤×•×œ×•×ª\n          if (typeof window !== 'undefined') {\n            sessionStorage.setItem(VISIT_TRACKED_KEY, 'true');\n          }\n\n          logger.info('LandingSite', 'Tracking site visit...');\n          const response = await apiService.trackSiteVisit();\n          if (response.success) {\n            logger.info('LandingSite', 'Site visit tracked successfully');\n            // Reload stats with forceRefresh to get updated site_visits count\n            // ×˜×¢×™× ×” ××—×“×© ×©×œ ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¢× forceRefresh ×›×“×™ ×œ×§×‘×œ ××ª ××¡×¤×¨ ×”×‘×™×§×•×¨×™× ×”××¢×•×“×›×Ÿ\n            await loadStats(true);\n          } else {\n            logger.warn('LandingSite', 'Site visit tracking failed', { error: response.error });\n            // Reset flag on failure so we can retry\n            // ××™×¤×•×¡ ×”×“×’×œ ×‘×›×©×œ ×›×“×™ ×©× ×•×›×œ ×œ× ×¡×•×ª ×©×•×‘\n            if (typeof window !== 'undefined') {\n              sessionStorage.removeItem(VISIT_TRACKED_KEY);\n            }\n            // Still load stats even if tracking failed\n            await loadStats(false);\n          }\n        } catch (error) {\n          logger.error('LandingSite', 'Failed to track site visit', { error });\n          // Reset flag on error so we can retry\n          // ××™×¤×•×¡ ×”×“×’×œ ×‘×©×’×™××” ×›×“×™ ×©× ×•×›×œ ×œ× ×¡×•×ª ×©×•×‘\n          if (typeof window !== 'undefined') {\n            sessionStorage.removeItem(VISIT_TRACKED_KEY);\n          }\n          // Still load stats even if tracking failed\n          await loadStats(false);\n        }\n      } else {\n        // If not web or backend not available, just load stats\n        logger.info('LandingSite', 'Skipping site visit tracking', { isWeb, USE_BACKEND });\n        await loadStats(false);\n      }\n    };\n\n    trackVisitAndLoadStats();\n\n    return () => {\n      logger.info('LandingSite', 'Landing page unmounted');\n    };\n  }, []);\n\n\n  // Scroll Spy - Track which section is currently in view\n  useEffect(() => {\n    if (!isWeb) return; // Works on all web screens including mobile\n\n    const sectionIds = ['stats', 'vision', 'problems', 'features', 'about', 'how', 'who', 'values', 'core-mottos', 'hierarchy', 'roadmap', 'contact', 'faq'];\n\n    // Create Intersection Observer\n    const observerOptions = {\n      root: null, // viewport\n      rootMargin: '-20% 0px -70% 0px', // Trigger when section is in middle third of viewport\n      threshold: 0,\n    };\n\n    const observerCallback = (entries: IntersectionObserverEntry[]) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const targetElement = entry.target as HTMLElement;\n          const identifier = targetElement.id || targetElement.getAttribute('data-nativeid') || '';\n          const sectionId = identifier.replace('section-', '');\n          if (!sectionId) {\n            return;\n          }\n          logger.info('ScrollSpy', `Section ${sectionId} is now in view`);\n          setActiveSection(sectionId);\n        }\n      });\n    };\n\n    const observer = new IntersectionObserver(observerCallback, observerOptions);\n    const observedElements = observedElementsRef.current;\n    observedElements.clear();\n    scrollSpyObserverRef.current = observer;\n\n    const observeSection = (id: string, retryCount = 0) => {\n      const element = getSectionElement(id);\n      if (element) {\n        if (!observedElements.has(element)) {\n          observer.observe(element);\n          observedElements.add(element);\n          logger.info('ScrollSpy', `Observing section: ${id}`);\n        }\n        return true;\n      }\n\n      // Retry if element not found yet (DOM might still be rendering)\n      // × ×™×¡×™×•×Ÿ ×—×•×–×¨ ×× ×”××œ×× ×˜ ×¢×“×™×™×Ÿ ×œ× × ××¦× (DOM ×¢×“×™×™×Ÿ ×™×›×•×œ ×œ×”×™×•×ª ×‘×ª×”×œ×™×š ×¨×™× ×“×•×¨)\n      if (retryCount < 20) {\n        setTimeout(() => observeSection(id, retryCount + 1), 100);\n        if (retryCount === 0) {\n          logger.info('ScrollSpy', `Section not found yet: ${id}, will retry`);\n        }\n      } else {\n        logger.warn('ScrollSpy', `Section not found after ${retryCount} retries: ${id}`);\n      }\n      return false;\n    };\n\n    // Observe all sections initially\n    sectionIds.forEach((id) => {\n      observeSection(id);\n    });\n\n    let mutationObserver: MutationObserver | null = null;\n    if (typeof MutationObserver !== 'undefined') {\n      mutationObserver = new MutationObserver(() => {\n        sectionIds.forEach(id => observeSection(id));\n      });\n      mutationObserver.observe(document.body, { childList: true, subtree: true });\n    }\n\n    // Cleanup\n    return () => {\n      logger.info('ScrollSpy', 'Cleaning up observers');\n      observer.disconnect();\n      observedElements.clear();\n      scrollSpyObserverRef.current = null;\n      mutationObserver?.disconnect();\n    };\n  }, [isWeb]);\n\n  return (\n    <ScreenWrapper style={styles.container}>\n      {/* Floating Navigation Menu */}\n      {/* Floating Navigation Menu - Shown only for authenticated users (who don't see the top bar) */}\n      {isAuthenticated && !isGuestMode && <FloatingMenu onNavigate={handleNavigate} activeSection={activeSection} />}\n\n      {/* Donation Modal */}\n      <DonationModal\n        visible={showDonationModal}\n        onClose={() => setShowDonationModal(false)}\n      />\n\n      <ScrollContainer\n        scrollRef={scrollViewRef}\n        style={styles.scrollContainer}\n        contentStyle={styles.content}\n        onContentSizeChange={(w, h) => logger.info('LandingSite', 'Content size changed', { width: w, height: h })}\n      >\n        <HeroSection onDonate={() => setShowDonationModal(true)} />\n        <StatsSection stats={stats} isLoadingStats={isLoadingStats} onGoToApp={handleGoToApp} />\n        <LazySection section={VisionSection} onGoToApp={handleGoToApp} />\n        <LazySection section={ProblemsSection} />\n        <LazySection section={FeaturesSection} />\n        <LazySection section={AboutSection} />\n        <LazySection section={GallerySection} />\n        <LazySection section={PartnersSection} />\n        <LazySection section={HowItWorksSection} />\n        <LazySection section={WhoIsItForSection} onDonate={() => setShowDonationModal(true)} />\n        <LazySection section={ValuesSection} />\n        <LazySection section={CoreMottosSection} />\n        <LazySection section={AdminHierarchySection} />\n        <LazySection section={RoadmapSection} />\n        <LazySection section={ContactSection} />\n        <LazySection section={FAQSection} />\n\n        <View style={styles.footer}>\n          <Text style={styles.footerText}>Â© {new Date().getFullYear()} Karma Community â€” × ×‘× ×” ×‘××”×‘×” ×•×‘×ª××™×›×ª ×”×§×”×™×œ×”.</Text>\n        </View>\n      </ScrollContainer>\n    </ScreenWrapper>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  content: {\n    paddingBottom: isMobileWeb ? 80 : 120,\n    backgroundColor: colors.white,\n  },\n  hero: {\n    width: '100%',\n    overflow: 'hidden',\n  },\n  heroGradient: {\n    backgroundColor: colors.backgroundTertiary,\n    paddingTop: isMobileWeb ? 40 : (isWeb ? 60 : 80),\n    paddingBottom: isMobileWeb ? 30 : (isWeb ? 50 : 70),\n    paddingHorizontal: isMobileWeb ? 16 : (isWeb ? 20 : 40),\n    position: 'relative',\n  },\n  heroContent: {\n    alignItems: 'center',\n    zIndex: 2,\n  },\n  welcomeTitle: {\n    fontSize: isMobileWeb ? 28 : (isWeb ? (isTablet ? 56 : 42) : 64),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 16 : (isWeb ? 24 : 32),\n    letterSpacing: -1,\n    lineHeight: isMobileWeb ? 34 : (isWeb ? (isTablet ? 64 : 50) : 72),\n  },\n  welcomeTitleLarge: {\n    fontSize: isMobileWeb ? 32 : (isWeb ? (isTablet ? 64 : 48) : 72),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  welcomeTitleSmall: {\n    fontSize: isMobileWeb ? 24 : (isWeb ? (isTablet ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  logoContainer: {\n    position: 'relative',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 20 : 28),\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: isMobileWeb ? 140 : (isWeb ? (isTablet ? 240 : 220) : 260),\n    overflow: 'hidden',\n  },\n  logoBackground: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  logo: {\n    width: isMobileWeb ? 180 : (isWeb ? (isTablet ? 320 : 280) : 360),\n    height: isMobileWeb ? 180 : (isWeb ? (isTablet ? 320 : 280) : 360),\n    opacity: 0.35,\n  },\n  title: {\n    fontSize: isMobileWeb ? 24 : (isWeb ? (isTablet ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 16 : 20),\n    letterSpacing: -0.5,\n  },\n  subtitlesRow: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : (isWeb ? (isTablet ? 28 : 20) : 32),\n    marginBottom: isMobileWeb ? 8 : (isWeb ? 12 : 16),\n    flexWrap: 'wrap',\n  },\n  subtitleItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: isMobileWeb ? 6 : (isWeb ? (isTablet ? 12 : 10) : 14),\n    paddingHorizontal: isMobileWeb ? 8 : (isWeb ? (isTablet ? 16 : 12) : 20),\n    paddingVertical: isMobileWeb ? 6 : (isWeb ? (isTablet ? 10 : 8) : 12),\n    borderRadius: isMobileWeb ? 12 : (isWeb ? (isTablet ? 20 : 16) : 24),\n    backgroundColor: colors.backgroundTertiary,\n    borderWidth: 1,\n    borderColor: colors.info + '30',\n  },\n  subtitleItemGreen: {\n    backgroundColor: colors.greenBright + '18',\n    borderColor: colors.greenBright + '50',\n  },\n  subtitleIcon: {\n    marginTop: isMobileWeb ? 1 : 2,\n  },\n  subtitleText: {\n    fontSize: isMobileWeb ? 12 : (isWeb ? (isTablet ? 24 : 18) : 28),\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    letterSpacing: -0.3,\n  },\n  subtitle: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? (isTablet ? 20 : 18) : 24),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 6 : (isWeb ? 8 : 12),\n    maxWidth: isMobileWeb ? '95%' : (isTablet ? '70%' : '90%'),\n    lineHeight: isMobileWeb ? 20 : (isWeb ? 28 : 32),\n    fontWeight: '500',\n  },\n  heroMottosContainer: {\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n    alignItems: 'center',\n    gap: isMobileWeb ? 8 : 12,\n  },\n  mottoItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    maxWidth: isMobileWeb ? '95%' : '85%',\n  },\n  mottoItemIcon: {\n    marginTop: isMobileWeb ? 2 : 4,\n  },\n  mottoSubtitle: {\n    fontSize: isMobileWeb ? 16 : (isWeb ? (isTablet ? 22 : 20) : 26),\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontWeight: '700',\n    lineHeight: isMobileWeb ? 24 : (isWeb ? 32 : 36),\n    fontStyle: 'italic',\n    textShadowColor: 'rgba(0, 0, 0, 0.1)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 2,\n    flex: 1,\n  },\n  ctaRow: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 10 : 16,\n    marginTop: isMobileWeb ? 24 : 40,\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n  },\n  ctaIcon: {\n    marginRight: isMobileWeb ? 6 : 8,\n  },\n  primaryCta: {\n    backgroundColor: colors.info,\n    paddingHorizontal: isMobileWeb ? 20 : 32,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 8 },\n    shadowRadius: 12,\n    elevation: 8,\n  },\n  primaryCtaText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    textAlign: 'center',\n    letterSpacing: 0.3,\n  },\n  secondaryCta: {\n    backgroundColor: colors.white,\n    borderWidth: 2,\n    borderColor: colors.info,\n    paddingHorizontal: isMobileWeb ? 20 : 32,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  secondaryCtaText: {\n    color: colors.info,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    textAlign: 'center',\n    letterSpacing: 0.3,\n  },\n  section: {\n    paddingHorizontal: isMobileWeb ? 16 : (isWeb ? (isTablet ? 40 : 24) : 40),\n    paddingVertical: isMobileWeb ? 24 : (isWeb ? (isTablet ? 60 : 40) : 50),\n    width: '100%',\n    alignSelf: 'center',\n    maxWidth: isTablet ? 1200 : '100%',\n  },\n  sectionTitle: {\n    fontSize: isMobileWeb ? 20 : (isWeb ? (isTablet ? 36 : 28) : 42),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 6 : 8,\n    letterSpacing: -0.5,\n  },\n  sectionSubtitle: {\n    fontSize: isMobileWeb ? 13 : (isWeb ? (isTablet ? 18 : 16) : 22),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 20 : 24),\n    lineHeight: isMobileWeb ? 18 : (isWeb ? 26 : 30),\n    fontWeight: '500',\n  },\n  sectionSubTitle: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 24),\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 10 : (isWeb ? 15 : 20),\n    marginBottom: isMobileWeb ? 6 : (isWeb ? 8 : 12)\n  },\n  featuresGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    gap: isMobileWeb ? 12 : 24,\n    width: '100%',\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  feature: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 350,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 20,\n    padding: isMobileWeb ? 16 : 28,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  featureEmoji: {\n    fontSize: isMobileWeb ? 32 : 48,\n    marginBottom: isMobileWeb ? 10 : 16,\n  },\n  featureTitle: {\n    fontSize: isMobileWeb ? 16 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n    letterSpacing: -0.3,\n  },\n  featureText: {\n    fontSize: isMobileWeb ? 13 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 18 : 28,\n    fontWeight: '400',\n  },\n  paragraph: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 20 : (isWeb ? 28 : 30),\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 8 : 12,\n    maxWidth: isMobileWeb ? '95%' : (isTablet ? '80%' : '90%'),\n    alignSelf: 'center',\n    fontWeight: '400',\n  },\n  linksRow: { flexDirection: 'row', gap: isMobileWeb ? 12 : 24, marginTop: isMobileWeb ? 10 : 16, alignSelf: 'center', flexWrap: 'wrap', justifyContent: 'center' },\n  link: { color: colors.primary, fontWeight: '700', fontSize: isMobileWeb ? 14 : 20, padding: isMobileWeb ? 6 : 8 },\n  faqContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  faqCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    marginBottom: isMobileWeb ? 8 : 12,\n    overflow: 'hidden',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  faqQuestionRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 16 : 20,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  faqQuestionContent: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 10 : 14,\n  },\n  faqIcon: {\n    marginRight: isMobileWeb ? 4 : 6,\n  },\n  faqQ: {\n    flex: 1,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 15 : 18,\n    lineHeight: isMobileWeb ? 22 : 26,\n  },\n  faqAnswerContainer: {\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    paddingBottom: isMobileWeb ? 16 : 20,\n    overflow: 'hidden',\n  },\n  faqA: {\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 14 : 16,\n    lineHeight: isMobileWeb ? 20 : 24,\n    fontWeight: '400',\n  },\n  iconBullets: { marginTop: isMobileWeb ? 10 : 16, gap: isMobileWeb ? 10 : 16, width: '100%', maxWidth: isMobileWeb ? '95%' : '90%', alignSelf: 'center' },\n  iconBulletRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: isMobileWeb ? 10 : 16, justifyContent: 'center', paddingVertical: isMobileWeb ? 2 : 4 },\n  iconBulletText: { color: colors.textPrimary, fontSize: isMobileWeb ? 13 : 18, textAlign: 'center', flex: 1 },\n  stepsRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 12 : 24, justifyContent: 'space-around', marginTop: isMobileWeb ? 12 : 20, width: '100%' },\n  stepCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 350,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    padding: isMobileWeb ? 16 : 28,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  stepTitle: {\n    marginTop: isMobileWeb ? 10 : 16,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 16 : 24,\n    letterSpacing: -0.3,\n  },\n  stepText: {\n    marginTop: isMobileWeb ? 8 : 12,\n    textAlign: 'center',\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 13 : 18,\n    lineHeight: isMobileWeb ? 18 : 28,\n    fontWeight: '400',\n  },\n  splitRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 16 : 30, justifyContent: 'space-around', width: '100%' },\n  splitColumn: { flex: 1, minWidth: isMobileWeb ? 140 : 320, maxWidth: isMobileWeb ? '100%' : 500, padding: isMobileWeb ? 12 : 20 },\n  splitTitle: { textAlign: 'center', fontSize: isMobileWeb ? 18 : 24, fontWeight: '800', color: colors.textPrimary, marginBottom: isMobileWeb ? 8 : 12 },\n  valuesRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 6 : 10, justifyContent: 'center', marginTop: isMobileWeb ? 4 : 6 },\n  valuePill: {\n    paddingHorizontal: isMobileWeb ? 14 : 24,\n    paddingVertical: isMobileWeb ? 8 : 14,\n    borderRadius: 999,\n    backgroundColor: colors.white,\n    borderWidth: 2,\n    borderColor: colors.info,\n    margin: isMobileWeb ? 3 : 6,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  valuePillText: {\n    color: colors.info,\n    fontWeight: '700',\n    fontSize: isMobileWeb ? 12 : 18,\n  },\n  roadmapContainer: {\n    marginTop: isMobileWeb ? 24 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 1000 : '100%',\n    alignSelf: 'center',\n    writingDirection: 'rtl',\n  },\n  roadmapItemWrapper: {\n    width: '100%',\n    marginBottom: 0,\n  },\n  roadmapItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 20,\n    padding: isMobileWeb ? 16 : 24,\n    marginBottom: isMobileWeb ? 20 : 24,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    borderWidth: 1,\n    borderColor: colors.backgroundSecondary,\n    writingDirection: 'rtl',\n  },\n  roadmapIconContainer: {\n    width: isMobileWeb ? 48 : 64,\n    height: isMobileWeb ? 48 : 64,\n    borderRadius: isMobileWeb ? 24 : 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: isMobileWeb ? 12 : 16,\n    flexShrink: 0,\n  },\n  roadmapContent: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end',\n  },\n  roadmapTimeBadge: {\n    paddingHorizontal: isMobileWeb ? 12 : 16,\n    paddingVertical: isMobileWeb ? 6 : 8,\n    borderRadius: isMobileWeb ? 8 : 12,\n    alignSelf: 'flex-end',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  roadmapTimeText: {\n    color: colors.white,\n    fontWeight: '900',\n    fontSize: isMobileWeb ? 14 : 16,\n    letterSpacing: 0.5,\n  },\n  roadmapLabel: {\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 16 : 20,\n    lineHeight: isMobileWeb ? 24 : 30,\n    fontWeight: '700',\n    textAlign: 'right',\n  },\n  roadmapConnector: {\n    position: 'absolute',\n    right: isMobileWeb ? 24 : 32,\n    top: isMobileWeb ? 64 : 88,\n    height: isMobileWeb ? 20 : 24,\n    width: 2,\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 0,\n  },\n  roadmapConnectorLine: {\n    width: 2,\n    height: '100%',\n    borderLeftWidth: 2,\n    borderStyle: 'dashed',\n  },\n  logoEvolutionContainer: {\n    marginTop: isMobileWeb ? 32 : 48,\n    width: '100%',\n    alignItems: 'center',\n  },\n  logoEvolutionTitle: {\n    fontSize: isMobileWeb ? 20 : 28,\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  logoEvolutionSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 20 : 28,\n    fontWeight: '500',\n  },\n  logoEvolutionGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 12 : 20,\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n  },\n  logoEvolutionItem: {\n    alignItems: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    flex: 1,\n    minWidth: isMobileWeb ? 100 : 140,\n    maxWidth: isMobileWeb ? 120 : 160,\n  },\n  logoEvolutionImage: {\n    width: isMobileWeb ? 80 : 120,\n    height: isMobileWeb ? 80 : 120,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 2,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n  },\n  logoEvolutionLabel: {\n    fontSize: isMobileWeb ? 12 : 14,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  brandStrip: { flexDirection: 'row', justifyContent: 'center', alignItems: 'center', gap: isMobileWeb ? 8 : 10, paddingVertical: isMobileWeb ? 12 : 16 },\n  brandIcon: { width: isMobileWeb ? 30 : 40, height: isMobileWeb ? 30 : 40, opacity: 0.9 },\n  contactRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 10 : 20, justifyContent: 'center', marginTop: isMobileWeb ? 16 : 24, width: '100%' },\n  contactButton: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 8 : 12,\n    alignItems: 'center',\n    paddingHorizontal: isMobileWeb ? 16 : 28,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    justifyContent: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    elevation: 6,\n  },\n  contactButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 13 : 18,\n    letterSpacing: 0.3,\n  },\n  footer: {\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    paddingVertical: isMobileWeb ? 20 : 32,\n    borderTopWidth: 1,\n    borderTopColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    marginTop: isMobileWeb ? 24 : 40,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  footerText: {\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 12 : 14,\n    fontWeight: '500',\n  },\n  // Statistics styles\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    gap: isMobileWeb ? 12 : 24,\n    marginTop: isMobileWeb ? 12 : 20,\n    width: '100%'\n  },\n  statCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 250,\n    maxWidth: isMobileWeb ? '48%' : 300,\n    paddingVertical: isMobileWeb ? 16 : 32,\n    paddingHorizontal: isMobileWeb ? 12 : 20,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  statIcon: {\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  statNumber: {\n    fontSize: isMobileWeb ? 22 : (isWeb ? 36 : 40),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 6 : 8,\n    letterSpacing: -1,\n    textAlign: 'center',\n  },\n  statLabel: {\n    fontSize: isMobileWeb ? 12 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 16 : 26,\n    fontWeight: '500',\n  },\n  statsLoadingContainer: {\n    paddingVertical: isMobileWeb ? 40 : 60,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  statsLoadingText: {\n    marginTop: isMobileWeb ? 12 : 16,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  useCases: { gap: isMobileWeb ? 10 : 16, marginTop: isMobileWeb ? 10 : 16, alignSelf: 'center', width: '100%', maxWidth: isMobileWeb ? '95%' : '90%' },\n  useCaseRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: isMobileWeb ? 10 : 16, alignSelf: 'center', paddingVertical: isMobileWeb ? 4 : 8 },\n  useCaseText: { color: colors.textPrimary, fontSize: isMobileWeb ? 13 : 18, textAlign: 'center', flex: 1 },\n  testimonials: { flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'space-around', gap: isMobileWeb ? 12 : 24, marginTop: isMobileWeb ? 12 : 20, width: '100%' },\n  testimonialCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 320,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    padding: isMobileWeb ? 16 : 28,\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  testimonialText: {\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 13 : 18,\n    lineHeight: isMobileWeb ? 18 : 30,\n    textAlign: 'center',\n    fontStyle: 'italic',\n    fontWeight: '400',\n  },\n  testimonialUser: {\n    color: colors.textSecondary,\n    marginTop: isMobileWeb ? 10 : 16,\n    textAlign: 'center',\n    fontWeight: '700',\n    fontSize: isMobileWeb ? 12 : 16,\n  },\n  galleryGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 16,\n    marginTop: isMobileWeb ? 12 : 20\n  },\n  galleryImage: {\n    width: isMobileWeb ? 140 : 280,\n    height: isMobileWeb ? 140 : 280,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundSecondary\n  },\n  partnersContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n    alignSelf: 'center',\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  partnersRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 20 : 40,\n    marginTop: isMobileWeb ? 12 : 20,\n    flexWrap: 'wrap'\n  },\n  partnerCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 24 : 32,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    alignSelf: 'center',\n  },\n  partnerLogo: {\n    height: isMobileWeb ? 50 : 70,\n    width: isMobileWeb ? 120 : 180,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  partnerName: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  partnerDescription: {\n    fontSize: isMobileWeb ? 14 : 16,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 20 : 24,\n  },\n  instagramContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    marginTop: isMobileWeb ? 12 : 20,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  instagramEmbedContainer: {\n    width: '100%',\n    height: isMobileWeb ? 500 : 600,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n  },\n  instagramWebViewContainer: {\n    width: '100%',\n    height: isMobileWeb ? 500 : 600,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n  },\n  instagramWebView: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n  instagramLoadingContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    gap: isMobileWeb ? 12 : 16,\n  },\n  instagramLoadingText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  instagramFallback: {\n    padding: isMobileWeb ? 40 : 60,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n  },\n  instagramFallbackText: {\n    fontSize: isMobileWeb ? 16 : 20,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  trustList: { gap: isMobileWeb ? 6 : 10, marginTop: isMobileWeb ? 6 : 8, alignItems: 'center' },\n  trustRow: { flexDirection: 'row-reverse', gap: isMobileWeb ? 6 : 8, alignItems: 'center' },\n  trustText: { color: colors.textPrimary, fontSize: isMobileWeb ? 11 : 14 },\n  categoryGrid: { flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'center', gap: isMobileWeb ? 8 : 12, marginTop: isMobileWeb ? 6 : 8 },\n  categoryCard: {\n    width: isMobileWeb ? 100 : 150,\n    height: isMobileWeb ? 60 : 90,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  categoryText: {\n    fontWeight: '700',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 12 : 16,\n  },\n  // Floating Menu Styles\n  menuOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    zIndex: 999, // ××ª×—×ª ×œ×ª×¤×¨×™×˜ ××‘×œ ××¢×œ ×”×ª×•×›×Ÿ\n  },\n  floatingMenu: {\n    position: 'absolute',\n    right: isMobileWeb ? 8 : 20,\n    top: isMobileWeb ? 60 : 100,\n    minWidth: 150,\n    width: isMobileWeb ? '14%' : '10%',\n    maxHeight: isMobileWeb ? '70vh' as any : (isWeb ? '80vh' as any : 600),\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 20,\n    elevation: 10,\n    zIndex: 1000,\n    overflow: 'hidden',\n  },\n  floatingMenuMinimized: {\n    position: 'absolute',\n    right: isMobileWeb ? 8 : 20,\n    top: isMobileWeb ? 60 : 100,\n    width: isMobileWeb ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03, // 5% for mobile, 3% for desktop\n    height: isMobileWeb ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03,\n    // backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? SCREEN_WIDTH * 0.025 : SCREEN_WIDTH * 0.015,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    elevation: 8,\n    zIndex: 1000,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuToggleButton: {\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: SCREEN_WIDTH * 0.01, // 1% of screen width\n    paddingVertical: SCREEN_WIDTH * 0.008, // 0.8% of screen width\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  menuTitle: {\n    fontWeight: '800',\n    color: colors.textPrimary,\n    letterSpacing: -0.3,\n  },\n  menuMinimizeButton: {\n    padding: SCREEN_WIDTH * 0.002, // 0.2% of screen width\n  },\n  menuItems: {\n    flex: 1,\n    paddingVertical: SCREEN_WIDTH * 0.006, // 0.6% of screen width\n  },\n  menuItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: SCREEN_WIDTH * 0.006, // 0.6% of screen width\n    borderRightWidth: 3,\n    borderRightColor: 'transparent',\n  },\n  menuItemActive: {\n    backgroundColor: colors.backgroundTertiary,\n    borderRightColor: colors.info,\n  },\n  menuItemIcon: {\n    marginLeft: SCREEN_WIDTH * 0.002, // 0.2% of screen width\n  },\n  menuItemText: {\n    fontWeight: '600',\n    color: colors.textSecondary,\n    flex: 1,\n    textAlign: 'right',\n  },\n  menuItemTextActive: {\n    color: colors.info,\n    fontWeight: '700',\n  },\n  // New Styles\n  decoCircle1: {\n    position: 'absolute',\n    width: isMobileWeb ? 200 : 400,\n    height: isMobileWeb ? 200 : 400,\n    borderRadius: isMobileWeb ? 100 : 200,\n    backgroundColor: 'rgba(65, 105, 225, 0.05)',\n    top: isMobileWeb ? -50 : -100,\n    left: isMobileWeb ? -75 : -150,\n  },\n  decoCircle2: {\n    position: 'absolute',\n    width: isMobileWeb ? 150 : 300,\n    height: isMobileWeb ? 150 : 300,\n    borderRadius: isMobileWeb ? 75 : 150,\n    backgroundColor: 'rgba(255, 192, 203, 0.08)',\n    bottom: isMobileWeb ? -25 : -50,\n    right: isMobileWeb ? -50 : -100,\n  },\n  decoCircle3: {\n    position: 'absolute',\n    width: isMobileWeb ? 120 : 240,\n    height: isMobileWeb ? 120 : 240,\n    borderRadius: isMobileWeb ? 60 : 120,\n    backgroundColor: colors.greenBright + '20',\n    top: isMobileWeb ? 40 : 80,\n    right: isMobileWeb ? -30 : -60,\n  },\n  titleDecorator: {\n    width: isMobileWeb ? 40 : 60,\n    height: isMobileWeb ? 3 : 4,\n    backgroundColor: colors.info,\n    borderRadius: 2,\n    alignSelf: 'center',\n    marginBottom: isMobileWeb ? 16 : 24,\n  },\n  sectionAltBackground: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  emphasis: {\n    fontWeight: '800',\n    color: colors.info,\n  },\n  visionHighlights: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 20 : 32,\n    width: '100%',\n  },\n  visionHighlight: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 200,\n    maxWidth: isMobileWeb ? '100%' : 250,\n    alignItems: 'center',\n    padding: isMobileWeb ? 16 : 24,\n    gap: isMobileWeb ? 8 : 12,\n  },\n  visionHighlightText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontWeight: '600',\n  },\n  problemsContent: {\n    gap: isMobileWeb ? 20 : 32,\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n  },\n  problemCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  problemIcon: {\n    marginBottom: isMobileWeb ? 12 : 16,\n    alignSelf: 'center',\n  },\n  problemTitle: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : 16,\n    letterSpacing: -0.3,\n  },\n  problemText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 20 : 28,\n    textAlign: 'right',\n    fontWeight: '400',\n  },\n  whoContent: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n  },\n  whoMainCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 24 : 40,\n    borderWidth: 2,\n    borderColor: colors.info,\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 8,\n    alignItems: 'center',\n    marginBottom: isMobileWeb ? 20 : 32,\n  },\n  whoMainIcon: {\n    marginBottom: isMobileWeb ? 16 : 24,\n  },\n  whoFutureCard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: isMobileWeb ? 12 : 20,\n    padding: isMobileWeb ? 20 : 28,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    borderStyle: 'dashed',\n    alignItems: 'center',\n  },\n  whoFutureIcon: {\n    marginBottom: isMobileWeb ? 12 : 16,\n    opacity: 0.6,\n  },\n  whoFutureTitle: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '700',\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  whoFutureText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 18 : 24,\n    textAlign: 'center',\n    fontWeight: '400',\n  },\n  githubLinkContainer: {\n    marginTop: isMobileWeb ? 24 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 600 : '100%',\n    alignSelf: 'center',\n  },\n  githubLinkButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 20,\n    padding: isMobileWeb ? 20 : 28,\n    borderWidth: 2,\n    borderColor: colors.info,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    gap: isMobileWeb ? 12 : 16,\n  },\n  githubLinkTextContainer: {\n    flex: 1,\n    gap: isMobileWeb ? 4 : 6,\n  },\n  githubLinkTitle: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  githubLinkDescription: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 18 : 24,\n    fontWeight: '400',\n  },\n  mottoContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 20 : 32,\n    marginBottom: isMobileWeb ? 20 : 32,\n    width: '100%',\n  },\n  mottoCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 2,\n    borderColor: colors.info,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  mottoIcon: {\n    marginBottom: isMobileWeb ? 4 : 8,\n  },\n  mottoText: {\n    fontSize: isMobileWeb ? 16 : 22,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontStyle: 'italic',\n    lineHeight: isMobileWeb ? 22 : 30,\n  },\n  coreMottosContainer: {\n    marginTop: isMobileWeb ? 20 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    gap: isMobileWeb ? 20 : 28,\n  },\n  hierarchyContainer: {\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n  },\n  coreMottoItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 2,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n  },\n  coreMottoIcon: {\n    marginLeft: isMobileWeb ? 8 : 12,\n    flexShrink: 0,\n  },\n  coreMottoText: {\n    fontSize: isMobileWeb ? 16 : (isWeb ? (isTablet ? 22 : 20) : 24),\n    color: colors.textPrimary,\n    textAlign: 'right',\n    fontWeight: '700',\n    lineHeight: isMobileWeb ? 24 : (isWeb ? 32 : 36),\n    fontStyle: 'italic',\n    flex: 1,\n  },\n  stepNumberBadge: {\n    position: 'absolute',\n    top: isMobileWeb ? -12 : -16,\n    right: isMobileWeb ? 16 : 24,\n    width: isMobileWeb ? 32 : 40,\n    height: isMobileWeb ? 32 : 40,\n    borderRadius: isMobileWeb ? 16 : 20,\n    backgroundColor: colors.info,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 3,\n    borderColor: colors.white,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 4,\n  },\n  stepNumber: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '900',\n    color: colors.white,\n  },\n  stepIcon: {\n    marginTop: isMobileWeb ? 12 : 16,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  statChevron: {\n    position: 'absolute',\n    bottom: isMobileWeb ? 12 : 16,\n    left: isMobileWeb ? 12 : 16,\n  },\n  // Modal Styles\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: isMobileWeb ? 16 : 24,\n  },\n  modalContainer: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    width: '100%',\n    maxWidth: isTablet ? 800 : (isMobileWeb ? '95%' : 600),\n    maxHeight: '85%',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 10 },\n    shadowOpacity: 0.3,\n    shadowRadius: 20,\n    elevation: 15,\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundTertiary,\n  },\n  modalTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    flex: 1,\n  },\n  modalTitleContainer: {\n    flex: 1,\n  },\n  modalTitle: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  modalSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '600',\n    color: colors.info,\n  },\n  modalCloseButton: {\n    padding: isMobileWeb ? 4 : 8,\n    marginRight: isMobileWeb ? -4 : -8,\n  },\n  modalContent: {\n    flex: 1,\n  },\n  modalLoadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: isMobileWeb ? 40 : 60,\n  },\n  modalLoadingText: {\n    marginTop: isMobileWeb ? 12 : 16,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  modalEmptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: isMobileWeb ? 40 : 60,\n  },\n  modalEmptyText: {\n    marginTop: isMobileWeb ? 16 : 24,\n    fontSize: isMobileWeb ? 16 : 20,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  detailList: {\n    padding: isMobileWeb ? 16 : 24,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    paddingVertical: isMobileWeb ? 12 : 16,\n    paddingHorizontal: isMobileWeb ? 12 : 16,\n    borderRadius: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.backgroundSecondary,\n    marginBottom: isMobileWeb ? 8 : 12,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n  },\n  detailItemNumber: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '700',\n    color: colors.info,\n    marginLeft: isMobileWeb ? 8 : 12,\n    minWidth: isMobileWeb ? 24 : 32,\n  },\n  detailItemContent: {\n    flex: 1,\n  },\n  detailItemText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n    lineHeight: isMobileWeb ? 20 : 24,\n  },\n  detailItemSubtext: {\n    fontSize: isMobileWeb ? 12 : 14,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 16 : 20,\n    marginTop: isMobileWeb ? 2 : 4,\n  },\n  howItWorksNote: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 10 : 14,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 16,\n    padding: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 24 : 32,\n    borderLeftWidth: 4,\n    borderLeftColor: colors.info,\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n    alignSelf: 'center',\n  },\n  howItWorksNoteText: {\n    flex: 1,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 20 : 26,\n    fontWeight: '500',\n  },\n  // Donation Modal Styles\n  donationModalContainer: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 20 : 28,\n    width: '100%',\n    maxWidth: isTablet ? 500 : (isMobileWeb ? '90%' : 450),\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 10 },\n    shadowOpacity: 0.3,\n    shadowRadius: 20,\n    elevation: 15,\n    overflow: 'hidden',\n  },\n  donationModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 20 : 28,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundTertiary,\n  },\n  donationModalTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    flex: 1,\n  },\n  donationModalTitleContainer: {\n    flex: 1,\n  },\n  donationModalTitle: {\n    fontSize: isMobileWeb ? 20 : 28,\n    fontWeight: '900',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  donationModalSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '500',\n    color: colors.textSecondary,\n  },\n  donationModalContent: {\n    padding: isMobileWeb ? 20 : 28,\n  },\n  donationMessageContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    gap: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 16,\n    padding: isMobileWeb ? 16 : 20,\n    marginBottom: isMobileWeb ? 20 : 24,\n    borderLeftWidth: 4,\n    borderLeftColor: colors.info,\n  },\n  donationMessageText: {\n    flex: 1,\n    fontSize: isMobileWeb ? 15 : 18,\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 22 : 26,\n    fontWeight: '600',\n  },\n  donationButtonsContainer: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 10 : 16,\n    marginBottom: isMobileWeb ? 16 : 20,\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  },\n  donationButton: {\n    flex: 1,\n    minWidth: isMobileWeb ? 100 : 120,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    paddingVertical: isMobileWeb ? 14 : 18,\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    borderRadius: isMobileWeb ? 12 : 16,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  donationButtonWhatsApp: {\n    backgroundColor: colors.success,\n  },\n  donationButtonBit: {\n    backgroundColor: colors.info,\n  },\n  donationButtonPayBox: {\n    backgroundColor: colors.primary,\n  },\n  donationButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : 18,\n    letterSpacing: 0.3,\n  },\n  donationNoteText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 18 : 24,\n    fontWeight: '400',\n    fontStyle: 'italic',\n  },\n  donationCtaButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    backgroundColor: colors.secondary,\n    paddingVertical: isMobileWeb ? 14 : 18,\n    paddingHorizontal: isMobileWeb ? 24 : 32,\n    borderRadius: isMobileWeb ? 12 : 16,\n    marginTop: isMobileWeb ? 20 : 28,\n    shadowColor: colors.secondary,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 6,\n  },\n  donationCtaButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 16 : 20,\n    letterSpacing: 0.3,\n  },\n  donationCtaButtonTop: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    backgroundColor: colors.secondary,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    paddingHorizontal: isMobileWeb ? 16 : 28,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    marginBottom: isMobileWeb ? 16 : 20,\n    alignSelf: 'center',\n    shadowColor: colors.secondary,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.3,\n    shadowRadius: 10,\n    elevation: 6,\n  },\n  donationCtaButtonTextTop: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 13 : 18,\n    letterSpacing: 0.3,\n  },\n});\n\nexport default LandingSiteScreen;\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/LoginScreen.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":291,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":291,"endColumn":83,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/MyChallengesScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadChallenges'. Either include it or remove the dependency array.","line":65,"column":8,"nodeType":"ArrayExpression","endLine":65,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadChallenges]","fix":{"range":[2481,2483],"text":"[loadChallenges]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// My Challenges Screen\n// Shows all challenges the user has joined/participating in\n// Allows adding entries for each challenge\nimport React, { useCallback, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n} from 'react-native';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { DailyHabitsQuickView } from '../components/Challenges/DailyHabitsQuickView';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge, ChallengeParticipant } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\n\nexport interface MyChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', label: '×›×Ÿ/×œ×', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', label: '××¡×¤×¨×™', icon: 'calculator-outline' },\n  { id: 'DURATION', label: '×–××Ÿ', icon: 'time-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', label: '×§×œ', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', label: '×‘×™× ×•× ×™', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', label: '×§×©×”', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', label: '××•××—×”', icon: 'trophy-outline', color: colors.primary },\n];\n\ntype ChallengeWithParticipation = CommunityChallenge & {\n  participation?: ChallengeParticipant;\n};\n\nexport default function MyChallengesScreen({ navigation, route }: MyChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n  const { selectedUser: user } = useUser();\n  \n  const [challenges, setChallenges] = useState<ChallengeWithParticipation[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<ChallengeWithParticipation[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      loadChallenges();\n    }, [])\n  );\n\n  // Apply search filter\n  React.useEffect(() => {\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      setFilteredChallenges(\n        challenges.filter(\n          (c) =>\n            c.title.toLowerCase().includes(query) ||\n            c.description?.toLowerCase().includes(query) ||\n            c.category?.toLowerCase().includes(query)\n        )\n      );\n    } else {\n      setFilteredChallenges(challenges);\n    }\n  }, [searchQuery, challenges]);\n\n  const loadChallenges = async () => {\n    if (!user?.id) {\n      showToast(t('messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Get user statistics which includes participations\n      const statsResponse = await db.getChallengeStatistics(user.id);\n      \n      if (statsResponse.success && statsResponse.data && statsResponse.data.challenges) {\n        const participations = statsResponse.data.challenges;\n        \n        // Map to our format\n        const challengesWithParticipation = participations.map((item: any) => ({\n          id: item.challenge_id,\n          creator_id: '',\n          title: item.title,\n          description: '',\n          type: item.type,\n          frequency: item.frequency,\n          difficulty: item.difficulty,\n          category: item.category,\n          goal_value: item.goal_value,\n          deadline: item.deadline,\n          is_active: true,\n          participants_count: 0,\n          created_at: '',\n          updated_at: '',\n          participation: {\n            id: item.id,\n            challenge_id: item.challenge_id,\n            user_id: item.user_id,\n            joined_at: item.joined_at,\n            current_streak: item.current_streak || 0,\n            best_streak: item.best_streak || 0,\n            total_entries: item.total_entries || 0,\n            last_entry_date: item.last_entry_date,\n          },\n        }));\n        \n        setChallenges(challengesWithParticipation);\n      } else {\n        setChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('messages.errorLoading'), 'error');\n      setChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const handleAddEntry = (challenge: ChallengeWithParticipation) => {\n    // Navigate to challenge details to add entry\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n      openEntryForm: true,\n    });\n  };\n\n  const handleViewDetails = (challenge: ChallengeWithParticipation) => {\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n    });\n  };\n\n  const renderChallengeCard = ({ item }: { item: ChallengeWithParticipation }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((t) => t.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n    const participation = item.participation;\n\n    return (\n      <TouchableOpacity\n        style={styles.challengeCard}\n        onPress={() => handleViewDetails(item)}\n        activeOpacity={0.7}\n      >\n        <View style={styles.cardHeader}>\n          <View style={styles.cardTitleRow}>\n            <Ionicons\n              name={typeOption?.icon as any || 'trophy-outline'}\n              size={24}\n              color={difficultyOption?.color || colors.primary}\n            />\n            <Text style={styles.cardTitle} numberOfLines={2}>\n              {item.title}\n            </Text>\n          </View>\n          {difficultyOption && (\n            <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n              <Text style={styles.difficultyText}>{difficultyOption.label}</Text>\n            </View>\n          )}\n        </View>\n\n        {item.description && (\n          <Text style={styles.cardDescription} numberOfLines={2}>\n            {item.description}\n          </Text>\n        )}\n\n        {/* Participation Stats */}\n        {participation && (\n          <View style={styles.statsContainer}>\n            <View style={styles.statItem}>\n              <Ionicons name=\"flame-outline\" size={16} color={colors.primary} />\n              <Text style={styles.statLabel}>{t('stats.currentStreak')}</Text>\n              <Text style={styles.statValue}>{participation.current_streak || 0}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Ionicons name=\"trophy-outline\" size={16} color={colors.warning} />\n              <Text style={styles.statLabel}>{t('stats.bestStreak')}</Text>\n              <Text style={styles.statValue}>{participation.best_streak || 0}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Ionicons name=\"checkmark-done-outline\" size={16} color={colors.success} />\n              <Text style={styles.statLabel}>{t('stats.totalEntries')}</Text>\n              <Text style={styles.statValue}>{participation.total_entries || 0}</Text>\n            </View>\n          </View>\n        )}\n\n        {/* Action Button */}\n        <TouchableOpacity\n          style={styles.addEntryButton}\n          onPress={() => handleAddEntry(item)}\n        >\n          <Ionicons name=\"add-circle-outline\" size={20} color={colors.white} />\n          <Text style={styles.addEntryButtonText}>{t('addEntry')}</Text>\n        </TouchableOpacity>\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('messages.noJoinedChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>{t('messages.noJoinedChallengesSubtitle')}</Text>\n      <TouchableOpacity\n        style={styles.browseButton}\n        onPress={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n      >\n        <Ionicons name=\"search-outline\" size={24} color={colors.white} />\n        <Text style={styles.browseButtonText}>{t('browseChallenges')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('myChallenges')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n\n      <DailyHabitsQuickView\n        onBrowseChallenges={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n      />\n\n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')}</Text>\n      </View>\n\n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    paddingHorizontal: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 8,\n    marginBottom: 12,\n  },\n  statItem: {\n    flex: 1,\n    alignItems: 'center',\n    gap: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  statValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  addEntryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    backgroundColor: colors.primary,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  addEntryButtonText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    paddingHorizontal: 32,\n  },\n  browseButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 12,\n  },\n  browseButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/MyCreatedChallengesScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'loadChallenges'. Either include it or remove the dependency array.","line":63,"column":8,"nodeType":"ArrayExpression","endLine":63,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadChallenges]","fix":{"range":[2419,2421],"text":"[loadChallenges]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// My Created Challenges Screen\n// Shows all challenges created by the current user\n// Allows editing and deleting of created challenges\nimport React, { useCallback, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n} from 'react-native';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\nimport EditChallengeModal from '../components/Challenges/EditChallengeModal';\n\nexport interface MyCreatedChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', icon: 'calculator-outline' },\n  { id: 'DURATION', icon: 'time-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', icon: 'trophy-outline', color: colors.primary },\n];\n\nexport default function MyCreatedChallengesScreen({ navigation, route }: MyCreatedChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n  const { selectedUser: user } = useUser();\n  \n  const [challenges, setChallenges] = useState<CommunityChallenge[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<CommunityChallenge[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [selectedChallenge, setSelectedChallenge] = useState<CommunityChallenge | null>(null);\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      loadChallenges();\n    }, [])\n  );\n\n  // Apply search filter\n  React.useEffect(() => {\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      setFilteredChallenges(\n        challenges.filter(\n          (c) =>\n            c.title.toLowerCase().includes(query) ||\n            c.description?.toLowerCase().includes(query) ||\n            c.category?.toLowerCase().includes(query)\n        )\n      );\n    } else {\n      setFilteredChallenges(challenges);\n    }\n  }, [searchQuery, challenges]);\n\n  const loadChallenges = async () => {\n    if (!user?.id) {\n      showToast(t('messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const filters = {\n        creator_id: user.id,\n        sort_by: 'created_at',\n        sort_order: 'DESC' as const,\n        limit: 100,\n      };\n      \n      const response = await db.getCommunityChallenges(filters);\n      \n      if (response.success && response.data) {\n        setChallenges(response.data);\n      } else {\n        setChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('messages.errorLoading'), 'error');\n      setChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const handleEditChallenge = (challenge: CommunityChallenge) => {\n    setSelectedChallenge(challenge);\n    setEditModalVisible(true);\n  };\n\n  const handleUpdateChallenge = async () => {\n    await loadChallenges();\n  };\n\n  const handleDeleteChallenge = (challenge: CommunityChallenge) => {\n    Alert.alert(\n      t('deleteChallenge'),\n      t('deleteChallengeConfirm', { title: challenge.title }),\n      [\n        {\n          text: t('common:cancel'),\n          style: 'cancel',\n        },\n        {\n          text: t('common:delete'),\n          style: 'destructive',\n          onPress: async () => {\n            if (!user?.id) return;\n            \n            try {\n              setLoading(true);\n              const response = await db.deleteCommunityChallenge(challenge.id, user.id);\n              \n              if (response.success) {\n                showToast(t('challengeDeleted'), 'success');\n                await loadChallenges();\n              } else {\n                showToast(t('messages.errorDeleting'), 'error');\n              }\n            } catch (error) {\n              console.error('Error deleting challenge:', error);\n              showToast(t('messages.errorDeleting'), 'error');\n            } finally {\n              setLoading(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const renderChallengeCard = ({ item }: { item: CommunityChallenge }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((opt) => opt.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n\n    return (\n      <View style={styles.challengeCard}>\n        <View style={styles.cardHeader}>\n          <View style={styles.cardTitleRow}>\n            <Ionicons\n              name={typeOption?.icon as any || 'trophy-outline'}\n              size={24}\n              color={difficultyOption?.color || colors.primary}\n            />\n            <Text style={styles.cardTitle} numberOfLines={2}>\n              {item.title}\n            </Text>\n          </View>\n          {difficultyOption && (\n            <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n              <Text style={styles.difficultyText}>{difficultyOption ? t(`challenges:difficulty.${difficultyOption.id}`) : item.difficulty}</Text>\n            </View>\n          )}\n        </View>\n\n        {item.description && (\n          <Text style={styles.cardDescription} numberOfLines={2}>\n            {item.description}\n          </Text>\n        )}\n\n        <View style={styles.cardMeta}>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{t('stats.participantsCount', { count: item.participants_count })}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons\n              name={item.is_active ? 'checkmark-circle' : 'close-circle'}\n              size={16}\n              color={item.is_active ? colors.success : colors.error}\n            />\n            <Text style={styles.metaText}>\n              {item.is_active ? t('active') : t('inactive')}\n            </Text>\n          </View>\n        </View>\n\n        {/* Action Buttons */}\n        <View style={styles.actionButtons}>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.editButton]}\n            onPress={() => handleEditChallenge(item)}\n          >\n            <Ionicons name=\"pencil-outline\" size={18} color={colors.white} />\n            <Text style={styles.actionButtonText}>{t('edit')}</Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => handleDeleteChallenge(item)}\n          >\n            <Ionicons name=\"trash-outline\" size={18} color={colors.white} />\n            <Text style={styles.actionButtonText}>{t('delete')}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('messages.noCreatedChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>{t('messages.noCreatedChallengesSubtitle')}</Text>\n      <TouchableOpacity\n        style={styles.createButton}\n        onPress={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'offer' })}\n      >\n        <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n        <Text style={styles.createButtonText}>{t('createNewChallenge')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n        ]}\n        onToggleMode={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'offer' })}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          }\n        }}\n        title={t('myCreatedChallenges')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n      \n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')}</Text>\n      </View>\n      \n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n\n      {/* Edit Modal */}\n      {selectedChallenge && (\n        <EditChallengeModal\n          visible={editModalVisible}\n          challenge={selectedChallenge}\n          onClose={() => {\n            setEditModalVisible(false);\n            setSelectedChallenge(null);\n          }}\n          onUpdate={handleUpdateChallenge}\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  cardMeta: {\n    flexDirection: 'row',\n    gap: 16,\n    marginBottom: 12,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    gap: 8,\n    marginTop: 8,\n  },\n  actionButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  editButton: {\n    backgroundColor: colors.primary,\n  },\n  deleteButton: {\n    backgroundColor: colors.error,\n  },\n  actionButtonText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    paddingHorizontal: 32,\n  },\n  createButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 12,\n  },\n  createButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/NewChatScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":41,"column":27,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":43,"endColumn":2,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[1785,1819],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[1785,1819],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 't'. Either include it or remove the dependency array.","line":136,"column":6,"nodeType":"ArrayExpression","endLine":136,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, t]","fix":{"range":[5783,5797],"text":"[selectedUser, t]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Start a new chat by selecting from friends/suggestions with filters and sorting; creates conversation if needed.\n// - Reached from: 'ChatListScreen' quick action and other entry points via route 'NewChatScreen'.\n// - Provides: Loads following/followers or suggestions; shows badges for existing chats; on select, navigates to 'ChatDetailScreen' with params.\n// - Reads from context: `useUser()` -> `selectedUser`.\n// - External deps/services: `followService` (suggestions/followers/following), `chatService` (create, list, exists, send first message).\n// screens/NewChatScreen.tsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  SafeAreaView,\n  Platform,\n  Alert,\n  TextInput,\n  Image,\n  ScrollView,\n  ActivityIndicator,\n  RefreshControl,\n  StatusBar,\n  Dimensions,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport { ParamListBase } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { getFollowing, getFollowers, getFollowSuggestions } from '../utils/followService';\nimport { createConversation, getAllConversations, conversationExists, sendMessage } from '../utils/chatService';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\n\ntype FilterType = 'all' | 'online' | 'highKarma' | 'recentFollowers';\ntype SortType = 'name' | 'karma' | 'followers' | 'recent';\n\ntype NewChatRouteParams = {\n  // No specific params needed\n};\n\nexport default function NewChatScreen() {\n  const { t } = useTranslation(['newChatScreen']);\n  const navigation = useNavigation();\n  const route = useRoute<RouteProp<Record<string, NewChatRouteParams>, string>>();\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [searchQuery, setSearchQuery] = useState('');\n  const [friends, setFriends] = useState<CharacterType[]>([]);\n  const [filteredFriends, setFilteredFriends] = useState<CharacterType[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [activeFilter, setActiveFilter] = useState<FilterType>('all');\n  const [sortBy, setSortBy] = useState<SortType>('name');\n  const [showFilters, setShowFilters] = useState(false);\n  const [existingConversations, setExistingConversations] = useState<string[]>([]);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const [filtersHeight, setFiltersHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight - (showFilters ? filtersHeight : 0)\n    : undefined;\n\n  const loadFriends = useCallback(async () => {\n    if (!selectedUser) {\n      Alert.alert(t('error'), t('selectUserFirst'));\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n\n      const currentUserId = String(selectedUser.id).trim().toLowerCase();\n      const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n\n      const following = await getFollowing(selectedUser.id);\n\n      const followers = await getFollowers(selectedUser.id);\n\n      const allFriends = [...following, ...followers];\n\n      // Filter out current user - check both ID and email (case-insensitive)\n      const uniqueFriends = allFriends.filter((friend, index, self) =>\n        index === self.findIndex(f => f.id === friend.id)\n      ).filter(friend => {\n        const friendId = String(friend.id || '').trim().toLowerCase();\n        const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n        const isCurrentUser = friendId === currentUserId ||\n          (currentUserEmail && friendEmail === currentUserEmail) ||\n          friendId === '';\n\n        if (isCurrentUser) {\n          console.log('ğŸš« NewChatScreen - Filtered out current user:', { friendId, friendEmail, name: friend.name });\n        }\n\n        return !isCurrentUser;\n      });\n\n      const conversations = await getAllConversations(selectedUser.id);\n      const existingUserIds = conversations.flatMap(conv =>\n        conv.participants.filter(id => id !== selectedUser.id)\n      );\n      setExistingConversations(existingUserIds);\n\n      if (uniqueFriends.length === 0) {\n        const suggestions = await getFollowSuggestions(selectedUser.id, 10, currentUserEmail);\n        // Additional filter as safety measure - check both ID and email\n        const filteredSuggestions = suggestions.filter(friend => {\n          const friendId = String(friend.id || '').trim().toLowerCase();\n          const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n          const isCurrentUser = friendId === currentUserId ||\n            (currentUserEmail && friendEmail === currentUserEmail) ||\n            friendId === '';\n\n          if (isCurrentUser) {\n            console.log('ğŸš« NewChatScreen - Filtered out current user from suggestions:', { friendId, friendEmail, name: friend.name });\n          }\n\n          return !isCurrentUser;\n        });\n        setFriends(filteredSuggestions);\n      } else {\n        setFriends(uniqueFriends);\n      }\n\n    } catch (error) {\n      console.error('âŒ Load friends error:', error);\n      Alert.alert(t('error'), t('errorLoadingFriends'));\n    } finally {\n      setIsLoading(false);\n      setRefreshing(false);\n    }\n  }, [selectedUser]);\n\n  const applyFilters = useCallback((friendsList: CharacterType[]) => {\n    if (!selectedUser) return friendsList;\n\n    const currentUserId = String(selectedUser.id).trim().toLowerCase();\n    const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n\n    // First, filter out current user (double-check to ensure current user is never shown)\n    let filtered = friendsList.filter(friend => {\n      const friendId = String(friend.id || '').trim().toLowerCase();\n      const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n      const isCurrentUser = friendId === currentUserId ||\n        (currentUserEmail && friendEmail === currentUserEmail) ||\n        friendId === '';\n\n      if (isCurrentUser) {\n        console.log('ğŸš« NewChatScreen - Filtered out current user in applyFilters:', { friendId, friendEmail, name: friend.name });\n      }\n\n      return !isCurrentUser;\n    });\n\n    switch (activeFilter) {\n      case 'online':\n        filtered = filtered.filter(friend => friend.isActive);\n        break;\n      case 'highKarma':\n        filtered = filtered.filter(friend => (friend.karmaPoints ?? 0) >= 100);\n        break;\n      case 'recentFollowers':\n        filtered = filtered.filter(friend => (friend.followersCount ?? 0) > 0);\n        break;\n    }\n\n    if (searchQuery.trim() !== '') {\n      filtered = filtered.filter(friend =>\n        (friend.name || '').toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (friend.bio || '').toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    switch (sortBy) {\n      case 'name':\n        filtered.sort((a, b) => (a.name || '').localeCompare(b.name || '', 'he'));\n        break;\n      case 'karma':\n        filtered.sort((a, b) => (b.karmaPoints ?? 0) - (a.karmaPoints ?? 0));\n        break;\n      case 'followers':\n        filtered.sort((a, b) => (b.followersCount ?? 0) - (a.followersCount ?? 0));\n        break;\n      case 'recent':\n        filtered.sort((a, b) => {\n          if (a.isActive && !b.isActive) return -1;\n          if (!a.isActive && b.isActive) return 1;\n          return 0;\n        });\n        break;\n    }\n\n    return filtered;\n  }, [activeFilter, sortBy, searchQuery, selectedUser]);\n\n  useEffect(() => {\n    const filtered = applyFilters(friends);\n    setFilteredFriends(filtered);\n  }, [friends, applyFilters]);\n\n  useEffect(() => {\n    loadFriends();\n  }, [loadFriends]);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    loadFriends();\n  }, [loadFriends]);\n\n  const handleCreateChat = async (friend: CharacterType) => {\n    if (!selectedUser) {\n      Alert.alert(t('error'), t('selectUserFirst'));\n      return;\n    }\n\n    try {\n      const existingConvId = await conversationExists(selectedUser.id, friend.id);\n      let conversationId: string;\n\n      if (existingConvId) {\n        console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n        conversationId = existingConvId;\n      } else {\n        console.log('ğŸ’¬ Creating new conversation...');\n        conversationId = await createConversation([selectedUser.id, friend.id]);\n\n        const welcomeMessage = {\n          conversationId,\n          senderId: selectedUser.id,\n          text: t('welcomeMessage', { name: friend.name }),\n          timestamp: new Date().toISOString(),\n          read: false,\n          type: 'text' as const,\n          status: 'sent' as const,\n        };\n\n        await sendMessage(welcomeMessage);\n        console.log('ğŸ’¬ Sent welcome message');\n      }\n\n      (navigation as any).navigate('ChatDetailScreen', {\n        conversationId,\n        userName: friend.name,\n        userAvatar: friend.avatar,\n        otherUserId: friend.id,\n      });\n\n    } catch (error) {\n      console.error('âŒ Create chat error:', error);\n      Alert.alert(t('error'), t('errorCreatingChat'));\n    }\n  };\n\n  const renderFriend = ({ item }: { item: CharacterType }) => {\n    // Double-check: if this is the current user, don't render at all\n    if (!selectedUser) return null;\n\n    const currentUserId = String(selectedUser.id).trim().toLowerCase();\n    const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n    const itemId = String(item.id || '').trim().toLowerCase();\n    const itemEmail = item.email ? String(item.email).trim().toLowerCase() : '';\n    const isCurrentUser = itemId === currentUserId ||\n      (currentUserEmail && itemEmail === currentUserEmail) ||\n      itemId === '';\n\n    if (isCurrentUser) {\n      console.log('ğŸš« NewChatScreen - renderFriend: Skipping current user:', { itemId, itemEmail, name: item.name });\n      return null;\n    }\n\n    const hasExistingChat = existingConversations.includes(item.id);\n    const avatarUri = item.avatar || 'https://i.pravatar.cc/150?img=1';\n\n    return (\n      <TouchableOpacity\n        style={[styles.friendItem, hasExistingChat && styles.friendItemWithChat]}\n        onPress={() => handleCreateChat(item)}\n      >\n        <View style={styles.avatarContainer}>\n          <Image\n            source={{ uri: avatarUri }}\n            style={styles.avatar}\n          />\n          {item.isActive && <View style={styles.onlineIndicator} />}\n        </View>\n        <View style={styles.friendInfo}>\n          <View style={styles.friendHeader}>\n            <Text style={styles.friendName}>{item.name || t('noName')}</Text>\n            {hasExistingChat && (\n              <View style={styles.existingChatBadge}>\n                <Text style={styles.existingChatText}>{t('existingChat')}</Text>\n              </View>\n            )}\n          </View>\n          <Text style={styles.friendBio} numberOfLines={1}>\n            {item.bio || t('noBio')}\n          </Text>\n          <View style={styles.friendStats}>\n            <Text style={styles.karmaPoints}>â­ {item.karmaPoints ?? 0} {t('karmaPoints')}</Text>\n            <Text style={styles.followersCount}>\n              ğŸ‘¥ {item.followersCount ?? 0} {t('followers')}\n            </Text>\n          </View>\n        </View>\n        <Icon\n          name={hasExistingChat ? \"chatbubble\" : \"chatbubble-outline\"}\n          size={24}\n          color={hasExistingChat ? colors.success : colors.primary}\n        />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Icon name=\"people-outline\" size={80} color={colors.textSecondary} />\n      <Icon name=\"people-outline\" size={80} color={colors.textSecondary} />\n      <Text style={styles.emptyStateTitle}>{t('noFriendsYet')}</Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {t('startFollowingToChat')}\n      </Text>\n      <TouchableOpacity\n        style={styles.exploreButton}\n        onPress={() => (navigation as any).navigate('DiscoverPeopleScreen')}\n      >\n        <Text style={styles.exploreButtonText}>{t('discoverNewPeople')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View \n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.headerButton}>\n          <Icon name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => (navigation as any).navigate('DiscoverPeopleScreen')}\n          style={styles.headerButton}\n        >\n          <Icon name=\"people-outline\" size={24} color={colors.primary} />\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.searchContainer}>\n        <View style={styles.searchInputContainer}>\n          <Icon name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            placeholder={t('searchFriends')}\n            placeholderTextColor={colors.textSecondary}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity onPress={() => setSearchQuery('')} style={styles.clearButton}>\n              <Icon name=\"close-circle\" size={20} color={colors.textSecondary} />\n            </TouchableOpacity>\n          )}\n        </View>\n\n        <TouchableOpacity\n          style={styles.filterButton}\n          onPress={() => setShowFilters(!showFilters)}\n        >\n          <Icon name=\"funnel-outline\" size={20} color={colors.primary} />\n          <Text style={styles.filterButtonText}>{t('filter')}</Text>\n        </TouchableOpacity>\n      </View>\n\n      {showFilters && (\n        <View \n          style={styles.filtersContainer}\n          onLayout={(event) => {\n            if (Platform.OS === 'web') {\n              const { height } = event.nativeEvent.layout;\n              setFiltersHeight(height);\n            }\n          }}\n        >\n          <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.filterScrollView}>\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'all' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('all')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'all' && styles.filterChipTextActive]}>\n                {t('all')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'online' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('online')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'online' && styles.filterChipTextActive]}>\n                {t('online')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'highKarma' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('highKarma')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'highKarma' && styles.filterChipTextActive]}>\n                {t('highKarma')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'recentFollowers' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('recentFollowers')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'recentFollowers' && styles.filterChipTextActive]}>\n                {t('newFollowers')}\n              </Text>\n            </TouchableOpacity>\n          </ScrollView>\n\n          <View style={styles.sortContainer}>\n            <Text style={styles.sortLabel}>{t('sortLabel')}</Text>\n            <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.sortScrollView}>\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'name' && styles.sortChipActive]}\n                onPress={() => setSortBy('name')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'name' && styles.sortChipTextActive]}>\n                  {t('sortName')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'karma' && styles.sortChipActive]}\n                onPress={() => setSortBy('karma')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'karma' && styles.sortChipTextActive]}>\n                  {t('sortKarma')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'followers' && styles.sortChipActive]}\n                onPress={() => setSortBy('followers')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'followers' && styles.sortChipTextActive]}>\n                  {t('sortFollowers')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'recent' && styles.sortChipActive]}\n                onPress={() => setSortBy('recent')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'recent' && styles.sortChipTextActive]}>\n                  {t('sortActivity')}\n                </Text>\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      )}\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        {isLoading && filteredFriends.length === 0 ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color={colors.primary} />\n            <Text style={styles.loadingText}>{t('loadingFriends')}</Text>\n          </View>\n        ) : (\n          <FlatList\n            data={filteredFriends}\n            keyExtractor={(item) => item.id}\n            renderItem={renderFriend}\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={renderEmptyState}\n            showsVerticalScrollIndicator={false}\n            scrollEnabled={true}\n            nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n            scrollEventThrottle={16}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={onRefresh}\n                tintColor={colors.primary}\n              />\n            }\n          />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    marginTop: Platform.OS === 'android' ? 30 : 0,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n  },\n  searchInputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n    borderRadius: 12,\n    paddingHorizontal: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    marginRight: 12,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  searchInput: {\n    flex: 1,\n    height: 44,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  clearButton: {\n    marginLeft: 8,\n  },\n  listContent: {\n    paddingVertical: 8,\n  },\n  friendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.background,\n    marginHorizontal: 16,\n    marginVertical: 4,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  friendInfo: {\n    flex: 1,\n  },\n  friendName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 2,\n  },\n  friendBio: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 4,\n  },\n  friendStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  karmaPoints: {\n    fontSize: FontSizes.caption,\n    color: colors.primary,\n    marginRight: 12,\n  },\n  followersCount: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 64,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    lineHeight: 20,\n  },\n  exploreButton: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n  },\n  exploreButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n  },\n  filterButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 8,\n    backgroundColor: colors.primary + '10',\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  filterButtonText: {\n    color: colors.primary,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  filtersContainer: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 16,\n    paddingBottom: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  filterScrollView: {\n    marginBottom: 12,\n  },\n  filterChip: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: colors.background,\n    marginRight: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  filterChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  filterChipText: {\n    fontSize: FontSizes.caption,\n    color: colors.textPrimary,\n  },\n  filterChipTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  sortContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  sortLabel: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    marginRight: 12,\n  },\n  sortScrollView: {\n    flex: 1,\n  },\n  sortChip: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    backgroundColor: colors.background,\n    marginRight: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  sortChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  sortChipText: {\n    fontSize: FontSizes.caption,\n    color: colors.textPrimary,\n  },\n  sortChipTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  avatarContainer: {\n    position: 'relative',\n  },\n  onlineIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: colors.success,\n    borderWidth: 2,\n    borderColor: colors.background,\n  },\n  friendHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 2,\n  },\n  existingChatBadge: {\n    marginLeft: 8,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 12,\n    backgroundColor: colors.success + '20',\n  },\n  existingChatText: {\n    fontSize: FontSizes.caption - 2,\n    color: colors.success,\n    fontWeight: '600',\n  },\n  friendItemWithChat: {\n    borderColor: colors.success + '30',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: 12,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/NotificationsScreen.tsx","messages":[{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `t`, but the source dependencies were [selectedUser]. Inferred different dependency than source.\n\n/Users/navesarussi/KC/DEV/MVP/screens/NotificationsScreen.tsx:60:41\n  58 |   console.log('ğŸ”” NotificationsScreen - Component rendered, selectedUser:', selectedUser?.name || 'null');\n  59 |\n> 60 |   const loadNotifications = useCallback(async () => {\n     |                                         ^^^^^^^^^^^^^\n> 61 |     console.log('ğŸ”” NotificationsScreen - loadNotifications - selectedUser:', selectedUser?.name || 'null');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 62 |\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 77 |     }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 78 |   }, [selectedUser]);\n     | ^^^^ Could not preserve existing manual memoization\n  79 |\n  80 |   useFocusEffect(\n  81 |     useCallback(() => {","line":60,"column":41,"nodeType":null,"endLine":78,"endColumn":4},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 't'. Either include it or remove the dependency array.","line":78,"column":6,"nodeType":"ArrayExpression","endLine":78,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [selectedUser, t]","fix":{"range":[3228,3242],"text":"[selectedUser, t]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Displays a feed of notifications with read/unread state, actions, and settings.\n// - Reached from: Top bar routes and deep links; route name 'NotificationsScreen'.\n// - Provides: List with swipe/press actions: mark read, mark all read, delete, clear all; badge for unread count; real-time updates via in-app events and polling.\n// - Reads from context: `useUser()` -> selectedUser.\n// - Navigation side-effects: On tapping a 'message' notification with `conversationId`, navigates to 'ChatDetailScreen'.\n// - External deps/services: `notificationService` (CRUD + subscribe), i18n.\n// screens/NotificationsScreen.tsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  SafeAreaView,\n  Platform,\n  Alert,\n  RefreshControl,\n  StatusBar,\n  Dimensions,\n} from 'react-native';\nimport { useNavigation, useFocusEffect, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useUser } from '../stores/userStore';\nimport {\n  getNotifications,\n  markNotificationAsRead,\n  markAllNotificationsAsRead,\n  deleteNotification,\n  clearAllNotifications,\n  NotificationData,\n  getUnreadNotificationCount,\n  getNotificationSettings,\n  updateNotificationSettings,\n  subscribeToNotificationEvents,\n} from '../utils/notificationService';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\n\nexport default function NotificationsScreen() {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n  const { selectedUser } = useUser();\n  const { t } = useTranslation(['notifications', 'common']);\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [notifications, setNotifications] = useState<NotificationData[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showSettings, setShowSettings] = useState(false);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n\n  console.log('ğŸ”” NotificationsScreen - Component rendered, selectedUser:', selectedUser?.name || 'null');\n\n  const loadNotifications = useCallback(async () => {\n    console.log('ğŸ”” NotificationsScreen - loadNotifications - selectedUser:', selectedUser?.name || 'null');\n\n    if (!selectedUser) {\n      console.log('ğŸ”” NotificationsScreen - No selected user, cannot load notifications');\n      return;\n    }\n\n    try {\n      const userNotifications = await getNotifications(selectedUser.id);\n      setNotifications(userNotifications);\n\n      const count = await getUnreadNotificationCount(selectedUser.id);\n      setUnreadCount(count);\n    } catch (error) {\n      console.error('âŒ Load notifications error:', error);\n      Alert.alert(t('common:errorTitle'), t('notifications:loadError'));\n    }\n  }, [selectedUser]);\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”” NotificationsScreen - Screen focused, loading notifications...');\n      console.log('ğŸ”” NotificationsScreen - selectedUser in useFocusEffect:', selectedUser?.name || 'null');\n      loadNotifications();\n\n      // Subscribe to in-app notification events for real-time updates\n      const unsubscribe = subscribeToNotificationEvents((notification) => {\n        if (!selectedUser) return;\n        if (notification.userId !== selectedUser.id) return;\n        console.log('ğŸ”” NotificationsScreen - Realtime notification received');\n        // Prepend the new notification and update unread counter\n        setNotifications((prev) => [notification, ...prev]);\n        setUnreadCount((prev) => prev + (notification.read ? 0 : 1));\n      });\n\n      // Lightweight polling fallback to ensure UI stays in sync\n      const interval = setInterval(async () => {\n        if (!selectedUser) return;\n        try {\n          const userNotifications = await getNotifications(selectedUser.id);\n          setNotifications(userNotifications);\n          const count = userNotifications.filter(n => !n.read).length;\n          setUnreadCount(count);\n        } catch (e) {\n          console.warn('âš ï¸ NotificationsScreen - polling error', e);\n        }\n      }, 3000);\n\n      return () => {\n        unsubscribe?.();\n        clearInterval(interval);\n      };\n    }, [loadNotifications, selectedUser])\n  );\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    loadNotifications().finally(() => setRefreshing(false));\n  }, [loadNotifications]);\n\n  const handleMarkAsRead = async (notificationId: string) => {\n    if (!selectedUser) return;\n\n    try {\n      await markNotificationAsRead(notificationId, selectedUser.id);\n      await loadNotifications();\n    } catch (error) {\n      console.error('âŒ Mark as read error:', error);\n    }\n  };\n\n  const handleMarkAllAsRead = async () => {\n    if (!selectedUser) return;\n\n    try {\n      await markAllNotificationsAsRead(selectedUser.id);\n      await loadNotifications();\n      Alert.alert(t('notifications:markAllDoneTitle'), t('notifications:markAllDoneBody'));\n    } catch (error) {\n      console.error('âŒ Mark all as read error:', error);\n      Alert.alert(t('common:errorTitle'), t('notifications:markAllError'));\n    }\n  };\n\n  const handleDeleteNotification = async (notificationId: string) => {\n    if (!selectedUser) return;\n\n    try {\n      await deleteNotification(notificationId, selectedUser.id);\n      await loadNotifications();\n    } catch (error) {\n      console.error('âŒ Delete notification error:', error);\n    }\n  };\n\n  const handleClearAllNotifications = async () => {\n    console.log('ğŸ”” Clear all pressed');\n    if (!selectedUser) return;\n\n    if (notifications.length === 0) {\n      console.log('â„¹ï¸ No notifications to clear');\n      return;\n    }\n\n    const performClear = async () => {\n      try {\n        await clearAllNotifications(selectedUser.id);\n        await loadNotifications();\n        // Optional: Show success message or just let the list clear\n        // Alert.alert(t('notifications:clearAllDoneTitle'), t('notifications:clearAllDoneBody'));\n      } catch (error) {\n        console.error('âŒ Clear all notifications error:', error);\n        Alert.alert(t('common:errorTitle'), t('notifications:clearAllError'));\n      }\n    };\n\n    if (Platform.OS === 'web') {\n      if (window.confirm(t('notifications:clearAllMessage'))) {\n        await performClear();\n      }\n    } else {\n      Alert.alert(\n        t('notifications:clearAllTitle'),\n        t('notifications:clearAllMessage'),\n        [\n          { text: t('common:cancel'), style: 'cancel' },\n          {\n            text: t('common:delete'),\n            style: 'destructive',\n            onPress: performClear,\n          },\n        ]\n      );\n    }\n  };\n\n  const getNotificationIcon = (type: NotificationData['type']) => {\n    switch (type) {\n      case 'message':\n        return 'chatbubble-outline';\n      case 'follow':\n        return 'person-add-outline';\n      case 'like':\n        return 'heart-outline';\n      case 'comment':\n        return 'chatbubble-ellipses-outline';\n      case 'system':\n        return 'notifications-outline';\n      default:\n        return 'notifications-outline';\n    }\n  };\n\n  const getNotificationColor = (type: NotificationData['type']) => {\n    switch (type) {\n      case 'message':\n        return colors.primary;\n      case 'follow':\n        return colors.success;\n      case 'like':\n        return colors.error;\n      case 'comment':\n        return colors.warning;\n      case 'system':\n        return colors.info;\n      default:\n        return colors.textSecondary;\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffTime = Math.abs(now.getTime() - date.getTime());\n    const diffMinutes = Math.floor(diffTime / (1000 * 60));\n    const diffHours = Math.floor(diffTime / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffMinutes < 1) {\n      return t('common:time.now');\n    } else if (diffMinutes < 60) {\n      return t('common:time.minutesAgo', { count: diffMinutes });\n    } else if (diffHours < 24) {\n      return t('common:time.hoursAgo', { count: diffHours });\n    } else if (diffDays < 7) {\n      return t('common:time.daysAgo', { count: diffDays });\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  const handleOpen = async (item: NotificationData) => {\n    if (!selectedUser) return;\n    try {\n      await markNotificationAsRead(item.id, selectedUser.id);\n      if (item.type === 'message' && item.data?.conversationId) {\n        (navigation as any).navigate('ChatDetailScreen', { conversationId: item.data.conversationId });\n      }\n    } catch (error) {\n      console.error('âŒ Open notification error:', error);\n    }\n  };\n\n  const renderNotification = ({ item }: { item: NotificationData }) => (\n    <TouchableOpacity\n      style={[\n        styles.notificationItem,\n        !item.read && styles.unreadNotification,\n      ]}\n      onPress={() => handleOpen(item)}\n    >\n      <View style={styles.notificationHeader}>\n        <View style={styles.notificationIconContainer}>\n          <Icon\n            name={getNotificationIcon(item.type)}\n            size={20}\n            color={getNotificationColor(item.type)}\n          />\n        </View>\n        <View style={styles.notificationContent}>\n          <Text style={styles.notificationTitle}>{item.title}</Text>\n          <Text style={styles.notificationBody}>{item.body}</Text>\n          <Text style={styles.notificationTime}>{formatTime(item.timestamp)}</Text>\n        </View>\n        <TouchableOpacity\n          style={styles.deleteButton}\n          onPress={() => handleDeleteNotification(item.id)}\n        >\n          <Icon name=\"close\" size={16} color={colors.textSecondary} />\n        </TouchableOpacity>\n      </View>\n      {!item.read && <View style={styles.unreadIndicator} />}\n    </TouchableOpacity>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Icon name=\"notifications-off-outline\" size={80} color={colors.textSecondary} />\n      <Text style={styles.emptyStateTitle}>{t('notifications:empty.title')}</Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {t('notifications:empty.subtitle')}\n      </Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      {/* Header container - measure total height */}\n      <View\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        {/* Additional header actions for notifications */}\n        <View style={styles.additionalHeaderSection}>\n          {[\n            unreadCount > 0 && (\n              <TouchableOpacity \n                key=\"mark-all-read\"\n                onPress={handleMarkAllAsRead} \n                style={styles.headerButton}\n              >\n                <Icon name=\"checkmark-done\" size={24} color={colors.primary} />\n              </TouchableOpacity>\n            ),\n            notifications.length > 0 && (\n              <TouchableOpacity \n                key=\"clear-all\"\n                onPress={handleClearAllNotifications} \n                style={styles.headerButton}\n              >\n                <Icon name=\"trash-outline\" size={24} color={colors.error} />\n              </TouchableOpacity>\n            ),\n          ].filter(Boolean)}\n        </View>\n\n        {unreadCount > 0 && (\n          <View style={styles.unreadBadge}>\n            <Text style={styles.unreadBadgeText}>{t('notifications:unreadBadge', { count: unreadCount })}</Text>\n          </View>\n        )}\n      </View>\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={notifications}\n          keyExtractor={(item) => item.id}\n          renderItem={renderNotification}\n          contentContainerStyle={styles.listContent}\n          ListEmptyComponent={renderEmptyState}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n          }\n          showsVerticalScrollIndicator={false}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n        />\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  additionalHeaderSection: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    // backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 44,\n    height: 44,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerActions: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  unreadBadge: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginHorizontal: 16,\n    marginTop: 8,\n    borderRadius: 8,\n  },\n  unreadBadgeText: {\n    color: colors.white,\n    fontSize: FontSizes.caption,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  listContent: {\n    paddingVertical: 8,\n  },\n  notificationItem: {\n    backgroundColor: colors.background,\n    marginHorizontal: 16,\n    marginVertical: 4,\n    borderRadius: 12,\n    padding: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  unreadNotification: {\n    borderColor: colors.primary,\n    borderWidth: 2,\n  },\n  notificationHeader: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  notificationIconContainer: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  notificationContent: {\n    flex: 1,\n  },\n  notificationTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  notificationBody: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 4,\n    lineHeight: 18,\n  },\n  notificationTime: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  deleteButton: {\n    width: 24,\n    height: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n  },\n  unreadIndicator: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: colors.primary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 64,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/OrgDashboardScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/OrgOnboardingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/UserProfileScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/WebViewScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":1,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":28,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":28,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[1056,1213],"text":"type WebViewScreenProps = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[1056,1213],"text":"type WebViewScreenProps = unknown"},"desc":"Replace empty interface with `unknown`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Open external JGive site; on web opens a new tab, on native renders inside WebView.\n// - Reached from: Various CTA routes as 'WebViewScreen'.\n// - Params: None used; URL is constant within file.\n// - External deps: `react-native-webview`, react-navigation for back navigation on web.\n// screens/WebViewScreen.tsx\nimport React, { useEffect } from 'react';\nimport {\n  SafeAreaView,\n  StyleSheet,\n  ActivityIndicator,\n  View,\n  Platform,\n  Text, // Needed for loading message on web\n  TouchableOpacity // Added for retry button\n} from 'react-native';\n\n// Re-import WebView for native platforms (iOS/Android)\nimport { WebView } from 'react-native-webview';\n\n// useNavigation is still needed for navigating back on the web side\nimport { NavigationProp, ParamListBase, useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n// WebBrowser is no longer needed as we are using WebView for native.\n// import * as WebBrowser from 'expo-web-browser';\n\ninterface WebViewScreenProps {\n  // If you want to pass the URL as a prop, you would define it here\n  // For example: route: { params?: { url?: string } };\n}\n\nconst J_GIVE_URL = \"https://www.jgive.com/\"; // The URL you want to open\n\nconst WebViewScreen: React.FC<WebViewScreenProps> = (\n  // If you pass URL as a prop, uncomment this line:\n  // { route }\n) => {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n\n  // Conditional logic for Web platform only\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      // For web, jgive.com refuses to connect within an iframe due to security policies.\n      // The only reliable way to open it on web is in a new browser tab.\n      window.open(J_GIVE_URL, '_blank');\n      // After opening, navigate back in the app's history\n      navigation.goBack();\n    }\n    // No need for WebBrowser.openBrowserAsync() on native here,\n    // as the WebView component handles native rendering below.\n  }, [navigation]);\n\n  // Render a loading indicator for the web, as it immediately opens a new tab and navigates back\n  if (Platform.OS === 'web') {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.info} />\n          <Text style={styles.loadingText}>\n            Opening JGive in a new browser tab...\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Render the WebView for iOS and Android\n  const renderLoading = () => (\n    <View style={styles.nativeLoadingContainer}>\n      <ActivityIndicator size=\"large\" color={colors.info} />\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <WebView\n        source={{ uri: J_GIVE_URL }}\n        style={styles.webview}\n        javaScriptEnabled={true}\n        domStorageEnabled={true}\n        startInLoadingState={true}\n        renderLoading={renderLoading}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.white, // Or your app's background color\n  },\n  webview: {\n    flex: 1,\n  },\n  // This loading container is for when the WebView itself is loading on native\n  nativeLoadingContainer: {\n    position: 'absolute',\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white, // Match your screen background\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    zIndex: 999, // Ensure it's on top\n  },\n  // This loading container is for the web version (briefly shown before new tab opens)\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary, // Use your app's primary text color\n    textAlign: 'center',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n     retryButton: {\n     backgroundColor: colors.secondary,\n     paddingVertical: 10,\n     paddingHorizontal: 20,\n     borderRadius: 8,\n   },\n  retryButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n\nexport default WebViewScreen;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/appLoadingStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/userStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/webModeStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/AboutKarmaCommunityScreen.tsx","messages":[{"ruleId":"react/display-name","severity":1,"message":"Component definition is missing display name","line":17,"column":35,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":309,"endColumn":3},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":43,"column":44,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&quot;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&ldquo;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&#34;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&rdquo;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":43,"column":48,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&quot; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&ldquo; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&#34; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&rdquo; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":46,"column":34,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&quot;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&ldquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&#34;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&rdquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":46,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&quot;.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&ldquo;.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&#34;.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&rdquo;.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":131,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&quot;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&ldquo;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&#34;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&rdquo;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":131,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&quot; ×”××œ×”.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&ldquo; ×”××œ×”.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&#34; ×”××œ×”.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&rdquo; ×”××œ×”.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":165,"column":13,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7739,7877],"text":"\n            &quot;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7739,7877],"text":"\n            &ldquo;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7739,7877],"text":"\n            &#34;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7739,7877],"text":"\n            &rdquo;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":165,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&quot;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&ldquo;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&#34;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&rdquo;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":179,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &quot;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &ldquo;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &#34;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &rdquo;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":179,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&quot; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&ldquo; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&#34; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&rdquo; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Static About screen describing the Karma Community vision, challenges, model, and contact.\n// - Reached from: Top bar (guest mode shortcut) or Settings -> About.\n// - Provides: Read-only content, uses `ScreenWrapper`; no route params.\n// - External deps: Shared colors, font sizes; localized text currently inline in Hebrew.\nimport React, { memo } from 'react' // Import memo here\nimport colors from '../globals/colors'\nimport { FontSizes } from '../globals/constants';\nimport { useNavigation, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { View, Text, StyleSheet, SafeAreaView, TouchableOpacity, Platform } from 'react-native';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport styles from '../globals/styles';\nimport ScreenWrapper from '../components/ScreenWrapper';\n\n// Changed this line to use const and wrap with memo\nconst AboutKarmaCommunityScreen = memo(() => {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n\n  return (\n    <>\n      <ScreenWrapper navigation={navigation} style={localStyles.safeArea}>\n      <ScrollContainer style={localStyles.container}>\n        {/* Header Section */}\n        <Text style={localStyles.mainTitle}>\n          ××•×“×•×ª ×§×”×™×œ×ª ×§××¨××” (Karma Community)\n        </Text>\n        <Text style={localStyles.subtitle}>×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™ ×”×¨××©×•×Ÿ ××¡×•×’×•</Text>\n\n        {/* Introduction */}\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” (KC) ××¦×™×’×” ×¨×©×ª ×—×‘×¨×ª×™×ª ×—×“×©× ×™×ª ×•×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×”××©×œ×‘×ª ××ª\n          ×™×¢×™×œ×•×ª ×”×§×¤×™×˜×œ×™×–× ×¢× ×”×× ×•×©×™×•×ª ×©×‘×¡×•×¦×™××œ×™×–×. ×—×–×•× × ×• ×”×•× ×œ×™×¦×•×¨ ××¨×—×‘\n          ×“×™×’×™×˜×œ×™ ×¡×•×¦×™××œ×™×¡×˜×™ ×‘×ª×•×š ×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™ ××ª×§×“×, ×©×™×¢×•×“×“ ×¢×©×™×™×” ×§×”×™×œ×ª×™×ª\n          ××©×•×ª×¤×ª ×•×™×ª×¨×•× ×œ×©×™× ×•×™ ×—×™×•×‘×™ ×‘×¢×•×œ×.\n        </Text>\n\n        {/* What is Karma Community? */}\n        <Text style={localStyles.sectionTitle}>××”×™ ×§×”×™×œ×ª ×§××¨××”?</Text>\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        </Text>\n\n        {/* Our Aspirations */}\n        <Text style={localStyles.sectionTitle}>×”×©××™×¤×•×ª ×”××¨×›×–×™×•×ª ×©×œ× ×•</Text>\n        <Text style={localStyles.paragraph}>\n          1. ×™×¦×™×¨×ª ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª ×©×ª××¤×©×¨ ×œ×›×œ ××—×“ ×œ×ª×ª ×•×œ×§×‘×œ ×‘×§×œ×•×ª ×•×‘× ×•×—×•×ª.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          2. ×‘× ×™×™×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×©×ª×¤×¢×œ ×œ××¢×Ÿ ×”×›×œ×œ.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          3. ××™×—×•×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª ×ª×—×ª ×¤×œ×˜×¤×•×¨××” ××—×ª.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          4. ×¢×™×“×•×“ ×¢×©×™×™×” ×—×‘×¨×ª×™×ª ×•×ª×¨×•××” ×œ×§×”×™×œ×”.\n        </Text>\n\n        {/* Existing Challenges */}\n        <Text style={localStyles.sectionTitle}>\n          ×”××ª×’×¨×™× ×”×§×™×™××™× ×›×™×•× (×”×‘×¢×™×•×ª ×©×× ×• ×¤×•×ª×¨×™×)\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×›×™×•×, ×§×™×™××™× ××¡×¤×¨ ××ª×’×¨×™× ××©××¢×•×ª×™×™× ×‘×ª×—×•× ×”×¢×©×™×™×” ×”×§×”×™×œ×ª×™×ª ×•×”×”×ª× ×“×‘×•×ª×™×ª:\n        </Text>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×›×¤×™×œ×•×™×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ××¨×’×•× ×™× ×¨×‘×™× ×‘×¢×œ×™ ××˜×¨×•×ª ×–×”×•×ª ×¤×•×¢×œ×™× ×‘× ×¤×¨×“ ×•××£ ××ª×—×¨×™× ×‘×™× ×™×”×, ××”\n            ×©××•×‘×™×œ ×œ××™×‘×•×“ ××©××‘×™× ×™×§×¨×™×.\n          </Text>\n        </View>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×—×•×¡×¨ ×××™× ×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ×‘×©×œ ×›××•×ª ×’×“×•×œ×” ×©×œ ××¨×’×•× ×™× ×›×¤×•×œ×™× ×•×”×™×¢×“×¨ ×¡×˜× ×“×¨×˜ ××—×™×“ ×‘×ª×—×•×, ×§×œ\n            ×œ××¨×’×•× ×™× ××• ×× ×©×™× ××•×©×—×ª×™× ×œ× ×¦×œ ××ª ×˜×•×‘ ×œ×‘× ×©×œ ×”×ª×•×¨××™× ×‘×××¦×¢×•×ª\n            ×× ×™×¤×•×œ×¦×™×•×ª ×¤×©×•×˜×•×ª.\n          </Text>\n        </View>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×¤×™×–×•×¨</Text>\n          <Text style={localStyles.paragraph}>\n            ××’×•×•×Ÿ ×”××¤×©×¨×•×™×•×ª ×”×¨×—×‘ ×”×§×™×™× ×¢×‘×•×¨ ×”××–×¨×— ×”×¤×©×•×˜ ×œ×ª×¨×•× ×œ×§×”×™×œ×” ×™×¦×¨ ××¦×‘ ×©×œ\n            ××¨×’×•× ×™× ×¨×‘×™× ×•× ×¤×¨×“×™×, ×©×›×œ ××—×“ ××”× ×× ×’×™×© ×©×™×¨×•×ª ××—×¨. ××¦×‘ ×–×” ××•× ×¢\n            ××”×ª×•×¨× ×œ×§×‘×œ ×ª××•× ×” ×¨×—×‘×” ×•×œ×”×‘×™×Ÿ ××ª ×›×œ ×”××¤×©×¨×•×™×•×ª ×”×¢×•××“×•×ª ×‘×¤× ×™×•. ×‘× ×•×¡×£,\n            ×¤×™×–×•×¨ ×–×” ××•× ×¢ ×”×™×•×•×¦×¨×•×ª ×©×œ ×§×”×™×œ×” ×’×“×•×œ×” ×•×××•×—×“×ª ×”×¢×•×¡×§×ª ×›×•×œ×” ×‘× ×ª×™× ×”,\n            ×©×™×›×•×œ×” ×œ×©× ×•×ª ××ª ×›×œ×œ×™ ×”××©×—×§.\n          </Text>\n        </View>\n\n        {/* Vision and Solutions */}\n        <Text style={localStyles.sectionTitle}>×”×—×–×•×Ÿ ×•×”×¤×ª×¨×•× ×•×ª ×©×× ×• ××¦×™×¢×™×</Text>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>×××™× ×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ×‘×××¦×¢×•×ª ××¤×œ×™×§×¦×™×” × ×•×—×” ×•×©×§×•×¤×” ×œ×—×œ×•×˜×™×Ÿ, ×× ×• × ××™×¨ ×¢×œ ×¢×•×œ× ×©×œ× ×”××¦×•×™\n            ×‘×©×•×œ×™×™× ×”×—×‘×¨×ª×™×™×, ×•× ×¡×¤×§ ×œ×ª×•×¨× ××ª ×”×××™× ×•×ª ×”× ×“×¨×©×ª.\n          </Text>\n        </View>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>××™×—×•×“</Text>\n          <Text style={localStyles.paragraph}>\n            ×¤×œ×˜×¤×•×¨××” ××—×•×“×” ×•×™×—×™×“×” ×©×ª×›×œ×•×œ ××ª ×›×œ ×¡×•×’×™ ×”× ×ª×™× ×” ×”××¤×©×¨×™×™× ×ª××¤×©×¨ ×œ× ×•\n            ×œ×—×¡×•×š ×•×œ×™×™×¢×œ ××ª ×›×œ ×ª×”×œ×™×š ×”× ×ª×™× ×”, ×•×‘×›×š ×œ×ª×¨×•× ×™×•×ª×¨.\n          </Text>\n        </View>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>×§×”×™×œ×”</Text>\n          <Text style={localStyles.paragraph}>\n            ×™×¦×™×¨×ª ×§×”×™×œ×” ×—×–×§×” ×•××’×•×‘×©×ª ×‘×ª×•×š ×”×¤×œ×˜×¤×•×¨××” ×ª××¤×©×¨ ×œ× ×• ×œ×”×’×©×™× ××ª ×”×¨×¢×™×•×Ÿ\n            ×”××•×˜×•×¤×™ ×©×œ ×—×™×™× ×§×™×‘×•×¦×™×™× ×‘×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™ ××ª×§×“×.\n          </Text>\n        </View>\n\n        {/* Why Now? */}\n        <Text style={localStyles.sectionTitle}>\n          ××“×•×¢ ×“×•×•×§× ×¢×›×©×™×•? ××™×¦×•×™ ×”×¨×©×ª×•×ª ×”×—×‘×¨×ª×™×•×ª ×•×—×•×¡×¨ ×§×”×™×œ×ª×™×•×ª\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×›×‘×¨ ×©× ×™× ×©×™×© ×œ××“× ××ª ×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×”×¨×¦×•×Ÿ ×œ×§×”×™×œ×” ×•×”×¨×¦×•×Ÿ ×œ×—×•×¤×©×™×•×ª, ×”×¨×™ ×›×œ\n          ×§×”×™×œ×” ×¢× ×”×’×‘×œ×•×ª ×•××•×¡×›××•×ª ××©×œ×”.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª\" ×”××œ×”.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          KC ×‘××” ×œ×”×¦×™×¢ ×¨×©×ª ×—×‘×¨×ª×™×ª ×œ×œ× ×¤×¨×¡×•××•×ª ×•×œ×œ× ×ª×•×›×Ÿ ×—×•××¨×™/×¤×•×’×¢× ×™. ×¤×œ×˜×¤×•×¨××”\n          ×”××§×“×©×ª ×§×”×™×œ×ª×™×•×ª ×•×©×™×ª×•×£. KC ×‘××” ×œ×”×¦×™×¢ ×¤×œ×˜×¤×•×¨××”, ××™×Ÿ ×¨×©×ª ×—×‘×¨×ª×™×ª, ××©×¨ ××¦×“\n          ××—×“ ×©××” ×“×’×© ×¢×œ ×‘×™×—×“ ×•××¦×“ ×©× ×™ ×“×’×© ×¢×œ ×—×•×¤×© ×•×œ×™×‘×¨×œ×™×•×ª.\n        </Text>\n\n        {/* Economic Model */}\n        <Text style={localStyles.sectionTitle}>××•×“×œ ×›×œ×›×œ×™</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×ª×¨×•××•×ª ×™×©×™×¨×•×ª: ×›××• ×›×œ ×¢××•×ª×”, × ×•×›×œ ×œ×§×‘×œ ×ª×¨×•××•×ª ×™×©×™×¨×•×ª. ××›×¡×£ ×•×¨×”×™×˜×™×,\n            ×•×¢×“ ×™×™×¢×•×¥ ××¨×’×•× ×™ ×•×¢×¡×§×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¢××œ×ª ×¤×œ×˜×¤×•×¨××”: ×›××• ×›×œ ×¤×œ×˜×¤×•×¨××” ×©× ×•×ª× ×ª ×©×™×¨×•×ª×™×, ×•×©×¨×•×ª×™ ×”×¢×‘×¨×ª ×›×¡×¤×™×\n            ×‘×¤×¨×˜, × ×•×›×œ ×œ×§×—×ª ×¢××œ×” ×¢×œ ×”×¢×‘×¨×•×ª ×›×¡×¤×™× ×“×¨×›× ×•.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×ª×©×œ×•× ××”×¢××•×ª×•×ª: ×›××• ×›×œ ×¤×œ×˜×¤×•×¨××” ×©× ×•×ª× ×ª ×©×™×¨×•×ª, × ×•×›×œ ×œ×§×—×ª ×ª×©×œ×•× ×—×•×“×©×™\n            ×¡××œ×™ ××”×¢××•×ª×•×ª, ××©×¨ ×‘×–×›×•×ª ×”×¤×œ×˜×¤×•×¨××” ×™×§×‘×œ×• ×—×©×™×¤×” ×’×“×•×œ×” ×™×•×ª×¨.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            \"×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          </Text>\n        </View>\n\n        {/* Development Model */}\n        <Text style={localStyles.sectionTitle}>××•×“×œ ×¤×™×ª×•×—</Text>\n        <Text style={localStyles.paragraph}>\n          ×œ× ×•×›×— ××•×¤×™ ×”×¤×¨×•×™×§×˜ ×¢×™×¦×‘× ×• ××•×“×œ ×¤×™×ª×•×— ××©×¨ ×™×•×›×œ ×œ×”×‘×˜×™×— ××™×›×•×ª ×‘×¢×œ×•×™×•×ª\n          × ××•×›×•×ª.\n        </Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×™×ª×•×— ×‘×¢×–×¨×ª ××ª× ×“×‘×™×: ×‘×¢×–×¨×ª ×’×œ ×’×“×•×œ ×©×œ ××ª×›× ×ª×™× ×‘×ª×¢×©×™×™×” ××©×¨ ××©××™×¢×™×\n            ×§×•×œ×•×ª ×©×œ ×—×•×¡×¨ ××©××¢×•×ª ×‘××©×¨×ª× ×”× ×•×›×—×™×ª, ×‘× ×•×¡×£ ×œ×›××•×ª ×’×“×•×œ×” ×©×œ ×¡×˜×•×“× ×˜×™×\n            ×•××ª×›× ×ª×™× ××—×¨×™× ×©×™×©××—×• ×œ×ª×ª ×™×“ ×‘×¤×¨×•×™×§×˜ ×›×–×”, ×–×™×”×™× ×• ××ª ×”×¤×•×˜× ×¦×™××œ ×©×™×©\n            ×‘××¢×¨×š ××‘×•×–×¨ ×©×›×–×”.\n          </Text>\n        </View>\n        <Text style={localStyles.paragraph}>\n          ×‘×¢×–×¨×ª ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™ × ×•×›×œ ×œ× ×”×œ ×›××•×ª ×’×“×•×œ×” ×©×œ ××ª×›× ×ª×™× ×‘×¢×œ×•×™×•×ª × ××•×›×•×ª\n          ×××•×“ ×¢×“ ××¤×¡×™×•×ª, ×•×‘×›×š ×œ× ×¦×œ ××ª ×”××©××‘×™× ×•×œ×”××™×¥ ××ª ×”×¤×™×ª×•×—.\n        </Text>\n\n        {/* Initial Steps */}\n        <Text style={localStyles.sectionTitle}>×©×œ×‘×™× ×¨××©×•× ×™×</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>×”×’×“×œ×ª ×”×§×”×™×œ×”</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>××©×§×™×¢ ×¨××©×•× ×™</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>××¤×™×•×Ÿ</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>×¢×™×¦×•×‘</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>MVP (Minimum Viable Product)</Text>\n        </View>\n\n        {/* Regulations for Organizations */}\n        <Text style={localStyles.sectionTitle}>×ª×§× ×•×Ÿ ×‘×™×—×¡ ×œ××¨×’×•× ×™× ×©× ×¦×¨×£</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×•×œ×™×˜×™×§×” ×•××™×“×™××•×œ×•×’×™×” - ××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×”×™×•×ª ×¤×•×œ×™×˜×™ ×•×œ×¤×¢×•×œ ×œ×¦×•×¨×š\n            ×§×™×“×•× ××™×“×™××•×œ×•×’×™×” ××• ×œ×©×•×Ÿ ×”×¨×¢ ×œ×›×œ ×§×‘×•×¦×” ××• ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ××œ×™××•×ª ×•×”×¤×¨×ª ×–×›×•×™×•×ª ×”××“× - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×“× ××• ×œ×ª××•×š ×‘××œ×™××•×ª,\n            ×¤×©×™×–×, × ××¦×™×–×, ××• ×›×œ ×¡×•×’ ×©×œ ×”×¤×¨×ª ×–×›×•×™×•×ª ×”××“×.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×“×ª - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×“× ××• ×œ×”×¤×™×¥ ××ª ×“×¢×•×ª×™×• ×”×“×ª×™×•×ª ×‘××•×¤×Ÿ ×©×™×™×“×—×”\n            ×§×‘×•×¦×” ××• ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×¨×¡×•× ×©×§×¨×™ ××• ××–×™×§ - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×¤×¨×¡× ××™×“×¢ ×©×§×¨×™ ××• ××–×™×§ ×©×™×›×•×œ\n            ×œ×’×¨×•× × ×–×§ ×œ×¦×™×‘×•×¨ ×”×¨×—×‘ ××• ×œ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ××¨×’×•× ×™× ××¡×•×›× ×™× - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×™×™× ×§×©×¨×™× ×¢× ×§×‘×•×¦×•×ª ×”××•×›×¨×•×ª\n            ×›××¡×•×›× ×•×ª.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            × ×™×”×•×œ ×›×¡×¤×™ × ××•×ª - ×”××¨×’×•×Ÿ ×—×™×™×‘ ×œ× ×”×•×’ ×›×¨××•×™ ×‘× ×•×©× × ×™×”×•×œ ×”×›×¡×¤×™× ×•×œ×\n            ×œ×¢×©×•×ª ×©×™××•×© ×œ× ×¨××•×™ ×‘×›×¡×¤×™ ×”××¨×’×•×Ÿ ×œ××˜×¨×•×ª ××™×©×™×•×ª.\n          </Text>\n        </View>\n        <Text style={localStyles.paragraph}>\n          ×× ×• ×©×•××¨×™× ×œ×¢×¦×× ×• ××ª ×”×–×›×•×ª ×œ×¡×¨×‘ ×œ×”×¦×˜×¨×¤×•×ª ××• ×œ×”××©×™×š ×©×™×ª×•×£ ×¤×¢×•×œ×” ×¢× ×›×œ\n          ×¢××•×ª×” ××• ××¨×’×•×Ÿ ×©×™×–×“×”×” ×¢× ×›×œ ××—×ª ××”×ª× ××™× ×”××¤×•×¨×˜×™× ×œ×¢×™×œ, ×œ×¤×™ ×©×™×§×•×œ ×“×¢×ª× ×•\n          ×”×‘×œ×¢×“×™.\n        </Text>\n\n        {/* Call to Action */}\n        <Text style={localStyles.sectionTitle}>××—×¤×©×™× ××ª×›×</Text>\n        <Text style={localStyles.paragraph}>\n          ×”×¤×¨×•×™×§×˜ ×××© ×‘×ª×—×™×œ×ª ×“×¨×›×•, ×•×œ×›×Ÿ ×›×œ ×¢×–×¨×”, ×™×™×¢×•×¥ ×•××¤×™×œ×• ×‘×™×§×•×¨×ª, ××§×“×\n          ×•××©×¤×™×¢.\n        </Text>\n        <Text style={localStyles.paragraph}>×›×œ ×¢×–×¨×” ××©××¢×•×ª×™×ª.</Text>\n        <Text style={localStyles.paragraph}>×›×™ ×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ. ×–××ª ×œ× ×§×œ×™×©××”.</Text>\n\n        {/* Team Members - General Section */}\n        <Text style={localStyles.sectionTitle}>×”×¦×•×•×ª ×©×œ× ×•</Text>\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” ××•×¨×›×‘×ª ××¦×•×•×ª ××¡×•×¨ ×•××§×¦×•×¢×™ ×©×œ ×™×–××™×, ××ª×›× ×ª×™×, ××¢×¦×‘×™×\n          ×•×™×•×¢×¦×™×, ×”×¤×•×¢×œ×™× ×™×—×“ ××ª×•×š ×××•× ×” ×¢××•×§×” ×‘×—×–×•×Ÿ ×”×¤×¨×•×™×§×˜. ×× ×• ××©×œ×‘×™× ×™×“×¢\n          ×•× ×™×¡×™×•×Ÿ ×××’×•×•×Ÿ ×ª×—×•××™× ×›×“×™ ×œ×‘× ×•×ª ×¤×œ×˜×¤×•×¨××” ×—×–×§×” ×•×™×¦×™×‘×”, ×”×××•×§×“×ª ×‘×¦×¨×›×™\n          ×”×§×”×™×œ×”. ×”×¦×•×•×ª ×©×œ× ×• ××—×•×™×‘ ×œ×”×¦×œ×—×ª ×”×¤×¨×•×™×§×˜ ×•×œ×§×™×“×•× ×¢×¨×›×™ ×”× ×ª×™× ×”\n          ×•×”×©×™×ª×•×¤×™×•×ª, ×•×”×•× ×¤×•×¢×œ ×‘×©×§×™×¤×•×ª ××œ××” ×•×‘×©×™×ª×•×£ ×¤×¢×•×œ×” ×¢× ×”××ª× ×“×‘×™× ×”×¨×‘×™×\n          ×©××¦×˜×¨×¤×™× ×œ×“×¨×š.\n        </Text>\n\n        {/* Contact Information (Optional - you might prefer a separate screen) */}\n        <Text style={localStyles.sectionTitle}>×¦×¨×• ×§×©×¨</Text>\n        <Text style={localStyles.paragraph}>\n          ×œ×›×œ ×©××œ×”, ×¨×¢×™×•×Ÿ ××• ×©×™×ª×•×£ ×¤×¢×•×œ×”, ××œ ×ª×”×¡×¡×• ×œ×™×¦×•×¨ ×§×©×¨. ×× ×• × ×©××— ×œ×©××•×¢\n          ××›×!\n        </Text>\n        <View style={localStyles.contactInfo}>\n          <Text style={localStyles.contactText}>\n            ××™×™×œ ×›×œ×œ×™: info@karmacommunity.org\n          </Text>\n          <Text style={localStyles.contactText}>×˜×œ×¤×•×Ÿ: 123-456-7890</Text>\n          <Text style={localStyles.contactText}>\n            ×›×ª×•×‘×ª: ×¨×—×•×‘ ×”×“×•×’××” 1, ×¢×™×¨ ×”×“×•×’××”\n          </Text>\n        </View>\n              </ScrollContainer>\n      </ScreenWrapper>\n    </>\n  )\n}); // Closing memo parenthesis and semicolon\n\nexport default AboutKarmaCommunityScreen; // Export the const component\n\nconst localStyles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    marginTop: Platform.OS === 'android' ? 30 : 0,\n    backgroundColor: colors.backgroundSecondary\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    flex: 1,\n    padding: 15,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  mainTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 10,\n    color: colors.textPrimary\n  },\n  subtitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    textAlign: 'center',\n    marginBottom: 20,\n    color: colors.textSecondary\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginTop: 25,\n    marginBottom: 15,\n    color: colors.textPrimary,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    paddingBottom: 5\n  },\n  paragraph: {\n    fontSize: FontSizes.body,\n    textAlign: 'center',\n    lineHeight: 24,\n    marginBottom: 15,\n    color: colors.textPrimary\n  },\n  bulletPointContainer: {\n    flexDirection: 'row-reverse',\n    marginBottom: 8\n  },\n  bulletPoint: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    marginRight: 5,\n    color: colors.textPrimary // Using textPrimary\n  },\n  bulletText: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    textAlign: 'center',\n    lineHeight: 24,\n    color: colors.textPrimary // Using textPrimary\n  },\n  challengeSection: {\n    marginBottom: 20,\n    paddingRight: 10,\n    borderRightWidth: 3,\n    borderRightColor: colors.danger // Using danger for challenges\n  },\n  challengeTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    textAlign: 'right',\n    marginBottom: 8,\n    color: colors.danger // Using danger for challenges\n  },\n  solutionSection: {\n    marginBottom: 20,\n    paddingRight: 10,\n    borderRightWidth: 3,\n    borderRightColor: colors.accent // Using accent for solutions (green)\n  },\n  solutionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    textAlign: 'right',\n    marginBottom: 8,\n    color: colors.accent // Using accent for solutions\n  },\n  contactInfo: {\n    marginBottom: 15,\n    padding: 10,\n    backgroundColor: colors.offWhite, // Using offWhite\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: colors.border // Using border color\n  },\n  contactText: {\n    fontSize: FontSizes.body,\n    textAlign: 'right',\n    lineHeight: 22,\n    color: colors.textPrimary // Using textPrimary\n  },\n})","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/ChatListScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/SettingsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/feed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/miblanchard-slider.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/navigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/RTLConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/__tests__/authService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/apiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/authTestUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":417,"column":28,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":417,"endColumn":80}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Platform } from 'react-native';\nimport { logger } from './loggerService';\n\nexport interface AuthTestResult {\n  test: string;\n  status: 'pass' | 'fail' | 'warning';\n  message: string;\n  details?: any;\n}\n\nexport interface AuthTestSuite {\n  timestamp: string;\n  platform: string;\n  results: AuthTestResult[];\n  summary: {\n    total: number;\n    passed: number;\n    failed: number;\n    warnings: number;\n  };\n}\n\nexport class AuthenticationTester {\n  \n  /**\n   * Run comprehensive authentication tests\n   */\n  static async runAuthTests(config?: {\n    webClientId?: string;\n    iosClientId?: string;\n    androidClientId?: string;\n    redirectUri?: string;\n  }): Promise<AuthTestSuite> {\n    const results: AuthTestResult[] = [];\n    \n    logger.info('AuthTester', 'Starting authentication test suite');\n    \n    // Test 1: Environment Variables\n    results.push(this.testEnvironmentVariables());\n    \n    // Test 2: Client ID Configuration\n    results.push(this.testClientIdConfiguration(config));\n    \n    // Test 3: Redirect URI Format\n    if (config?.redirectUri) {\n      results.push(this.testRedirectUriFormat(config.redirectUri));\n    }\n    \n    // Test 4: Platform-specific Configuration\n    results.push(this.testPlatformConfiguration(config));\n    \n    // Test 5: Network Connectivity\n    const networkTest = await this.testNetworkConnectivity();\n    results.push(networkTest);\n    \n    // Test 6: Google OAuth Endpoints\n    const googleTest = await this.testGoogleOAuthEndpoints();\n    results.push(googleTest);\n    \n    // Test 7: JWT Validation\n    results.push(this.testJWTValidation());\n    \n    // Test 8: Storage Access\n    const storageTest = await this.testStorageAccess();\n    results.push(storageTest);\n    \n    const summary = this.calculateSummary(results);\n    \n    const testSuite: AuthTestSuite = {\n      timestamp: new Date().toISOString(),\n      platform: Platform.OS,\n      results,\n      summary\n    };\n    \n    logger.info('AuthTester', 'Authentication test suite completed', {\n      summary,\n      failedTests: results.filter(r => r.status === 'fail').map(r => r.test)\n    });\n    \n    return testSuite;\n  }\n  \n  /**\n   * Test environment variables\n   */\n  private static testEnvironmentVariables(): AuthTestResult {\n    const requiredVars = [\n      'EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID',\n      'EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID', \n      'EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID'\n    ];\n    \n    const missingVars = requiredVars.filter(varName => {\n      const value = process.env[varName];\n      return !value || value.length === 0;\n    });\n    \n    if (missingVars.length === requiredVars.length) {\n      return {\n        test: 'Environment Variables',\n        status: 'fail',\n        message: 'All required environment variables are missing',\n        details: { missingVars }\n      };\n    }\n    \n    if (missingVars.length > 0) {\n      return {\n        test: 'Environment Variables',\n        status: 'warning',\n        message: `Some environment variables are missing: ${missingVars.join(', ')}`,\n        details: { missingVars }\n      };\n    }\n    \n    return {\n      test: 'Environment Variables',\n      status: 'pass',\n      message: 'All environment variables are present'\n    };\n  }\n  \n  /**\n   * Test client ID configuration\n   */\n  private static testClientIdConfiguration(config?: any): AuthTestResult {\n    const { webClientId, iosClientId, androidClientId } = config || {};\n    \n    const issues = [];\n    \n    // Check format of client IDs\n    if (webClientId && !this.isValidGoogleClientId(webClientId)) {\n      issues.push('Web client ID has invalid format');\n    }\n    \n    if (iosClientId && !this.isValidGoogleClientId(iosClientId)) {\n      issues.push('iOS client ID has invalid format');\n    }\n    \n    if (androidClientId && !this.isValidGoogleClientId(androidClientId)) {\n      issues.push('Android client ID has invalid format');\n    }\n    \n    // Platform-specific checks\n    const currentPlatform = Platform.OS;\n    let hasRequiredClientId = false;\n    \n    if (currentPlatform === 'web' && webClientId) hasRequiredClientId = true;\n    if (currentPlatform === 'ios' && (iosClientId || webClientId)) hasRequiredClientId = true;\n    if (currentPlatform === 'android' && (androidClientId || webClientId)) hasRequiredClientId = true;\n    \n    if (!hasRequiredClientId) {\n      issues.push(`No valid client ID for current platform: ${currentPlatform}`);\n    }\n    \n    if (issues.length > 0) {\n      return {\n        test: 'Client ID Configuration',\n        status: 'fail',\n        message: issues.join('; '),\n        details: { issues, currentPlatform }\n      };\n    }\n    \n    return {\n      test: 'Client ID Configuration',\n      status: 'pass',\n      message: 'Client IDs are properly configured'\n    };\n  }\n  \n  /**\n   * Test redirect URI format\n   */\n  private static testRedirectUriFormat(redirectUri: string): AuthTestResult {\n    if (!redirectUri) {\n      return {\n        test: 'Redirect URI Format',\n        status: 'fail',\n        message: 'Redirect URI is not provided'\n      };\n    }\n    \n    const issues = [];\n    \n    if (Platform.OS === 'web') {\n      // Web redirect URI should be a valid HTTPS URL\n      try {\n        const url = new URL(redirectUri);\n        if (url.protocol !== 'https:' && url.hostname !== 'localhost') {\n          issues.push('Web redirect URI should use HTTPS in production');\n        }\n        if (!url.pathname.includes('oauth')) {\n          issues.push('Redirect URI should contain oauth-related path');\n        }\n      } catch (error) {\n        issues.push('Redirect URI is not a valid URL');\n      }\n    } else {\n      // Mobile redirect URI should use custom scheme\n      if (!redirectUri.includes('://')) {\n        issues.push('Mobile redirect URI should use custom scheme');\n      }\n    }\n    \n    if (issues.length > 0) {\n      return {\n        test: 'Redirect URI Format',\n        status: 'warning',\n        message: issues.join('; '),\n        details: { redirectUri, platform: Platform.OS }\n      };\n    }\n    \n    return {\n      test: 'Redirect URI Format',\n      status: 'pass',\n      message: 'Redirect URI format is valid'\n    };\n  }\n  \n  /**\n   * Test platform-specific configuration\n   */\n  private static testPlatformConfiguration(config?: any): AuthTestResult {\n    const platform = Platform.OS;\n    const { webClientId, iosClientId, androidClientId } = config || {};\n    \n    let hasCorrectConfig = false;\n    let message = '';\n    \n    switch (platform) {\n      case 'web':\n        hasCorrectConfig = !!webClientId;\n        message = hasCorrectConfig ? \n          'Web platform properly configured' : \n          'Web platform missing webClientId';\n        break;\n      case 'ios':\n        hasCorrectConfig = !!(iosClientId || webClientId);\n        message = hasCorrectConfig ? \n          'iOS platform properly configured' : \n          'iOS platform missing iosClientId (webClientId can be fallback)';\n        break;\n      case 'android':\n        hasCorrectConfig = !!(androidClientId || webClientId);\n        message = hasCorrectConfig ? \n          'Android platform properly configured' : \n          'Android platform missing androidClientId (webClientId can be fallback)';\n        break;\n      default:\n        return {\n          test: 'Platform Configuration',\n          status: 'fail',\n          message: `Unsupported platform: ${platform}`\n        };\n    }\n    \n    return {\n      test: 'Platform Configuration',\n      status: hasCorrectConfig ? 'pass' : 'fail',\n      message,\n      details: { platform, hasCorrectConfig }\n    };\n  }\n  \n  /**\n   * Test network connectivity (browser-safe)\n   */\n  private static async testNetworkConnectivity(): Promise<AuthTestResult> {\n    // Skip direct network tests in browser to avoid CORS issues\n    if (typeof window !== 'undefined') {\n      // In browser, we assume network is working if we can reach this point\n      return {\n        test: 'Network Connectivity',\n        status: 'pass',\n        message: 'Browser environment detected - network connectivity assumed (page loaded successfully)'\n      };\n    }\n    \n    try {\n      // Test basic internet connectivity (Node.js environment)\n      const response = await fetch('https://www.google.com', {\n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      \n      if (response.ok) {\n        return {\n          test: 'Network Connectivity',\n          status: 'pass',\n          message: 'Network connectivity is working'\n        };\n      } else {\n        return {\n          test: 'Network Connectivity',\n          status: 'fail',\n          message: `Network request failed with status: ${response.status}`\n        };\n      }\n    } catch (error) {\n      return {\n        test: 'Network Connectivity',\n        status: 'fail',\n        message: `Network connectivity test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Test Google OAuth endpoints (browser-safe)\n   */\n  private static async testGoogleOAuthEndpoints(): Promise<AuthTestResult> {\n    // Skip network tests in browser to avoid CORS issues\n    if (typeof window !== 'undefined') {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'pass',\n        message: 'Network endpoint tests skipped in browser environment (CORS protection)'\n      };\n    }\n    \n    const endpointsToTest = [\n      'https://accounts.google.com/.well-known/openid_configuration',\n      'https://oauth2.googleapis.com/tokeninfo'\n    ];\n    \n    const results = [];\n    \n    for (const endpoint of endpointsToTest) {\n      try {\n        const response = await fetch(endpoint, { \n          method: 'HEAD',\n          mode: 'no-cors' // This will prevent CORS errors but limit response info\n        });\n        results.push({\n          endpoint,\n          status: 'accessible', // no-cors mode doesn't give us status\n          statusCode: 'unknown'\n        });\n      } catch (error) {\n        results.push({\n          endpoint,\n          status: 'error',\n          error: String(error)\n        });\n      }\n    }\n    \n    const failedEndpoints = results.filter(r => r.status === 'error');\n    \n    if (failedEndpoints.length === 0) {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'pass',\n        message: 'Google OAuth endpoints appear to be accessible'\n      };\n    } else {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'warning',\n        message: `Some network issues detected: ${failedEndpoints.map(e => e.endpoint).join(', ')}`,\n        details: { results }\n      };\n    }\n  }\n  \n  /**\n   * Test JWT validation functionality\n   */\n  private static testJWTValidation(): AuthTestResult {\n    // Test with a mock JWT token structure\n    const validJWTStructure = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiZW1haWwiOiJqb2huQGV4YW1wbGUuY29tIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjk5OTk5OTk5OTl9.invalid_signature';\n    const invalidJWT = 'invalid.jwt.token';\n    const emptyJWT = '';\n    \n    try {\n      // Test valid structure\n      const parts = validJWTStructure.split('.');\n      if (parts.length !== 3) {\n        throw new Error('Valid JWT should have 3 parts');\n      }\n      \n      // Test payload parsing\n      const payload = JSON.parse(atob(parts[1]));\n      if (!payload.sub || !payload.email) {\n        throw new Error('JWT payload should contain sub and email');\n      }\n      \n      return {\n        test: 'JWT Validation',\n        status: 'pass',\n        message: 'JWT validation functionality is working'\n      };\n    } catch (error) {\n      return {\n        test: 'JWT Validation',\n        status: 'fail',\n        message: `JWT validation test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Test storage access\n   */\n  private static async testStorageAccess(): Promise<AuthTestResult> {\n    try {\n      // Test AsyncStorage functionality\n      const testKey = 'auth_test_key';\n      const testValue = 'auth_test_value';\n      \n      // Import AsyncStorage dynamically\n      const AsyncStorage = require('@react-native-async-storage/async-storage').default;\n      \n      await AsyncStorage.setItem(testKey, testValue);\n      const retrievedValue = await AsyncStorage.getItem(testKey);\n      await AsyncStorage.removeItem(testKey);\n      \n      if (retrievedValue === testValue) {\n        return {\n          test: 'Storage Access',\n          status: 'pass',\n          message: 'Storage access is working properly'\n        };\n      } else {\n        return {\n          test: 'Storage Access',\n          status: 'fail',\n          message: 'Storage read/write test failed'\n        };\n      }\n    } catch (error) {\n      return {\n        test: 'Storage Access',\n        status: 'fail',\n        message: `Storage access test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Validate Google Client ID format\n   */\n  private static isValidGoogleClientId(clientId: string): boolean {\n    // Google Client IDs have specific format: numbers-random.apps.googleusercontent.com\n    const googleClientIdPattern = /^\\d+-[\\w\\d]+\\.apps\\.googleusercontent\\.com$/;\n    return googleClientIdPattern.test(clientId);\n  }\n  \n  /**\n   * Calculate test summary\n   */\n  private static calculateSummary(results: AuthTestResult[]) {\n    const total = results.length;\n    const passed = results.filter(r => r.status === 'pass').length;\n    const failed = results.filter(r => r.status === 'fail').length;\n    const warnings = results.filter(r => r.status === 'warning').length;\n    \n    return { total, passed, failed, warnings };\n  }\n}\n\n/**\n * Run quick authentication diagnostics\n */\nexport const runAuthDiagnostics = async (config?: any): Promise<AuthTestSuite> => {\n  logger.info('AuthDiagnostics', 'Running authentication diagnostics...');\n  \n  const testSuite = await AuthenticationTester.runAuthTests(config);\n  \n  // Log results\n  console.group('ğŸ” Authentication Test Results');\n  console.log(`Platform: ${testSuite.platform}`);\n  console.log(`Timestamp: ${testSuite.timestamp}`);\n  console.log(`Summary: ${testSuite.summary.passed}/${testSuite.summary.total} passed, ${testSuite.summary.failed} failed, ${testSuite.summary.warnings} warnings`);\n  \n  testSuite.results.forEach(result => {\n    const icon = result.status === 'pass' ? 'âœ…' : result.status === 'fail' ? 'âŒ' : 'âš ï¸';\n    console.log(`${icon} ${result.test}: ${result.message}`);\n    if (result.details) {\n      console.log('   Details:', result.details);\n    }\n  });\n  \n  console.groupEnd();\n  \n  // Alert if critical issues found\n  const criticalFailures = testSuite.results.filter(r => \n    r.status === 'fail' && \n    ['Client ID Configuration', 'Platform Configuration', 'Network Connectivity'].includes(r.test)\n  );\n  \n  if (criticalFailures.length > 0) {\n    logger.error('AuthDiagnostics', 'Critical authentication issues detected', {\n      criticalFailures: criticalFailures.map(f => ({ test: f.test, message: f.message }))\n    });\n  } else {\n    logger.info('AuthDiagnostics', 'No critical authentication issues detected');\n  }\n  \n  return testSuite;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/bookmarksService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/bubbles_Data.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/charitiesStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/chatService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/config.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/databaseService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/dbCollections.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/dbConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/donationResources.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/enhancedDatabaseService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/fileService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/firebaseClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/firestoreAdapter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/followService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/itemCategoryUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/linkingConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/loggerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationGuards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationPersistence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationStateValidator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/notificationService.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":11,"column":21,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":11,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/postsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/profileUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/restAdapter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/statsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/storageService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/toastService.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/versionChecker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]

[{"filePath":"/Users/navesarussi/KC/DEV/MVP/.expo/types/router.d.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'T' is defined but never used.","line":8,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/App.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":80,"column":27,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":80,"endColumn":65,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":284,"column":47,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":284,"endColumn":85,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app.config.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":21,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":6,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":10,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":37}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Read version from package.json\nconst packageJson = require('./package.json');\nconst APP_VERSION = packageJson.version;\n\n// Environment detection\nconst ENVIRONMENT = process.env.EXPO_PUBLIC_ENVIRONMENT || 'production';\nconst IS_DEV = ENVIRONMENT === 'development';\n\n// API URL based on environment\nconst DEFAULT_API_BASE_URL = process.env.EXPO_PUBLIC_API_BASE_URL ||\n  (IS_DEV\n    ? 'https://kc-mvp-server-dev.up.railway.app'\n    : 'https://kc-mvp-server-production.up.railway.app');\n\n// Define colors locally for config usage (colors.tsx cannot be imported in JS config)\nconst colors = {\n  secondary: '#FFB6C1',     // Soft Pink - Secondary brand color\n  backgroundTertiary: '#E3F2FD', // Very light blue for highlights\n};\n\n\n\nexport default {\n  expo: {\n    name: IS_DEV ? \"KC - DEV ğŸŸ¢\" : \"KC - ×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™\",\n    slug: \"karma-community\",\n    version: APP_VERSION,\n    orientation: \"portrait\",\n    icon: \"./assets/images/×œ×•×’×•_×—×“×©_×©×—×•×¨.png\",\n    scheme: \"karma-community\",\n    userInterfaceStyle: \"automatic\",\n    // ×©××™×¨×” ×¢×œ primaryColor ×©×”×™×” ×‘-app.json\n    primaryColor: colors.secondary,\n    splash: {\n      image: \"./assets/images/×œ×•×’×•_×—×“×©_×©×—×•×¨.png\",\n      resizeMode: \"contain\",\n      backgroundColor: colors.backgroundTertiary\n    },\n    assetBundlePatterns: [\n      \"**/*\"\n    ],\n    ios: {\n      supportsTablet: true,\n      bundleIdentifier: \"com.navesarussi1.KarmaCommunity\",\n      // Associated domains for Universal Links\n      associatedDomains: [\n        \"applinks:karma-community-kc.com\",\n        \"applinks:www.karma-community-kc.com\"\n      ],\n      // ××™×—×•×“ ×”×¨×©××•×ª ×•Ö¾ATS ×©×”×™×• ×‘-app.json\n      infoPlist: {\n        NSAppTransportSecurity: {\n          NSAllowsArbitraryLoads: false,\n          NSAllowsLocalNetworking: true\n        },\n        NSCameraUsageDescription: \"×”××¤×œ×™×§×¦×™×” ×–×§×•×§×” ×œ×’×™×©×” ×œ××¦×œ××” ×›×“×™ ×œ×¦×œ× ×ª××•× ×•×ª ×•×¡×¨×˜×•× ×™×\",\n        NSMicrophoneUsageDescription: \"×”××¤×œ×™×§×¦×™×” ×–×§×•×§×” ×œ×’×™×©×” ×œ××™×§×¨×•×¤×•×Ÿ ×œ×¦×•×¨×š ×”×§×œ×˜×ª ××•×“×™×•\",\n        NSPhotoLibraryUsageDescription: \"×”××¤×œ×™×§×¦×™×” ×–×§×•×§×” ×œ×’×™×©×” ×œ×¡×¤×¨×™×™×ª ×”×ª××•× ×•×ª ×›×“×™ ×œ×‘×—×•×¨ ×•×œ×”×¢×œ×•×ª ×§×‘×¦×™×\"\n      }\n    },\n    android: {\n      adaptiveIcon: {\n        foregroundImage: \"./assets/images/×œ×•×’×•_×—×“×©_×©×—×•×¨.png\",\n        backgroundColor: colors.backgroundTertiary\n      },\n      package: \"com.navesarussi1.KarmaCommunity\",\n      intentFilters: [\n        {\n          action: \"VIEW\",\n          autoVerify: true,\n          data: [\n            {\n              scheme: \"com.navesarussi1.KarmaCommunity\"\n            },\n            {\n              scheme: \"karma-community\"\n            }\n          ],\n          category: [\"BROWSABLE\", \"DEFAULT\"]\n        }\n      ],\n      // ×”×¨×©××•×ª ×©×”×•×’×“×¨×• ×‘-app.json\n      permissions: [\n        \"android.permission.VIBRATE\",\n        \"android.permission.RECEIVE_BOOT_COMPLETED\",\n        \"android.permission.POST_NOTIFICATIONS\",\n        \"android.permission.WAKE_LOCK\",\n        \"android.permission.FOREGROUND_SERVICE\",\n        \"android.permission.FOREGROUND_SERVICE_DATA_SYNC\"\n      ]\n    },\n    web: {\n      bundler: \"metro\",\n      output: \"static\",\n      favicon: \"./assets/images/favicon.png\",\n      name: \"KC - ×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™\",\n      shortName: \"KC\",\n      description: \"×¤×œ×˜×¤×•×¨××” ×—×™× ××™×ª ×œ×œ× ××˜×¨×•×ª ×¨×•×•×— ×œ×§×”×™×œ×” ×”×™×©×¨××œ×™×ª\",\n      lang: \"he\",\n      dir: \"rtl\",\n      themeColor: colors.secondary,\n      backgroundColor: colors.backgroundTertiary,\n      // ×”×’×“×¨×•×ª meta ×•-build ××”-app.json\n      meta: {\n        viewport: \"width=device-width, initial-scale=1, shrink-to-fit=no\"\n      },\n      build: {\n        babel: {\n          include: [\"@expo/vector-icons\"]\n        }\n      }\n    },\n    plugins: [\n      \"expo-router\",\n      [\n        \"expo-notifications\",\n        {\n          icon: \"./assets/images/×œ×•×’×•_×—×“×©_×©×—×•×¨.png\",\n          color: colors.secondary,\n          mode: \"production\",\n          androidMode: \"default\",\n          androidCollapsedTitle: \"×”×ª×¨××” ×—×“×©×”\"\n        }\n      ]\n    ],\n    experiments: {\n      // ×‘-app.json ×”×™×” false; ×× ×• ×©×•××¨×™× ×¢×œ true ×œ×©×™×œ×•×‘ ×¢× expo-router\n      typedRoutes: true\n    },\n    // ×©××™×¨×” ×¢×œ owner ×-app.json\n    owner: \"navesarussi1\",\n    extra: {\n      EXPO_PUBLIC_ENVIRONMENT: ENVIRONMENT,\n      EXPO_PUBLIC_API_BASE_URL: DEFAULT_API_BASE_URL,\n      EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID: \"430191522654-jno2tkl1dotil0mkf4h4hahfk4e4gas8.apps.googleusercontent.com\",\n      EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID: \"430191522654-o70t2qnqc4bvpvmbpak7unog7pvp9c95.apps.googleusercontent.com\",\n      EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID: \"430191522654-q05j71a8lu3e1vgf75c2r2jscgckb4mm.apps.googleusercontent.com\",\n      EXPO_PUBLIC_USE_BACKEND: \"1\",\n      EXPO_PUBLIC_USE_FIRESTORE: \"0\",\n      EXPO_PUBLIC_ADMIN_EMAILS: \"navesarussi@gmail.com\",\n      EXPO_PUBLIC_FIREBASE_API_KEY: \"AIzaSyCDwgAVr5IbjXe2vqSEacn_p-ruATfvqIU\",\n      EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN: \"karma-community-app.firebaseapp.com\",\n      EXPO_PUBLIC_FIREBASE_PROJECT_ID: \"karma-community-app\",\n      EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET: \"karma-community-app.firebasestorage.app\",\n      EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: \"1074950569654\",\n      EXPO_PUBLIC_FIREBASE_APP_ID: \"1:1074950569654:web:490bfd5ab95d10b577f017\",\n      EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID: \"G-20MFNZQS4R\",\n      firebase: {\n        prod: {\n          EXPO_PUBLIC_FIREBASE_API_KEY: \"AIzaSyCDwgAVr5IbjXe2vqSEacn_p-ruATfvqIU\",\n          EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN: \"karma-community-app.firebaseapp.com\",\n          EXPO_PUBLIC_FIREBASE_PROJECT_ID: \"karma-community-app\",\n          EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET: \"karma-community-app.firebasestorage.app\",\n          EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: \"1074950569654\",\n          EXPO_PUBLIC_FIREBASE_APP_ID: \"1:1074950569654:web:490bfd5ab95d10b577f017\",\n          EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID: \"G-20MFNZQS4R\"\n        },\n        dev: {\n          EXPO_PUBLIC_FIREBASE_API_KEY: \"AIzaSyCDwgAVr5IbjXe2vqSEacn_p-ruATfvqIU\",\n          EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN: \"karma-community-app.firebaseapp.com\",\n          EXPO_PUBLIC_FIREBASE_PROJECT_ID: \"karma-community-app\",\n          EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET: \"karma-community-app.firebasestorage.app\",\n          EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: \"1074950569654\",\n          EXPO_PUBLIC_FIREBASE_APP_ID: \"1:1074950569654:web:490bfd5ab95d10b577f017\",\n          EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID: \"G-20MFNZQS4R\"\n        }\n      },\n      eas: {\n        projectId: \"e9adde31-7801-4e3c-a709-2454fe511c24\"\n      }\n    }\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/_layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":4,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[253,256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[253,256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Legacy Expo Router tabs layout placeholder; not used in current navigation.\n// Deprecated: expo-router layout is not used anymore. Left to avoid runtime import errors.\nexport default function TabLayout() { return null as any; }","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/explore.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/(tabs)/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/+not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/_layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":4,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[284,287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[284,287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Legacy Expo Router root layout placeholder; not used in current navigation (kept to avoid import errors).\n// Deprecated: expo-router layout is not used anymore. Left to avoid runtime import errors.\nexport default function RootLayout() { return null as any; }","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/i18n.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":4,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[204,207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[204,207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Localization' is assigned a value but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[512,515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[512,515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[533,536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[533,536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n// Safe import for expo-localization to avoid native module crash on platforms/builds where it's not linked\nlet Localization: any;\ntry {\n   \n  Localization = require('expo-localization');\n} catch (error) {\n  Localization = null;\n}\nimport { I18nManager } from 'react-native';\n\n// Load unified resources per language\nimport he_all from '../locales/he.json';\nimport en_all from '../locales/en.json';\n\nconst resources = {\n  he: he_all as any,\n  en: en_all as any,\n};\n\nconst initialLang = 'he';\n\nif (I18nManager.isRTL !== (initialLang === 'he')) {\n  I18nManager.allowRTL(initialLang === 'he');\n  I18nManager.forceRTL(initialLang === 'he');\n}\n\ni18n\n  .use(initReactI18next)\n  .init({\n    resources,\n    lng: initialLang,\n    fallbackLng: 'en',\n    ns: ['common', 'home', 'profile', 'donations', 'notifications', 'auth', 'errors', 'buttons', 'labels', 'settings', 'comments', 'search', 'bookmarks', 'trump', 'chat', 'landing', 'quickMessage'],\n    defaultNS: 'common',\n    compatibilityJSON: 'v4',\n    interpolation: {\n      escapeValue: false,\n    },\n    returnEmptyString: false,\n  });\n\nexport default i18n;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/app/oauthredirect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/assets/images.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/babel.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Babel configuration for Expo app with module resolver and Reanimated plugin.\n// - Notes: Aliases `tslib` to CJS build to ensure named exports, and enables Reanimated globals.\n// IMPORTANT: react-native-reanimated/plugin MUST be last in the plugins array\nmodule.exports = function(api) {\n  api.cache(true); // Re-enable cache for performance\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: [\n      // CRITICAL: react-native-reanimated/plugin MUST be the last plugin\n      [\n        'react-native-reanimated/plugin',\n        {\n          // Disable globals to avoid circular dependency issues on web\n          globals: [],\n        },\n      ],\n    ],\n  };\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/DonationsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2997,3000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2997,3000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3026,3029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3026,3029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobileWebView' is assigned a value but never used.","line":129,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9842,9845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9842,9845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10807,10810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10807,10810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardPadding' is assigned a value but never used.","line":204,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":204,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14427,14430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14427,14430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":314,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16298,16301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16298,16301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":330,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":330,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16952,16955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16952,16955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":366,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18087,18090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18087,18090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":370,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":370,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18269,18272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18269,18272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":404,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":404,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19319,19322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19319,19322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":405,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":405,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19366,19369],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19366,19369],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":406,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":406,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19410,19413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19410,19413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":407,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":407,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19446,19449],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19446,19449],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":408,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19485,19488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19485,19488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":409,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":409,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19513,19516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19513,19516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":410,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":410,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19547,19550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19547,19550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":412,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19567,19570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19567,19570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":523,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":523,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23245,23248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23245,23248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":524,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":524,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23279,23282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23279,23282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":525,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":525,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23326,23329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23326,23329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":527,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":527,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23346,23349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23346,23349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":539,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":539,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23717,23720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23717,23720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":540,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":540,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23750,23753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23750,23753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Entry screen for the Donations tab, surfacing category shortcuts (Popular/For You/All) and quick actions.\n// - Reached from: `DonationsStack` -> initial route 'DonationsScreen'.\n// - Provides: Navigation to category screens, tracks category analytics, persists recent categories, shows footer stats.\n// - Reads from context: `useUser()` -> isGuestMode, isRealAuth for behaviour and analytics source.\n// - Storage/services: AsyncStorage for recents; `EnhancedStatsService` or legacy `restAdapter` for analytics, `USE_BACKEND` switch.\n// - Params: None required; navigation uses route names listed in `BASE_CATEGORIES` mapping.\n\n// TODO: CRITICAL - This file is extremely long (871 lines). Split into smaller components:\n//   - CategoryGrid component for category layout\n//   - CategoryCard component for individual categories  \n//   - RecentCategoriesSection component\n//   - PopularCategoriesSection component\n//   - CategoryAnalytics service for tracking\n// TODO: Remove hardcoded category data - move to configuration service\n// TODO: Add comprehensive error handling for all async operations\n// TODO: Implement proper loading states and skeleton screens\n// TODO: Add comprehensive TypeScript interfaces instead of basic types\n// TODO: Replace fake data with real backend integration\n// TODO: Add proper caching mechanism for categories and analytics\n// TODO: Implement proper accessibility for all interactive elements\n// TODO: Add comprehensive unit tests for all category logic\nimport { logger } from '../utils/loggerService';\n// Removed console.log statements - using proper logging service\nimport React, { useCallback } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  Alert,\n  Platform,\n  Dimensions,\n} from 'react-native';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useHeaderHeight } from '@react-navigation/elements';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { DonationsStackParamList } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport GuestModeNotice from '../components/GuestModeNotice';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport { useTranslation } from 'react-i18next';\nimport { getScreenInfo, isLandscape, responsiveSpacing, scaleSize } from '../globals/responsive';\nimport { createShadowStyle } from '../globals/styles';\nimport { restAdapter } from '../utils/restAdapter';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\n// Placeholder datasets (purged demo) â€“ replace with real API data\nconst donations: any[] = [];\nconst charities: any[] = [];\n\ninterface DonationsScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n}\n\nconst ANALYTICS_USER_ID = 'global';\nconst ANALYTICS_COLLECTION = 'analytics';\nconst ANALYTICS_ITEM_PREFIX = 'category:';\n\n// TODO: URGENT - Move this hardcoded configuration to proper data service\n// TODO: Implement proper category management system with backend sync\n// TODO: Add internationalization for category names and descriptions\n// TODO: Create proper category icon management system\n// TODO: Add category access control and permissions\nconst BASE_CATEGORIES = [\n  { id: 'money',      icon: 'card-outline',        color: colors.success, bgColor: colors.successLight, screen: 'MoneyScreen' },\n  { id: 'trump',      icon: 'car-outline',         color: colors.primary,    bgColor: colors.infoLight,    screen: 'TrumpScreen' },\n  { id: 'knowledge',  icon: 'school-outline',      color: colors.warning, bgColor: colors.warning, screen: 'KnowledgeScreen' },\n  { id: 'challenges', icon: 'trophy-outline',      color: colors.warning, bgColor: colors.warning, screen: 'MyChallengesScreen' },\n  { id: 'time',       icon: 'time-outline',        color: colors.secondary,  bgColor: colors.pinkLight, screen: 'TimeScreen' },\n  { id: 'food',       icon: 'restaurant-outline',  color: colors.success, bgColor: colors.successLight, screen: 'FoodScreen' },\n  { id: 'clothes',    icon: 'shirt-outline',       color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'ClothesScreen' },\n  { id: 'books',      icon: 'library-outline',     color: colors.primary, bgColor: colors.infoLight, screen: 'BooksScreen' },\n  { id: 'items',      icon: 'cube-outline',        color: colors.secondary, bgColor: colors.pinkLight, screen: 'ItemsScreen' },\n  { id: 'furniture',  icon: 'bed-outline',         color: colors.secondary, bgColor: colors.pinkLight, screen: 'FurnitureScreen' },\n  { id: 'medical',    icon: 'medical-outline',     color: colors.error,   bgColor: colors.errorLight,   screen: 'MedicalScreen' },\n  { id: 'animals',    icon: 'paw-outline',         color: colors.success, bgColor: colors.successLight, screen: 'AnimalsScreen' },\n  { id: 'housing',    icon: 'home-outline',        color: colors.primary,    bgColor: colors.infoLight,    screen: 'HousingScreen' },\n  { id: 'support',    icon: 'heart-outline',       color: colors.secondary, bgColor: colors.pinkLight,   screen: 'SupportScreen' },\n  { id: 'education',  icon: 'book-outline',        color: colors.primary,    bgColor: colors.infoLight,    screen: 'EducationScreen' },\n  { id: 'environment',icon: 'leaf-outline',        color: colors.success, bgColor: colors.successLight, screen: 'EnvironmentScreen' },\n  { id: 'technology', icon: 'laptop-outline',      color: colors.primary,    bgColor: colors.infoLight,    screen: 'TechnologyScreen' },\n  { id: 'music',      icon: 'musical-notes-outline', color: colors.secondary,  bgColor: colors.pinkLight,    screen: 'MusicScreen' },\n  { id: 'games',      icon: 'game-controller-outline', color: colors.primary, bgColor: colors.infoLight, screen: 'GamesScreen' },\n  { id: 'riddles',    icon: 'help-circle-outline', color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'RiddlesScreen' },\n  { id: 'recipes',    icon: 'fast-food-outline',   color: colors.success, bgColor: colors.successLight, screen: 'RecipesScreen' },\n  { id: 'plants',     icon: 'flower-outline',      color: colors.success, bgColor: colors.successLight, screen: 'PlantsScreen' },\n  { id: 'waste',      icon: 'trash-outline',       color: colors.warning, bgColor: colors.warning, screen: 'WasteScreen' },\n  { id: 'art',        icon: 'color-palette-outline', color: colors.secondary,  bgColor: colors.pinkLight,    screen: 'ArtScreen' },\n  { id: 'sports',     icon: 'football-outline',    color: colors.primary,  bgColor: colors.infoLight,  screen: 'SportsScreen' },\n  { id: 'dreams',     icon: 'star-outline',        color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'DreamsScreen' },\n  { id: 'fertility',  icon: 'medkit-outline',      color: colors.error,   bgColor: colors.errorLight,   screen: 'FertilityScreen' },\n  { id: 'jobs',       icon: 'briefcase-outline',   color: colors.primary,    bgColor: colors.infoLight,    screen: 'JobsScreen' },\n  { id: 'matchmaking', icon: 'people-outline',     color: colors.secondary,    bgColor: colors.pinkLight,    screen: 'MatchmakingScreen' },\n  { id: 'mentalHealth', icon: 'pulse-outline',     color: colors.secondary,  bgColor: colors.pinkLight,  screen: 'MentalHealthScreen' },\n  { id: 'goldenAge',   icon: 'person-outline',     color: colors.warning, bgColor: colors.warning, screen: 'GoldenAgeScreen' },\n  { id: 'languages',   icon: 'language-outline',   color: colors.primary,    bgColor: colors.infoLight,    screen: 'LanguagesScreen' },\n] as const;\n\ntype CategoryId = typeof BASE_CATEGORIES[number]['id'];\n\nconst { height: SCREEN_HEIGHT, width: SCREEN_WIDTH } = Dimensions.get('window');\n\nconst DonationsScreen: React.FC<DonationsScreenProps> = ({ navigation }) => {\n  // TODO: Extract state management to custom hooks (useDonationsState, useCategoryAnalytics)\n  // TODO: Implement proper state validation and error boundaries\n  // TODO: Add comprehensive performance optimization with React.memo and useMemo\n  // TODO: Remove Hebrew comment - implement proper internationalization\n  const tabBarHeight = useBottomTabBarHeight();\n  const headerHeight = useHeaderHeight();\n  const insets = useSafeAreaInsets();\n  const { isGuestMode, isRealAuth } = useUser();\n  const { t } = useTranslation(['donations','common']);\n\n  // ×—×™×©×•×‘ ××™×“×•×ª responsive ×œ×›×¨×˜×™×¡×™×\n  const { isTablet: isTabletScreen, isDesktop: isDesktopScreen } = getScreenInfo();\n  const landscapeMode = isLandscape();\n  \n  // Simplified responsive sizing for mobile web\n  const availableHeight = SCREEN_HEIGHT - (insets?.top ?? 0) - (insets?.bottom ?? 0) - (tabBarHeight ?? 0) - (headerHeight ?? 0);\n  const isMobileWebView = Platform.OS === 'web' && SCREEN_WIDTH <= 768;\n  const isCompact = availableHeight < 600;\n\n  useFocusEffect(\n    useCallback(() => {\n      // Analytics tracking if needed\n      logger.info('DonationsScreen', 'Screen focused');\n    }, [])\n  );\n\n  const getCategoryText = (id: CategoryId) => ({\n    title: t(`donations:categories.${id}.title`),\n    subtitle: t(`donations:categories.${id}.subtitle`),\n    description: t(`donations:categories.${id}.description`),\n  });\n\n  const incrementCategoryCounter = async (categoryId: string) => {\n    try {\n      if (USE_BACKEND && isRealAuth) {\n        // Use enhanced stats service with user tracking\n        await EnhancedStatsService.trackCategoryView(categoryId);\n      } else {\n        // Fallback to legacy analytics\n        const itemId = `${ANALYTICS_ITEM_PREFIX}${categoryId}`;\n        const existing = await restAdapter.read<any>(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId).catch(() => null);\n        const next = { id: itemId, categoryId, count: Number(existing?.count ?? 0) + 1, updatedAt: new Date().toISOString() };\n        if (!existing) {\n          await restAdapter.create(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId, next);\n        } else {\n          await restAdapter.update(ANALYTICS_COLLECTION, ANALYTICS_USER_ID, itemId, next);\n        }\n      }\n    } catch (e) {\n      logger.warn('DonationsScreen', 'Failed to track category view', { error: e });\n    }\n  };\n\n  const handleCategoryPress = (category: { id: CategoryId; screen?: string }) => {\n    // Fire-and-forget analytics increment  \n    incrementCategoryCounter(category.id).catch(() => {});\n    \n    logger.info('DonationsScreen', 'Category pressed', {\n      id: category.id,\n      title: getCategoryText(category.id).title,\n      screen: category.screen\n    });\n\n    if (category.screen) {\n      (navigation as any).navigate(category.screen);\n    } else {\n      Alert.alert(\n        t('donations:comingSoonTitle'),\n        t('donations:comingSoonMessage'),\n        [{ text: t('common:confirm'), style: 'default' }]\n      );\n    }\n  };\n\n  // ×§×‘×™×¢×ª ×”×§×˜×’×•×¨×™×•×ª ×œ×¡×¢×™×£ ×”×¨××©×•×Ÿ - 4 ×§×˜×’×•×¨×™×•×ª ××•×¢×“×¤×•×ª\n  const primaryCategoryIds: CategoryId[] = ['money', 'items', 'trump', 'knowledge'];\n  const primaryCategories = primaryCategoryIds\n    .map((id) => BASE_CATEGORIES.find((c) => c.id === id))\n    .filter((c): c is typeof BASE_CATEGORIES[number] => Boolean(c));\n\n  // ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”××—×¨×•×ª ×œ×¡×¢×™×£ ×”×©× ×™\n  const otherCategories = BASE_CATEGORIES.filter(\n    (c) => !primaryCategoryIds.includes(c.id as CategoryId)\n  );\n  \n  logger.info('DonationsScreen', 'Categories organized', {\n    primary: primaryCategories.map((c) => c.id),\n    other: otherCategories.length,\n  });\n\n  // ×—×™×©×•×‘ ××™×“×•×ª responsive ×œ×›×¨×˜×™×¡×™×\n  const cardPadding = responsiveSpacing(12, 16, 20);\n  const iconSize = responsiveSpacing(48, 56, 64);\n  const iconInnerSize = responsiveSpacing(32, 40, 48);\n  const cardGap = responsiveSpacing(12, 16, 24);\n  const sectionPadding = responsiveSpacing(20, 28, 36);\n  // ×¨×™×•×•×— responsive ×œ×¡×¢×™×£ ×”×©× ×™ - ×’×“×œ ×¢× ×”××¡×š\n  const otherCategoriesGap = responsiveSpacing(12, 20, 28);\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.backgroundSecondary} />\n      {isGuestMode && <GuestModeNotice showLoginButton={false} />}\n      \n      <ScrollContainer style={styles.scrollContainer} contentStyle={styles.scrollContent}>\n        {/* ×¡×¢×™×£ ×¨××©×•×Ÿ - 4 ×§×˜×’×•×¨×™×•×ª ××•×¢×“×¤×•×ª */}\n        <View style={[styles.modernSection, { padding: sectionPadding }]}>\n          <View style={[styles.modernGrid, { gap: cardGap }]}>\n            {primaryCategories.map((category) => {\n              const { title, subtitle } = getCategoryText(category.id);\n              // ×—×™×©×•×‘ ×¨×•×—×‘ responsive ×œ×›×¨×˜×™×¡\n              const cardWidth = Platform.OS === 'web'\n                ? isDesktopScreen\n                  ? '22%'\n                  : isTabletScreen\n                    ? '30%'\n                    : '45%'\n                : isTabletScreen || landscapeMode\n                  ? '30%'\n                  : '45%';\n              return (\n                <TouchableOpacity\n                  key={`primary-${category.id}`}\n                  style={[\n                    styles.modernCard,\n                    { \n                      gap: cardGap,\n                      width: cardWidth,\n                      minWidth: cardWidth,\n                      maxWidth: cardWidth,\n                      backgroundColor: colors.infoLight, // ×¨×§×¢ ××—×™×“ ×›××• ×”×˜×¨××¤×™×\n                    },\n                  ]}\n                  onPress={() => handleCategoryPress(category)}\n                  activeOpacity={0.8}\n                >\n                  <View\n                    style={[\n                      styles.modernIconContainer,\n                      {\n                        width: iconSize,\n                        height: iconSize,\n                        backgroundColor: category.color + '15', // 15% opacity\n                      },\n                    ]}\n                  >\n                    <View\n                      style={[\n                        styles.modernIcon,\n                        {\n                          width: iconInnerSize,\n                          height: iconInnerSize,\n                          backgroundColor: category.color,\n                        },\n                      ]}\n                    >\n                      <Ionicons \n                        name={category.icon as any} \n                        size={iconInnerSize * 0.6} \n                        color=\"white\" \n                      />\n                    </View>\n                  </View>\n                  <View style={styles.modernCardContent}>\n                    <Text style={styles.modernCardTitle} numberOfLines={1}>\n                      {title}\n                    </Text>\n                    <Text style={styles.modernCardSubtitle} numberOfLines={2}>\n                      {subtitle}\n                    </Text>\n                  </View>\n                </TouchableOpacity>\n              );\n            })}\n          </View>\n        </View>\n\n        {/* ×¡×¢×™×£ ×©× ×™ - ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”× ×•×¡×¤×•×ª */}\n        <View style={[styles.modernSection, { padding: sectionPadding }]}>\n          <Text style={styles.modernSectionTitle}>\n            ××¡×›×™× ×‘×‘× ×™×”, ×›×¨×’×¢ ××›×™×œ×™× ×§×™×©×•×¨×™× ×¨×œ×•×•× ×˜×™×\n          </Text>\n          <View style={[styles.modernOtherGrid, { gap: otherCategoriesGap }]}>\n            {otherCategories.map((category) => {\n              const { title, subtitle } = getCategoryText(category.id as CategoryId);\n              // ×—×™×©×•×‘ ×¨×•×—×‘ responsive ×œ×›×¨×˜×™×¡ ×§×˜×Ÿ - 3 ×‘×©×•×¨×”\n              const smallCardWidth = \"25%\";\n              return (\n                <TouchableOpacity\n                  key={`other-${category.id}`}\n                  style={[\n                    styles.modernSmallCard,\n                    {\n                      width: smallCardWidth,\n                      minWidth: smallCardWidth,\n                      maxWidth: smallCardWidth,\n                      backgroundColor: colors.infoLight, // ×¨×§×¢ ××—×™×“ ×›××• ×”×˜×¨××¤×™×\n                      paddingVertical: responsiveSpacing(12, 14, 16),\n                      paddingHorizontal: responsiveSpacing(8, 10, 12),\n                    },\n                  ]}\n                  onPress={() => handleCategoryPress(category as any)}\n                  activeOpacity={0.8}\n                >\n                  <View\n                    style={[\n                      styles.modernSmallIcon,\n                      {\n                        backgroundColor: category.color,\n                        width: iconInnerSize * 0.7,\n                        height: iconInnerSize * 0.7,\n                        marginBottom: responsiveSpacing(6, 8, 10),\n                        ...createShadowStyle(category.color, { width: 0, height: 2 }, 0.25, 6),\n                      },\n                    ]}\n                  >\n                    <Ionicons \n                      name={category.icon as any} \n                      size={iconInnerSize * 0.4} \n                      color=\"white\" \n                    />\n                  </View>\n                  <Text \n                    style={[\n                      styles.modernSmallCardTitle,\n                      { \n                        color: category.color,\n                        marginBottom: responsiveSpacing(2, 3, 4),\n                      }\n                    ]} \n                    numberOfLines={1}\n                  >\n                    {title}\n                  </Text>\n                  <Text \n                    style={[\n                      styles.modernSmallCardSubtitle,\n                      { color: category.color + 'AA' }\n                    ]} \n                    numberOfLines={1}\n                  >\n                    {subtitle}\n                  </Text>\n                </TouchableOpacity>\n              );\n            })}\n          </View>\n        </View>\n\n      {/* Stats Section */}\n      {(() => {\n        const now = Date.now();\n        const weekAgo = now - 7 * 24 * 60 * 60 * 1000;\n        const weeklyDonations = donations.filter((d: any) => {\n          const t = new Date(d.createdAt || Date.now()).getTime();\n          return t >= weekAgo;\n        }).length;\n        const activeDonors = new Set(donations.map((d: any) => d.createdBy).filter(Boolean)).size;\n        const activeCharities = charities.length;\n        return (\n            <DonationStatsFooter\n              compact={isCompact}\n              stats={[\n                { label: t('donations:activeDonors'), value: activeDonors, icon: 'people-outline' },\n                { label: t('donations:weeklyDonations'), value: weeklyDonations, icon: 'heart-outline' },\n                { label: t('donations:activeCharities'), value: activeCharities, icon: 'business-outline' },\n              ]}\n            />\n        );\n      })()}\n      </ScrollContainer>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary, // ×¢×•×“×›×Ÿ ×œ×›×—×•×œ ×‘×”×™×¨\n  },\n  scrollContainer: {\n    backgroundColor: colors.backgroundTertiary, // ×¢×•×“×›×Ÿ ×œ×›×—×•×œ ×‘×”×™×¨\n    flex: 1,\n  },\n  scrollContent: {\n    paddingBottom: 20,\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && { \n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  header: {\n    backgroundColor: colors.background,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderBottomRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: scaleSize(45),\n    height: scaleSize(45),\n    borderRadius: scaleSize(45) / 2,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  welcomeText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  userName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  settingsButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL + LAYOUT_CONSTANTS.SPACING.MD,\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.XL * 6,\n  },\n  quickActionsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    alignItems: 'center',\n\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: '800', // ×¤×•× ×˜ ×¢×‘×” ×™×•×ª×¨\n    color: colors.secondary, // ×¦×‘×¢ ×•×¨×•×“ ××”×œ×•×’×• ×”×—×“×©\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center', // ××¨×›×•×– ×”×›×•×ª×¨×ª\n  },\n  quickActionsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  quickActionButton: {\n    flex: 1,\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  quickActionText: {\n    color: colors.white,\n    fontSize: FontSizes.button,\n    fontWeight: '600',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoriesSection: {\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™ ×œ×§×˜×’×•×¨×™×•×ª\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE, // ×¢×™×’×•×œ ×’×“×•×œ ×™×•×ª×¨\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less margin on web\n    marginHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less margin on web\n    alignItems: 'center',\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.MD : LAYOUT_CONSTANTS.SPACING.LG, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    ...createShadowStyle(colors.secondary, { width: 0, height: 4 }, 0.15, 8), // ×¦×œ ×¦×‘×¢×•× ×™\n  },\n  categoriesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  horizontalScrollContainer: {\n    height: Math.max(120, scaleSize(140)), // ×’×•×‘×” ×§×‘×•×¢\n    width: '100%',\n  },\n  horizontalScrollView: {\n    flex: 1,\n    height: '100%',\n    ...(Platform.OS === 'web' && {\n      overflowX: 'auto' as any,\n      overflowY: 'hidden' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n    }),\n  } as any,\n  horizontalScrollContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    height: '100%',\n  },\n  horizontalList: {\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n    flexDirection: 'row',\n    ...(Platform.OS === 'web' && {\n      display: 'flex' as any,\n      flexWrap: 'nowrap' as any,\n    }),\n  },\n  othersSection: {\n    alignSelf: 'stretch',\n    width: '100%',\n  },\n  verticalScrollNative: {\n    alignSelf: 'stretch',\n    width: '100%',\n  },\n  verticalScrollContent: {\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  verticalScrollWeb: {\n    width: '100%',\n  },\n  activeCategoriesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryCard: {\n    width: '31.5%',\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less padding on web\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM, // ×¢×™×’×•×œ ×™×•×ª×¨ ××¢×•×’×œ\n    alignItems: 'center',\n    ...createShadowStyle(colors.secondary, { width: 0, height: 2 }, 0.12, 4), // ×¦×œ ×¦×‘×¢×•× ×™\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ ×™×•×ª×¨\n  },\n  categoryCardHorizontal: {\n    width: Platform.OS === 'web' ? scaleSize(120) : scaleSize(140), // Smaller on web\n    paddingVertical: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.SM : LAYOUT_CONSTANTS.SPACING.MD, // Less padding on web\n    paddingHorizontal: Platform.OS === 'web' ? LAYOUT_CONSTANTS.SPACING.XS : LAYOUT_CONSTANTS.SPACING.SM, // Less padding on web\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM, // ×¢×™×’×•×œ ×™×•×ª×¨ ××¢×•×’×œ\n    alignItems: 'center',\n    ...createShadowStyle(colors.secondary, { width: 0, height: 2 }, 0.12, 4), // ×¦×œ ×¦×‘×¢×•× ×™\n    backgroundColor: colors.background, // ×¨×§×¢ ×œ×‘×Ÿ × ×§×™\n    borderWidth: 1,\n    borderColor: colors.border, // ×’×‘×•×œ ×¢×“×™×Ÿ ×™×•×ª×¨\n    marginRight: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  activeCategoryCard: {\n    width: '45%',\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.15, 6),\n    minHeight: scaleSize(140),\n    backgroundColor: colors.categoryCardBackground,\n    borderWidth: 1,\n    borderColor: colors.categoryBorder,\n  },\n  categoryCardSelected: {\n    borderWidth: 2,\n    borderColor: colors.categoryIconBackground,\n  },\n  categoryIcon: {\n    width: scaleSize(35),\n    height: scaleSize(35),\n    borderRadius: scaleSize(35) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM, // ××¨×•×•×— ×’×“×•×œ ×™×•×ª×¨ ××ª×—×ª ×œ××™×§×•×Ÿ\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.3, 4), // ×¦×œ ×œ××™×§×•×Ÿ\n  },\n  categoryIconWrapper: {\n    position: 'relative',\n  },\n  pinOverlay: {\n    position: 'absolute',\n    top: -scaleSize(6),\n    right: -scaleSize(6),\n  },\n  activeCategoryIcon: {\n    width: scaleSize(45),\n    height: scaleSize(45),\n    borderRadius: scaleSize(45) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700', // ×¤×•× ×˜ ×¢×‘×” ×™×•×ª×¨\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS, // ××¨×•×•×— ×§×˜×Ÿ ××¢×œ ×”×›×•×ª×¨×ª\n  },\n  categoryTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 0,\n  },\n  categorySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  categoryDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.small * 1.2),\n  },\n  activeCategoryTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n    textAlign: 'center',\n  },\n  activeCategorySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: 'center',\n  },\n  activeCategoryDescription: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.caption * 1.4),\n  },\n  statsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.1, 8),\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.secondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  \n  // Modern Design Styles\n  modernSection: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.08, 12),\n  },\n  modernGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: LAYOUT_CONSTANTS.SPACING.MD, // gap ××•×’×“×¨ inline ×‘-component\n  },\n  modernCard: {\n    // backgroundColor ××•×’×“×¨ ×‘××•×¤×Ÿ ×“×™× ××™ ×‘×§×•××¤×•× × ×˜×” ×œ×¤×™ category.bgColor\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: colors.border,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.1, 8),\n  },\n  modernIconContainer: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modernIcon: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.2, 6),\n  },\n  modernCardContent: {\n    alignItems: 'center',\n    width: '100%',\n  },\n  modernCardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modernCardSubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: FontSizes.body,\n  },\n  modernSectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modernOtherGrid: {\n    \n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center', // ×™×™×©×•×¨ ×œ×××¦×¢\n    alignItems: 'flex-start',\n  },\n  modernSmallCard: {\n    // backgroundColor ××•×’×“×¨ ×‘××•×¤×Ÿ ×“×™× ××™ ×‘×§×•××¤×•× × ×˜×” ×œ×¤×™ category.bgColor\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    borderWidth: 1.5,\n    borderColor: colors.border,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 3 }, 0.1, 10),\n  },\n  modernSmallIconContainer: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    justifyContent: 'center',\n    alignItems: 'center',\n    // marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modernSmallIcon: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modernSmallCardTitle: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    width: '100%',\n  },\n  modernSmallCardSubtitle: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    width: '100%',\n  },\n\n});\n\nexport default DonationsScreen;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/HomeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/HomeScreenOld.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[1738,1759],"text":""},"desc":"Remove unused variable \"TouchableOpacity\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Image"},"fix":{"range":[1759,1770],"text":""},"desc":"Remove unused variable \"Image\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[1770,1779],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CommunityStatsPanel' is defined but never used.","line":59,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"CommunityStatsPanel"},"fix":{"range":[2537,2606],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GuestModeNotice' is defined but never used.","line":63,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"GuestModeNotice"},"fix":{"range":[2804,2865],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CommunityStatsGrid' is defined but never used.","line":64,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":26,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"CommunityStatsGrid"},"fix":{"range":[2865,2932],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StatDetailsModal' is defined but never used.","line":65,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"StatDetailsModal"},"fix":{"range":[2939,2956],"text":""},"desc":"Remove unused variable \"StatDetailsModal\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CLOSED_POSITION' is assigned a value but never used.","line":78,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'OPEN_POSITION' is assigned a value but never used.","line":79,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MID_POSITION' is assigned a value but never used.","line":80,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FloatingBubble' is assigned a value but never used.","line":94,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5259,5262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5259,5262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tabBarHeight' is assigned a value but never used.","line":155,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":155,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedUser' is assigned a value but never used.","line":158,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":158,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isRealAuth' is assigned a value but never used.","line":158,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":158,"endColumn":89},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":160,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedStat' is assigned a value but never used.","line":161,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isStatModalVisible' is assigned a value but never used.","line":162,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":229,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8956,8959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8956,8959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10222,10225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10222,10225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSelectStat' is assigned a value but never used.","line":284,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":284,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleScroll' is assigned a value but never used.","line":292,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":292,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'contentSize' is assigned a value but never used.","line":293,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'layoutMeasurement' is assigned a value but never used.","line":293,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'postsAnimatedStyle' is assigned a value but never used.","line":300,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11334,11337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11334,11337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":312,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11704,11707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11704,11707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":320,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11884,11887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11884,11887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'stats' is assigned a value but never used.","line":355,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StatCard' is assigned a value but never used.","line":424,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":424,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":703,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":703,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23532,23535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23532,23535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":704,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":704,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23579,23582],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23579,23582],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":705,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":705,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23623,23626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23623,23626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":706,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":706,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23659,23662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23659,23662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":707,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":707,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23698,23701],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23698,23701],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":708,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":708,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23726,23729],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23726,23729],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":709,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":709,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23760,23763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23760,23763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":711,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":711,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23780,23783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23780,23783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":38,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Main Home screen showing animated bubbles and a draggable panel that reveals the posts feed (`PostsReelsScreen`).\n// - Reached from: `HomeTabStack` -> route 'HomeMain' (initial route of the Home tab).\n// - Provides: State and gestures to toggle between Home content and Posts feed; updates route params `{ hideTopBar, showPosts }` to control top bar in `TopBarNavigator`.\n// - Reads from context: `useUser()` -> selectedUser, isGuestMode, isRealAuth, resetHomeScreenTrigger.\n// - Input params: None required; uses navigation params set locally.\n// - External deps/services: `EnhancedStatsService` for stats, `FloatingBubblesOverlay`, `PostsReelsScreen`.\n\n// TODO: CRITICAL - This file is too long (893+ lines). Split into smaller components:\n//   - Extract FloatingBubble to separate component\n//   - Extract StatCard to separate component  \n//   - Extract panel gesture logic to custom hook\n//   - Create HomeAnimations utility for all animation logic\n// TODO: Remove unused imports - many imports are not being used\n// TODO: Replace magic numbers with named constants (PANEL_HEIGHT, positions, etc)\n// TODO: Implement proper TypeScript interfaces for all props and state\n// TODO: Add comprehensive error handling for stats fetching\n// TODO: Optimize re-renders - too many useEffect hooks causing performance issues\n// TODO: Remove fake data imports - replace with real API calls\n// TODO: Add proper loading states for all async operations\n// TODO: Implement proper accessibility for drag gestures and animations\n// TODO: Add unit tests for complex gesture and animation logic\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { \n  View, \n  StyleSheet, \n  Dimensions, \n  Text, \n  TouchableOpacity, \n\n  Image,\n  Alert,\n  SafeAreaView,\n  StatusBar,\n  Platform,\n  NativeSyntheticEvent,\n  NativeScrollEvent,\n  ViewStyle,\n} from \"react-native\";\nimport { Gesture, GestureDetector } from \"react-native-gesture-handler\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withRepeat,\n  withTiming,\n  withDelay,\n  interpolate,\n  Extrapolation,\n  runOnJS,\n  Easing,\n} from \"react-native-reanimated\";\nimport { useFocusEffect, useIsFocused, useNavigation } from \"@react-navigation/native\";\nimport { useBottomTabBarHeight } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../globals/colors\";\nimport { FontSizes, LAYOUT_CONSTANTS } from \"../globals/constants\";\nimport { useTranslation } from 'react-i18next';\nimport CommunityStatsPanel from \"../components/CommunityStatsPanel\";\nimport PostsReelsScreen from \"../components/PostsReelsScreen\";\nimport { useUser } from \"../stores/userStore\";\nimport { shouldAutoOpenAboutScreen, markAboutScreenSeen } from \"../utils/profileUtils\";\nimport GuestModeNotice from \"../components/GuestModeNotice\";\nimport CommunityStatsGrid from \"../components/CommunityStatsGrid\";\nimport StatDetailsModal, { StatDetails } from \"../components/StatDetailsModal\";\nimport { createShadowStyle } from \"../globals/styles\";\nimport { scaleSize } from \"../globals/responsive\";\nimport { EnhancedStatsService, formatShortNumber } from \"../utils/statsService\";\nimport FloatingBubblesOverlay from \"../components/FloatingBubblesOverlay\";\n// FloatingBubblesSkia imported dynamically to avoid Web bundle issues\nconst { height: SCREEN_HEIGHT } = Dimensions.get(\"window\");\n\n// Panel layout dimensions derived responsively with web optimizations\n// TODO: Move these constants to a dedicated constants file\n// TODO: Add proper responsive calculations based on device type\n// TODO: Test panel positions on different screen sizes and orientations\nconst PANEL_HEIGHT = Platform.OS === 'web' ? SCREEN_HEIGHT - scaleSize(20) : SCREEN_HEIGHT - scaleSize(50);\nconst CLOSED_POSITION = PANEL_HEIGHT - scaleSize(60);\nconst OPEN_POSITION = 0;\nconst MID_POSITION = PANEL_HEIGHT / 2;\n\n/**\n * Small animated bubble that gently floats to display a stat item.\n * Styles use global scaling and shadow helpers for cross-platform consistency.\n */\ninterface FloatingBubbleProps {\n  icon: string;\n  value: string;\n  label: string;\n  bubbleStyle: ViewStyle | ViewStyle[];\n  delay: number;\n}\n\nconst FloatingBubble: React.FC<FloatingBubbleProps> = ({ icon, value, label, bubbleStyle, delay }) => {\n  const translateY = useSharedValue(0);\n  const scale = useSharedValue(1);\n  const opacity = useSharedValue(0.8);\n\n  useEffect(() => {\n    // Floating up and down animation\n    translateY.value = withDelay(\n      delay,\n      withRepeat(\n        withTiming(-10, { duration: 2000, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n\n    // Scale animation\n    scale.value = withDelay(\n      delay + 500,\n      withRepeat(\n        withTiming(1.05, { duration: 3000, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n\n    // Opacity animation\n    opacity.value = withDelay(\n      delay + 1000,\n      withRepeat(\n        withTiming(1, { duration: 2500, easing: Easing.inOut(Easing.sin) }),\n        -1,\n        true\n      )\n    );\n  }, []);\n\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [\n        { translateY: translateY.value },\n        { scale: scale.value }\n      ] as any,\n      opacity: opacity.value,\n    };\n  });\n\n  return (\n    <Animated.View style={[styles.floatingBubble, bubbleStyle, animatedStyle]}>\n      <Text style={styles.bubbleIcon}>{icon}</Text>\n      <Text style={styles.bubbleValue}>{value}</Text>\n      <Text style={styles.bubbleLabel}>{label}</Text>\n    </Animated.View>\n  );\n};\n\nexport default function HomeScreen() {\n  // TODO: Extract all hook logic to custom hooks (useHomeScreenState, useHomeScreenAnimations)\n  // TODO: Implement proper state management with useReducer instead of multiple useState\n  // TODO: Add proper TypeScript interfaces for navigation and route params\n  // TODO: Memoize expensive calculations and objects\n  const tabBarHeight = useBottomTabBarHeight();\n  const isFocused = useIsFocused();\n  const navigation = useNavigation();\n  const { selectedUser, setSelectedUser, isGuestMode, resetHomeScreenTrigger, isRealAuth, isAuthenticated } = useUser();\n  const [showPosts, setShowPosts] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [selectedStat, setSelectedStat] = useState<StatDetails | null>(null);\n  const [isStatModalVisible, setIsStatModalVisible] = useState(false);\n  const [NativeBubblesComponent, setNativeBubblesComponent] = useState<React.ComponentType | null>(null);\n  const hasCheckedAboutAutoOpen = useRef(false);\n  \n  // Dynamically load FloatingBubblesSkia only on Native platforms to avoid Web bundle issues\n  useEffect(() => {\n    if (Platform.OS !== 'web') {\n      import('../components/FloatingBubblesSkia')\n        .then((module) => {\n          setNativeBubblesComponent(() => module.default);\n        })\n        .catch((error) => {\n          console.error('Failed to load FloatingBubblesSkia:', error);\n        });\n    }\n  }, []);\n  \n  // No logical difference between guest/user modes other than the header banner\n  useEffect(() => {\n    if (isGuestMode) {\n      console.log('ğŸ  HomeScreen - Guest mode active (header banner only)');\n    }\n  }, [isGuestMode]);\n  const [hideTopBar, setHideTopBar] = useState(false); // Top bar hiding state\n\n  // Animated values for scrolling\n  const scrollY = useSharedValue(0);\n  const postsTranslateY = useSharedValue(0);\n  const panelHeight = useSharedValue(0);\n  const panelStartHeight = useSharedValue(0);\n  const HALF_THRESHOLD = SCREEN_HEIGHT * 0.5;\n\n  /**\n   * Auto-open About screen for new users with incomplete profiles\n   * \n   * This effect checks if the About screen should be automatically opened when:\n   * - User is authenticated (not guest mode)\n   * - User profile is incomplete (missing avatar, full name, or address)\n   * - User hasn't seen the About screen yet\n   * \n   * Once the profile is completed, the auto-open is permanently disabled for that user.\n   * The check only runs once per session to avoid multiple opens.\n   */\n  useEffect(() => {\n    const checkAndOpenAbout = async () => {\n      // Only check once per session to prevent multiple opens\n      if (hasCheckedAboutAutoOpen.current) {\n        return;\n      }\n      \n      // Wait a bit for navigation to settle before checking\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Check if About screen should auto-open\n      const shouldOpen = await shouldAutoOpenAboutScreen(\n        selectedUser,\n        isGuestMode,\n        isAuthenticated\n      );\n      \n      if (shouldOpen) {\n        console.log('ğŸ  HomeScreen - Auto-opening About screen for new user');\n        hasCheckedAboutAutoOpen.current = true;\n        // Mark as seen immediately to prevent multiple opens\n        await markAboutScreenSeen();\n        // Navigate to About screen after a short delay\n        setTimeout(() => {\n          (navigation as any).navigate('AboutKarmaCommunityScreen');\n        }, 500);\n      } else {\n        // Mark as checked even if not opening to prevent re-checking\n        hasCheckedAboutAutoOpen.current = true;\n      }\n    };\n    \n    // Only check if user is authenticated and not in guest mode\n    if (isAuthenticated && !isGuestMode && selectedUser) {\n      checkAndOpenAbout();\n    }\n  }, [selectedUser, isGuestMode, isAuthenticated, navigation]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      console.log('ğŸ  HomeScreen - Screen focused, refreshing data...');\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  // Reset state when screen loses focus\n  useEffect(() => {\n    if (!isFocused) {\n      setShowPosts(false);\n    }\n  }, [isFocused]);\n\n  // Listen to resetHomeScreenTrigger from context\n  useEffect(() => {\n    console.log('ğŸ  HomeScreen - resetHomeScreenTrigger changed, resetting showPosts');\n    setShowPosts(false);\n  }, [resetHomeScreenTrigger]);\n\n  // Update hideTopBar and showPosts in route params\n  useEffect(() => {\n    console.log('ğŸ  HomeScreen - Updating route params with hideTopBar:', hideTopBar, 'showPosts:', showPosts);\n    (navigation as any).setParams({ hideTopBar, showPosts });\n  }, [hideTopBar, showPosts, navigation]);\n\n  useFocusEffect(\n    useCallback(() => {\n      setShowPosts(false);\n      setHideTopBar(false); // Reset top bar hiding\n      postsTranslateY.value = withSpring(0, {\n        damping: 20,\n        stiffness: 150,\n        mass: 0.8,\n      });\n      panelHeight.value = withTiming(0, { duration: 0 });\n    }, [])\n  );\n\n  const handleSelectStat = (details: StatDetails) => {\n    setSelectedStat(details);\n    setIsStatModalVisible(true);\n  };\n\n  /**\n   * Handle vertical scrolling; when reaching near the end, open the posts view.\n   */\n  const handleScroll = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const { contentOffset, contentSize, layoutMeasurement } = event.nativeEvent;\n    const offsetY = contentOffset.y;\n    scrollY.value = offsetY;\n    // Disabled opening posts by scrolling to bottom; opening is only via the drag handle\n  };\n\n  /** Animated style for the posts screen */\n  const postsAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateY: postsTranslateY.value }] as any,\n    };\n  });\n\n  // Fade/scale home content as the drag panel grows\n  const homeAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      opacity: interpolate(panelHeight.value, [0, HALF_THRESHOLD], [1, 0.2], Extrapolation.CLAMP),\n      transform: [\n        { scale: interpolate(panelHeight.value, [0, HALF_THRESHOLD], [1, 0.98], Extrapolation.CLAMP) }\n      ] as any,\n    };\n  });\n\n  // Animated style for the draggable panel overlay\n  const panelAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      height: panelHeight.value,\n    } as any;\n  });\n\n  // Drag gesture for opening the posts panel\n  const panGesture = Gesture.Pan()\n    .onBegin(() => {\n      panelStartHeight.value = panelHeight.value;\n    })\n    .onUpdate((event) => {\n      // Upward drag has negative translationY; increase height accordingly\n      const newHeight = Math.max(0, Math.min(SCREEN_HEIGHT, panelStartHeight.value - event.translationY));\n      panelHeight.value = newHeight;\n    })\n    .onEnd(() => {\n      const shouldOpen = panelHeight.value > HALF_THRESHOLD;\n      if (shouldOpen) {\n        panelHeight.value = withTiming(SCREEN_HEIGHT, { duration: 200 });\n        // Replace Home with Posts screen\n        runOnJS(setShowPosts)(true);\n        runOnJS(setHideTopBar)(false);\n      } else {\n        panelHeight.value = withTiming(0, { duration: 200 });\n      }\n    });\n\n\n  const { t } = useTranslation(['home','common']);\n\n  // Fetch stats from DB\n  // TODO: Move stats fetching to custom hook (useStatsData)\n  // TODO: Add proper loading state for stats\n  // TODO: Add error state handling and retry mechanism\n  // TODO: Implement proper error logging/reporting\n  // TODO: Add caching mechanism for stats data\n  // TODO: Add refresh/pull-to-refresh functionality\n  const [stats, setStats] = useState<StatCardProps[]>([]);\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const communityStats = await EnhancedStatsService.getCommunityStats();\n        // Map to stat cards format\n        setStats([\n          { title: t('home:stats.activeMembers'), value: formatShortNumber(communityStats.activeMembers || 0), change: '+12.5%', changeType: 'up', iconName: 'people-outline', color: colors.primary },\n          // Add more mapped stats...\n        ]);\n      } catch (error) {\n        console.error('Failed to fetch stats', error);\n        // TODO: Show user-friendly error message\n        // TODO: Implement fallback data or retry logic\n      }\n    };\n    fetchStats();\n  }, []);\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n       {showPosts ? (\n        // Posts screen\n          <PostsReelsScreen \n            onScroll={(hide) => {\n              console.log('ğŸ  HomeScreen - Setting hideTopBar:', hide);\n              setHideTopBar(hide);\n            }}\n            hideTopBar={hideTopBar}\n          />\n      ) : (\n        // Home screen with enhanced scrolling\n        <>\n        <Animated.View style={[styles.homeContainer, homeAnimatedStyle]}>\n          {Platform.OS === 'web' ? (\n            <FloatingBubblesOverlay />\n          ) : (\n            NativeBubblesComponent ? <NativeBubblesComponent /> : null\n          )}\n        </Animated.View>\n        {/* Drag Handle Button - the ONLY way to open PostsReelsScreen */}\n        {!showPosts && (\n          <GestureDetector gesture={panGesture}>\n            <Animated.View style={[styles.dragHandleButton, { zIndex: 1100 }]}>\n              <View style={styles.handleBar} />\n            </Animated.View>\n          </GestureDetector>\n        )}\n        {/* Draggable Panel Overlay (visual only, replaced by PostsReelsScreen on threshold) */}\n        {!showPosts && (\n          <Animated.View style={[styles.dragPanel, panelAnimatedStyle]} />\n        )}\n        </>\n      )}\n    </SafeAreaView>\n  );\n}\n\n// New StatCard component\ntype StatCardProps = {\n  title: string;\n  value: string;\n  change: string;\n  changeType: 'up' | 'down';\n  iconName: React.ComponentProps<typeof Ionicons>['name'];\n  color: string;\n};\nconst StatCard = ({ title, value, change, changeType, iconName, color }: StatCardProps) => (\n  <View style={styles.statCard}>\n    <View style={styles.statContent}>\n      <Text style={styles.statTitle}>{title}</Text>\n      <Text style={styles.statValue}>{value}</Text>\n      <View style={styles.statChange}>\n        <Ionicons name={changeType === 'up' ? \"trending-up\" : \"trending-down\"} size={16} color={changeType === 'up' ? colors.success : colors.error} />\n        <Text style={[styles.statChangeText, { color: changeType === 'up' ? colors.success : colors.error }]}>{change}</Text>\n      </View>\n    </View>\n    <View style={[styles.statIconContainer, { backgroundColor: color }]}>\n      <Ionicons name={iconName} size={24} color=\"white\" />\n    </View>\n  </View>\n);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  \n  activitiesContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  activitiesScroll: {\n    paddingRight: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  activityCard: {\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n    width: scaleSize(150),\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n  },\n  activityIcon: {\n    width: scaleSize(30),\n    height: scaleSize(30),\n    borderRadius: scaleSize(30) / 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  activityTime: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  statsPreview: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n\n     statCard: { flexDirection: 'row', justifyContent: 'space-between', backgroundColor: 'white', borderRadius: 12, padding: 16, margin: 8, ...createShadowStyle('colors.black', { width: 0, height: 0 }, 0.1, 4) },\n  statContent: {\n    flex: 1,\n    marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  statIcon: {\n    fontSize: FontSizes.heading1,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     statValue: {\n     fontSize: FontSizes.medium,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statTitle: {\n     fontSize: FontSizes.body,\n     fontWeight: 'bold',\n     color: colors.textPrimary,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statChange: {\n     flexDirection: 'row',\n     alignItems: 'center',\n     marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statChangeText: {\n     fontSize: FontSizes.small,\n     marginLeft: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   statIconContainer: {\n     width: scaleSize(50),\n     height: scaleSize(50),\n     borderRadius: scaleSize(25),\n     justifyContent: 'center',\n     alignItems: 'center',\n   },\n   statName: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n  panel: {\n    height: PANEL_HEIGHT,\n    width: \"100%\",\n    backgroundColor: colors.white,\n    position: \"absolute\",\n    bottom: LAYOUT_CONSTANTS.SPACING.SM,\n    borderTopLeftRadius: scaleSize(250),\n    borderTopRightRadius: scaleSize(250),\n    ...createShadowStyle(colors.shadow, { width: 0, height: -3 }, 0.15, 8),\n  },\n  panelHandle: {\n    height: scaleSize(6),\n    borderRadius: scaleSize(3),\n    alignSelf: \"center\",\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  // New styles for posts screen and scrolling\n  postsContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  postsHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n  },\n  postsTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  pullIndicator: {\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  pullText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  // Toggle button styles\n  toggleContainer: {\n    position: 'absolute',\n    bottom: scaleSize(50),\n    right: scaleSize(30),\n    zIndex: 1000,\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: scaleSize(20),\n    padding: scaleSize(3),\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  // Drag handle button (small pill) centered at bottom\n  dragHandleButton: {\n    position: 'absolute',\n    bottom: Platform.OS === 'web' ? 20 : 60, // Much lower on web to reduce dead space\n    backgroundColor: colors.secondary,\n    alignSelf: 'center',\n    width: scaleSize(96),\n    height: scaleSize(24),\n    borderRadius: scaleSize(12),\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n  },\n  handleBar: {\n    alignSelf: 'center',\n    width: scaleSize(64),\n    height: scaleSize(6),\n    borderRadius: scaleSize(3),\n    backgroundColor: colors.backgroundTertiary,\n  },\n  // Draggable white panel overlay that grows with the gesture\n  dragPanel: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.white,\n    borderTopLeftRadius: scaleSize(24),\n    borderTopRightRadius: scaleSize(24),\n    ...createShadowStyle(colors.shadow, { width: 0, height: -3 }, 0.15, 8),\n    zIndex: 900,\n  },\n  toggleButton: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: scaleSize(16),\n  },\n  toggleButtonActive: {\n    backgroundColor: colors.primary,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.4, 2),\n  },\n  toggleText: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  toggleTextActive: {\n    color: colors.background,\n  },\n  // Community mode styles\n  communityModeContainer: {\n    flex: 1,\n    minHeight: \"100%\", // Minimum height to enable scrolling\n    width: \"100%\",\n  },\n  communityModeTitle: {\n    fontSize: FontSizes.heading2,\n  },\n  // Selected user indicator styles\n  userSelectionIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.offWhite,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  selectedUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  selectedUserAvatar: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    borderRadius: scaleSize(16),\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  selectedUserName: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  selectedUserLocation: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  clearUserButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  // Home container style\n  homeContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  // Personal mode style\n  personalModeContainer: {\n    flex: 1,\n  },\n  // Scroll content style\n  scrollContent: {\n    paddingBottom: scaleSize(100),\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && { \n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n  },\n  // Personal statistics styles\n  personalStatsContainer: {\n    paddingHorizontal: 20,\n    marginBottom: 20,\n  },\n  personalStatsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n  },\n     personalStatCard: {\n     backgroundColor: colors.backgroundTertiary, // Very light blue\n     padding: LAYOUT_CONSTANTS.SPACING.MD,\n     borderRadius: scaleSize(50), // Fully rounded\n     alignItems: 'center',\n     flex: 1,\n     marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n     ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n     minWidth: scaleSize(80),\n     minHeight: scaleSize(80),\n     justifyContent: 'center',\n   },\n  personalStatIcon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     personalStatValue: {\n     fontSize: FontSizes.large,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   personalStatName: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n  // Floating community statistics styles\n  floatingStatsContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  bubblesContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n  },\n     floatingBubble: {\n     backgroundColor: colors.backgroundTertiary, // Very light blue\n     padding: LAYOUT_CONSTANTS.SPACING.MD,\n     borderRadius: scaleSize(50), // Fully rounded\n     alignItems: 'center',\n     marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS,\n     marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n     ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.15, 4),\n     minWidth: scaleSize(80),\n     minHeight: scaleSize(80),\n     justifyContent: 'center',\n   },\n  bubbleIcon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n     bubbleValue: {\n     fontSize: FontSizes.large,\n     fontWeight: 'bold',\n     color: colors.primary, // Darker blue for better readability\n     marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n   },\n   bubbleLabel: {\n     fontSize: FontSizes.caption,\n     color: colors.primary, // Darker blue for better readability\n     textAlign: 'center',\n     fontWeight: '500',\n   },\n     // Specific donation types styles\n   moneyBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   foodBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   clothingBubble: {\n     backgroundColor: colors.infoLight,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   bloodBubble: {\n     backgroundColor: colors.errorLight,\n     borderColor: colors.error + '30',\n     borderWidth: 1,\n   },\n   timeBubble: {\n     backgroundColor: colors.warningLight,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   transportBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   educationBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   environmentBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   animalsBubble: {\n     backgroundColor: colors.legacyLightOrange,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   eventsBubble: {\n     backgroundColor: colors.legacyLightPink,\n     borderColor: colors.secondary + '30',\n     borderWidth: 1,\n   },\n   recyclingBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n      cultureBubble: {\n     backgroundColor: colors.legacyLightPurple,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   healthBubble: {\n     backgroundColor: colors.legacyLightRed,\n     borderColor: colors.error + '30',\n     borderWidth: 1,\n   },\n   elderlyBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   childrenBubble: {\n     backgroundColor: colors.legacyLightPink,\n     borderColor: colors.secondary + '30',\n     borderWidth: 1,\n   },\n   sportsBubble: {\n     backgroundColor: colors.legacyLightGreen,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   musicBubble: {\n     backgroundColor: colors.legacyLightPurple,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   artBubble: {\n     backgroundColor: colors.legacyLightOrange,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n   techBubble: {\n     backgroundColor: colors.legacyLightBlue,\n     borderColor: colors.info + '30',\n     borderWidth: 1,\n   },\n   gardenBubble: {\n     backgroundColor: colors.successLight,\n     borderColor: colors.success + '30',\n     borderWidth: 1,\n   },\n   leadershipBubble: {\n     backgroundColor: colors.legacyLightYellow,\n     borderColor: colors.warning + '30',\n     borderWidth: 1,\n   },\n  // New styles for dashboard elements\n  welcomeSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  welcomeTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  welcomeSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  // statCard styles are already defined earlier in this StyleSheet.\n  chartCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n  },\n  chartTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  progressContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  progressBar: {\n    height: scaleSize(8),\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: scaleSize(4),\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: colors.primary,\n    borderRadius: scaleSize(4),\n  },\n  updatesSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  updatesTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  updatesList: {\n    // List of updates will go here\n  },\n  updateItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n  },\n  updateText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  updateTime: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  chartsSection: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n\n });","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/ProfileScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used.","line":10,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[1067,1075],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabBar' is defined but never used.","line":27,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TabBar"},"fix":{"range":[1457,1465],"text":""},"desc":"Remove unused variable \"TabBar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SceneMap' is defined but never used.","line":27,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"SceneMap"},"fix":{"range":[1465,1475],"text":""},"desc":"Remove unused variable \"SceneMap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useNavigationState' is defined but never used.","line":29,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":69,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useNavigationState"},"fix":{"range":[1638,1658],"text":""},"desc":"Remove unused variable \"useNavigationState\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toastService' is defined but never used.","line":45,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"toastService"},"fix":{"range":[2680,2694],"text":""},"desc":"Remove unused variable \"toastService\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FeedItem' is defined but never used.","line":47,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FeedItem"},"fix":{"range":[2796,2805],"text":""},"desc":"Remove unused variable \"FeedItem\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FeedUser' is defined but never used.","line":47,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":28,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"FeedUser"},"fix":{"range":[2787,2839],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isOpenStatus' is assigned a value but never used.","line":99,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isClosedStatus' is assigned a value but never used.","line":113,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":113,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5226,5229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5226,5229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5401,5404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5401,5404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":131,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":131,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":147,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6529,6532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6529,6532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6898,6901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6898,6901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":239,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9759,9762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9759,9762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":274,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11119,11122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11119,11122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12328,12331],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12328,12331],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":307,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":307,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12604,12607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12604,12607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14150,14153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14150,14153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":364,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14734,14737],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14734,14737],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":419,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16844,16847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16844,16847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16912,16915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16912,16915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":430,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":430,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17476,17479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17476,17479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":471,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":471,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18925,18928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18925,18928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":472,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":472,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19011,19014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19011,19014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":574,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":574,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22237,22240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22237,22240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":577,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":577,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22412,22415],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22412,22415],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":579,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":579,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":595,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":595,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":617,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":617,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23546,23549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23546,23549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":625,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":625,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23906,23909],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23906,23909],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":687,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":687,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26746,26749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26746,26749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":722,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":722,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28109,28112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28109,28112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":746,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":746,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29324,29327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29324,29327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":755,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":755,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29601,29604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29601,29604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":796,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":796,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31031,31034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31031,31034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":801,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":801,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31315,31318],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31315,31318],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":856,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":856,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33399,33402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33399,33402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":857,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":857,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33467,33470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33467,33470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":867,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":867,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34020,34023],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34020,34023],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":908,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":908,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35477,35480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35477,35480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":909,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":909,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35569,35572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35569,35572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedUserWithMode' is assigned a value but never used.","line":1039,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":1039,"endColumn":48},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1042,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1042,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1129,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1129,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43396,43399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43396,43399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1130,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1130,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43467,43470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43467,43470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'followStats' is assigned a value but never used.","line":1136,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1136,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":1148,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":1148,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1166,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1166,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[45030,45033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[45030,45033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":1192,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":1192,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1279,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1279,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49253,49256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49253,49256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1283,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1283,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49468,49471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49468,49471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1284,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1284,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49533,49536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49533,49536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1304,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1304,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49997,50000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49997,50000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1309,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1309,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1311,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1311,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[50236,50239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[50236,50239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1329,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1329,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[50829,50832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[50829,50832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1347,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1347,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1351,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1351,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[51609,51612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[51609,51612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1369,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1369,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52236,52239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52236,52239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1374,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1374,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52451,52454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52451,52454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1401,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1401,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[53516,53519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[53516,53519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1423,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1423,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[54506,54509],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[54506,54509],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1457,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1457,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[55704,55707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[55704,55707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1458,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1458,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[55780,55783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[55780,55783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1463,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1463,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[56007,56010],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[56007,56010],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/prop-types","severity":2,"message":"'navigationState' is missing in props validation","line":1625,"column":16,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":31},{"ruleId":"react/prop-types","severity":2,"message":"'navigationState.routes' is missing in props validation","line":1625,"column":32,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":38},{"ruleId":"react/prop-types","severity":2,"message":"'navigationState.routes.map' is missing in props validation","line":1625,"column":39,"nodeType":"Identifier","messageId":"missingPropType","endLine":1625,"endColumn":42},{"ruleId":"react/prop-types","severity":2,"message":"'navigationState' is missing in props validation","line":1626,"column":35,"nodeType":"Identifier","messageId":"missingPropType","endLine":1626,"endColumn":50},{"ruleId":"react/prop-types","severity":2,"message":"'navigationState.index' is missing in props validation","line":1626,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":1626,"endColumn":56},{"ruleId":"react/prop-types","severity":2,"message":"'jumpTo' is missing in props validation","line":1631,"column":36,"nodeType":"Identifier","messageId":"missingPropType","endLine":1631,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1672,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1672,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[63217,63220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[63217,63220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1752,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1752,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[66405,66408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[66405,66408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1760,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1760,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[66758,66761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[66758,66761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1774,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1774,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67439,67442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67439,67442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1830,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1830,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[70155,70158],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[70155,70158],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2075,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2075,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[82343,82346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[82343,82346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2093,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2093,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[83345,83348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[83345,83348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2094,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2094,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[83448,83451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[83448,83451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2116,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2116,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[84984,84987],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[84984,84987],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2211,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2211,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[90655,90658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[90655,90658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2327,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2327,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[95747,95750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[95747,95750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2335,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2335,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[96084,96087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[96084,96087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2349,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2349,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[96737,96740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[96737,96740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2405,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2405,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[99351,99354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[99351,99354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2655,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2655,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[111390,111393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[111390,111393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2703,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2703,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[113926,113929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[113926,113929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2772,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2772,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[116825,116828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[116825,116828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2790,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2790,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[117344,117347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[117344,117347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2887,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2887,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121443,121446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121443,121446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2888,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2888,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121490,121493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121490,121493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2889,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2889,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121534,121537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121534,121537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2890,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2890,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121570,121573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121570,121573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2891,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2891,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121609,121612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121609,121612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2892,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2892,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121637,121640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121637,121640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2893,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2893,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121671,121674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121671,121674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2895,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2895,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121691,121694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121691,121694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":99,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Unified profile screen that works for both own profile and other users' profiles.\n// - Reached from: `ProfileTabStack` initial route 'ProfileScreen' via `BottomNavigator` (own profile) or via navigation with params (other user's profile).\n// - Provides: Navigation to Followers lists, Bookmarks, Notifications, Edit Profile, Discover People, Follow/Unfollow, Message, and (in demo) random persona selection and sample data creation.\n// - Reads from context: `useUser()` -> `selectedUser`, `setSelectedUserWithMode`, `isRealAuth`.\n// - Route params: Optional `{ userId?: string, userName?: string, characterData?: CharacterType }` for viewing other users' profiles.\n// - External deps/services: `followService` (stats and sample), `chatService` (sample chats), `apiService` (load user data), i18n translations.\n// - Notes: Hides or adapts certain demo-only features when `isRealAuth` is true. Shows different UI elements based on whether viewing own profile or other user's profile.\n// screens/ProfileScreen.tsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  Image,\n  TouchableOpacity,\n  Dimensions,\n  Alert,\n  TouchableWithoutFeedback,\n  Platform,\n  FlatList,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { Ionicons, MaterialCommunityIcons } from '@expo/vector-icons';\nimport { TabView, TabBar, SceneMap } from 'react-native-tab-view';\nimport type { SceneRendererProps, NavigationState } from 'react-native-tab-view';\nimport { useNavigation, useFocusEffect, useRoute, useNavigationState } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ProfileCompletionBanner from '../components/ProfileCompletionBanner';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { createShadowStyle } from '../globals/styles';\nimport { scaleSize } from '../globals/responsive';\nimport { getFollowStats, followUser, unfollowUser, createSampleFollowData, getUpdatedFollowCounts } from '../utils/followService';\nimport { createSampleChatData, createConversation, conversationExists } from '../utils/chatService';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport { useToast, toastService } from '../utils/toastService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { FeedItem, FeedUser } from '../types/feed';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\n\n// --- Type Definitions ---\ntype TabRoute = {\n  key: string;\n  title: string;\n};\n\ntype ProfileScreenRouteParams = {\n  userId?: string;\n  userName?: string;\n  characterData?: CharacterType;\n};\n\n// --- Helper Functions ---\nconst getRoleDisplayName = (role: string): string => {\n  const roleTranslations: Record<string, string> = {\n    'user': '××©×ª××©',\n    'donor': '×ª×•×¨×',\n    'volunteer': '××ª× ×“×‘',\n    'recipient': '××§×‘×œ ×¢×–×¨×”',\n    'organization': '×¢××•×ª×”',\n    'student': '×¡×˜×•×“× ×˜'\n  };\n  return roleTranslations[role] || role;\n};\n\n// Helper to format ride time safely\nconst formatRideTime = (dateIso: string) => {\n  if (!dateIso) return { time: '', date: '' };\n  const dep = new Date(dateIso);\n  if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n  const hours = dep.getHours().toString().padStart(2, '0');\n  const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n  const day = dep.getDate().toString().padStart(2, '0');\n  const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n  const year = dep.getFullYear();\n\n  return {\n    time: `${hours}:${minutes}`,\n    date: `${day}.${month}.${year}`\n  };\n};\n\n\n// --- Tab Components ---\n// Helper function to check if status is \"open\"\nconst isOpenStatus = (status: string, type: string): boolean => {\n  if (type === 'item') {\n    return status === 'available' || status === 'reserved';\n  } else if (type === 'ride') {\n    return status === 'active' || status === 'full';\n  } else if (type === 'task') {\n    return status === 'open' || status === 'in_progress';\n  } else if (type === 'donation') {\n    return status === 'active';\n  }\n  return true; // Posts are always shown\n};\n\n// Helper function to check if status is \"closed\"\nconst isClosedStatus = (status: string, type: string): boolean => {\n  if (type === 'item') {\n    return status === 'delivered' || status === 'completed';\n  } else if (type === 'ride') {\n    return status === 'completed';\n  } else if (type === 'task') {\n    return status === 'done' || status === 'archived';\n  } else if (type === 'donation') {\n    return status === 'completed';\n  }\n  return false; // Posts are not shown in closed\n};\n\nconst OpenRoute = ({ userId, user, onHeightChange }: { userId?: string, user?: any, onHeightChange?: (height: number) => void }) => {\n  const { t } = useTranslation(['profile']);\n  const { selectedUser } = useUser();\n  const [posts, setPosts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { db } = require('../utils/databaseService');\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Use provided userId or fallback to selectedUser.id\n  const targetUserId = userId || selectedUser?.id;\n\n  useEffect(() => {\n    const loadOpenContent = async () => {\n      if (!targetUserId) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        console.log('ğŸ“± OpenRoute - Loading open content for userId:', targetUserId);\n\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        const allContent: any[] = [];\n        const existingRideIds = new Set<string>();\n        const existingItemIds = new Set<string>();\n\n        // Load posts from API - handle all types with status\n        try {\n          const res = await apiService.getUserPosts(targetUserId, 50, selectedUser?.id);\n          if (res.success && Array.isArray(res.data)) {\n            res.data.forEach((p: any) => {\n              let shouldInclude = false;\n              let status = 'active';\n              let type = 'post';\n              const subtype = p.post_type;\n\n              // Determine if post should be in OPEN tab\n              if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n                const taskStatus = p.task?.status;\n                shouldInclude = taskStatus === 'open' || taskStatus === 'in_progress';\n                status = taskStatus || 'open';\n                type = 'task';\n              } else if (p.ride_data || p.post_type === 'ride') {\n                const rideStatus = p.ride_data?.status || 'active';\n                shouldInclude = rideStatus === 'active' || rideStatus === 'full';\n                status = rideStatus;\n                type = 'ride';\n                if (shouldInclude && p.ride_data?.id) existingRideIds.add(p.ride_data.id);\n              } else if ((p.item_data || p.post_type === 'item') || p.post_type === 'donation') {\n                const itemStatus = p.item_data?.status || 'available';\n                shouldInclude = itemStatus === 'available' || itemStatus === 'reserved' || itemStatus === 'active';\n                status = itemStatus;\n                type = p.post_type === 'donation' ? 'donation' : 'item';\n                if (shouldInclude && p.item_data?.id) existingItemIds.add(p.item_data.id);\n              } else {\n                // Regular posts - always active\n                shouldInclude = true;\n              }\n\n              if (shouldInclude) {\n                let fromLocation = '';\n                let toLocation = '';\n\n                let seats = 0;\n                let price = 0;\n                let time = '';\n                let date = '';\n\n                if (type === 'ride') {\n                  const rData = p.ride_data;\n                  if (rData) {\n                    fromLocation = rData.from_location?.city || rData.from_location?.name || rData.from_location?.address || '';\n                    toLocation = rData.to_location?.city || rData.to_location?.name || rData.to_location?.address || '';\n\n                    seats = rData.available_seats || 0;\n                    price = rData.price_per_seat || 0;\n\n                    if (rData.departure_time) {\n                      const formatted = formatRideTime(rData.departure_time);\n                      time = formatted.time;\n                      date = formatted.date;\n                    }\n                  }\n                }\n\n                allContent.push({\n                  id: p.id,\n                  title: p.title || '',\n                  thumbnail: (p.images && p.images.length > 0) ? p.images[0] : null,\n                  likes: p.likes || 0,\n                  comments: p.comments || 0,\n                  isLiked: p.is_liked || false,\n                  type: type as any,\n                  subtype: subtype,\n                  description: p.description || '',\n                  timestamp: p.created_at,\n                  status: status,\n                  user: user ? {\n                    id: user.id,\n                    name: user.name,\n                    avatar: user.avatar,\n                    karmaPoints: user.karmaPoints\n                  } : { id: 'unknown' },\n                  taskData: p.task,\n                  rideData: p.ride_data,\n                  itemData: p.item_data,\n                  from: fromLocation,\n                  to: toLocation,\n                  seats,\n                  price,\n                  time,\n                  date,\n                  rawData: p,\n                  // Add IDs for updating posts (critical for delete/close functionality)\n                  rideId: p.ride_id || p.ride_data?.id,\n                  itemId: p.item_data?.id || (p.item_id && !/^\\d{10,13}$/.test(p.item_id) ? p.item_id : undefined),\n                  taskId: p.task_id || p.task?.id\n                });\n              }\n            });\n            console.log('ğŸ“± OpenRoute - Loaded posts from API:', res.data.length);\n          }\n        } catch (error) {\n          console.error('Error loading posts from API:', error);\n        }\n\n        // Load items from API (available, reserved)\n        let userItems: any[] = [];\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            // Load available items\n            const availableResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'available', limit: 50 }\n            });\n            if (availableResponse.data?.success && Array.isArray(availableResponse.data.data)) {\n              userItems.push(...availableResponse.data.data);\n            }\n            // Load reserved items\n            const reservedResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'reserved', limit: 50 }\n            });\n            if (reservedResponse.data?.success && Array.isArray(reservedResponse.data.data)) {\n              userItems.push(...reservedResponse.data.data);\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          try {\n            const allItems = await db.getDedicatedItemsByOwner(targetUserId) || [];\n            userItems = allItems.filter((item: any) =>\n              item.status === 'available' || item.status === 'reserved'\n            );\n          } catch (error) {\n            console.error('Error loading items from local DB:', error);\n          }\n        }\n\n        // Process items\n        userItems.forEach((item: any) => {\n          if (existingItemIds.has(item.id)) return;\n          let thumbnail = '';\n          if (item.image_base64) {\n            const imageData = item.image_base64;\n            if (imageData.startsWith('data:image') || imageData.startsWith('http')) {\n              thumbnail = imageData;\n            } else if (imageData.length > 100) {\n              thumbnail = `data:image/jpeg;base64,${imageData}`;\n            }\n          }\n          allContent.push({\n            id: `item_${item.id}`,\n            title: item.title,\n            description: item.description || '',\n            thumbnail: thumbnail || null,\n            likes: 0,\n            comments: 0,\n            isLiked: false,\n            timestamp: item.created_at || new Date().toISOString(),\n            type: 'post', // Items map to 'post' or 'item' subtype depending on implementation\n            subtype: 'item',\n            status: item.status,\n            user: user ? {\n              id: user.id,\n              name: user.name,\n              avatar: user.avatar,\n              karmaPoints: user.karmaPoints\n            } : { id: 'unknown' },\n            itemData: {\n              ...item,\n              price: item.price\n            },\n            price: item.price,\n            rawData: item\n          });\n        });\n\n        // Load rides (active, full)\n        try {\n          const allRides = await enhancedDB.getRides({});\n          console.log('[ProfileScreen OpenRoute] Fetched rides:', allRides.length);\n\n          const userRides = allRides.filter((ride: any) => {\n            const driverId = ride.driver_id || ride.createdBy || ride.created_by || ride.driverId;\n            const status = ride.status || 'active';\n            const isUserRide = driverId === targetUserId && (status === 'active' || status === 'full');\n\n            if (isUserRide) {\n              console.log('[ProfileScreen OpenRoute] Found user ride:', ride.id, 'driver:', driverId);\n            }\n\n            return isUserRide;\n          });\n\n          console.log('[ProfileScreen OpenRoute] User rides count:', userRides.length);\n\n          userRides.forEach((ride: any) => {\n            if (existingRideIds.has(ride.id)) return;\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '';\n\n            let time = '';\n            let date = '';\n            if (ride.departure_time) {\n              const formatted = formatRideTime(ride.departure_time);\n              time = formatted.time;\n              date = formatted.date;\n            } else if (ride.time) {\n              time = ride.time;\n              date = ride.date || '';\n            }\n\n            allContent.push({\n              id: `ride_${ride.id}`,\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              description: ride.description || '',\n              thumbnail: ride.image || null,\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: ride.created_at || new Date().toISOString(),\n              type: 'post',\n              subtype: 'ride',\n              status: ride.status || 'active',\n              from: fromLocation,\n              to: toLocation,\n              seats: ride.available_seats || ride.seats || 0,\n              price: ride.price_per_seat || ride.price || 0,\n              time,\n              date,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              rideData: ride,\n              rawData: ride,\n              // Add rideId for updating posts (critical for delete/close functionality)\n              rideId: ride.id\n            });\n          });\n        } catch (error) {\n          console.error('[ProfileScreen OpenRoute] Error loading rides:', error);\n        }\n\n        // Load tasks (open, in_progress) - avoid duplicates with task posts\n        try {\n          // Get task IDs we already added from posts\n          const existingTaskIds = new Set(\n            allContent\n              .filter((c: any) => c.type === 'task' && c.taskData?.id)\n              .map((c: any) => c.taskData.id)\n          );\n\n          const openTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'open', limit: 50 });\n          const inProgressTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'in_progress', limit: 50 });\n          const tasks = [\n            ...(openTasksRes.success && Array.isArray(openTasksRes.data) ? openTasksRes.data : []),\n            ...(inProgressTasksRes.success && Array.isArray(inProgressTasksRes.data) ? inProgressTasksRes.data : [])\n          ];\n\n          tasks.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              console.log(`ğŸ“± OpenRoute - Skipping duplicate task: ${task.id}`);\n              return;\n            }\n\n            allContent.push({\n              id: `task_${task.id}`,\n              title: task.title,\n              description: task.description || '',\n              thumbnail: '',\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: task.created_at || new Date().toISOString(),\n              type: 'task_post',\n              subtype: 'task_assignment',\n              status: task.status,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              taskData: {\n                id: task.id,\n                title: task.title,\n                status: task.status\n              },\n              rawData: task\n            });\n          });\n        } catch (error) {\n          console.error('Error loading tasks:', error);\n        }\n\n        // Load donations (active)\n        try {\n          const donationsRes = await apiService.getUserDonations(targetUserId);\n          if (donationsRes.success && Array.isArray(donationsRes.data)) {\n            const activeDonations = donationsRes.data.filter((donation: any) => donation.status === 'active');\n            activeDonations.forEach((donation: any) => {\n              allContent.push({\n                id: `donation_${donation.id}`,\n                title: donation.title,\n                description: donation.description || '',\n                thumbnail: (donation.images && donation.images.length > 0) ? donation.images[0] : null,\n                likes: 0,\n                comments: 0,\n                isLiked: false,\n                timestamp: donation.created_at || new Date().toISOString(),\n                type: 'post',\n                subtype: 'donation',\n                status: donation.status,\n                user: user ? {\n                  id: user.id,\n                  name: user.name,\n                  avatar: user.avatar,\n                  karmaPoints: user.karmaPoints\n                } : { id: 'unknown' },\n                rawData: donation\n              });\n            });\n          }\n        } catch (error) {\n          console.error('Error loading donations:', error);\n        }\n\n        console.log('ğŸ“± OpenRoute - Total open content:', allContent.length);\n        setPosts(allContent);\n      } catch (error) {\n        console.error('Error loading open content:', error);\n        setPosts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadOpenContent();\n  }, [targetUserId]);\n\n  if (loading) {\n    return (\n      <View style={styles.tabContentPlaceholder}>\n        <Text style={styles.placeholderText}>×˜×•×¢×Ÿ ×ª×•×›×Ÿ ×¤×ª×•×—...</Text>\n      </View>\n    );\n  }\n\n  if (posts.length === 0) {\n    return (\n      <View style={[styles.tabContentPlaceholder, { height: 400 }]} onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}>\n        <Ionicons name=\"folder-open-outline\" size={60} color={colors.textSecondary} />\n        <Text style={styles.placeholderText}>××™×Ÿ ×ª×•×›×Ÿ ×¤×ª×•×— ×¢×“×™×™×Ÿ</Text>\n        <Text style={styles.placeholderSubtext}>×”×ª×•×›×Ÿ ×”×¤×ª×•×— ×©×œ×š ×™×•×¤×™×¢ ×›××Ÿ</Text>\n      </View>\n    );\n  }\n\n  const screenWidth = Dimensions.get('window').width;\n  const cardWidth = screenWidth / 3;\n\n  return (\n    <View style={styles.tabContentContainer}>\n      <FlatList\n        data={posts}\n        keyExtractor={(item) => item.id}\n        numColumns={3}\n        key={3}\n        scrollEnabled={false}\n        renderItem={({ item }) => (\n          <PostReelItem\n            item={item}\n            numColumns={3}\n            cardWidth={cardWidth}\n            onPress={() => { }}\n            onMorePress={handleMorePress}\n          />\n        )}\n        onContentSizeChange={(w, h) => {\n          if (onHeightChange) onHeightChange(h);\n        }}\n        contentContainerStyle={{ paddingBottom: 20 }}\n        showsVerticalScrollIndicator={false}\n      />\n      {/* Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n    </View>\n  );\n};\n\nconst ClosedRoute = ({ userId, user, onHeightChange }: { userId?: string, user?: any, onHeightChange?: (height: number) => void }) => {\n  const { t } = useTranslation(['profile']);\n  const { selectedUser } = useUser();\n  const [posts, setPosts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { db } = require('../utils/databaseService');\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Use provided userId or fallback to selectedUser.id\n  const targetUserId = userId || selectedUser?.id;\n\n  useEffect(() => {\n    const loadClosedContent = async () => {\n      if (!targetUserId) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        console.log('ğŸ“± ClosedRoute - Loading closed content for userId:', targetUserId);\n\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        const allContent: any[] = [];\n        const existingRideIds = new Set();\n        const existingItemIds = new Set();\n\n        // Load posts from API - handle all types with closed status\n        try {\n          const res = await apiService.getUserPosts(targetUserId, 50, selectedUser?.id);\n          if (res.success && Array.isArray(res.data)) {\n            res.data.forEach((p: any) => {\n              let shouldInclude = false;\n              let status = 'closed';\n              let type = 'post';\n              const subtype = p.post_type;\n\n              // Determine if post should be in CLOSED tab\n              if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n                const taskStatus = p.task?.status;\n                shouldInclude = taskStatus === 'done' || taskStatus === 'archived';\n                status = taskStatus || 'done';\n                type = 'task';\n              } else if (p.ride_data || p.post_type === 'ride') {\n                const rideStatus = p.ride_data?.status;\n                shouldInclude = rideStatus === 'completed' || rideStatus === 'cancelled';\n                status = rideStatus || 'completed';\n                type = 'ride';\n                if (shouldInclude && p.ride_data?.id) existingRideIds.add(p.ride_data.id);\n              } else if ((p.item_data || p.post_type === 'item') || p.post_type === 'donation') {\n                const itemStatus = p.item_data?.status;\n                shouldInclude = itemStatus === 'delivered' || itemStatus === 'completed' || itemStatus === 'expired';\n                status = itemStatus || 'completed';\n                type = p.post_type === 'donation' ? 'donation' : 'item';\n                if (shouldInclude && p.item_data?.id) existingItemIds.add(p.item_data.id);\n              } else {\n                // Regular posts - not shown in closed\n                shouldInclude = false;\n              }\n\n              let fromLocation = '';\n              let toLocation = '';\n\n              let seats = 0;\n              let price = 0;\n              let time = '';\n              let date = '';\n\n              if (type === 'ride') {\n                const rData = p.ride_data;\n                if (rData) {\n                  fromLocation = rData.from_location?.city || rData.from_location?.name || rData.from_location?.address || '';\n                  toLocation = rData.to_location?.city || rData.to_location?.name || rData.to_location?.address || '';\n\n                  seats = rData.available_seats || 0;\n                  price = rData.price_per_seat || 0;\n\n                  if (rData.departure_time) {\n                    const formatted = formatRideTime(rData.departure_time);\n                    time = formatted.time;\n                    date = formatted.date;\n                  }\n                }\n              }\n\n              if (shouldInclude) {\n                allContent.push({\n                  id: p.id,\n                  title: p.title || '',\n                  thumbnail: (p.images && p.images.length > 0) ? p.images[0] : null,\n                  likes: p.likes || 0,\n                  comments: p.comments || 0,\n                  isLiked: p.is_liked || false,\n                  type: type as any,\n                  subtype: subtype,\n                  description: p.description || '',\n                  timestamp: p.created_at,\n                  status: status,\n                  user: user ? {\n                    id: user.id,\n                    name: user.name,\n                    avatar: user.avatar,\n                    karmaPoints: user.karmaPoints\n                  } : { id: 'unknown' },\n                  taskData: p.task,\n                  rideData: p.ride_data,\n                  itemData: p.item_data,\n                  from: fromLocation,\n                  to: toLocation,\n                  seats,\n                  price,\n                  time,\n                  date,\n                  rawData: p,\n                  // Add IDs for updating posts (critical for delete/close functionality)\n                  rideId: p.ride_id || p.ride_data?.id,\n                  itemId: p.item_data?.id || (p.item_id && !/^\\d{10,13}$/.test(p.item_id) ? p.item_id : undefined),\n                  taskId: p.task_id || p.task?.id\n                });\n              }\n            });\n            console.log('ğŸ“± ClosedRoute - Loaded posts from API:', res.data.length);\n          }\n        } catch (error) {\n          console.error('Error loading posts from API:', error);\n        }\n\n        // Load items from API (delivered, completed)\n        let userItems: any[] = [];\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            // Load delivered items\n            const deliveredResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'delivered', limit: 50 }\n            });\n            if (deliveredResponse.data?.success && Array.isArray(deliveredResponse.data.data)) {\n              userItems.push(...deliveredResponse.data.data);\n            }\n            // Load completed items\n            const completedResponse = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: { owner_id: targetUserId, status: 'completed', limit: 50 }\n            });\n            if (completedResponse.data?.success && Array.isArray(completedResponse.data.data)) {\n              userItems.push(...completedResponse.data.data);\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          try {\n            const allItems = await db.getDedicatedItemsByOwner(targetUserId) || [];\n            userItems = allItems.filter((item: any) =>\n              item.status === 'delivered' || item.status === 'completed'\n            );\n          } catch (error) {\n            console.error('Error loading items from local DB:', error);\n          }\n        }\n\n        // Process items\n        userItems.forEach((item: any) => {\n          if (existingItemIds.has(item.id)) return;\n          let thumbnail = '';\n          if (item.image_base64) {\n            const imageData = item.image_base64;\n            if (imageData.startsWith('data:image') || imageData.startsWith('http')) {\n              thumbnail = imageData;\n            } else if (imageData.length > 100) {\n              thumbnail = `data:image/jpeg;base64,${imageData}`;\n            }\n          }\n          allContent.push({\n            id: `item_${item.id}`,\n            title: item.title,\n            description: item.description || '',\n            thumbnail: thumbnail || null,\n            likes: 0,\n            comments: 0,\n            isLiked: false,\n            timestamp: item.created_at || new Date().toISOString(),\n            type: 'post', // Items map to 'post' or 'item' subtype\n            subtype: 'item',\n            status: item.status,\n            user: user ? {\n              id: user.id,\n              name: user.name,\n              avatar: user.avatar,\n              karmaPoints: user.karmaPoints\n            } : { id: 'unknown' },\n            itemData: {\n              ...item,\n              price: item.price\n            },\n            price: item.price,\n            rawData: item\n          });\n        });\n\n        // Load rides (completed)\n        try {\n          const allRides = await enhancedDB.getRides({});\n          const userRides = allRides.filter((ride: any) => {\n            const createdBy = ride.createdBy || ride.created_by || ride.driver_id || ride.driverId;\n            const status = ride.status || 'active';\n            return createdBy === targetUserId && status === 'completed';\n          });\n          userRides.forEach((ride: any) => {\n            if (existingRideIds.has(ride.id)) return;\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '';\n\n            let time = '';\n            let date = '';\n            if (ride.departure_time) {\n              const formatted = formatRideTime(ride.departure_time);\n              time = formatted.time;\n              date = formatted.date;\n            } else if (ride.time) {\n              time = ride.time;\n              date = ride.date || '';\n            }\n\n            allContent.push({\n              id: `ride_${ride.id}`,\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              description: ride.description || '',\n              thumbnail: ride.image || null,\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: ride.created_at || new Date().toISOString(),\n              type: 'post',\n              subtype: 'ride',\n              status: ride.status || 'completed',\n              from: fromLocation,\n              to: toLocation,\n              seats: ride.available_seats || ride.seats || 0,\n              price: ride.price_per_seat || ride.price || 0,\n              time,\n              date,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              rideData: ride,\n              rawData: ride,\n              // Add rideId for updating posts (critical for delete/close functionality)\n              rideId: ride.id\n            });\n          });\n        } catch (error) {\n          console.error('Error loading rides:', error);\n        }\n\n        // Load tasks (done, archived) - avoid duplicates with task posts\n        try {\n          // Get task IDs we already added from posts\n          const existingTaskIds = new Set(\n            allContent\n              .filter((c: any) => c.type === 'task' && c.taskData?.id)\n              .map((c: any) => c.taskData.id)\n          );\n\n          const doneTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'done', limit: 50 });\n          const archivedTasksRes = await apiService.getTasks({ assignee: targetUserId, status: 'archived', limit: 50 });\n          const tasks = [\n            ...(doneTasksRes.success && Array.isArray(doneTasksRes.data) ? doneTasksRes.data : []),\n            ...(archivedTasksRes.success && Array.isArray(archivedTasksRes.data) ? archivedTasksRes.data : [])\n          ];\n\n          tasks.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              console.log(`ğŸ“± ClosedRoute - Skipping duplicate task: ${task.id}`);\n              return;\n            }\n\n            allContent.push({\n              id: `task_${task.id}`,\n              title: task.title,\n              description: task.description || '',\n              thumbnail: '',\n              likes: 0,\n              comments: 0,\n              isLiked: false,\n              timestamp: task.created_at || new Date().toISOString(),\n              type: 'task_post',\n              subtype: 'task_assignment',\n              status: task.status,\n              user: user ? {\n                id: user.id,\n                name: user.name,\n                avatar: user.avatar,\n                karmaPoints: user.karmaPoints\n              } : { id: 'unknown' },\n              taskData: {\n                id: task.id,\n                title: task.title,\n                status: task.status\n              },\n              rawData: task\n            });\n          });\n        } catch (error) {\n          console.error('Error loading tasks:', error);\n        }\n\n        // Load donations (completed)\n        try {\n          const donationsRes = await apiService.getUserDonations(targetUserId);\n          if (donationsRes.success && Array.isArray(donationsRes.data)) {\n            const completedDonations = donationsRes.data.filter((donation: any) => donation.status === 'completed');\n            completedDonations.forEach((donation: any) => {\n              allContent.push({\n                id: `donation_${donation.id}`,\n                title: donation.title,\n                description: donation.description || '',\n                thumbnail: (donation.images && donation.images.length > 0) ? donation.images[0] : null,\n                likes: 0,\n                comments: 0,\n                isLiked: false,\n                timestamp: donation.created_at || new Date().toISOString(),\n                type: 'post',\n                subtype: 'donation',\n                status: donation.status,\n                user: user ? {\n                  id: user.id,\n                  name: user.name,\n                  avatar: user.avatar,\n                  karmaPoints: user.karmaPoints\n                } : { id: 'unknown' },\n                rawData: donation\n              });\n            });\n          }\n        } catch (error) {\n          console.error('Error loading donations:', error);\n        }\n\n        console.log('ğŸ“± ClosedRoute - Total closed content:', allContent.length);\n        setPosts(allContent);\n      } catch (error) {\n        console.error('Error loading closed content:', error);\n        setPosts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadClosedContent();\n  }, [targetUserId]);\n\n  if (loading) {\n    return (\n      <View style={styles.tabContentPlaceholder}>\n        <Text style={styles.placeholderText}>×˜×•×¢×Ÿ ×ª×•×›×Ÿ ×¡×’×•×¨...</Text>\n      </View>\n    );\n  }\n\n  if (posts.length === 0) {\n    return (\n      <View style={[styles.tabContentPlaceholder, { height: 400 }]} onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}>\n        <Ionicons name=\"checkmark-done-circle-outline\" size={60} color={colors.textSecondary} />\n        <Text style={styles.placeholderText}>××™×Ÿ ×ª×•×›×Ÿ ×¡×’×•×¨ ×¢×“×™×™×Ÿ</Text>\n        <Text style={styles.placeholderSubtext}>×”×ª×•×›×Ÿ ×”×¡×’×•×¨ ×©×œ×š ×™×•×¤×™×¢ ×›××Ÿ</Text>\n      </View>\n    );\n  }\n\n  const screenWidth = Dimensions.get('window').width;\n  const cardWidth = screenWidth / 3;\n\n  return (\n    <View style={styles.tabContentContainer}>\n      <FlatList\n        data={posts}\n        keyExtractor={(item) => item.id}\n        numColumns={3}\n        key={3}\n        scrollEnabled={false}\n        renderItem={({ item }) => (\n          <PostReelItem\n            item={item}\n            numColumns={3}\n            cardWidth={cardWidth}\n            onPress={() => { }}\n            onMorePress={handleMorePress}\n          />\n        )}\n        onContentSizeChange={(w, h) => {\n          if (onHeightChange) onHeightChange(h);\n        }}\n        contentContainerStyle={{ paddingBottom: 20 }}\n        showsVerticalScrollIndicator={false}\n      />\n      {/* Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n    </View>\n  );\n};\n\nconst TaggedRoute = ({ onHeightChange }: { onHeightChange?: (height: number) => void }) => {\n  return (\n    <View\n      style={[styles.tabContentPlaceholder, { height: 400 }]}\n      onLayout={(e) => onHeightChange && onHeightChange(Math.max(400, e.nativeEvent.layout.height))}\n    >\n      <Ionicons name=\"person-outline\" size={60} color={colors.textSecondary} />\n      <Text style={styles.placeholderText}>×ª×™×•×’×™× ×™×”×™×” ×¤×¢×™×œ ×‘×”××©×š</Text>\n    </View>\n  );\n};\n\n// --- Main Component ---\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\n// Internal component that contains all the logic\n// It receives tabBarHeight as a prop so we can control it from outside\nfunction ProfileScreenContent({\n  tabBarHeight,\n  manualParams,\n  forceOtherProfile\n}: {\n  tabBarHeight: number;\n  manualParams?: ProfileScreenRouteParams;\n  forceOtherProfile?: boolean;\n}) {\n  const route = useRoute();\n  const { t } = useTranslation(['profile', 'common']);\n  const { selectedUser, setSelectedUserWithMode, isRealAuth } = useUser();\n  const navigation = useNavigation();\n  const { ToastComponent } = useToast();\n  const defaultLogo = require('../assets/images/android-chrome-192x192.png');\n\n  // Get route params for viewing other users' profiles\n  // Use manualParams if provided (from props), otherwise route.params\n  let routeParams = manualParams || (route.params as ProfileScreenRouteParams | undefined);\n\n  // On Web, handle refresh (F5) by restoring params from localStorage if route params are missing\n  const STORAGE_KEY = 'profileScreenParams';\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    if (!routeParams && !manualParams) {\n      // Try to restore from localStorage\n      try {\n        const stored = localStorage.getItem(STORAGE_KEY);\n        if (stored) {\n          const parsedParams = JSON.parse(stored);\n          routeParams = parsedParams;\n          console.log('ğŸ‘¤ ProfileScreen - Restored params from localStorage:', parsedParams);\n        }\n      } catch (error) {\n        console.warn('Failed to restore params from localStorage:', error);\n      }\n    } else if (routeParams?.userId) {\n      // Save params to localStorage when viewing other user's profile\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify({\n          userId: routeParams.userId,\n          userName: routeParams.userName,\n          // Don't save characterData as it might be large\n        }));\n      } catch (error) {\n        console.warn('Failed to save params to localStorage:', error);\n      }\n    }\n  }\n\n  const { userId: externalUserId, userName: externalUserName, characterData: externalCharacterData } = routeParams || {};\n\n  // Determine if viewing own profile or other user's profile\n  // CRITICAL: If externalUserId exists and equals selectedUser.id, it's OWN profile!\n  // Only if externalUserId exists and is DIFFERENT from selectedUser.id, it's another user's profile\n  // If no externalUserId, it's own profile (default)\n\n  // Normalize IDs to strings for comparison (in case one is number and one is string)\n  const normalizedExternalUserId = externalUserId ? String(externalUserId).trim() : null;\n  const normalizedSelectedUserId = selectedUser?.id ? String(selectedUser.id).trim() : null;\n\n  // Check if viewing own profile: \n  // 1. Force other profile is FALSE AND\n  // 2. (no externalUserId OR externalUserId equals selectedUser.id)\n  const isOwnProfile = !forceOtherProfile &&\n    (!normalizedExternalUserId ||\n      (normalizedExternalUserId === normalizedSelectedUserId));\n\n  const targetUserId = externalUserId || selectedUser?.id;\n\n  // Debug log to help identify the issue\n  console.log('ğŸ‘¤ ProfileScreenContent - Profile check:', {\n    externalUserId,\n    normalizedExternalUserId,\n    selectedUserId: selectedUser?.id,\n    normalizedSelectedUserId,\n    isOwnProfile,\n    areEqual: normalizedExternalUserId === normalizedSelectedUserId,\n    hasExternalUserId: !!externalUserId,\n    hasSelectedUser: !!selectedUser\n  });\n\n  const [index, setIndex] = useState(0);\n  const [showMenu, setShowMenu] = useState(false);\n  const [tabHeights, setTabHeights] = useState<Record<string, number>>({});\n\n  const handleTabHeightChange = (key: string, height: number) => {\n    // Add some buffer and min height\n    const newHeight = Math.max(height, 500);\n    setTabHeights(prev => {\n      if (Math.abs((prev[key] || 0) - newHeight) < 10) return prev;\n      return { ...prev, [key]: newHeight };\n    });\n  };\n  const [userStats, setUserStats] = useState({\n    posts: 0,\n    followers: 0,\n    following: 0,\n    karmaPoints: 0,\n    completedTasks: 0,\n    totalDonations: 0,\n  });\n  const [recentActivities, setRecentActivities] = useState<any[]>([]);\n  const [selectedActivity, setSelectedActivity] = useState<any | null>(null);\n  const [showActivityModal, setShowActivityModal] = useState(false);\n\n  // State for viewing other user's profile\n  const [viewingUser, setViewingUser] = useState<CharacterType | null>(externalCharacterData || null);\n  const [isFollowing, setIsFollowing] = useState(false);\n  const [followStats, setFollowStats] = useState({ followersCount: 0, followingCount: 0, isFollowing: false });\n  const [updatedCounts, setUpdatedCounts] = useState({ followersCount: 0, followingCount: 0 });\n  const [loadingUser, setLoadingUser] = useState(!isOwnProfile && !externalCharacterData);\n\n  // The user to display (either selectedUser for own profile, or viewingUser for other user's profile)\n  const displayUser = isOwnProfile ? selectedUser : viewingUser;\n\n  // Clean up localStorage when viewing own profile or when component unmounts\n  useEffect(() => {\n    if (isOwnProfile && Platform.OS === 'web' && typeof window !== 'undefined') {\n      try {\n        localStorage.removeItem(STORAGE_KEY);\n      } catch (error) {\n        // Ignore errors\n      }\n    }\n  }, [isOwnProfile]);\n\n  // Load user data from backend if viewing other user's profile\n  useEffect(() => {\n    const loadUser = async () => {\n      if (isOwnProfile || !externalUserId) {\n        return;\n      }\n\n      if (!externalCharacterData && externalUserId && USE_BACKEND) {\n        try {\n          setLoadingUser(true);\n          const response = await apiService.getUserById(externalUserId);\n          if (response.success && response.data) {\n            const userData = response.data as any;\n            const mappedUser: CharacterType = {\n              id: userData.id,\n              name: userData.name || externalUserName || '×œ×œ× ×©×',\n              avatar: userData.avatar_url || userData.avatar || 'https://i.pravatar.cc/150?img=1',\n              bio: userData.bio || '',\n              karmaPoints: userData.karma_points || 0,\n              completedTasks: 0,\n              roles: userData.roles || ['user'],\n              isVerified: userData.is_verified || false,\n              location: userData.city ? {\n                city: userData.city,\n                country: userData.country || '×™×©×¨××œ'\n              } : { city: '×™×©×¨××œ', country: 'IL' },\n              joinDate: userData.join_date || userData.created_at || new Date().toISOString(),\n              interests: userData.interests || [],\n              parentManagerId: userData.parent_manager_id || null,\n            };\n            setViewingUser(mappedUser);\n            // Save userId to localStorage after successful load (Web only)\n            if (Platform.OS === 'web' && typeof window !== 'undefined') {\n              try {\n                localStorage.setItem(STORAGE_KEY, JSON.stringify({\n                  userId: externalUserId,\n                  userName: mappedUser.name,\n                }));\n              } catch (error) {\n                // Ignore errors\n              }\n            }\n          } else {\n            console.warn('User not found:', externalUserId);\n            setViewingUser(null);\n          }\n        } catch (error) {\n          console.error('âŒ Load user error:', error);\n          if (externalUserName && externalUserName !== '××©×ª××© ×œ× ×™×“×•×¢') {\n            setViewingUser({\n              id: externalUserId,\n              name: externalUserName || '×œ×œ× ×©×',\n              avatar: 'https://i.pravatar.cc/150?img=1',\n              bio: '',\n              karmaPoints: 0,\n              completedTasks: 0,\n              roles: ['user'],\n              isVerified: false,\n              location: { city: '×™×©×¨××œ', country: 'IL' },\n              joinDate: new Date().toISOString(),\n              interests: [],\n            });\n          } else {\n            setViewingUser(null);\n          }\n        } finally {\n          setLoadingUser(false);\n        }\n      } else if (externalCharacterData) {\n        setViewingUser(externalCharacterData);\n        setLoadingUser(false);\n      } else if (!USE_BACKEND && externalUserId && externalUserName) {\n        setViewingUser({\n          id: externalUserId,\n          name: externalUserName || '×œ×œ× ×©×',\n          avatar: 'https://i.pravatar.cc/150?img=1',\n          bio: '',\n          karmaPoints: 0,\n          completedTasks: 0,\n          roles: ['user'],\n          isVerified: false,\n          location: { city: '×™×©×¨××œ', country: 'IL' },\n          joinDate: new Date().toISOString(),\n          interests: [],\n        });\n        setLoadingUser(false);\n      }\n    };\n\n    loadUser();\n  }, [externalUserId, externalUserName, externalCharacterData, isOwnProfile]);\n\n  // Load follow stats when viewing other user's profile\n  useEffect(() => {\n    const loadFollowStats = async () => {\n      if (isOwnProfile || !viewingUser || !selectedUser || !viewingUser.id) return;\n\n      try {\n        console.log('ğŸ‘¤ ProfileScreen - Loading follow stats for user:', viewingUser.name);\n        const stats = await getFollowStats(viewingUser.id, selectedUser.id);\n        const counts = await getUpdatedFollowCounts(viewingUser.id);\n        setFollowStats(stats);\n        setUpdatedCounts(counts);\n        setIsFollowing(stats.isFollowing);\n      } catch (error) {\n        console.error('âŒ Load follow stats error:', error);\n      }\n    };\n\n    loadFollowStats();\n  }, [viewingUser, selectedUser, isOwnProfile]);\n\n  // Function to update user statistics\n  const updateUserStats = async () => {\n    try {\n      const userIdToUse = isOwnProfile ? selectedUser?.id : viewingUser?.id;\n      if (!userIdToUse) {\n        console.warn('âš ï¸ No user ID, skipping stats update');\n        return;\n      }\n\n      const currentUserStats = await getFollowStats(userIdToUse, userIdToUse);\n      const userToUse = isOwnProfile ? selectedUser : viewingUser;\n\n      setUserStats({\n        posts: (userToUse as any)?.postsCount || 0,\n        followers: currentUserStats.followersCount,\n        following: currentUserStats.followingCount,\n        karmaPoints: userToUse?.karmaPoints || 0,\n        completedTasks: (userToUse as any)?.completedTasks || 0,\n        totalDonations: (userToUse as any)?.totalDonations || 0,\n      });\n    } catch (error) {\n      console.error('âŒ Update user stats error:', error);\n    }\n  };\n\n  // Function to load recent user activities from database (only for own profile)\n  const loadRecentActivities = async () => {\n    try {\n      if (!isOwnProfile) {\n        setRecentActivities([]);\n        return;\n      }\n\n      if (!selectedUser?.id) {\n        setRecentActivities([]);\n        return;\n      }\n\n      const activities: any[] = [];\n      const userId = selectedUser.id;\n\n      // Load posts\n      try {\n        const { db } = require('../utils/databaseService');\n        const userPosts = await db.getUserPosts(userId) || [];\n        userPosts.forEach((post: any) => {\n          activities.push({\n            id: `post_${post.id}`,\n            type: 'post',\n            title: post.title || post.content || '×¤×•×¡×˜ ×—×“×©',\n            time: post.created_at || post.createdAt || new Date().toISOString(),\n            icon: 'image-outline',\n            color: colors.info,\n            rawData: post\n          });\n        });\n      } catch (error) {\n        console.error('Error loading posts:', error);\n      }\n\n      // Load items/donations\n      try {\n        const { USE_BACKEND, API_BASE_URL } = await import('../utils/dbConfig');\n        let userItems: any[] = [];\n\n        if (USE_BACKEND && API_BASE_URL) {\n          try {\n            const axios = (await import('axios')).default;\n            const response = await axios.get(`${API_BASE_URL}/api/items-delivery/search`, {\n              params: {\n                owner_id: userId,\n                limit: 20,\n              }\n            });\n            if (response.data?.success && Array.isArray(response.data.data)) {\n              userItems = response.data.data;\n            }\n          } catch (error) {\n            console.error('Error loading items from API:', error);\n          }\n        } else {\n          const { db } = require('../utils/databaseService');\n          userItems = await db.getDedicatedItemsByOwner(userId) || [];\n        }\n\n        userItems.forEach((item: any) => {\n          activities.push({\n            id: `item_${item.id}`,\n            type: 'item',\n            title: item.title || '×¤×¨×™×˜ ×—×“×©',\n            time: item.created_at || item.createdAt || new Date().toISOString(),\n            icon: 'cube-outline',\n            color: colors.pink,\n            rawData: item\n          });\n        });\n      } catch (error) {\n        console.error('Error loading items:', error);\n      }\n\n      // Load donations - filter by createdBy after loading\n      try {\n        const allDonations = await enhancedDB.getDonations({});\n        const userDonations = allDonations.filter((donation: any) => {\n          const createdBy = donation.createdBy || donation.created_by || donation.donor_id || donation.donorId;\n          return createdBy === userId;\n        });\n\n        userDonations.forEach((donation: any) => {\n          const donationTitle = donation.type === 'money'\n            ? `×ª×¨×•××”: ${donation.amount || 0} â‚ª`\n            : donation.type === 'time'\n              ? `×”×ª× ×“×‘×•×ª: ${donation.title || ''}`\n              : donation.type === 'trump'\n                ? `×˜×¨××¤: ${donation.title || ''}`\n                : donation.title || '×ª×¨×•××” ×—×“×©×”';\n\n          activities.push({\n            id: `donation_${donation.id}`,\n            type: 'donation',\n            title: donationTitle,\n            time: donation.created_at || donation.createdAt || new Date().toISOString(),\n            icon: 'heart-outline',\n            color: colors.error,\n            rawData: donation\n          });\n        });\n      } catch (error) {\n        console.error('Error loading donations:', error);\n      }\n\n      // Load rides using the correct API endpoint\n      try {\n        const userRidesResponse = await apiService.getUserRides(userId, 'driver');\n        if (userRidesResponse.success && Array.isArray(userRidesResponse.data)) {\n          userRidesResponse.data.forEach((ride: any) => {\n            const fromLocation = ride.from || ride.from_location?.name || ride.from_location?.city || '×œ× ×¦×•×™×™×Ÿ';\n            const toLocation = ride.to || ride.to_location?.name || ride.to_location?.city || '×œ× ×¦×•×™×™×Ÿ';\n            activities.push({\n              id: `ride_${ride.id}`,\n              type: 'ride',\n              title: `×˜×¨××¤: ${fromLocation} â ${toLocation}`,\n              time: ride.created_at || ride.createdAt || new Date().toISOString(),\n              icon: 'car-sport-outline',\n              color: colors.info,\n              rawData: ride\n            });\n          });\n        }\n      } catch (error) {\n        console.error('Error loading rides:', error);\n      }\n\n      // Load task posts (both assignment and completion) with proper icons\n      try {\n        const taskPostsRes = await apiService.getUserPosts(userId, 50, selectedUser?.id);\n        if (taskPostsRes.success && Array.isArray(taskPostsRes.data)) {\n          taskPostsRes.data.forEach((p: any) => {\n            if (p.post_type === 'task_assignment' || p.post_type === 'task_completion') {\n              const icon = p.post_type === 'task_assignment'\n                ? 'add-circle-outline'\n                : 'checkmark-circle-outline';\n              const color = p.post_type === 'task_assignment'\n                ? colors.info\n                : colors.success;\n              const typeLabel = p.post_type === 'task_assignment'\n                ? '××©×™××” ×—×“×©×”'\n                : '××©×™××” ×”×•×©×œ××”';\n\n              activities.push({\n                id: `taskpost_${p.id}`,\n                type: 'task_post',\n                subtype: p.post_type,\n                title: p.title || typeLabel,\n                time: p.created_at || new Date().toISOString(),\n                icon,\n                color,\n                rawData: p\n              });\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error loading task posts:', error);\n      }\n\n      // Load tasks (all statuses) - for tasks without posts (legacy)\n      try {\n        // Get task IDs we already added from posts\n        const existingTaskIds = new Set(\n          activities\n            .filter((a: any) => a.type === 'task_post' && a.rawData?.task?.id)\n            .map((a: any) => a.rawData.task.id)\n        );\n\n        const tasksRes = await apiService.getTasks({ assignee: userId, limit: 50 });\n        if (tasksRes.success && Array.isArray(tasksRes.data)) {\n          tasksRes.data.forEach((task: any) => {\n            // Skip if already added via task posts\n            if (existingTaskIds.has(task.id)) {\n              return;\n            }\n\n            activities.push({\n              id: `task_${task.id}`,\n              type: 'task',\n              title: task.title || '××©×™××” ×—×“×©×”',\n              time: task.created_at || new Date().toISOString(),\n              icon: 'checkmark-circle-outline',\n              color: colors.success,\n              rawData: task\n            });\n          });\n        }\n      } catch (error) {\n        console.error('Error loading tasks:', error);\n      }\n\n      // Sort by time (newest first) and limit to 10\n      activities.sort((a, b) => {\n        const timeA = new Date(a.time).getTime();\n        const timeB = new Date(b.time).getTime();\n        return timeB - timeA;\n      });\n\n      // Format time for display\n      const formattedActivities = activities.slice(0, 10).map(activity => {\n        const activityTime = new Date(activity.time);\n        const now = new Date();\n        const diffMs = now.getTime() - activityTime.getTime();\n        const diffMins = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n\n        let timeText = '';\n        if (diffMins < 1) {\n          timeText = '×œ×¤× ×™ ×¨×’×¢';\n        } else if (diffMins < 60) {\n          timeText = `×œ×¤× ×™ ${diffMins} ×“×§×•×ª`;\n        } else if (diffHours < 24) {\n          timeText = `×œ×¤× ×™ ${diffHours} ×©×¢×•×ª`;\n        } else if (diffDays < 7) {\n          timeText = `×œ×¤× ×™ ${diffDays} ×™××™×`;\n        } else {\n          timeText = activityTime.toLocaleDateString('he-IL');\n        }\n\n        return {\n          ...activity,\n          time: timeText\n        };\n      });\n\n      setRecentActivities(formattedActivities);\n    } catch (error) {\n      console.error('âŒ Load recent activities error:', error);\n      setRecentActivities([]);\n    }\n  };\n\n  // Function to select a random user (demo mode only - disabled)\n  const selectRandomUser = () => {\n    if (isRealAuth) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n      return;\n    }\n    // Demo mode removed - this function is no longer available\n    Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n  };\n\n  // Function to create sample follow data\n  const handleCreateSampleData = async () => {\n    if (isRealAuth) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.disabledOnRealAuth'));\n      return;\n    }\n    if (!selectedUser?.id) {\n      Alert.alert(t('common:errorTitle'), t('profile:alerts.noUserSelected'));\n      return;\n    }\n    await createSampleFollowData();\n    await createSampleChatData(selectedUser.id);\n    updateUserStats();\n    Alert.alert(t('profile:alerts.sampleDataTitle'), t('profile:alerts.sampleDataCreated'));\n  };\n  const [routes] = useState<TabRoute[]>([\n    { key: 'open', title: '×¤×ª×•×—' },\n    { key: 'closed', title: '×¡×’×•×¨' },\n    { key: 'tagged', title: '×ª×™×•×’×™×' },\n  ]);\n\n  // Update stats when user changes\n  useEffect(() => {\n    const updateStats = async () => {\n      await updateUserStats();\n    };\n    updateStats();\n  }, [selectedUser, viewingUser, isOwnProfile]);\n\n  // Refresh stats when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      const refreshStats = async () => {\n        console.log('ğŸ‘¤ ProfileScreen - Screen focused, refreshing stats...', { isOwnProfile, targetUserId });\n        await updateUserStats();\n        if (isOwnProfile) {\n          await loadRecentActivities();\n        } else if (viewingUser && selectedUser) {\n          // Refresh follow stats for other user's profile\n          try {\n            const stats = await getFollowStats(viewingUser.id, selectedUser.id);\n            const counts = await getUpdatedFollowCounts(viewingUser.id);\n            setFollowStats(stats);\n            setUpdatedCounts(counts);\n            setIsFollowing(stats.isFollowing);\n          } catch (error) {\n            console.error('âŒ Refresh follow stats error:', error);\n          }\n        }\n\n        // Force re-render by updating a timestamp\n        const refreshTimestamp = Date.now();\n        setUserStats(prevStats => ({\n          ...prevStats,\n          refreshTimestamp\n        }));\n      };\n      refreshStats();\n    }, [selectedUser, viewingUser, isOwnProfile, targetUserId])\n  );\n\n  // Load activities when selectedUser changes (only for own profile)\n  useEffect(() => {\n    if (isOwnProfile) {\n      loadRecentActivities();\n    }\n  }, [selectedUser, isOwnProfile]);\n\n  const renderScene = ({ route: sceneRoute }: SceneRendererProps & { route: TabRoute }) => {\n    switch (sceneRoute.key) {\n      case 'open':\n        return <OpenRoute userId={targetUserId} user={displayUser} onHeightChange={(h) => handleTabHeightChange('open', h)} />;\n      case 'closed':\n        return <ClosedRoute userId={targetUserId} user={displayUser} onHeightChange={(h) => handleTabHeightChange('closed', h)} />;\n      case 'tagged':\n        return <TaggedRoute onHeightChange={(h) => handleTabHeightChange('tagged', h)} />;\n      default:\n        return null;\n    }\n  };\n\n  const currentTabHeight = tabHeights[routes[index].key] || 600;\n\n\n  const renderTabBar = (\n    props: SceneRendererProps & { navigationState: NavigationState<TabRoute> }\n  ) => (\n    <View style={styles.tabBarContainer}>\n      <View style={styles.tabBarInner}>\n        {props.navigationState.routes.map((route, index) => {\n          const isFocused = props.navigationState.index === index;\n          return (\n            <TouchableOpacity\n              key={route.key}\n              style={styles.tabBarItem}\n              onPress={() => props.jumpTo(route.key)}\n            >\n              <Text\n                style={[\n                  styles.tabBarText,\n                  {\n                    color: isFocused ? colors.secondary : colors.textSecondary,\n                    fontWeight: isFocused ? 'bold' : 'normal',\n                  }\n                ]}\n              >\n                {route.title}\n              </Text>\n              {isFocused && <View style={styles.tabBarIndicator} />}\n            </TouchableOpacity>\n          );\n        })}\n      </View>\n    </View>\n  );\n\n  // User Statistics are now managed by state and updated via useFocusEffect\n  // Recent Activities are now loaded from database (see loadRecentActivities function)\n\n  // Derived display values\n  const avatarSource = displayUser?.avatar ? { uri: displayUser.avatar } : defaultLogo;\n\n  // Show error if viewing other user's profile and user not found\n  if (!isOwnProfile && !loadingUser && !viewingUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"person-outline\" size={60} color={colors.textSecondary} />\n          <Text style={styles.errorText}>××©×ª××© ×œ× × ××¦×</Text>\n          <Text style={styles.errorSubtext}>userId: {externalUserId}</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => {\n              if (navigation.canGoBack()) {\n                navigation.goBack();\n              } else {\n                (navigation as any).navigate('HomeStack');\n              }\n            }}\n          >\n            <Ionicons name=\"home\" size={20} color={colors.white} />\n            <Text style={styles.backButtonText}>×—×–×¨×” ×œ×¢××•×“ ×”×‘×™×ª</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Show loading if loading other user's profile\n  if (!isOwnProfile && loadingUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"hourglass-outline\" size={60} color={colors.textSecondary} />\n          <Text style={styles.errorText}>×˜×•×¢×Ÿ...</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {Platform.OS === 'web' ? (\n        <View style={styles.webScrollContainer}>\n          <View\n            style={[styles.webScrollContent, { paddingBottom: tabBarHeight + scaleSize(24) }]}\n            onLayout={(e) => {\n              const h = e.nativeEvent.layout.height;\n              console.log('ğŸ§­ ProfileScreen[WEB] content layout height:', h, 'window:', SCREEN_HEIGHT);\n            }}\n          >\n            {/* Header for other user's profile */}\n            {!isOwnProfile && (\n              <View style={styles.header}>\n                <TouchableOpacity\n                  style={styles.headerIcon}\n                  onPress={() => navigation.goBack()}\n                >\n                  <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n                </TouchableOpacity>\n                <Text style={styles.username}>{displayUser?.name || externalUserName || '×œ×œ× ×©×'}</Text>\n                <TouchableOpacity\n                  style={styles.headerIcon}\n                  onPress={() => Alert.alert('××¤×©×¨×•×™×•×ª', '×¤×ª×™×—×ª ××¤×©×¨×•×™×•×ª')}\n                >\n                  <Ionicons name=\"ellipsis-horizontal\" size={24} color={colors.textPrimary} />\n                </TouchableOpacity>\n              </View>\n            )}\n\n            {/* Completion Banner - only for own profile */}\n            {isOwnProfile && <ProfileCompletionBanner />}\n\n            {/* Profile Info with Menu Icon */}\n            <View style={styles.profileInfo}>\n              {isOwnProfile && (\n                <TouchableOpacity\n                  style={styles.menuIcon}\n                  onPress={() => setShowMenu(!showMenu)}\n                >\n                  <Ionicons name=\"menu\" size={scaleSize(24)} color={colors.textPrimary} />\n                </TouchableOpacity>\n              )}\n              <View style={styles.profileSection}>\n                <Image source={avatarSource} style={styles.profilePicture} />\n              </View>\n\n              <View style={styles.statsContainer}>\n                {isOwnProfile && !isRealAuth && (\n                  <View style={styles.statItem}>\n                    <Text style={styles.statNumber}>{userStats.posts}</Text>\n                    <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                  </View>\n                )}\n                {!isOwnProfile && (\n                  <View style={styles.statItem}>\n                    <Text style={styles.statNumber}>{(displayUser as any)?.postsCount || 0}</Text>\n                    <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                  </View>\n                )}\n                <TouchableOpacity\n                  style={styles.statItem}\n                  onPress={() => {\n                    if (!targetUserId) return;\n                    (navigation as any).navigate('FollowersScreen', {\n                      userId: targetUserId,\n                      type: 'followers',\n                      title: t('profile:followersTitle')\n                    });\n                  }}\n                >\n                  <Text style={styles.statNumber}>{isOwnProfile ? userStats.followers : updatedCounts.followersCount}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.followers')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.statItem}\n                  onPress={() => {\n                    if (!targetUserId) return;\n                    (navigation as any).navigate('FollowersScreen', {\n                      userId: targetUserId,\n                      type: 'following',\n                      title: t('profile:followingTitle')\n                    });\n                  }}\n                >\n                  <Text style={styles.statNumber}>{isOwnProfile ? userStats.following : updatedCounts.followingCount}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.following')}</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Menu Modal with Backdrop - only for own profile */}\n            {isOwnProfile && showMenu && (\n              <TouchableWithoutFeedback onPress={() => setShowMenu(false)}>\n                <View style={styles.menuBackdrop}>\n                  <TouchableWithoutFeedback onPress={() => { }}>\n                    <View style={styles.menuOverlay}>\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          navigation.navigate('BookmarksScreen' as never);\n                        }}\n                      >\n                        <Ionicons name=\"bookmark-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.bookmarks')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n\n                        }}\n                      >\n                        <Ionicons name=\"analytics-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.communityStats')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.shareProfile'), t('profile:alerts.shareProfileDesc'));\n                        }}\n                      >\n                        <Ionicons name=\"share-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.shareProfile')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          (navigation as any).navigate('EditProfileScreen');\n                        }}\n                      >\n                        <Ionicons name=\"create-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.editProfile')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.settings'), t('profile:alerts.openSettings'));\n                        }}\n                      >\n                        <Ionicons name=\"settings-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.settings')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          Alert.alert(t('profile:alerts.help'), t('profile:alerts.openHelp'));\n                        }}\n                      >\n                        <Ionicons name=\"help-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.help')}</Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.menuItem}\n                        onPress={() => {\n                          setShowMenu(false);\n                          navigation.navigate('LoginScreen' as never);\n                        }}\n                      >\n                        <Ionicons name=\"log-in-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                        <Text style={styles.menuItemText}>{t('profile:menu.login')}</Text>\n                      </TouchableOpacity>\n\n                      {!isRealAuth && (\n                        <>\n                          <TouchableOpacity\n                            style={styles.menuItem}\n                            onPress={selectRandomUser}\n                          >\n                            <Ionicons name=\"shuffle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                            <Text style={styles.menuItemText}>{t('profile:menu.switchUser')}</Text>\n                          </TouchableOpacity>\n\n                          <TouchableOpacity\n                            style={styles.menuItem}\n                            onPress={handleCreateSampleData}\n                          >\n                            <Ionicons name=\"add-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                            <Text style={styles.menuItemText}>{t('profile:menu.createSampleData')}</Text>\n                          </TouchableOpacity>\n                        </>\n                      )}\n                    </View>\n                  </TouchableWithoutFeedback>\n                </View>\n              </TouchableWithoutFeedback>\n            )}\n\n            {/* Bio Section */}\n            <View style={styles.bioSection}>\n              <Text style={styles.fullName}>{displayUser?.name || externalUserName || ''}</Text>\n              {!!displayUser?.bio && (\n                <Text style={styles.bioText}>{displayUser.bio}</Text>\n              )}\n              {!!(typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city) && (\n                <Text style={styles.locationText}>\n                  <Ionicons name=\"location-outline\" size={scaleSize(14)} color={colors.textSecondary} />{' '}\n                  {typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city || ''}\n                </Text>\n              )}\n\n              {/* Additional user details for other user's profile */}\n              {!isOwnProfile && displayUser && (\n                <View style={styles.characterDetails}>\n                  {/* Verification badge */}\n                  {(displayUser as CharacterType).isVerified && (\n                    <View style={styles.verificationBadge}>\n                      <Ionicons name=\"checkmark-circle\" size={16} color={colors.info} />\n                      <Text style={styles.verifiedText}>×××•××ª</Text>\n                    </View>\n                  )}\n\n                  {/* Roles */}\n                  {displayUser.roles && displayUser.roles.length > 0 && (\n                    <View style={styles.rolesContainer}>\n                      {displayUser.roles.map((role, index) => (\n                        <View key={index} style={styles.roleTag}>\n                          <Text style={styles.roleText}>{getRoleDisplayName(role)}</Text>\n                        </View>\n                      ))}\n                    </View>\n                  )}\n\n                  {/* Interests */}\n                  {displayUser.interests && displayUser.interests.length > 0 && (\n                    <View style={styles.interestsContainer}>\n                      <Text style={styles.sectionTitle}>×ª×—×•××™ ×¢× ×™×™×Ÿ:</Text>\n                      <View style={styles.interestsList}>\n                        {displayUser.interests.slice(0, 4).map((interest, index) => (\n                          <Text key={index} style={styles.interestTag}>#{interest}</Text>\n                        ))}\n                      </View>\n                    </View>\n                  )}\n\n                  {/* Join date */}\n                  {displayUser.joinDate && (\n                    <Text style={styles.joinDate}>\n                      ×”×¦×˜×¨×£ ×‘-{new Date(displayUser.joinDate).toLocaleDateString('he-IL')}\n                    </Text>\n                  )}\n                </View>\n              )}\n\n              {/* Karma Points */}\n              <View style={styles.karmaSection}>\n                <View style={styles.karmaCard}>\n                  <Ionicons name=\"star\" size={scaleSize(20)} color={colors.warning} />\n                  <Text style={styles.karmaText}>{(displayUser?.karmaPoints || userStats.karmaPoints)} {t('profile:stats.karmaPointsSuffix')}</Text>\n                </View>\n              </View>\n\n              {/* Activity Icons - only for own profile */}\n              {isOwnProfile && !isRealAuth && (\n                <View style={styles.activityIcons}>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.activity'), t('profile:alerts.viewActivity'))}\n                  >\n                    <Ionicons name=\"star-outline\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:activity')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.history'), t('profile:alerts.activityHistory'))}\n                  >\n                    <MaterialCommunityIcons name=\"history\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:history')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={styles.activityIconItem}\n                    onPress={() => Alert.alert(t('profile:alerts.favorites'), t('profile:alerts.yourFavorites'))}\n                  >\n                    <Ionicons name=\"heart-outline\" size={scaleSize(24)} color={colors.secondary} />\n                    <Text style={styles.activityIconText}>{t('profile:favorites')}</Text>\n                  </TouchableOpacity>\n                </View>\n              )}\n            </View>\n\n            {/* Action Buttons */}\n            <View style={styles.actionButtonsContainer}>\n              {isOwnProfile ? (\n                <>\n                  <TouchableOpacity\n                    style={styles.discoverPeopleButton}\n                    onPress={() => {\n                      navigation.navigate('DiscoverPeopleScreen' as never);\n                    }}\n                  >\n                    <Ionicons name=\"person-add-outline\" size={scaleSize(18)} color={colors.white} />\n                    <Text style={styles.discoverPeopleText}>{t('profile:discoverPeople')}</Text>\n                  </TouchableOpacity>\n                </>\n              ) : (\n                <>\n                  {selectedUser && displayUser && selectedUser.id !== displayUser.id && (\n                    <>\n                      <TouchableOpacity\n                        style={[\n                          styles.followButton,\n                          isFollowing && styles.followingButton\n                        ]}\n                        onPress={async () => {\n                          if (!selectedUser) {\n                            Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n                            return;\n                          }\n\n                          try {\n                            if (!displayUser?.id) {\n                              Alert.alert('×©×’×™××”', '××©×ª××© ×œ× × ××¦×');\n                              return;\n                            }\n\n                            if (isFollowing) {\n                              const success = await unfollowUser(selectedUser.id, displayUser.id);\n                              if (success) {\n                                setIsFollowing(false);\n                                const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                                setUpdatedCounts(newCounts);\n                                setFollowStats(prev => ({ ...prev, isFollowing: false }));\n                                Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n                              }\n                            } else {\n                              const success = await followUser(selectedUser.id, displayUser.id);\n                              if (success) {\n                                setIsFollowing(true);\n                                const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                                setUpdatedCounts(newCounts);\n                                setFollowStats(prev => ({ ...prev, isFollowing: true }));\n                                Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n                              }\n                            }\n                          } catch (error) {\n                            console.error('âŒ Follow/Unfollow error:', error);\n                            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n                          }\n                        }}\n                      >\n                        <Text style={[\n                          styles.followButtonText,\n                          isFollowing && styles.followingButtonText\n                        ]}>\n                          {isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n                        </Text>\n                      </TouchableOpacity>\n\n                      <TouchableOpacity\n                        style={styles.messageButton}\n                        onPress={async () => {\n                          if (!selectedUser) {\n                            Alert.alert('×©×’×™××”', '×™×© ×œ×‘×—×•×¨ ×™×•×–×¨ ×ª×—×™×œ×”');\n                            return;\n                          }\n\n                          try {\n                            const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                            let conversationId: string;\n\n                            if (existingConvId) {\n                              console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n                              conversationId = existingConvId;\n                            } else {\n                              console.log('ğŸ’¬ Creating new conversation...');\n                              conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                            }\n\n                            (navigation as any).navigate('ChatDetailScreen', {\n                              conversationId,\n                              otherUserId: displayUser.id,\n                              userName: displayUser.name || externalUserName || '×œ×œ× ×©×',\n                              userAvatar: displayUser.avatar || 'https://i.pravatar.cc/150?img=1',\n                            });\n                          } catch (error) {\n                            console.error('âŒ Create chat error:', error);\n                            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×©×™×—×”');\n                          }\n                        }}\n                      >\n                        <Ionicons name=\"chatbubble-outline\" size={20} color={colors.textPrimary} />\n                        <Text style={styles.messageButtonText}>×”×•×“×¢×”</Text>\n                      </TouchableOpacity>\n\n                      {/* Hierarchy Management Button */}\n                      {(() => {\n                        const isSubordinate = (displayUser as any).parentManagerId === selectedUser.id;\n                        const isMyManager = (selectedUser as any).parentManagerId === displayUser.id;\n\n                        // If they are my manager -> Request Task\n                        if (isMyManager) {\n                          return (\n                            <TouchableOpacity\n                              style={[styles.messageButton, { borderColor: colors.primary, backgroundColor: colors.primary + '10' }]}\n                              onPress={() => {\n                                Alert.alert('×‘×§×©×ª ××©×™××”', '×”×× ×œ×©×œ×•×— ×‘×§×©×ª ××©×™××” ×œ×× ×”×œ ×–×”?', [\n                                  { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                                  {\n                                    text: '×©×œ×—', onPress: async () => {\n                                      // Create conversation and send message\n                                      try {\n                                        const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                                        let conversationId = existingConvId;\n                                        if (!conversationId) {\n                                          conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                                        }\n                                        // Send \"I'd look to help\" message\n                                        // TODO: implement sendMessage in chatService or apiService\n                                        // For now just navigate to chat\n                                        (navigation as any).navigate('ChatDetailScreen', {\n                                          conversationId,\n                                          otherUserId: displayUser.id,\n                                          userName: displayUser.name,\n                                          userAvatar: displayUser.avatar,\n                                          initialMessage: '××©××— ×œ×¢×–×•×¨ ×‘××” ×©×¦×¨×™×š' // Pass this if ChatDetail supports it, or handle locally\n                                        });\n                                      } catch (e) { console.error(e); }\n                                    }\n                                  }\n                                ]);\n                              }}\n                            >\n                              <Ionicons name=\"briefcase-outline\" size={20} color={colors.primary} />\n                              <Text style={[styles.messageButtonText, { color: colors.primary }]}>×‘×§×© ××©×™××”</Text>\n                            </TouchableOpacity>\n                          );\n                        }\n\n                        // Otherwise (Subordinate or unrelated) -> Manage Subordinate\n                        return (\n                          <TouchableOpacity\n                            style={[\n                              styles.messageButton,\n                              isSubordinate ? { backgroundColor: '#ff444410', borderColor: '#ff4444' } : { backgroundColor: colors.secondary + '10', borderColor: colors.secondary }\n                            ]}\n                            onPress={() => {\n                              const action = isSubordinate ? 'remove' : 'add';\n                              const title = isSubordinate ? '×”×¡×¨ ×× ×”×œ' : '×”×¤×•×š ×œ×× ×”×œ ×‘×¦×•×•×ª';\n                              const msg = isSubordinate\n                                ? '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ××©×ª××© ×–×” ×× ×™×”×•×œ ×ª×—×ª×™×š? ×”××©×™××•×ª ×™×•×¢×‘×¨×• ××œ×™×š.'\n                                : '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××©×ª××© ×–×” ×œ×× ×”×œ ×ª×—×ª×™×š?';\n\n                              Alert.alert(title, msg, [\n                                { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                                {\n                                  text: '××™×©×•×¨', style: isSubordinate ? 'destructive' : 'default', onPress: async () => {\n                                    try {\n                                      const res = await apiService.manageHierarchy(displayUser.id!, action, selectedUser.id);\n                                      if (res.success) {\n                                        Alert.alert('×”×¦×œ×—×”', res.message);\n                                        // Update local state to reflect change immediately\n                                        setViewingUser(prev => prev ? ({ ...prev, parentManagerId: action === 'add' ? selectedUser.id : null }) : null);\n                                      } else {\n                                        Alert.alert('×©×’×™××”', res.error || '×¤×¢×•×œ×” × ×›×©×œ×”');\n                                      }\n                                    } catch (err) {\n                                      console.error(err);\n                                      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×ª×§×©×•×¨×ª');\n                                    }\n                                  }\n                                }\n                              ]);\n                            }}\n                          >\n                            <Ionicons name={isSubordinate ? \"person-remove-outline\" : \"person-add-outline\"} size={20} color={isSubordinate ? '#ff4444' : colors.secondary} />\n                            <Text style={[styles.messageButtonText, { color: isSubordinate ? '#ff4444' : colors.secondary }]}>\n                              {isSubordinate ? '×”×¡×¨ ×× ×”×œ' : '×”×¤×•×š ×œ×× ×”×œ'}\n                            </Text>\n                          </TouchableOpacity>\n                        );\n                      })()}\n                    </>\n                  )}\n                </>\n              )}\n            </View>\n\n            {/* Recent Activities - only for own profile */}\n            {isOwnProfile && (\n              <View style={styles.activitiesSection}>\n                <Text style={styles.sectionTitle}>{t('profile:sections.recentActivity')}</Text>\n                {recentActivities.length === 0 ? (\n                  <View style={styles.emptyActivitiesContainer}>\n                    <Ionicons name=\"time-outline\" size={scaleSize(40)} color={colors.textSecondary} />\n                    <Text style={styles.emptyActivitiesText}>{t('profile:recent.noActivityYet', '××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ×¢×“×™×™×Ÿ')}</Text>\n                    <Text style={styles.emptyActivitiesSubtext}>{t('profile:recent.startCreating', '×”×ª×—×œ ×œ×™×¦×•×¨ ×ª×•×›×Ÿ ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×™×•×ª ×©×œ×š ×›××Ÿ')}</Text>\n                  </View>\n                ) : (\n                  recentActivities.map((activity) => (\n                    <TouchableOpacity\n                      key={activity.id}\n                      style={styles.activityItem}\n                      onPress={() => {\n                        // Open modal for item and ride types\n                        if (activity.type === 'item' || activity.type === 'ride') {\n                          setSelectedActivity(activity);\n                          setShowActivityModal(true);\n                        } else {\n                          // For post and donation, show alert for now\n                          Alert.alert(activity.title, activity.time);\n                        }\n                      }}\n                    >\n                      <View style={[styles.activityIcon, { backgroundColor: activity.color + '20' }]}>\n                        <Ionicons name={activity.icon as any} size={16} color={activity.color} />\n                      </View>\n                      <View style={styles.activityContent}>\n                        <Text style={styles.activityTitle}>{activity.title}</Text>\n                        <Text style={styles.activityTime}>{activity.time}</Text>\n                      </View>\n                    </TouchableOpacity>\n                  ))\n                )}\n              </View>\n            )}\n\n            {/* Story Highlights - only for own profile */}\n            {isOwnProfile && (\n              <View style={styles.highlightsSection}>\n                <Text style={styles.sectionTitle}>{t('profile:sections.highlights')}</Text>\n                <ScrollView\n                  horizontal\n                  showsHorizontalScrollIndicator={false}\n                  contentContainerStyle={styles.storyHighlightsContentContainer}\n                >\n                  {(isRealAuth ? [0] : Array.from({ length: 8 }).map((_, i) => i)).map((i) => (\n                    <TouchableOpacity\n                      key={i}\n                      style={styles.storyHighlightItem}\n                      onPress={() => {\n                        if (i === 0) {\n                          Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.new'));\n                        } else {\n                          Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.highlightIndex', { index: (i + 1).toString() }));\n                        }\n                      }}\n                    >\n                      <View style={styles.storyHighlightCircle}>\n                        {i === 0 ? (\n                          <Ionicons name=\"add\" size={scaleSize(24)} color={colors.secondary} />\n                        ) : (\n                          <Image\n                            source={{ uri: `https://picsum.photos/60/60?random=${i + 10}` }}\n                            style={styles.highlightImage}\n                          />\n                        )}\n                      </View>\n                      <Text style={styles.storyHighlightText}>\n                        {i === 0 ? t('profile:highlights.new') : t('profile:highlights.highlightIndex', { index: i })}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n            )}\n\n            {/* Tab View Container */}\n            <View style={[styles.tabViewContainer, { height: currentTabHeight }]}>\n              <TabView\n                navigationState={{ index, routes }}\n                renderScene={renderScene}\n                onIndexChange={setIndex}\n                initialLayout={{ width: Dimensions.get('window').width }}\n                renderTabBar={renderTabBar}\n              />\n            </View>\n          </View>\n        </View>\n      ) : (\n        <ScrollContainer\n          style={styles.mainScrollView}\n          showsVerticalScrollIndicator={false}\n          keyboardShouldPersistTaps=\"handled\"\n          contentStyle={{ ...styles.mainScrollContent, paddingBottom: tabBarHeight + scaleSize(24) }}\n        >\n          {/* Header for other user's profile */}\n          {!isOwnProfile && (\n            <View style={styles.header}>\n              <TouchableOpacity\n                style={styles.headerIcon}\n                onPress={() => navigation.goBack()}\n              >\n                <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n              <Text style={styles.username}>{displayUser?.name || externalUserName || '×œ×œ× ×©×'}</Text>\n              <TouchableOpacity\n                style={styles.headerIcon}\n                onPress={() => Alert.alert('××¤×©×¨×•×™×•×ª', '×¤×ª×™×—×ª ××¤×©×¨×•×™×•×ª')}\n              >\n                <Ionicons name=\"ellipsis-horizontal\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n          )}\n\n          {/* Completion Banner - only for own profile */}\n          {isOwnProfile && <ProfileCompletionBanner />}\n\n          {/* Profile Info with Menu Icon */}\n          <View style={styles.profileInfo}>\n            {isOwnProfile && (\n              <TouchableOpacity\n                style={styles.menuIcon}\n                onPress={() => setShowMenu(!showMenu)}\n              >\n                <Ionicons name=\"menu\" size={scaleSize(24)} color={colors.textPrimary} />\n              </TouchableOpacity>\n            )}\n            <View style={styles.profileSection}>\n              <Image source={avatarSource} style={styles.profilePicture} />\n            </View>\n\n            <View style={styles.statsContainer}>\n              {isOwnProfile && !isRealAuth && (\n                <View style={styles.statItem}>\n                  <Text style={styles.statNumber}>{userStats.posts}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                </View>\n              )}\n              {!isOwnProfile && (\n                <View style={styles.statItem}>\n                  <Text style={styles.statNumber}>{(displayUser as any)?.postsCount || 0}</Text>\n                  <Text style={styles.statLabel}>{t('profile:stats.posts')}</Text>\n                </View>\n              )}\n              <TouchableOpacity\n                style={styles.statItem}\n                onPress={() => {\n                  if (!targetUserId) return;\n                  (navigation as any).navigate('FollowersScreen', {\n                    userId: targetUserId,\n                    type: 'followers',\n                    title: t('profile:followersTitle')\n                  });\n                }}\n              >\n                <Text style={styles.statNumber}>{isOwnProfile ? userStats.followers : updatedCounts.followersCount}</Text>\n                <Text style={styles.statLabel}>{t('profile:stats.followers')}</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={styles.statItem}\n                onPress={() => {\n                  if (!targetUserId) return;\n                  (navigation as any).navigate('FollowersScreen', {\n                    userId: targetUserId,\n                    type: 'following',\n                    title: t('profile:followingTitle')\n                  });\n                }}\n              >\n                <Text style={styles.statNumber}>{isOwnProfile ? userStats.following : updatedCounts.followingCount}</Text>\n                <Text style={styles.statLabel}>{t('profile:stats.following')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* Menu Modal with Backdrop - only for own profile */}\n          {isOwnProfile && showMenu && (\n            <TouchableWithoutFeedback onPress={() => setShowMenu(false)}>\n              <View style={styles.menuBackdrop}>\n                <TouchableWithoutFeedback onPress={() => { }}>\n                  <View style={styles.menuOverlay}>\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        navigation.navigate('BookmarksScreen' as never);\n                      }}\n                    >\n                      <Ionicons name=\"bookmark-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.bookmarks')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n\n                      }}\n                    >\n                      <Ionicons name=\"analytics-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.communityStats')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.shareProfile'), t('profile:alerts.shareProfileDesc'));\n                      }}\n                    >\n                      <Ionicons name=\"share-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.shareProfile')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        (navigation as any).navigate('EditProfileScreen');\n                      }}\n                    >\n                      <Ionicons name=\"create-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.editProfile')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.settings'), t('profile:alerts.openSettings'));\n                      }}\n                    >\n                      <Ionicons name=\"settings-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.settings')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        Alert.alert(t('profile:alerts.help'), t('profile:alerts.openHelp'));\n                      }}\n                    >\n                      <Ionicons name=\"help-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.help')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={() => {\n                        setShowMenu(false);\n                        navigation.navigate('LoginScreen' as never);\n                      }}\n                    >\n                      <Ionicons name=\"log-in-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.login')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={selectRandomUser}\n                    >\n                      <Ionicons name=\"shuffle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.switchUser')}</Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.menuItem}\n                      onPress={handleCreateSampleData}\n                    >\n                      <Ionicons name=\"add-circle-outline\" size={scaleSize(20)} color={colors.textPrimary} />\n                      <Text style={styles.menuItemText}>{t('profile:menu.createSampleData')}</Text>\n                    </TouchableOpacity>\n                  </View>\n                </TouchableWithoutFeedback>\n              </View>\n            </TouchableWithoutFeedback>\n          )}\n\n          {/* Bio Section */}\n          <View style={styles.bioSection}>\n            <Text style={styles.fullName}>{displayUser?.name || externalUserName || ''}</Text>\n            {!!displayUser?.bio && (\n              <Text style={styles.bioText}>{displayUser.bio}</Text>\n            )}\n            {!!(typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city) && (\n              <Text style={styles.locationText}>\n                <Ionicons name=\"location-outline\" size={scaleSize(14)} color={colors.textSecondary} />{' '}\n                {typeof displayUser?.location === 'string' ? displayUser?.location : displayUser?.location?.city || ''}\n              </Text>\n            )}\n\n            {/* Additional user details for other user's profile */}\n            {!isOwnProfile && displayUser && (\n              <View style={styles.characterDetails}>\n                {/* Verification badge */}\n                {(displayUser as CharacterType).isVerified && (\n                  <View style={styles.verificationBadge}>\n                    <Ionicons name=\"checkmark-circle\" size={16} color={colors.info} />\n                    <Text style={styles.verifiedText}>×××•××ª</Text>\n                  </View>\n                )}\n\n                {/* Roles */}\n                {displayUser.roles && displayUser.roles.length > 0 && (\n                  <View style={styles.rolesContainer}>\n                    {displayUser.roles.map((role, index) => (\n                      <View key={index} style={styles.roleTag}>\n                        <Text style={styles.roleText}>{getRoleDisplayName(role)}</Text>\n                      </View>\n                    ))}\n                  </View>\n                )}\n\n                {/* Interests */}\n                {displayUser.interests && displayUser.interests.length > 0 && (\n                  <View style={styles.interestsContainer}>\n                    <Text style={styles.sectionTitle}>×ª×—×•××™ ×¢× ×™×™×Ÿ:</Text>\n                    <View style={styles.interestsList}>\n                      {displayUser.interests.slice(0, 4).map((interest, index) => (\n                        <Text key={index} style={styles.interestTag}>#{interest}</Text>\n                      ))}\n                    </View>\n                  </View>\n                )}\n\n                {/* Join date */}\n                {displayUser.joinDate && (\n                  <Text style={styles.joinDate}>\n                    ×”×¦×˜×¨×£ ×‘-{new Date(displayUser.joinDate).toLocaleDateString('he-IL')}\n                  </Text>\n                )}\n              </View>\n            )}\n\n            {/* Karma Points */}\n            <View style={styles.karmaSection}>\n              <View style={styles.karmaCard}>\n                <Ionicons name=\"star\" size={scaleSize(20)} color={colors.warning} />\n                <Text style={styles.karmaText}>{(displayUser?.karmaPoints || userStats.karmaPoints)} {t('profile:stats.karmaPointsSuffix')}</Text>\n              </View>\n            </View>\n\n            {/* Activity Icons - only for own profile */}\n            {isOwnProfile && !isRealAuth && (\n              <View style={styles.activityIcons}>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.activity'), t('profile:alerts.viewActivity'))}\n                >\n                  <Ionicons name=\"star-outline\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:activity')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.history'), t('profile:alerts.activityHistory'))}\n                >\n                  <MaterialCommunityIcons name=\"history\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:history')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.activityIconItem}\n                  onPress={() => Alert.alert(t('profile:alerts.favorites'), t('profile:alerts.yourFavorites'))}\n                >\n                  <Ionicons name=\"heart-outline\" size={scaleSize(24)} color={colors.secondary} />\n                  <Text style={styles.activityIconText}>{t('profile:favorites')}</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n\n          {/* Action Buttons */}\n          <View style={styles.actionButtonsContainer}>\n            {isOwnProfile ? (\n              <>\n                <TouchableOpacity\n                  style={styles.discoverPeopleButton}\n                  onPress={() => {\n                    navigation.navigate('DiscoverPeopleScreen' as never);\n                  }}\n                >\n                  <Ionicons name=\"person-add-outline\" size={scaleSize(18)} color={colors.white} />\n                  <Text style={styles.discoverPeopleText}>{t('profile:discoverPeople')}</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={styles.notificationsButton}\n                  onPress={() => {\n                    navigation.navigate('NotificationsScreen' as never);\n                  }}\n                >\n                  <Ionicons name=\"notifications-outline\" size={scaleSize(18)} color={colors.white} />\n                  <Text style={styles.notificationsButtonText}>{t('profile:notifications')}</Text>\n                </TouchableOpacity>\n              </>\n            ) : (\n              <>\n                {selectedUser && displayUser && selectedUser.id !== displayUser.id && (\n                  <>\n                    <TouchableOpacity\n                      style={[\n                        styles.followButton,\n                        isFollowing && styles.followingButton\n                      ]}\n                      onPress={async () => {\n                        if (!selectedUser) {\n                          Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n                          return;\n                        }\n\n                        try {\n                          if (!displayUser?.id) {\n                            Alert.alert('×©×’×™××”', '××©×ª××© ×œ× × ××¦×');\n                            return;\n                          }\n\n                          if (isFollowing) {\n                            const success = await unfollowUser(selectedUser.id, displayUser.id);\n                            if (success) {\n                              setIsFollowing(false);\n                              const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                              setUpdatedCounts(newCounts);\n                              setFollowStats(prev => ({ ...prev, isFollowing: false }));\n                              Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n                            }\n                          } else {\n                            const success = await followUser(selectedUser.id, displayUser.id);\n                            if (success) {\n                              setIsFollowing(true);\n                              const newCounts = await getUpdatedFollowCounts(displayUser.id);\n                              setUpdatedCounts(newCounts);\n                              setFollowStats(prev => ({ ...prev, isFollowing: true }));\n                              Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n                            }\n                          }\n                        } catch (error) {\n                          console.error('âŒ Follow/Unfollow error:', error);\n                          Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n                        }\n                      }}\n                    >\n                      <Text style={[\n                        styles.followButtonText,\n                        isFollowing && styles.followingButtonText\n                      ]}>\n                        {isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n                      </Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                      style={styles.messageButton}\n                      onPress={async () => {\n                        if (!selectedUser) {\n                          Alert.alert('×©×’×™××”', '×™×© ×œ×‘×—×•×¨ ×™×•×–×¨ ×ª×—×™×œ×”');\n                          return;\n                        }\n\n                        try {\n                          const existingConvId = await conversationExists(selectedUser.id, displayUser.id!);\n                          let conversationId: string;\n\n                          if (existingConvId) {\n                            console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n                            conversationId = existingConvId;\n                          } else {\n                            console.log('ğŸ’¬ Creating new conversation...');\n                            conversationId = await createConversation([selectedUser.id, displayUser.id!]);\n                          }\n\n                          (navigation as any).navigate('ChatDetailScreen', {\n                            conversationId,\n                            otherUserId: displayUser.id,\n                            userName: displayUser.name || externalUserName || '×œ×œ× ×©×',\n                            userAvatar: displayUser.avatar || 'https://i.pravatar.cc/150?img=1',\n                          });\n                        } catch (error) {\n                          console.error('âŒ Create chat error:', error);\n                          Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×©×™×—×”');\n                        }\n                      }}\n                    >\n                      <Ionicons name=\"chatbubble-outline\" size={20} color={colors.textPrimary} />\n                      <Text style={styles.messageButtonText}>×”×•×“×¢×”</Text>\n                    </TouchableOpacity>\n                  </>\n                )}\n              </>\n            )}\n          </View>\n\n          {/* Recent Activities - only for own profile */}\n          {isOwnProfile && (\n            <View style={styles.activitiesSection}>\n              <Text style={styles.sectionTitle}>{t('profile:sections.recentActivity')}</Text>\n              {recentActivities.length === 0 ? (\n                <View style={styles.emptyActivitiesContainer}>\n                  <Ionicons name=\"time-outline\" size={scaleSize(40)} color={colors.textSecondary} />\n                  <Text style={styles.emptyActivitiesText}>{t('profile:recent.noActivityYet', '××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ×¢×“×™×™×Ÿ')}</Text>\n                  <Text style={styles.emptyActivitiesSubtext}>{t('profile:recent.startCreating', '×”×ª×—×œ ×œ×™×¦×•×¨ ×ª×•×›×Ÿ ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×™×•×ª ×©×œ×š ×›××Ÿ')}</Text>\n                </View>\n              ) : (\n                recentActivities.map((activity) => (\n                  <TouchableOpacity\n                    key={activity.id}\n                    style={styles.activityItem}\n                    onPress={() => {\n                      // Open modal for item and ride types\n                      if (activity.type === 'item' || activity.type === 'ride') {\n                        setSelectedActivity(activity);\n                        setShowActivityModal(true);\n                      } else {\n                        // For post and donation, show alert for now\n                        Alert.alert(activity.title, activity.time);\n                      }\n                    }}\n                  >\n                    <View style={[styles.activityIcon, { backgroundColor: activity.color + '20' }]}>\n                      <Ionicons name={activity.icon as any} size={16} color={activity.color} />\n                    </View>\n                    <View style={styles.activityContent}>\n                      <Text style={styles.activityTitle}>{activity.title}</Text>\n                      <Text style={styles.activityTime}>{activity.time}</Text>\n                    </View>\n                  </TouchableOpacity>\n                ))\n              )}\n            </View>\n          )}\n\n          {/* Story Highlights - only for own profile */}\n          {isOwnProfile && (\n            <View style={styles.highlightsSection}>\n              <Text style={styles.sectionTitle}>{t('profile:sections.highlights')}</Text>\n              <ScrollView\n                horizontal\n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={styles.storyHighlightsContentContainer}\n              >\n                {Array.from({ length: 8 }).map((_, i) => (\n                  <TouchableOpacity\n                    key={i}\n                    style={styles.storyHighlightItem}\n                    onPress={() => Alert.alert(t('profile:alerts.highlight'), t('profile:highlights.highlightIndex', { index: (i + 1).toString() }))}\n                  >\n                    <View style={styles.storyHighlightCircle}>\n                      {i === 0 ? (\n                        <Ionicons name=\"add\" size={scaleSize(24)} color={colors.secondary} />\n                      ) : (\n                        <Image\n                          source={{ uri: `https://picsum.photos/60/60?random=${i + 10}` }}\n                          style={styles.highlightImage}\n                        />\n                      )}\n                    </View>\n                    <Text style={styles.storyHighlightText}>\n                      {i === 0 ? t('profile:highlights.new') : t('profile:highlights.highlightIndex', { index: i })}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </View>\n          )}\n\n          {/* Tab View Container */}\n          <View style={[styles.tabViewContainer, { height: currentTabHeight }]}>\n            <TabView\n              navigationState={{ index, routes }}\n              renderScene={renderScene}\n              onIndexChange={setIndex}\n              initialLayout={{ width: Dimensions.get('window').width }}\n              renderTabBar={renderTabBar}\n            />\n          </View>\n        </ScrollContainer>\n      )}\n\n      {/* Activity Details Modal */}\n      {selectedActivity && (selectedActivity.type === 'item' || selectedActivity.type === 'ride') && (\n        <ItemDetailsModal\n          visible={showActivityModal}\n          onClose={() => {\n            setShowActivityModal(false);\n            setSelectedActivity(null);\n          }}\n          item={selectedActivity.rawData}\n          type={selectedActivity.type}\n          navigation={navigation as any}\n          showOwnerInfo={false}\n        />\n      )}\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\n// Wrapper component that calls useBottomTabBarHeight\n// This is used when viewing own profile (in bottom tab navigator)\nfunction ProfileScreenWithTabBar() {\n  const tabBarHeight = useBottomTabBarHeight();\n  return <ProfileScreenContent tabBarHeight={tabBarHeight} />;\n}\n\n// Main export - uses the hook for own profile\n// Main export - uses the hook for own profile\nexport default function ProfileScreen(props: any) {\n  const route = useRoute();\n  let routeParams = route.params as ProfileScreenRouteParams | undefined;\n\n  // On Web, handle refresh (F5) by restoring params from localStorage if route params are missing\n  const STORAGE_KEY = 'profileScreenParams';\n  if (Platform.OS === 'web' && typeof window !== 'undefined' && !routeParams && !props?.userId) {\n    // Try to restore from localStorage when route params are missing (after refresh)\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        const parsedParams = JSON.parse(stored);\n        routeParams = parsedParams;\n        console.log('ğŸ‘¤ ProfileScreen - Restored params from localStorage:', parsedParams);\n      }\n    } catch (error) {\n      console.warn('Failed to restore params from localStorage:', error);\n    }\n  }\n\n  // Allow props to override route params (useful when used as a child component)\n  const propUserId = props?.userId;\n  const propUserName = props?.userName;\n  const propCharacterData = props?.characterData;\n  const isExplicitOtherProfile = props?.isExplicitOtherProfile === true;\n\n  // Use restored params if props are not provided\n  const externalUserId = propUserId || routeParams?.userId;\n  const { selectedUser } = useUser();\n\n  // Determine if viewing own profile or other user's profile\n  // CRITICAL: If externalUserId exists and equals selectedUser.id, it's OWN profile!\n  // Only if externalUserId exists and is DIFFERENT from selectedUser.id, it's another user's profile\n  // If no externalUserId, it's own profile (default - viewing from ProfileTabStack)\n\n  // Normalize IDs to strings for comparison (in case one is number and one is string)\n  const normalizedExternalUserId = externalUserId ? String(externalUserId).trim() : null;\n  const normalizedSelectedUserId = selectedUser?.id ? String(selectedUser.id).trim() : null;\n\n  // Check if viewing other user: \n  // 1. Explicitly requested via prop\n  // 2. externalUserId exists AND it's different from selectedUser.id\n  const isViewingOtherUser = isExplicitOtherProfile ||\n    (normalizedExternalUserId &&\n      normalizedSelectedUserId &&\n      normalizedExternalUserId !== normalizedSelectedUserId);\n\n  // Debug log to help identify the issue\n  console.log('ğŸ‘¤ ProfileScreen - Route check:', {\n    externalUserId,\n    propUserId,\n    normalizedExternalUserId,\n    selectedUserId: selectedUser?.id,\n    normalizedSelectedUserId,\n    isViewingOtherUser,\n    isExplicitOtherProfile,\n    areEqual: normalizedExternalUserId === normalizedSelectedUserId,\n    hasExternalUserId: !!externalUserId,\n    hasSelectedUser: !!selectedUser\n  });\n\n  // If explicitly viewing other profile but no user ID, we need to handle it in Content\n  // Pass params to Content\n  const passedParams: ProfileScreenRouteParams = {\n    userId: externalUserId,\n    userName: propUserName || routeParams?.userName,\n    characterData: propCharacterData || routeParams?.characterData\n  };\n\n  if (isViewingOtherUser) {\n    // Viewing another user's profile - not in bottom tab navigator\n    // Use ProfileScreenContent directly with tabBarHeight = 0 (no hook call)\n    console.log('ğŸ‘¤ ProfileScreen - Using ProfileScreenContent (other user)');\n    // Pass the params via route override or similar mechanism if ProfileScreenContent relies on useRoute\n    // Actually ProfileScreenContent calls useRoute(). We should probably pass props to it.\n    // Let's modify ProfileScreenContent to accept overrides.\n    return <ProfileScreenContent tabBarHeight={0} manualParams={passedParams} forceOtherProfile={true} />;\n  }\n\n  // Viewing own profile (either no externalUserId, or externalUserId === selectedUser.id)\n  // In bottom tab navigator, can use the hook\n  console.log('ğŸ‘¤ ProfileScreen - Using ProfileScreenWithTabBar (own profile)');\n  return <ProfileScreenWithTabBar />;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background\n  },\n  mainScrollView: {\n    flex: 1,\n  },\n  // Web-specific scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && {\n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: SCREEN_HEIGHT as any,\n      maxHeight: SCREEN_HEIGHT as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    minHeight: SCREEN_HEIGHT * 1.2,\n  },\n  mainScrollContent: {\n    paddingBottom: 20,\n  },\n  profileInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  profileSection: {\n    position: 'relative',\n  },\n  profilePicture: {\n    width: scaleSize(80),\n    height: scaleSize(80),\n    borderRadius: scaleSize(80) / 2,\n    borderWidth: 3,\n    borderColor: colors.secondary,\n  },\n  menuIcon: {\n    position: 'absolute',\n    top: LAYOUT_CONSTANTS.SPACING.SM,\n    right: LAYOUT_CONSTANTS.SPACING.SM,\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    backgroundColor: colors.backgroundSecondary,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 2 }, 0.1, 4),\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    flex: 1,\n    justifyContent: 'space-around',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  statItem: {\n    alignItems: 'center'\n  },\n  statNumber: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  bioSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG\n  },\n  fullName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  bioText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: Math.round(FontSizes.body * 1.4),\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  locationText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  karmaSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  karmaCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    alignSelf: 'flex-start',\n  },\n  karmaText: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIcons: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIconItem: {\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityIconText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  actionButtonsContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  discoverPeopleButton: {\n    backgroundColor: colors.secondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  discoverPeopleText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  notificationsButton: {\n    backgroundColor: colors.primary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  notificationsButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activitiesSection: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  activityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 1 }, 0.1, 2),\n    elevation: 2,\n  },\n  activityIcon: {\n    width: scaleSize(32),\n    height: scaleSize(32),\n    borderRadius: scaleSize(16),\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  activityContent: {\n    flex: 1,\n  },\n  activityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 2,\n  },\n  activityTime: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  emptyActivitiesContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  emptyActivitiesText: {\n    fontSize: FontSizes.heading3,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center',\n  },\n  emptyActivitiesSubtext: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: 'center',\n    lineHeight: Math.round(FontSizes.body * 1.4),\n  },\n  highlightsSection: {\n    marginBottom: 20,\n  },\n  storyHighlightsContentContainer: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  storyHighlightItem: {\n    alignItems: 'center',\n    marginHorizontal: LAYOUT_CONSTANTS.SPACING.XS\n  },\n  storyHighlightCircle: {\n    width: scaleSize(60),\n    height: scaleSize(60),\n    borderRadius: scaleSize(30),\n    borderWidth: 2,\n    borderColor: colors.border,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  highlightImage: {\n    width: scaleSize(56),\n    height: scaleSize(56),\n    borderRadius: scaleSize(28),\n  },\n  storyHighlightText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  tabViewContainer: {\n    // height: scaleSize(600), // Dynamic height now\n  },\n  tabBarContainer: {\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  tabBarInner: {\n    flexDirection: 'row',\n    width: '100%',\n  },\n  tabBarIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: colors.secondary,\n    height: scaleSize(2),\n  },\n  tabBarItem: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n    position: 'relative',\n  },\n  tabBarText: {\n    fontSize: FontSizes.body,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM + LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  tabContentContainer: {\n    paddingBottom: 20,\n  },\n  postsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 2,\n    paddingTop: 10,\n  },\n  postContainer: {\n    width: '32%',\n    aspectRatio: 1,\n    margin: 2,\n    position: 'relative',\n  },\n  postImage: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  postOverlay: {\n    position: 'absolute',\n    top: 6,\n    right: 6,\n  },\n  postStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n  },\n  postStatsText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    marginLeft: 4,\n  },\n  ridePlaceholder: {\n    backgroundColor: colors.info + '20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderWidth: 1,\n    borderColor: colors.info + '30',\n  },\n  rideDetailsContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS + 2,\n    alignItems: 'center',\n    width: '100%',\n    paddingHorizontal: 6,\n  },\n  rideDetailsText: {\n    fontSize: FontSizes.small - 1,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n    maxWidth: '90%',\n  },\n  rideArrow: {\n    marginVertical: 3,\n  },\n  taskPlaceholder: {\n    backgroundColor: colors.primary + '20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  taskDetailsContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS + 2,\n    alignItems: 'center',\n    width: '100%',\n    paddingHorizontal: 8,\n  },\n  taskDetailsText: {\n    fontSize: FontSizes.small - 1,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n    maxWidth: '95%',\n  },\n  tabContentPlaceholder: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: 300,\n    padding: 20,\n  },\n  placeholderText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 15,\n    marginBottom: 8,\n  },\n  placeholderSubtext: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n    marginBottom: 20,\n  },\n  createButton: {\n    backgroundColor: colors.secondary,\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 25,\n  },\n  createButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  menuBackdrop: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.3)',\n    zIndex: 1000,\n  },\n  menuOverlay: {\n    position: 'absolute',\n    top: 100,\n    left: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 8,\n    ...createShadowStyle(colors.shadow, { width: 0, height: 4 }, 0.2, 8),\n    zIndex: 1001,\n  },\n  menuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 8,\n  },\n  menuItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    marginLeft: 12,\n  },\n  // Styles for other user's profile\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  headerIcon: {\n    padding: 8,\n  },\n  username: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  followButton: {\n    flex: 1,\n    backgroundColor: colors.secondary,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  followingButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  followButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n  },\n  followingButtonText: {\n    color: colors.textPrimary,\n  },\n  messageButton: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginLeft: 12,\n  },\n  messageButtonText: {\n    color: colors.textPrimary,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  characterDetails: {\n    marginTop: 12,\n  },\n  verificationBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  verifiedText: {\n    fontSize: FontSizes.small,\n    color: colors.info,\n    marginLeft: 4,\n    fontWeight: '600',\n  },\n  rolesContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 12,\n    gap: 6,\n  },\n  roleTag: {\n    backgroundColor: colors.primary + '20',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  roleText: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  interestsContainer: {\n    marginBottom: 12,\n  },\n  interestsList: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 6,\n  },\n  interestTag: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    backgroundColor: colors.backgroundTertiary,\n    paddingHorizontal: 8,\n    paddingVertical: 3,\n    borderRadius: 8,\n  },\n  joinDate: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 4,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: 16,\n  },\n  errorSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 8,\n    marginBottom: 24,\n  },\n  backButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginTop: 24,\n  },\n  backButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/bottomBarScreens/SearchScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1579,1582],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1579,1582],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1637,1640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1637,1640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1669,1672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1669,1672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-this-alias","severity":2,"message":"Unexpected aliasing of 'this' to local variable.","line":45,"column":15,"nodeType":"Identifier","messageId":"thisAssignment","endLine":45,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2380,2383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2380,2383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2506,2509],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2506,2509],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":70,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3329,3332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3329,3332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3860,3863],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3860,3863],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5972,5975],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5972,5975],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":157,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":160,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6042,6045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6042,6045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6240,6243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6240,6243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7128,7131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7128,7131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7228,7231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7228,7231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7915,7918],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7915,7918],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":182,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7978,7981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7978,7981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14357,14360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14357,14360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":348,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14701,14704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14701,14704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":460,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":460,"endColumn":76}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Unified global search across donations, rides, users, and hashtags.\n// - Reached from: `SearchTabStack` initial route 'SearchScreen'.\n// - Provides: Real-time search with tabs for different entities, debounced input, and detailed result cards.\n// - Reads from: `enhancedDatabaseService`, `apiService`.\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    TouchableOpacity,\n    Image,\n    FlatList,\n    Alert,\n    SafeAreaView,\n    ActivityIndicator,\n    TextInput,\n    LayoutAnimation,\n    Platform,\n    UIManager\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\nimport { apiService } from '../utils/apiService';\nimport { scaleSize } from '../globals/responsive';\nimport { createShadowStyle } from '../globals/styles';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { useToast } from '../utils/toastService';\n\nif (Platform.OS === 'android' && UIManager.setLayoutAnimationEnabledExperimental) {\n    UIManager.setLayoutAnimationEnabledExperimental(true);\n}\n\n// Simple debounce implementation\nfunction debounce<T extends (...args: any[]) => void>(func: T, wait: number) {\n    let timeout: any;\n    return function (this: any, ...args: Parameters<T>) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(context, args), wait);\n    };\n}\n\ntype SearchTab = 'All' | 'Rides' | 'Donations' | 'Users' | 'Hashtags';\n\ninterface SearchResult {\n    id: string;\n    type: 'ride' | 'donation' | 'user' | 'hashtag';\n    title: string;          // Ride: from->to, Donation: title, User: name\n    subtitle?: string;      // Ride: date/time, Donation: category, User: bio\n    description?: string;   // Ride: notes, Donation: description\n    image?: string;         // Avatar or Item image\n    meta?: string;          // Extra info (seats, location, etc.)\n    highlight?: boolean;\n    rawData: any;           // Original object for navigation/details\n}\n\nconst SearchScreen = () => {\n    const navigation = useNavigation<any>();\n    const route = useRoute();\n    const tabBarHeight = useBottomTabBarHeight();\n    const { t } = useTranslation(['search', 'common', 'donations', 'trump']);\n    const { selectedUser } = useUser();\n    const { ToastComponent } = useToast();\n\n    // Get initial query from route params (from deep link)\n    const routeParams = route.params as { q?: string } | undefined;\n    const initialQuery = routeParams?.q || '';\n\n    const [query, setQuery] = useState(initialQuery);\n    const [activeTab, setActiveTab] = useState<SearchTab>('All');\n    const [results, setResults] = useState<SearchResult[]>([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const [hasSearched, setHasSearched] = useState(false); // To show \"start typing\" vs \"no results\"\n    const [selectedItem, setSelectedItem] = useState<any | null>(null);\n    const [showItemModal, setShowItemModal] = useState(false);\n    const [selectedItemType, setSelectedItemType] = useState<'item' | 'ride'>('item');\n\n    const searchInputRef = useRef<TextInput>(null);\n\n    // Update query when route params change (e.g., from deep link)\n    useEffect(() => {\n        if (routeParams?.q && routeParams.q !== query) {\n            setQuery(routeParams.q);\n        }\n    }, [routeParams?.q, query]);\n\n    // Tabs configuration\n    const tabs: { id: SearchTab; label: string; icon: any }[] = [\n        { id: 'All', label: t('search:tabs.all'), icon: 'grid-outline' },\n        { id: 'Rides', label: t('trump:menu.history'), icon: 'car-sport-outline' }, // Using history label as approximation or custom\n        { id: 'Donations', label: t('search:tabs.donations'), icon: 'heart-outline' },\n        { id: 'Users', label: t('search:tabs.users'), icon: 'people-outline' },\n        { id: 'Hashtags', label: '#', icon: 'pricetag-outline' },\n    ];\n\n    // --- Search Logic ---\n\n    const performSearch = async (searchQuery: string, tab: SearchTab) => {\n        if (!searchQuery.trim()) {\n            setResults([]);\n            setHasSearched(false);\n            setIsSearching(false);\n            return;\n        }\n\n        setIsSearching(true);\n        setHasSearched(true);\n\n        // Slight delay to allow UI to update (spinner)\n        // await new Promise(r => setTimeout(r, 100));\n\n        try {\n            const promises: Promise<SearchResult[]>[] = [];\n            const qLower = searchQuery.toLowerCase();\n\n            // 1. Rides\n            if (tab === 'All' || tab === 'Rides') {\n                // Fetch rides - ideally backend supports search. If not, fetch active and filter.\n                // Assuming enahncedDatabaseService.getRides supports basic filters or we fetch all active.\n                promises.push(\n                    enhancedDB.getRides({}).then(rides => {\n                        return rides\n                            .filter(r => {\n                                // Client-side filter if backend didn't filter\n                                const from = (r.from || '').toLowerCase();\n                                const to = (r.to || '').toLowerCase();\n                                return from.includes(qLower) || to.includes(qLower);\n                            })\n                            .map(r => ({\n                                id: r.id,\n                                type: 'ride' as const,\n                                title: `${r.from} â ${r.to}`,\n                                subtitle: `${new Date((r.departure_time || r.date) as any).toLocaleDateString()} ${new Date((r.departure_time || r.time) as any).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`,\n                                description: r.description as string,\n                                image: (r.driverImage as any) || undefined,\n                                meta: `${r.available_seats} ××•×©×‘×™×`,\n                                rawData: r\n                            }));\n                    }).catch(e => {\n                        console.warn('Search rides failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 2. Donations\n            if (tab === 'All' || tab === 'Donations') {\n                promises.push(\n                    enhancedDB.getDonations({ search: searchQuery }).then(donations => {\n                        return donations.map(d => ({\n                            id: d.id,\n                            type: 'donation',\n                            title: d.title,\n                            subtitle: d.category,\n                            description: d.description,\n                            image: (d as any).image, // Assuming image property exists\n                            meta: d.location || (d as any).city,\n                            rawData: d\n                        }));\n                    }).catch(e => {\n                        console.warn('Search donations failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 3. Users\n            if (tab === 'All' || tab === 'Users') {\n                promises.push(\n                    apiService.getUsers({ search: searchQuery }).then(res => {\n                        if (!res.success || !res.data) return [];\n                        // Assuming res.data.users or res.data is array\n                        const users = Array.isArray(res.data) ? res.data : (res.data as any).users || [];\n                        return users.map((u: any) => ({\n                            id: u.id,\n                            type: 'user',\n                            title: u.name || t('search:typeLabels.user'),\n                            subtitle: u.role || u.bio || t('search:userDefaultBio'),\n                            image: u.avatar || u.image,\n                            meta: '×—×‘×¨ ×§×”×™×œ×”',\n                            rawData: u\n                        }));\n                    }).catch(e => {\n                        console.warn('Search users failed', e);\n                        return [];\n                    })\n                );\n            }\n\n            // 4. Hashtags (Mock implementation for now or extraction)\n            if (tab === 'All' || tab === 'Hashtags') {\n                // Logic: If query starts with #, strict search. \n                // Else, maybe we search for tags that match the query?\n                // For MVP, we can simulate hashtag results if the query *looks* like a tag or if we want to show tags used in descriptions.\n                // Let's just return a generic result if query matches a pattern, or skip for now if no dedicated API.\n                if (searchQuery.startsWith('#') || tab === 'Hashtags') {\n                    const cleanTag = searchQuery.replace('#', '');\n                    if (cleanTag.length > 1) {\n                        promises.push(Promise.resolve([{\n                            id: `tag_${cleanTag}`,\n                            type: 'hashtag',\n                            title: `#${cleanTag}`,\n                            subtitle: '×—×¤×© ×¤×•×¡×˜×™× ×•×ª×¨×•××•×ª ×¢× ×ª×’×™×ª ×–×•',\n                            rawData: { tag: cleanTag }\n                        }] as SearchResult[]));\n                    }\n                }\n            }\n\n            // Execute all\n            const resultsArrays = await Promise.all(promises);\n            const flattened = resultsArrays.flat();\n\n            // Sort: Exact matches first? Or just simple shuffle/mix? \n            // Let's sort Users > Donations > Rides for 'All'? Or shuffle.\n            // Simple sort by title match relevance\n            flattened.sort((a, b) => {\n                const aStarts = a.title.toLowerCase().startsWith(qLower);\n                const bStarts = b.title.toLowerCase().startsWith(qLower);\n                if (aStarts && !bStarts) return -1;\n                if (!aStarts && bStarts) return 1;\n                return 0;\n            });\n\n            LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n            setResults(flattened);\n\n        } catch (err) {\n            console.error('Global search error:', err);\n        } finally {\n            setIsSearching(false);\n        }\n    };\n\n    // Debounce the search\n    const debouncedSearch = useCallback(\n        debounce((nextQuery: string, nextTab: SearchTab) => {\n            performSearch(nextQuery, nextTab);\n        }, 600),\n        []\n    );\n\n    useEffect(() => {\n        // Determine title for Rides tab if 'Rides' is selected (using translation fallback if 'trump' namespace incomplete)\n        // We already defined tabs array outside.\n    }, []);\n\n    // Trigger search when query comes from URL (deep link)\n    // This effect runs after performSearch is defined\n    useEffect(() => {\n        if (routeParams?.q && routeParams.q.trim()) {\n            // Query came from URL, trigger search immediately\n            // Only if it's different from current query to avoid infinite loops\n            if (routeParams.q !== query) {\n                setQuery(routeParams.q);\n                performSearch(routeParams.q, activeTab);\n            }\n        }\n    }, [routeParams?.q, activeTab]);\n\n    const handleTextChange = (text: string) => {\n        setQuery(text);\n        debouncedSearch(text, activeTab);\n    };\n\n    const handleTabChange = (newTab: SearchTab) => {\n        setActiveTab(newTab);\n        if (query.trim()) {\n            // Trigger immediate search (or fast debounce) on tab switch\n            setIsSearching(true); // show loader immediately\n            performSearch(query, newTab);\n        }\n    };\n\n    // --- Render Helpers ---\n\n    const renderIconForType = (type: string) => {\n        switch (type) {\n            case 'ride': return 'car-sport';\n            case 'donation': return 'heart';\n            case 'user': return 'person';\n            case 'hashtag': return 'pricetag';\n            default: return 'search';\n        }\n    };\n\n    const renderColorForType = (type: string) => {\n        switch (type) {\n            case 'ride': return colors.info;\n            case 'donation': return colors.pink;\n            case 'user': return colors.warning;\n            case 'hashtag': return colors.textSecondary;\n            default: return colors.primary;\n        }\n    };\n\n    const handleResultPress = (item: SearchResult) => {\n        // Open modal for rides and donations (items)\n        if (item.type === 'ride' || item.type === 'donation') {\n            setSelectedItem(item.rawData);\n            setSelectedItemType(item.type === 'ride' ? 'ride' : 'item');\n            setShowItemModal(true);\n        } else if (item.type === 'user') {\n            // Navigate to user profile\n            navigation.navigate('UserProfileScreen', {\n                userId: item.rawData.id,\n                userName: item.rawData.name || item.title,\n                characterData: item.rawData\n            });\n        } else if (item.type === 'hashtag') {\n            // For hashtags, show alert for now\n            Alert.alert(\n                item.title,\n                `${item.description || ''}\\n\\n${item.subtitle || ''}`,\n                [\n                    { text: t('common:close'), style: 'cancel' }\n                ]\n            );\n        }\n    };\n\n    const renderItem = ({ item }: { item: SearchResult }) => (\n        <TouchableOpacity\n            style={styles.resultCard}\n            onPress={() => handleResultPress(item)}\n            activeOpacity={0.7}\n        >\n            {/* Icon or Image */}\n            <View style={styles.imageContainer}>\n                {item.image ? (\n                    <Image source={{ uri: item.image }} style={styles.resultImage} />\n                ) : (\n                    <View style={[styles.placeholderImage, { backgroundColor: renderColorForType(item.type) + '15' }]}>\n                        <Ionicons name={renderIconForType(item.type) as any} size={24} color={renderColorForType(item.type)} />\n                    </View>\n                )}\n                {/* Type Icon Badge (small overlay) */}\n                {!item.image && item.type !== 'hashtag' && (\n                    <View style={styles.typeBadge}>\n                        <Ionicons name={renderIconForType(item.type) as any} size={10} color={colors.white} />\n                    </View>\n                )}\n            </View>\n\n            <View style={styles.resultContent}>\n                <View style={styles.resultHeader}>\n                    <Text style={styles.resultTitle} numberOfLines={1}>{item.title}</Text>\n                    {item.meta && <Text style={styles.resultMeta}>{item.meta}</Text>}\n                </View>\n\n                {item.subtitle && (\n                    <Text style={styles.resultSubtitle} numberOfLines={1}>\n                        {item.subtitle}\n                    </Text>\n                )}\n\n                {item.description && (\n                    <Text style={styles.resultDescription} numberOfLines={2}>\n                        {item.description}\n                    </Text>\n                )}\n            </View>\n\n            <Ionicons name=\"chevron-back\" size={18} color={colors.textTertiary} style={{ transform: [{ scaleX: -1 }] }} />\n        </TouchableOpacity>\n    );\n\n    return (\n        <SafeAreaView style={styles.container}>\n            {/* Header & Search Bar */}\n            <View style={styles.header}>\n                <Text style={styles.screenTitle}>{t('common:search')}</Text>\n\n                <View style={styles.searchBarContainer}>\n                    <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                    <TextInput\n                        ref={searchInputRef}\n                        style={styles.searchInput}\n                        placeholder={t('search:ai.placeholder') || \"×—×¤×© ×”×›×œ...\"}\n                        placeholderTextColor={colors.textTertiary}\n                        value={query}\n                        onChangeText={handleTextChange}\n                        returnKeyType=\"search\"\n                        autoCapitalize=\"none\"\n                    />\n                    {query.length > 0 && (\n                        <TouchableOpacity onPress={() => handleTextChange('')} style={styles.clearButton}>\n                            <Ionicons name=\"close-circle\" size={18} color={colors.textSecondary} />\n                        </TouchableOpacity>\n                    )}\n                </View>\n\n                {/* Categories / Tabs */}\n                <View style={styles.tabsContainer}>\n                    <FlatList\n                        horizontal\n                        data={tabs}\n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.tabsContent}\n                        keyExtractor={(item) => item.id}\n                        renderItem={({ item }) => {\n                            const isActive = activeTab === item.id;\n                            return (\n                                <TouchableOpacity\n                                    style={[styles.tabItem, isActive && styles.activeTabItem]}\n                                    onPress={() => handleTabChange(item.id)}\n                                >\n                                    <Ionicons\n                                        name={item.icon}\n                                        size={16}\n                                        color={isActive ? colors.white : colors.textSecondary}\n                                    />\n                                    <Text style={[styles.tabText, isActive && styles.activeTabText]}>\n                                        {item.label}\n                                    </Text>\n                                </TouchableOpacity>\n                            );\n                        }}\n                    />\n                </View>\n            </View>\n\n            {/* Content Area */}\n            <View style={styles.content}>\n                {isSearching ? (\n                    <View style={styles.centerContainer}>\n                        <ActivityIndicator size=\"large\" color={colors.pink} />\n                        <Text style={styles.loadingText}>{t('search:searching')}</Text>\n                    </View>\n                ) : !hasSearched && !query ? (\n                    // Initial State\n                    <View style={styles.initialStateContainer}>\n                        <Ionicons name=\"search-outline\" size={60} color={colors.border} />\n                        <Text style={styles.initialStateText}>{t('search:tryChangingSearchTerms') || \"×”×ª×—×œ ×œ×”×§×œ×™×“ ×›×“×™ ×œ×—×¤×©...\"}</Text>\n\n                        {/* Quick Suggestions / Recent (Optional placeholder logic) */}\n                        <View style={styles.suggestions}>\n                            <Text style={styles.suggestionsTitle}>{t('search:popularTitle')}</Text>\n                            <View style={styles.tagsRow}>\n                                {['×ª×œ ××‘×™×‘', '×¨×™×”×•×˜', '××ª× ×“×‘×™×'].map(tag => (\n                                    <TouchableOpacity key={tag} style={styles.suggestionTag} onPress={() => handleTextChange(tag)}>\n                                        <Text style={styles.suggestionText}>{tag}</Text>\n                                    </TouchableOpacity>\n                                ))}\n                            </View>\n                        </View>\n                    </View>\n                ) : results.length === 0 ? (\n                    // No Results\n                    <View style={styles.centerContainer}>\n                        <Image\n                            source={require('../assets/images/favicon.png')} // Fallback or use a generic \"empty\" asset if available\n                            style={[styles.emptyImage, { opacity: 0.3, width: 60, height: 60, tintColor: colors.textSecondary }]}\n                        />\n                        <Text style={styles.noResultsText}>{t('search:noResultsFound')}</Text>\n                    </View>\n                ) : (\n                    // Results List\n                    <FlatList\n                        data={results}\n                        renderItem={renderItem}\n                        keyExtractor={(item) => `${item.type}_${item.id}`}\n                        contentContainerStyle={[styles.listContent, { paddingBottom: tabBarHeight + 20 }]}\n                        showsVerticalScrollIndicator={false}\n                    />\n                )}\n            </View>\n\n            {/* AI Chat Button */}\n            <TouchableOpacity\n                style={styles.aiButton}\n                onPress={() => {\n                    navigation.navigate('ChatDetailScreen', {\n                        conversationId: 'ai_simulation',\n                        userName: t('search:ai.title') || 'AI Assistant', // Use localized title\n                        otherUserId: 'ai_bot',\n                        userAvatar: 'https://cdn-icons-png.flaticon.com/512/4712/4712027.png'\n                    });\n                }}\n            >\n                <Ionicons name=\"chatbubbles-outline\" size={24} color={colors.white} />\n                <Text style={styles.aiButtonText}>AI</Text>\n            </TouchableOpacity>\n\n            {/* Item Details Modal */}\n            <ItemDetailsModal\n                visible={showItemModal}\n                onClose={() => {\n                    setShowItemModal(false);\n                    setSelectedItem(null);\n                }}\n                item={selectedItem}\n                type={selectedItemType}\n                navigation={navigation}\n            />\n            {ToastComponent}\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: colors.backgroundPrimary,\n    },\n    header: {\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n        paddingTop: LAYOUT_CONSTANTS.SPACING.MD,\n        paddingBottom: LAYOUT_CONSTANTS.SPACING.SM,\n        backgroundColor: colors.backgroundPrimary,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n    },\n    screenTitle: {\n        fontSize: FontSizes.heading2,\n        fontWeight: 'bold',\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textPrimary,\n    },\n    searchBarContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n        height: scaleSize(44),\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    searchIcon: {\n        marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n    },\n    searchInput: {\n        flex: 1,\n        fontSize: FontSizes.body,\n        color: colors.textPrimary,\n        textAlign: 'right', // Hebrew support\n        height: '100%',\n    },\n    clearButton: {\n        padding: 4,\n    },\n    tabsContainer: {\n        marginBottom: 4,\n    },\n    tabsContent: {\n        gap: LAYOUT_CONSTANTS.SPACING.SM,\n        paddingVertical: 4,\n    },\n    tabItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        paddingVertical: 6,\n        paddingHorizontal: 12,\n        borderRadius: 20,\n        backgroundColor: colors.backgroundTertiary,\n        borderWidth: 1,\n        borderColor: 'transparent',\n    },\n    activeTabItem: {\n        backgroundColor: colors.pink,\n        borderColor: colors.pink,\n    },\n    tabText: {\n        marginLeft: 6,\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        fontWeight: '500',\n    },\n    activeTabText: {\n        color: colors.white,\n        fontWeight: '600',\n    },\n    content: {\n        flex: 1,\n        backgroundColor: colors.backgroundPrimary, // slightly different bg for content\n    },\n    centerContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: LAYOUT_CONSTANTS.SPACING.XL,\n    },\n    loadingText: {\n        marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textSecondary,\n        fontSize: FontSizes.body,\n    },\n    initialStateContainer: {\n        flex: 1,\n        alignItems: 'center',\n        paddingTop: scaleSize(60),\n        paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XL,\n    },\n    initialStateText: {\n        marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n        fontSize: FontSizes.heading3,\n        color: colors.textTertiary,\n        textAlign: 'center',\n    },\n    suggestions: {\n        marginTop: scaleSize(40),\n        width: '100%',\n    },\n    suggestionsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    tagsRow: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        gap: 8,\n    },\n    suggestionTag: {\n        backgroundColor: colors.white,\n        paddingHorizontal: 12,\n        paddingVertical: 8,\n        borderRadius: 8,\n        borderWidth: 1,\n        borderColor: colors.border,\n        ...createShadowStyle(colors.shadowLight, { width: 0, height: 1 }, 0.05, 2),\n    },\n    suggestionText: {\n        color: colors.textSecondary,\n        fontSize: FontSizes.small,\n    },\n    emptyImage: {\n        marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    noResultsText: {\n        fontSize: FontSizes.heading3,\n        color: colors.textSecondary,\n        fontWeight: '600',\n    },\n    listContent: {\n        padding: LAYOUT_CONSTANTS.SPACING.LG,\n        gap: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    // Result Card\n    resultCard: {\n        flexDirection: 'row',\n        backgroundColor: colors.cardBackground || colors.white,\n        padding: LAYOUT_CONSTANTS.SPACING.MD,\n        borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n        alignItems: 'center',\n        ...createShadowStyle(colors.shadowLight, { width: 0, height: 2 }, 0.08, 4),\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    imageContainer: {\n        position: 'relative',\n        marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n    },\n    resultImage: {\n        width: 48,\n        height: 48,\n        borderRadius: 24,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    placeholderImage: {\n        width: 48,\n        height: 48,\n        borderRadius: 24,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    aiButton: {\n        position: 'absolute',\n        bottom: 50,\n        left: 20,\n        backgroundColor: colors.pink,\n        flexDirection: 'row',\n        alignItems: 'center',\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n        borderRadius: 25,\n        ...createShadowStyle(colors.shadowDark, { width: 0, height: 4 }, 0.2, 5),\n        zIndex: 100,\n    },\n    aiButtonText: {\n        color: colors.white,\n        marginLeft: 8,\n        fontWeight: 'bold',\n        fontSize: FontSizes.body,\n\n    },\n    typeBadge: {\n        position: 'absolute',\n        bottom: -2,\n        right: -2,\n        backgroundColor: colors.pink,\n        width: 18,\n        height: 18,\n        borderRadius: 9,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1.5,\n        borderColor: colors.white,\n    },\n    resultContent: {\n        flex: 1,\n        justifyContent: 'center',\n    },\n    resultHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 2,\n    },\n    resultTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        flex: 1,\n        textAlign: 'left',\n    },\n    resultMeta: {\n        fontSize: 10,\n        color: colors.textTertiary,\n        marginLeft: 8,\n        backgroundColor: colors.backgroundSecondary,\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4,\n        overflow: 'hidden',\n    },\n    resultSubtitle: {\n        fontSize: FontSizes.small,\n        color: colors.pink,\n        marginBottom: 2,\n        textAlign: 'left',\n    },\n    resultDescription: {\n        fontSize: FontSizes.small, // slightly smaller\n        color: colors.textSecondary,\n        textAlign: 'left',\n    },\n});\n\nexport default SearchScreen;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AboutButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AddLinkComponent.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'db' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"db"},"fix":{"range":[415,462],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[666,669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[666,669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1270,1273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1270,1273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'allLinksData' is assigned a value but never used.","line":53,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1887,1890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1887,1890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2079,2082],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2079,2082],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5169,5172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5169,5172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":178,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5803,5806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5803,5806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { scaleSize } from '../globals/responsive';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { Linking } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\n\ninterface AddLinkComponentProps {\n  onLinkAdded?: (link: any) => void;\n  category?: string; // Category to filter links (e.g., 'trump', 'items', 'knowledge')\n}\n\ntype LinkType = 'group' | 'organization';\n\nexport default function AddLinkComponent({ onLinkAdded, category }: AddLinkComponentProps) {\n  const { t } = useTranslation(['common', 'trump']);\n  const { selectedUser } = useUser();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkDescription, setLinkDescription] = useState('');\n  const [linkType, setLinkType] = useState<LinkType>('group');\n  const [allLinks, setAllLinks] = useState<any[]>([]);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Load all links when component mounts or screen is focused\n  useFocusEffect(\n    React.useCallback(() => {\n      loadAllLinks();\n    }, [category])\n  );\n\n  const loadAllLinks = async () => {\n    setIsLoading(true);\n    try {\n      // NOTE: Links functionality has been removed - links table was deleted\n      // All user data is now unified in user_profiles table with UUID identifiers\n      // TODO: Implement alternative storage if links functionality is still needed\n      const allLinksData: any[] = []; // db.listAllLinks() is no longer available\n      console.log('âš ï¸ Links functionality has been removed');\n      \n      // Filter by category if provided\n      const filteredLinks: any[] = [];\n      \n      setAllLinks(filteredLinks);\n    } catch (error) {\n      console.error('Error loading links:', error);\n      setAllLinks([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOpenModal = () => {\n    setModalVisible(true);\n  };\n\n  const handleCloseModal = () => {\n    setModalVisible(false);\n    // Reset form\n    setLinkUrl('');\n    setLinkDescription('');\n    setLinkType('group');\n  };\n\n  const validateUrl = (url: string): boolean => {\n    try {\n      // Add protocol if missing\n      let formattedUrl = url.trim();\n      if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {\n        formattedUrl = 'https://' + formattedUrl;\n      }\n      new URL(formattedUrl);\n      return true;\n    } catch {\n      return false;\n    }\n  };\n\n  const formatUrl = (url: string): string => {\n    let formattedUrl = url.trim();\n    if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {\n      formattedUrl = 'https://' + formattedUrl;\n    }\n    return formattedUrl;\n  };\n\n  const handleSaveLink = async () => {\n    if (!linkUrl.trim()) {\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.fillLink', { defaultValue: '×× × ×”×–×Ÿ ×§×™×©×•×¨' }) as string\n      );\n      return;\n    }\n\n    if (!validateUrl(linkUrl)) {\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.invalidLink', { defaultValue: '×”×§×™×©×•×¨ ××™× ×• ×ª×§×™×Ÿ' }) as string\n      );\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const uid = selectedUser?.id || 'guest';\n      const linkId = `link_${Date.now()}`;\n      const formattedUrl = formatUrl(linkUrl);\n      \n      const linkData = {\n        id: linkId,\n        url: formattedUrl,\n        description: linkDescription.trim() || '',\n        type: linkType,\n        category: category || 'general', // Save category with link\n        createdAt: new Date().toISOString(),\n        createdBy: uid,\n      };\n\n      // NOTE: Links functionality has been removed - links table was deleted\n      // All user data is now unified in user_profiles table with UUID identifiers\n      // TODO: Implement alternative storage if links functionality is still needed\n      console.warn('âš ï¸ Links functionality has been removed - link not saved');\n\n      // Reload all links to show the new one\n      await loadAllLinks();\n\n      // Notify parent component\n      if (onLinkAdded) {\n        onLinkAdded(linkData);\n      }\n\n      Alert.alert(\n        t('trump:success.title', { defaultValue: '×”×¦×œ×—×”' }) as string,\n        t('trump:success.linkSaved', { defaultValue: '×”×§×™×©×•×¨ × ×©××¨ ×‘×”×¦×œ×—×”' }) as string\n      );\n\n      handleCloseModal();\n    } catch (error) {\n      console.error('Error saving link:', error);\n      Alert.alert(\n        t('common:errorTitle', { defaultValue: '×©×’×™××”' }) as string,\n        t('trump:errors.saveFailed', { defaultValue: '×©××™×¨×ª ×”×§×™×©×•×¨ × ×›×©×œ×”' }) as string\n      );\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleOpenLink = async (link: any) => {\n    if (!link?.url) return;\n\n    try {\n      const supported = await Linking.canOpenURL(link.url);\n      if (supported) {\n        await Linking.openURL(link.url);\n      } else {\n        Alert.alert(\n          t('common:error', { defaultValue: '×©×’×™××”' }) as string,\n          t('common:cannotOpenLink', { defaultValue: '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨' }) as string\n        );\n      }\n    } catch (error) {\n      Alert.alert(\n        t('common:error', { defaultValue: '×©×’×™××”' }) as string,\n        t('common:cannotOpenLink', { defaultValue: '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨' }) as string\n      );\n    }\n  };\n\n  const renderLinkCard = (link: any) => (\n    <TouchableOpacity\n      key={link.id || `${link.createdBy}_${link.url}`}\n      style={styles.linkCard}\n      onPress={() => handleOpenLink(link)}\n    >\n      <View style={styles.linkCardContent}>\n        <View style={styles.linkCardHeader}>\n          <Ionicons \n            name={link.type === 'group' ? 'people' : 'business'} \n            size={scaleSize(20)} \n            color={colors.buttonPrimary} \n          />\n          <Text style={styles.linkCardType}>\n            {link.type === 'group' \n              ? t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×”' })\n              : t('trump:addLink.organization', { defaultValue: '×¢××•×ª×”' })}\n          </Text>\n        </View>\n        {link.description ? (\n          <Text style={styles.linkCardDescription} numberOfLines={2}>\n            {link.description}\n          </Text>\n        ) : null}\n        <Text style={styles.linkCardUrl} numberOfLines={1}>\n          {link.url}\n        </Text>\n      </View>\n      <Ionicons name=\"chevron-forward\" size={scaleSize(16)} color={colors.textSecondary} />\n    </TouchableOpacity>\n  );\n\n  // Filter links by type (group or organization)\n  const groupLinks = allLinks.filter(link => link.type === 'group');\n  const organizationLinks = allLinks.filter(link => link.type === 'organization');\n\n  console.log('ğŸ”— AddLinkComponent render - allLinks:', allLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - groupLinks:', groupLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - organizationLinks:', organizationLinks.length);\n  console.log('ğŸ”— AddLinkComponent render - isLoading:', isLoading);\n\n  return (\n    <View style={styles.container}>\n      {/* Add link button */}\n      <TouchableOpacity\n        style={styles.addButton}\n        onPress={handleOpenModal}\n      >\n        <Ionicons name=\"add-circle-outline\" size={scaleSize(24)} color={colors.buttonPrimary} />\n      </TouchableOpacity>\n\n      {/* Show all links in a scrollable list */}\n      {isLoading ? (\n        <Text style={styles.loadingText}>\n          {t('common:loading', { defaultValue: '×˜×•×¢×Ÿ...' })}\n        </Text>\n      ) : allLinks.length > 0 ? (\n        <View style={styles.linksContainer}>\n          {groupLinks.length > 0 && (\n            <View style={styles.linksSection}>\n              <Text style={styles.linksSectionTitle}>\n                {t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×•×ª' })} ({groupLinks.length})\n              </Text>\n              {groupLinks.map(link => renderLinkCard(link))}\n            </View>\n          )}\n          {organizationLinks.length > 0 && (\n            <View style={styles.linksSection}>\n              <Text style={styles.linksSectionTitle}>\n                {t('trump:addLink.organization', { defaultValue: '×¢××•×ª×•×ª' })} ({organizationLinks.length})\n              </Text>\n              {organizationLinks.map(link => renderLinkCard(link))}\n            </View>\n          )}\n        </View>\n      ) : (\n        <Text style={styles.noLinksText}>\n          {t('trump:addLink.noLinks', { defaultValue: '××™×Ÿ ×§×™×©×•×¨×™× ×¢×“×™×™×Ÿ' })}\n        </Text>\n      )}\n\n      {/* Modal with form */}\n      <Modal\n        visible={modalVisible}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={handleCloseModal}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>\n                {t('trump:addLink.title', { defaultValue: '×”×•×¡×£ ×§×™×©×•×¨' })}\n              </Text>\n              <TouchableOpacity onPress={handleCloseModal}>\n                <Ionicons name=\"close\" size={scaleSize(24)} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              {/* Link Type Selection */}\n              <View style={styles.typeSelectionContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.linkType', { defaultValue: '×¡×•×’ ×§×™×©×•×¨' })}\n                </Text>\n                <View style={styles.typeButtons}>\n                  <TouchableOpacity\n                    style={[\n                      styles.typeButton,\n                      linkType === 'group' && styles.typeButtonActive,\n                    ]}\n                    onPress={() => setLinkType('group')}\n                  >\n                    <Text\n                      style={[\n                        styles.typeButtonText,\n                        linkType === 'group' && styles.typeButtonTextActive,\n                      ]}\n                    >\n                      {t('trump:addLink.group', { defaultValue: '×§×‘×•×¦×”' })}\n                    </Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[\n                      styles.typeButton,\n                      linkType === 'organization' && styles.typeButtonActive,\n                    ]}\n                    onPress={() => setLinkType('organization')}\n                  >\n                    <Text\n                      style={[\n                        styles.typeButtonText,\n                        linkType === 'organization' && styles.typeButtonTextActive,\n                      ]}\n                    >\n                      {t('trump:addLink.organization', { defaultValue: '×¢××•×ª×”' })}\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              {/* Link URL Input */}\n              <View style={styles.inputContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.url', { defaultValue: '×§×™×©×•×¨' })}\n                </Text>\n                <TextInput\n                  style={styles.input}\n                  value={linkUrl}\n                  onChangeText={setLinkUrl}\n                  placeholder={t('trump:addLink.urlPlaceholder', { defaultValue: '×”×–×Ÿ ×§×™×©×•×¨' }) as string}\n                  placeholderTextColor={colors.textPlaceholder}\n                  keyboardType=\"url\"\n                  autoCapitalize=\"none\"\n                  autoCorrect={false}\n                />\n              </View>\n\n              {/* Description Input */}\n              <View style={styles.inputContainer}>\n                <Text style={styles.label}>\n                  {t('trump:addLink.description', { defaultValue: '×¤×™×¨×•×˜' })}\n                </Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={linkDescription}\n                  onChangeText={setLinkDescription}\n                  placeholder={t('trump:addLink.descriptionPlaceholder', { defaultValue: '×”×•×¡×£ ×¤×™×¨×•×˜ (××•×¤×¦×™×•× ×œ×™)' }) as string}\n                  placeholderTextColor={colors.textPlaceholder}\n                  multiline\n                  numberOfLines={3}\n                  textAlignVertical=\"top\"\n                />\n              </View>\n\n              {/* Save Button */}\n              <TouchableOpacity\n                style={[styles.saveButton, isSaving && styles.saveButtonDisabled]}\n                onPress={handleSaveLink}\n                disabled={isSaving}\n              >\n                {isSaving ? (\n                  <Text style={styles.saveButtonText}>\n                    {t('common:saving', { defaultValue: '×©×•××¨...' })}\n                  </Text>\n                ) : (\n                  <Text style={styles.saveButtonText}>\n                    {t('common:save', { defaultValue: '×©××•×¨' })}\n                  </Text>\n                )}\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    alignItems: 'center',\n    marginVertical: 8,\n  },\n  addButton: {\n    backgroundColor: colors.moneyCardBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 20,\n    width: scaleSize(40),\n    height: scaleSize(40),\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  linksContainer: {\n    width: '100%',\n    marginTop: 12,\n  },\n  linksSection: {\n    marginBottom: 16,\n  },\n  linksSectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  linkCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.moneyCardBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 10,\n    padding: 12,\n    marginBottom: 8,\n    width: '100%',\n    gap: 8,\n  },\n  linkCardContent: {\n    flex: 1,\n  },\n  linkCardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    marginBottom: 4,\n  },\n  linkCardType: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.buttonPrimary,\n  },\n  linkCardDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    marginBottom: 4,\n  },\n  linkCardUrl: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  loadingText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: 8,\n  },\n  noLinksText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: 8,\n    fontStyle: 'italic',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: colors.overlayMedium,\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.modalBackground,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    maxHeight: '80%',\n    paddingTop: 20,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  modalBody: {\n    paddingHorizontal: 20,\n    paddingTop: 20,\n  },\n  typeSelectionContainer: {\n    marginBottom: 20,\n  },\n  typeButtons: {\n    flexDirection: 'row',\n    gap: 12,\n    marginTop: 8,\n  },\n  typeButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    backgroundColor: colors.moneyInputBackground,\n    alignItems: 'center',\n  },\n  typeButtonActive: {\n    backgroundColor: colors.buttonPrimary,\n    borderColor: colors.buttonPrimary,\n  },\n  typeButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  typeButtonTextActive: {\n    color: colors.white,\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  input: {\n    backgroundColor: colors.moneyInputBackground,\n    borderRadius: 10,\n    padding: 15,\n    fontSize: FontSizes.body,\n    textAlign: 'right',\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n  },\n  textArea: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  saveButton: {\n    backgroundColor: colors.buttonPrimary,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginTop: 10,\n    marginBottom: 30,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AdminHierarchyTree.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7529,7532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7529,7532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// AdminHierarchyTree.tsx\n// Interactive visual tree component for displaying admin hierarchy\n// Uses the existing color palette and design system\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Animated,\n  ActivityIndicator,\n  Platform,\n  Dimensions,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { apiService } from '../utils/apiService';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst isWeb = Platform.OS === 'web';\nconst isTablet = SCREEN_WIDTH > 768;\nconst isMobileWeb = isWeb && SCREEN_WIDTH <= 768;\n\n// Types\nexport interface ManagerNode {\n  id: string;\n  name: string;\n  email: string;\n  avatar_url?: string;\n  level: number;\n  isSuperAdmin: boolean;\n  isAdmin?: boolean;\n  isVolunteer?: boolean;\n  salary?: number;\n  seniority_start_date?: string;\n  children?: ManagerNode[];\n}\n\ninterface ManagerNodeProps {\n  node: ManagerNode;\n  isLast?: boolean;\n  depth?: number;\n}\n\n// Individual Manager Node Component (Recursive)\nconst ManagerNodeComponent: React.FC<ManagerNodeProps> = ({ node, isLast = false, depth = 0 }) => {\n  const { t } = useTranslation('admin');\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [animatedHeight] = useState(new Animated.Value(1));\n  const hasChildren = node.children && node.children.length > 0;\n\n  const toggleExpand = useCallback(() => {\n    if (!hasChildren) return;\n    \n    Animated.timing(animatedHeight, {\n      toValue: isExpanded ? 0 : 1,\n      duration: 250,\n      useNativeDriver: false,\n    }).start();\n    \n    setIsExpanded(!isExpanded);\n  }, [isExpanded, hasChildren, animatedHeight]);\n\n  // Get role badge color\n  const getRoleBadgeStyle = () => {\n    if (node.isSuperAdmin) {\n      return { backgroundColor: colors.accent, color: colors.white };\n    }\n    if (node.isAdmin) {\n      return { backgroundColor: colors.primary, color: colors.white };\n    }\n    if (node.isVolunteer) {\n      return { backgroundColor: colors.warning, color: colors.white };\n    }\n    return { backgroundColor: colors.backgroundSecondary, color: colors.textSecondary };\n  };\n\n  const getRoleLabel = () => {\n    if (node.isSuperAdmin) return t('hierarchy.roleSuperAdmin');\n    if (node.isAdmin) return t('hierarchy.roleAdmin');\n    if (node.isVolunteer) return t('hierarchy.roleVolunteer');\n    return t('hierarchy.roleUser');\n  };\n\n  const badgeStyle = getRoleBadgeStyle();\n\n  return (\n    <View style={styles.nodeContainer}>\n      {/* Connection line from parent */}\n      {depth > 0 && (\n        <View style={styles.connectionLineContainer}>\n          <View style={[styles.connectionLineVertical, { height: isLast ? '50%' : '100%' }]} />\n          <View style={styles.connectionLineHorizontal} />\n        </View>\n      )}\n\n      {/* Manager Card */}\n      <TouchableOpacity\n        style={[\n          styles.managerCard,\n          node.isSuperAdmin && styles.superAdminCard,\n          depth === 0 && styles.rootCard,\n        ]}\n        onPress={toggleExpand}\n        activeOpacity={hasChildren ? 0.7 : 1}\n      >\n        {/* Avatar */}\n        <View style={styles.avatarContainer}>\n          {node.avatar_url ? (\n            <Image source={{ uri: node.avatar_url }} style={styles.avatar} />\n          ) : (\n            <View style={[styles.avatarPlaceholder, node.isSuperAdmin && styles.superAdminAvatarPlaceholder]}>\n              <Ionicons\n                name=\"person\"\n                size={isMobileWeb ? 18 : 24}\n                color={node.isSuperAdmin ? colors.white : colors.textSecondary}\n              />\n            </View>\n          )}\n          {/* Super Admin Crown */}\n          {node.isSuperAdmin && (\n            <View style={styles.crownBadge}>\n              <Text style={styles.crownEmoji}>ğŸ‘‘</Text>\n            </View>\n          )}\n        </View>\n\n        {/* Info */}\n        <View style={styles.infoContainer}>\n          <Text style={[styles.managerName, node.isSuperAdmin && styles.superAdminName]} numberOfLines={1}>\n            {node.name}\n          </Text>\n          <Text style={styles.managerEmail} numberOfLines={1}>\n            {node.email}\n          </Text>\n          {/* Role Badge */}\n          <View style={[styles.roleBadge, { backgroundColor: badgeStyle.backgroundColor }]}>\n            <Text style={[styles.roleText, { color: badgeStyle.color }]}>{getRoleLabel()}</Text>\n          </View>\n          \n          {/* Salary */}\n          <View style={styles.infoRow}>\n            <Ionicons name=\"cash-outline\" size={isMobileWeb ? 12 : 14} color={colors.textSecondary} />\n            <Text style={styles.infoText}>\n              {t('hierarchy.salary')}: â‚ª{(node.salary ?? 0).toLocaleString('he-IL')}\n            </Text>\n          </View>\n          \n          {/* Seniority */}\n          <View style={styles.infoRow}>\n            <Ionicons name=\"calendar-outline\" size={isMobileWeb ? 12 : 14} color={colors.textSecondary} />\n            <Text style={styles.infoText}>\n              {t('hierarchy.seniority')}: {node.seniority_start_date || new Date().toISOString().split('T')[0]}\n            </Text>\n          </View>\n          \n          {/* Level/Rank */}\n          <View style={styles.infoRow}>\n            <Ionicons name=\"layers-outline\" size={isMobileWeb ? 12 : 14} color={colors.textSecondary} />\n            <Text style={styles.infoText}>\n              {t('hierarchy.level')}: {node.level}\n            </Text>\n          </View>\n        </View>\n\n        {/* Expand/Collapse Indicator */}\n        {hasChildren && (\n          <View style={styles.expandIndicator}>\n            <Ionicons\n              name={isExpanded ? 'chevron-up' : 'chevron-down'}\n              size={isMobileWeb ? 16 : 20}\n              color={colors.textSecondary}\n            />\n            <Text style={styles.childrenCount}>\n              {node.children!.length}\n            </Text>\n          </View>\n        )}\n      </TouchableOpacity>\n\n      {/* Children (Subordinates) */}\n      {hasChildren && isExpanded && (\n        <Animated.View\n          style={[\n            styles.childrenContainer,\n            {\n              opacity: animatedHeight,\n              transform: [{\n                scaleY: animatedHeight.interpolate({\n                  inputRange: [0, 1],\n                  outputRange: [0.95, 1],\n                }),\n              }],\n            },\n          ]}\n        >\n          {node.children!.map((child, index) => (\n            <ManagerNodeComponent\n              key={child.id}\n              node={child}\n              isLast={index === node.children!.length - 1}\n              depth={depth + 1}\n            />\n          ))}\n        </Animated.View>\n      )}\n    </View>\n  );\n};\n\n// Main Tree Component\ninterface AdminHierarchyTreeProps {\n  onError?: (error: string) => void;\n}\n\nconst AdminHierarchyTree: React.FC<AdminHierarchyTreeProps> = ({ onError }) => {\n  const { t } = useTranslation('admin');\n  const [treeData, setTreeData] = useState<ManagerNode[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [totalCount, setTotalCount] = useState(0);\n\n  const loadHierarchy = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const response = await apiService.getFullAdminHierarchy();\n      \n      if (response.success && response.data) {\n        setTreeData(response.data);\n        setTotalCount((response as any).totalCount || response.data.length);\n      } else {\n        const errorMsg = response.error || t('hierarchy.loadError');\n        setError(errorMsg);\n        onError?.(errorMsg);\n      }\n    } catch (err) {\n      const errorMsg = t('hierarchy.connectionError');\n      setError(errorMsg);\n      onError?.(errorMsg);\n      console.error('Failed to load hierarchy:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [onError, t]);\n\n  useEffect(() => {\n    loadHierarchy();\n  }, [loadHierarchy]);\n\n  // Loading State\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n        <Text style={styles.loadingText}>{t('hierarchy.loading')}</Text>\n      </View>\n    );\n  }\n\n  // Error State\n  if (error) {\n    return (\n      <View style={styles.errorContainer}>\n        <Ionicons name=\"alert-circle-outline\" size={48} color={colors.error} />\n        <Text style={styles.errorText}>{error}</Text>\n        <TouchableOpacity style={styles.retryButton} onPress={loadHierarchy}>\n          <Text style={styles.retryButtonText}>{t('hierarchy.retry')}</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  // Empty State\n  if (treeData.length === 0) {\n    return (\n      <View style={styles.emptyContainer}>\n        <Ionicons name=\"people-outline\" size={48} color={colors.textTertiary} />\n        <Text style={styles.emptyText}>{t('hierarchy.noManagers')}</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {/* Header with stats */}\n      <View style={styles.headerStats}>\n        <View style={styles.statBadge}>\n          <Ionicons name=\"people\" size={16} color={colors.primary} />\n          <Text style={styles.statText}>{t('hierarchy.managersCount', { count: totalCount })}</Text>\n        </View>\n      </View>\n\n      {/* Tree */}\n      <View style={styles.treeContainer}>\n        {treeData.map((rootNode, index) => (\n          <ManagerNodeComponent\n            key={rootNode.id}\n            node={rootNode}\n            isLast={index === treeData.length - 1}\n            depth={0}\n          />\n        ))}\n      </View>\n\n      {/* Legend */}\n      <View style={styles.legend}>\n        <View style={styles.legendItem}>\n          <View style={[styles.legendDot, { backgroundColor: colors.accent }]} />\n          <Text style={styles.legendText}>{t('hierarchy.roleSuperAdmin')}</Text>\n        </View>\n        <View style={styles.legendItem}>\n          <View style={[styles.legendDot, { backgroundColor: colors.primary }]} />\n          <Text style={styles.legendText}>{t('hierarchy.roleAdmin')}</Text>\n        </View>\n        <View style={styles.legendItem}>\n          <Ionicons name=\"chevron-down-outline\" size={14} color={colors.textSecondary} />\n          <Text style={styles.legendText}>{t('hierarchy.expandHint')}</Text>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    paddingHorizontal: isMobileWeb ? 8 : 16,\n  },\n  headerStats: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginBottom: isMobileWeb ? 16 : 24,\n  },\n  statBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    gap: 8,\n  },\n  statText: {\n    fontSize: isMobileWeb ? 14 : 16,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  treeContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n    alignSelf: 'center',\n  },\n  nodeContainer: {\n    width: '100%',\n    position: 'relative',\n  },\n  connectionLineContainer: {\n    position: 'absolute',\n    left: isMobileWeb ? 20 : 28,\n    top: 0,\n    bottom: 0,\n    width: isMobileWeb ? 24 : 32,\n    zIndex: 0,\n  },\n  connectionLineVertical: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    width: 2,\n    backgroundColor: colors.borderSecondary,\n  },\n  connectionLineHorizontal: {\n    position: 'absolute',\n    left: 0,\n    top: '50%',\n    width: isMobileWeb ? 24 : 32,\n    height: 2,\n    backgroundColor: colors.borderSecondary,\n    marginTop: -1,\n  },\n  managerCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.cardBackground,\n    borderRadius: isMobileWeb ? 12 : 16,\n    padding: isMobileWeb ? 12 : 16,\n    marginLeft: isMobileWeb ? 44 : 60,\n    marginBottom: isMobileWeb ? 8 : 12,\n    borderWidth: 1,\n    borderColor: colors.borderSecondary,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 2,\n    gap: isMobileWeb ? 10 : 14,\n  },\n  superAdminCard: {\n    borderColor: colors.accent,\n    borderWidth: 2,\n    backgroundColor: colors.white,\n    shadowColor: colors.accent,\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    elevation: 4,\n  },\n  rootCard: {\n    marginLeft: 0,\n  },\n  avatarContainer: {\n    position: 'relative',\n  },\n  avatar: {\n    width: isMobileWeb ? 40 : 52,\n    height: isMobileWeb ? 40 : 52,\n    borderRadius: isMobileWeb ? 20 : 26,\n    borderWidth: 2,\n    borderColor: colors.borderSecondary,\n  },\n  avatarPlaceholder: {\n    width: isMobileWeb ? 40 : 52,\n    height: isMobileWeb ? 40 : 52,\n    borderRadius: isMobileWeb ? 20 : 26,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 2,\n    borderColor: colors.borderSecondary,\n  },\n  superAdminAvatarPlaceholder: {\n    backgroundColor: colors.accent,\n    borderColor: colors.accent,\n  },\n  crownBadge: {\n    position: 'absolute',\n    top: -6,\n    right: -6,\n    width: isMobileWeb ? 18 : 22,\n    height: isMobileWeb ? 18 : 22,\n    borderRadius: isMobileWeb ? 9 : 11,\n    backgroundColor: colors.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.2,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  crownEmoji: {\n    fontSize: isMobileWeb ? 10 : 12,\n  },\n  infoContainer: {\n    flex: 1,\n    gap: 2,\n  },\n  managerName: {\n    fontSize: isMobileWeb ? 14 : 17,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  superAdminName: {\n    color: colors.accent,\n  },\n  managerEmail: {\n    fontSize: isMobileWeb ? 11 : 13,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  roleBadge: {\n    alignSelf: 'flex-end',\n    paddingHorizontal: 8,\n    paddingVertical: 3,\n    borderRadius: 10,\n    marginTop: 4,\n  },\n  roleText: {\n    fontSize: isMobileWeb ? 10 : 11,\n    fontWeight: '600',\n  },\n  infoRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    marginTop: 4,\n    alignSelf: 'flex-end',\n  },\n  infoText: {\n    fontSize: isMobileWeb ? 10 : 11,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  expandIndicator: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingLeft: 8,\n    gap: 2,\n  },\n  childrenCount: {\n    fontSize: isMobileWeb ? 10 : 12,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  childrenContainer: {\n    marginLeft: isMobileWeb ? 20 : 28,\n    paddingTop: 4,\n  },\n  loadingContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 48,\n    gap: 16,\n  },\n  loadingText: {\n    fontSize: isMobileWeb ? 14 : 16,\n    color: colors.textSecondary,\n  },\n  errorContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 48,\n    gap: 16,\n  },\n  errorText: {\n    fontSize: isMobileWeb ? 14 : 16,\n    color: colors.error,\n    textAlign: 'center',\n  },\n  retryButton: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n  },\n  retryButtonText: {\n    color: colors.white,\n    fontWeight: '600',\n    fontSize: isMobileWeb ? 14 : 16,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 48,\n    gap: 16,\n  },\n  emptyText: {\n    fontSize: isMobileWeb ? 14 : 16,\n    color: colors.textTertiary,\n  },\n  legend: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 12 : 20,\n    marginTop: isMobileWeb ? 20 : 32,\n    paddingTop: isMobileWeb ? 16 : 24,\n    borderTopWidth: 1,\n    borderTopColor: colors.borderSecondary,\n  },\n  legendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  legendDot: {\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n  },\n  legendText: {\n    fontSize: isMobileWeb ? 11 : 13,\n    color: colors.textSecondary,\n  },\n});\n\nexport default AdminHierarchyTree;\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AutocompleteDropdownComp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/AutocompleteInputOnly.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'event' is defined but never used.","line":35,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// AutocompleteInputOnly.tsx\nimport React, { useRef } from \"react\";\nimport {\n  View,\n  Text,\n  TextInput,\n  StyleSheet,\n  LayoutChangeEvent,\n} from \"react-native\";\nimport colors from \"../globals/colors\";\nimport { FontSizes } from \"../globals/constants\";\n\ninterface AutocompleteInputOnlyProps {\n  label: string;\n  value: string;\n  onChangeText: (text: string) => void;\n  onFocus: () => void;\n  onBlur: () => void;\n  placeholder?: string;\n  // Change the type of inputRef in the signature here\n  onLayoutMeasure: (x: number, y: number, width: number, height: number, inputRef: React.RefObject<TextInput | null>) => void;\n}\n\nconst AutocompleteInputOnly: React.FC<AutocompleteInputOnlyProps> = ({\n  label,\n  value,\n  onChangeText,\n  onFocus,\n  onBlur,\n  placeholder,\n  onLayoutMeasure,\n}) => {\n  const inputRef = useRef<TextInput>(null);\n\n  const handleLayout = (event: LayoutChangeEvent) => {\n    // We're measuring the current element, so inputRef.current won't be null here\n    inputRef.current?.measureInWindow((x, y, width, height) => {\n      onLayoutMeasure(x, y, width, height, inputRef); // Pass the ref as is\n    });\n  };\n\n  return (\n    <View style={localStyles.container}>\n      <Text style={localStyles.label}>{label}</Text>\n      <View style={localStyles.inputContainer}>\n        <TextInput\n          ref={inputRef}\n          style={localStyles.input}\n          value={value}\n          onChangeText={onChangeText}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          onLayout={handleLayout}\n          placeholder={placeholder}\n          placeholderTextColor={colors.dropdownPlaceholder}\n        />\n      </View>\n    </View>\n  );\n};\n\nconst localStyles = StyleSheet.create({\n  container: {\n    marginBottom: 10,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    marginBottom: 5,\n    color: colors.dropdownLabel,\n    textAlign: 'right',\n  },\n  inputContainer: {\n    borderWidth: 1,\n    borderColor: colors.dropdownBorder,\n    borderRadius: 8,\n    backgroundColor: colors.dropdownBackground,\n  },\n  input: {\n    height: 40,\n    paddingHorizontal: 10,\n    fontSize: FontSizes.medium,\n    textAlign: 'right',\n    writingDirection: 'rtl',\n  },\n});\n\nexport default AutocompleteInputOnly;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/DailyHabitsQuickView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":417,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":417,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15147,15150],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15147,15150],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":418,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":418,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15194,15197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15194,15197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  RefreshControl,\n  ScrollView,\n  Platform,\n} from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useTranslation } from 'react-i18next';\nimport { db } from '../../utils/databaseService';\nimport { useUser } from '../../stores/userStore';\nimport { EditEntryModal } from './EditEntryModal';\nimport {\n  DailyTrackerData,\n  DailyTrackerChallenge,\n  EntryStatus,\n} from '../../globals/types';\n\ntype ViewMode = 'daily' | 'weekly' | 'monthly';\n\ninterface DailyHabitsQuickViewProps {\n  onBrowseChallenges: () => void;\n}\n\nfunction getDateRange(mode: ViewMode): string[] {\n  const today = new Date().toISOString().split('T')[0];\n  const dates: string[] = [];\n  if (mode === 'daily') {\n    const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n    dates.push(yesterday, today);\n  } else if (mode === 'weekly') {\n    for (let i = 7; i >= 0; i--) {\n      const d = new Date(Date.now() - i * 24 * 60 * 60 * 1000);\n      dates.push(d.toISOString().split('T')[0]);\n    }\n  } else {\n    for (let i = 30; i >= 0; i--) {\n      const d = new Date(Date.now() - i * 24 * 60 * 60 * 1000);\n      dates.push(d.toISOString().split('T')[0]);\n    }\n  }\n  return dates;\n}\n\nexport const DailyHabitsQuickView: React.FC<DailyHabitsQuickViewProps> = ({\n  onBrowseChallenges,\n}) => {\n  const { t } = useTranslation('challenges');\n  const { selectedUser: user } = useUser();\n  const [data, setData] = useState<DailyTrackerData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [viewMode, setViewMode] = useState<ViewMode>('daily');\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [selectedChallenge, setSelectedChallenge] = useState<DailyTrackerChallenge | null>(null);\n  const [selectedDate, setSelectedDate] = useState<string>('');\n  const editingRef = useRef<{ date: string; value?: number; notes?: string } | null>(null);\n  const today = new Date().toISOString().split('T')[0];\n  const dateRange = getDateRange(viewMode);\n  const startDate = dateRange[0];\n  const endDate = dateRange[dateRange.length - 1];\n\n  const loadTodayData = useCallback(async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const response = await db.getDailyTrackerData(user.id, startDate, endDate);\n      const payload = response?.data?.data ?? response?.data ?? response;\n      if (payload && Array.isArray(payload.challenges)) {\n        if (__DEV__) {\n          const dates = payload.entries_by_date ? Object.keys(payload.entries_by_date) : [];\n          console.log('[DailyHabitsQuickView] Data loaded:', { challenges: payload.challenges.length, dates });\n          dates.forEach(date => {\n            const dateEntries = payload.entries_by_date[date];\n            console.log(`[DailyHabitsQuickView] Entries for ${date}:`, dateEntries);\n            Object.keys(dateEntries).forEach(challengeId => {\n              const entry = dateEntries[challengeId];\n              console.log(`  Challenge ${challengeId}: value=${entry.value}, status=${entry.status}, notes=${entry.notes?.substring(0, 20) || 'none'}`);\n            });\n          });\n          console.log('[DailyHabitsQuickView] Updating state with new data');\n        }\n        setData({ ...payload });\n        if (__DEV__) console.log('[DailyHabitsQuickView] State updated with new object');\n      } else {\n        if (__DEV__) console.warn('[DailyHabitsQuickView] Invalid payload:', { hasPayload: !!payload, challengesIsArray: Array.isArray(payload?.challenges) });\n        setData(null);\n      }\n    } catch (error) {\n      console.error('[DailyHabitsQuickView] load error:', error);\n      setData(null);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, [user?.id, startDate, endDate]);\n\n  useFocusEffect(\n    useCallback(() => {\n      loadTodayData();\n    }, [loadTodayData])\n  );\n\n  const viewModeRef = useRef(viewMode);\n  useEffect(() => {\n    if (viewModeRef.current !== viewMode) {\n      viewModeRef.current = viewMode;\n      if (user?.id) loadTodayData();\n    }\n  }, [viewMode, user?.id, loadTodayData]);\n\n  const onRefresh = () => {\n    setRefreshing(true);\n    loadTodayData();\n  };\n\n  const getCellStatus = (challengeId: string, date: string): EntryStatus => {\n    if (!data?.entries_by_date[date]) return 'empty';\n    const entry = data.entries_by_date[date][challengeId];\n    return entry?.status ?? 'empty';\n  };\n\n  const getCellValue = (challengeId: string, date: string): number | undefined => {\n    return data?.entries_by_date[date]?.[challengeId]?.value;\n  };\n\n  const handleCellPress = (challenge: DailyTrackerChallenge, date: string) => {\n    const value = getCellValue(challenge.id, date);\n    const notes = data?.entries_by_date[date]?.[challenge.id]?.notes;\n    const currentStatus = getCellStatus(challenge.id, date);\n    editingRef.current = { date, value, notes };\n    setSelectedChallenge(challenge);\n    setSelectedDate(date);\n    setModalVisible(true);\n    if (__DEV__) {\n      console.log('[DailyHabitsQuickView] Opening edit:', { challengeId: challenge.id, title: challenge.title, type: challenge.type, goal_value: challenge.goal_value, goal_direction: challenge.goal_direction, date, value, notes, currentStatus });\n    }\n  };\n\n  const handleSaveEntry = async (value: number, notes: string) => {\n    const challengeId = selectedChallenge?.id;\n    const dateToSave = selectedDate || editingRef.current?.date;\n    if (!challengeId || !user?.id || !dateToSave) {\n      if (__DEV__) console.warn('[DailyHabitsQuickView] Save cancelled: missing challenge/user/date', { challengeId, userId: user?.id, dateToSave });\n      return;\n    }\n    if (__DEV__) console.log('[DailyHabitsQuickView] Saving entry:', { challengeId, date: dateToSave, value, notes });\n    try {\n      await db.addChallengeEntry(challengeId, {\n        user_id: user.id,\n        value,\n        notes,\n        entry_date: dateToSave,\n      });\n      if (__DEV__) console.log('[DailyHabitsQuickView] Save succeeded');\n      editingRef.current = null;\n      setModalVisible(false);\n      if (__DEV__) console.log('[DailyHabitsQuickView] Modal closed, refreshing data');\n      await loadTodayData();\n      if (__DEV__) console.log('[DailyHabitsQuickView] Data refreshed successfully');\n    } catch (err) {\n      if (__DEV__) console.error('[DailyHabitsQuickView] Save error:', err);\n      throw err;\n    }\n  };\n\n  const currentEntry = selectedChallenge && selectedDate && data?.entries_by_date[selectedDate]?.[selectedChallenge.id];\n  const modalDate = editingRef.current?.date ?? selectedDate ?? today;\n  const modalExistingValue = editingRef.current !== null ? editingRef.current.value : currentEntry?.value;\n  const modalExistingNotes = editingRef.current !== null ? editingRef.current.notes : currentEntry?.notes;\n\n  const calculateOverallStreak = (): number => {\n    if (!data || data.challenges.length === 0) return 0;\n    return Math.max(...data.challenges.map((c) => c.participant_data?.current_streak ?? 0));\n  };\n\n  if (loading) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingRow}>\n          <ActivityIndicator size=\"small\" color=\"#2E7D32\" />\n          <Text style={styles.loadingText}>{t('quickView.loading')}</Text>\n        </View>\n      </View>\n    );\n  }\n\n  const hasDailyChallenges = data && data.challenges.length > 0;\n\n  const formatDateLabel = (dateStr: string) => {\n    const d = new Date(dateStr + 'T00:00:00');\n    if (viewMode === 'daily') return dateStr === today ? t('details.today') : t('details.yesterday');\n    if (viewMode === 'weekly') return d.getDate().toString();\n    return d.getDate().toString();\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>{t('quickView.title')}</Text>\n        <View style={styles.toggleRow}>\n          {(['daily', 'weekly', 'monthly'] as const).map((mode) => (\n            <TouchableOpacity\n              key={mode}\n              style={[styles.toggleBtn, viewMode === mode && styles.toggleBtnActive]}\n              onPress={() => setViewMode(mode)}\n            >\n              <Text style={[styles.toggleBtnText, viewMode === mode && styles.toggleBtnTextActive]}>\n                {mode === 'daily' ? t('frequency.DAILY') : mode === 'weekly' ? t('frequency.WEEKLY') : t('frequency.MONTHLY')}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </View>\n\n      {hasDailyChallenges ? (\n        <ScrollView\n          showsVerticalScrollIndicator={false}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n          }\n        >\n          <View style={styles.statsRow}>\n              <View style={styles.statBox}>\n                <Text style={styles.statValue}>\n                  {data.stats.total_success_rate != null\n                    ? `${Math.round(data.stats.total_success_rate)}%`\n                    : 'â€”'}\n                </Text>\n                <Text style={styles.statLabel}>{t('stats.successRate')}</Text>\n              </View>\n              <View style={styles.statBox}>\n                <Text style={styles.statValue}>{calculateOverallStreak()}</Text>\n                <Text style={styles.statLabel}>{t('stats.currentStreak')}</Text>\n              </View>\n            </View>\n\n            <ScrollView\n              horizontal={dateRange.length > 4}\n              showsHorizontalScrollIndicator={dateRange.length > 4}\n              style={dateRange.length > 4 ? styles.tableScroll : undefined}\n              contentContainerStyle={Platform.OS === 'web' && dateRange.length > 4 ? { minWidth: '100%' } : undefined}\n            >\n              <View style={[\n                styles.tableWrapper,\n                Platform.OS === 'web' && dateRange.length > 4 && { minWidth: dateRange.length * 60 + 120 }\n              ]}>\n                <View style={styles.tableHeader}>\n                  <View style={styles.tableHeaderLabel} />\n                  {dateRange.map((date) => (\n                  <View\n                    key={date}\n                    style={[styles.dateCol, date === today && styles.dateColToday]}\n                  >\n                    <Text style={styles.dateColText}>{formatDateLabel(date)}</Text>\n                    <Text style={styles.dateColSub}>{date}</Text>\n                  </View>\n                ))}\n              </View>\n              {data.challenges.map((challenge) => (\n                <View key={challenge.id} style={styles.tableRow}>\n                  <Text style={styles.challengeName} numberOfLines={2}>\n                    {challenge.title}\n                  </Text>\n                  {dateRange.map((date) => {\n                    const status = getCellStatus(challenge.id, date);\n                    const cellValue = getCellValue(challenge.id, date);\n                    \n                    let displayText = 'â€”';\n                    if (cellValue !== undefined) {\n                      if (challenge.type === 'BOOLEAN') {\n                        displayText = status === 'success' ? 'âœ“' : 'âœ—';\n                      } else if (challenge.type === 'NUMERIC') {\n                        displayText = cellValue.toString();\n                      } else if (challenge.type === 'DURATION') {\n                        const hours = Math.floor(cellValue / 60);\n                        const minutes = cellValue % 60;\n                        displayText = hours > 0 ? `${hours}:${minutes.toString().padStart(2, '0')}` : `${minutes}m`;\n                      }\n                    }\n                    \n                    const iconColor =\n                      status === 'success' ? '#4CAF50' : status === 'failed' ? '#F44336' : status === 'neutral' ? '#9E9E9E' : '#E0E0E0';\n\n                    return (\n                      <TouchableOpacity\n                        key={date}\n                        style={[\n                          styles.cell,\n                          { backgroundColor: iconColor === '#E0E0E0' ? '#F5F5F5' : `${iconColor}18` },\n                          date === today && styles.cellToday,\n                        ]}\n                        onPress={() => handleCellPress(challenge, date)}\n                        activeOpacity={0.7}\n                      >\n                        <Text style={[styles.cellText, { color: iconColor }]} numberOfLines={1}>\n                          {displayText}\n                        </Text>\n                      </TouchableOpacity>\n                    );\n                  })}\n                </View>\n              ))}\n              </View>\n            </ScrollView>\n        </ScrollView>\n      ) : (\n        <View style={styles.emptyState}>\n          <Text style={styles.emptyText}>{t('quickView.noChallenges')}</Text>\n          <Text style={styles.emptySubtext}>\n            {t('quickView.noChallengesHint')}\n          </Text>\n          <TouchableOpacity style={styles.expandButton} onPress={onBrowseChallenges}>\n            <Text style={styles.expandButtonText}>×¢×™×•×Ÿ ×‘××ª×’×¨×™× â†’</Text>\n          </TouchableOpacity>\n        </View>\n      )}\n\n      <EditEntryModal\n        visible={modalVisible}\n        challenge={selectedChallenge}\n        date={modalDate}\n        existingValue={modalExistingValue}\n        existingNotes={modalExistingNotes}\n        onClose={() => { editingRef.current = null; setModalVisible(false); }}\n        onSave={handleSaveEntry}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    padding: 16,\n    marginHorizontal: 16,\n    marginVertical: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  header: {\n    marginBottom: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: '#E0E0E0',\n    paddingBottom: 8,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 8,\n  },\n  toggleRow: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  toggleBtn: {\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 8,\n    backgroundColor: '#F0F0F0',\n  },\n  toggleBtnActive: {\n    backgroundColor: '#2E7D32',\n  },\n  toggleBtnText: {\n    fontSize: 13,\n    fontWeight: '600',\n    color: '#666',\n  },\n  toggleBtnTextActive: {\n    color: '#FFFFFF',\n  },\n  loadingRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 16,\n    gap: 8,\n  },\n  loadingText: {\n    fontSize: 14,\n    color: '#666',\n  },\n  statsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 12,\n  },\n  statBox: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#2E7D32',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 2,\n  },\n  tableScroll: {\n    marginBottom: 8,\n    ...(Platform.OS === 'web' && {\n      overflowX: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n    }),\n  },\n  tableWrapper: {\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: '#E8E8E8',\n    borderRadius: 10,\n    overflow: 'hidden',\n    minWidth: '100%',\n  },\n  tableHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#F5F5F5',\n    borderBottomWidth: 1,\n    borderBottomColor: '#E0E0E0',\n    paddingVertical: 10,\n    paddingHorizontal: 8,\n  },\n  tableHeaderLabel: {\n    width: 100,\n    minWidth: 100,\n  },\n  dateCol: {\n    width: 60,\n    alignItems: 'center',\n    minWidth: 60,\n  },\n  dateColToday: {\n    backgroundColor: '#E3F2FD',\n  },\n  dateColText: {\n    fontSize: 13,\n    fontWeight: '700',\n    color: '#333',\n  },\n  dateColSub: {\n    fontSize: 10,\n    color: '#666',\n    marginTop: 2,\n  },\n  tableRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderBottomColor: '#F0F0F0',\n    paddingVertical: 6,\n    paddingHorizontal: 8,\n  },\n  challengeName: {\n    width: 100,\n    minWidth: 100,\n    fontSize: 13,\n    color: '#333',\n    marginEnd: 8,\n  },\n  cell: {\n    width: 56,\n    height: 48,\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginHorizontal: 2,\n    borderWidth: 1,\n    borderColor: '#E8E8E8',\n  },\n  cellToday: {\n    borderColor: '#2196F3',\n    borderWidth: 1.5,\n  },\n  cellText: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  expandButton: {\n    backgroundColor: '#F5F5F5',\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  expandButtonText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#2E7D32',\n  },\n  emptyState: {\n    alignItems: 'center',\n    paddingVertical: 16,\n  },\n  emptyText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#666',\n    marginBottom: 4,\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#999',\n    marginBottom: 12,\n    textAlign: 'center',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/EditChallengeModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4032,4035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4032,4035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6946,6949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6946,6949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Edit Challenge Modal\n// Modal for editing an existing community challenge\nimport React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Modal,\n  TouchableOpacity,\n  TextInput,\n  ScrollView,\n  ActivityIndicator,\n  Alert,\n  Image,\n} from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { CommunityChallenge, ChallengeDifficulty } from '../../globals/types';\nimport { db } from '../../utils/databaseService';\nimport { useToast } from '../../utils/toastService';\nimport { useUser } from '../../stores/userStore';\n\ninterface EditChallengeModalProps {\n  visible: boolean;\n  challenge: CommunityChallenge;\n  onClose: () => void;\n  onUpdate: () => void;\n}\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', label: '×§×œ', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', label: '×‘×™× ×•× ×™', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', label: '×§×©×”', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', label: '××•××—×”', icon: 'trophy-outline', color: colors.primary },\n];\n\nexport default function EditChallengeModal({\n  visible,\n  challenge,\n  onClose,\n  onUpdate,\n}: EditChallengeModalProps) {\n  const { t } = useTranslation(['challenges', 'common']);\n  const { showToast } = useToast();\n  const { selectedUser: user } = useUser();\n\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageUri, setImageUri] = useState('');\n  const [goalValue, setGoalValue] = useState('');\n  const [difficulty, setDifficulty] = useState<ChallengeDifficulty>('easy');\n  const [category, setCategory] = useState('');\n  const [isActive, setIsActive] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  // Initialize form with challenge data\n  useEffect(() => {\n    if (challenge) {\n      setTitle(challenge.title || '');\n      setDescription(challenge.description || '');\n      setImageUri(challenge.image_url || '');\n      setGoalValue(challenge.goal_value?.toString() || '');\n      setDifficulty(challenge.difficulty || 'easy');\n      setCategory(challenge.category || '');\n      setIsActive(challenge.is_active ?? true);\n    }\n  }, [challenge]);\n\n  const pickImage = async () => {\n    try {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert(t('common:error'), t('imagePermissionRequired'));\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setImageUri(result.assets[0].uri);\n      }\n    } catch (error) {\n      console.error('Error picking image:', error);\n      Alert.alert(t('common:error'), t('imagePickError'));\n    }\n  };\n\n  const handleSave = async () => {\n    if (!title.trim()) {\n      Alert.alert(t('common:error'), t('fields.titleRequired'));\n      return;\n    }\n\n    if (!user?.id) {\n      Alert.alert(t('common:error'), t('messages.loginRequired'));\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const updateData = {\n        title: title.trim(),\n        description: description.trim() || undefined,\n        image_url: imageUri || undefined,\n        goal_value: goalValue ? parseFloat(goalValue) : undefined,\n        difficulty,\n        category: category.trim() || undefined,\n        is_active: isActive,\n      };\n\n      const response = await db.updateCommunityChallenge(challenge.id, user.id, updateData);\n\n      if (response.success) {\n        showToast(t('challengeUpdated'), 'success');\n        onUpdate();\n        onClose();\n      } else {\n        showToast(t('messages.errorUpdating'), 'error');\n      }\n    } catch (error: any) {\n      console.error('Error updating challenge:', error);\n      showToast(error.message || t('messages.errorUpdating'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent={true}>\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContainer}>\n          {/* Header */}\n          <View style={styles.header}>\n            <Text style={styles.headerTitle}>{t('editChallenge')}</Text>\n            <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n              <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n            </TouchableOpacity>\n          </View>\n\n          {/* Form */}\n          <ScrollView style={styles.formContent} showsVerticalScrollIndicator={false}>\n            {/* Title */}\n            <Text style={styles.label}>{t('fields.title')} *</Text>\n            <TextInput\n              style={styles.input}\n              placeholder={t('fields.titlePlaceholder')}\n              value={title}\n              onChangeText={setTitle}\n              maxLength={255}\n            />\n\n            {/* Description */}\n            <Text style={styles.label}>{t('fields.description')}</Text>\n            <TextInput\n              style={[styles.input, styles.textArea]}\n              placeholder={t('fields.descriptionPlaceholder')}\n              value={description}\n              onChangeText={setDescription}\n              multiline\n              numberOfLines={4}\n              maxLength={2000}\n            />\n\n            {/* Image */}\n            <Text style={styles.label}>{t('fields.image')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n            <TouchableOpacity style={styles.imagePickerButton} onPress={pickImage}>\n              {imageUri ? (\n                <Image source={{ uri: imageUri }} style={styles.challengeImage} resizeMode=\"cover\" />\n              ) : (\n                <View style={styles.imagePlaceholder}>\n                  <Ionicons name=\"image-outline\" size={32} color={colors.textSecondary} />\n                  <Text style={styles.imagePlaceholderText}>{t('addImage')}</Text>\n                </View>\n              )}\n            </TouchableOpacity>\n\n            {/* Difficulty */}\n            <Text style={styles.label}>{t('fields.difficulty')}</Text>\n            <View style={styles.optionsRow}>\n              {CHALLENGE_DIFFICULTY_OPTIONS.map((option) => (\n                <TouchableOpacity\n                  key={option.id}\n                  style={[\n                    styles.optionButton,\n                    difficulty === option.id && styles.optionButtonActive,\n                    difficulty === option.id && { backgroundColor: option.color },\n                  ]}\n                  onPress={() => setDifficulty(option.id as ChallengeDifficulty)}\n                >\n                  <Ionicons\n                    name={option.icon as any}\n                    size={20}\n                    color={difficulty === option.id ? colors.white : option.color}\n                  />\n                  <Text style={[styles.optionText, difficulty === option.id && styles.optionTextActive]}>\n                    {option.label}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            {/* Goal Value (if not BOOLEAN) */}\n            {challenge.type !== 'BOOLEAN' && (\n              <>\n                <Text style={styles.label}>\n                  {t('fields.goalValue')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})\n                </Text>\n                <TextInput\n                  style={styles.input}\n                  placeholder={\n                    challenge.type === 'DURATION'\n                      ? t('fields.goalValueMinutes')\n                      : t('fields.goalValuePlaceholder')\n                  }\n                  value={goalValue}\n                  onChangeText={setGoalValue}\n                  keyboardType=\"numeric\"\n                />\n              </>\n            )}\n\n            {/* Category */}\n            <Text style={styles.label}>\n              {t('fields.category')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})\n            </Text>\n            <TextInput\n              style={styles.input}\n              placeholder={t('fields.categoryPlaceholder')}\n              value={category}\n              onChangeText={setCategory}\n              maxLength={50}\n            />\n\n            {/* Active Status */}\n            <View style={styles.activeRow}>\n              <Text style={styles.label}>{t('activeStatus')}</Text>\n              <TouchableOpacity\n                style={[styles.toggleButton, isActive && styles.toggleButtonActive]}\n                onPress={() => setIsActive(!isActive)}\n              >\n                <Ionicons\n                  name={isActive ? 'checkmark-circle' : 'close-circle'}\n                  size={24}\n                  color={isActive ? colors.success : colors.error}\n                />\n                <Text style={[styles.toggleText, isActive && styles.toggleTextActive]}>\n                  {isActive ? t('active') : t('inactive')}\n                </Text>\n              </TouchableOpacity>\n            </View>\n\n            {/* Info about non-editable fields */}\n            <View style={styles.infoBox}>\n              <Ionicons name=\"information-circle-outline\" size={20} color={colors.primary} />\n              <Text style={styles.infoText}>{t('editInfo')}</Text>\n            </View>\n          </ScrollView>\n\n          {/* Footer Actions */}\n          <View style={styles.footer}>\n            <TouchableOpacity style={styles.cancelButton} onPress={onClose}>\n              <Text style={styles.cancelButtonText}>{t('common:cancel')}</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.saveButton, loading && styles.saveButtonDisabled]}\n              onPress={handleSave}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color={colors.white} />\n              ) : (\n                <>\n                  <Ionicons name=\"save-outline\" size={20} color={colors.white} />\n                  <Text style={styles.saveButtonText}>{t('common:save')}</Text>\n                </>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContainer: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    maxHeight: '90%',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  headerTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  formContent: {\n    padding: 16,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    marginTop: 16,\n  },\n  input: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  optionsRow: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  optionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  optionButtonActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  optionText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  optionTextActive: {\n    color: colors.white,\n  },\n  activeRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  toggleButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  toggleButtonActive: {\n    backgroundColor: colors.successLight,\n  },\n  toggleText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  toggleTextActive: {\n    color: colors.success,\n  },\n  infoBox: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    gap: 8,\n    backgroundColor: colors.primaryLight,\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 16,\n    marginBottom: 16,\n  },\n  infoText: {\n    flex: 1,\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    lineHeight: 20,\n  },\n  footer: {\n    flexDirection: 'row',\n    gap: 12,\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  cancelButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  saveButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    paddingVertical: 12,\n    borderRadius: 8,\n    backgroundColor: colors.primary,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  imagePickerButton: {\n    marginBottom: 16,\n    borderRadius: 12,\n    overflow: 'hidden',\n    borderWidth: 2,\n    borderColor: colors.border,\n    borderStyle: 'dashed',\n  },\n  challengeImage: {\n    width: '100%',\n    height: 150,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  imagePlaceholder: {\n    width: '100%',\n    height: 150,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n  },\n  imagePlaceholderText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/EditEntryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChallengeType' is defined but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChallengeType"},"fix":{"range":[246,260],"text":""},"desc":"Remove unused variable \"ChallengeType\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":85,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  StyleSheet,\n  ScrollView,\n  Switch,\n  Alert,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { ChallengeType, DailyTrackerChallenge } from '../../globals/types';\n\ninterface EditEntryModalProps {\n  visible: boolean;\n  challenge: DailyTrackerChallenge | null;\n  date: string;\n  existingValue?: number;\n  existingNotes?: string;\n  onClose: () => void;\n  onSave: (value: number, notes: string) => Promise<void>;\n  onDelete?: () => Promise<void>;\n}\n\nexport const EditEntryModal: React.FC<EditEntryModalProps> = ({\n  visible,\n  challenge,\n  date,\n  existingValue,\n  existingNotes,\n  onClose,\n  onSave,\n  onDelete,\n}) => {\n  const { t } = useTranslation(['challenges', 'common']);\n  const [value, setValue] = useState<number>(existingValue ?? 0);\n  const [notes, setNotes] = useState<string>(existingNotes ?? '');\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    if (visible && challenge) {\n      const nextValue = existingValue ?? (challenge.type === 'BOOLEAN' ? 0 : 0);\n      const nextNotes = existingNotes ?? '';\n      setValue(nextValue);\n      setNotes(nextNotes);\n      if (__DEV__) {\n        console.log('[EditEntryModal] Opened with values:', { date, existingValue, nextValue, existingNotes: existingNotes?.slice(0, 20) });\n      }\n    }\n  }, [visible, date, existingValue, existingNotes, challenge?.id]);\n\n  if (!challenge) return null;\n\n  const handleSave = async () => {\n    if (__DEV__) console.log('[EditEntryModal] Save clicked:', { value, notes });\n    setSaving(true);\n    try {\n      await onSave(value, notes);\n      // onSave should handle closing the modal and refreshing data\n    } catch (error) {\n      if (__DEV__) console.error('[EditEntryModal] Error saving:', error);\n      Alert.alert(t('editEntry.saveErrorTitle'), t('editEntry.saveErrorMessage'));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    Alert.alert(\n      t('editEntry.deleteTitle'),\n      t('editEntry.deleteMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('common:delete'),\n          style: 'destructive',\n          onPress: async () => {\n            if (onDelete) {\n              setSaving(true);\n              try {\n                await onDelete();\n                onClose();\n              } catch (error) {\n                Alert.alert(t('editEntry.deleteErrorTitle'), t('editEntry.deleteErrorMessage'));\n              } finally {\n                setSaving(false);\n              }\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const formatDate = (dateString: string): string => {\n    const d = new Date(dateString + 'T00:00:00');\n    return d.toLocaleDateString('he-IL', { \n      weekday: 'long', \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    });\n  };\n\n  const renderValueInput = () => {\n    if (challenge.type === 'BOOLEAN') {\n      return (\n        <View style={styles.booleanContainer}>\n          <Text style={styles.label}>{t('challenges:fields.value')}</Text>\n          <View style={styles.switchRow}>\n            <Text style={styles.switchLabel}>\n              {value === 1 ? 'âœ“' : 'âœ—'}\n            </Text>\n            <Switch\n              value={value === 1}\n              onValueChange={(val) => setValue(val ? 1 : 0)}\n              trackColor={{ false: '#F44336', true: '#4CAF50' }}\n              thumbColor=\"#FFFFFF\"\n            />\n          </View>\n        </View>\n      );\n    }\n\n    if (challenge.type === 'NUMERIC') {\n      return (\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>{t('challenges:fields.value')}</Text>\n          <TextInput\n            style={styles.input}\n            value={value.toString()}\n            onChangeText={(text) => {\n              const num = parseFloat(text);\n              setValue(isNaN(num) ? 0 : num);\n            }}\n            keyboardType=\"numeric\"\n            placeholder={t('challenges:fields.valuePlaceholder')}\n          />\n          {challenge.goal_value && (\n            <Text style={styles.hint}>\n              {challenge.goal_direction === 'minimize' ? '< ' : 'â‰¥ '}\n              {challenge.goal_value}\n            </Text>\n          )}\n        </View>\n      );\n    }\n\n    if (challenge.type === 'DURATION') {\n      const hours = Math.floor(value / 60);\n      const minutes = value % 60;\n\n      return (\n        <View style={styles.inputContainer}>\n          <Text style={styles.label}>{t('challenges:fields.goalValueMinutes')}</Text>\n          <View style={styles.timeRow}>\n            <View style={styles.timeInput}>\n              <Text style={styles.timeLabel}>H</Text>\n              <TextInput\n                style={styles.input}\n                value={hours.toString()}\n                onChangeText={(text) => {\n                  const h = parseInt(text) || 0;\n                  setValue(h * 60 + minutes);\n                }}\n                keyboardType=\"numeric\"\n                placeholder=\"0\"\n              />\n            </View>\n            <Text style={styles.timeSeparator}>:</Text>\n            <View style={styles.timeInput}>\n              <Text style={styles.timeLabel}>M</Text>\n              <TextInput\n                style={styles.input}\n                value={minutes.toString()}\n                onChangeText={(text) => {\n                  const m = parseInt(text) || 0;\n                  setValue(hours * 60 + m);\n                }}\n                keyboardType=\"numeric\"\n                placeholder=\"0\"\n              />\n            </View>\n          </View>\n          {challenge.goal_value && (\n            <Text style={styles.hint}>\n              {t('editEntry.goalMinutes', { value: challenge.goal_value })}\n            </Text>\n          )}\n        </View>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.overlay}>\n        <View style={styles.modal}>\n          <ScrollView showsVerticalScrollIndicator={false}>\n            <Text style={styles.title}>{challenge.title}</Text>\n            <Text style={styles.dateText}>{formatDate(date)}</Text>\n\n            {renderValueInput()}\n\n            <View style={styles.inputContainer}>\n              <Text style={styles.label}>{t('fields.notes')}</Text>\n              <TextInput\n                style={[styles.input, styles.notesInput]}\n                value={notes}\n                onChangeText={setNotes}\n                placeholder={t('fields.notesPlaceholder')}\n                multiline\n                numberOfLines={3}\n                textAlignVertical=\"top\"\n              />\n            </View>\n\n            <View style={styles.buttonRow}>\n              <TouchableOpacity\n                style={[styles.button, styles.buttonCancel]}\n                onPress={onClose}\n                disabled={saving}\n              >\n                <Text style={styles.buttonTextCancel}>{t('common:cancel')}</Text>\n              </TouchableOpacity>\n\n              {existingValue !== undefined && onDelete && (\n                <TouchableOpacity\n                  style={[styles.button, styles.buttonDelete]}\n                  onPress={handleDelete}\n                  disabled={saving}\n                >\n                  <Text style={styles.buttonTextDelete}>{t('common:delete')}</Text>\n                </TouchableOpacity>\n              )}\n\n              <TouchableOpacity\n                style={[styles.button, styles.buttonSave]}\n                onPress={handleSave}\n                disabled={saving}\n              >\n                <Text style={styles.buttonTextSave}>\n                  {saving ? t('editEntry.saving') : t('editEntry.save')}\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </ScrollView>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modal: {\n    backgroundColor: '#FFFFFF',\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  dateText: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  inputContainer: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#333',\n    marginBottom: 8,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#E0E0E0',\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    backgroundColor: '#F9F9F9',\n  },\n  notesInput: {\n    height: 80,\n  },\n  hint: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  booleanContainer: {\n    marginBottom: 20,\n  },\n  switchRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: '#F9F9F9',\n    borderRadius: 8,\n  },\n  switchLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  timeRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  timeInput: {\n    flex: 1,\n  },\n  timeLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginBottom: 4,\n    textAlign: 'center',\n  },\n  timeSeparator: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginHorizontal: 8,\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 12,\n    marginTop: 10,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  buttonCancel: {\n    backgroundColor: '#F5F5F5',\n  },\n  buttonDelete: {\n    backgroundColor: '#FFEBEE',\n  },\n  buttonSave: {\n    backgroundColor: '#4CAF50',\n  },\n  buttonTextCancel: {\n    color: '#666',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  buttonTextDelete: {\n    color: '#F44336',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  buttonTextSave: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsStatsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsTrackerCell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'View' is defined but never used.","line":2,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"View"},"fix":{"range":[70,76],"text":""},"desc":"Remove unused variable \"View\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { TouchableOpacity, Text, StyleSheet, View } from 'react-native';\nimport { ChallengeType, EntryStatus } from '../../globals/types';\n\ninterface HabitsTrackerCellProps {\n  challengeType: ChallengeType;\n  value?: number;\n  status: EntryStatus;\n  isToday?: boolean;\n  onPress: () => void;\n}\n\nexport const HabitsTrackerCell: React.FC<HabitsTrackerCellProps> = ({\n  challengeType,\n  value,\n  status,\n  isToday = false,\n  onPress\n}) => {\n  const getStatusIcon = (): string => {\n    switch (status) {\n      case 'success':\n        return 'âœ“';\n      case 'failed':\n        return 'âœ—';\n      case 'neutral':\n        return 'â€“';\n      case 'empty':\n        return 'â€”';\n      default:\n        return 'â€”';\n    }\n  };\n\n  const getStatusColor = (): string => {\n    switch (status) {\n      case 'success':\n        return '#4CAF50';\n      case 'failed':\n        return '#F44336';\n      case 'neutral':\n        return '#9E9E9E';\n      case 'empty':\n        return '#E0E0E0';\n      default:\n        return '#E0E0E0';\n    }\n  };\n\n  const formatValue = (): string => {\n    if (status === 'empty' || value === undefined) {\n      return getStatusIcon();\n    }\n\n    if (challengeType === 'BOOLEAN') {\n      return getStatusIcon();\n    }\n\n    if (challengeType === 'DURATION') {\n      // Convert minutes to hours:minutes format\n      const hours = Math.floor(value / 60);\n      const minutes = value % 60;\n      return hours > 0 ? `${hours}:${minutes.toString().padStart(2, '0')}` : `${minutes}m`;\n    }\n\n    // NUMERIC\n    return value.toString();\n  };\n\n  return (\n    <TouchableOpacity\n      style={[\n        styles.cell,\n        { backgroundColor: getStatusColor() + '20' },\n        isToday && styles.cellToday\n      ]}\n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      <Text\n        style={[\n          styles.cellText,\n          { color: getStatusColor() },\n          status === 'empty' && styles.cellTextEmpty\n        ]}\n      >\n        {formatValue()}\n      </Text>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  cell: {\n    width: 50,\n    height: 50,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 8,\n    marginHorizontal: 4,\n    borderWidth: 1,\n    borderColor: '#E0E0E0',\n  },\n  cellToday: {\n    borderWidth: 2,\n    borderColor: '#2196F3',\n  },\n  cellText: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  cellTextEmpty: {\n    color: '#BDBDBD',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/HabitsTrackerTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Challenges/ViewToggleButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ChatListItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ChatMessageBubble.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1605,1608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1605,1608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2013,2016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2013,2016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3320,3323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3320,3323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6122,6125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6122,6125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/ChatMessageBubble.tsx\nimport React from 'react';\nimport { View, Text, StyleSheet, Image, TouchableOpacity, Alert } from 'react-native';\nimport { Message } from '../utils/chatService'; // Use new Message type\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors'; // Assuming you have a Colors file\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { formatFileSize } from '../utils/fileService';\n\ninterface ChatMessageBubbleProps {\n  message: Message;\n  isMyMessage: boolean;\n  userAvatar: string;\n}\n\nconst ChatMessageBubble: React.FC<ChatMessageBubbleProps> = ({ message, isMyMessage, userAvatar }) => {\n  const { t } = useTranslation(['chat','common']);\n  const bubbleStyle = isMyMessage ? styles.myBubble : styles.otherBubble;\n  const textStyle = isMyMessage ? styles.myText : styles.otherText;\n  const containerStyle = isMyMessage ? styles.myMessageContainer : styles.otherMessageContainer;\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const renderFileContent = () => {\n    if (!message.fileData) return null;\n\n    const { fileData } = message;\n\n    switch (fileData.type) {\n      case 'image':\n        return (\n          <TouchableOpacity \n            style={styles.fileContainer}\n            onPress={() => Alert.alert(t('chat:image'), t('chat:openImage'))}\n          >\n            <Image source={{ uri: fileData.uri }} style={styles.messageImage as any} />\n          </TouchableOpacity>\n        );\n      \n      case 'video':\n        return (\n          <TouchableOpacity \n            style={styles.fileContainer}\n            onPress={() => Alert.alert(t('chat:video'), t('chat:playVideo'))}\n          >\n            <View style={styles.videoContainer}>\n              <Image source={{ uri: fileData.thumbnail || fileData.uri }} style={styles.videoThumbnail as any} />\n              <View style={styles.playButton}>\n                <Icon name=\"play\" size={24} color={colors.white} />\n              </View>\n              {fileData.size && (\n                <Text style={styles.fileSize}>{formatFileSize(fileData.size)}</Text>\n              )}\n            </View>\n          </TouchableOpacity>\n        );\n      \n      case 'file':\n        return (\n          <TouchableOpacity \n            style={styles.fileContainer}\n            onPress={() => Alert.alert(t('chat:file'), t('chat:openFile', { name: fileData.name }))}\n          >\n            <View style={styles.documentContainer}>\n              <Icon name=\"document-outline\" size={40} color={colors.primary} />\n              <View style={styles.documentInfo}>\n                <Text style={[styles.documentName, textStyle]} numberOfLines={2}>\n                  {fileData.name}\n                </Text>\n                {fileData.size && (\n                  <Text style={styles.fileSize}>{formatFileSize(fileData.size)}</Text>\n                )}\n              </View>\n            </View>\n          </TouchableOpacity>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <View style={containerStyle}>\n      {!isMyMessage && (\n        <Image source={{ uri: userAvatar }} style={styles.avatar as any} />\n      )}\n      <View style={[styles.bubble, bubbleStyle]}>\n        {message.text && <Text style={[styles.messageText, textStyle]}>{message.text}</Text>}\n        {renderFileContent()}\n        <View style={styles.messageFooter}>\n          <Text style={[styles.timestamp, isMyMessage ? styles.myTimestamp : styles.otherTimestamp]}>\n            {formatTimestamp(message.timestamp)}\n          </Text>\n          {isMyMessage && (\n            <View style={styles.statusContainer}>\n              {message.status === 'sending' && (\n                <Icon name=\"time-outline\" size={12} color={colors.textSecondary} />\n              )}\n              {message.status === 'sent' && (\n                <Icon name=\"checkmark\" size={12} color={colors.textSecondary} />\n              )}\n              {message.status === 'delivered' && (\n                <Icon name=\"checkmark-done\" size={12} color={colors.textSecondary} />\n              )}\n              {message.status === 'read' && (\n                <Icon name=\"checkmark-done\" size={12} color={colors.primary} />\n              )}\n              {message.status === 'failed' && (\n                <Icon name=\"close-circle\" size={12} color={colors.error} />\n              )}\n            </View>\n          )}\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  myMessageContainer: {\n    flexDirection: 'row-reverse',\n    alignSelf: 'flex-end',\n    marginVertical: 4,\n  },\n  otherMessageContainer: {\n    flexDirection: 'row',\n    alignSelf: 'flex-start',\n    marginVertical: 4,\n  },\n  avatar: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    marginHorizontal: 8,\n    alignSelf: 'flex-end', // Align avatar to bottom of bubble\n  },\n  bubble: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 20,\n    maxWidth: '75%',\n    // Shadows\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 1,\n    elevation: 1,\n  },\n  myBubble: {\n    backgroundColor: colors.chatSent, // Your brand blue/purple\n    borderBottomRightRadius: 5, // Pointy end\n  },\n  otherBubble: {\n    backgroundColor: colors.chatReceived, // Light grey for incoming\n    borderBottomLeftRadius: 5, // Pointy end\n  },\n  messageText: {\n    fontSize: FontSizes.body,\n    lineHeight: 22,\n  },\n  myText: {\n    color: colors.white,\n  },\n  otherText: {\n    color: colors.chatText,\n  },\n  messageImage: {\n    width: 200,\n    height: 200,\n    borderRadius: 10,\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  fileContainer: {\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  videoContainer: {\n    position: 'relative',\n    width: 200,\n    height: 150,\n    borderRadius: 10,\n    overflow: 'hidden',\n  },\n  videoThumbnail: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 10,\n  } as any,\n  playButton: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: [{ translateX: -20 }, { translateY: -20 }],\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  documentContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  documentInfo: {\n    flex: 1,\n    marginLeft: 12,\n  },\n  documentName: {\n    fontSize: FontSizes.body,\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  fileSize: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  messageFooter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    marginTop: 4,\n  },\n  timestamp: {\n    fontSize: FontSizes.caption,\n    marginRight: 4,\n  },\n  statusContainer: {\n    marginLeft: 4,\n  },\n  myTimestamp: {\n    color: colors.white,\n    opacity: 0.8,\n  },\n  otherTimestamp: {\n    color: colors.chatTime,\n  },\n});\n\nexport default ChatMessageBubble;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommentsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommunityStatsGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'parseShortNumber' is defined but never used.","line":9,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":61,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"parseShortNumber"},"fix":{"range":[437,455],"text":""},"desc":"Remove unused variable \"parseShortNumber\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'enhancedDB' is defined but never used.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"enhancedDB"},"fix":{"range":[575,638],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":31,"column":17,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":31,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1046,1049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1046,1049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":33,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":33,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1150,1153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1150,1153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":34,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":34,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1221,1224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1221,1224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":35,"column":6,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":35,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1294,1297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1294,1297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":38,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":38,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1403,1406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1403,1406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":39,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":39,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1479,1482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1479,1482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":40,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":40,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1561,1564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1561,1564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":41,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":41,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1639,1642],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1639,1642],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":42,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":42,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1721,1724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1721,1724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5649,5652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5649,5652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Platform } from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport type { StatDetails } from './StatDetailsModal';\nimport { useUser } from '../stores/userStore';\nimport { useEffect, useState } from 'react';\nimport { getGlobalStats, formatShortNumber, parseShortNumber, CommunityStats, EnhancedStatsService } from '../utils/statsService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\n\nexport type CommunityStat = {\n  key: string;\n  icon: string; // emoji\n  label: string;\n  value: string;\n  color?: string;\n};\n\ninterface CommunityStatsGridProps {\n  onSelect: (details: StatDetails) => void;\n}\n\nconst makeDetails = (stat: CommunityStat): StatDetails => ({\n  key: stat.key,\n  title: stat.label,\n  icon: stat.icon,\n  value: stat.value,\n  color: stat.color,\n  description: (require('i18next') as any).t('home:statsDetails.description', { label: stat.label }),\n  bullets: [\n    (require('i18next') as any).t('home:statsDetails.bullets.trends'),\n    (require('i18next') as any).t('home:statsDetails.bullets.byCities'),\n    (require('i18next') as any).t('home:statsDetails.bullets.highlight'),\n  ],\n  breakdownByCity: [\n    { label: (require('i18next') as any).t('home:cities.tlv'), value: 42 },\n    { label: (require('i18next') as any).t('home:cities.jerusalem'), value: 35 },\n    { label: (require('i18next') as any).t('home:cities.haifa'), value: 28 },\n    { label: (require('i18next') as any).t('home:cities.beerSheva'), value: 19 },\n    { label: (require('i18next') as any).t('home:cities.ashdod'), value: 16 },\n  ],\n  trend: [8, 12, 9, 15, 13, 17, 21, 18, 24, 22],\n});\n\nconst CommunityStatsGrid: React.FC<CommunityStatsGridProps> = ({ onSelect }) => {\n  const { t } = useTranslation(['home']);\n  const { isRealAuth } = useUser();\n  const [statsState, setStatsState] = useState<CommunityStats | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n    const POLLING_INTERVAL = 60000; // 60 seconds - stats don't change frequently\n    \n    const loadStats = async (forceRefresh = false) => {\n      if (!mounted) return;\n      \n      console.log(`[CommunityStatsGrid] Loading stats, forceRefresh: ${forceRefresh}`);\n      setLoading(true);\n      \n      try {\n        let stats: CommunityStats;\n        \n        if (USE_BACKEND && isRealAuth) {\n          // Use enhanced backend service for real users\n          console.log('[CommunityStatsGrid] Fetching from backend with forceRefresh:', forceRefresh);\n          stats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n          console.log('[CommunityStatsGrid] Stats received from backend:', Object.keys(stats).length, 'keys');\n        } else {\n          // Use legacy local stats for guests or if backend unavailable\n          console.log('[CommunityStatsGrid] Using local stats (no backend or not authenticated)');\n          stats = await getGlobalStats();\n        }\n        \n        if (mounted) {\n          setStatsState(stats);\n          console.log('[CommunityStatsGrid] Stats state updated');\n        }\n      } catch (error) {\n        console.error('[CommunityStatsGrid] Failed to load community stats:', error);\n        \n        // Fallback to legacy stats\n        const fallbackStats = await getGlobalStats();\n        if (mounted) setStatsState(fallbackStats);\n      }\n      \n      setLoading(false);\n    };\n    \n    // Initial load\n    loadStats();\n    \n    // Auto-refresh every 60 seconds (but use cache - don't force refresh)\n    const intervalId = setInterval(() => {\n      loadStats(false); // Normal refresh with cache\n    }, POLLING_INTERVAL);\n    \n    return () => {\n      mounted = false;\n      clearInterval(intervalId);\n    };\n  }, [isRealAuth]);\n  const realStats: CommunityStat[] = statsState\n    ? (() => {\n        const cfg: Array<{ key: keyof CommunityStats | 'activeMembers'; icon: string; color: string; labelKey?: string }> = [\n          { key: 'moneyDonations', icon: 'ğŸ’µ', color: colors.legacyDarkGreen },\n          { key: 'volunteerHours', icon: 'â°', color: colors.warning },\n          { key: 'rides', icon: 'ğŸš—', color: colors.info },\n          { key: 'events', icon: 'ğŸ‰', color: colors.secondary },\n          { key: 'activeMembers', icon: 'ğŸ‘¥', color: colors.info, labelKey: 'appActiveUsers' },\n          // Extended 15+\n          { key: 'foodKg', icon: 'ğŸ', color: colors.success },\n          { key: 'clothingKg', icon: 'ğŸ‘•', color: colors.info },\n          { key: 'bloodLiters', icon: 'ğŸ©¸', color: colors.error },\n          { key: 'courses', icon: 'ğŸ“š', color: colors.success },\n          { key: 'treesPlanted', icon: 'ğŸŒ³', color: colors.legacyDarkGreen },\n          { key: 'animalsAdopted', icon: 'ğŸ•', color: colors.warning },\n          { key: 'recyclingBags', icon: 'â™»ï¸', color: colors.success },\n          { key: 'culturalEvents', icon: 'ğŸ­', color: colors.info },\n          { key: 'appDownloads', icon: 'ğŸ“²', color: colors.info },\n          { key: 'activeVolunteers', icon: 'ğŸ™‹', color: colors.success },\n          { key: 'kmCarpooled', icon: 'ğŸš—', color: colors.info },\n          { key: 'fundsRaised', icon: 'ğŸ’°', color: colors.success },\n          { key: 'mealsServed', icon: 'ğŸ½ï¸', color: colors.secondary },\n          { key: 'booksDonated', icon: 'ğŸ“š', color: colors.legacyMediumPurple },\n        ];\n        return cfg.map((c) => {\n          const labelKey = c.labelKey || String(c.key);\n          const valueNum = (statsState as any)[c.key] ?? 0;\n          return {\n            key: String(c.key),\n            icon: c.icon,\n            label: t(`home:stats.${labelKey}`),\n            value: formatShortNumber(typeof valueNum === 'number' ? valueNum : 0),\n            color: c.color,\n          } as CommunityStat;\n        });\n      })()\n    : [];\n\n  // Demo-only extra categories (×œ× ×™×ª× ×’×©×• ×¢× keys ×©×›×‘×¨ ×§×™×™××™× ×‘-realStats)\n  const demoStats: CommunityStat[] = [\n    { key: 'sportsGroups', icon: 'âš½', label: t('home:stats.sportsGroups'), value: '23', color: colors.success },\n    { key: 'musicLessons', icon: 'ğŸµ', label: t('home:stats.musicLessons'), value: '34', color: colors.info },\n    { key: 'artWorkshops', icon: 'ğŸ¨', label: t('home:stats.artWorkshops'), value: '45', color: colors.warning },\n    { key: 'computerLessons', icon: 'ğŸ’»', label: t('home:stats.computerLessons'), value: '28', color: colors.info },\n    { key: 'doctorVisits', icon: 'ğŸ¥', label: t('home:stats.doctorVisits'), value: '45', color: colors.error },\n  ].filter((d) => !new Set(realStats.map((r) => r.key)).has(d.key));\n\n  const stats: CommunityStat[] = isRealAuth ? realStats : [...realStats, ...demoStats];\n\n  return (\n    <View style={styles.container}>\n      {stats.map((s) => (\n        <TouchableOpacity key={s.key} style={[styles.card, styles.shadow]} onPress={() => onSelect(makeDetails(s))}>\n          <Text style={styles.icon}>{s.icon}</Text>\n          <Text style={styles.value}>{s.value}</Text>\n          <Text style={styles.label} numberOfLines={2}>{s.label}</Text>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingTop: 10,\n    paddingBottom: 20,\n    gap: 10,\n    ...(Platform.OS === 'web' ? { overflowY: 'visible' } : {}),\n  },\n  card: {\n    width: '31%',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 1600,\n    paddingVertical: 12,\n    alignItems: 'center',\n  },\n  shadow: {\n    ...(Platform.OS === 'web' ? { boxShadow: '0 2px 6px rgba(0,0,0,0.08)' } : {\n      elevation: 2,\n      shadowColor: colors.shadow,\n      shadowOpacity: 0.1,\n      shadowOffset: { width: 0, height: 1 },\n      shadowRadius: 4,\n    }),\n  },\n  icon: {\n    fontSize: FontSizes.heading2,\n    marginBottom: 4,\n  },\n  value: {\n    fontSize: FontSizes.medium,\n    fontWeight: '800',\n    color: colors.legacyDarkBlue,\n    marginBottom: 2,\n  },\n  label: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    writingDirection: 'rtl',\n    paddingHorizontal: 4,\n  },\n});\n\nexport default CommunityStatsGrid;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/CommunityStatsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[12,27],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'runOnJS' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"runOnJS"},"fix":{"range":[263,274],"text":""},"desc":"Remove unused variable \"runOnJS\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[935,938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[935,938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { View, Text, StyleSheet, Dimensions, ScrollView } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  runOnJS,\n  interpolate,\n} from 'react-native-reanimated';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst PANEL_HEIGHT = SCREEN_HEIGHT * 0.7;\nconst MIN_HEIGHT = 80;\n\ninterface StatItemProps {\n  icon: string;\n  value: string;\n  label: string;\n  color?: string;\n}\n\nconst StatItem: React.FC<StatItemProps> = ({ icon, value, label, color = colors.info }) => (\n  <View style={styles.statItem}>\n    <Ionicons name={icon as any} size={32} color={color} />\n    <Text style={styles.statValue}>{value}</Text>\n    <Text style={styles.statLabel}>{label}</Text>\n  </View>\n);\n\nexport default function CommunityStatsPanel() {\n  const { t } = useTranslation(['home']);\n  const translateY = useSharedValue(PANEL_HEIGHT - MIN_HEIGHT);\n  const isExpanded = useSharedValue(false);\n\n  const { isRealAuth } = useUser();\n  if (isRealAuth) return null;\n\n  const gesture = Gesture.Pan()\n    .onUpdate((event) => {\n      const newY = translateY.value + event.translationY;\n      if (newY >= 0 && newY <= PANEL_HEIGHT - MIN_HEIGHT) {\n        translateY.value = newY;\n      }\n    })\n    .onEnd((event) => {\n      if (event.velocityY < -500) {\n        // Fast swipe up\n        translateY.value = withSpring(0);\n        isExpanded.value = true;\n      } else if (event.velocityY > 500) {\n        // Fast swipe down\n        translateY.value = withSpring(PANEL_HEIGHT - MIN_HEIGHT);\n        isExpanded.value = false;\n      } else {\n        // Check position\n        if (translateY.value < (PANEL_HEIGHT - MIN_HEIGHT) / 2) {\n          translateY.value = withSpring(0);\n          isExpanded.value = true;\n        } else {\n          translateY.value = withSpring(PANEL_HEIGHT - MIN_HEIGHT);\n          isExpanded.value = false;\n        }\n      }\n    });\n\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateY: translateY.value }],\n    };\n  });\n\n  const handleStyle = useAnimatedStyle(() => {\n    const rotate = interpolate(\n      translateY.value,\n      [0, PANEL_HEIGHT - MIN_HEIGHT],\n      [180, 0]\n    );\n    return {\n      transform: [{ rotate: `${rotate}deg` }],\n    };\n  });\n\n  return (\n    <Animated.View style={[styles.container, animatedStyle]}>\n      <GestureDetector gesture={gesture}>\n        <View style={styles.header}>\n          <View style={styles.handle} />\n          <View style={styles.titleContainer}>\n            <Text style={styles.title}>{t('home:stats.title')}</Text>\n            <Animated.View style={handleStyle}>\n              <Ionicons name=\"chevron-up\" size={24} color={colors.textSecondary} />\n            </Animated.View>\n          </View>\n        </View>\n      </GestureDetector>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {/* Real-time stats */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:statsDetails.realTimeData')}</Text>\n          <View style={styles.statsGrid}>\n            <StatItem icon=\"people\" value=\"3,847\" label={t('home:stats.activeMembers') as string} />\n            <StatItem icon=\"heart\" value=\"12,456\" label={t('home:stats.monthlyDonations') as string} color={colors.secondary} />\n            <StatItem icon=\"trending-up\" value=\"+23%\" label={t('home:stats.monthlyGrowth') as string} color={colors.success} />\n            <StatItem icon=\"globe\" value=\"42\" label={t('home:stats.activeCities') as string} color={colors.info} />\n          </View>\n        </View>\n\n        {/* Impact stats */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.communityImpact')}</Text>\n          <View style={styles.impactCard}>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"car\" size={24} color={colors.info} />\n              <Text style={styles.impactText}>2,341 {t('home:stats.sharedRides')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"restaurant\" size={24} color={colors.secondary} />\n              <Text style={styles.impactText}>5,678 {t('home:stats.donatedMeals')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"school\" size={24} color={colors.warning} />\n              <Text style={styles.impactText}>892 {t('home:stats.mentoringHours')}</Text>\n            </View>\n            <View style={styles.impactRow}>\n              <Ionicons name=\"home\" size={24} color={colors.legacyMediumPurple} />\n              <Text style={styles.impactText}>156 {t('home:stats.supportedFamilies')}</Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Top contributors */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.topContributors')}</Text>\n          <View style={styles.leaderboard}>\n            {[t('home:names.david'), t('home:names.sarah'), t('home:names.moshe'), t('home:names.rachel'), t('home:names.yosef')].map((name, index) => (\n              <View key={index} style={styles.leaderItem}>\n                <View style={styles.leaderRank}>\n                  <Text style={styles.rankText}>{index + 1}</Text>\n                </View>\n                <Text style={styles.leaderName}>{name}</Text>\n                <View style={styles.leaderStats}>\n                  <Ionicons name=\"star\" size={16} color={colors.legacyMediumYellow} />\n                  <Text style={styles.pointsText}>{1500 - index * 200} {t('home:stats.pointsSuffix')}</Text>\n                </View>\n              </View>\n            ))}\n          </View>\n        </View>\n\n        {/* Activity graph placeholder */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('home:stats.weeklyActivity')}</Text>\n          <View style={styles.graphPlaceholder}>\n            <Text style={styles.graphText}>{t('home:stats.activityGraphPlaceholder')}</Text>\n          </View>\n        </View>\n      </ScrollView>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: PANEL_HEIGHT,\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: -2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 5,\n    elevation: 5,\n  },\n  header: {\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    backgroundColor: colors.border,\n    borderRadius: 2,\n    alignSelf: 'center',\n    marginBottom: 12,\n  },\n  titleContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  content: {\n    flex: 1,\n    padding: 16,\n  },\n  section: {\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n  },\n  statItem: {\n    width: '48%',\n    backgroundColor: colors.backgroundSecondary,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  statValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 8,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 4,\n  },\n  impactCard: {\n    backgroundColor: colors.backgroundSecondary,\n    padding: 16,\n    borderRadius: 12,\n  },\n  impactRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  impactText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    marginLeft: 12,\n    flex: 1,\n  },\n  leaderboard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n  },\n  leaderItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  leaderRank: {\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    backgroundColor: colors.info,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  rankText: {\n    color: colors.white,\n    fontWeight: 'bold',\n    fontSize: FontSizes.body,\n  },\n  leaderName: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n  },\n  leaderStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  pointsText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  graphPlaceholder: {\n    height: 150,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  graphText: {\n    color: colors.textSecondary,\n    fontSize: FontSizes.body,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DatePicker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TextInput' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TextInput"},"fix":{"range":[144,157],"text":""},"desc":"Remove unused variable \"TextInput\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2345,2348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2345,2348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  ScrollView,\n  Platform,\n  TextInput,\n} from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { I18nManager } from 'react-native';\n\ninterface DatePickerProps {\n  value: Date | null;\n  onChange: (date: Date | null) => void;\n  placeholder?: string;\n  label?: string;\n  minimumDate?: Date;\n  maximumDate?: Date;\n  disabled?: boolean;\n}\n\n// Helper function to format date to Hebrew locale\nconst formatDate = (date: Date | null): string => {\n  if (!date || !(date instanceof Date) || isNaN(date.getTime())) {\n    return '';\n  }\n  return date.toLocaleDateString('he-IL', {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n  });\n};\n\n// Helper function to validate and create Date\nconst ensureValidDate = (date: Date | null | undefined): Date => {\n  if (!date) return new Date();\n  if (date instanceof Date && !isNaN(date.getTime())) {\n    return date;\n  }\n  return new Date();\n};\n\nexport default function DatePicker({\n  value,\n  onChange,\n  placeholder,\n  label,\n  minimumDate,\n  maximumDate,\n  disabled = false,\n}: DatePickerProps) {\n  const { t } = useTranslation(['common', 'trump']);\n  const [isVisible, setIsVisible] = useState(false);\n  const [selectedDate, setSelectedDate] = useState<Date>(() => ensureValidDate(value));\n  const [showNativePicker, setShowNativePicker] = useState(false);\n\n  // Update selected date when value prop changes\n  useEffect(() => {\n    const validDate = ensureValidDate(value);\n    setSelectedDate(validDate);\n  }, [value]);\n\n  const handleOpen = () => {\n    if (disabled) return;\n    const validDate = ensureValidDate(value);\n    setSelectedDate(validDate);\n    \n    if (Platform.OS === 'web') {\n      setIsVisible(true);\n    } else {\n      // On mobile, show native picker\n      setShowNativePicker(true);\n    }\n  };\n\n  const handleConfirm = () => {\n    onChange(selectedDate);\n    setIsVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsVisible(false);\n    setShowNativePicker(false);\n  };\n\n  const handleNativeDateChange = (event: any, date?: Date) => {\n    setShowNativePicker(false);\n    if (Platform.OS === 'android') {\n      // Android closes automatically\n    }\n    if (date) {\n      onChange(date);\n    }\n  };\n\n  // Generate date options for custom picker (web)\n  const currentYear = new Date().getFullYear();\n  const years = Array.from({ length: 5 }, (_, i) => currentYear + i);\n  const months = [\n    '×™× ×•××¨', '×¤×‘×¨×•××¨', '××¨×¥', '××¤×¨×™×œ', '×××™', '×™×•× ×™',\n    '×™×•×œ×™', '××•×’×•×¡×˜', '×¡×¤×˜××‘×¨', '××•×§×˜×•×‘×¨', '× ×•×‘××‘×¨', '×“×¦××‘×¨'\n  ];\n  const daysInMonth = (year: number, month: number) => {\n    return new Date(year, month + 1, 0).getDate();\n  };\n\n  const selectedYear = selectedDate.getFullYear();\n  const selectedMonth = selectedDate.getMonth();\n  const selectedDay = selectedDate.getDate();\n  const days = Array.from(\n    { length: daysInMonth(selectedYear, selectedMonth) },\n    (_, i) => i + 1\n  );\n\n  const handleYearChange = (year: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setFullYear(year);\n    // Adjust day if needed (e.g., Feb 29 -> Feb 28)\n    const maxDay = daysInMonth(year, newDate.getMonth());\n    if (newDate.getDate() > maxDay) {\n      newDate.setDate(maxDay);\n    }\n    setSelectedDate(newDate);\n  };\n\n  const handleMonthChange = (month: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setMonth(month);\n    // Adjust day if needed\n    const maxDay = daysInMonth(newDate.getFullYear(), month);\n    if (newDate.getDate() > maxDay) {\n      newDate.setDate(maxDay);\n    }\n    setSelectedDate(newDate);\n  };\n\n  const handleDayChange = (day: number) => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(day);\n    setSelectedDate(newDate);\n  };\n\n  const displayValue = formatDate(value ? ensureValidDate(value) : null);\n\n  return (\n    <View style={styles.container}>\n      {label && <Text style={styles.label}>{label}</Text>}\n\n      {Platform.OS === 'web' ? (\n        <>\n          <TouchableOpacity\n            style={[styles.dateButton, disabled && styles.disabled]}\n            onPress={handleOpen}\n            disabled={disabled}\n          >\n            <Text style={[styles.dateText, !displayValue && styles.placeholderText]}>\n              {displayValue || placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n            </Text>\n            <Icon name=\"calendar-outline\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <Modal\n            visible={isVisible}\n            transparent={true}\n            animationType=\"slide\"\n            onRequestClose={handleCancel}\n          >\n            <View style={styles.modalOverlay}>\n              <View style={styles.modalContent}>\n                <View style={styles.modalHeader}>\n                  <Text style={styles.modalTitle}>\n                    {placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n                  </Text>\n                  <TouchableOpacity onPress={handleCancel} style={styles.closeButton}>\n                    <Icon name=\"close\" size={24} color={colors.textPrimary} />\n                  </TouchableOpacity>\n                </View>\n\n                <View style={styles.pickerContainer}>\n                  {/* Year Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.year') || '×©× ×”'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {years.map((year) => (\n                        <TouchableOpacity\n                          key={year}\n                          style={[\n                            styles.pickerItem,\n                            selectedYear === year && styles.selectedItem,\n                          ]}\n                          onPress={() => handleYearChange(year)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedYear === year && styles.selectedItemText,\n                            ]}\n                          >\n                            {year}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n\n                  {/* Month Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.month') || '×—×•×“×©'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {months.map((month, index) => (\n                        <TouchableOpacity\n                          key={index}\n                          style={[\n                            styles.pickerItem,\n                            selectedMonth === index && styles.selectedItem,\n                          ]}\n                          onPress={() => handleMonthChange(index)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedMonth === index && styles.selectedItemText,\n                            ]}\n                          >\n                            {month}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n\n                  {/* Day Picker */}\n                  <View style={styles.pickerColumn}>\n                    <Text style={styles.pickerLabel}>{t('common:date.day') || '×™×•×'}</Text>\n                    <ScrollView\n                      style={styles.pickerScroll}\n                      showsVerticalScrollIndicator={false}\n                      snapToInterval={40}\n                    >\n                      {days.map((day) => (\n                        <TouchableOpacity\n                          key={day}\n                          style={[\n                            styles.pickerItem,\n                            selectedDay === day && styles.selectedItem,\n                          ]}\n                          onPress={() => handleDayChange(day)}\n                        >\n                          <Text\n                            style={[\n                              styles.pickerItemText,\n                              selectedDay === day && styles.selectedItemText,\n                            ]}\n                          >\n                            {day}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n                </View>\n\n                <View style={styles.modalFooter}>\n                  <TouchableOpacity style={styles.cancelButton} onPress={handleCancel}>\n                    <Text style={styles.cancelButtonText}>{t('common:cancel')}</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity style={styles.confirmButton} onPress={handleConfirm}>\n                    <Text style={styles.confirmButtonText}>{t('common:confirm')}</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            </View>\n          </Modal>\n        </>\n      ) : (\n        <>\n          <TouchableOpacity\n            style={[styles.dateButton, disabled && styles.disabled]}\n            onPress={handleOpen}\n            disabled={disabled}\n          >\n            <Text style={[styles.dateText, !displayValue && styles.placeholderText]}>\n              {displayValue || placeholder || t('trump:ui.selectDate') || '×‘×—×¨ ×ª××¨×™×š'}\n            </Text>\n            <Icon name=\"calendar-outline\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          {showNativePicker && (\n            <DateTimePicker\n              value={selectedDate}\n              mode=\"date\"\n              display=\"default\"\n              onChange={handleNativeDateChange}\n              minimumDate={minimumDate}\n              maximumDate={maximumDate}\n            />\n          )}\n        </>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 8,\n  },\n  label: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    textAlign: I18nManager.isRTL ? 'right' : 'left',\n  },\n  dateButton: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.moneyInputBackground,\n    borderWidth: 1,\n    borderColor: colors.moneyFormBorder,\n    borderRadius: 10,\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    minHeight: 48,\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  dateText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  placeholderText: {\n    color: colors.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderRadius: 16,\n    width: '90%',\n    maxWidth: 400,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  pickerContainer: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    justifyContent: 'space-around',\n  },\n  pickerColumn: {\n    flex: 1,\n    alignItems: 'center',\n    marginHorizontal: 4,\n  },\n  pickerLabel: {\n    fontSize: FontSizes.small,\n    fontWeight: '500',\n    color: colors.textSecondary,\n    marginBottom: 6,\n  },\n  pickerScroll: {\n    height: 150,\n  },\n  pickerItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    marginVertical: 2,\n    minWidth: 60,\n    alignItems: 'center',\n  },\n  selectedItem: {\n    backgroundColor: colors.secondary,\n  },\n  pickerItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  selectedItemText: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  modalFooter: {\n    flexDirection: I18nManager.isRTL ? 'row-reverse' : 'row',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  cancelButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginRight: I18nManager.isRTL ? 0 : 6,\n    marginLeft: I18nManager.isRTL ? 6 : 0,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n    alignItems: 'center',\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  confirmButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginLeft: I18nManager.isRTL ? 0 : 6,\n    marginRight: I18nManager.isRTL ? 6 : 0,\n    borderRadius: 8,\n    backgroundColor: colors.secondary,\n    alignItems: 'center',\n  },\n  confirmButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.white,\n    fontWeight: '600',\n  },\n});\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DevEnvironmentBanner.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Linking' is defined but never used.","line":2,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":94,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Linking"},"fix":{"range":[111,120],"text":""},"desc":"Remove unused variable \"Linking\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, SafeAreaView, Platform, StatusBar, TouchableOpacity, Linking } from 'react-native';\nimport { CURRENT_ENVIRONMENT, IS_DEVELOPMENT, API_BASE_URL } from '../utils/config.constants';\n\n/**\n * DevEnvironmentBanner\n * \n * A visual indicator shown only in development environments to help\n * developers and testers distinguish between Dev and Production builds.\n * \n * Features:\n * - Clear visual distinction from production\n * - Shows API endpoint being used\n * - Reminds users that data is isolated\n * - Tap to see full environment details\n */\nconst DevEnvironmentBanner = () => {\n    // Only show in development environment\n    if (!IS_DEVELOPMENT) {\n        return null;\n    }\n\n    const handlePress = () => {\n        // Show environment details\n        const message = `ğŸŸ¢ Development Environment\\n\\n` +\n            `API: ${API_BASE_URL}\\n` +\n            `Environment: ${CURRENT_ENVIRONMENT}\\n\\n` +\n            `âœ… Data is completely isolated from Production\\n` +\n            `âœ… Safe to test and experiment\\n` +\n            `âœ… Changes won't affect real users`;\n        \n        // On web, we can use alert. On mobile, you might want a modal\n        if (Platform.OS === 'web') {\n            alert(message);\n        } else {\n            // For mobile, you could implement a modal or use a toast library\n            console.log(message);\n        }\n    };\n\n    return (\n        <View style={styles.container}>\n            <SafeAreaView style={styles.safeArea}>\n                <TouchableOpacity \n                    style={styles.banner} \n                    onPress={handlePress}\n                    activeOpacity={0.7}\n                >\n                    <View style={styles.leftSection}>\n                        <View style={styles.badge}>\n                            <Text style={styles.dot}>ğŸŸ¢</Text>\n                            <Text style={styles.text}>DEV</Text>\n                        </View>\n                        <Text style={styles.subtext}>\n                            × ×ª×•× ×™× ××‘×•×“×“×™× ××”×¤×¨×•×“×§×©×Ÿ\n                        </Text>\n                    </View>\n                    <Text style={styles.tapHint}>×œ×—×¥ ×œ××™×“×¢</Text>\n                </TouchableOpacity>\n            </SafeAreaView>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: '#E8F5E9', // Very light green\n        borderBottomWidth: 2,\n        borderBottomColor: '#66BB6A',\n        zIndex: 9999,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.1,\n        shadowRadius: 3,\n        elevation: 3,\n    },\n    safeArea: {\n        // On iOS, SafeAreaView handles the notch\n        // On Android, we might need manual padding if not using a library\n        paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n    },\n    banner: {\n        paddingVertical: 6,\n        paddingHorizontal: 12,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    },\n    leftSection: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 8,\n    },\n    badge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: '#66BB6A',\n        paddingHorizontal: 10,\n        paddingVertical: 3,\n        borderRadius: 14,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.2,\n        shadowRadius: 2,\n        elevation: 2,\n    },\n    dot: {\n        fontSize: 12,\n        marginRight: 4,\n    },\n    text: {\n        fontSize: 11,\n        fontWeight: 'bold',\n        color: '#FFFFFF',\n        letterSpacing: 0.8,\n    },\n    subtext: {\n        fontSize: 10,\n        fontStyle: 'italic',\n        color: '#2E7D32',\n        fontWeight: '500',\n    },\n    tapHint: {\n        fontSize: 9,\n        color: '#4CAF50',\n        fontStyle: 'italic',\n    },\n});\n\nexport default DevEnvironmentBanner;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DonationStatsFooter.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1340,1343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1340,1343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, ViewStyle, StyleProp } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\n\nexport interface DonationStatItem {\n  label: string;\n  value: string | number;\n  icon?: string; // Ionicons name\n}\n\ninterface DonationStatsFooterProps {\n  stats: DonationStatItem[];\n  containerStyle?: StyleProp<ViewStyle>;\n  compact?: boolean;\n}\n\nconst DonationStatsFooter: React.FC<DonationStatsFooterProps> = ({ stats, containerStyle, compact = false }) => {\n  const { t } = useTranslation(['donations','common']);\n  if (!stats || stats.length === 0) return null;\n\n  const topThree = stats.slice(0, 3);\n\n  return (\n    <View style={[styles.sectionPanel, compact && styles.sectionPanelCompact]}>\n\n    <View style={[styles.container, compact && styles.containerCompact, containerStyle]}\n      accessibilityRole=\"summary\"\n      accessibilityLabel={t('donations:statsSummary')}\n    >\n      <View style={[styles.row, compact && styles.rowCompact]}>\n        {topThree.map((s, idx) => (\n          <View key={`${s.label}-${idx}`} style={[styles.statChip, compact && styles.statChipCompact]}>\n            {s.icon ? (\n              <Ionicons name={s.icon as any} size={compact ? 14 : 16} color={colors.textSecondary} style={{ marginBottom: compact ? 2 : 4 }} />\n            ) : null}\n            <Text style={[styles.statLabel, compact && styles.statLabelCompact]}>{s.label}</Text>\n            <Text style={[styles.statValue, compact && styles.statValueCompact]}>{String(s.value)}</Text>\n          </View>\n        ))}\n      </View>\n    </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: colors.pinkLight,\n    marginTop: 8,\n  },\n  containerCompact: {\n    backgroundColor: 'transparent',\n    marginTop: 0,\n  },\n  row: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    gap: 6,\n  },\n  rowCompact: {\n    gap: 4,\n  },\n  sectionPanel: {\n    backgroundColor: colors.pinkLight,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n    paddingVertical: 8,\n    paddingHorizontal: 8,\n    marginVertical: 10,\n    marginBottom: 40,\n\n},\n  sectionPanelCompact: {\n    backgroundColor: 'transparent',\n    borderWidth: 0,\n    paddingVertical: 4,\n    paddingHorizontal: 4,\n    marginVertical: 4,\n    marginBottom: 0,\n  },\n  statChip: {\n    flex: 1,\n    backgroundColor: colors.white,\n    paddingVertical: 8,\n    paddingHorizontal: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n  },\n  statChipCompact: {\n    paddingVertical: 6,\n    paddingHorizontal: 8,\n    borderRadius: 10,\n  },\n  statLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 2,\n    textAlign: 'center',\n  },\n  statLabelCompact: {\n    fontSize: Math.max(FontSizes.caption - 1, 10),\n    marginBottom: 1,\n  },\n  statValue: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  statValueCompact: {\n    fontSize: Math.max(FontSizes.body - 1, 12),\n  },\n});\n\nexport default DonationStatsFooter;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/DonationStatsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[926,929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[926,929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STATS_BUBBLE_COUNT' is assigned a value but never used.","line":50,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1890,1893],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1890,1893],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1980,1983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1980,1983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2511,2514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2511,2514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2907,2910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2907,2910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'category' is defined but never used.","line":277,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'event' is defined but never used.","line":330,"column":6,"nodeType":"Identifier","messageId":"unusedVar","endLine":330,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":373,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10087,10090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10087,10090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Visualize community donation stats as animated bubbles with motivational quotes.\n// - Reached from: Home or Donations related routes embedding this component.\n// - Inputs: None directly; pulls localized strings via i18n and sample data from `globals/fakeData`.\n// - Behavior: Generates background and stat bubbles, animates float/pulse, toggles selection to highlight values.\n\"use strict\";\nimport React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Dimensions,\n  TouchableWithoutFeedback,\n  GestureResponderEvent,\n  StatusBar,\n} from \"react-native\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withRepeat,\n  withTiming,\n  withSpring,\n  withDelay,\n  Easing,\n  interpolate,\n} from \"react-native-reanimated\";\nimport { FontSizes } from \"../globals/constants\";\n// Initial data - replace with real data from API\nconst charities: any[] = [{\n  id: 'kc',\n  name: 'KarmaCommunity',\n  statistics: [\n    { id: '1', name: '×§×”×™×œ×”', value: 3847, icon: 'ğŸ‘¥', category: 'community', color: colors.info },\n    { id: '2', name: '×ª×¨×•××•×ª', value: 12456, icon: 'â¤ï¸', category: 'donations', color: colors.secondary },\n  ],\n  motivationalQuotes: [\n    '× ×ª×™× ×” ×”×™× ×”×§×‘×œ×” ×”×’×“×•×œ×” ×‘×™×•×ª×¨.',\n    '×‘×™×—×“ ×× ×—× ×• ×‘×•× ×™× ×¢×•×œ× ×˜×•×‘ ×™×•×ª×¨.',\n  ]\n}];\nimport { TouchableOpacity } from \"react-native\";\nimport colors from \"../globals/colors\";\nimport { useTranslation } from \"react-i18next\";\n\n// Get the dimensions of the device window for responsive sizing\nconst { width, height } = Dimensions.get(\"window\");\n\n// --- Constants ---\nconst kcStats = charities[0]?.statistics || [];\nconst STATS_BUBBLE_COUNT = kcStats.length;\nconst BACKGROUND_BUBBLES_COUNT = 15;\nconst MIN_SIZE = 60;\nconst MAX_SIZE = 160;\nconst BACKGROUND_MIN_SIZE = 30;\nconst BACKGROUND_MAX_SIZE = 80;\nconst MIN_VALUE = kcStats.length > 0 ? Math.min(...kcStats.map((s: any) => s.value)) : 0;\nconst MAX_VALUE = kcStats.length > 0 ? Math.max(...kcStats.map((s: any) => s.value)) : 100;\n\n/**\n * ×××™×¨ ××¡×¤×¨ ×œ×¢×¨×š ×’×•×“×œ ×‘×•×¢×” ×‘×˜×•×•×— ×”××•×’×“×¨\n * @param num - ×”××¡×¤×¨ ×œ×”××¨×”\n * @returns ×’×•×“×œ ×”×‘×•×¢×” ×‘×¤×™×§×¡×œ×™×\n */\nconst scaleNumberToSize = (num: number): number => {\n  const clampedNum = Math.max(MIN_VALUE, Math.min(MAX_VALUE, num));\n  const scaledSize =\n    MIN_SIZE +\n    ((clampedNum - MIN_VALUE) / (MAX_VALUE - MIN_VALUE)) *\n    (MAX_SIZE - MIN_SIZE);\n  return scaledSize;\n};\n\n/**\n * ×‘×•×“×§ ×× ×‘×•×¢×” ×—×“×©×” ×ª×—×¤×•×£ ×¢× ×‘×•×¢×•×ª ×§×™×™××•×ª\n */\nconst isOverlapping = (\n  x: number,\n  y: number,\n  size: number,\n  bubbles: any[]\n): boolean => {\n  const overlapThreshold = 1.8;\n  for (const b of bubbles) {\n    const dx = b.x - x;\n    const dy = b.y - y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    if (distance < (b.size + size) / overlapThreshold) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst generateStatsLayout = () => {\n  console.log(\"Generating donation stats bubbles...\");\n  const bubbles: any[] = [];\n  let attempts = 0;\n  const maxAttempts = 3000;\n\n  for (let i = 0; i < BACKGROUND_BUBBLES_COUNT && attempts < maxAttempts; i++) {\n    const size = BACKGROUND_MIN_SIZE + Math.random() * (BACKGROUND_MAX_SIZE - BACKGROUND_MIN_SIZE);\n\n    let placed = false;\n    let localAttempts = 0;\n    const maxLocalAttempts = 200;\n\n    while (!placed && localAttempts < maxLocalAttempts) {\n      const margin = 40;\n      const x = margin + Math.random() * (width - size - margin * 2);\n      const y = 200 + Math.random() * (height - size - 350);\n\n      if (!isOverlapping(x, y, size, bubbles)) {\n        bubbles.push({\n          id: `bg-${i}`,\n          size,\n          x,\n          y,\n          value: 0,\n          name: \"\",\n          icon: \"\",\n          category: \"background\",\n          color: colors.border,\n          directionX: Math.random() > 0.5 ? 1 : -1,\n          directionY: Math.random() > 0.5 ? 1 : -1,\n          delay: Math.random() * 2000,\n          isBackground: true,\n        });\n        placed = true;\n      }\n      localAttempts++;\n      attempts++;\n    }\n  }\n\n  for (let i = 0; i < kcStats.length && attempts < maxAttempts; i++) {\n    const stat = kcStats[i];\n    const size = scaleNumberToSize(stat.value);\n\n    let placed = false;\n    let localAttempts = 0;\n    const maxLocalAttempts = 300;\n\n    while (!placed && localAttempts < maxLocalAttempts) {\n      const margin = 20;\n      const x = margin + Math.random() * (width - size - margin * 2);\n      const y = 200 + Math.random() * (height - size - 350);\n\n      if (!isOverlapping(x, y, size, bubbles)) {\n        bubbles.push({\n          id: stat.id,\n          size,\n          x,\n          y,\n          value: stat.value,\n          name: stat.name,\n          icon: stat.icon,\n          category: stat.category,\n          color: stat.color,\n          directionX: Math.random() > 0.5 ? 1 : -1,\n          directionY: Math.random() > 0.5 ? 1 : -1,\n          delay: Math.random() * 1000,\n          isBackground: false,\n        });\n        placed = true;\n      }\n      localAttempts++;\n      attempts++;\n    }\n  }\n\n  console.log(`Generated ${bubbles.length} bubbles total`);\n  return bubbles;\n};\n\n/**\n * ×§×•××¤×•× × ×˜×” ×¨××©×™×ª ×œ×”×¦×’×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª ×ª×¨×•××•×ª ×›×‘×•×¢×•×ª ×¦×¤×•×ª\n */\nconst DonationStatsScreen: React.FC = () => {\n  const { t } = useTranslation([\"donations\", \"common\"]);\n  const bubbles = useMemo(generateStatsLayout, []);\n  const [selectedBubbleId, setSelectedBubbleId] = useState<string | null>(null);\n  const [currentSentenceIndex, setCurrentSentenceIndex] = useState(0);\n\n  /**\n   * ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×‘×•×¢×”\n   */\n  const handleBubblePress = useCallback((id: string) => {\n    setSelectedBubbleId((prevId) => {\n      const newId = prevId === id ? null : id;\n      return newId;\n    });\n    setCurrentSentenceIndex((prevIndex) => {\n      const kcQuotes = charities[0]?.motivationalQuotes || [];\n      const newIndex = kcQuotes.length > 0 ? (prevIndex + 1) % kcQuotes.length : 0;\n      return newIndex;\n    });\n  }, []);\n\n  /**\n   * ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×”×•×“×¢×” ××•×˜×™×‘×¦×™×•× ×™×ª\n   */\n  const handleMessagePress = useCallback(() => {\n    const kcQuotes = charities[0]?.motivationalQuotes || [];\n    setCurrentSentenceIndex(\n      (prevIndex) => kcQuotes.length > 0 ? (prevIndex + 1) % kcQuotes.length : 0\n    );\n  }, []);\n\n  return (\n    <View style={localStyles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"transparent\" translucent />\n\n      {/* Screen header */}\n      <View style={localStyles.headerContainer}>\n        <Text style={localStyles.title}>{t('donations:statsScreen.title')}</Text>\n        <Text style={localStyles.subtitle}>{t('donations:statsScreen.subtitle')}</Text>\n      </View>\n\n      {/* Bubbles container */}\n      <View style={localStyles.bubblesContainer}>\n        {bubbles.map((bubble) => (\n          <AnimatedStatsBubble\n            key={bubble.id}\n            {...bubble}\n            isSelected={selectedBubbleId === bubble.id}\n            onPress={handleBubblePress}\n          />\n        ))}\n      </View>\n\n      {/* Motivational message container */}\n      <View style={localStyles.messageContainer}>\n        <TouchableOpacity\n          onPress={handleMessagePress}\n          style={localStyles.messageButton}\n        >\n          <Text style={localStyles.messageText}>\n            {charities[0]?.motivationalQuotes?.[currentSentenceIndex] || t('donations:statsScreen.noQuotes')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\n// --- AnimatedStatsBubble Component ---\n\ninterface AnimatedStatsBubbleProps {\n  id: string;\n  size: number;\n  x: number;\n  y: number;\n  value: number;\n  name: string;\n  icon: string;\n  category: string;\n  color: string;\n  directionX: number;\n  directionY: number;\n  delay: number;\n  isSelected: boolean;\n  onPress: (id: string) => void;\n  isBackground?: boolean;\n}\n\n/**\n * ×§×•××¤×•× × ×˜×ª ×‘×•×¢×” ×‘×•×“×“×ª ×¢× ×× ×™××¦×™×•×ª ×¢×“×™× ×•×ª\n */\nconst AnimatedStatsBubble: React.FC<AnimatedStatsBubbleProps> = ({\n  id,\n  size,\n  x,\n  y,\n  value,\n  name,\n  icon,\n  category,\n  color,\n  directionX,\n  directionY,\n  delay,\n  isSelected,\n  onPress,\n  isBackground = false,\n}) => {\n  const floatOffset = useSharedValue(0);\n  const pulseScale = useSharedValue(1);\n  const animatedOpacity = useSharedValue(0.85);\n  const animatedScale = useSharedValue(1);\n\n  useEffect(() => {\n    floatOffset.value = withRepeat(\n      withDelay(\n        delay,\n        withTiming(1, {\n          duration: 4000 + Math.random() * 2000,\n          easing: Easing.inOut(Easing.sin),\n        })\n      ),\n      -1,\n      true\n    );\n  }, [delay, floatOffset]);\n\n  useEffect(() => {\n    pulseScale.value = withRepeat(\n      withDelay(\n        delay + 500,\n        withTiming(1.08, {\n          duration: 2500 + Math.random() * 1500,\n          easing: Easing.inOut(Easing.quad),\n        })\n      ),\n      -1,\n      true\n    );\n  }, [delay, pulseScale]);\n\n  useEffect(() => {\n    animatedOpacity.value = withTiming(isSelected ? 1 : 0.85, {\n      duration: 300,\n    });\n    animatedScale.value = withSpring(isSelected ? 1.15 : 1, {\n      damping: 12,\n      stiffness: 150,\n    });\n  }, [isSelected, animatedOpacity, animatedScale]);\n\n  const handleInternalPress = useCallback(\n    (event: GestureResponderEvent) => {\n      if (!isBackground) {\n        onPress(id);\n      }\n    },\n    [id, onPress, isBackground]\n  );\n\n  const animatedStyle = useAnimatedStyle(() => {\n    const floatX = interpolate(\n      floatOffset.value,\n      [0, 1],\n      [0, 6 * directionX]\n    );\n    const floatY = interpolate(\n      floatOffset.value,\n      [0, 1],\n      [0, 8 * directionY]\n    );\n\n    let backgroundColor, borderColor, shadowColor;\n\n    if (isBackground) {\n      backgroundColor = color + '15';\n      borderColor = color + '30';\n      shadowColor = color + '20';\n    } else {\n      backgroundColor = color + '20';\n      borderColor = color;\n      shadowColor = color + '40';\n\n      if (isSelected) {\n        backgroundColor = color + '40';\n        borderColor = color;\n        shadowColor = color + '60';\n      }\n    }\n\n    return {\n      transform: [\n        { translateX: x + floatX },\n        { translateY: y + floatY },\n        { scale: animatedScale.value * pulseScale.value },\n      ] as any,\n      backgroundColor,\n      borderColor,\n      shadowColor,\n      opacity: animatedOpacity.value,\n    };\n  });\n\n  const iconSize = Math.max(size * 0.15, 16);\n  const valueSize = Math.max(size * 0.18, 14);\n  const nameSize = Math.max(size * 0.08, 10);\n\n  return (\n    <TouchableWithoutFeedback onPress={handleInternalPress}>\n      <Animated.View\n        style={[\n          localStyles.bubble,\n          {\n            width: size,\n            height: size,\n            borderRadius: size / 2,\n            zIndex: isBackground ? 1 : isSelected ? 100 : 10,\n          },\n          animatedStyle,\n        ]}\n      >\n        {!isBackground && (\n          <View style={localStyles.bubbleContent}>\n            {/* Icon */}\n            <Text style={[localStyles.bubbleIcon, { fontSize: iconSize }]}>\n              {icon}\n            </Text>\n\n            {/* Value */}\n            <Text\n              style={[\n                localStyles.bubbleValue,\n                {\n                  fontSize: valueSize,\n                  color: isSelected ? colors.textPrimary : colors.textSecondary,\n                },\n              ]}\n              numberOfLines={1}\n              adjustsFontSizeToFit\n              minimumFontScale={0.6}\n            >\n              {value.toLocaleString()}\n            </Text>\n\n            {/* Name */}\n            <Text\n              style={[\n                localStyles.bubbleName,\n                {\n                  fontSize: nameSize,\n                  color: isSelected ? colors.textPrimary : colors.textTertiary,\n                  lineHeight: nameSize * 1.3,\n                },\n              ]}\n              numberOfLines={3}\n              adjustsFontSizeToFit\n              minimumFontScale={0.4}\n            >\n              {name}\n            </Text>\n          </View>\n        )}\n      </Animated.View>\n    </TouchableWithoutFeedback>\n  );\n};\n\n// --- StyleSheet ---\nconst localStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  headerContainer: {\n    paddingTop: 60,\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderBottomLeftRadius: 25,\n    borderBottomRightRadius: 25,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: \"bold\",\n    color: colors.textPrimary,\n    textAlign: \"center\",\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: \"center\",\n  },\n  bubblesContainer: {\n    flex: 1,\n    position: \"relative\",\n    marginTop: 20,\n  },\n  bubble: {\n    position: \"absolute\",\n    borderWidth: 2,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 8,\n    elevation: 8,\n  },\n  bubbleContent: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    width: \"100%\",\n  },\n  bubbleIcon: {\n    textAlign: \"center\",\n    marginBottom: 4,\n  },\n  bubbleValue: {\n    fontWeight: \"900\",\n    textAlign: \"center\",\n    marginBottom: 4,\n  },\n  bubbleName: {\n    textAlign: \"center\",\n    fontWeight: \"600\",\n    opacity: 0.9,\n  },\n  messageContainer: {\n    position: 'absolute',\n    bottom: 100,\n    left: 20,\n    right: 20,\n    alignItems: \"center\",\n    zIndex: 1000,\n  },\n  messageButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 25,\n    paddingHorizontal: 20,\n    paddingVertical: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 8,\n    elevation: 6,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n  },\n  messageText: {\n    fontSize: FontSizes.small,\n    fontWeight: \"600\",\n    color: colors.textPrimary,\n    textAlign: \"center\",\n    lineHeight: 18,\n  },\n});\n\nexport default DonationStatsScreen;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/EmailLoginForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used.","line":13,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[389,397],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[491,503],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[528,542],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'restAdapter' is defined but never used.","line":36,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":21,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"restAdapter"},"fix":{"range":[934,986],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1368,1371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1368,1371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":390,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":390,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":390,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12365,12368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12365,12368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":411,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":411,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12965,12968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12965,12968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":463,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15327,15330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15327,15330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'signinError' is defined but never used.","line":487,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":487,"endColumn":29}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * EmailLoginForm Component\n * \n * A comprehensive email authentication form component that handles both login and registration flows.\n * Features include email validation, password visibility toggle, recent email suggestions,\n * and proper error handling with user feedback.\n * \n * @author KC Development Team\n * @version 1.8.0\n * @since 1.0.0\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  Alert,\n  Animated,\n  Platform,\n  Linking,\n  StyleSheet,\n  Dimensions,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n  getSignInMethods,\n  signInWithEmail as fbSignInWithEmail,\n  signUpWithEmail as fbSignUpWithEmail,\n  sendVerification as fbSendVerification,\n  sendPasswordReset\n} from '../utils/authService';\nimport { restAdapter } from '../utils/restAdapter';\nimport { createShadowStyle } from '../globals/styles';\nimport colors from '../globals/colors';\n\n// TypeScript Interfaces\ninterface EmailLoginFormProps {\n  /** Whether the form is currently open/expanded */\n  isOpen: boolean;\n  /** Callback to toggle the form open/closed state */\n  onToggle: () => void;\n  /** Callback when user successfully logs in */\n  onLoginSuccess: (userData: any) => void;\n  /** Animation value for form expansion */\n  animationValue: Animated.Value;\n}\n\ninterface EmailFormState {\n  step: 'email' | 'password';\n  emailValue: string;\n  passwordValue: string;\n  emailExists: boolean | null;\n  isBusy: boolean;\n  statusMessage: string | null;\n  statusColor: string;\n  passwordVisible: boolean;\n  suggestions: string[];\n}\n\ninterface RecentEmailsState {\n  emails: string[];\n  suggestions: string[];\n}\n\nconst KNOWN_EMAILS_KEY = 'known_emails';\n\n/**\n * EmailLoginForm Component\n * \n * Handles the complete email authentication flow including:\n * - Email validation and existence checking\n * - Password input with visibility toggle\n * - Recent email suggestions\n * - Login/registration with Firebase\n * - Proper error handling and user feedback\n */\nconst EmailLoginForm: React.FC<EmailLoginFormProps> = ({\n  isOpen,\n  onToggle,\n  onLoginSuccess,\n  animationValue,\n}) => {\n  const { t } = useTranslation(['auth', 'common']);\n\n  // Form state management\n  const [formState, setFormState] = useState<EmailFormState>({\n    step: 'email',\n    emailValue: '',\n    passwordValue: '',\n    emailExists: null,\n    isBusy: false,\n    statusMessage: null,\n    statusColor: colors.success,\n    passwordVisible: true,\n    suggestions: [],\n  });\n\n  const [recentEmails, setRecentEmails] = useState<RecentEmailsState>({\n    emails: [],\n    suggestions: [],\n  });\n\n  // Reset form state when form is closed\n  useEffect(() => {\n    if (!isOpen) {\n      resetFormState();\n    }\n  }, [isOpen]);\n\n  // Update email suggestions based on current input\n  useEffect(() => {\n    if (!isOpen || formState.step !== 'email') {\n      setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n      return;\n    }\n\n    const query = formState.emailValue.trim().toLowerCase();\n    if (!query) {\n      setRecentEmails(prev => ({\n        ...prev,\n        suggestions: recentEmails.emails.slice(0, 5)\n      }));\n      return;\n    }\n\n    const filtered = recentEmails.emails\n      .filter(email => email.toLowerCase().includes(query))\n      .slice(0, 5);\n\n    setRecentEmails(prev => ({ ...prev, suggestions: filtered }));\n  }, [formState.emailValue, isOpen, formState.step, recentEmails.emails]);\n\n  // Load recent emails on component mount\n  useEffect(() => {\n    loadRecentEmails();\n  }, []);\n\n  /**\n   * Resets the form to its initial state\n   */\n  const resetFormState = () => {\n    setFormState({\n      step: 'email',\n      emailValue: '',\n      passwordValue: '',\n      emailExists: null,\n      isBusy: false,\n      statusMessage: null,\n      statusColor: colors.success,\n      passwordVisible: true,\n      suggestions: [],\n    });\n  };\n\n  /**\n   * Loads recent emails from AsyncStorage\n   */\n  const loadRecentEmails = async () => {\n    try {\n      const raw = await AsyncStorage.getItem('recent_emails');\n      if (raw) {\n        const list = JSON.parse(raw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n          return;\n        }\n      }\n\n      // Fallback to known emails\n      const knownRaw = await AsyncStorage.getItem(KNOWN_EMAILS_KEY);\n      if (knownRaw) {\n        const list = JSON.parse(knownRaw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load recent emails:', error);\n    }\n  };\n\n  /**\n   * Saves an email to recent emails list\n   */\n  const saveRecentEmail = async (email: string) => {\n    try {\n      const normalized = String(email || '').trim().toLowerCase();\n      if (!normalized) return;\n\n      const list = [\n        normalized,\n        ...recentEmails.emails.filter(e => e.toLowerCase() !== normalized)\n      ].slice(0, 10);\n\n      setRecentEmails(prev => ({ ...prev, emails: list }));\n      await AsyncStorage.setItem('recent_emails', JSON.stringify(list));\n      await AsyncStorage.setItem(KNOWN_EMAILS_KEY, JSON.stringify(list));\n    } catch (error) {\n      console.error('Failed to save recent email:', error);\n    }\n  };\n\n  /**\n   * Validates email format using regex\n   */\n  const validateEmailFormat = (email: string): boolean => {\n    const emailRegex = /[^@\\s]+@[^@\\s]+\\.[^@\\s]+/;\n    return emailRegex.test(String(email).toLowerCase());\n  };\n\n  /**\n   * Checks if an email is known (has existing account)\n   */\n  const isKnownEmail = async (email: string): Promise<boolean> => {\n    const lower = email.trim().toLowerCase();\n    try {\n      const methods = await getSignInMethods(lower);\n      const hasPasswordProvider = Array.isArray(methods) &&\n        methods.some(m => m && m.toLowerCase().includes('password'));\n\n      if (hasPasswordProvider) return true;\n\n      const cacheRaw = await AsyncStorage.getItem(KNOWN_EMAILS_KEY);\n      const cache = cacheRaw ? JSON.parse(cacheRaw) : [];\n      return Array.isArray(cache) && cache.includes(lower);\n    } catch (error) {\n      console.error('Error checking known email:', error);\n      const cacheRaw = await AsyncStorage.getItem(KNOWN_EMAILS_KEY);\n      const cache = cacheRaw ? JSON.parse(cacheRaw) : [];\n      return Array.isArray(cache) && cache.includes(lower);\n    }\n  };\n\n  /**\n   * Handles email input continuation (checking if email exists)\n   */\n  const handleEmailContinue = async () => {\n    try {\n      const email = formState.emailValue.trim().toLowerCase();\n\n      if (!email || !validateEmailFormat(email)) {\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:email.invalidFormat') as string\n        );\n        return;\n      }\n\n      setFormState(prev => ({ ...prev, isBusy: true }));\n\n      const exists = await isKnownEmail(email);\n      setFormState(prev => ({\n        ...prev,\n        emailExists: exists,\n        statusMessage: `${email} â€¢ ${exists ? t('auth:email.knownUser') : t('auth:email.unknownEmail')}`,\n        statusColor: exists ? colors.success : colors.error,\n        step: 'password',\n        passwordValue: '',\n        isBusy: false,\n      }));\n    } catch (error) {\n      console.error('Email check failed:', error);\n      Alert.alert(\n        t('common:error') as string,\n        t('common:genericTryAgain') as string\n      );\n      setFormState(prev => ({ ...prev, isBusy: false }));\n    }\n  };\n\n  /**\n   * Handles final email/password submission\n   */\n  const handleEmailSubmit = async () => {\n    try {\n      const email = formState.emailValue.trim().toLowerCase();\n\n      if (!email || !validateEmailFormat(email)) {\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:email.invalidFormat') as string\n        );\n        return;\n      }\n\n      if (!formState.passwordValue || formState.passwordValue.length < 6) {\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:email.passwordTooShort') as string\n        );\n        return;\n      }\n\n      setFormState(prev => ({ ...prev, isBusy: true }));\n\n      const exists = await isKnownEmail(email);\n      const nowIso = new Date().toISOString();\n\n      if (exists) {\n        // Handle login for existing user\n        await handleExistingUserLogin(email, nowIso);\n      } else {\n        // Handle registration for new user\n        await handleNewUserRegistration(email, nowIso);\n      }\n    } catch (error) {\n      console.error('Email submit failed:', error);\n      Alert.alert(\n        t('common:error') as string,\n        t('common:genericTryAgain') as string\n      );\n      setFormState(prev => ({ ...prev, isBusy: false }));\n    }\n  };\n\n  /**\n   * Handles login for existing users\n   */\n  const handleExistingUserLogin = async (email: string, nowIso: string) => {\n    try {\n      const fbUser = await fbSignInWithEmail(email, formState.passwordValue);\n\n      // Get UUID from server using firebase_uid\n      const { apiService } = await import('../utils/apiService');\n      const resolveResponse = await apiService.resolveUserId({\n        firebase_uid: fbUser.uid,\n        email: fbUser.email || email\n      });\n\n      if (!resolveResponse.success || !resolveResponse.user) {\n        // Fallback: try to get user by email\n        const userResponse = await apiService.getUserById(fbUser.email || email);\n        if (userResponse.success && userResponse.data) {\n          const serverUser = userResponse.data;\n          const userData = {\n            id: serverUser.id, // UUID from database\n            name: serverUser.name || fbUser.displayName || email.split('@')[0],\n            email: serverUser.email || fbUser.email || email,\n            phone: serverUser.phone || fbUser.phoneNumber || '+9720000000',\n            avatar: serverUser.avatar_url || fbUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n            bio: serverUser.bio || '',\n            karmaPoints: serverUser.karma_points || 0,\n            joinDate: serverUser.join_date || serverUser.created_at || nowIso,\n            isActive: serverUser.is_active !== false,\n            lastActive: serverUser.last_active || nowIso,\n            location: { city: serverUser.city || t('common:labels.countryIsrael') as string, country: serverUser.country || 'IL' },\n            interests: serverUser.interests || [],\n            roles: serverUser.roles || ['user'],\n            postsCount: serverUser.posts_count || 0,\n            followersCount: serverUser.followers_count || 0,\n            followingCount: serverUser.following_count || 0,\n            notifications: [],\n            settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n          };\n          await saveRecentEmail(email);\n          onLoginSuccess(userData);\n          return;\n        }\n        throw new Error('Failed to get user from server');\n      }\n\n      // Use UUID from server\n      const serverUser = resolveResponse.user;\n      const userData = {\n        id: serverUser.id, // UUID from database - this is the primary identifier\n        name: serverUser.name || fbUser.displayName || email.split('@')[0],\n        email: serverUser.email || fbUser.email || email,\n        phone: serverUser.phone || fbUser.phoneNumber || '+9720000000',\n        avatar: serverUser.avatar || fbUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n        bio: serverUser.bio || '',\n        karmaPoints: serverUser.karmaPoints || 0,\n        joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n        isActive: serverUser.isActive !== false,\n        lastActive: serverUser.lastActive || nowIso,\n        location: serverUser.location || { city: t('common:labels.countryIsrael') as string, country: 'IL' },\n        interests: serverUser.interests || [],\n        roles: serverUser.roles || ['user'],\n        postsCount: serverUser.postsCount || 0,\n        followersCount: serverUser.followersCount || 0,\n        followingCount: serverUser.followingCount || 0,\n        notifications: [],\n        settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n      };\n      await saveRecentEmail(email);\n      onLoginSuccess(userData);\n    } catch (error: any) {\n      setFormState(prev => ({\n        ...prev,\n        statusMessage: t('auth:email.invalidPassword') as string,\n        statusColor: colors.error,\n        isBusy: false,\n      }));\n    }\n  };\n\n  /**\n   * Handles registration for new users\n   */\n  const handleNewUserRegistration = async (email: string, nowIso: string) => {\n    try {\n      const fbUser = await fbSignUpWithEmail(email, formState.passwordValue);\n      await fbSendVerification(fbUser);\n      Alert.alert(\n        t('auth:email.verifyTitle') as string,\n        t('auth:email.verifySent') as string\n      );\n    } catch (error: any) {\n      if (String(error?.code || '').includes('auth/email-already-in-use')) {\n        // Try to sign in instead\n        try {\n          const fbUser = await fbSignInWithEmail(email, formState.passwordValue);\n\n          // Get UUID from server using firebase_uid\n          const { apiService } = await import('../utils/apiService');\n          const resolveResponse = await apiService.resolveUserId({\n            firebase_uid: fbUser.uid,\n            email: fbUser.email || email\n          });\n\n          if (!resolveResponse.success || !resolveResponse.user) {\n            // Fallback: try to get user by email\n            const userResponse = await apiService.getUserById(fbUser.email || email);\n            if (userResponse.success && userResponse.data) {\n              const serverUser = userResponse.data;\n              const userData = {\n                id: serverUser.id, // UUID from database\n                name: serverUser.name || fbUser.displayName || email.split('@')[0],\n                email: serverUser.email || fbUser.email || email,\n                phone: serverUser.phone || fbUser.phoneNumber || '+9720000000',\n                avatar: serverUser.avatar_url || fbUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n                bio: serverUser.bio || '',\n                karmaPoints: serverUser.karma_points || 0,\n                joinDate: nowIso,\n                isActive: true,\n                lastActive: nowIso,\n                location: { city: t('common:labels.countryIsrael') as string, country: 'IL' },\n                interests: [],\n                roles: ['user'],\n                postsCount: 0,\n                followersCount: 0,\n                followingCount: 0,\n                notifications: [],\n                settings: { language: 'he', darkMode: false, notificationsEnabled: true },\n              };\n\n              try {\n                // User is already in database from resolveUserId/getUserById - no need to create via restAdapter\n              } catch (error) {\n                console.log('Saving user on server failed (non-critical):', error);\n              }\n\n              await saveRecentEmail(email);\n              onLoginSuccess(userData);\n              return;\n            }\n            throw new Error('Failed to get user from server');\n          }\n\n          const serverUser = resolveResponse.user as any;\n          const userData = {\n            id: serverUser.id,\n            name: serverUser.name || fbUser.displayName || email.split('@')[0],\n            email: serverUser.email || fbUser.email || email,\n            phone: serverUser.phone || fbUser.phoneNumber || '+9720000000',\n            avatar: serverUser.avatar_url || fbUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n            bio: serverUser.bio || '',\n            karmaPoints: serverUser.karma_points || 0,\n            joinDate: nowIso,\n            isActive: true,\n            lastActive: nowIso,\n            location: { city: t('common:labels.countryIsrael') as string, country: 'IL' },\n            interests: [],\n            roles: ['user'],\n            postsCount: 0,\n            followersCount: 0,\n            followingCount: 0,\n            notifications: [],\n            settings: { language: 'he', darkMode: false, notificationsEnabled: true },\n          };\n\n          await saveRecentEmail(email);\n          onLoginSuccess(userData);\n        } catch (signinError) {\n          setFormState(prev => ({\n            ...prev,\n            statusMessage: t('auth:email.invalidPassword') as string,\n            statusColor: colors.error,\n            isBusy: false,\n          }));\n        }\n      } else {\n        console.error('Sign up failed:', error);\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:email.signupFailed') as string\n        );\n        setFormState(prev => ({ ...prev, isBusy: false }));\n      }\n    }\n  };\n\n  /**\n   * Handles password reset functionality\n   */\n  const handlePasswordReset = async () => {\n    try {\n      await sendPasswordReset(formState.emailValue.trim().toLowerCase());\n    } catch (error) {\n      console.error('Password reset failed:', error);\n    }\n    Linking.openURL('https://mail.google.com/mail');\n  };\n\n  /**\n   * Handles suggestion selection\n   */\n  const handleSuggestionSelect = (email: string) => {\n    setFormState(prev => ({ ...prev, emailValue: email }));\n    setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n  };\n\n  if (!isOpen) {\n    return (\n      <View style={styles.container}>\n        <TouchableOpacity\n          style={[styles.ctaButton, styles.emailButton]}\n          onPress={onToggle}\n          activeOpacity={0.85}\n        >\n          <Text style={[styles.ctaButtonText, { color: colors.primary, fontWeight: '700' }]}>\n            {t('auth:email.cta')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.expandedRow}>\n        <Animated.View style={[styles.miniButton, { opacity: animationValue }]}>\n          <TouchableOpacity onPress={onToggle} activeOpacity={0.8}>\n            <Ionicons name=\"mail-outline\" size={20} color={colors.primary} />\n          </TouchableOpacity>\n        </Animated.View>\n\n        {formState.step === 'email' ? (\n          <TextInput\n            style={styles.input}\n            placeholder={t('auth:email.placeholder')}\n            placeholderTextColor={colors.textTertiary}\n            value={formState.emailValue}\n            textAlign=\"right\"\n            onChangeText={(text) => setFormState(prev => ({ ...prev, emailValue: text }))}\n            autoCapitalize=\"none\"\n            autoCorrect={false}\n            autoComplete=\"email\"\n            textContentType=\"emailAddress\"\n            inputMode=\"email\"\n            keyboardType=\"email-address\"\n            returnKeyType=\"done\"\n            onSubmitEditing={handleEmailContinue}\n            accessible={true}\n            accessibilityLabel={t('auth:email.placeholder')}\n            accessibilityHint={t('auth:email.accessibilityHint') || 'Enter your email address'}\n            importantForAccessibility=\"yes\"\n          />\n        ) : (\n          <View style={styles.inputWrapper}>\n            <TextInput\n              style={[styles.input, { paddingRight: 40 }]}\n              placeholder={t('auth:email.passwordPlaceholder')}\n              placeholderTextColor={colors.textTertiary}\n              value={formState.passwordValue}\n              onChangeText={(text) => setFormState(prev => ({ ...prev, passwordValue: text }))}\n              autoCapitalize=\"none\"\n              autoCorrect={false}\n              textAlign=\"right\"\n              secureTextEntry={!formState.passwordVisible}\n              returnKeyType=\"done\"\n              onSubmitEditing={handleEmailSubmit}\n              accessible={true}\n              accessibilityLabel={t('auth:email.passwordPlaceholder')}\n              accessibilityHint={t('auth:email.passwordAccessibilityHint') || 'Enter your password'}\n              importantForAccessibility=\"yes\"\n            />\n            <TouchableOpacity\n              onPress={() => setFormState(prev => ({ ...prev, passwordVisible: !prev.passwordVisible }))}\n              style={styles.eyeToggle}\n            >\n              <Ionicons\n                name={formState.passwordVisible ? 'eye-outline' : 'eye-off-outline'}\n                size={20}\n                color={colors.textSecondary}\n              />\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {formState.step === 'email' ? (\n          <TouchableOpacity\n            style={[styles.actionButton, formState.isBusy && styles.disabledButton]}\n            onPress={handleEmailContinue}\n            disabled={formState.isBusy}\n            activeOpacity={0.85}\n          >\n            <Text style={styles.actionButtonText}>\n              {formState.isBusy ? t('auth:email.checking') : t('auth:email.continue')}\n            </Text>\n          </TouchableOpacity>\n        ) : (\n          <TouchableOpacity\n            style={[styles.actionButton, formState.isBusy && styles.disabledButton]}\n            onPress={handleEmailSubmit}\n            disabled={formState.isBusy}\n            activeOpacity={0.85}\n          >\n            <Text style={styles.actionButtonText}>\n              {formState.isBusy ? t('auth:email.submitting') : t('auth:email.submit')}\n            </Text>\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {/* Email suggestions dropdown */}\n      {formState.step === 'email' && recentEmails.suggestions.length > 0 && (\n        <View style={styles.suggestionsBox}>\n          {recentEmails.suggestions.map((suggestion) => (\n            <TouchableOpacity\n              key={suggestion}\n              style={styles.suggestionItem}\n              onPress={() => handleSuggestionSelect(suggestion)}\n            >\n              <Text style={styles.suggestionText}>{suggestion}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n\n      {/* Status message */}\n      {formState.statusMessage && (\n        <>\n          <View style={styles.statusRow}>\n            <Text style={[styles.statusText, { color: formState.statusColor }]}>\n              {formState.statusMessage}\n            </Text>\n          </View>\n          {formState.statusColor === colors.error && formState.step === 'password' && (\n            <View style={styles.resetContainer}>\n              <TouchableOpacity\n                style={styles.resetButton}\n                onPress={handlePasswordReset}\n                activeOpacity={0.7}\n              >\n                <Text style={styles.resetText}>{t('auth:email.resetPassword')}</Text>\n              </TouchableOpacity>\n            </View>\n          )}\n        </>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 3,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  ctaButton: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n    ...createShadowStyle('colors.black', { width: 0, height: 2 }, 0.1, 4),\n    elevation: 3,\n    width: '100%',\n    marginVertical: 6,\n    marginBottom: 22,\n  },\n  emailButton: {\n    borderColor: colors.primary,\n    marginTop: 12,\n    width: '100%',\n  },\n  ctaButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: colors.textSecondary,\n    textAlign: 'center',\n    width: '100%',\n  },\n  expandedRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 6,\n    marginHorizontal: 0,\n    marginVertical: 3,\n    gap: 8,\n    width: '100%',\n  },\n  miniButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(76, 126, 255, 0.08)',\n  },\n  input: {\n    flex: 1,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n  },\n  inputWrapper: {\n    position: 'relative',\n    flex: 1,\n  },\n  eyeToggle: {\n    position: 'absolute',\n    right: 5,\n    top: 0,\n    bottom: 0,\n    width: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  actionButton: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 10,\n  },\n  actionButtonText: {\n    color: colors.white,\n    fontWeight: '700',\n    fontSize: 14,\n  },\n  disabledButton: {\n    backgroundColor: colors.textTertiary,\n    opacity: 0.6,\n  },\n  suggestionsBox: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    marginTop: 6,\n    marginBottom: 6,\n    overflow: 'hidden',\n  },\n  suggestionItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  suggestionText: {\n    fontSize: 14,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  statusRow: {\n    marginTop: 6,\n    marginBottom: 6,\n    paddingHorizontal: 6,\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    justifyContent: 'flex-start',\n  },\n  statusText: {\n    fontSize: 13,\n    fontWeight: '600',\n    textAlign: 'right',\n  },\n  resetContainer: {\n    paddingHorizontal: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n    alignSelf: 'center',\n    marginBottom: 4,\n  },\n  resetButton: {\n    paddingHorizontal: 0,\n    paddingVertical: 0,\n    borderRadius: 0,\n    borderWidth: 0,\n    backgroundColor: 'transparent',\n    marginLeft: 8,\n  },\n  resetText: {\n    fontSize: 13,\n    color: colors.primary,\n    fontWeight: '700',\n    textDecorationLine: 'underline',\n  },\n});\n\nexport default EmailLoginForm;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/EditPostModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/FeedHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[92,106],"text":""},"desc":"Remove unused variable \"Platform\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n    View,\n    Text,\n    TouchableOpacity,\n    StyleSheet,\n    Platform\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\n\ninterface FeedHeaderProps {\n    feedMode: 'friends' | 'discovery';\n    setFeedMode: (mode: 'friends' | 'discovery') => void;\n    onStatsPress: () => void;\n    t: (key: string) => string;\n}\n\nconst FeedHeader: React.FC<FeedHeaderProps> = ({ feedMode, setFeedMode, onStatsPress, t }) => {\n    return (\n        <View style={styles.floatingHeaderContainer}>\n            <View style={styles.headerContentWrapper}>\n                {/* Toggle Switch */}\n                <View style={styles.toggleBackground}>\n                    <TouchableOpacity\n                        style={[\n                            styles.toggleSegment,\n                            feedMode === 'friends' ? styles.toggleSelected : styles.toggleUnselected\n                        ]}\n                        onPress={() => setFeedMode('friends')}\n                        activeOpacity={0.8}\n                    >\n                        <Text style={[\n                            styles.toggleText,\n                            feedMode === 'friends' ? styles.toggleTextSelected : {}\n                        ]}>\n                            {t('feed.tabs.friends')}\n                        </Text>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[\n                            styles.toggleSegment,\n                            feedMode === 'discovery' ? styles.toggleSelected : styles.toggleUnselected\n                        ]}\n                        onPress={() => setFeedMode('discovery')}\n                        activeOpacity={0.8}\n                    >\n                        <Text style={[\n                            styles.toggleText,\n                            feedMode === 'discovery' ? styles.toggleTextSelected : {}\n                        ]}>\n                            {t('feed.tabs.discovery')}\n                        </Text>\n                    </TouchableOpacity>\n                </View>\n\n                {/* Stats Button */}\n                <TouchableOpacity\n                    style={styles.statsButton}\n                    onPress={onStatsPress}\n                    activeOpacity={0.8}\n                >\n                    <Ionicons name=\"stats-chart\" size={20} color={colors.primary} />\n                </TouchableOpacity>\n            </View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    floatingHeaderContainer: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        zIndex: 100,\n        alignItems: 'center',\n        paddingVertical: 12,\n        backgroundColor: 'transparent',\n        pointerEvents: 'box-none',\n    },\n    headerContentWrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 12,\n    },\n    toggleBackground: {\n        flexDirection: 'row-reverse',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 999,\n        height: 36,\n        borderWidth: 1,\n        borderColor: colors.border,\n        padding: 2,\n        alignItems: 'center',\n        justifyContent: 'center',\n        minWidth: 200,\n    },\n    toggleSegment: {\n        flex: 1,\n        height: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: 18,\n        paddingHorizontal: 16,\n    },\n    toggleSelected: {\n        backgroundColor: colors.white,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n        elevation: 2,\n    },\n    toggleUnselected: {\n        backgroundColor: 'transparent',\n    },\n    toggleText: {\n        fontSize: 14,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    toggleTextSelected: {\n        color: colors.primary,\n        fontWeight: '700',\n    },\n    statsButton: {\n        width: 36,\n        height: 36,\n        borderRadius: 18,\n        backgroundColor: colors.white,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1,\n        borderColor: colors.border,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n        elevation: 2,\n    },\n});\n\nexport default React.memo(FeedHeader);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/OptionsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SCREEN_HEIGHT' is assigned a value but never used.","line":24,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Modal, TouchableOpacity, StyleSheet, TouchableWithoutFeedback, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\n\nexport interface Option {\n    label: string;\n    onPress: () => void;\n    icon?: keyof typeof Ionicons.glyphMap;\n    isDestructive?: boolean;\n    color?: string;\n}\n\ninterface OptionsModalProps {\n    visible: boolean;\n    onClose: () => void;\n    options: Option[];\n    title?: string;\n    cancelText?: string;\n    anchorPosition?: { x: number, y: number };\n}\n\nconst { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');\n\nconst OptionsModal: React.FC<OptionsModalProps> = ({\n    visible,\n    onClose,\n    options,\n    title,\n    cancelText = '×‘×™×˜×•×œ',\n    anchorPosition\n}) => {\n    if (!visible) return null;\n\n    // Popover positioning logic\n    const popoverStyle = anchorPosition ? {\n        position: 'absolute' as const,\n        top: anchorPosition.y + 10, // Slightly below the touch point\n        // If clicked on right side, align right. If left, align left.\n        ...(anchorPosition.x > SCREEN_WIDTH / 2\n            ? { right: SCREEN_WIDTH - anchorPosition.x - 10 }\n            : { left: anchorPosition.x - 10 }\n        ),\n        width: 200, // Compact width\n    } : null;\n\n    return (\n        <Modal\n            visible={visible}\n            transparent={true}\n            animationType=\"fade\"\n            onRequestClose={onClose}\n        >\n            <TouchableWithoutFeedback onPress={onClose}>\n                <View style={[styles.overlay, anchorPosition ? styles.overlayClear : {}]}>\n                    <TouchableWithoutFeedback>\n                        <View style={[\n                            styles.modalContainer,\n                            popoverStyle,\n                            !anchorPosition && styles.bottomSheetContainer\n                        ]}>\n                            <View style={[styles.contentContainer, styles.shadow]}>\n                                {title && !anchorPosition && (\n                                    <View style={styles.header}>\n                                        <Text style={styles.title}>{title}</Text>\n                                    </View>\n                                )}\n\n                                {options.map((option, index) => (\n                                    <TouchableOpacity\n                                        key={index}\n                                        style={[\n                                            styles.option,\n                                            index < options.length - 1 && styles.borderBottom\n                                        ]}\n                                        onPress={() => {\n                                            // Close first, then execute action\n                                            onClose();\n                                            requestAnimationFrame(() => {\n                                                option.onPress();\n                                            });\n                                        }}\n                                        activeOpacity={0.7}\n                                    >\n                                        <View style={styles.optionContent}>\n                                            {option.icon && (\n                                                <Ionicons\n                                                    name={option.icon}\n                                                    size={20}\n                                                    color={option.isDestructive ? colors.error : (option.color || colors.textPrimary)}\n                                                />\n                                            )}\n                                            <Text style={[\n                                                styles.optionText,\n                                                option.isDestructive && styles.destructiveText,\n                                                option.color ? { color: option.color } : {}\n                                            ]}>\n                                                {option.label}\n                                            </Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                ))}\n                            </View>\n\n                            {!anchorPosition && (\n                                <TouchableOpacity style={[styles.cancelButton, styles.shadow]} onPress={onClose} activeOpacity={0.9}>\n                                    <Text style={styles.cancelText}>{cancelText}</Text>\n                                </TouchableOpacity>\n                            )}\n                        </View>\n                    </TouchableWithoutFeedback>\n                </View>\n            </TouchableWithoutFeedback>\n        </Modal>\n    );\n};\n\nconst styles = StyleSheet.create({\n    overlay: {\n        flex: 1,\n        backgroundColor: 'rgba(0, 0, 0, 0.4)',\n        justifyContent: 'flex-end',\n        padding: 16,\n        paddingBottom: Platform.OS === 'ios' ? 32 : 16,\n    },\n    overlayClear: {\n        backgroundColor: 'rgba(0,0,0,0.2)', // Lighter dim for popover\n        justifyContent: 'flex-start', // Allow absolute positioning from top\n        padding: 0,\n    },\n    modalContainer: {\n        gap: 8,\n    },\n    bottomSheetContainer: {\n        width: '100%',\n        maxWidth: 500,\n        alignSelf: 'center',\n    },\n    contentContainer: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        overflow: 'hidden',\n    },\n    shadow: {\n        shadowColor: \"#000\",\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 5,\n    },\n    header: {\n        padding: 12,\n        borderBottomWidth: 0.5,\n        borderBottomColor: colors.border,\n        alignItems: 'center',\n    },\n    title: {\n        fontSize: FontSizes.small,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    option: {\n        paddingVertical: 12,\n        paddingHorizontal: 16,\n        backgroundColor: colors.white,\n    },\n    borderBottom: {\n        borderBottomWidth: 0.5,\n        borderBottomColor: colors.borderSecondary || colors.border,\n    },\n    optionContent: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start', // Align start for popover look\n        gap: 12,\n    },\n    optionText: {\n        fontSize: FontSizes.body,\n        fontWeight: '500',\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    destructiveText: {\n        color: colors.error,\n    },\n    cancelButton: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        padding: 14,\n        alignItems: 'center',\n        marginTop: 4,\n    },\n    cancelText: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.primary,\n    },\n});\n\nexport default OptionsModal;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/DonationItemCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/ItemDeliveredCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RegularItemCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'windowWidth' is assigned a value but never used.","line":244,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":244,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { FontSizes } from '../../../globals/constants';\nimport { BaseCardProps } from './types';\nimport { isMobileWeb } from '../../../globals/responsive';\n\nconst RegularItemCard: React.FC<BaseCardProps> = ({\n    item,\n    cardWidth,\n    isGrid,\n    onPress,\n    onProfilePress,\n    onLike,\n    onComment,\n    onBookmark,\n    onShare,\n    onMorePress,\n    onQuickMessage,\n    onClosePost,\n    isLiked,\n    isBookmarked,\n    likesCount,\n    commentsCount,\n    formattedTime\n}) => {\n    const { t, i18n } = useTranslation();\n    const isRTL = i18n.language === 'he';\n\n    // Helper to check if a string is a translation key\n    const isTranslationKey = (str: string | undefined | null): boolean => {\n        if (!str) return false;\n        // Check for both dot notation and colon notation\n        return (str.includes('.') || str.includes(':')) && \n               (str.startsWith('post.') || str.startsWith('post:') ||\n                str.startsWith('donations.') || str.startsWith('donations:') ||\n                str.startsWith('common.') || str.startsWith('common:'));\n    };\n\n    // Normalize translation key format (convert colons to dots for consistency)\n    const normalizeTranslationKey = (key: string): string => {\n        return key.replace(/donations:/g, 'donations.').replace(/post:/g, 'post.').replace(/common:/g, 'common.');\n    };\n\n    const displayTitle = !item.title || item.title.trim() === '' || item.title === 'donations.categories.items.title' || item.title === 'donations:categories.items.title'\n        ? t('donations.categories.items.title')\n        : item.title === 'post.noTitle' \n            ? t('post.noTitle')\n            : isTranslationKey(item.title)\n                ? t(normalizeTranslationKey(item.title))\n                : item.title;\n    \n    // Build full description for items\n    const fullItemDescription = React.useMemo(() => {\n        if (!item.title && !item.description) return '';\n        \n        const titlePart = item.title && item.title.trim() !== '' \n            ? (isTranslationKey(item.title) ? t(normalizeTranslationKey(item.title)) : item.title)\n            : '';\n        const descPart = item.description && item.description.trim() !== '' ? item.description : '';\n        \n        // Build full text: \"×‘×¤×¨×™×˜ [×©× ×”×¤×¨×™×˜] ×œ××¡×™×¨×” - [×ª×™××•×¨]\"\n        if (titlePart && descPart) {\n            return `×‘×¤×¨×™×˜ ${titlePart} ×œ××¡×™×¨×” - ${descPart}`;\n        } else if (titlePart) {\n            return `×‘×¤×¨×™×˜ ${titlePart} ×œ××¡×™×¨×”`;\n        } else if (descPart) {\n            return descPart;\n        }\n        return '';\n    }, [item.title, item.description, t]);\n    \n    // Safe access to user.name with fallback\n    const userName = item.user?.name || 'common.unknownUser';\n    const displayName = userName === 'common.unknownUser' ? t('common.unknownUser') : userName;\n\n    return (\n        <View style={[\n            styles.container,\n            isGrid && styles.gridContainer,\n            { width: cardWidth }\n        ]}>\n            {/* Header */}\n            <View style={[styles.header, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <TouchableOpacity\n                    style={[styles.userInfo, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}\n                    onPress={onProfilePress}\n                >\n                    {item.user?.avatar ? (\n                        <Image source={{ uri: item.user.avatar }} style={styles.avatar} />\n                    ) : (\n                        <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                            <Ionicons name=\"person\" size={20} color={colors.white} />\n                        </View>\n                    )}\n                    <View style={[styles.userTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                        <Text style={[styles.userName, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {displayName}\n                        </Text>\n                        <Text style={[styles.timestamp, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {formattedTime}\n                        </Text>\n                    </View>\n                </TouchableOpacity>\n\n                <View style={[styles.headerRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    {/* Item Badge - Shows \"Available\" for open items */}\n                    <View style={styles.itemBadge}>\n                        <Ionicons name=\"cube\" size={16} color={colors.white} />\n                        <Text style={styles.itemBadgeText}>{t('items.available')}</Text>\n                    </View>\n\n                    {/* More Options Button */}\n                    <TouchableOpacity\n                        onPress={(e) => onMorePress && onMorePress({ x: e.nativeEvent.pageX, y: e.nativeEvent.pageY })}\n                        style={styles.moreButton}\n                    >\n                        <Ionicons name=\"ellipsis-horizontal\" size={20} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            {/* Image with overlay */}\n            <TouchableOpacity onPress={onPress} activeOpacity={0.95} style={styles.cardContent}>\n                {item.thumbnail ? (\n                    <View style={styles.imageContainer}>\n                        <Image\n                            source={{ uri: item.thumbnail }}\n                            style={[styles.image, isGrid && styles.imageGrid]}\n                            resizeMode=\"cover\"\n                        />\n                        <View style={styles.gradientOverlay}>\n                            <View style={styles.overlayContent}>\n                                <Text style={styles.itemTitle} numberOfLines={2}>\n                                    {displayTitle}\n                                </Text>\n                                {fullItemDescription && !isGrid && (\n                                    <Text style={styles.itemDescription} numberOfLines={3}>\n                                        {fullItemDescription}\n                                    </Text>\n                                )}\n                                <View style={[styles.detailsRow, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                                    {item.category && (\n                                        <View style={styles.detailBadge}>\n                                            <Ionicons name=\"pricetag\" size={14} color={colors.white} />\n                                            <Text style={styles.detailText}>{item.category}</Text>\n                                        </View>\n                                    )}\n                                    {/* Removed Price from here to avoid \"For Sale\" confusion, unless explicit */}\n                                </View>\n                            </View>\n                        </View>\n                    </View>\n                ) : (\n                    <View style={[styles.placeholderContainer, isGrid && styles.imageGrid]}>\n                        <Ionicons name=\"cube-outline\" size={48} color={colors.textSecondary} />\n                        <Text style={styles.placeholderTitle}>{displayTitle}</Text>\n                        {fullItemDescription && !isGrid && (\n                            <Text style={styles.placeholderDescription} numberOfLines={3}>\n                                {fullItemDescription}\n                            </Text>\n                        )}\n                        <View style={[styles.detailsRow, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                            {item.category && (\n                                <View style={[styles.detailBadge, styles.detailBadgeDark]}>\n                                    <Ionicons name=\"pricetag\" size={14} color={colors.textSecondary} />\n                                    <Text style={[styles.detailText, styles.detailTextDark]}>\n                                        {item.category}\n                                    </Text>\n                                </View>\n                            )}\n                        </View>\n                    </View>\n                )}\n            </TouchableOpacity>\n\n            {/* Actions Bar */}\n            <View style={[styles.actionsBar, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <View style={[styles.actionsLeft, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onLike}\n                    >\n                        <Ionicons\n                            name={isLiked ? \"heart\" : \"heart-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isLiked ? colors.error : colors.textSecondary}\n                        />\n                        {likesCount > 0 && (\n                            <Text style={[styles.actionCount, isLiked && styles.likedCount]}>\n                                {likesCount}\n                            </Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onComment}\n                    >\n                        <Ionicons name=\"chatbubble-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                        {commentsCount > 0 && (\n                            <Text style={styles.actionCount}>{commentsCount}</Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity style={styles.actionButton} onPress={onShare}>\n                        <Ionicons name=\"share-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n\n                <View style={[styles.actionsRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    {onQuickMessage && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onQuickMessage}\n                        >\n                            <Ionicons name=\"chatbubble-ellipses\" size={isMobile ? 20 : 24} color={colors.primary} />\n                        </TouchableOpacity>\n                    )}\n                    {onClosePost && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onClosePost}\n                        >\n                            <Ionicons name=\"checkmark-circle-outline\" size={isMobile ? 20 : 24} color={colors.success} />\n                        </TouchableOpacity>\n                    )}\n                    <TouchableOpacity style={styles.actionButton} onPress={onBookmark}>\n                        <Ionicons\n                            name={isBookmarked ? \"bookmark\" : \"bookmark-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isBookmarked ? colors.primary : colors.textSecondary}\n                        />\n                    </TouchableOpacity>\n                </View>\n            </View>\n        </View>\n    );\n};\n\nconst isMobile = isMobileWeb();\nconst windowWidth = Dimensions.get('window').width;\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 12 : 16,\n        marginVertical: isMobile ? 6 : 8,\n        marginHorizontal: 0, // Padding is handled by parent listContent\n        overflow: 'hidden',\n        minHeight: isMobile ? 280 : 380, // Smaller height for mobile web\n        ...Platform.select({\n            ios: {\n                shadowColor: colors.black,\n                shadowOffset: { width: 0, height: 4 },\n                shadowOpacity: 0.12,\n                shadowRadius: 8,\n            },\n            android: {\n                elevation: 4,\n            },\n            web: {\n                boxShadow: '0 4px 16px rgba(0, 0, 0, 0.1)'\n            }\n        }),\n    },\n    gridContainer: {\n        // marginHorizontal removed - FlatList with justifyContent: 'space-between' handles spacing\n        minHeight: isMobile ? 180 : 250, // Smaller min height for grid on mobile\n    },\n    header: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n    },\n    headerRight: {\n        alignItems: 'center',\n        gap: 8,\n    },\n    moreButton: {\n        padding: 4,\n    },\n    userInfo: {\n        alignItems: 'center',\n        gap: 12,\n        flex: 1, // Allow text to take space\n    },\n    avatar: {\n        width: isMobile ? 36 : 44,\n        height: isMobile ? 36 : 44,\n        borderRadius: isMobile ? 18 : 22,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    avatarPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n    },\n    userTextContainer: {\n        gap: 2,\n        flex: 1,\n    },\n    userName: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    timestamp: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n    },\n    itemBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.textSecondary, // Neutral color for generic item\n        paddingHorizontal: isMobile ? 8 : 10,\n        paddingVertical: isMobile ? 3 : 4,\n        borderRadius: isMobile ? 16 : 20,\n        gap: isMobile ? 3 : 4,\n    },\n    itemBadgeText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    cardContent: {\n        flex: 1, // Take available height\n    },\n    imageContainer: {\n        position: 'relative',\n        height: isMobile ? 180 : 280,\n    },\n    image: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: colors.backgroundTertiary,\n    },\n    imageGrid: {\n        height: isMobile ? 120 : 180,\n    },\n    gradientOverlay: {\n        ...StyleSheet.absoluteFillObject,\n        backgroundColor: 'rgba(0, 0, 0, 0.35)',\n        justifyContent: 'flex-end',\n        padding: isMobile ? 12 : 20,\n    },\n    overlayContent: {\n        gap: isMobile ? 4 : 8,\n    },\n    itemTitle: {\n        fontSize: isMobile ? 18 : 24,\n        fontWeight: '800',\n        color: colors.white,\n        textShadowColor: 'rgba(0, 0, 0, 0.8)',\n        textShadowOffset: { width: 0, height: 2 },\n        textShadowRadius: 4,\n    },\n    itemDescription: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        color: colors.white,\n        lineHeight: isMobile ? 16 : 22,\n        textShadowColor: 'rgba(0, 0, 0, 0.8)',\n        textShadowOffset: { width: 0, height: 1 },\n        textShadowRadius: 3,\n    },\n    detailsRow: {\n        gap: isMobile ? 4 : 8,\n        marginTop: isMobile ? 2 : 4,\n    },\n    detailBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: 'rgba(255, 255, 255, 0.25)',\n        paddingHorizontal: isMobile ? 8 : 12,\n        paddingVertical: isMobile ? 4 : 6,\n        borderRadius: isMobile ? 12 : 16,\n        gap: isMobile ? 4 : 6,\n    },\n    detailBadgeDark: {\n        backgroundColor: colors.backgroundSecondary,\n    },\n    detailText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    detailTextDark: {\n        color: colors.textPrimary,\n    },\n    placeholderContainer: {\n        height: isMobile ? 180 : 280,\n        backgroundColor: '#F5F5F5',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: isMobile ? 16 : 24,\n        gap: isMobile ? 8 : 12,\n    },\n    placeholderTitle: {\n        fontSize: isMobile ? 16 : 20,\n        fontWeight: '700',\n        color: colors.textPrimary,\n        textAlign: 'center',\n    },\n    placeholderDescription: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        color: colors.textSecondary,\n        textAlign: 'center',\n        lineHeight: isMobile ? 16 : 22,\n    },\n    actionsBar: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderTopWidth: 1,\n        borderTopColor: colors.backgroundSecondary,\n    },\n    actionsLeft: {\n        alignItems: 'center',\n    },\n    actionButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n    },\n    actionCount: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    likedCount: {\n        color: colors.error,\n    },\n    actionsRight: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n});\n\nexport default React.memo(RegularItemCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RideCompletedCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":67,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[83,93],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":2,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[93,105],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onBookmark' is defined but never used.","line":18,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onShare' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isBookmarked' is defined but never used.","line":22,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":17}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { FontSizes } from '../../../globals/constants';\nimport { BaseCardProps } from './types';\nimport { isMobileWeb } from '../../../globals/responsive';\n\nconst RideCompletedCard: React.FC<BaseCardProps> = ({\n    item,\n    cardWidth,\n    isGrid,\n    onPress,\n    onProfilePress,\n    onLike,\n    onComment,\n    onBookmark,\n    onShare,\n    onMorePress,\n    isLiked,\n    isBookmarked,\n    likesCount,\n    commentsCount,\n    formattedTime\n}) => {\n    const { t, i18n } = useTranslation();\n    const isRTL = i18n.language === 'he';\n    const displayName = item.user.name === 'common.unknownUser' ? t('common.unknownUser') : item.user.name;\n\n    // Use locations from item or fallback\n    const locations = {\n        from: item.from || '',\n        to: item.to || ''\n    };\n\n    return (\n        <View style={[\n            styles.container,\n            isGrid && styles.gridContainer,\n            { width: cardWidth }\n        ]}>\n            {/* Header */}\n            <View style={[styles.header, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <TouchableOpacity\n                    style={[styles.userInfo, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}\n                    onPress={onProfilePress}\n                >\n                    {item.user.avatar ? (\n                        <Image source={{ uri: item.user.avatar }} style={styles.avatar} />\n                    ) : (\n                        <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                            <Ionicons name=\"person\" size={20} color={colors.white} />\n                        </View>\n                    )}\n                    <View style={[styles.userTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                        <Text style={[styles.userName, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {displayName}\n                        </Text>\n                        <Text style={[styles.timestamp, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {formattedTime}\n                        </Text>\n                    </View>\n                </TouchableOpacity>\n\n                <View style={[styles.headerRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <View style={styles.completedBadge}>\n                        <Ionicons name=\"checkmark-done-circle\" size={16} color={colors.white} />\n                        <Text style={styles.completedBadgeText}>{t('rides.completed')}</Text>\n                    </View>\n\n                    <TouchableOpacity\n                        onPress={(e) => onMorePress && onMorePress({ x: e.nativeEvent.pageX, y: e.nativeEvent.pageY })}\n                        style={styles.moreButton}\n                    >\n                        <Ionicons name=\"ellipsis-horizontal\" size={20} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            {/* Main Content - Greyed out/Subtle for completed items */}\n            <TouchableOpacity onPress={onPress} activeOpacity={0.95} style={styles.cardContent}>\n                <View style={[styles.contentContainer, isGrid && styles.contentContainerGrid]}>\n                    <View style={styles.routeContainer}>\n                        <View style={styles.locationPoint}>\n                            <View style={[styles.dot, styles.dotInactive]} />\n                            <Text style={[styles.locationText, styles.textInactive]} numberOfLines={1}>\n                                {locations.from || t('rides.origin')}\n                            </Text>\n                        </View>\n\n                        <View style={styles.routeLine}>\n                            <View style={[styles.dashedLine, styles.lineInactive]} />\n                            <Ionicons name=\"arrow-down\" size={isMobile ? 14 : 16} color={colors.textTertiary} />\n                        </View>\n\n                        <View style={styles.locationPoint}>\n                            <View style={[styles.dot, styles.dotInactive]} />\n                            <Text style={[styles.locationText, styles.textInactive]} numberOfLines={1}>\n                                {locations.to || t('rides.destination')}\n                            </Text>\n                        </View>\n                    </View>\n\n                    {/* Completion Message */}\n                    <View style={styles.completionMessage}>\n                        <Text style={styles.completionText}>\n                            {t('rides.thanks_message')}\n                        </Text>\n                    </View>\n                </View>\n            </TouchableOpacity>\n\n            {/* Actions Bar */}\n            <View style={[styles.actionsBar, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <View style={[styles.actionsLeft, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onLike}\n                    >\n                        <Ionicons\n                            name={isLiked ? \"heart\" : \"heart-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isLiked ? colors.error : colors.textSecondary}\n                        />\n                        {likesCount > 0 && (\n                            <Text style={[styles.actionCount, isLiked && styles.likedCount]}>\n                                {likesCount}\n                            </Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onComment}\n                    >\n                        <Ionicons name=\"chatbubble-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                        {commentsCount > 0 && (\n                            <Text style={styles.actionCount}>{commentsCount}</Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n\n                {/* Optional: Add Delete option here as well? The more button is in header */}\n            </View>\n        </View>\n    );\n};\n\nconst isMobile = isMobileWeb();\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 12 : 16,\n        marginVertical: isMobile ? 6 : 8,\n        marginHorizontal: 0, // Padding is handled by parent listContent\n        overflow: 'hidden',\n        borderWidth: 1,\n        borderColor: colors.backgroundSecondary,\n        minHeight: isMobile ? 280 : 380, // Smaller height for mobile web\n    },\n    gridContainer: {\n        // marginHorizontal removed - FlatList with justifyContent: 'space-between' handles spacing\n        minHeight: isMobile ? 180 : 250,\n    },\n    header: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        backgroundColor: '#FAFAFA',\n    },\n    headerRight: {\n        alignItems: 'center',\n        gap: 8,\n    },\n    moreButton: {\n        padding: 4,\n    },\n    userInfo: {\n        alignItems: 'center',\n        gap: 12,\n        flex: 1,\n    },\n    avatar: {\n        width: isMobile ? 36 : 44,\n        height: isMobile ? 36 : 44,\n        borderRadius: isMobile ? 18 : 22,\n        backgroundColor: colors.backgroundTertiary,\n        opacity: 0.8,\n    },\n    avatarPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: colors.textTertiary,\n    },\n    userTextContainer: {\n        gap: 2,\n        flex: 1,\n    },\n    userName: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '700',\n        color: colors.textSecondary,\n    },\n    timestamp: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textTertiary,\n    },\n    completedBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.success,\n        paddingHorizontal: isMobile ? 8 : 12,\n        paddingVertical: isMobile ? 3 : 6,\n        borderRadius: isMobile ? 16 : 20,\n        gap: isMobile ? 4 : 6,\n        opacity: 0.9,\n    },\n    completedBadgeText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    cardContent: {\n        flex: 1,\n        backgroundColor: '#F5F5F5',\n    },\n    contentContainer: {\n        padding: isMobile ? 16 : 24,\n        flex: 1,\n        justifyContent: 'center',\n        gap: isMobile ? 14 : 24,\n    },\n    contentContainerGrid: {\n        padding: isMobile ? 12 : 16,\n    },\n    routeContainer: {\n        gap: 4,\n        alignItems: 'center',\n        opacity: 0.7,\n    },\n    locationPoint: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 8,\n    },\n    dot: {\n        width: 12,\n        height: 12,\n        borderRadius: 6,\n    },\n    dotInactive: {\n        backgroundColor: colors.textTertiary,\n    },\n    locationText: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n    },\n    textInactive: {\n        color: colors.textTertiary,\n    },\n    routeLine: {\n        height: 16,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    dashedLine: {\n        width: 1,\n        height: '100%',\n    },\n    lineInactive: {\n        backgroundColor: colors.textTertiary,\n    },\n    completionMessage: {\n        marginTop: isMobile ? 10 : 16,\n        padding: isMobile ? 10 : 12,\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 6 : 8,\n        alignItems: 'center',\n    },\n    completionText: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        color: colors.success,\n        fontWeight: '600',\n        textAlign: 'center',\n    },\n    actionsBar: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderTopWidth: 1,\n        borderTopColor: colors.backgroundSecondary,\n        backgroundColor: '#FAFAFA',\n    },\n    actionsLeft: {\n        alignItems: 'center',\n    },\n    actionButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n    },\n    actionCount: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    likedCount: {\n        color: colors.error,\n    },\n});\n\nexport default React.memo(RideCompletedCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/RideOfferedCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":2,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[93,105],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'displayTitle' is assigned a value but never used.","line":32,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { FontSizes } from '../../../globals/constants';\nimport { BaseCardProps } from './types';\nimport { isMobileWeb } from '../../../globals/responsive';\n\nconst RideOfferedCard: React.FC<BaseCardProps> = ({\n    item,\n    cardWidth,\n    isGrid,\n    onPress,\n    onProfilePress,\n    onLike,\n    onComment,\n    onBookmark,\n    onShare,\n    onMorePress,\n    onQuickMessage,\n    onClosePost,\n    isLiked,\n    isBookmarked,\n    likesCount,\n    commentsCount,\n    formattedTime\n}) => {\n    const { t, i18n } = useTranslation();\n    const isRTL = i18n.language === 'he';\n\n    const displayTitle = item.title === 'post.noTitle' ? t('post.noTitle') : item.title;\n    const displayName = item.user.name === 'common.unknownUser' ? t('common.unknownUser') : item.user.name;\n\n    // Use locations from item or fallback\n    const locations = {\n        from: item.from || '',\n        to: item.to || ''\n    };\n\n    return (\n        <View style={[\n            styles.container,\n            isGrid && styles.gridContainer,\n            { width: cardWidth }\n        ]}>\n            {/* Header */}\n            <View style={[styles.header, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <TouchableOpacity\n                    style={[styles.userInfo, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}\n                    onPress={onProfilePress}\n                >\n                    {item.user.avatar ? (\n                        <Image source={{ uri: item.user.avatar }} style={styles.avatar} />\n                    ) : (\n                        <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                            <Ionicons name=\"person\" size={20} color={colors.white} />\n                        </View>\n                    )}\n                    <View style={[styles.userTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                        <Text style={[styles.userName, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {displayName}\n                        </Text>\n                        <Text style={[styles.timestamp, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {formattedTime}\n                        </Text>\n                    </View>\n                </TouchableOpacity>\n\n                <View style={[styles.headerRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <View style={styles.rideBadge}>\n                        <Ionicons name=\"car-sport\" size={16} color={colors.white} />\n                        <Text style={styles.rideBadgeText}>{t('rides.offered')}</Text>\n                    </View>\n\n                    <TouchableOpacity\n                        onPress={(e) => onMorePress && onMorePress({ x: e.nativeEvent.pageX, y: e.nativeEvent.pageY })}\n                        style={styles.moreButton}\n                    >\n                        <Ionicons name=\"ellipsis-horizontal\" size={20} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            {/* Main Content */}\n            <TouchableOpacity onPress={onPress} activeOpacity={0.95} style={styles.cardContent}>\n                <View style={[styles.contentContainer, isGrid && styles.contentContainerGrid]}>\n                    {/* Route Visualization */}\n                    <View style={styles.routeContainer}>\n                        <View style={styles.locationPoint}>\n                            <View style={styles.startDot} />\n                            <View style={[styles.locationTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                                <Text style={styles.locationLabel}>{t('rides.from')}</Text>\n                                <Text style={styles.locationText} numberOfLines={1}>\n                                    {locations.from || t('rides.origin')}\n                                </Text>\n                            </View>\n                        </View>\n\n                        <View style={styles.routeLine}>\n                            <View style={styles.dashedLine} />\n                            <Ionicons name=\"arrow-down\" size={isMobile ? 16 : 20} color={colors.primary} />\n                        </View>\n\n                        <View style={styles.locationPoint}>\n                            <View style={styles.endDot} />\n                            <View style={[styles.locationTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                                <Text style={styles.locationLabel}>{t('rides.to')}</Text>\n                                <Text style={styles.locationText} numberOfLines={1}>\n                                    {locations.to || t('rides.destination')}\n                                </Text>\n                            </View>\n                        </View>\n                    </View>\n\n                    {/* Ride Details - Always visible, responsive layout */}\n                    <View style={[\n                        styles.detailsContainer,\n                        isGrid && styles.detailsContainerGrid,\n                        { flexDirection: isRTL ? 'row-reverse' : 'row' }\n                    ]}>\n                        {item.seats && (\n                            <View style={[styles.detailCard, isGrid && styles.detailCardGrid]}>\n                                <Ionicons name=\"people\" size={isMobile ? (isGrid ? 14 : 16) : (isGrid ? 16 : 20)} color={colors.primary} />\n                                <Text style={[styles.detailValue, isGrid && styles.detailValueGrid]}>{item.seats}</Text>\n                                {!isGrid && <Text style={styles.detailLabel}>{t('rides.seats')}</Text>}\n                            </View>\n                        )}\n\n                        <View style={[styles.detailCard, isGrid && styles.detailCardGrid]}>\n                            <Ionicons\n                                name={item.price && item.price > 0 ? \"cash-outline\" : \"gift-outline\"}\n                                size={isMobile ? (isGrid ? 14 : 18) : (isGrid ? 16 : 24)}\n                                color={item.price && item.price > 0 ? colors.textPrimary : colors.success}\n                            />\n                            <Text style={[\n                                styles.detailValue,\n                                isGrid && styles.detailValueGrid,\n                                item.price && item.price > 0 ? { color: colors.textPrimary } : { color: colors.success }\n                            ]}>\n                                {item.price && item.price > 0 ? `â‚ª${item.price}` : t('rides.free')}\n                            </Text>\n                            {!isGrid && (\n                                <Text style={styles.detailLabel}>\n                                    {item.price && item.price > 0 ? t('rides.fuelShare') : t('rides.noCharge')}\n                                </Text>\n                            )}\n                        </View>\n\n                        {(item.time || item.date) && (\n                            <View style={[styles.detailCard, isGrid && styles.detailCardGrid]}>\n                                <Ionicons name=\"time\" size={isMobile ? (isGrid ? 14 : 16) : (isGrid ? 16 : 20)} color={colors.info} />\n                                <Text style={[styles.detailValue, isGrid && styles.detailValueGrid]}>\n                                    {item.time} {item.date && `â€¢ ${item.date}`}\n                                </Text>\n                                {!isGrid && <Text style={styles.detailLabel}>{t('rides.departure')}</Text>}\n                            </View>\n                        )}\n                    </View>\n                </View>\n            </TouchableOpacity>\n\n            {/* Actions Bar */}\n            <View style={[styles.actionsBar, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <View style={[styles.actionsLeft, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onLike}\n                    >\n                        <Ionicons\n                            name={isLiked ? \"heart\" : \"heart-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isLiked ? colors.error : colors.textSecondary}\n                        />\n                        {likesCount > 0 && (\n                            <Text style={[styles.actionCount, isLiked && styles.likedCount]}>\n                                {likesCount}\n                            </Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onComment}\n                    >\n                        <Ionicons name=\"chatbubble-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                        {commentsCount > 0 && (\n                            <Text style={styles.actionCount}>{commentsCount}</Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity style={styles.actionButton} onPress={onShare}>\n                        <Ionicons name=\"share-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n\n                <View style={[styles.actionsRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    {onQuickMessage && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onQuickMessage}\n                        >\n                            <Ionicons name=\"chatbubble-ellipses\" size={isMobile ? 20 : 24} color={colors.primary} />\n                        </TouchableOpacity>\n                    )}\n                    {onClosePost && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onClosePost}\n                        >\n                            <Ionicons name=\"checkmark-circle-outline\" size={isMobile ? 20 : 24} color={colors.success} />\n                        </TouchableOpacity>\n                    )}\n                    <TouchableOpacity style={styles.actionButton} onPress={onBookmark}>\n                        <Ionicons\n                            name={isBookmarked ? \"bookmark\" : \"bookmark-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isBookmarked ? colors.primary : colors.textSecondary}\n                        />\n                    </TouchableOpacity>\n                </View>\n            </View>\n        </View>\n    );\n};\n\nconst isMobile = isMobileWeb();\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 12 : 16,\n        marginVertical: isMobile ? 6 : 8,\n        marginHorizontal: 0, // Padding is handled by parent listContent\n        overflow: 'hidden',\n        minHeight: isMobile ? 280 : 380, // Smaller height for mobile web\n        ...Platform.select({\n            ios: {\n                shadowColor: colors.black,\n                shadowOffset: { width: 0, height: 4 },\n                shadowOpacity: 0.12,\n                shadowRadius: 8,\n            },\n            android: {\n                elevation: 4,\n            },\n            web: {\n                boxShadow: '0 4px 16px rgba(0, 0, 0, 0.1)'\n            }\n        }),\n    },\n    gridContainer: {\n        // marginHorizontal removed - FlatList with justifyContent: 'space-between' handles spacing\n        minHeight: isMobile ? 180 : 250,\n    },\n    header: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n    },\n    headerRight: {\n        alignItems: 'center',\n        gap: 8,\n    },\n    moreButton: {\n        padding: 4,\n    },\n    userInfo: {\n        alignItems: 'center',\n        gap: 12,\n        flex: 1,\n    },\n    avatar: {\n        width: isMobile ? 36 : 44,\n        height: isMobile ? 36 : 44,\n        borderRadius: isMobile ? 18 : 22,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    avatarPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n    },\n    userTextContainer: {\n        gap: 2,\n        flex: 1,\n    },\n    userName: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    timestamp: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n    },\n    rideBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.info,\n        paddingHorizontal: isMobile ? 8 : 12,\n        paddingVertical: isMobile ? 3 : 6,\n        borderRadius: isMobile ? 16 : 20,\n        gap: isMobile ? 4 : 6,\n    },\n    rideBadgeText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    cardContent: {\n        flex: 1,\n        backgroundColor: '#E3F2FD',\n    },\n    contentContainer: {\n        padding: isMobile ? 16 : 24,\n        flex: 1,\n        justifyContent: 'center',\n        gap: isMobile ? 14 : 24,\n    },\n    contentContainerGrid: {\n        padding: isMobile ? 12 : 16,\n    },\n    routeContainer: {\n        gap: 8,\n    },\n    locationPoint: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 12,\n    },\n    startDot: {\n        width: 16,\n        height: 16,\n        borderRadius: 8,\n        backgroundColor: colors.success,\n        borderWidth: 3,\n        borderColor: colors.white,\n    },\n    endDot: {\n        width: 16,\n        height: 16,\n        borderRadius: 8,\n        backgroundColor: colors.error,\n        borderWidth: 3,\n        borderColor: colors.white,\n    },\n    locationTextContainer: {\n        flex: 1,\n        gap: 2,\n    },\n    locationLabel: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n        fontWeight: '500',\n    },\n    locationText: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.medium,\n        color: colors.textPrimary,\n        fontWeight: '700',\n    },\n    routeLine: {\n        alignItems: 'center',\n        paddingVertical: 4,\n        marginLeft: 7,\n    },\n    dashedLine: {\n        width: 2,\n        height: 32, // Increase line height for more visual space\n        backgroundColor: colors.primary,\n        opacity: 0.3,\n    },\n    detailsContainer: {\n        gap: 12,\n        justifyContent: 'space-around',\n    },\n    detailsContainerGrid: {\n        gap: 8,\n        flexWrap: 'wrap',\n        justifyContent: 'center',\n    },\n    detailCard: {\n        flex: 1,\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 10 : 12,\n        padding: isMobile ? 10 : 16,\n        alignItems: 'center',\n        gap: isMobile ? 4 : 6,\n        minWidth: isMobile ? 70 : 90,\n        ...Platform.select({\n            ios: {\n                shadowColor: colors.black,\n                shadowOffset: { width: 0, height: 2 },\n                shadowOpacity: 0.08,\n                shadowRadius: 4,\n            },\n            android: {\n                elevation: 2,\n            },\n            web: {\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.06)'\n            }\n        }),\n    },\n    detailCardGrid: {\n        padding: isMobile ? 6 : 8,\n        minWidth: isMobile ? 50 : 60,\n        gap: isMobile ? 3 : 4,\n        flex: 0, // Don't force flex 1 in grid\n    },\n    detailValue: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.medium,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    detailValueGrid: {\n        fontSize: FontSizes.small,\n    },\n    detailLabel: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    actionsBar: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderTopWidth: 1,\n        borderTopColor: colors.backgroundSecondary,\n    },\n    actionsLeft: {\n        alignItems: 'center',\n    },\n    actionButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n    },\n    actionCount: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    likedCount: {\n        color: colors.error,\n    },\n    actionsRight: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n});\n\nexport default React.memo(RideOfferedCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/TaskAssignmentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":2,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[93,105],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onShare' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":121,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5679,5682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5679,5682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { FontSizes } from '../../../globals/constants';\nimport { BaseCardProps } from './types';\nimport { isMobileWeb } from '../../../globals/responsive';\n\nconst TaskAssignmentCard: React.FC<BaseCardProps> = ({\n    item,\n    cardWidth,\n    isGrid,\n    onPress,\n    onProfilePress,\n    onLike,\n    onComment,\n    onBookmark,\n    onShare,\n    onMorePress,\n    onQuickMessage,\n    onClosePost,\n    isLiked,\n    isBookmarked,\n    likesCount,\n    commentsCount,\n    formattedTime\n}) => {\n    const { t, i18n } = useTranslation();\n    const isRTL = i18n.language === 'he';\n    const displayName = item.user.name === 'common.unknownUser' ? t('common.unknownUser') : item.user.name;\n\n    return (\n        <View style={[\n            styles.container,\n            isGrid && styles.gridContainer,\n            { width: cardWidth }\n        ]}>\n            {/* Header */}\n            <View style={[styles.header, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <TouchableOpacity\n                    style={[styles.userInfo, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}\n                    onPress={onProfilePress}\n                >\n                    {item.user.avatar ? (\n                        <Image source={{ uri: item.user.avatar }} style={styles.avatar} />\n                    ) : (\n                        <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                            <Ionicons name=\"person\" size={20} color={colors.white} />\n                        </View>\n                    )}\n                    <View style={[styles.userTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                        <Text style={[styles.userName, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {displayName}\n                        </Text>\n                        <Text style={[styles.timestamp, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {formattedTime}\n                        </Text>\n                    </View>\n                </TouchableOpacity>\n\n                <View style={[styles.headerRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <View style={styles.taskBadge}>\n                        <Ionicons name=\"clipboard\" size={16} color={colors.white} />\n                        <Text style={styles.taskBadgeText}>\n                            {item.taskData?.status === 'open' || item.taskData?.status === 'in_progress' \n                                ? t('tasks.status.open') \n                                : t('tasks.status.new')}\n                        </Text>\n                    </View>\n\n                    <TouchableOpacity\n                        onPress={(e) => onMorePress && onMorePress({ x: e.nativeEvent.pageX, y: e.nativeEvent.pageY })}\n                        style={styles.moreButton}\n                    >\n                        <Ionicons name=\"ellipsis-horizontal\" size={20} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            {/* Main Content */}\n            <TouchableOpacity onPress={onPress} activeOpacity={0.95} style={styles.cardContent}>\n                <View style={[styles.contentContainer, isGrid && styles.contentContainerGrid]}>\n                    <View style={styles.iconContainer}>\n                        <Ionicons name=\"construct-outline\" size={isMobile ? 24 : 32} color={colors.primary} />\n                    </View>\n\n                    <View style={styles.textContainer}>\n                        <Text style={[styles.title, { textAlign: 'center' }]}>\n                            {t('tasks.status.new_for_you')}\n                        </Text>\n\n                        <Text style={[styles.description, { textAlign: 'center', fontWeight: 'bold', marginTop: 4 }]} numberOfLines={2}>\n                            {item.taskData?.title || item.title || t('post.noTitle')}\n                        </Text>\n\n                        {(item.description || item.taskData?.description) && (\n                            <Text style={[styles.description, { textAlign: 'center' }]} numberOfLines={3}>\n                                {item.taskData?.description || item.description}\n                            </Text>\n                        )}\n                    </View>\n\n                    {/* Action Button CTA */}\n                    {/* Task Details Section */}\n                    <View style={styles.detailsSection}>\n                        {/* Creator */}\n                        <View style={styles.detailRow}>\n                            <Ionicons name=\"person-outline\" size={isMobile ? 14 : 16} color={colors.textSecondary} />\n                            <Text style={styles.detailText}>\n                                {t('task.opened_by', '× ×•×¦×¨ ×¢\"×™')}: {item.user.name}\n                            </Text>\n                        </View>\n\n                        {/* Assignee */}\n                        <View style={styles.detailRow}>\n                            <Ionicons name=\"people-outline\" size={isMobile ? 14 : 16} color={colors.textSecondary} />\n                            <Text style={styles.detailText}>\n                                {t('task.performer', '××‘×¦×¢')}: {\n                                    item.taskData?.assignees && item.taskData.assignees.length > 0\n                                        ? item.taskData.assignees.map((a: any) => a.name).join(', ')\n                                        : t('task.unassigned', '×˜×¨× ×©×•×‘×¥')\n                                }\n                            </Text>\n                        </View>\n\n                        {/* Duration */}\n                        {item.taskData?.estimated_hours ? (\n                            <View style={styles.detailRow}>\n                                <Ionicons name=\"time-outline\" size={isMobile ? 14 : 16} color={colors.textSecondary} />\n                                <Text style={styles.detailText}>\n                                    {t('task.duration', '××©×š ×–××Ÿ')}: {item.taskData.estimated_hours} {t('common.hours', '×©×¢×•×ª')}\n                                </Text>\n                            </View>\n                        ) : null}\n                    </View>\n                </View>\n            </TouchableOpacity>\n\n            {/* Actions Bar */}\n            <View style={[styles.actionsBar, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <View style={[styles.actionsLeft, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onLike}\n                    >\n                        <Ionicons\n                            name={isLiked ? \"heart\" : \"heart-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isLiked ? colors.error : colors.textSecondary}\n                        />\n                        {likesCount > 0 && (\n                            <Text style={[styles.actionCount, isLiked && styles.likedCount]}>\n                                {likesCount}\n                            </Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onComment}\n                    >\n                        <Ionicons name=\"chatbubble-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                        {commentsCount > 0 && (\n                            <Text style={styles.actionCount}>{commentsCount}</Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n\n                <View style={[styles.actionsRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    {onQuickMessage && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onQuickMessage}\n                        >\n                            <Ionicons name=\"chatbubble-ellipses\" size={isMobile ? 20 : 24} color={colors.primary} />\n                        </TouchableOpacity>\n                    )}\n                    {onClosePost && (\n                        <TouchableOpacity\n                            style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 6 : 8), marginLeft: isRTL ? (isMobile ? 6 : 8) : 0 }]}\n                            onPress={onClosePost}\n                        >\n                            <Ionicons name=\"checkmark-circle-outline\" size={isMobile ? 20 : 24} color={colors.success} />\n                        </TouchableOpacity>\n                    )}\n                    <TouchableOpacity style={styles.actionButton} onPress={onBookmark}>\n                        <Ionicons\n                            name={isBookmarked ? \"bookmark\" : \"bookmark-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isBookmarked ? colors.primary : colors.textSecondary}\n                        />\n                    </TouchableOpacity>\n                </View>\n            </View>\n        </View>\n    );\n};\n\nconst isMobile = isMobileWeb();\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 12 : 16,\n        marginVertical: isMobile ? 6 : 8,\n        marginHorizontal: 0, // Padding is handled by parent listContent\n        overflow: 'hidden',\n        minHeight: isMobile ? 280 : 380, // Smaller height for mobile web\n        ...Platform.select({\n            ios: {\n                shadowColor: colors.black,\n                shadowOffset: { width: 0, height: 4 },\n                shadowOpacity: 0.12,\n                shadowRadius: 8,\n            },\n            android: {\n                elevation: 4,\n            },\n            web: {\n                boxShadow: '0 4px 16px rgba(0, 0, 0, 0.1)'\n            }\n        }),\n    },\n    gridContainer: {\n        // marginHorizontal removed - FlatList with justifyContent: 'space-between' handles spacing\n        minHeight: isMobile ? 180 : 250,\n    },\n    header: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n    },\n    headerRight: {\n        alignItems: 'center',\n        gap: 8,\n    },\n    moreButton: {\n        padding: 4,\n    },\n    userInfo: {\n        alignItems: 'center',\n        gap: 12,\n        flex: 1,\n    },\n    avatar: {\n        width: isMobile ? 36 : 44,\n        height: isMobile ? 36 : 44,\n        borderRadius: isMobile ? 18 : 22,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    avatarPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n    },\n    userTextContainer: {\n        gap: 2,\n        flex: 1,\n    },\n    userName: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    timestamp: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n    },\n    taskBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n        paddingHorizontal: isMobile ? 8 : 12,\n        paddingVertical: isMobile ? 3 : 6,\n        borderRadius: isMobile ? 16 : 20,\n        gap: isMobile ? 4 : 6,\n    },\n    taskBadgeText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    cardContent: {\n        flex: 1,\n        backgroundColor: '#F3F4F6',\n    },\n    contentContainer: {\n        padding: isMobile ? 16 : 24,\n        alignItems: 'center',\n        justifyContent: 'center', // Center content vertically\n        gap: isMobile ? 10 : 16,\n        flex: 1, // Take full height\n    },\n    contentContainerGrid: {\n        padding: isMobile ? 12 : 16,\n    },\n    iconContainer: {\n        width: isMobile ? 60 : 80,\n        height: isMobile ? 60 : 80,\n        borderRadius: isMobile ? 30 : 40,\n        backgroundColor: '#E6E8EB',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    textContainer: {\n        gap: 8,\n        alignItems: 'center',\n    },\n    title: {\n        fontSize: isMobile ? 18 : 22,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    description: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        color: colors.textSecondary,\n        lineHeight: isMobile ? 16 : 22,\n    },\n    ctaButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n        paddingHorizontal: 24,\n        paddingVertical: 12,\n        borderRadius: 24,\n        gap: 8,\n        marginTop: 16,\n    },\n    ctaText: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    actionsBar: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderTopWidth: 1,\n        borderTopColor: colors.backgroundSecondary,\n        backgroundColor: colors.white,\n    },\n    actionsLeft: {\n        alignItems: 'center',\n    },\n    actionButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n    },\n    actionCount: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    likedCount: {\n        color: colors.error,\n    },\n    actionsRight: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    detailsSection: {\n        width: '100%',\n        marginTop: isMobile ? 10 : 16,\n        paddingTop: isMobile ? 10 : 16,\n        borderTopWidth: 1,\n        borderTopColor: colors.border,\n        gap: isMobile ? 6 : 8,\n    },\n    detailRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: isMobile ? 6 : 8,\n    },\n    detailText: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        color: colors.textSecondary,\n    }\n});\n\nexport default React.memo(TaskAssignmentCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/TaskCompletionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":2,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[93,105],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onBookmark' is defined but never used.","line":18,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onShare' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isBookmarked' is defined but never used.","line":22,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":17}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet, Platform, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { FontSizes } from '../../../globals/constants';\nimport { BaseCardProps } from './types';\nimport { isMobileWeb } from '../../../globals/responsive';\n\nconst TaskCompletionCard: React.FC<BaseCardProps> = ({\n    item,\n    cardWidth,\n    isGrid,\n    onPress,\n    onProfilePress,\n    onLike,\n    onComment,\n    onBookmark,\n    onShare,\n    onMorePress,\n    isLiked,\n    isBookmarked,\n    likesCount,\n    commentsCount,\n    formattedTime\n}) => {\n    const { t, i18n } = useTranslation();\n    const isRTL = i18n.language === 'he';\n    const displayName = item.user.name === 'common.unknownUser' ? t('common.unknownUser') : item.user.name;\n\n    return (\n        <View style={[\n            styles.container,\n            isGrid && styles.gridContainer,\n            { width: cardWidth }\n        ]}>\n            {/* Header */}\n            <View style={[styles.header, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <TouchableOpacity\n                    style={[styles.userInfo, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}\n                    onPress={onProfilePress}\n                >\n                    {item.user.avatar ? (\n                        <Image source={{ uri: item.user.avatar }} style={styles.avatar} />\n                    ) : (\n                        <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                            <Ionicons name=\"person\" size={20} color={colors.white} />\n                        </View>\n                    )}\n                    <View style={[styles.userTextContainer, { alignItems: isRTL ? 'flex-end' : 'flex-start' }]}>\n                        <Text style={[styles.userName, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {displayName}\n                        </Text>\n                        <Text style={[styles.timestamp, { textAlign: isRTL ? 'right' : 'left' }]}>\n                            {formattedTime}\n                        </Text>\n                    </View>\n                </TouchableOpacity>\n\n                <View style={[styles.headerRight, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <View style={styles.completedTaskBadge}>\n                        <Ionicons name=\"checkmark-done\" size={16} color={colors.white} />\n                        <Text style={styles.completedTaskBadgeText}>{t('tasks.status.completed')}</Text>\n                    </View>\n\n                    <TouchableOpacity\n                        onPress={(e) => onMorePress && onMorePress({ x: e.nativeEvent.pageX, y: e.nativeEvent.pageY })}\n                        style={styles.moreButton}\n                    >\n                        <Ionicons name=\"ellipsis-horizontal\" size={20} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            {/* Main Content */}\n            <TouchableOpacity onPress={onPress} activeOpacity={0.95} style={styles.cardContent}>\n                <View style={[styles.contentContainer, isGrid && styles.contentContainerGrid]}>\n                    <View style={styles.celebrationContainer}>\n                        <Ionicons name=\"trophy\" size={isMobile ? 40 : 56} color={colors.warning} />\n                        <View style={styles.starsContainer}>\n                            <Ionicons name=\"star\" size={isMobile ? 18 : 24} color={colors.warning} style={{ position: 'absolute', top: isMobile ? -8 : -10, left: isMobile ? -22 : -30, transform: [{ rotate: '-20deg' }] }} />\n                            <Ionicons name=\"star\" size={isMobile ? 24 : 32} color={colors.warning} style={{ position: 'absolute', top: isMobile ? -18 : -25, right: isMobile ? -18 : -25, transform: [{ rotate: '15deg' }] }} />\n                        </View>\n                    </View>\n\n                    <View style={styles.textContainer}>\n                        <Text style={[styles.title, { textAlign: 'center' }]}>\n                            {t('tasks.task_completed')}\n                        </Text>\n\n                        <View style={styles.taskReference}>\n                            <Text style={[styles.taskReferenceText, { textAlign: 'center' }]} numberOfLines={2}>\n                                {item.taskData?.title || item.title || t('post.noTitle')}\n                            </Text>\n                        </View>\n                    </View>\n                </View>\n            </TouchableOpacity>\n\n            {/* Actions Bar */}\n            <View style={[styles.actionsBar, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                <View style={[styles.actionsLeft, { flexDirection: isRTL ? 'row-reverse' : 'row' }]}>\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onLike}\n                    >\n                        <Ionicons\n                            name={isLiked ? \"heart\" : \"heart-outline\"}\n                            size={isMobile ? 20 : 24}\n                            color={isLiked ? colors.error : colors.textSecondary}\n                        />\n                        {likesCount > 0 && (\n                            <Text style={[styles.actionCount, isLiked && styles.likedCount]}>\n                                {likesCount}\n                            </Text>\n                        )}\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[styles.actionButton, { marginRight: isRTL ? 0 : (isMobile ? 12 : 16), marginLeft: isRTL ? (isMobile ? 12 : 16) : 0 }]}\n                        onPress={onComment}\n                    >\n                        <Ionicons name=\"chatbubble-outline\" size={isMobile ? 20 : 24} color={colors.textSecondary} />\n                        {commentsCount > 0 && (\n                            <Text style={styles.actionCount}>{commentsCount}</Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n            </View>\n        </View>\n    );\n};\n\nconst isMobile = isMobileWeb();\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.white,\n        borderRadius: isMobile ? 12 : 16,\n        marginVertical: isMobile ? 6 : 8,\n        marginHorizontal: 0, // Padding is handled by parent listContent\n        overflow: 'hidden',\n        minHeight: isMobile ? 280 : 380, // Smaller height for mobile web\n        borderWidth: isMobile ? 1 : 2,\n        borderColor: '#E8F5E9',\n        ...Platform.select({\n            ios: {\n                shadowColor: colors.success,\n                shadowOffset: { width: 0, height: 4 },\n                shadowOpacity: 0.1,\n                shadowRadius: 8,\n            },\n            android: {\n                elevation: 4,\n            },\n            web: {\n                boxShadow: '0 4px 16px rgba(0, 200, 83, 0.1)'\n            }\n        }),\n    },\n    gridContainer: {\n        // marginHorizontal removed - FlatList with justifyContent: 'space-between' handles spacing\n        minHeight: isMobile ? 180 : 250,\n    },\n    header: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        backgroundColor: '#FAFAFA',\n    },\n    headerRight: {\n        alignItems: 'center',\n        gap: 8,\n    },\n    moreButton: {\n        padding: 4,\n    },\n    userInfo: {\n        alignItems: 'center',\n        gap: 12,\n        flex: 1,\n    },\n    avatar: {\n        width: isMobile ? 36 : 44,\n        height: isMobile ? 36 : 44,\n        borderRadius: isMobile ? 18 : 22,\n        backgroundColor: colors.backgroundTertiary,\n    },\n    avatarPlaceholder: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: colors.primary,\n    },\n    userTextContainer: {\n        gap: 2,\n        flex: 1,\n    },\n    userName: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    timestamp: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        color: colors.textSecondary,\n    },\n    completedTaskBadge: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.success,\n        paddingHorizontal: isMobile ? 8 : 12,\n        paddingVertical: isMobile ? 3 : 6,\n        borderRadius: isMobile ? 16 : 20,\n        gap: isMobile ? 4 : 6,\n    },\n    completedTaskBadgeText: {\n        fontSize: isMobile ? 10 : FontSizes.small,\n        fontWeight: '600',\n        color: colors.white,\n    },\n    cardContent: {\n        flex: 1,\n        backgroundColor: '#F1F8E9',\n    },\n    contentContainer: {\n        padding: isMobile ? 20 : 32,\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: isMobile ? 14 : 24,\n        flex: 1,\n    },\n    contentContainerGrid: {\n        padding: isMobile ? 12 : 16,\n    },\n    celebrationContainer: {\n        position: 'relative',\n        marginBottom: 10,\n    },\n    starsContainer: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    textContainer: {\n        gap: 16,\n        alignItems: 'center',\n        width: '100%',\n    },\n    title: {\n        fontSize: isMobile ? 18 : 24,\n        fontWeight: '700',\n        color: colors.success,\n    },\n    taskReference: {\n        backgroundColor: 'rgba(255, 255, 255, 0.8)',\n        padding: isMobile ? 12 : 16,\n        borderRadius: isMobile ? 10 : 12,\n        width: '100%',\n        borderWidth: 1,\n        borderColor: 'rgba(0, 200, 83, 0.1)',\n    },\n    taskReferenceText: {\n        fontSize: isMobile ? FontSizes.small : 16,\n        color: colors.textPrimary,\n        fontWeight: '500',\n        lineHeight: isMobile ? 18 : 24,\n    },\n    actionsBar: {\n        padding: isMobile ? 10 : 16,\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderTopWidth: 1,\n        borderTopColor: colors.backgroundSecondary,\n        backgroundColor: colors.white,\n    },\n    actionsLeft: {\n        alignItems: 'center',\n    },\n    actionButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 6,\n    },\n    actionCount: {\n        fontSize: isMobile ? FontSizes.small : FontSizes.body,\n        fontWeight: '600',\n        color: colors.textSecondary,\n    },\n    likedCount: {\n        color: colors.error,\n    },\n});\n\nexport default React.memo(TaskCompletionCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostCard/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/PostReelItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'View' is defined but never used.","line":3,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"View"},"fix":{"range":[76,81],"text":""},"desc":"Remove unused variable \"View\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2551,2554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2551,2554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'measure' is defined but never used.","line":75,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":78},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2566,2569],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2566,2569],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6833,6836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6833,6836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":277,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'styles' is assigned a value but never used.","line":414,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":414,"endColumn":13}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useMemo, useState } from 'react';\nimport {\n    View,\n    StyleSheet,\n    Dimensions,\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { FeedItem } from '../../types/feed';\nimport { usePostInteractions } from '../../hooks/usePostInteractions';\nimport { useProfileNavigation } from '../../hooks/useProfileNavigation';\nimport { useUser } from '../../stores/userStore';\nimport DonationItemCard from './PostCard/DonationItemCard';\nimport RegularItemCard from './PostCard/RegularItemCard';\nimport ItemDeliveredCard from './PostCard/ItemDeliveredCard';\nimport RideOfferedCard from './PostCard/RideOfferedCard';\nimport RideCompletedCard from './PostCard/RideCompletedCard';\nimport TaskAssignmentCard from './PostCard/TaskAssignmentCard';\nimport TaskCompletionCard from './PostCard/TaskCompletionCard';\nimport QuickMessageModal from './QuickMessageModal';\n\nconst { width } = Dimensions.get('window');\n\ninterface PostReelItemProps {\n    item: FeedItem;\n    cardWidth?: number;\n    numColumns?: number;\n    onPress?: (item: FeedItem) => void;\n    onCommentPress?: (item: FeedItem) => void;\n    onMorePress?: (item: FeedItem, measurements?: { x: number, y: number }) => void; // Added prop\n    onPostClosed?: (postId: string) => void; // Callback when post is successfully closed\n}\n\nconst PostReelItem: React.FC<PostReelItemProps> = ({\n    item,\n    cardWidth = width,\n    numColumns = 1,\n    onPress,\n    onCommentPress,\n    onMorePress,\n    onPostClosed\n}) => {\n    const {\n        isLiked,\n        likesCount,\n        commentsCount,\n        isBookmarked,\n        handleLike,\n        handleBookmark,\n        handleShare\n    } = usePostInteractions(item);\n\n    const { navigateToProfile } = useProfileNavigation();\n    const { selectedUser } = useUser();\n    const { t } = useTranslation();\n    const [quickMessageModalVisible, setQuickMessageModalVisible] = useState(false);\n\n    // Determine layout mode\n    const isGrid = numColumns > 1;\n\n    // Common Handlers\n    const handleProfilePressInternal = useCallback(() => {\n        if (item.user && item.user.id) {\n            navigateToProfile(item.user.id, item.user.name || 'User');\n        }\n    }, [item.user, navigateToProfile]);\n\n    const handleItemPress = useCallback(() => {\n        if (onPress) onPress(item);\n    }, [onPress, item]);\n\n    const handleCommentPressInternal = useCallback(() => {\n        if (onCommentPress) onCommentPress(item);\n    }, [onCommentPress, item]);\n\n    const handleMorePressInternal = useCallback((itemOrMeasure?: any, measure?: any) => {\n        // Handle both (item) and (item, measure) signatures if cards call differently\n        // But since we control call sites, we expect cards to call onMorePress(item, measure)?\n        // Wait, BaseCardProps says onMorePress: (measure) => void.\n        // So cards call onMorePress({x,y}).\n        // So this function receives measurements as first arg?\n        // No, PostReelItem renders cards. The cards receive `onMorePress` as a prop.\n        // `commonProps` passes user of `onMorePress: handleMorePressInternal`.\n        // So `handleMorePressInternal` is what the card calls.\n        // The card calls it like: `onMorePress(measurements)`.\n        const measurements = itemOrMeasure;\n        if (onMorePress) onMorePress(item, measurements);\n    }, [onMorePress, item]);\n\n    // Check if post is open (relevant for quick message feature)\n    const isPostOpen = useMemo(() => {\n        // Don't show quick message if user is viewing their own post\n        if (!item.user || !selectedUser || item.user.id === selectedUser.id) {\n            return false;\n        }\n\n        // Tasks: open or in_progress\n        if (item.subtype === 'task_assignment' || item.type === 'task_post') {\n            const taskStatus = item.taskData?.status;\n            // If no status, assume it's open (new tasks are usually open)\n            if (!taskStatus) return true;\n            return taskStatus === 'open' || taskStatus === 'in_progress';\n        }\n\n        // Rides: active or full (not completed or cancelled)\n        if (item.subtype === 'ride' || item.subtype === 'ride_offered') {\n            const rideStatus = item.status;\n            // If no status, assume it's active (new rides are usually active)\n            if (!rideStatus) return true;\n            return rideStatus === 'active' || rideStatus === 'full';\n        }\n\n        // Items: always open unless explicitly closed by owner\n        // Items are considered open until owner marks them as closed (delivered/completed/expired)\n        // Check both subtype === 'item' OR if item has a price (matching dispatch logic)\n        // Also check if item has itemId (meaning it's an item post) or category (another indicator)\n        if (item.subtype === 'item' || item.price !== undefined || item.itemId || item.category) {\n            const itemStatus = item.status;\n            // If status is explicitly closed, don't show quick message\n            if (itemStatus && ['delivered', 'completed', 'expired', 'cancelled'].includes(itemStatus)) {\n                return false;\n            }\n            // Otherwise, always show (even if no status - new items are open)\n            return true;\n        }\n\n        // Donations: active (not delivered, completed, or expired)\n        if (item.subtype === 'donation') {\n            const donationStatus = item.status;\n            // If no status, assume it's active (new donations are usually active)\n            if (!donationStatus) return true;\n            return donationStatus === 'active';\n        }\n\n        return false;\n    }, [item, selectedUser]);\n\n    // Determine post type for quick message modal\n    const getPostType = (): 'item' | 'ride' | 'task' | 'donation' => {\n        if (item.subtype === 'task_assignment' || item.type === 'task_post') {\n            return 'task';\n        }\n        if (item.subtype === 'ride') {\n            return 'ride';\n        }\n        if (item.subtype === 'donation') {\n            return 'donation';\n        }\n        return 'item';\n    };\n\n    const handleQuickMessage = useCallback(() => {\n        if (isPostOpen && item.user && item.user.id) {\n            setQuickMessageModalVisible(true);\n        }\n    }, [isPostOpen, item.user]);\n\n    // Check if current user is the post owner\n    const isPostOwner = useMemo(() => {\n        return selectedUser && item.user && selectedUser.id === item.user.id;\n    }, [selectedUser, item.user]);\n\n    // Handle closing post (marking as completed/delivered)\n    const handleClosePost = useCallback(async () => {\n        if (!selectedUser || !isPostOwner) return;\n\n        try {\n            const { apiService } = await import('../../utils/apiService');\n            const { toastService } = await import('../../utils/toastService');\n\n            let updateResult: any = { success: false };\n\n            // Helper to validate UUID format (for tasks and rides)\n            const isValidUUID = (id: string | undefined): boolean => {\n                if (!id) return false;\n                const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n                return uuidRegex.test(id);\n            };\n\n            // Helper to validate item ID (can be UUID or TEXT)\n            const isValidItemId = (id: string | undefined): boolean => {\n                if (!id) return false;\n                // Items can have UUID or TEXT IDs, so just check it's not empty and not a timestamp\n                // Timestamps are usually 13 digits (milliseconds) or 10 digits (seconds)\n                const isTimestamp = /^\\d{10,13}$/.test(id);\n                return !isTimestamp && id.length > 0;\n            };\n\n            // Determine the appropriate status and endpoint based on post type\n            if (item.subtype === 'task_assignment' || item.type === 'task_post') {\n                // For tasks, mark as done\n                const taskId = item.taskId || item.taskData?.id;\n                if (taskId && isValidUUID(taskId)) {\n                    updateResult = await apiService.updateTask(taskId, { status: 'done' });\n                } else {\n                    console.warn('âŒ Invalid or missing task ID:', taskId, 'Item:', item);\n                    updateResult = { success: false, error: 'Task ID not found or invalid' };\n                }\n            } else if (item.subtype === 'ride' || item.subtype === 'ride_offered') {\n                // For rides, mark as completed\n                const rideId = item.rideId;\n                if (rideId && isValidUUID(rideId)) {\n                    updateResult = await apiService.updateRide(rideId, { status: 'completed' });\n                } else {\n                    console.warn('âŒ Invalid or missing ride ID:', rideId, 'Item:', item);\n                    updateResult = { success: false, error: 'Ride ID not found or invalid' };\n                }\n            } else if (item.subtype === 'item' || item.subtype === 'donation') {\n                // For items/donations, mark as delivered\n                // CRITICAL: item.itemId should come from item_data.id (from JOIN) or metadata.item_id\n                // If both are missing or are timestamps, we can't update the item\n                const itemId = item.itemId;\n                \n                if (!itemId) {\n                    console.error('âŒ Cannot close post - item ID is missing:', {\n                        postId: item.id,\n                        subtype: item.subtype,\n                        fullItem: JSON.stringify(item, null, 2)\n                    });\n                    updateResult = { \n                        success: false, \n                        error: '×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ××ª ×”×¤×•×¡×˜ - ID ×©×œ ×”×¤×¨×™×˜ ×œ× × ××¦×. ×× × ×¨×¢× ×Ÿ ××ª ×”×¤×™×“ ×•× ×¡×” ×©×•×‘.' \n                    };\n                } else if (/^\\d{10,13}$/.test(itemId)) {\n                    // itemId is a timestamp - this means the post was created incorrectly\n                    // This happens when old posts have timestamp in item_id column\n                    console.error('âŒ Cannot close post - item ID is a timestamp (old post format):', {\n                        itemId,\n                        postId: item.id,\n                        subtype: item.subtype,\n                        message: 'This post was created before the fix. Please create a new item.'\n                    });\n                    updateResult = { \n                        success: false, \n                        error: '×œ× × ×™×ª×Ÿ ×œ×¡×’×•×¨ ××ª ×”×¤×•×¡×˜ - ×–×” ×¤×•×¡×˜ ×™×©×Ÿ ×©× ×•×¦×¨ ×œ×¤× ×™ ×”×ª×™×§×•×Ÿ. ×× × ×¦×•×¨ ×¤×¨×™×˜ ×—×“×©.' \n                    };\n                } else if (isValidItemId(itemId)) {\n                    console.log('âœ… Valid item ID, calling updateItem:', itemId);\n                    updateResult = await apiService.updateItem(itemId, { status: 'delivered' });\n                } else {\n                    console.warn('âŒ Invalid item ID format:', itemId);\n                    updateResult = { \n                        success: false, \n                        error: 'ID ×©×œ ×”×¤×¨×™×˜ ×œ× ×ª×§×™×Ÿ. ×× × ×¨×¢× ×Ÿ ××ª ×”×¤×™×“ ×•× ×¡×” ×©×•×‘.' \n                    };\n                }\n            }\n\n            if (updateResult?.success) {\n                toastService.showSuccess(t('post:closedSuccess', { defaultValue: '×”×¤×•×¡×˜ × ×¡×’×¨ ×‘×”×¦×œ×—×”' }));\n                // Immediately notify parent to update UI\n                if (onPostClosed) {\n                    onPostClosed(item.id);\n                }\n            } else {\n                toastService.showError(updateResult?.error || t('post:closeError', { defaultValue: '×©×’×™××” ×‘×¡×’×™×¨×ª ×”×¤×•×¡×˜' }));\n            }\n        } catch (error) {\n            console.error('âŒ Close post error:', error);\n            const { toastService } = await import('../../utils/toastService');\n            toastService.showError(t('post:closeError', { defaultValue: '×©×’×™××” ×‘×¡×’×™×¨×ª ×”×¤×•×¡×˜' }));\n        }\n    }, [selectedUser, isPostOwner, item, t, onPostClosed]);\n\n\n    // Format timestamp logic (reused)\n    const formattedTime = useMemo(() => {\n        try {\n            if (!item.timestamp) return '×¢×›×©×™×•';\n            const date = new Date(item.timestamp);\n            if (isNaN(date.getTime())) return '×¢×›×©×™×•';\n            const now = new Date();\n            const diff = now.getTime() - date.getTime();\n            if (diff < 60 * 1000) return '×¢×›×©×™×•';\n            if (diff < 60 * 60 * 1000) return `×œ×¤× ×™ ${Math.floor(diff / (60 * 1000))} ×“×§×•×ª`;\n            if (diff < 24 * 60 * 60 * 1000) return `×œ×¤× ×™ ${Math.floor(diff / (60 * 60 * 1000))} ×©×¢×•×ª`;\n            return date.toLocaleDateString('he-IL');\n        } catch (e) {\n            return '×¢×›×©×™×•';\n        }\n    }, [item.timestamp]);\n\n    // Props for child components\n    const commonProps = {\n        item,\n        cardWidth,\n        isGrid,\n        onPress: handleItemPress,\n        onProfilePress: handleProfilePressInternal,\n        onLike: handleLike,\n        onComment: handleCommentPressInternal,\n        onBookmark: handleBookmark,\n        onShare: handleShare,\n        onMorePress: handleMorePressInternal, // Pass down\n        onQuickMessage: isPostOpen ? handleQuickMessage : undefined,\n        onClosePost: isPostOwner ? handleClosePost : undefined,\n        isLiked,\n        isBookmarked,\n        likesCount,\n        commentsCount,\n        formattedTime\n    };\n\n    // --- Dispatcher Logic ---\n\n    // Render modal component (shared across all card types)\n    const renderModal = () => {\n        if (isPostOpen && item.user) {\n            return (\n                <QuickMessageModal\n                    visible={quickMessageModalVisible}\n                    onClose={() => setQuickMessageModalVisible(false)}\n                    postType={getPostType()}\n                    recipientId={item.user.id}\n                    recipientName={item.user.name || '××©×ª××©'}\n                />\n            );\n        }\n        return null;\n    };\n\n    // 1. Task Completion\n    if (item.type === 'task_post' && item.subtype === 'task_completion') {\n        return (\n            <>\n                <TaskCompletionCard {...commonProps} />\n                {renderModal()}\n            </>\n        );\n    }\n\n    // 2. Task Assignment (New Task)\n    if (item.type === 'task_post' || item.subtype === 'task_assignment') {\n        return (\n            <>\n                <TaskAssignmentCard {...commonProps} />\n                {renderModal()}\n            </>\n        );\n    }\n\n    // 3. Donation - Distinguish available vs delivered (same logic as items)\n    if (item.subtype === 'donation') {\n        // Check if donation is delivered/completed/expired/cancelled\n        const isDonationDelivered = item.status && ['delivered', 'completed', 'expired', 'cancelled'].includes(item.status);\n        \n        if (isDonationDelivered) {\n            return (\n                <>\n                    <ItemDeliveredCard {...commonProps} />\n                    {renderModal()}\n                </>\n            );\n        }\n        \n        return (\n            <>\n                <DonationItemCard {...commonProps} />\n                {renderModal()}\n            </>\n        );\n    }\n\n    // 4. Ride\n    if (item.subtype === 'ride') {\n        // Distinguish completed vs offered\n        if (item.status === 'completed') {\n            return (\n                <>\n                    <RideCompletedCard {...commonProps} />\n                    {renderModal()}\n                </>\n            );\n        }\n        return (\n            <>\n                <RideOfferedCard {...commonProps} />\n                {renderModal()}\n            </>\n        );\n    }\n\n    // 5. Item (Regular) - Distinguish available vs delivered\n    // Check both subtype === 'item' OR if item has a price OR itemId or category (matching isPostOpen logic)\n    if (item.subtype === 'item' || item.price !== undefined || item.itemId || item.category) {\n        // Check if item is delivered/completed/expired/cancelled\n        const isItemDelivered = item.status && ['delivered', 'completed', 'expired', 'cancelled'].includes(item.status);\n        \n        if (isItemDelivered) {\n            return (\n                <>\n                    <ItemDeliveredCard {...commonProps} />\n                    {renderModal()}\n                </>\n            );\n        }\n        \n        return (\n            <>\n                <RegularItemCard {...commonProps} />\n                {renderModal()}\n            </>\n        );\n    }\n\n    // 6. Generic/Unknown Post Type\n    return (\n        <>\n            <RegularItemCard {...commonProps} />\n            {renderModal()}\n        </>\n    );\n};\n\nconst styles = StyleSheet.create({});\n\nexport default React.memo(PostReelItem);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/QuickMessageModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Feed/ReportPostModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FilterSortOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FirebaseGoogleButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isAuthenticated' is assigned a value but never used.","line":24,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isGuestMode' is assigned a value but never used.","line":24,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":25,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1182,1185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1182,1185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":231,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9232,9235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9232,9235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Google Login using Firebase Authentication\n * THE SIMPLEST SOLUTION THAT ACTUALLY WORKS!\n */\n\nimport React, { useState } from 'react';\nimport { TouchableOpacity, Text, StyleSheet, View, Platform, ActivityIndicator } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { getAuth, signInWithPopup, GoogleAuthProvider } from 'firebase/auth';\nimport { getFirebase } from '../utils/firebaseClient';\nimport { useUser } from '../stores/userStore';\nimport { useTranslation } from 'react-i18next';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_BASE_URL } from '../utils/config.constants';\nimport { createShadowStyle } from '../globals/styles';\nimport colors from '../globals/colors';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport { logger } from '../utils/loggerService';\n\nexport default function FirebaseGoogleButton() {\n  const { t } = useTranslation(['auth']);\n  const { setSelectedUserWithMode, isAuthenticated, isGuestMode } = useUser();\n  const navigation = useNavigation<any>();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleGoogleLogin = async () => {\n    logger.info('FirebaseGoogleButton', 'Google login started');\n\n    if (Platform.OS !== 'web') {\n      logger.error('FirebaseGoogleButton', 'Platform is not web', { platform: Platform.OS });\n      alert('Google login is currently available on web only');\n      return;\n    }\n\n    try {\n      logger.debug('FirebaseGoogleButton', 'Setting loading state');\n      setLoading(true);\n      setError('');\n\n      logger.debug('FirebaseGoogleButton', 'Getting Firebase instance');\n      const { app } = getFirebase();\n      logger.debug('FirebaseGoogleButton', 'Firebase app status', { exists: !!app });\n\n      logger.debug('FirebaseGoogleButton', 'Getting Auth instance');\n      const auth = getAuth(app);\n      logger.debug('FirebaseGoogleButton', 'Auth status', { exists: !!auth });\n\n      logger.debug('FirebaseGoogleButton', 'Creating Google Provider');\n      const provider = new GoogleAuthProvider();\n      logger.debug('FirebaseGoogleButton', 'Provider created');\n\n      logger.debug('FirebaseGoogleButton', 'Setting provider parameters');\n      provider.setCustomParameters({\n        prompt: 'select_account'\n      });\n      logger.debug('FirebaseGoogleButton', 'Parameters set');\n\n      logger.debug('FirebaseGoogleButton', 'Opening Google popup');\n      const result = await signInWithPopup(auth, provider);\n\n      logger.debug('FirebaseGoogleButton', 'Popup returned', { hasResult: !!result });\n\n      // Extract Google Credential to get the Google Access Token and ID Token\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const googleAccessToken = credential?.accessToken;\n      const googleIdToken = credential?.idToken;\n\n      logger.debug('FirebaseGoogleButton', 'Google credentials extracted', {\n        hasAccessToken: !!googleAccessToken,\n        hasIdToken: !!googleIdToken,\n      });\n\n      const user = result.user;\n      logger.debug('FirebaseGoogleButton', 'User data received', {\n        uid: user.uid,\n        email: user.email,\n      });\n\n      logger.debug('FirebaseGoogleButton', 'Sending to server for verification', {\n        apiUrl: API_BASE_URL,\n        firebaseUid: user.uid,\n      });\n\n      // Send Google tokens and Firebase UID to server\n      // Firebase UID is different from Google ID - we need to send it separately\n      const response = await fetch(`${API_BASE_URL}/auth/google`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'User-Agent': `KarmaCommunity-${Platform.OS}`,\n        },\n        body: JSON.stringify({\n          idToken: googleIdToken,\n          accessToken: googleAccessToken,\n          firebaseUid: user.uid, // Send Firebase UID (from Firebase Auth)\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        logger.error('FirebaseGoogleButton', 'Server error response', {\n          errorData,\n          status: response.status,\n          statusText: response.statusText,\n        });\n        throw new Error(errorData.error || errorData.message || `Server error: ${response.status}`);\n      }\n\n      const serverResponse = await response.json();\n\n      if (!serverResponse.success || !serverResponse.user) {\n        throw new Error(serverResponse.error || 'Invalid response from server');\n      }\n\n      logger.info('FirebaseGoogleButton', 'Server authentication successful', {\n        userId: serverResponse.user.id,\n        email: serverResponse.user.email,\n        hasTokens: !!serverResponse.tokens,\n      });\n\n      // Save JWT tokens if provided\n      if (serverResponse.tokens) {\n        const AsyncStorage = await import('@react-native-async-storage/async-storage');\n        await AsyncStorage.default.setItem('jwt_access_token', serverResponse.tokens.accessToken);\n        await AsyncStorage.default.setItem('jwt_refresh_token', serverResponse.tokens.refreshToken);\n        await AsyncStorage.default.setItem('jwt_token_expires_at', \n          String(Date.now() + (serverResponse.tokens.expiresIn * 1000))\n        );\n        logger.debug('FirebaseGoogleButton', 'JWT tokens saved to storage');\n      }\n\n      // Use server-verified user data\n      const serverUser = serverResponse.user;\n      \n      \n      const userData = {\n        id: serverUser.id,\n        name: serverUser.name || user.displayName || user.email?.split('@')[0] || 'User',\n        email: serverUser.email || user.email || '',\n        avatar: serverUser.avatar || serverUser.avatar_url || user.photoURL || 'https://i.pravatar.cc/150?img=1',\n        phone: user.phoneNumber || '+972500000000',\n        bio: serverUser.bio || '',\n        karmaPoints: serverUser.karmaPoints || 0,\n        joinDate: serverUser.joinDate || new Date().toISOString(),\n        isActive: serverUser.isActive !== false,\n        lastActive: serverUser.lastActive || new Date().toISOString(),\n        location: serverUser.location || { city: '×™×©×¨××œ', country: 'IL' },\n        interests: serverUser.interests || [],\n        roles: serverUser.roles || ['user'],\n        postsCount: serverUser.postsCount || 0,\n        followersCount: serverUser.followersCount || 0,\n        followingCount: serverUser.followingCount || 0,\n        notifications: serverUser.notifications || [\n          { type: 'system', text: '×‘×¨×•×š ×”×‘× ×œ×§×¨××” ×§×•××™×•× ×™×˜×™!', date: new Date().toISOString() }\n        ],\n        settings: serverUser.settings || {\n          language: 'he',\n          darkMode: false,\n          notificationsEnabled: true\n        }\n      };\n      logger.debug('FirebaseGoogleButton', 'User data prepared from server', {\n        email: userData.email,\n      });\n\n      logger.debug('FirebaseGoogleButton', 'Saving to UserStore');\n      await setSelectedUserWithMode(userData, 'real');\n      logger.debug('FirebaseGoogleButton', 'UserStore updated');\n\n      logger.debug('FirebaseGoogleButton', 'Saving to AsyncStorage');\n      await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n      await AsyncStorage.setItem('auth_mode', 'real');\n      logger.debug('FirebaseGoogleButton', 'AsyncStorage updated');\n\n      // Give React time to update state and re-render before navigation\n      // Use longer timeout for iOS/mobile web to ensure state is fully updated\n      const isMobileWeb = Platform.OS === 'web' && typeof window !== 'undefined' && window.innerWidth <= 768;\n      const timeoutDuration = isMobileWeb ? 300 : 100;\n      await new Promise(resolve => setTimeout(resolve, timeoutDuration));\n\n      // Use requestAnimationFrame to ensure DOM/state updates are complete\n      await new Promise(resolve => {\n        if (typeof requestAnimationFrame !== 'undefined') {\n          requestAnimationFrame(() => {\n            requestAnimationFrame(resolve);\n          });\n        } else {\n          setTimeout(resolve, 50);\n        }\n      });\n\n      logger.debug('FirebaseGoogleButton', 'Navigating to HomeStack');\n\n      // Check guards before navigation\n      // After successful login, user is authenticated\n      const guardContext = {\n        isAuthenticated: true,\n        isGuestMode: false,\n        isAdmin: false,\n      };\n\n      const guardResult = await checkNavigationGuards(\n        {\n          type: 'reset',\n          index: 0,\n          routes: [{ name: 'HomeStack' }],\n        },\n        guardContext\n      );\n\n      if (!guardResult.allowed) {\n        // If guard blocks, try redirect if provided\n        if (guardResult.redirectTo) {\n          await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n        }\n        setLoading(false);\n        return;\n      }\n\n      // Use reset instead of replace for more reliable navigation after auth\n      // This ensures a clean navigation stack\n      await navigationQueue.reset(0, [{ name: 'HomeStack' }], 2);\n      logger.info('FirebaseGoogleButton', 'Google login success');\n\n      // Reset loading state after navigation\n      setLoading(false);\n\n    } catch (error: any) {\n      logger.error('FirebaseGoogleButton', 'Google login error', {\n        error: error.message,\n        code: error.code,\n        stack: error.stack,\n      });\n\n      let errorMessage = '';\n      if (error.code === 'auth/popup-closed-by-user') {\n        errorMessage = '×”×”×ª×—×‘×¨×•×ª ×‘×•×˜×œ×”';\n        logger.debug('FirebaseGoogleButton', 'User closed the popup');\n      } else if (error.code === 'auth/popup-blocked') {\n        errorMessage = '×”×“×¤×“×¤×Ÿ ×—×¡× ××ª ×—×œ×•×Ÿ ×”×”×ª×—×‘×¨×•×ª. ×× × ××¤×©×¨ pop-ups.';\n        logger.warn('FirebaseGoogleButton', 'Popup was blocked by browser');\n      } else {\n        errorMessage = '×©×’×™××” ×‘×”×ª×—×‘×¨×•×ª. × ×¡×” ×©×•×‘.';\n        logger.warn('FirebaseGoogleButton', 'Unknown error', { code: error.code });\n      }\n\n      setError(errorMessage);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <View>\n      <TouchableOpacity\n        style={[styles.button, loading && styles.buttonDisabled]}\n        onPress={handleGoogleLogin}\n        disabled={loading}\n        activeOpacity={0.8}\n      >\n        <View style={styles.content}>\n          {loading ? (\n            <ActivityIndicator color={colors.white} style={styles.icon} />\n          ) : (\n            <Ionicons name=\"logo-google\" size={20} color={colors.white} style={styles.icon} />\n          )}\n          <Text style={styles.text}>\n            {loading ? '××ª×—×‘×¨...' : (t('auth:googleCta') || '×”×ª×—×‘×¨/×”×¨×©× ×¢× ×’×•×’×œ')}\n          </Text>\n        </View>\n      </TouchableOpacity>\n\n      {error && (\n        <Text style={styles.errorText}>{error}</Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    backgroundColor: colors.primary,\n    borderRadius: 8,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...createShadowStyle('colors.black', { width: 0, height: 2 }, 0.1, 4),\n    elevation: 3,\n    width: '100%',\n  },\n  buttonDisabled: {\n    opacity: 0.6,\n  },\n  content: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  icon: {\n    marginRight: 8,\n  },\n  text: {\n    color: colors.white,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  errorText: {\n    color: colors.error,\n    fontSize: 14,\n    textAlign: 'center',\n    marginTop: 8,\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getSizeLabel' is assigned a value but never used.","line":12,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dimensions' is assigned a value but never used.","line":74,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8975,8978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8975,8978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Web-only canvas overlay with animated floating bubbles reflecting live community stats.\n// - Reached from: Home screen on Web to render an animated background behind content.\n// - Inputs: None; fetches stats via `EnhancedStatsService` and renders to <canvas>.\n// - Behavior: Creates many bubbles with depth, wobble and shimmer; assigns labels from stats and updates periodically.\nimport React, { useEffect, useRef, useCallback, useState } from 'react';\nimport { EnhancedStatsService, formatShortNumber } from '../utils/statsService';\nimport type { CommunityStats } from '../utils/statsService';\nimport colors from '../globals/colors';\n\n// Fallback label by size before stats are loaded\nconst getSizeLabel = (radius: number): string => {\n  if (radius < 18) return 'XS';\n  if (radius < 35) return 'S';\n  if (radius < 60) return 'M';\n  if (radius < 90) return 'L';\n  return 'XL';\n};\n\ninterface Bubble {\n  id: string;\n  x: number;\n  y: number;\n  originalX: number;\n  originalY: number;\n  vx: number;\n  vy: number;\n  radius: number;\n  originalRadius: number;\n  targetRadius: number;\n  depth: number;\n  speed: number;\n  wobbleSpeed: number;\n  wobbleAmount: number;\n  wobbleOffset: number;\n  shimmerSpeed: number;\n  shimmerOffset: number;\n  opacity: number;\n  hue: number;\n  saturation: number;\n  lightness: number;\n  life: number;\n  floatDirection: number;\n  mouseForceX: number;\n  mouseForceY: number;\n  dragForceX: number;\n  dragForceY: number;\n  labelNumber: number;\n  labelText: string;\n  labelValue: string;\n}\n\ninterface Ripple {\n  x: number;\n  y: number;\n  radius: number;\n  maxRadius: number;\n  strength: number;\n  life: number;\n}\n\ninterface MouseState {\n  x: number;\n  y: number;\n  isPressed: boolean;\n}\n\nconst FloatingBubbles = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationRef = useRef<number | null>(null);\n  const bubblesRef = useRef<Bubble[]>([]);\n  const mouseRef = useRef<MouseState>({ x: 0, y: 0, isPressed: false });\n  const rippleRef = useRef<Ripple[]>([]);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  const statsRef = useRef<CommunityStats | null>(null);\n  const BOTTOM_SAFE_ZONE_PX = 96; // ×©××™×¨×ª ××–×•×¨ ×”×›×¤×ª×•×¨ ×‘×ª×—×ª×™×ª\n  const MIN_LABEL_RADIUS_FOR_STATS = 36; // ××¦×™×’×™× ×¡×˜×˜×™×¡×˜×™×§×” ×¨×§ ×‘×‘×•×¢×•×ª ×’×“×•×œ×•×ª ×™×—×¡×™×ª\n  const MAX_LABEL_RADIUS_FOR_STATS = 140; // ×¨×“×™×•×¡ ××§×¡×™××œ×™ ×œ×‘×•×¢×” ×¢× ×¡×˜×˜×™×¡×˜×™×§×”\n  const REFRESH_MS = 60000; // ×¨×¢× ×•×Ÿ × ×ª×•× ×™× ×›×œ 60 ×©× ×™×•×ª - ×¡×˜×˜×™×¡×˜×™×§×•×ª ×œ× ××©×ª× ×•×ª ×‘×ª×“×™×¨×•×ª ×’×‘×•×”×”\n\n  // Order and labels for mapping stats to bubbles - all 40+ stats\n  const statKeys: Array<keyof CommunityStats> = [\n    // Core high-priority stats\n    'moneyDonations', 'volunteerHours', 'rides', 'events', 'activeMembers', 'totalUsers',\n\n    // User engagement\n    'dailyActiveUsers', 'weeklyActiveUsers', 'newUsersThisWeek', 'newUsersThisMonth',\n    'totalOrganizations', 'citiesWithUsers', 'userEngagementRate',\n\n    // Donation metrics\n    'totalDonations', 'donationsThisWeek', 'donationsThisMonth', 'activeDonations',\n    'completedDonations', 'itemDonations', 'serviceDonations', 'totalMoneyDonated',\n    'uniqueDonors', 'avgDonationAmount',\n\n    // Ride metrics\n    'totalRides', 'ridesThisWeek', 'ridesThisMonth', 'activeRides', 'completedRides',\n    'totalSeatsOffered', 'uniqueDrivers', 'avgSeatsPerRide',\n\n    // Event metrics\n    'totalEvents', 'eventsThisWeek', 'eventsThisMonth', 'activeEvents', 'completedEvents',\n    'totalEventAttendees', 'virtualEvents',\n\n    // Activity metrics\n    'totalActivities', 'activitiesToday', 'activitiesThisWeek', 'totalLogins',\n    'donationActivities', 'chatActivities', 'activeUsersTracked',\n\n    // Communication\n    'totalMessages', 'totalConversations', 'messagesThisWeek', 'groupConversations',\n    'directConversations',\n\n    // Legacy extended stats\n    'foodKg', 'clothingKg', 'bloodLiters', 'treesPlanted', 'animalsAdopted', 'recyclingBags',\n    'booksDonated', 'appActiveUsers', 'appDownloads', 'activeVolunteers', 'kmCarpooled',\n    'fundsRaised', 'mealsServed', 'courses', 'culturalEvents'\n  ];\n\n  const STAT_LABELS: Partial<Record<keyof CommunityStats, string>> = {\n    // Core stats\n    moneyDonations: '×›×¡×£ × ×ª×¨×',\n    volunteerHours: '×©×¢×•×ª ×”×ª× ×“×‘×•×ª',\n    rides: '× ×¡×™×¢×•×ª',\n    events: '××™×¨×•×¢×™×',\n    activeMembers: '×—×‘×¨×™× ×¤×¢×™×œ×™×',\n    totalUsers: '×¡×”×´×› ××©×ª××©×™×',\n\n    // User engagement\n    dailyActiveUsers: '×¤×¢×™×œ×™× ×™×•××™',\n    weeklyActiveUsers: '×¤×¢×™×œ×™× ×©×‘×•×¢×™',\n    newUsersThisWeek: '×—×“×©×™× ×”×©×‘×•×¢',\n    newUsersThisMonth: '×—×“×©×™× ×”×—×•×“×©',\n    totalOrganizations: '××¨×’×•× ×™×',\n    citiesWithUsers: '×¢×¨×™×',\n    userEngagementRate: '××—×•×– ××¢×•×¨×‘×•×ª',\n\n    // Donation metrics\n    totalDonations: '×¡×”×´×› ×ª×¨×•××•×ª',\n    donationsThisWeek: '×ª×¨×•××•×ª ×”×©×‘×•×¢',\n    donationsThisMonth: '×ª×¨×•××•×ª ×”×—×•×“×©',\n    activeDonations: '×ª×¨×•××•×ª ×¤×¢×™×œ×•×ª',\n    completedDonations: '×ª×¨×•××•×ª ×”×•×©×œ××•',\n    itemDonations: '×ª×¨×•××•×ª ×¤×¨×™×˜×™×',\n    serviceDonations: '×ª×¨×•××•×ª ×©×™×¨×•×ª×™×',\n    totalMoneyDonated: '×¡×›×•× × ×ª×¨×',\n    uniqueDonors: '×ª×•×¨××™× ×™×™×—×•×“×™×™×',\n    avgDonationAmount: '×××•×¦×¢ ×ª×¨×•××”',\n\n    // Ride metrics\n    totalRides: '×¡×”×´×› × ×¡×™×¢×•×ª',\n    ridesThisWeek: '× ×¡×™×¢×•×ª ×”×©×‘×•×¢',\n    ridesThisMonth: '× ×¡×™×¢×•×ª ×”×—×•×“×©',\n    activeRides: '× ×¡×™×¢×•×ª ×¤×¢×™×œ×•×ª',\n    completedRides: '× ×¡×™×¢×•×ª ×”×•×©×œ××•',\n    totalSeatsOffered: '××§×•××•×ª ×”×•×¦×¢×•',\n    uniqueDrivers: '× ×”×’×™× ×™×™×—×•×“×™×™×',\n    avgSeatsPerRide: '×××•×¦×¢ ××§×•××•×ª',\n\n    // Event metrics\n    totalEvents: '×¡×”×´×› ××™×¨×•×¢×™×',\n    eventsThisWeek: '××™×¨×•×¢×™× ×”×©×‘×•×¢',\n    eventsThisMonth: '××™×¨×•×¢×™× ×”×—×•×“×©',\n    activeEvents: '××™×¨×•×¢×™× ×¤×¢×™×œ×™×',\n    completedEvents: '××™×¨×•×¢×™× ×”×•×©×œ××•',\n    totalEventAttendees: '××©×ª×ª×¤×™×',\n    virtualEvents: '××™×¨×•×¢×™× ×•×™×¨×˜×•××œ×™×™×',\n\n    // Activity metrics\n    totalActivities: '×¡×”×´×› ×¤×¢×™×œ×•×™×•×ª',\n    activitiesToday: '×¤×¢×™×œ×•×™×•×ª ×”×™×•×',\n    activitiesThisWeek: '×¤×¢×™×œ×•×™×•×ª ×”×©×‘×•×¢',\n    totalLogins: '×¡×”×´×› ×›× ×™×¡×•×ª',\n    donationActivities: '×¤×¢×™×œ×•×ª ×ª×¨×•××”',\n    chatActivities: '×¤×¢×™×œ×•×ª ×¦×³××˜',\n    activeUsersTracked: '××©×ª××©×™× ×¤×¢×™×œ×™×',\n\n    // Communication\n    totalMessages: '×¡×”×´×› ×”×•×“×¢×•×ª',\n    totalConversations: '×©×™×—×•×ª',\n    messagesThisWeek: '×”×•×“×¢×•×ª ×”×©×‘×•×¢',\n    groupConversations: '×§×‘×•×¦×•×ª',\n    directConversations: '×©×™×—×•×ª ×¤×¨×˜×™×•×ª',\n\n    // Legacy extended stats\n    foodKg: '×§×´×’ ××–×•×Ÿ',\n    clothingKg: '×§×´×’ ×‘×’×“×™×',\n    bloodLiters: '×œ×™×˜×¨ ×“×',\n    treesPlanted: '×¢×¦×™× × ×™×˜×¢×•',\n    animalsAdopted: '×‘×¢×œ×™ ×—×™×™×',\n    recyclingBags: '×©×§×™×•×ª ××™×—×–×•×¨',\n    booksDonated: '×¡×¤×¨×™×',\n    appActiveUsers: '××©×ª××©×™× ×¤×¢×™×œ×™×',\n    appDownloads: '×”×•×¨×“×•×ª',\n    activeVolunteers: '××ª× ×“×‘×™×',\n    kmCarpooled: '×§×´× × ×¡×™×¢×•×ª',\n    fundsRaised: '×›×¡×¤×™× × ×’×•×™×¡×•',\n    mealsServed: '××¨×•×—×•×ª ×”×•×’×©×•',\n    courses: '×§×•×¨×¡×™×',\n    culturalEvents: '××™×¨×•×¢×™ ×ª×¨×‘×•×ª',\n  };\n\n  const createBubble = useCallback((canvas: HTMLCanvasElement): Bubble => {\n    const depth = Math.random();\n    const baseSize = 25 + Math.random() * 40;\n    const size = baseSize * (0.3 + depth * 1.7); // ×’×“×œ×™× ××ª××™××™× ×œ×¢×•××§\n    const hueBase = Math.random() < 0.3\n      ? 330 + Math.random() * 20 // pinks 330-350\n      : 195 + Math.random() * 45; // light blues 195-240\n\n    return {\n      id: `bubble-${Math.random().toString(36).substr(2, 9)}`,\n      x: Math.random() * (canvas.width + 200) - 100,\n      y: Math.random() * (canvas.height + 200) - 100,\n      originalX: 0,\n      originalY: 0,\n      vx: (Math.random() - 0.5) * 0.08,\n      vy: (Math.random() - 0.5) * 0.08,\n      radius: size,\n      originalRadius: size,\n      targetRadius: size,\n      depth: depth, // 0 = ×¨×—×•×§, 1 = ×§×¨×•×‘\n      speed: 0.006 + Math.random() * 0.012,\n      wobbleSpeed: 0.0008 + Math.random() * 0.0015,\n      wobbleAmount: 1 + Math.random() * 3,\n      wobbleOffset: Math.random() * Math.PI,\n      shimmerSpeed: 0.008 + Math.random() * 0.015,\n      shimmerOffset: Math.random() * Math.PI * 2,\n      opacity: 0.5 + depth * 0.4,\n      hue: hueBase,\n      saturation: 35 + Math.random() * 25,\n      lightness: 58 + Math.random() * 18,\n      life: Math.random() * 1000,\n      floatDirection: Math.random() > 0.5 ? 1 : -1,\n      mouseForceX: 0,\n      mouseForceY: 0,\n      dragForceX: 0,\n      dragForceY: 0,\n      labelNumber: 0,\n      labelText: '',\n      labelValue: ''\n    };\n  }, []);\n\n  const initializeBubbles = useCallback((canvas: HTMLCanvasElement) => {\n    bubblesRef.current = [];\n    for (let i = 0; i < 120; i++) {\n      const bubble = createBubble(canvas);\n      bubble.originalX = bubble.x;\n      bubble.originalY = bubble.y;\n      // ×‘×¨×™×¨×ª ××—×“×œ ×œ×œ× ×ª×•×•×™×•×ª\n      bubble.labelNumber = 0;\n      bubble.labelText = '';\n      bubble.labelValue = '';\n      bubblesRef.current.push(bubble);\n    }\n  }, [createBubble]);\n\n  const assignStatsToBubbles = useCallback(() => {\n    const stats = statsRef.current;\n    if (!stats || bubblesRef.current.length === 0) return;\n    // × ×™×§×•×™ ×ª×•×•×™×•×ª ×§×™×™××•×ª\n    bubblesRef.current.forEach(b => {\n      b.labelText = '';\n      b.labelValue = '';\n      b.labelNumber = 0;\n      b.targetRadius = b.originalRadius; // ×”×—×–×¨×ª ×™×¢×“ ×¨×“×™×•×¡ ×œ×‘×¨×™×¨×ª ××—×“×œ\n    });\n\n    // ×”×¤×§×ª ×¨×©×™××ª ×¡×˜×˜×™×¡×˜×™×§×•×ª ×××•×™× ×•×ª ×œ×¤×™ ×¢×¨×š ×™×•×¨×“\n    const statList = statKeys.map(key => ({ key, value: Number((stats as any)[key] || 0) || 0 }));\n    statList.sort((a, b) => b.value - a.value);\n\n    const candidates = [...bubblesRef.current]\n      .filter(b => b.originalRadius >= MIN_LABEL_RADIUS_FOR_STATS)\n      .sort((a, b) => b.originalRadius - a.originalRadius);\n\n    const count = Math.min(statList.length, candidates.length);\n    const valuesForScale = statList.slice(0, count).map(s => s.value);\n    const maxVal = Math.max(1, ...valuesForScale);\n    const minVal = Math.min(...valuesForScale);\n    const range = Math.max(1, maxVal - minVal);\n\n    for (let i = 0; i < count; i++) {\n      const bubble = candidates[i];\n      const { key, value } = statList[i];\n      const norm = (value - minVal) / range; // 0..1\n      // ×™×¢×“ ×¨×“×™×•×¡ ×œ×¤×™ ×¢×¨×š, ×¢× ××¢×˜ ×”×©×¤×¢×ª ×¢×•××§ ×›×“×™ ×œ×©××•×¨ ×¢×œ ×¤×¨×¡×¤×§×˜×™×‘×”\n      const depthFactor = 0.85 + bubble.depth * 0.35; // 0.85..1.2\n      const target = (MIN_LABEL_RADIUS_FOR_STATS + 12) + norm * (MAX_LABEL_RADIUS_FOR_STATS - (MIN_LABEL_RADIUS_FOR_STATS + 12));\n      bubble.targetRadius = target * depthFactor;\n\n      bubble.labelNumber = value;\n      bubble.labelValue = formatShortNumber(value);\n      bubble.labelText = STAT_LABELS[key] || 'Stat';\n    }\n  }, [statKeys]);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const stats = await EnhancedStatsService.getCommunityStats();\n        if (!mounted) return;\n        statsRef.current = stats;\n        assignStatsToBubbles();\n      } catch (e) {\n        console.error('Failed to load stats for bubbles', e);\n      }\n    })();\n    return () => { mounted = false; };\n  }, [assignStatsToBubbles]);\n\n  // ×¨×¢× ×•×Ÿ × ×ª×•× ×™× ×¨×¦×™×£ (×›××¢×˜ ×‘×–××Ÿ ×××ª)\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const stats = await EnhancedStatsService.getCommunityStats();\n        statsRef.current = stats;\n        assignStatsToBubbles();\n      } catch (e) {\n        console.error('Refresh stats error', e);\n      }\n    }, REFRESH_MS);\n    return () => clearInterval(interval);\n  }, [assignStatsToBubbles]);\n\n  const createRipple = useCallback((x: number, y: number, strength: number = 1) => {\n    rippleRef.current.push({\n      x,\n      y,\n      radius: 0,\n      maxRadius: 75 * strength,\n      strength: strength * 0.28,\n      life: 0\n    });\n  }, []);\n\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    mouseRef.current.x = e.clientX - rect.left;\n    mouseRef.current.y = e.clientY - rect.top;\n  }, []);\n\n  const handleMouseDown = useCallback((e: MouseEvent) => {\n    mouseRef.current.isPressed = true;\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    createRipple(x, y, 1.5);\n  }, [createRipple]);\n\n  const handleMouseUp = useCallback(() => {\n    mouseRef.current.isPressed = false;\n  }, []);\n\n  const handleTouchMove = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const touch = e.touches[0];\n    mouseRef.current.x = touch.clientX - rect.left;\n    mouseRef.current.y = touch.clientY - rect.top;\n  }, []);\n\n  const handleTouchStart = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    mouseRef.current.isPressed = true;\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    const touch = e.touches[0];\n    const x = touch.clientX - rect.left;\n    const y = touch.clientY - rect.top;\n    createRipple(x, y, 2);\n  }, [createRipple]);\n\n  const handleTouchEnd = useCallback((e: TouchEvent) => {\n    e.preventDefault();\n    mouseRef.current.isPressed = false;\n  }, []);\n\n  const applyMouseForces = useCallback((bubble: Bubble) => {\n    const dx = mouseRef.current.x - bubble.x;\n    const dy = mouseRef.current.y - bubble.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const influence = bubble.depth * 160 + 40; // ×˜×•×•×— ×”×©×¤×¢×” ××¢×˜ ×¨×—×‘ ×™×•×ª×¨ ×œ×ª× ×•×¢×” ×¢×“×™× ×”\n\n    if (distance < influence) {\n      const force = (influence - distance) / influence;\n      const angle = Math.atan2(dy, dx);\n      const repelForce = force * force * 1.2; // ×›×•×— ×“×—×™×™×” ××¢×˜ ×—×–×§ ×™×•×ª×¨\n\n      bubble.mouseForceX += Math.cos(angle + Math.PI) * repelForce;\n      bubble.mouseForceY += Math.sin(angle + Math.PI) * repelForce;\n\n      // ×× ×œ×•×—×¦×™×, ×›×•×— ××¢×˜ ××•×’×‘×¨ ××š ×¢×“×™×™×Ÿ ×¢×“×™×Ÿ\n      if (mouseRef.current.isPressed) {\n        bubble.mouseForceX *= 1.15;\n        bubble.mouseForceY *= 1.15;\n        // ×¨×˜×˜ ×¢×“×™×Ÿ ×××•×“\n        bubble.radius = bubble.originalRadius * (1 + Math.sin(Date.now() * 0.05) * 0.02);\n      }\n    }\n\n    // ×”×—×–×¨×ª ×›×•×—×•×ª ×œ××¤×¡ ×‘×”×“×¨×’×”\n    bubble.mouseForceX *= 0.94;\n    bubble.mouseForceY *= 0.94;\n    bubble.dragForceX *= 0.965;\n    bubble.dragForceY *= 0.965;\n  }, []);\n\n  const drawBubble = useCallback((ctx: CanvasRenderingContext2D, bubble: Bubble, time: number) => {\n    // ×”×ª×××ª ×¨×“×™×•×¡ ×—×œ×§×” ×œ×™×¢×“ ×œ×¤×™ ×¡×˜×˜×™×¡×˜×™×§×”\n    const lerp = (a: number, b: number, t: number) => a + (b - a) * t;\n    bubble.radius = lerp(bubble.radius, bubble.targetRadius, 0.04);\n    const wobbleX = Math.sin(time * bubble.wobbleSpeed + bubble.wobbleOffset) * bubble.wobbleAmount;\n    const wobbleY = Math.cos(time * bubble.wobbleSpeed * 0.7 + bubble.wobbleOffset) * bubble.wobbleAmount * 0.5;\n\n    const x = bubble.x + wobbleX + bubble.mouseForceX + bubble.dragForceX;\n    const y = bubble.y + wobbleY + bubble.mouseForceY + bubble.dragForceY;\n\n    ctx.save();\n\n    // ×©×§×™×¤×•×ª ×œ×¤×™ ×¢×•××§\n    const alpha = bubble.opacity * (0.6 + bubble.depth * 0.4);\n\n    // ×¦×‘×¢×™× ×“×™× ××™×™×\n    const shimmer = Math.sin(time * bubble.shimmerSpeed + bubble.shimmerOffset) * 0.2 + 0.65;\n    const hue = bubble.hue + Math.sin(time * 0.001 + bubble.shimmerOffset) * 10;\n\n    // ×’×¨×“×™×× ×˜ ××•×¨×›×‘ ×¢×‘×•×¨ ×”×‘×•×¢×”\n    const mainGradient = ctx.createRadialGradient(\n      x - bubble.radius * 0.3,\n      y - bubble.radius * 0.4,\n      0,\n      x,\n      y,\n      bubble.radius\n    );\n\n    mainGradient.addColorStop(0, `hsla(${hue}, ${bubble.saturation + 10}%, ${bubble.lightness + 22}%, ${alpha * shimmer})`);\n    mainGradient.addColorStop(0.25, `hsla(${hue}, ${bubble.saturation}%, ${bubble.lightness + 8}%, ${alpha * 0.85})`);\n    mainGradient.addColorStop(0.65, `hsla(${hue - 8}, ${bubble.saturation + 8}%, ${bubble.lightness}%, ${alpha * 0.6})`);\n    mainGradient.addColorStop(0.92, `hsla(${hue - 16}, ${bubble.saturation + 12}%, ${bubble.lightness - 16}%, ${alpha * 0.38})`);\n    mainGradient.addColorStop(1, `hsla(${hue - 24}, ${bubble.saturation + 16}%, ${bubble.lightness - 28}%, ${alpha * 0.25})`);\n\n    // ×¦×™×•×¨ ×”×‘×•×¢×” ×”×¨××©×™×ª\n    ctx.beginPath();\n    ctx.arc(x, y, bubble.radius, 0, Math.PI * 2);\n    ctx.fillStyle = mainGradient;\n    ctx.fill();\n\n    // ×”×‘×¨×§×” ×¢×œ×™×•× ×”\n    const highlightGradient = ctx.createRadialGradient(\n      x - bubble.radius * 0.35,\n      y - bubble.radius * 0.45,\n      0,\n      x - bubble.radius * 0.35,\n      y - bubble.radius * 0.45,\n      bubble.radius * 0.7\n    );\n\n    const highlightAlpha = alpha * shimmer * 0.5;\n    highlightGradient.addColorStop(0, `rgba(255, 255, 255, ${highlightAlpha})`);\n    highlightGradient.addColorStop(0.3, `rgba(255, 255, 255, ${highlightAlpha * 0.6})`);\n    highlightGradient.addColorStop(0.7, `rgba(200, 230, 255, ${highlightAlpha * 0.3})`);\n    highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n    ctx.beginPath();\n    ctx.arc(x - bubble.radius * 0.25, y - bubble.radius * 0.35, bubble.radius * 0.45, 0, Math.PI * 2);\n    ctx.fillStyle = highlightGradient;\n    ctx.fill();\n\n    // ×§×• ×”×™×§×¤×™ ×“×§\n    ctx.beginPath();\n    ctx.arc(x, y, bubble.radius, 0, Math.PI * 2);\n    ctx.strokeStyle = `hsla(${hue + 30}, 70%, 80%, ${alpha * 0.4})`;\n    ctx.lineWidth = 0.5;\n    ctx.stroke();\n\n    // × ×§×•×“×ª ×”×‘×¨×§×” ×§×˜× ×”\n    ctx.beginPath();\n    ctx.arc(x - bubble.radius * 0.4, y - bubble.radius * 0.5, bubble.radius * 0.12, 0, Math.PI * 2);\n    ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.4})`;\n    ctx.fill();\n\n    // ×¨×¤×œ×§×¦×™×” ×ª×—×ª×•× ×” ×¢×“×™× ×”\n    const bottomReflectionGradient = ctx.createRadialGradient(\n      x,\n      y + bubble.radius * 0.6,\n      0,\n      x,\n      y + bubble.radius * 0.6,\n      bubble.radius * 0.4\n    );\n\n    bottomReflectionGradient.addColorStop(0, `rgba(255, 255, 255, ${alpha * 0.12})`);\n    bottomReflectionGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n    ctx.beginPath();\n    ctx.arc(x, y + bubble.radius * 0.7, bubble.radius * 0.25, 0, Math.PI * 2);\n    ctx.fillStyle = bottomReflectionGradient;\n    ctx.fill();\n\n    // labels: number and short text by size (×™×•×ª×¨ \"×‘×•×¢×ª×™\")\n    const numberFontSize = Math.max(12, bubble.radius * 0.54);\n    const textFontSize = Math.max(10, bubble.radius * 0.25);\n    const outlineWidth = Math.min(3.5, Math.max(1.2, numberFontSize * 0.16));\n\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    // number - ××¦×™×’×™× ×¨×§ ×× ×§×™×™××ª ×¡×˜×˜×™×¡×˜×™×§×”\n    if (bubble.labelValue) {\n      ctx.font = `800 ${numberFontSize}px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif`;\n      ctx.lineWidth = outlineWidth;\n      ctx.strokeStyle = 'rgba(10, 22, 48, 0.7)';\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.98)';\n      const numberY = y - bubble.radius * 0.12;\n      // stroke without shadow\n      ctx.shadowColor = 'transparent';\n      ctx.strokeText(bubble.labelValue, x, numberY);\n      // fill with soft shadow to look bubbly\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.22)';\n      ctx.shadowBlur = Math.max(1, bubble.radius * 0.08);\n      ctx.shadowOffsetX = 0;\n      ctx.shadowOffsetY = 0;\n      ctx.fillText(bubble.labelValue, x, numberY);\n      // reset shadow for next ops\n      ctx.shadowColor = 'transparent';\n    }\n\n    // short text under the number - ××¦×™×’×™× ×¨×§ ×× ×™×© ×ª×•×•×™×ª\n    if (bubble.labelText) {\n      ctx.font = `700 ${textFontSize}px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif`;\n      ctx.lineWidth = Math.max(1, outlineWidth * 0.85);\n      ctx.strokeStyle = 'rgba(10, 22, 48, 0.55)';\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.92)';\n      const textY = y + bubble.radius * 0.28;\n      // stroke without shadow\n      ctx.shadowColor = 'transparent';\n      ctx.strokeText(bubble.labelText, x, textY);\n      // fill with soft shadow\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.18)';\n      ctx.shadowBlur = Math.max(1, bubble.radius * 0.06);\n      ctx.shadowOffsetX = 0;\n      ctx.shadowOffsetY = 0;\n      ctx.fillText(bubble.labelText, x, textY);\n      ctx.shadowColor = 'transparent';\n    }\n\n    ctx.restore();\n  }, []);\n\n  const drawRipples = useCallback((ctx: CanvasRenderingContext2D) => {\n    rippleRef.current.forEach((ripple, index) => {\n      ripple.life += 0.02;\n      ripple.radius = ripple.life * ripple.maxRadius;\n\n      if (ripple.life >= 1) {\n        rippleRef.current.splice(index, 1);\n        return;\n      }\n\n      const alpha = (1 - ripple.life) * ripple.strength * 0.3;\n\n      ctx.beginPath();\n      ctx.arc(ripple.x, ripple.y, ripple.radius, 0, Math.PI * 2);\n      ctx.strokeStyle = `rgba(200, 230, 255, ${alpha})`;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n\n      // ×’×œ×™× × ×•×¡×¤×™×\n      if (ripple.life > 0.3) {\n        ctx.beginPath();\n        ctx.arc(ripple.x, ripple.y, ripple.radius * 0.7, 0, Math.PI * 2);\n        ctx.strokeStyle = `rgba(150, 200, 255, ${alpha * 0.5})`;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      }\n    });\n  }, []);\n\n  const animate = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    const time = Date.now();\n\n    // ×¨×§×¢ ××“×¨×’×™ ×‘×”×™×¨\n    const backgroundGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    backgroundGradient.addColorStop(0, colors.blueLight);\n    backgroundGradient.addColorStop(0.35, colors.blueLight);\n    backgroundGradient.addColorStop(0.7, colors.pinkLight);\n    backgroundGradient.addColorStop(1, colors.backgroundTertiary);\n\n    ctx.fillStyle = backgroundGradient;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // ××™×•×Ÿ ×‘×•×¢×•×ª ×œ×¤×™ ×¢×•××§ ×œ×¦×™×•×¨ × ×›×•×Ÿ\n    const sortedBubbles = [...bubblesRef.current].sort((a, b) => a.depth - b.depth);\n\n    // ×¢×“×›×•×Ÿ ×•×¨×™×©×•× ×‘×•×¢×•×ª\n    sortedBubbles.forEach((bubble) => {\n      // ×ª× ×•×¢×” ×˜×‘×¢×™×ª ××™×˜×™×ª ×™×•×ª×¨\n      bubble.life += 0.006;\n      bubble.x += bubble.vx + Math.sin(bubble.life * bubble.speed) * 0.06;\n      bubble.y += bubble.vy + Math.cos(bubble.life * bubble.speed * 0.7) * 0.045;\n\n      // ×›×•×—×•×ª ×¢×›×‘×” ×‘××™× ××¢×˜ ×—×–×§×™× ×™×•×ª×¨\n      bubble.vx *= 0.998;\n      bubble.vy *= 0.998;\n\n      // ×›×•×—×•×ª ×¢×œ×™×” ×¢×“×™× ×™× ×™×•×ª×¨\n      bubble.vy -= 0.0008 * bubble.depth; // ×‘×•×¢×•×ª ×§×¨×•×‘×•×ª ×¢×•×œ×•×ª ××¢×˜ ×™×•×ª×¨\n\n      // ×”×©×¤×¢×ª ×¢×›×‘×¨/××’×¢\n      applyMouseForces(bubble);\n\n      // ×”×©×¤×¢×ª ×’×œ×™ ×”×“×£\n      rippleRef.current.forEach(ripple => {\n        const dx = bubble.x - ripple.x;\n        const dy = bubble.y - ripple.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance < ripple.radius && ripple.life < 0.8) {\n          const force = (ripple.radius - distance) / ripple.radius * ripple.strength * 0.5;\n          const angle = Math.atan2(dy, dx);\n          bubble.dragForceX += Math.cos(angle) * force * bubble.depth;\n          bubble.dragForceY += Math.sin(angle) * force * bubble.depth;\n        }\n      });\n\n      // ×’×‘×•×œ×•×ª ×”××¡×š ×¢× ××¢×’×œ×•×ª, ××©××™×¨×™× ××¨×•×•×— ×‘×ª×—×ª×™×ª ×œ××–×•×¨ ×”×›×¤×ª×•×¨\n      const bottomLimit = canvas.height - bubble.radius * 0.6;\n      if (bubble.x < -bubble.radius) bubble.x = canvas.width + bubble.radius;\n      if (bubble.x > canvas.width + bubble.radius) bubble.x = -bubble.radius;\n      if (bubble.y < -bubble.radius) bubble.y = bottomLimit;\n      if (bubble.y > bottomLimit) bubble.y = -bubble.radius;\n\n      // ×¦×™×•×¨ ×”×‘×•×¢×”\n      drawBubble(ctx, bubble, time);\n    });\n\n    // ×¦×™×•×¨ ×’×œ×™ ×”×“×£\n    drawRipples(ctx);\n\n    // ×—×œ×§×™×§×™× ×§×˜× ×™× × ×•×¡×¤×™× ×‘××•×•×™×¨×”\n    for (let i = 0; i < 30; i++) {\n      const particleX = (time * 0.01 + i * 50) % (canvas.width + 100) - 50;\n      const particleY = (time * 0.005 + i * 80) % (canvas.height + 100) - 50;\n      const particleSize = Math.sin(time * 0.003 + i) * 1 + 2;\n      const particleAlpha = (Math.sin(time * 0.002 + i) + 1) * 0.1;\n\n      ctx.beginPath();\n      ctx.arc(particleX, particleY, particleSize, 0, Math.PI * 2);\n      ctx.fillStyle = `rgba(180, 210, 240, ${particleAlpha})`;\n      ctx.fill();\n    }\n\n    animationRef.current = requestAnimationFrame(animate);\n  }, [applyMouseForces, drawBubble, drawRipples]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const resizeCanvas = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = Math.max(0, window.innerHeight - BOTTOM_SAFE_ZONE_PX);\n      setDimensions({ width: canvas.width, height: canvas.height });\n      initializeBubbles(canvas);\n      assignStatsToBubbles();\n    };\n\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×\n    canvas.addEventListener('mousemove', handleMouseMove);\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('mouseup', handleMouseUp);\n    canvas.addEventListener('touchmove', handleTouchMove, { passive: false });\n    canvas.addEventListener('touchstart', handleTouchStart, { passive: false });\n    canvas.addEventListener('touchend', handleTouchEnd, { passive: false });\n\n    animate();\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n      canvas.removeEventListener('mousemove', handleMouseMove);\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('mouseup', handleMouseUp);\n      canvas.removeEventListener('touchmove', handleTouchMove);\n      canvas.removeEventListener('touchstart', handleTouchStart);\n      canvas.removeEventListener('touchend', handleTouchEnd);\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [animate, initializeBubbles, handleMouseMove, handleMouseDown, handleMouseUp,\n    handleTouchMove, handleTouchStart, handleTouchEnd]);\n\n  return (\n    <div\n      className=\"w-full relative overflow-hidden\"\n      style={{ height: `calc(100vh - ${BOTTOM_SAFE_ZONE_PX}px)` }}\n    >\n      <canvas\n        ref={canvasRef}\n        className=\"absolute inset-0 touch-none\"\n        style={{\n          background: `linear-gradient(180deg, ${colors.blueLight} 0%, ${colors.blueLight} 35%, ${colors.pinkLight} 70%, ${colors.backgroundTertiary} 100%)`\n        }}\n      />\n\n    </div>\n  );\n};\n\nexport default FloatingBubbles;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/FloatingBubblesSkia.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/GuestModeNotice.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'View' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"View"},"fix":{"range":[36,41],"text":""},"desc":"Remove unused variable \"View\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Ionicons' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Ionicons"},"fix":{"range":[110,157],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'variant' is assigned a value but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":22,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[832,835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[832,835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { useUser } from '../stores/userStore';\nimport { useWebMode } from '../stores/webModeStore';\nimport { useTranslation } from 'react-i18next';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport { logger } from '../utils/loggerService';\n\ninterface GuestModeNoticeProps {\n  variant?: 'default' | 'compact';\n  showLoginButton?: boolean;\n}\n\nconst GuestModeNotice: React.FC<GuestModeNoticeProps> = ({ \n  variant = 'default',\n  showLoginButton = true \n}) => {\n  const navigation = useNavigation<any>();\n  const { signOut } = useUser();\n  const { mode } = useWebMode();\n  const { t } = useTranslation(['common']);\n\n  const handleLoginPress = async () => {\n    logger.debug('GuestModeNotice', 'Login button pressed, performing sign out');\n    try {\n      await signOut();\n      logger.debug('GuestModeNotice', 'Sign out completed');\n      \n      // Determine target route based on web mode\n      const targetRoute = (Platform.OS === 'web' && mode === 'site') \n        ? 'LandingSiteScreen' \n        : 'LoginScreen';\n      \n      // Check guards before navigation\n      const guardContext = {\n        isAuthenticated: false, // After sign out\n        isGuestMode: false,\n        isAdmin: false,\n        mode,\n      };\n\n      const guardResult = await checkNavigationGuards(\n        {\n          type: 'reset',\n          index: 0,\n          routes: [{ name: targetRoute }],\n        },\n        guardContext\n      );\n\n      if (!guardResult.allowed) {\n        // If guard blocks, try redirect if provided\n        if (guardResult.redirectTo) {\n          await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n        }\n        return;\n      }\n\n      // Use navigation queue with high priority (2) for auth changes\n      await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n    } catch (error) {\n      logger.error('GuestModeNotice', 'Error during sign out', { error });\n      // Fallback navigation\n      const targetRoute = (Platform.OS === 'web' && mode === 'site') \n        ? 'LandingSiteScreen' \n        : 'LoginScreen';\n      await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n    }\n  };\n\n  return (\n    <>\n      {showLoginButton && (\n        <TouchableOpacity style={styles.loginButton} onPress={handleLoginPress}>\n          <Text style={styles.loginButtonText}>{t('common:guestLoginHint')}</Text>\n        </TouchableOpacity>\n      )}\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 16,\n    marginHorizontal: 20,\n    marginVertical: 10,\n    borderRightWidth: 4,\n    borderRightColor: colors.warning,\n  },\n  content: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  text: {\n    flex: 1,\n    marginRight: 8,\n    fontSize: 14,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    writingDirection: 'rtl',\n    lineHeight: 20,\n  },\n  loginButton: {\n    margin: 10,\n    backgroundColor: colors.secondary,\n    borderRadius: 8,\n    paddingVertical: 5,\n    paddingHorizontal: 10,\n    alignSelf: 'center',\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 6,\n  },\n  loginButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '600',\n    textAlign: 'center',\n    writingDirection: 'rtl',\n  },\n  compactContainer: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 8,\n    padding: 8,\n    marginHorizontal: 20,\n    marginVertical: 5,\n  },\n  compactText: {\n    flex: 1,\n    marginRight: 6,\n    fontSize: 12,\n    color: colors.textSecondary,\n    textAlign: 'right',\n    writingDirection: 'rtl',\n  },\n  compactLoginButton: {\n    backgroundColor: colors.primary,\n    borderRadius: 6,\n    paddingVertical: 4,\n    paddingHorizontal: 12,\n    marginRight: 8,\n  },\n  compactLoginText: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: '600',\n    textAlign: 'center',\n    writingDirection: 'rtl',\n  },\n});\n\nexport default GuestModeNotice; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/HeaderComp.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getScreen' is defined but never used.","line":9,"column":119,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":128,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getScreen"},"fix":{"range":[542,570],"text":""},"desc":"Remove unused variable \"getScreen\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2168,2171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2168,2171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2348,2351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2348,2351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":64,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":30}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\nimport { View, Text, StyleSheet, Platform, ScrollView, TouchableOpacity } from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport SearchBar from \"../components/SearchBar\";\nimport MenuComp from \"../components/MenuComp\";\nimport ModeToggleButton from \"../components/ModeToggleButton\";\nimport GuestModeNotice from \"../components/GuestModeNotice\";\nimport colors from \"../globals/colors\";\nimport { getScreenInfo, scaleSize, rowDirection, responsiveSpacing, responsiveFontSize, BREAKPOINTS, getScreenInfo as getScreen } from \"../globals/responsive\";\nimport { FontSizes } from \"../globals/constants\";\nimport { useUser } from \"../stores/userStore\";\nimport { useTranslation } from 'react-i18next';\nimport { createShadowStyle } from \"../globals/styles\";\n\n// TODO: Add comprehensive TypeScript interfaces for all props instead of loose types\n// TODO: Implement proper component composition instead of props drilling\n// TODO: Add comprehensive accessibility support (roles, labels, hints)\n// TODO: Implement proper responsive design for different screen sizes\n// TODO: Add comprehensive error handling for search operations\n// TODO: Extract search logic to custom hook (useHeaderSearch)\n// TODO: Add proper memoization with React.memo for performance\n// TODO: Implement proper theming system integration\n// TODO: Add comprehensive unit tests for all component functionality\n// TODO: Remove hardcoded styles and use theme system consistently\n\n// TODO: Create proper TypeScript interfaces in separate types file\n// TODO: Add JSDoc documentation for all interface properties\n// TODO: Replace 'any[]' with proper generic types\n// TODO: Add validation for required vs optional props\ninterface HeaderSectionProps {\n  mode: boolean;  // false = search, true = offer\n  menuOptions: string[];\n  onToggleMode: () => void;\n  onSelectMenuItem: (option: string) => void;\n  title?: string; // Optional title for the screen\n  placeholder?: string;\n  // New props for search functionality\n  filterOptions: string[]; // Filter options specific to each screen\n  sortOptions: string[]; // Sort options specific to each screen\n  searchData: any[]; // Data array to search through (charities, rides, etc.) - TODO: Replace any[] with proper types\n  onSearch: (query: string, filters?: string[], sorts?: string[], results?: any[]) => void; // Search handler function - TODO: Improve typing\n  hideSortButton?: boolean;\n}\n\nconst HeaderComp: React.FC<HeaderSectionProps> = ({\n  mode,\n  menuOptions,\n  onToggleMode,\n  onSelectMenuItem,\n  placeholder,\n  filterOptions,\n  sortOptions,\n  searchData,\n  onSearch,\n  hideSortButton = false,\n}) => {\n  const { isGuestMode } = useUser();\n  const { t } = useTranslation(['search', 'common', 'trump']);\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n  const removeFilterRef = React.useRef<((filter: string) => void) | null>(null);\n  const removeSortRef = React.useRef<(() => void) | null>(null);\n\n  const { isTablet, isDesktop, isLargeDesktop, width } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  // Responsive padding and margins using responsiveSpacing for better mobile support\n  // Values are optimized for mobile web experience\n  const horizontalPadding = responsiveSpacing(8, 10, isLargeDesktop ? 16 : 12);\n  const containerRadius = scaleSize(isLargeDesktop ? 28 : isDesktopWeb ? 24 : isTablet ? 22 : 20);\n  const verticalPadding = responsiveSpacing(5, 6, isLargeDesktop ? 8 : 7);\n  const marginHorizontal = responsiveSpacing(5, 7, isLargeDesktop ? 10 : 8);\n\n  const handleRemoveFilter = (filterToRemove: string) => {\n    removeFilterRef.current?.(filterToRemove);\n  };\n\n  const handleRemoveSort = () => {\n    removeSortRef.current?.();\n  };\n\n  const handleFiltersChange = (filters: string[]) => {\n    setSelectedFilters(filters);\n  };\n\n  const handleSortsChange = (sorts: string[]) => {\n    setSelectedSorts(sorts);\n  };\n\n  return (\n    <View style={[\n      headerStyles.headerContainer,\n      {\n        paddingHorizontal: horizontalPadding / 2,\n        paddingVertical: verticalPadding / 2,\n        borderRadius: containerRadius,\n        marginHorizontal: marginHorizontal / 2,\n      }\n    ]}>\n      {/* ××¦×™×’ ××ª ×”×‘×× ×¨ ×‘××¦×‘ ××•×¨×— ×× ×”××©×ª××© ×‘××¦×‘ ××•×¨×— */}\n      {isGuestMode && (\n        <GuestModeNotice variant=\"compact\" showLoginButton={true} />\n      )}\n\n      <View style={[headerStyles.topRow, { flexDirection: rowDirection('row') }]}>\n        <View style={headerStyles.menuWrapper}>\n          <MenuComp options={menuOptions} onSelectOption={onSelectMenuItem} />\n        </View>\n        <View style={headerStyles.searchBarWrapper}>\n          <SearchBar\n            placeholder={placeholder}\n            filterOptions={filterOptions}\n            sortOptions={sortOptions}\n            searchData={searchData}\n            onSearch={onSearch}\n            onFiltersChange={handleFiltersChange}\n            onSortsChange={handleSortsChange}\n            onRemoveFilterRequested={(fn) => { removeFilterRef.current = fn; }}\n            onRemoveSortRequested={(fn) => { removeSortRef.current = fn; }}\n            renderSelectedRow={false}\n            hideSortButton={hideSortButton}\n          />\n        </View>\n        <View style={headerStyles.toggleWrapper}>\n          <ModeToggleButton mode={mode} onToggle={onToggleMode} />\n        </View>\n      </View>\n\n      {/* Selected Filters & Sorts Row - Full width scrollable */}\n      {(selectedFilters.length > 0 || selectedSorts.length > 0) && (\n        <View style={headerStyles.selectedRowWrapper}>\n          <ScrollView\n            horizontal={true}\n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={headerStyles.selectedButtonsContainer}\n            style={headerStyles.selectedScrollView}\n          >\n            {/* Sort items */}\n            {selectedSorts.length > 0 && (\n              <>\n                <Text style={headerStyles.rowLabelInline}>{t('search:sortTitle')}:</Text>\n                {selectedSorts.map((sort) => (\n                  <TouchableOpacity\n                    key={sort}\n                    style={headerStyles.selectedFilterSortButton}\n                    onPress={handleRemoveSort}\n                  >\n                    <Text style={headerStyles.selectedFilterSortButtonText}>\n                      {t(`search:sort.${sort}`)}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={scaleSize(12)} color={colors.black} style={headerStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n\n            {/* Filter items */}\n            {selectedFilters.length > 0 && (\n              <>\n                {selectedSorts.length > 0 && (\n                  <Text style={headerStyles.separator}>â€¢</Text>\n                )}\n                <Text style={headerStyles.rowLabelInline}>{t('search:filterTitle')}:</Text>\n                {selectedFilters.map((filter) => (\n                  <TouchableOpacity\n                    key={filter}\n                    style={headerStyles.selectedFilterSortButton}\n                    onPress={() => handleRemoveFilter(filter)}\n                  >\n                    <Text style={headerStyles.selectedFilterSortButtonText}>\n                      {/* Try trump:filters first (for trump screen), then search:filters */}\n                      {t(`trump:filters.${filter}`, { defaultValue: t(`search:filters.${filter}`, { defaultValue: filter }) })}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={scaleSize(12)} color={colors.black} style={headerStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst headerStyles = StyleSheet.create({\n  headerContainer: {\n    backgroundColor: colors.pinkLight,\n    marginBottom: responsiveSpacing(5, 6, 7),\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    paddingBottom: responsiveSpacing(8, 10, 12),\n    marginTop: responsiveSpacing(10, 12, 14),\n    // Dynamic styles applied in JSX for responsive padding and radius\n  },\n  topRow: {\n    flexDirection: 'row',\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    gap: responsiveSpacing(4, 6, 8), // Responsive gap between elements for better mobile spacing\n    width: '100%',\n  },\n  menuWrapper: {\n    flexShrink: 0, // Don't shrink menu icon\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  searchBarWrapper: {\n    flex: 1, // Take remaining space\n    minWidth: 0, // Allow shrinking below content size\n    marginHorizontal: responsiveSpacing(2, 4, 6),\n  },\n  toggleWrapper: {\n    flexShrink: 0, // Don't shrink toggle button\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  screenTitle: {\n    fontSize: responsiveFontSize(FontSizes.body, 17, 19),\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  // Selected Filters & Sorts Row Styles (Full width, thin, scrollable)\n  selectedRowWrapper: {\n    marginTop: responsiveSpacing(4, 5, 6),\n    maxHeight: responsiveSpacing(28, 32, 36),\n    width: '100%',\n  },\n  selectedScrollView: {\n    maxHeight: responsiveSpacing(28, 32, 36),\n  },\n  rowLabelInline: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: \"600\",\n    color: colors.textSecondary,\n    marginLeft: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  separator: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    color: colors.textTertiary,\n    marginHorizontal: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  selectedButtonsContainer: {\n    flexDirection: \"row-reverse\",\n    gap: responsiveSpacing(4, 5, 6),\n    paddingRight: responsiveSpacing(4, 5, 6),\n    paddingLeft: responsiveSpacing(4, 5, 6),\n    alignItems: 'center',\n    flexGrow: 1,\n  },\n  selectedFilterSortButton: {\n    backgroundColor: colors.pinkLight,\n    paddingVertical: responsiveSpacing(2, 3, 4),\n    paddingHorizontal: responsiveSpacing(4, 5, 6),\n    borderRadius: responsiveSpacing(12, 14, 16),\n    flexDirection: \"row-reverse\",\n    alignItems: \"center\",\n    gap: responsiveSpacing(3, 4, 5),\n    ...createShadowStyle(colors.black, { width: 0, height: scaleSize(0.5) }, 0.05, scaleSize(1)),\n    elevation: 1,\n  },\n  selectedFilterSortButtonText: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: '600',\n    color: colors.black,\n  },\n  removeIcon: {\n    margin: 0,\n  },\n});\n\nexport default HeaderComp;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ItemDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CommonActions' is defined but never used.","line":13,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CommonActions"},"fix":{"range":[238,253],"text":""},"desc":"Remove unused variable \"CommonActions\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[348,351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[348,351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3648,3651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3648,3651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4216,4219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4216,4219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5215,5218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5215,5218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5482,5485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5482,5485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5879,5882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5879,5882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6162,6165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6162,6165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6797,6800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6797,6800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'currentRouteName' is assigned a value but never used.","line":197,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7023,7026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7023,7026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8137,8140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8137,8140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":247,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8871,8874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8871,8874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9275,9278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9275,9278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9558,9561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9558,9561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Modal,\n  ScrollView,\n  TouchableOpacity,\n  Pressable,\n  Image,\n  ActivityIndicator,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, CommonActions } from '@react-navigation/native';\n\ntype NavigationPropType = NavigationProp<ParamListBase> | any;\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { biDiTextAlign, rowDirection } from '../globals/responsive';\nimport { apiService } from '../utils/apiService';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { getCategoryLabel } from '../utils/itemCategoryUtils';\nimport { sendMessage, createConversation, getConversations } from '../utils/chatService';\nimport { toastService, useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\n\nexport interface ItemDetailsModalProps {\n  visible: boolean;\n  onClose: () => void;\n  item: any | null;\n  type: 'item' | 'ride';\n  navigation: NavigationPropType;\n  showOwnerInfo?: boolean; // Default true - hide owner info when viewing from own profile\n}\n\ninterface OwnerInfo {\n  name: string;\n  avatar: string;\n  id: string;\n}\n\nconst ItemDetailsModal: React.FC<ItemDetailsModalProps> = ({\n  visible,\n  onClose,\n  item,\n  type,\n  navigation,\n  showOwnerInfo = true,\n}) => {\n  const { selectedUser } = useUser();\n  const [itemOwner, setItemOwner] = useState<OwnerInfo | null>(null);\n  const [loadingOwner, setLoadingOwner] = useState(false);\n  const { t } = useTranslation(['common', 'trump', 'donations', 'quickMessage']);\n  const [sendingMessage, setSendingMessage] = useState(false);\n  const { ToastComponent } = useToast();\n\n  useEffect(() => {\n    if (visible && item) {\n      const ownerId = type === 'item'\n        ? (item.ownerId || item.owner_id)\n        : (item.driverId || item.driver_id || item.createdBy || item.created_by);\n      if (ownerId) {\n        loadItemOwner(ownerId);\n      }\n    } else {\n      setItemOwner(null);\n    }\n  }, [visible, item, type]);\n\n  const loadItemOwner = async (ownerId: string) => {\n    if (!ownerId) return;\n    setLoadingOwner(true);\n    try {\n      const response = await apiService.getUserById(ownerId);\n      if (response.success && response.data) {\n        setItemOwner({\n          name: response.data.name || '××©×ª××©',\n          avatar: response.data.avatar_url || response.data.avatar || '',\n          id: response.data.id || ownerId,\n        });\n      } else {\n        setItemOwner({\n          name: '××©×ª××©',\n          avatar: '',\n          id: ownerId,\n        });\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×˜×™ ×™×•×–×¨:', error);\n      setItemOwner({\n        name: '××©×ª××©',\n        avatar: '',\n        id: ownerId,\n      });\n    } finally {\n      setLoadingOwner(false);\n    }\n  };\n\n  const handleProfilePress = () => {\n    if (!itemOwner) return;\n    onClose();\n\n    // Check if this is the current user's own profile\n    const isOwnProfile = itemOwner.id === selectedUser?.id;\n\n    if (isOwnProfile) {\n      // Navigate to Profile tab in BottomNavigator instead of UserProfileScreen\n      // This ensures the bottom bar and top bar are visible\n      try {\n        // Navigation structure: MainNavigator -> BottomNavigator -> HomeTabStack -> ItemDetailsModal\n        // We need to find the BottomNavigator (which is the parent of HomeTabStack)\n        // and navigate to ProfileScreen tab through it\n\n        // First, get the parent (HomeTabStack)\n        const homeTabStack = (navigation as any).getParent();\n        if (homeTabStack) {\n          // Then get the parent of HomeTabStack (BottomNavigator)\n          const bottomNavigator = homeTabStack.getParent();\n          if (bottomNavigator) {\n            // Navigate to ProfileScreen tab in BottomNavigator\n            bottomNavigator.navigate('ProfileScreen');\n            logger.debug('ItemDetailsModal', 'Navigated to ProfileScreen tab (own profile)');\n            return;\n          }\n        }\n\n        // Fallback: try to find BottomNavigator by traversing up\n        let currentNav = (navigation as any).getParent();\n        let depth = 0;\n        const maxDepth = 5; // Safety limit\n\n        while (currentNav && depth < maxDepth) {\n          // Check if this navigator has a route named 'ProfileScreen' (it's the BottomNavigator)\n          const state = currentNav.getState?.();\n          if (state?.routeNames?.includes('ProfileScreen')) {\n            // Found BottomNavigator!\n            currentNav.navigate('ProfileScreen');\n            logger.debug('ItemDetailsModal', 'Navigated to ProfileScreen tab via traversal (own profile)');\n            return;\n          }\n\n          const parent = currentNav.getParent?.();\n          if (parent) {\n            currentNav = parent;\n            depth++;\n          } else {\n            break;\n          }\n        }\n\n        // If we couldn't find BottomNavigator, fall back to UserProfileScreen\n        logger.warn('ItemDetailsModal', 'Could not find BottomNavigator, falling back to UserProfileScreen');\n        const parentNavigator = (navigation as any).getParent();\n        if (parentNavigator) {\n          parentNavigator.navigate('UserProfileScreen', {\n            userId: itemOwner.id,\n            userName: itemOwner.name,\n            characterData: null\n          });\n        } else {\n          (navigation as any).navigate('UserProfileScreen', {\n            userId: itemOwner.id,\n            userName: itemOwner.name,\n            characterData: null\n          });\n        }\n      } catch (error) {\n        logger.error('ItemDetailsModal', 'Error navigating to ProfileScreen tab', { error });\n        // Fallback: navigate to UserProfileScreen\n        try {\n          const parentNavigator = (navigation as any).getParent();\n          if (parentNavigator) {\n            parentNavigator.navigate('UserProfileScreen', {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            });\n          } else {\n            (navigation as any).navigate('UserProfileScreen', {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            });\n          }\n        } catch (fallbackError) {\n          logger.error('ItemDetailsModal', 'Fallback navigation also failed', { fallbackError });\n        }\n      }\n    } else {\n      // Navigate to other user's profile via HomeTabStack to keep bottom bar and top bar visible\n      // Try to navigate through HomeScreen first (which is part of BottomNavigator)\n      try {\n        // Check if we're already in HomeTabStack context\n        const currentState = (navigation as any).getState?.();\n        const currentRouteName = currentState?.routes?.[currentState?.index]?.name;\n        \n        // Try to find BottomNavigator\n        let bottomNavigator = null;\n        let currentNav = navigation as any;\n        let depth = 0;\n        const maxDepth = 5;\n        \n        while (currentNav && depth < maxDepth) {\n          const state = currentNav.getState?.();\n          if (state?.routeNames?.includes('HomeScreen')) {\n            bottomNavigator = currentNav;\n            break;\n          }\n          const parent = currentNav.getParent?.();\n          if (parent) {\n            currentNav = parent;\n            depth++;\n          } else {\n            break;\n          }\n        }\n        \n        if (bottomNavigator) {\n          // Navigate through HomeScreen to UserProfileScreen (which is in HomeTabStack)\n          bottomNavigator.navigate('HomeScreen', {\n            screen: 'UserProfileScreen',\n            params: {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            }\n          });\n          logger.debug('ItemDetailsModal', 'Navigated to UserProfileScreen via HomeTabStack');\n          return;\n        }\n        \n        // Fallback: try direct navigation to HomeScreen if available\n        const parentNavigator = (navigation as any).getParent();\n        if (parentNavigator) {\n          try {\n            parentNavigator.navigate('HomeScreen', {\n              screen: 'UserProfileScreen',\n              params: {\n                userId: itemOwner.id,\n                userName: itemOwner.name,\n                characterData: null\n              }\n            });\n            return;\n          } catch (e) {\n            // If that fails, try UserProfileScreen directly as fallback\n            parentNavigator.navigate('UserProfileScreen', {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            });\n          }\n        } else {\n          // Last resort: direct navigation\n          (navigation as any).navigate('UserProfileScreen', {\n            userId: itemOwner.id,\n            userName: itemOwner.name,\n            characterData: null\n          });\n        }\n      } catch (error) {\n        logger.error('ItemDetailsModal', 'Error navigating to UserProfileScreen via HomeTabStack', { error });\n        // Fallback to direct navigation\n        try {\n          const parentNavigator = (navigation as any).getParent();\n          if (parentNavigator) {\n            parentNavigator.navigate('UserProfileScreen', {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            });\n          } else {\n            (navigation as any).navigate('UserProfileScreen', {\n              userId: itemOwner.id,\n              userName: itemOwner.name,\n              characterData: null\n            });\n          }\n        } catch (fallbackError) {\n          logger.error('ItemDetailsModal', 'Fallback navigation also failed', { fallbackError });\n        }\n      }\n    }\n  };\n\n  const handleQuickMessage = async () => {\n    if (!itemOwner || !selectedUser) return;\n\n    // Check if trying to message self\n    if (itemOwner.id === selectedUser.id) return;\n\n    setSendingMessage(true);\n    try {\n      // Get translation with fallback - ensure we get the actual text, not the key\n      const rideText = t('quickMessage:ride', { defaultValue: '×”×× ×˜×¨××¤ ×–×” ×¨×œ×•×•× ×˜×™?' });\n      const itemText = t('quickMessage:item', { defaultValue: '×”×× ×¤×¨×™×˜ ×–×” ×¨×œ×•×•× ×˜×™?' });\n      let messageText = type === 'ride' ? rideText : itemText;\n      \n      // Fallback if translation returns the key itself or empty\n      if (!messageText || messageText === 'quickMessage:ride' || messageText === 'quickMessage:item' || messageText === 'ride' || messageText === 'item') {\n        messageText = type === 'ride' ? '×”×× ×˜×¨××¤ ×–×” ×¨×œ×•×•× ×˜×™?' : '×”×× ×¤×¨×™×˜ ×–×” ×¨×œ×•×•× ×˜×™?';\n      }\n\n      // 1. Try to find existing conversation\n      let conversationId = '';\n      try {\n        const conversations = await getConversations(selectedUser.id);\n        const existingConv = conversations.find(c =>\n          c.participants && c.participants.includes(itemOwner.id)\n        );\n        if (existingConv) {\n          conversationId = existingConv.id;\n        }\n      } catch (e) {\n        console.log('Error finding conversation, will create new', e);\n      }\n\n      // 2. If not found, create new\n      if (!conversationId) {\n        conversationId = await createConversation([selectedUser.id, itemOwner.id]);\n      }\n\n      // 3. Send message with the correct text\n      await sendMessage({\n        conversationId: conversationId,\n        senderId: selectedUser.id,\n        text: messageText,\n        type: 'text',\n        timestamp: new Date().toISOString(),\n        read: false,\n        status: 'sending'\n      });\n\n      toastService.showSuccess(t('quickMessage:success', { defaultValue: '×”×”×•×“×¢×” × ×©×œ×—×” ×‘×”×¦×œ×—×”' }));\n      onClose();\n    } catch (error) {\n      console.error('âŒ Quick message error:', error);\n      toastService.showError(t('quickMessage:error', { defaultValue: '×”×”×•×“×¢×” × ×›×©×œ×”' }));\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n\n  if (!item) return null;\n\n  const renderItemContent = () => {\n    if (type === 'item') {\n      return (\n        <>\n          {/* Item Image */}\n          {item.image_base64 && (\n            <Image\n              source={{ uri: item.image_base64 }}\n              style={styles.modalImage}\n              resizeMode=\"cover\"\n            />\n          )}\n\n          {/* Item Title */}\n          <View style={styles.modalSection}>\n            <Text style={styles.modalItemTitle}>{item.title}</Text>\n            <View style={styles.modalBadge}>\n              <Text style={styles.modalBadgeText}>\n                {getCategoryLabel(item.category)}\n              </Text>\n            </View>\n          </View>\n\n\n          {/* Description */}\n          {item.description && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×ª×™××•×¨:</Text>\n              <Text style={styles.modalDescription}>{item.description}</Text>\n            </View>\n          )}\n\n          {/* Condition */}\n          {item.condition && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>××¦×‘:</Text>\n              <Text style={styles.modalText}>\n                {item.condition === 'new' ? 'ğŸ†• ×—×“×©' :\n                  item.condition === 'like_new' ? 'âœ¨ ×›××• ×—×“×©' :\n                    item.condition === 'used' ? 'ğŸ“¦ ××©×•××©' : 'ğŸ”§ ×œ×—×œ×¤×™×'}\n              </Text>\n            </View>\n          )}\n\n          {/* Quantity */}\n          {(item.qty || item.quantity) && (item.qty || item.quantity) > 1 && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×›××•×ª:</Text>\n              <Text style={styles.modalText}>{item.qty || item.quantity}</Text>\n            </View>\n          )}\n\n          {/* Location */}\n          {(item.city || item.address) && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>××™×§×•×:</Text>\n              <Text style={styles.modalText}>\n                ğŸ“ {item.city || ''}{item.address ? `, ${item.address}` : ''}\n              </Text>\n            </View>\n          )}\n\n          {/* Date and Time */}\n          {(item.timestamp || item.created_at || item.createdAt) && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×ª××¨×™×š ×•×©×¢×”:</Text>\n              <Text style={styles.modalText}>\n                ğŸ“… {(() => {\n                  const dateStr = item.timestamp || item.created_at || item.createdAt;\n                  const date = new Date(dateStr);\n                  return date.toLocaleDateString('he-IL') + ' ' + date.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });\n                })()}\n              </Text>\n            </View>\n          )}\n        </>\n      );\n    } else {\n      // Ride content\n      return (\n        <>\n          {/* Ride Route */}\n          <View style={styles.modalSection}>\n            <Text style={styles.modalItemTitle}>×˜×¨××¤</Text>\n            <View style={styles.modalBadge}>\n              <Text style={styles.modalBadgeText}>ğŸš— × ×¡×™×¢×”</Text>\n            </View>\n          </View>\n\n          {/* Route */}\n          <View style={styles.modalSection}>\n            <Text style={styles.modalLabel}>××¡×œ×•×œ:</Text>\n            <Text style={styles.modalText}>\n              ğŸ“ {item.from || item.from_location?.name || '×œ× ×¦×•×™×™×Ÿ'} â {item.to || item.to_location?.name || '×œ× ×¦×•×™×™×Ÿ'}\n            </Text>\n          </View>\n\n          {/* Price */}\n          <View style={styles.modalSection}>\n            <Text style={styles.modalPrice}>\n              {(item.price ?? item.price_per_seat ?? 0) === 0 ? '×‘×—×™× ×' : `â‚ª${item.price || item.price_per_seat}`}\n            </Text>\n          </View>\n\n          {/* Date and Time */}\n          {(item.date || item.departure_time) && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×ª××¨×™×š ×•×©×¢×”:</Text>\n              <Text style={styles.modalText}>\n                ğŸ“… {item.departure_time\n                  ? new Date(item.departure_time).toLocaleDateString('he-IL') + ' ' + new Date(item.departure_time).toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })\n                  : item.date + ' ' + (item.time || '')}\n              </Text>\n            </View>\n          )}\n\n          {/* Seats */}\n          {(item.seats || item.available_seats) && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>××§×•××•×ª ×¤× ×•×™×™×:</Text>\n              <Text style={styles.modalText}>\n                ğŸ‘¥ {item.available_seats || item.seats || 0} ××§×•××•×ª\n              </Text>\n            </View>\n          )}\n\n          {/* Description */}\n          {item.description && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×”×¢×¨×•×ª:</Text>\n              <Text style={styles.modalDescription}>{item.description}</Text>\n            </View>\n          )}\n\n          {/* Tags */}\n          {(item.noSmoking || item.petsAllowed || item.kidsFriendly) && (\n            <View style={styles.modalSection}>\n              <Text style={styles.modalLabel}>×ª×’×™×•×ª:</Text>\n              <View style={styles.tagsContainer}>\n                {item.noSmoking && <View style={styles.tag}><Text style={styles.tagText}>ğŸš«ğŸš­</Text></View>}\n                {item.petsAllowed && <View style={styles.tag}><Text style={styles.tagText}>ğŸ¾</Text></View>}\n                {item.kidsFriendly && <View style={styles.tag}><Text style={styles.tagText}>ğŸ‘¶</Text></View>}\n              </View>\n            </View>\n          )}\n        </>\n      );\n    }\n  };\n\n  const getModalTitle = () => {\n    return type === 'item' ? '×¤×¨×˜×™ ×”×¤×¨×™×˜' : '×¤×¨×˜×™ ×”×˜×¨××¤';\n  };\n\n  const getOwnerLabel = () => {\n    return type === 'item' ? '×¤×•×¨×¡× ×¢×œ ×™×“×™:' : '× ×”×’:';\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"slide\"\n      onRequestClose={onClose}\n    >\n      <Pressable\n        style={styles.modalOverlay}\n        onPress={onClose}\n      >\n        <Pressable\n          style={styles.modalCard}\n          onPress={() => { }}\n        >\n          {/* Header */}\n          <View style={styles.modalHeader}>\n            <Text style={styles.modalTitle}>{getModalTitle()}</Text>\n            <TouchableOpacity onPress={onClose} style={styles.modalCloseButton}>\n              <Icon name=\"close\" size={24} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          {/* Content */}\n          <ScrollView style={styles.modalContent} showsVerticalScrollIndicator={false}>\n            {renderItemContent()}\n\n            {/* Owner/Driver Info - Only show if showOwnerInfo is true */}\n            {showOwnerInfo && (\n              <View style={styles.modalSection}>\n                <Text style={styles.modalLabel}>{getOwnerLabel()}</Text>\n\n                {/* Quick Message Button - Only if not own item */}\n                {itemOwner && selectedUser && itemOwner.id !== selectedUser.id && (\n                  <TouchableOpacity\n                    style={styles.quickMessageButton}\n                    onPress={handleQuickMessage}\n                    disabled={sendingMessage}\n                  >\n                    {sendingMessage ? (\n                      <ActivityIndicator size=\"small\" color={colors.white} />\n                    ) : (\n                      <>\n                        <Icon name=\"chatbubble-ellipses-outline\" size={18} color={colors.white} />\n                        <Text style={styles.quickMessageText}>\n                          {(() => {\n                            const rideText = t('quickMessage:ride', { defaultValue: '×”×× ×˜×¨××¤ ×–×” ×¨×œ×•×•× ×˜×™?' });\n                            const itemText = t('quickMessage:item', { defaultValue: '×”×× ×¤×¨×™×˜ ×–×” ×¨×œ×•×•× ×˜×™?' });\n                            return type === 'ride' ? rideText : itemText;\n                          })()}\n                        </Text>\n                      </>\n                    )}\n                  </TouchableOpacity>\n                )}\n\n                {loadingOwner ? (\n                  <ActivityIndicator size=\"small\" color={colors.primary} style={{ marginVertical: 8 }} />\n                ) : itemOwner ? (\n                  <TouchableOpacity\n                    style={styles.ownerCard}\n                    onPress={handleProfilePress}\n                    activeOpacity={0.7}\n                  >\n                    {itemOwner.avatar ? (\n                      <Image\n                        source={{ uri: itemOwner.avatar }}\n                        style={styles.ownerAvatar}\n                      />\n                    ) : (\n                      <View style={styles.ownerAvatarPlaceholder}>\n                        <Icon name=\"person\" size={24} color={colors.textSecondary} />\n                      </View>\n                    )}\n                    <View style={styles.ownerInfo}>\n                      <Text style={styles.ownerName}>{itemOwner.name}</Text>\n                      <Text style={styles.ownerLink}>×œ×—×¥ ×œ×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ â†’</Text>\n                    </View>\n                    <Icon name=\"chevron-forward\" size={20} color={colors.textSecondary} />\n                  </TouchableOpacity>\n                ) : (\n                  <Text style={styles.modalText}>××™×“×¢ ×œ× ×–××™×Ÿ</Text>\n                )}\n              </View>\n            )}\n          </ScrollView>\n        </Pressable>\n      </Pressable>\n      {ToastComponent}\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalCard: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    maxHeight: '85%',\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: rowDirection('row-reverse'),\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  modalCloseButton: {\n    padding: 4,\n  },\n  modalContent: {\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n  },\n  modalImage: {\n    width: '100%',\n    height: 250,\n    borderRadius: 12,\n    marginBottom: 16,\n  },\n  modalSection: {\n    marginBottom: 16,\n  },\n  modalItemTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('right'),\n    marginBottom: 8,\n  },\n  modalBadge: {\n    alignSelf: 'flex-start',\n    backgroundColor: colors.successLight,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 8,\n    marginBottom: 8,\n  },\n  modalBadgeText: {\n    fontSize: FontSizes.small,\n    color: colors.success,\n    fontWeight: 'bold',\n  },\n  modalPrice: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.accent,\n    textAlign: biDiTextAlign('right'),\n  },\n  modalLabel: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textSecondary,\n    marginBottom: 6,\n    textAlign: biDiTextAlign('right'),\n  },\n  modalDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    lineHeight: 22,\n    textAlign: biDiTextAlign('right'),\n  },\n  modalText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('right'),\n  },\n  ownerCard: {\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    backgroundColor: colors.pinkLight,\n    borderRadius: 12,\n    padding: 12,\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n  },\n  ownerAvatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginLeft: 12,\n  },\n  ownerAvatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginLeft: 12,\n  },\n  ownerInfo: {\n    flex: 1,\n  },\n  ownerName: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('right'),\n    marginBottom: 4,\n  },\n  ownerLink: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    textAlign: biDiTextAlign('right'),\n  },\n  tagsContainer: {\n    flexDirection: rowDirection('row-reverse'),\n    gap: 6,\n    marginTop: 8,\n  },\n  tag: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 6,\n  },\n  tagText: {\n    fontSize: FontSizes.small,\n  },\n  quickMessageButton: {\n    backgroundColor: colors.primary,\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 20, // Rounded button\n    marginBottom: 12, // Space above profile card\n    gap: 8,\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  quickMessageText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n});\n\nexport default ItemDetailsModal;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LanguageSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[864,867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[864,867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LanguageSelector Component\n * \n * A floating action button (FAB) component that provides language switching functionality\n * between Hebrew and English with RTL support. Features include a dropdown menu,\n * proper accessibility support, and platform-specific styling.\n * \n * @author KC Development Team\n * @version 1.8.0\n * @since 1.0.0\n */\n\nimport React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  Alert,\n  Platform,\n  StyleSheet,\n  I18nManager,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport i18n from '../app/i18n';\nimport colors from '../globals/colors';\n\n// TypeScript Interfaces\ninterface LanguageSelectorProps {\n  /** Custom style for the container */\n  containerStyle?: any;\n  /** Whether to show the language menu */\n  showMenu?: boolean;\n  /** Callback when language is changed */\n  onLanguageChange?: (language: 'he' | 'en') => void;\n}\n\ninterface LanguageState {\n  menuOpen: boolean;\n  currentLanguage: 'he' | 'en';\n}\n\ntype SupportedLanguage = 'he' | 'en';\n\n/**\n * LanguageSelector Component\n * \n * Handles the complete language switching flow including:\n * - Language menu toggle\n * - Language application with RTL support\n * - AsyncStorage persistence\n * - Platform-specific restart notifications\n * - Proper accessibility support\n */\nconst LanguageSelector: React.FC<LanguageSelectorProps> = ({\n  containerStyle,\n  showMenu = true,\n  onLanguageChange,\n}) => {\n  const { t } = useTranslation(['common', 'settings']);\n\n  // State management\n  const [languageState, setLanguageState] = useState<LanguageState>({\n    menuOpen: false,\n    currentLanguage: i18n.language as SupportedLanguage,\n  });\n\n  /**\n   * Applies the selected language with RTL support\n   */\n  const applyLanguage = async (language: SupportedLanguage) => {\n    try {\n      // Save language preference to AsyncStorage\n      await AsyncStorage.setItem('app_language', language);\n\n      // Change i18n language\n      await i18n.changeLanguage(language);\n\n      // Update current language state\n      setLanguageState(prev => ({ ...prev, currentLanguage: language }));\n\n      // Handle RTL support for Hebrew\n      const isRTL = language === 'he';\n      if (I18nManager.isRTL !== isRTL) {\n        I18nManager.allowRTL(isRTL);\n        I18nManager.forceRTL(isRTL);\n\n        // Show restart notification for native platforms\n        if (Platform.OS !== 'web') {\n          Alert.alert(\n            t('settings:restartRequired') as string,\n            t('settings:restartDesc') as string\n          );\n        }\n      }\n\n      // Notify parent component\n      onLanguageChange?.(language);\n    } catch (error) {\n      console.error('Failed to apply language:', error);\n    } finally {\n      setLanguageState(prev => ({ ...prev, menuOpen: false }));\n    }\n  };\n\n  /**\n   * Toggles the language menu visibility\n   */\n  const toggleLanguageMenu = () => {\n    setLanguageState(prev => ({\n      ...prev,\n      menuOpen: !prev.menuOpen\n    }));\n  };\n\n  /**\n   * Handles language selection\n   */\n  const handleLanguageSelect = (language: SupportedLanguage) => {\n    applyLanguage(language);\n  };\n\n  return (\n    <View style={[styles.container, containerStyle]}>\n      <TouchableOpacity\n        style={styles.fab}\n        activeOpacity={0.8}\n        onPress={toggleLanguageMenu}\n        accessible={true}\n        accessibilityLabel=\"Language selector\"\n        accessibilityHint=\"Tap to change language\"\n        accessibilityRole=\"button\"\n      >\n        <Ionicons name=\"globe-outline\" size={22} color={colors.textPrimary} />\n      </TouchableOpacity>\n\n      {showMenu && languageState.menuOpen && (\n        <View style={styles.menu}>\n          <TouchableOpacity\n            style={[\n              styles.menuItem,\n              languageState.currentLanguage === 'he' && styles.selectedMenuItem\n            ]}\n            onPress={() => handleLanguageSelect('he')}\n            accessible={true}\n            accessibilityLabel=\"Hebrew language\"\n            accessibilityHint=\"Switch to Hebrew\"\n            accessibilityRole=\"button\"\n          >\n            <Text style={[\n              styles.menuText,\n              languageState.currentLanguage === 'he' && styles.selectedMenuText\n            ]}>\n              {t('common:languages.he')}\n            </Text>\n            {languageState.currentLanguage === 'he' && (\n              <Ionicons name=\"checkmark\" size={16} color={colors.primary} />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[\n              styles.menuItem,\n              languageState.currentLanguage === 'en' && styles.selectedMenuItem\n            ]}\n            onPress={() => handleLanguageSelect('en')}\n            accessible={true}\n            accessibilityLabel=\"English language\"\n            accessibilityHint=\"Switch to English\"\n            accessibilityRole=\"button\"\n          >\n            <Text style={[\n              styles.menuText,\n              languageState.currentLanguage === 'en' && styles.selectedMenuText\n            ]}>\n              {t('common:languages.en')}\n            </Text>\n            {languageState.currentLanguage === 'en' && (\n              <Ionicons name=\"checkmark\" size={16} color={colors.primary} />\n            )}\n          </TouchableOpacity>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    top: 12,\n    right: 16,\n    alignItems: 'flex-end',\n    zIndex: 20,\n    ...(Platform.OS === 'web' ? { pointerEvents: 'box-none' } : {}),\n  },\n  fab: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: 'transparent',\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0px 2px 4px rgba(0, 0, 0, 0.1)',\n    } : {\n      shadowColor: colors.black,\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n      elevation: 3,\n    }),\n  },\n  menu: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    paddingVertical: 6,\n    marginTop: 5,\n    minWidth: 130,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0px 4px 8px rgba(0, 0, 0, 0.15)',\n    } : {\n      shadowColor: colors.black,\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.15,\n      shadowRadius: 8,\n      elevation: 6,\n    }),\n  },\n  menuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    minHeight: 40,\n  },\n  selectedMenuItem: {\n    backgroundColor: 'rgba(76, 126, 255, 0.08)',\n  },\n  menuText: {\n    fontSize: 14,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    flex: 1,\n  },\n  selectedMenuText: {\n    color: colors.primary,\n    fontWeight: '600',\n  },\n});\n\nexport default LanguageSelector;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LocationSearchComp.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1037,1040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1037,1040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  TextInput,\n  FlatList,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Platform,\n} from \"react-native\";\nimport colors from \"../globals/colors\";\nimport { FontSizes } from \"../globals/constants\";\nimport { logger } from '../utils/loggerService';\nimport { useTranslation } from 'react-i18next';\n\ninterface PlacePrediction {\n  description: string;\n  place_id: string;\n  structured_formatting?: {\n    main_text: string;\n    secondary_text: string;\n  };\n}\n\ninterface LocationSearchCompProps {\n  onLocationSelected: (location: string) => void;\n  placeholder?: string;\n}\n\nconst GOOGLE_API_KEY = process.env.EXPO_PUBLIC_GOOGLE_MAPS_API_KEY || \"\";\n\nconst LocationSearchComp: React.FC<LocationSearchCompProps> = ({\n  onLocationSelected,\n  placeholder,\n}) => {\n  const { t } = useTranslation(['search', 'common']);\n  const [query, setQuery] = useState<string>(\"\");\n  const [results, setResults] = useState<PlacePrediction[]>([]);\n  const [debounceTimer, setDebounceTimer] = useState<any>(null);\n\n  const searchGooglePlaces = async (inputText: string) => {\n    const startTime = Date.now();\n    const url =\n      Platform.OS === \"web\"\n        ? `http://localhost:3001/autocomplete?input=${encodeURIComponent(\n          inputText\n        )}`\n        : `https://maps.googleapis.com/maps/api/place/autocomplete/json?${new URLSearchParams({\n          input: inputText,\n          key: GOOGLE_API_KEY,\n          language: 'he',\n          components: 'country:il'\n        }).toString()}`;\n\n    try {\n      logger.info('LocationSearch', 'Google Places API call started', {\n        input: inputText,\n        platform: Platform.OS\n      });\n\n      const response = await fetch(url);\n      const json = await response.json();\n      const duration = Date.now() - startTime;\n\n      logger.info('LocationSearch', 'Google Places API call completed', {\n        status: response.status,\n        duration,\n        resultsCount: Platform.OS === \"web\" ? json.length : json.predictions?.length || 0\n      });\n\n      if (Platform.OS !== \"web\" && json.status !== \"OK\") {\n        logger.warn('LocationSearch', 'Google Places API error', {\n          status: json.status,\n          errorMessage: json.error_message\n        });\n        console.warn(\"Google Places returned:\", json.status, json.error_message);\n        setResults([]);\n        return;\n      }\n\n      // On web, we already get predictions directly from the backend\n      setResults(Platform.OS === \"web\" ? json : json.predictions);\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      logger.error('LocationSearch', 'Google Places API call failed', {\n        error: error instanceof Error ? error.message : 'Unknown error',\n        duration\n      });\n      console.error(\"Autocomplete error:\", error);\n      setResults([]);\n    }\n  };\n\n  const handleChangeText = (text: string) => {\n    setQuery(text);\n    onLocationSelected(text);\n\n    if (debounceTimer) {\n      clearTimeout(debounceTimer);\n    }\n\n    const timer = setTimeout(() => {\n      if (text.length > 1) {\n        logger.info('LocationSearch', 'Location search triggered', {\n          queryLength: text.length\n        });\n        searchGooglePlaces(text);\n      } else {\n        setResults([]);\n      }\n    }, 300);\n    setDebounceTimer(timer);\n  };\n\n  const handleSelect = (item: PlacePrediction) => {\n    logger.info('LocationSearch', 'Location selected', {\n      screen: 'LocationSearch',\n      action: 'location_selected',\n      selectedLocation: item.description\n    });\n    setQuery(item.description);\n    setResults([]);\n    onLocationSelected(item.description);\n  };\n\n  useEffect(() => {\n    return () => {\n      if (debounceTimer) {\n        clearTimeout(debounceTimer);\n      }\n    };\n  }, [debounceTimer]);\n\n  return (\n    <View style={local_styles.container}>\n      <TextInput\n        value={query}\n        onChangeText={handleChangeText}\n        placeholder={placeholder || (t('search:locationPlaceholder') as string)}\n        placeholderTextColor={colors.black}\n        style={local_styles.input}\n      />\n\n      {results.length > 0 && (\n        <View style={local_styles.resultsContainer}>\n          <FlatList\n            data={results}\n            keyExtractor={(item) => item.place_id}\n            renderItem={({ item }) => (\n              <TouchableOpacity\n                style={local_styles.item}\n                onPress={() => handleSelect(item)}\n              >\n                <Text style={local_styles.itemText}>\n                  {item.description}\n                </Text>\n              </TouchableOpacity>\n            )}\n            keyboardShouldPersistTaps=\"handled\"\n            nestedScrollEnabled\n            scrollEnabled\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst local_styles = StyleSheet.create({\n  container: {\n    paddingHorizontal: 15,\n    marginBottom: 15,\n    width: \"100%\",\n  },\n  resultsContainer: {\n    maxHeight: 200,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    marginTop: 5,\n    backgroundColor: colors.white,\n    overflow: \"hidden\",\n    elevation: 3,\n    shadowColor: colors.black,\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: colors.border,\n    paddingHorizontal: 12,\n    borderRadius: 8,\n    fontSize: FontSizes.body,\n    backgroundColor: colors.backgroundSecondary,\n    textAlign: \"right\",\n    writingDirection: \"rtl\",\n    minHeight: 25,\n  },\n  item: {\n    paddingVertical: 12,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderColor: colors.border,\n  },\n  itemText: {\n    textAlign: \"right\",\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n  },\n});\n\nexport default LocationSearchComp;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/LoginSidePanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[375,389],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[389,401],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scaleSize' is defined but never used.","line":25,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"scaleSize"},"fix":{"range":[715,766],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":39,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":40,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isGuestMode' is assigned a value but never used.","line":40,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emailExists' is assigned a value but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emailStatusMessage' is assigned a value but never used.","line":52,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emailSuggestions' is assigned a value but never used.","line":53,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3489,3492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3489,3492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LoginSidePanel.tsx\n// A side panel component that displays the login interface for large screens (desktop/tablet)\n// This component reuses the login logic from LoginScreen but renders it as a side panel\n// instead of a full screen navigation\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Dimensions,\n  Platform,\n  ScrollView,\n  TextInput,\n  Alert,\n  ActivityIndicator,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { scaleSize } from '../globals/responsive';\nimport { getLoginSidePanelWidth } from '../globals/responsive';\n\ninterface LoginSidePanelProps {\n  visible: boolean;\n  onClose: () => void;\n  onLoginSuccess?: () => void;\n}\n\nconst LoginSidePanel: React.FC<LoginSidePanelProps> = ({\n  visible,\n  onClose,\n  onLoginSuccess\n}) => {\n  const { t } = useTranslation(['common']);\n  const { setSelectedUserWithMode, setGuestMode, selectedUser, isGuestMode } = useUser();\n\n  // Animation values\n  const slideAnim = useRef(new Animated.Value(0)).current;\n  const overlayAnim = useRef(new Animated.Value(0)).current;\n\n  // Login state\n  const [emailStep, setEmailStep] = useState<'email' | 'password'>('email');\n  const [emailValue, setEmailValue] = useState('');\n  const [passwordValue, setPasswordValue] = useState('');\n  const [isEmailBusy, setIsEmailBusy] = useState(false);\n  const [emailExists, setEmailExists] = useState<boolean | null>(null);\n  const [emailStatusMessage, setEmailStatusMessage] = useState<string | null>(null);\n  const [emailSuggestions, setEmailSuggestions] = useState<string[]>([]);\n\n  // Organization login state\n  const [orgLoginOpen, setOrgLoginOpen] = useState(false);\n  const [orgQuery, setOrgQuery] = useState('');\n  const [isCheckingOrg, setIsCheckingOrg] = useState(false);\n  const orgOpenAnim = useRef(new Animated.Value(0)).current;\n\n  // Email login state\n  const [emailLoginOpen, setEmailLoginOpen] = useState(false);\n  const emailOpenAnim = useRef(new Animated.Value(0)).current;\n\n  // Screen dimensions\n  const panelWidth = getLoginSidePanelWidth();\n\n  // Animation effects\n  useEffect(() => {\n    if (visible) {\n      Animated.parallel([\n        Animated.timing(slideAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n        Animated.timing(overlayAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(slideAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: false,\n        }),\n        Animated.timing(overlayAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    }\n  }, [visible, slideAnim, overlayAnim]);\n\n  // Login handlers (simplified versions from LoginScreen)\n  const handleLoginWithCharacter = async (characterType: 'seeker' | 'offerer') => {\n    try {\n      const userData = {\n        id: `guest_${Date.now()}`,\n        name: characterType === 'seeker' ? '××—×¤×©' : '××¦×™×¢',\n        email: `guest_${characterType}@example.com`,\n        characterType,\n        isGuest: true,\n        profileImage: null,\n      };\n\n      await setSelectedUserWithMode(userData as any, 'real');\n      onLoginSuccess?.();\n    } catch (error) {\n      console.error('Login error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××”×œ×š ×”×›× ×™×¡×”');\n    }\n  };\n\n  const handleGuestMode = async () => {\n    try {\n      await setGuestMode();\n      onLoginSuccess?.();\n    } catch (error) {\n      console.error('Guest mode error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××”×œ×š ×”×›× ×™×¡×”');\n    }\n  };\n\n  const resetEmailState = () => {\n    setEmailStep('email');\n    setPasswordValue('');\n    setIsEmailBusy(false);\n    setEmailExists(null);\n    setEmailStatusMessage(null);\n    setEmailSuggestions([]);\n  };\n\n  const resetOrgState = () => {\n    setOrgQuery('');\n    setIsCheckingOrg(false);\n  };\n\n  const toggleOrgLogin = () => {\n    const next = !orgLoginOpen;\n    if (next && emailLoginOpen) {\n      setEmailLoginOpen(false);\n      Animated.timing(emailOpenAnim, { toValue: 0, duration: 200, useNativeDriver: false }).start();\n      resetEmailState();\n    }\n    setOrgLoginOpen(next);\n    if (!next) resetOrgState();\n    Animated.timing(orgOpenAnim, {\n      toValue: next ? 1 : 0,\n      duration: 260,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const toggleEmailLogin = () => {\n    const next = !emailLoginOpen;\n    if (next && orgLoginOpen) {\n      setOrgLoginOpen(false);\n      Animated.timing(orgOpenAnim, { toValue: 0, duration: 200, useNativeDriver: false }).start();\n      resetOrgState();\n    }\n    setEmailLoginOpen(next);\n    if (!next) resetEmailState();\n    Animated.timing(emailOpenAnim, {\n      toValue: next ? 1 : 0,\n      duration: 260,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  // Animation styles\n  const panelAnimatedStyle = {\n    transform: [\n      {\n        translateX: slideAnim.interpolate({\n          inputRange: [0, 1],\n          outputRange: [panelWidth, 0],\n        }),\n      },\n    ],\n  };\n\n  const overlayAnimatedStyle = {\n    opacity: overlayAnim,\n  };\n\n  if (!visible) return null;\n\n  return (\n    <>\n      {/* Overlay */}\n      <Animated.View style={[styles.overlay, overlayAnimatedStyle]}>\n        <TouchableOpacity\n          style={styles.overlayTouchable}\n          activeOpacity={1}\n          onPress={onClose}\n        />\n      </Animated.View>\n\n      {/* Side Panel */}\n      <Animated.View style={[\n        styles.panel,\n        { width: panelWidth },\n        panelAnimatedStyle\n      ]}>\n        {/* Header */}\n        <View style={styles.header}>\n          <Text style={styles.title}>×›× ×™×¡×” ×œ××¤×œ×™×§×¦×™×”</Text>\n          <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n            <Ionicons name=\"close\" size={24} color={colors.textSecondary} />\n          </TouchableOpacity>\n        </View>\n\n        {/* Content */}\n        <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n          {/* Character Selection */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>×‘×—×¨ ×ª×¤×§×™×“</Text>\n            <View style={styles.characterButtons}>\n              <TouchableOpacity\n                style={[styles.characterButton, styles.seekerButton]}\n                onPress={() => handleLoginWithCharacter('seeker')}\n              >\n                <Text style={styles.characterButtonText}>××—×¤×©</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.characterButton, styles.offererButton]}\n                onPress={() => handleLoginWithCharacter('offerer')}\n              >\n                <Text style={styles.characterButtonText}>××¦×™×¢</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* Guest Mode */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.guestButton}\n              onPress={handleGuestMode}\n            >\n              <Text style={styles.guestButtonText}>×”××©×š ×›××•×¨×—</Text>\n            </TouchableOpacity>\n          </View>\n\n          {/* Organization Login */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.loginOptionButton}\n              onPress={toggleOrgLogin}\n            >\n              <Text style={styles.loginOptionText}>×›× ×™×¡×” ×“×¨×š ××¨×’×•×Ÿ</Text>\n              <Ionicons\n                name={orgLoginOpen ? \"chevron-up\" : \"chevron-down\"}\n                size={20}\n                color={colors.textSecondary}\n              />\n            </TouchableOpacity>\n\n            {orgLoginOpen && (\n              <Animated.View style={[\n                styles.loginForm,\n                {\n                  opacity: orgOpenAnim,\n                  transform: [{\n                    scaleY: orgOpenAnim.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [0, 1],\n                    }),\n                  }],\n                }\n              ]}>\n                <TextInput\n                  style={styles.input}\n                  placeholder=\"×©× ×”××¨×’×•×Ÿ\"\n                  value={orgQuery}\n                  onChangeText={setOrgQuery}\n                  placeholderTextColor={colors.textSecondary}\n                />\n                <TouchableOpacity\n                  style={[styles.submitButton, isCheckingOrg && styles.submitButtonDisabled]}\n                  disabled={isCheckingOrg}\n                >\n                  {isCheckingOrg ? (\n                    <ActivityIndicator size=\"small\" color={colors.textPrimary} />\n                  ) : (\n                    <Text style={styles.submitButtonText}>×—×¤×© ××¨×’×•×Ÿ</Text>\n                  )}\n                </TouchableOpacity>\n              </Animated.View>\n            )}\n          </View>\n\n          {/* Email Login */}\n          <View style={styles.section}>\n            <TouchableOpacity\n              style={styles.loginOptionButton}\n              onPress={toggleEmailLogin}\n            >\n              <Text style={styles.loginOptionText}>×›× ×™×¡×” ×¢× ××™××™×™×œ</Text>\n              <Ionicons\n                name={emailLoginOpen ? \"chevron-up\" : \"chevron-down\"}\n                size={20}\n                color={colors.textSecondary}\n              />\n            </TouchableOpacity>\n\n            {emailLoginOpen && (\n              <Animated.View style={[\n                styles.loginForm,\n                {\n                  opacity: emailOpenAnim,\n                  transform: [{\n                    scaleY: emailOpenAnim.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [0, 1],\n                    }),\n                  }],\n                }\n              ]}>\n                <TextInput\n                  style={styles.input}\n                  placeholder=\"×›×ª×•×‘×ª ××™××™×™×œ\"\n                  value={emailValue}\n                  onChangeText={setEmailValue}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                  placeholderTextColor={colors.textSecondary}\n                />\n                {emailStep === 'password' && (\n                  <TextInput\n                    style={[styles.input, styles.passwordInput]}\n                    placeholder=\"×¡×™×¡××”\"\n                    value={passwordValue}\n                    onChangeText={setPasswordValue}\n                    secureTextEntry\n                    placeholderTextColor={colors.textSecondary}\n                  />\n                )}\n                <TouchableOpacity\n                  style={[styles.submitButton, isEmailBusy && styles.submitButtonDisabled]}\n                  disabled={isEmailBusy}\n                >\n                  {isEmailBusy ? (\n                    <ActivityIndicator size=\"small\" color={colors.textPrimary} />\n                  ) : (\n                    <Text style={styles.submitButtonText}>\n                      {emailStep === 'email' ? '×”××©×š' : '×”×ª×—×‘×¨'}\n                    </Text>\n                  )}\n                </TouchableOpacity>\n              </Animated.View>\n            )}\n          </View>\n        </ScrollView>\n      </Animated.View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 1000,\n  },\n  overlayTouchable: {\n    flex: 1,\n  },\n  panel: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.background,\n    zIndex: 1001,\n    shadowColor: colors.black,\n    shadowOffset: {\n      width: -2,\n      height: 0,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    elevation: 10,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  title: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  section: {\n    marginVertical: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n    textAlign: 'right',\n  },\n  characterButtons: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  characterButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  seekerButton: {\n    backgroundColor: colors.info,\n  },\n  offererButton: {\n    backgroundColor: colors.success,\n  },\n  characterButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  guestButton: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  guestButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '500',\n    color: colors.textSecondary,\n  },\n  loginOptionButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  loginOptionText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '500',\n    color: colors.textPrimary,\n  },\n  loginForm: {\n    marginTop: 12,\n    gap: 12,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  passwordInput: {\n    marginTop: 8,\n  },\n  submitButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  submitButtonDisabled: {\n    opacity: 0.6,\n  },\n  submitButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n});\n\nexport default LoginSidePanel;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/MenuComp.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'View' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"View"},"fix":{"range":[76,84],"text":""},"desc":"Remove unused variable \"View\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect } from \"react\";\nimport {\n  Modal,\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Animated,\n  ScrollView,\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../globals/colors\";\nimport { FontSizes } from \"../globals/constants\";\nimport { getResponsiveMenuStyles, responsiveFontSize, responsiveSpacing, scaleSize } from \"../globals/responsive\";\nimport { createShadowStyle } from \"../globals/styles\";\n\n// Define the props that the MenuComp component will accept\ninterface MenuCompProps {\n  options: string[]; // Array of strings for the menu items\n  onSelectOption: (option: string) => void; // Function to call when an option is selected\n}\n\nconst MenuComp: React.FC<MenuCompProps> = ({ options, onSelectOption }) => {\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n\n  // Animated values for scale and opacity\n  const scaleAnim = useRef(new Animated.Value(0.01)).current;\n  const opacityAnim = useRef(new Animated.Value(0)).current;\n\n  // Get responsive menu styles\n  const menuStyles = getResponsiveMenuStyles();\n\n  const openMenu = () => {\n    setIsVisible(true);\n  };\n\n  const closeMenu = () => setIsVisible(false);\n\n  useEffect(() => {\n    if (isVisible) {\n      Animated.parallel([\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 8,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacityAnim, {\n          toValue: 1,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(scaleAnim, {\n          toValue: 0.01,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n        Animated.timing(opacityAnim, {\n          toValue: 0,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n      ]).start();\n    }\n  }, [isVisible, scaleAnim, opacityAnim]);\n\n  return (\n    <>\n      {/* The menu icon that opens the dropdown */}\n      <TouchableOpacity\n        onPress={openMenu}\n        style={localStyles.menuIconPlacement}\n      >\n        <Ionicons name=\"menu\" size={scaleSize(22)} color={colors.menuText} />\n      </TouchableOpacity>\n\n      {/* Modal is only rendered when isVisible is true */}\n      {isVisible && (\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isVisible}\n          onRequestClose={closeMenu}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPressOut={closeMenu}\n          >\n            <Animated.View\n              style={[\n                localStyles.modalContent,\n                {\n                  opacity: opacityAnim,\n                  transform: [{ scale: scaleAnim }],\n                  // Position the modal content relative to the top-right of the screen - responsive\n                  top: menuStyles.top,\n                  right: menuStyles.right,\n                  minWidth: menuStyles.minWidth,\n                  maxWidth: menuStyles.maxWidth,\n                  maxHeight: menuStyles.maxHeight,\n                  paddingVertical: menuStyles.paddingVertical,\n                  paddingHorizontal: menuStyles.paddingHorizontal,\n                  borderRadius: menuStyles.borderRadius,\n                },\n              ]}\n            >\n              <ScrollView showsVerticalScrollIndicator={false}>\n                {options.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.menuOption,\n                      index === options.length - 1 && { borderBottomWidth: 0 },\n                    ]}\n                    onPress={() => {\n                      onSelectOption(option);\n                      closeMenu(); // Close the menu after selection\n                    }}\n                  >\n                    <Text style={localStyles.menuOptionText}>{option}</Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </Animated.View>\n          </TouchableOpacity>\n        </Modal>\n      )}\n    </>\n  );\n};\n\nconst localStyles = StyleSheet.create({\n  menuIconPlacement: {\n    padding: responsiveSpacing(5, 6, 8),\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n  },\n  modalContent: {\n    backgroundColor: colors.menuBackground,\n    position: \"absolute\",\n    // Dynamic styles applied in JSX for responsive sizing\n    ...createShadowStyle(colors.black, { width: 0, height: scaleSize(2) }, 0.25, scaleSize(3.84)),\n    elevation: 5,\n    borderWidth: 1,\n    borderColor: colors.menuBorder,\n  },\n  menuOption: {\n    paddingHorizontal: responsiveSpacing(20, 24, 28),\n    paddingVertical: responsiveSpacing(12, 14, 16),\n    borderBottomWidth: 1,\n    borderBottomColor: colors.menuBorder,\n    width: \"100%\",\n    alignSelf: \"flex-end\", // Align text to the right for rtl layout\n  },\n  menuOptionText: {\n    fontSize: responsiveFontSize(FontSizes.body, 16, 18),\n    textAlign: \"right\", // Text alignment for rtl\n    writingDirection: \"rtl\", // Explicit rtl text direction\n    color: colors.menuText,\n  },\n});\n\nexport default MenuComp;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ModeToggleButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/OrganizationLoginForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[567,581],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1226,1229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1226,1229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2075,2078],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2075,2078],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4600,4603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4600,4603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5015,5018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5015,5018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5211,5214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5211,5214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5293,5296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5293,5296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":228,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6217,6220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6217,6220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * OrganizationLoginForm Component\n * \n * A comprehensive organization authentication form component that handles organization lookup,\n * approval status checking, and navigation to organization onboarding when needed.\n * Features include organization name/email search, recent email suggestions,\n * and proper error handling with user feedback.\n * \n * @author KC Development Team\n * @version 1.8.0\n * @since 1.0.0\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  Alert,\n  Animated,\n  StyleSheet,\n  Dimensions,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { db } from '../utils/databaseService';\nimport colors from '../globals/colors';\n\n// TypeScript Interfaces\ninterface OrganizationLoginFormProps {\n  /** Whether the form is currently open/expanded */\n  isOpen: boolean;\n  /** Callback to toggle the form open/closed state */\n  onToggle: () => void;\n  /** Callback when user successfully logs in as organization */\n  onLoginSuccess: (userData: any) => void;\n  /** Animation value for form expansion */\n  animationValue: Animated.Value;\n}\n\ninterface OrganizationFormState {\n  query: string;\n  isChecking: boolean;\n  suggestions: string[];\n}\n\ninterface RecentEmailsState {\n  emails: string[];\n  suggestions: string[];\n}\n\nconst KNOWN_EMAILS_KEY = 'known_emails';\n\n/**\n * OrganizationLoginForm Component\n * \n * Handles the complete organization authentication flow including:\n * - Organization name/email search\n * - Approval status checking\n * - Recent email suggestions\n * - Navigation to onboarding for new organizations\n * - Proper error handling and user feedback\n */\nconst OrganizationLoginForm: React.FC<OrganizationLoginFormProps> = ({\n  isOpen,\n  onToggle,\n  onLoginSuccess,\n  animationValue,\n}) => {\n  const { t } = useTranslation(['auth', 'common']);\n  const navigation = useNavigation<any>();\n\n  // Form state management\n  const [formState, setFormState] = useState<OrganizationFormState>({\n    query: '',\n    isChecking: false,\n    suggestions: [],\n  });\n\n  const [recentEmails, setRecentEmails] = useState<RecentEmailsState>({\n    emails: [],\n    suggestions: [],\n  });\n\n  // Reset form state when form is closed\n  useEffect(() => {\n    if (!isOpen) {\n      resetFormState();\n    }\n  }, [isOpen]);\n\n  // Update email suggestions based on current input\n  useEffect(() => {\n    if (!isOpen) {\n      setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n      return;\n    }\n\n    const query = formState.query.trim().toLowerCase();\n    if (!query) {\n      setRecentEmails(prev => ({\n        ...prev,\n        suggestions: recentEmails.emails.slice(0, 5)\n      }));\n      return;\n    }\n\n    const filtered = recentEmails.emails\n      .filter(email => email.toLowerCase().includes(query))\n      .slice(0, 5);\n\n    setRecentEmails(prev => ({ ...prev, suggestions: filtered }));\n  }, [formState.query, isOpen, recentEmails.emails]);\n\n  // Load recent emails on component mount\n  useEffect(() => {\n    loadRecentEmails();\n  }, []);\n\n  /**\n   * Resets the form to its initial state\n   */\n  const resetFormState = () => {\n    setFormState({\n      query: '',\n      isChecking: false,\n      suggestions: [],\n    });\n  };\n\n  /**\n   * Loads recent emails from AsyncStorage\n   */\n  const loadRecentEmails = async () => {\n    try {\n      const raw = await AsyncStorage.getItem('recent_emails');\n      if (raw) {\n        const list = JSON.parse(raw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n          return;\n        }\n      }\n\n      // Fallback to known emails\n      const knownRaw = await AsyncStorage.getItem(KNOWN_EMAILS_KEY);\n      if (knownRaw) {\n        const list = JSON.parse(knownRaw);\n        if (Array.isArray(list)) {\n          setRecentEmails(prev => ({ ...prev, emails: list }));\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load recent emails:', error);\n    }\n  };\n\n  /**\n   * Handles organization confirmation and lookup\n   */\n  const handleOrgConfirm = async () => {\n    try {\n      const query = formState.query.trim();\n\n      if (!query) {\n        Alert.alert(\n          t('common:error') as string,\n          t('auth:org.enterNameOrEmail') as string\n        );\n        return;\n      }\n\n      setFormState(prev => ({ ...prev, isChecking: true }));\n\n      // Search for organization applications\n      let applications: any[] = [];\n      const isEmail = query.includes('@');\n\n      if (isEmail) {\n        // Search by email (primary key)\n        const emailKey = query.toLowerCase();\n        applications = await db.listOrgApplications(emailKey);\n      } else {\n        // Search by organization name from admin queue\n        const all = await db.listOrgApplications('admin_org_queue');\n        applications = (all || []).filter((app: any) =>\n          String(app.orgName || '').toLowerCase().includes(query.toLowerCase())\n        );\n      }\n\n      // Check for approved applications\n      const approved = applications.find((app: any) => app.status === 'approved');\n      const pending = applications.find((app: any) => app.status === 'pending');\n\n      if (approved) {\n        // Create organization user and login\n        await handleApprovedOrganization(approved, isEmail, query);\n        return;\n      }\n\n      if (pending) {\n        Alert.alert(\n          t('auth:org.pendingTitle') as string,\n          t('auth:org.pendingMessage') as string\n        );\n        setFormState(prev => ({ ...prev, isChecking: false }));\n        return;\n      }\n\n      // Organization not found - navigate to onboarding\n      navigation.navigate('OrgOnboardingScreen' as never);\n    } catch (error) {\n      console.error('Org login check failed:', error);\n      Alert.alert(\n        t('common:error') as string,\n        t('auth:org.checkFailed') as string\n      );\n      setFormState(prev => ({ ...prev, isChecking: false }));\n    }\n  };\n\n  /**\n   * Handles login for approved organizations\n   */\n  const handleApprovedOrganization = async (approved: any, isEmail: boolean, query: string) => {\n    try {\n      const email = String(approved.contactEmail || (isEmail ? query : '')).toLowerCase();\n\n      const orgUser = {\n        id: `org_${approved.id}`,\n        name: approved.orgName || (t('auth:org.defaultName') as string),\n        email: email || `org_${approved.id}@example.org`,\n        phone: approved.contactPhone || '+9720000000',\n        avatar: 'https://i.pravatar.cc/150?img=12',\n        bio: t('auth:org.defaultBio') as string,\n        karmaPoints: 0,\n        joinDate: new Date().toISOString(),\n        isActive: true,\n        lastActive: new Date().toISOString(),\n        location: {\n          city: approved.city || (t('common:labels.countryIsrael') as string),\n          country: 'IL'\n        },\n        interests: [],\n        roles: ['org_admin'],\n        postsCount: 0,\n        followersCount: 0,\n        followingCount: 0,\n        notifications: [],\n        settings: { language: 'he', darkMode: false, notificationsEnabled: true },\n      };\n\n      onLoginSuccess(orgUser);\n    } catch (error) {\n      console.error('Failed to create organization user:', error);\n      setFormState(prev => ({ ...prev, isChecking: false }));\n    }\n  };\n\n  /**\n   * Handles suggestion selection\n   */\n  const handleSuggestionSelect = (email: string) => {\n    setFormState(prev => ({ ...prev, query: email }));\n    setRecentEmails(prev => ({ ...prev, suggestions: [] }));\n  };\n\n  if (!isOpen) {\n    return (\n      <View style={styles.container}>\n        <TouchableOpacity\n          style={[styles.ctaButton, styles.orgButton]}\n          onPress={onToggle}\n          activeOpacity={0.85}\n        >\n          <Text style={[styles.ctaButtonText, { color: colors.secondary, fontWeight: '700' }]}>\n            {t('auth:org.cta')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.expandedRow}>\n        <Animated.View style={[styles.miniButton, { opacity: animationValue }]}>\n          <TouchableOpacity onPress={onToggle} activeOpacity={0.8}>\n            <Ionicons name=\"business-outline\" size={20} color={colors.secondary} />\n          </TouchableOpacity>\n        </Animated.View>\n\n        <TextInput\n          style={styles.input}\n          placeholder={t('auth:org.placeholder')}\n          placeholderTextColor={colors.textTertiary}\n          value={formState.query}\n          onChangeText={(text) => setFormState(prev => ({ ...prev, query: text }))}\n          autoCapitalize=\"none\"\n          autoCorrect={false}\n          textAlign=\"right\"\n          autoComplete=\"email\"\n          textContentType=\"emailAddress\"\n          inputMode=\"email\"\n          returnKeyType=\"done\"\n          onSubmitEditing={handleOrgConfirm}\n          accessible={true}\n          accessibilityLabel={t('auth:org.placeholder')}\n          accessibilityHint={t('auth:org.accessibilityHint') || 'Enter your organization email'}\n          importantForAccessibility=\"yes\"\n        />\n\n        <TouchableOpacity\n          style={[styles.actionButton, formState.isChecking && styles.disabledButton]}\n          onPress={handleOrgConfirm}\n          disabled={formState.isChecking}\n          activeOpacity={0.85}\n        >\n          <Text style={styles.actionButtonText}>\n            {formState.isChecking ? t('auth:org.checking') : t('auth:org.continue')}\n          </Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Email suggestions dropdown */}\n      {recentEmails.suggestions.length > 0 && (\n        <View style={styles.suggestionsBox}>\n          {recentEmails.suggestions.map((suggestion) => (\n            <TouchableOpacity\n              key={suggestion}\n              style={styles.suggestionItem}\n              onPress={() => handleSuggestionSelect(suggestion)}\n            >\n              <Text style={styles.suggestionText}>{suggestion}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 3,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  ctaButton: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 16,\n    alignItems: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    width: '100%',\n    marginVertical: 6,\n    marginBottom: 22,\n  },\n  orgButton: {\n    borderColor: colors.secondary,\n    width: '100%',\n  },\n  ctaButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: colors.textSecondary,\n    textAlign: 'center',\n    width: '100%',\n  },\n  expandedRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 12,\n    padding: 6,\n    marginHorizontal: 0,\n    marginVertical: 3,\n    gap: 8,\n    width: '100%',\n  },\n  miniButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(255, 107, 157, 0.08)',\n  },\n  input: {\n    flex: 1,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n  },\n  actionButton: {\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 10,\n  },\n  actionButtonText: {\n    color: colors.white,\n    fontWeight: '700',\n    fontSize: 14,\n  },\n  disabledButton: {\n    backgroundColor: colors.textTertiary,\n    opacity: 0.6,\n  },\n  suggestionsBox: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 10,\n    marginTop: 6,\n    marginBottom: 6,\n    overflow: 'hidden',\n  },\n  suggestionItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  suggestionText: {\n    fontSize: 14,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n});\n\nexport default OrganizationLoginForm;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/PostsReelsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[213,225],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ActionSheetIOS' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ActionSheetIOS"},"fix":{"range":[225,243],"text":""},"desc":"Remove unused variable \"ActionSheetIOS\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Option' is defined but never used.","line":25,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Option"},"fix":{"range":[664,676],"text":""},"desc":"Remove unused variable \"Option\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'usePostDeletion' is defined but never used.","line":32,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":25,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"usePostDeletion"},"fix":{"range":[1017,1077],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showTopBar' is assigned a value but never used.","line":53,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1835,1838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1835,1838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sliderValue' is assigned a value but never used.","line":64,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'postId' is defined but never used.","line":85,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSliderChange' is assigned a value but never used.","line":212,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":212,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'count' is defined but never used.","line":352,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":352,"endColumn":42}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useRef } from 'react';\nimport {\n  View,\n  FlatList,\n  StyleSheet,\n  Dimensions,\n  SafeAreaView,\n  NativeSyntheticEvent,\n  NativeScrollEvent,\n  RefreshControl,\n  Text,\n  Alert,\n  Platform,\n  ActionSheetIOS\n} from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation } from '@react-navigation/native';\n\nimport colors from '../globals/colors';\nimport { FeedItem } from '../types/feed';\nimport { useFeedData } from '../hooks/useFeedData';\nimport PostReelItem from './Feed/PostReelItem';\nimport FeedHeader from './Feed/FeedHeader';\nimport CommentsModal from './CommentsModal';\nimport OptionsModal, { Option } from './Feed/OptionsModal';\nimport ReportPostModal from './Feed/ReportPostModal';\nimport EditPostModal from './Feed/EditPostModal';\nimport { apiService } from '../utils/apiService';\nimport { postsService } from '../utils/postsService';\nimport VerticalGridSlider from './VerticalGridSlider';\nimport { logger } from '../utils/loggerService';\nimport { usePostDeletion } from '../hooks/usePostDeletion';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport { useUser } from '../stores/userStore';\nimport { toastService } from '../utils/toastService';\nimport { isMobileWeb } from '../globals/responsive';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = isMobileWeb();\nconst HORIZONTAL_PADDING = isMobile ? 8 : 16; // Padding from screen edges\nconst COLUMN_GAP = isMobile ? 8 : 16; // Gap between columns in grid view\n\n// Props\ninterface PostsReelsScreenProps {\n  onScroll?: (hide: boolean) => void;\n  hideTopBar?: boolean;\n  showTopBar?: boolean;\n}\n\nconst PostsReelsScreen: React.FC<PostsReelsScreenProps> = ({\n  onScroll,\n  hideTopBar = false,\n  showTopBar = false\n}) => {\n  const { t } = useTranslation();\n  const navigation = useNavigation<any>();\n  const { selectedUser } = useUser();\n\n  // State\n  const [feedMode, setFeedMode] = useState<'friends' | 'discovery'>('friends');\n  const [commentsModalVisible, setCommentsModalVisible] = useState(false);\n  const [selectedItemForComments, setSelectedItemForComments] = useState<FeedItem | null>(null);\n  const [numColumns, setNumColumns] = useState(1); // Default to list view\n  const [sliderValue, setSliderValue] = useState(0); // 0 = 1 col, 1 = 2 cols, 2 = 3 cols\n\n  // Report State\n  const [isSubmittingReport, setIsSubmittingReport] = useState(false);\n\n  // Edit State\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [selectedItemForEdit, setSelectedItemForEdit] = useState<FeedItem | null>(null);\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu({\n    onDelete: (postId) => {\n      refresh(); // Refresh feed on success\n    },\n    onReport: (item) => {\n      setSelectedPostForReport(item);\n      setReportModalVisible(true);\n    },\n    onEdit: (item) => {\n      setSelectedItemForEdit(item);\n      setEditModalVisible(true);\n    },\n    onHide: async (item) => {\n      if (!selectedUser?.id) return;\n\n      try {\n        const result = await postsService.hidePost(item.id, selectedUser.id);\n        if (result.success) {\n          toastService.showSuccess(t('post.hideSuccess') || '×”×¤×•×¡×˜ ×”×•×¡×ª×¨ ×‘×”×¦×œ×—×”');\n          refresh();\n        } else {\n          toastService.showError(result.error || t('post.hideError') || '×©×’×™××” ×‘×”×¡×ª×¨×ª ×”×¤×•×¡×˜');\n        }\n      } catch (error) {\n        console.error('Error hiding post:', error);\n        toastService.showError(t('post.hideError') || '×©×’×™××” ×‘×”×¡×ª×¨×ª ×”×¤×•×¡×˜');\n      }\n    }\n  });\n\n  // Custom Hook for Data\n  const { feed, loading, refreshing, refresh } = useFeedData(feedMode);\n\n  // Scroll Handling\n  const lastScrollY = useRef(0);\n  const handleScroll = useCallback((event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const currentScrollY = event.nativeEvent.contentOffset.y;\n    const isScrollingDown = currentScrollY > lastScrollY.current;\n\n    if (onScroll) {\n      // Simple logic: hide if scrolling down more than 50px, show if scrolling up\n      if (currentScrollY > 50 && isScrollingDown) {\n        onScroll(true);\n      } else if (currentScrollY < lastScrollY.current - 20) {\n        onScroll(false);\n      }\n    }\n    lastScrollY.current = currentScrollY;\n  }, [onScroll]);\n\n  // Handlers\n  const handleStatsPress = useCallback(() => {\n    logger.debug('PostsReelsScreen', 'Navigating to CommunityStatsScreen');\n    navigation.navigate('CommunityStatsScreen');\n  }, [navigation]);\n\n  const handlePostPress = useCallback((item: FeedItem) => {\n    logger.debug('PostsReelsScreen', 'Post pressed', { itemId: item.id });\n    // TODO: Implement navigation to individual post screen if exists\n  }, []);\n\n  const handleCommentPress = useCallback((item: FeedItem) => {\n    setSelectedItemForComments(item);\n    setCommentsModalVisible(true);\n  }, []);\n\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n\n    setIsSubmittingReport(true);\n    try {\n      const adminEmail = 'navesarussi@gmail.com';\n      // Resolve admin ID - try multiple methods\n      let adminId: string | null = null;\n      try {\n        const resolveRes = await apiService.resolveUserId({ email: adminEmail });\n        if (resolveRes.success && resolveRes.data?.id) {\n          adminId = resolveRes.data.id;\n        }\n      } catch (e) { console.warn('Resolve admin failed', e); }\n\n      if (!adminId) {\n        // Fallback or better error handling needed in real app\n        // For MVP we might need to assume a system user or fail gracefuly\n        // Attempt search\n        const searchRes = await apiService.getUsers({ search: adminEmail, limit: 1 });\n        if (searchRes.success && searchRes.data?.[0]?.id) {\n          adminId = searchRes.data[0].id;\n        }\n      }\n\n      if (adminId && selectedUser?.id) {\n        const taskData = {\n          title: `Report on Post: ${selectedPostForReport.title || selectedPostForReport.id}`,\n          description: `Reporter: ${selectedUser.name} (${selectedUser.email})\\nPost ID: ${selectedPostForReport.id}\\nReason: ${reason}\\n\\nLink: /post/${selectedPostForReport.id}`, // Deep-linking to be implemented\n          status: 'reports',\n          priority: 'high',\n          category: 'moderation',\n          assignee_id: adminId,\n          created_by: selectedUser.id,\n          due_date: new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString(), // 48h SLA\n          metadata: {\n            related_post_id: selectedPostForReport.id,\n            report_reason: reason\n          }\n        };\n\n        const res = await apiService.createTask(taskData);\n        if (res.success) {\n          Alert.alert(t('common.success') || 'Success', t('common.report_sent') || 'Report sent successfully');\n          setReportModalVisible(false);\n          setSelectedPostForReport(null);\n        } else {\n          throw new Error(res.error || 'Failed to create task');\n        }\n      } else {\n        throw new Error('Could not resolve admin or user ID');\n      }\n\n    } catch (error) {\n      console.error('Report failed:', error);\n      Alert.alert(t('common.error') || 'Error', t('common.report_failed') || 'Failed to send report');\n    } finally {\n      setIsSubmittingReport(false);\n    }\n  };\n\n\n  const handleSliderChange = useCallback((value: number) => {\n    // Round to nearest integer standardizing step behavior\n    const step = Math.round(value);\n    setSliderValue(step);\n\n    // Map slider value (0-2) to columns (1-3)\n    setNumColumns(step + 1);\n  }, []);\n\n  const renderItem = useCallback(({ item }: { item: FeedItem }) => {\n    // Calculate available width: screen width minus horizontal padding on both sides\n    const availableWidth = width - (HORIZONTAL_PADDING * 2);\n\n    // For grid view: calculate width with gaps between columns\n    // Using space-between in columnWrapper, so we need to account for gaps\n    const totalGaps = (numColumns - 1) * COLUMN_GAP;\n    const itemWidth = (availableWidth - totalGaps) / numColumns;\n\n    return (\n      <PostReelItem\n        item={item}\n        cardWidth={itemWidth}\n        numColumns={numColumns}\n        onPress={handlePostPress}\n        onCommentPress={handleCommentPress}\n        onMorePress={handleMorePress}\n      />\n    );\n  }, [handlePostPress, handleCommentPress, handleMorePress, numColumns]);\n\n  const renderEmptyComponent = () => (\n    <View style={styles.emptyContainer}>\n      {!loading && (\n        <>\n          <Text style={styles.emptyText}>{t('feed.empty_title') || '××™×Ÿ ×¤×•×¡×˜×™× ×¢×“×™×™×Ÿ'}</Text>\n          <Text style={styles.emptySubtext}>\n            {feedMode === 'friends'\n              ? (t('feed.empty_friends') || '×”×•×¡×£ ×—×‘×¨×™× ×›×“×™ ×œ×¨××•×ª ×¤×•×¡×˜×™×!')\n              : (t('feed.empty_discovery') || '×”×™×” ×”×¨××©×•×Ÿ ×œ×¤×¨×¡×!')\n            }\n          </Text>\n        </>\n      )}\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.contentContainer}>\n        {/* Header */}\n        {!hideTopBar && (\n          <FeedHeader\n            feedMode={feedMode}\n            setFeedMode={setFeedMode}\n            onStatsPress={handleStatsPress}\n            t={t}\n          />\n        )}\n\n        {/* Floating Slider Control - Rendered independently to respect its absolute positioning */}\n        {!loading && feed.length > 0 && !hideTopBar && (\n          <VerticalGridSlider\n            numColumns={numColumns}\n            onNumColumnsChange={(cols) => {\n              setSliderValue(cols - 1);\n              setNumColumns(cols);\n            }}\n          />\n        )}\n\n        {/* Feed List */}\n        <FlatList\n          data={feed}\n          renderItem={renderItem}\n          keyExtractor={(item) => item.id}\n          key={numColumns} // Force re-render on column change\n          numColumns={numColumns}\n          columnWrapperStyle={numColumns > 1 ? styles.columnWrapper : undefined}\n          contentContainerStyle={[\n            styles.listContent,\n            // Add padding top to account for floating header\n            !hideTopBar && { paddingTop: 70 }\n          ]}\n          onScroll={handleScroll}\n          scrollEventThrottle={16}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={refresh} colors={[colors.primary]} />\n          }\n          ListEmptyComponent={renderEmptyComponent}\n          // Optimization props\n          initialNumToRender={5}\n          maxToRenderPerBatch={5}\n          windowSize={10}\n          removeClippedSubviews={false}\n          showsVerticalScrollIndicator={false}\n        />\n\n        {/* Modals */}\n        <OptionsModal\n          visible={optionsModalVisible}\n          onClose={() => setOptionsModalVisible(false)}\n          options={modalOptions}\n          title={t('common.options') || 'Options'}\n          anchorPosition={modalPosition}\n        />\n        <ReportPostModal\n          visible={reportModalVisible}\n          onClose={() => setReportModalVisible(false)}\n          onSubmit={handleReportSubmit}\n          isLoading={isSubmittingReport}\n        />\n        <EditPostModal\n          visible={editModalVisible}\n          item={selectedItemForEdit}\n          onClose={() => {\n            setEditModalVisible(false);\n            setSelectedItemForEdit(null);\n          }}\n          onSave={async (postId, updates) => {\n            if (!selectedUser?.id) return;\n\n            const result = await postsService.updatePost(postId, selectedUser.id, updates);\n            if (result.success) {\n              refresh();\n            } else {\n              throw new Error(result.error || 'Failed to update post');\n            }\n          }}\n        />\n        {selectedItemForComments && (\n          <CommentsModal\n            visible={commentsModalVisible}\n            onClose={() => setCommentsModalVisible(false)}\n            postId={selectedItemForComments.id}\n            postUser={selectedItemForComments.user ? {\n              id: selectedItemForComments.user.id,\n              name: selectedItemForComments.user.name || null,\n              avatar: selectedItemForComments.user.avatar || 'https://picsum.photos/seed/user/100/100'\n            } : undefined}\n            postTitle={selectedItemForComments.title || ''}\n            onCommentsCountChange={(count) => {\n              // Update the comments count in the feed\n              refresh();\n            }}\n          />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  contentContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  listContent: {\n    paddingBottom: 80, // Space for bottom bar\n    paddingHorizontal: HORIZONTAL_PADDING, // Padding from screen edges\n  },\n  columnWrapper: {\n    // Gap will be handled by marginHorizontal on individual items\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 100,\n  },\n  emptyText: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8,\n  },\n  emptySubtext: {\n    fontSize: 16,\n    color: colors.textSecondary,\n  }\n});\n\nexport default React.memo(PostsReelsScreen);\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/PostsReelsScreenWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ProfileCompletionBanner.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":60,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[89,99],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1124,1127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1124,1127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'i18n' is assigned a value but never used.","line":29,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport type { User } from '../stores/userStore';\nimport { useTranslation } from 'react-i18next';\n\nconst isFullName = (name?: string): boolean => {\n  if (!name) return false;\n  const parts = name.trim().split(/\\s+/);\n  return parts.length >= 2 && parts.join(' ').length >= 4;\n};\n\nconst getMissingFields = (user: User | null) => {\n  const missing: Array<'avatar' | 'fullName' | 'address'> = [];\n  if (!user?.avatar) missing.push('avatar');\n  if (!isFullName(user?.name)) missing.push('fullName');\n  const hasAddress = Boolean(user?.location && user.location.city && user.location.country);\n  if (!hasAddress) missing.push('address');\n  return missing;\n};\n\nexport default function ProfileCompletionBanner() {\n  const navigation = useNavigation<any>();\n  const { selectedUser, isGuestMode, isAuthenticated } = useUser();\n  const { t, i18n } = useTranslation(['profile']);\n\n  const missing = useMemo(() => getMissingFields(selectedUser), [selectedUser]);\n\n  if (!isAuthenticated || isGuestMode) return null;\n  if (!selectedUser) return null;\n  if (missing.length === 0) return null;\n\n  return (\n    <View style={styles.wrapper}>\n      <View style={styles.container}>\n        <View style={styles.inlineRow}>\n          <Ionicons name=\"information-circle-outline\" size={18} color={colors.info} style={styles.icon} />\n          <Text style={styles.title} numberOfLines={2}>\n            {t('profile:banner.title')}\n          </Text>\n          <TouchableOpacity\n            style={styles.ctaButton}\n            onPress={() => navigation.navigate('EditProfileScreen')}\n            activeOpacity={0.8}\n          >\n            <Ionicons name=\"create-outline\" size={14} color={colors.white} />\n            <Text style={styles.ctaText}>{t('profile:banner.cta')}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  container: {\n    backgroundColor: colors.infoLight,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRightWidth: 4,\n    borderRightColor: colors.info,\n  },\n  inlineRow: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  icon: {\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  title: {\n    flex: 1,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  ctaButton: {\n    backgroundColor: colors.secondary,\n    borderRadius: 20,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 6,\n  },\n  ctaText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    fontWeight: '700',\n  },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ScreenWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hideTopBar' is assigned a value but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showPosts' is assigned a value but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1176,1179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1176,1179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'webStyles' is assigned a value but never used.","line":51,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":16}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Platform, StyleSheet } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { NavigationProp, ParamListBase } from '@react-navigation/native';\nimport styles from '../globals/styles';\n\ninterface ScreenWrapperProps {\n  children?: React.ReactNode;\n  navigation?: NavigationProp<ParamListBase>;\n  hideTopBar?: boolean;\n  showPosts?: boolean;\n  style?: object;\n}\n\nexport default function ScreenWrapper({\n  children,\n  navigation,\n  hideTopBar = false,\n  showPosts = false,\n  style = {}\n}: ScreenWrapperProps) {\n  if (Platform.OS === 'web') {\n    // Flatten styles to check for issues and enforce overrides\n    const flatStyle = StyleSheet.flatten([styles.safeArea, style]);\n\n    // Remove potentially problematic styles for web scrolling\n    // We strictly enforce height: 100% to ensure FlatList inside knows its bounds\n    const webSafeStyle = {\n      ...flatStyle,\n      height: '100%',\n      minHeight: undefined, // Explicitly remove minHeight to fix double-scroll/no-scroll\n      maxHeight: '100%',\n      flex: 1,\n      overflow: 'hidden'\n    };\n\n    return (\n      <View style={webSafeStyle as any}>\n        {children || null}\n      </View>\n    );\n  }\n\n  return (\n    <SafeAreaView style={[styles.safeArea, style]}>\n      {children || null}\n    </SafeAreaView>\n  );\n}\n\nconst webStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden', // Ensure no double scrollbars\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/ScrollContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SCREEN_HEIGHT' is assigned a value but never used.","line":20,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2560,2563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2560,2563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4098,4101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4098,4101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4166,4169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4166,4169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5343,5346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5343,5346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":213,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7354,7357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7354,7357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8375,8378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8375,8378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":250,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8409,8412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8409,8412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":252,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8493,8496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8493,8496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":253,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8532,8535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8532,8535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8642,8645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8642,8645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8691,8694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8691,8694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8703,8706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8703,8706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8931,8934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8931,8934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ScrollContainer.tsx\n// Universal scrolling component that handles web and mobile consistently\n// Automatically preserves scroll position across re-renders\nimport React, { MutableRefObject } from 'react';\nimport {\n  ScrollView,\n  ScrollViewProps,\n  FlatList,\n  View,\n  Platform,\n  Dimensions,\n  StyleSheet,\n  ViewStyle,\n  StyleProp,\n} from 'react-native';\nimport { useRoute, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { useScrollPositionWithHandler } from '../hooks/useScrollPosition';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\ninterface ScrollContainerProps extends Omit<ScrollViewProps, 'style' | 'contentContainerStyle'> {\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  contentStyle?: StyleProp<ViewStyle>;\n  enableWebScrolling?: boolean;\n  scrollRef?: MutableRefObject<ScrollView | null> | React.RefObject<ScrollView | FlatList> | null;\n  /** Optional screen key for scroll position preservation. If not provided, uses route name automatically */\n  screenKey?: string;\n  /** Enable/disable scroll position preservation. Default: true */\n  preserveScrollPosition?: boolean;\n}\n\n/**\n * ScrollContainer - Universal scrolling component\n * \n * Features:\n * - Platform-specific scrolling (CSS overflow for web, ScrollView for native)\n * - Consistent behavior across all platforms\n * - Optimized performance for each platform\n * \n * Usage:\n * ```tsx\n * <ScrollContainer>\n *   <YourContent />\n * </ScrollContainer>\n * ```\n */\nexport default function ScrollContainer({\n  children,\n  style,\n  contentStyle,\n  enableWebScrolling = true,\n  scrollRef: externalScrollRef = null,\n  screenKey: providedScreenKey,\n  preserveScrollPosition = true,\n  onScroll: externalOnScroll,\n  ...scrollViewProps\n}: ScrollContainerProps) {\n  const route = useRoute();\n\n  // Get screen key for scroll position preservation\n  // Use provided key, or fallback to route name, or component name\n  const screenKey = providedScreenKey || route.name || 'ScrollContainer';\n\n  // Use scroll position preservation hook if enabled\n  const { ref: preservedScrollRef, onScroll: preservedOnScroll } = useScrollPositionWithHandler(\n    screenKey,\n    { enabled: preserveScrollPosition }\n  );\n\n  // Use preserved ref if no external ref provided, otherwise use external ref\n  const internalScrollRef = preservedScrollRef;\n  const finalScrollRef = externalScrollRef || internalScrollRef;\n\n  // Combine scroll handlers - call both preserved and external handlers\n  const handleScroll = React.useCallback(\n    (event: any) => {\n      if (preserveScrollPosition) {\n        preservedOnScroll(event);\n      }\n      if (externalOnScroll) {\n        externalOnScroll(event);\n      }\n    },\n    [preserveScrollPosition, preservedOnScroll, externalOnScroll]\n  );\n\n  // Ref for web View element (for scroll position on web)\n  const webScrollRef = React.useRef<View | null>(null);\n  const scrollTimeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Handle scroll position for web - restore when screen gains focus\n  useFocusEffect(\n    React.useCallback(() => {\n      if (Platform.OS === 'web' && enableWebScrolling && preserveScrollPosition) {\n        const restorePosition = async () => {\n          try {\n            const { useUserStore } = await import('../stores/userStore');\n            const userId = useUserStore.getState().selectedUser?.id || null;\n            const storageKey = `scroll_pos_${screenKey}_${userId || 'guest'}`;\n\n            let savedPosition: string | null = null;\n            if (typeof window !== 'undefined' && window.localStorage) {\n              savedPosition = window.localStorage.getItem(storageKey);\n            }\n\n            if (savedPosition) {\n              const position = parseFloat(savedPosition);\n              if (!isNaN(position) && position > 0) {\n                // Wait for DOM to be ready - longer delay for web\n                setTimeout(() => {\n                  try {\n                    // Find the scrollable element in the DOM\n                    const element = (webScrollRef.current as any)?._nativeNode ||\n                      (webScrollRef.current as any)?.firstElementChild;\n\n                    if (element) {\n                      if (typeof element.scrollTo === 'function') {\n                        element.scrollTo({ top: position, behavior: 'auto' });\n                      } else if (element.scrollTop !== undefined) {\n                        element.scrollTop = position;\n                      }\n                    }\n                  } catch (error) {\n                    console.warn('Failed to restore scroll position on web', error);\n                  }\n                }, 500);\n              }\n            }\n          } catch (error) {\n            console.warn('Error loading scroll position for web', error);\n          }\n        };\n\n        restorePosition();\n      }\n    }, [screenKey, preserveScrollPosition, enableWebScrolling])\n  );\n\n  // Handle scroll events for web - attach event listener to DOM\n  React.useLayoutEffect(() => {\n    if (Platform.OS !== 'web' || !enableWebScrolling || !preserveScrollPosition) {\n      return;\n    }\n\n    let cleanupFn: (() => void) | null = null;\n    // Wait a bit for DOM to be ready\n    const timeoutId = setTimeout(() => {\n      const element = (webScrollRef.current as any)?._nativeNode;\n\n      if (!element) return;\n\n      const handleScroll = () => {\n        // Clear existing timeout\n        if (scrollTimeoutRef.current) {\n          clearTimeout(scrollTimeoutRef.current);\n        }\n\n        // Debounce save\n        scrollTimeoutRef.current = setTimeout(async () => {\n          try {\n            const scrollTop = element.scrollTop || 0;\n\n            if (scrollTop > 0) {\n              const { useUserStore } = await import('../stores/userStore');\n              const userId = useUserStore.getState().selectedUser?.id || null;\n              const storageKey = `scroll_pos_${screenKey}_${userId || 'guest'}`;\n\n              if (typeof window !== 'undefined' && window.localStorage) {\n                window.localStorage.setItem(storageKey, scrollTop.toString());\n              }\n            }\n          } catch (error) {\n            console.warn('Error saving scroll position for web', error);\n          }\n        }, 200);\n      };\n\n      element.addEventListener('scroll', handleScroll, { passive: true });\n\n      // Store cleanup function\n      cleanupFn = () => {\n        element.removeEventListener('scroll', handleScroll);\n        if (scrollTimeoutRef.current) {\n          clearTimeout(scrollTimeoutRef.current);\n        }\n      };\n    }, 100);\n\n    // Cleanup function\n    return () => {\n      clearTimeout(timeoutId);\n      if (cleanupFn) {\n        cleanupFn();\n      }\n    };\n  }, [screenKey, preserveScrollPosition, enableWebScrolling]);\n\n  const resolvedRef = finalScrollRef ? (node: ScrollView | null) => {\n    if ('current' in finalScrollRef) {\n      // Handle both MutableRefObject and RefObject\n      (finalScrollRef as MutableRefObject<ScrollView | null>).current = node;\n    }\n  } : undefined;\n\n  if (Platform.OS === 'web' && enableWebScrolling) {\n    // Web: Custom scrollable container with CSS overflow\n    return (\n      <View\n        ref={webScrollRef}\n        style={[styles.webScrollContainer, style]}\n        {...{ \"data-scroll-container\": \"true\" } as any}\n      >\n        <View style={[styles.webScrollContent, contentStyle]}>\n          {children || null}\n        </View>\n      </View>\n    );\n  }\n\n  // Native: Standard ScrollView for iOS/Android\n  return (\n    <ScrollView\n      ref={resolvedRef}\n      style={[styles.nativeScrollView, style]}\n      contentContainerStyle={[styles.nativeScrollContent, contentStyle]}\n      showsVerticalScrollIndicator={true}\n      scrollEnabled={true}\n      bounces={Platform.OS === 'ios'}\n      overScrollMode={Platform.OS === 'android' ? 'auto' : undefined}\n      nestedScrollEnabled={true}\n      keyboardShouldPersistTaps=\"handled\"\n      scrollEventThrottle={16}\n      onScroll={handleScroll}\n      {...scrollViewProps}\n    >\n      {children || null}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  // Web: Custom scrollable container with CSS overflow - optimized for mobile web\n  webScrollContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n    ...(Platform.OS === 'web' && {\n      overflowY: 'auto' as any,\n      overflowX: 'hidden' as any,\n      // Better mobile web scrolling\n      WebkitOverflowScrolling: 'touch' as any,\n      scrollBehavior: 'smooth' as any,\n    }),\n    height: '100%',\n    // Remove restrictive maxHeight for mobile web\n    maxHeight: '100vh' as any,\n    width: '100%',\n    maxWidth: '100vw' as any,\n  } as any,\n  webScrollContent: {\n    // Much less padding on mobile web to reduce dead space\n    paddingBottom: Dimensions.get('window').width <= 768 ? 20 : 40,\n    // Better height calculation for mobile web\n    minHeight: '100%' as any,\n    width: '100%',\n  },\n\n  // Native: Standard ScrollView styles\n  nativeScrollView: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  nativeScrollContent: {\n    paddingBottom: 40,\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/SearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[157,166],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[962,965],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[962,965],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1172,1175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1172,1175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getPaddingBottom' is assigned a value but never used.","line":70,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sortToRemove' is defined but never used.","line":255,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":255,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":283,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":283,"endColumn":30}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  StyleSheet,\n  Modal,\n  ScrollView,\n  Platform,\n  Alert, // Use Alert for messages instead of alert()\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\"; // Ensure @expo/vector-icons is installed\nimport colors from \"../globals/colors\"; // Ensure this path is correct\nimport { FontSizes, filterOptions as defaultFilterOptions, sortOptions as defaultSortOptions } from \"../globals/constants\";\nimport { useTranslation } from 'react-i18next';\nimport { createShadowStyle } from \"../globals/styles\";\nimport { biDiTextAlign, rowDirection, getResponsiveModalStyles, responsiveSpacing, responsiveFontSize, getScreenInfo, BREAKPOINTS, scaleSize } from \"../globals/responsive\";\n\ninterface SearchBarProps {\n  onHasActiveConditionsChange?: (isActive: boolean) => void;\n  onSearch?: (query: string, filters?: string[], sorts?: string[], results?: any[]) => void;\n  placeholder?: string;\n  // New props for dynamic filter/sort options and search data (optional for backward compatibility)\n  filterOptions?: string[];\n  sortOptions?: string[];\n  searchData?: any[];\n  // Props to expose selected filters/sorts to parent\n  onFiltersChange?: (filters: string[]) => void;\n  onSortsChange?: (sorts: string[]) => void;\n  // Callbacks to expose remove functions to parent\n  onRemoveFilterRequested?: (removeFn: (filter: string) => void) => void;\n  onRemoveSortRequested?: (removeFn: () => void) => void;\n  // Whether to render the selected filters/sorts row (false = parent will render it)\n  renderSelectedRow?: boolean;\n  // Whether to hide the sort button explicitly\n  hideSortButton?: boolean;\n}\n\nconst SearchBar = ({\n  onHasActiveConditionsChange,\n  onSearch,\n  placeholder,\n  filterOptions = defaultFilterOptions,\n  sortOptions = defaultSortOptions,\n  searchData = [],\n  onFiltersChange,\n  onSortsChange,\n  onRemoveFilterRequested,\n  onRemoveSortRequested,\n  renderSelectedRow = true,\n  hideSortButton = false,\n}: SearchBarProps) => {\n  const [searchText, setSearchText] = useState(\"\");\n  const { t } = useTranslation(['search', 'common', 'trump']);\n  const [isFilterModalVisible, setIsFilterModalVisible] = useState(false);\n  const [isSortModalVisible, setIsSortModalVisible] = useState(false);\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n  // New state to track if SearchBar has active filters/sorts\n  const [hasActiveConditions, setHasActiveConditions] = useState<boolean>(false);\n\n  // Callback function to be passed to SearchBar\n  const handleHasActiveConditionsChange = (isActive: boolean) => {\n    setHasActiveConditions(isActive);\n    onHasActiveConditionsChange?.(isActive);\n  };\n\n  // Determine paddingBottom based on hasActiveConditions\n  const getPaddingBottom = () => {\n    if (hasActiveConditions) {\n      // If there are filters/sorts, provide less padding to avoid excessive space\n      return Platform.select({\n        ios: 20,\n        android: 0,\n        web: 0,\n      });\n    } else {\n      // If no filters/sorts, provide more padding for the static buttons row\n      return Platform.select({\n        ios: 80,\n        android: 0,\n        web: 0, // Assuming web might handle spacing differently\n      });\n    }\n  };\n\n  // Effect to inform parent about active conditions\n  useEffect(() => {\n    const hasActive = selectedFilters.length > 0 || selectedSorts.length > 0;\n    handleHasActiveConditionsChange(hasActive);\n  }, [selectedFilters, selectedSorts]); // Add onHasActiveConditionsChange to dependencies\n\n  // Function to perform search with given parameters\n  const performSearch = (query: string, filters: string[], sorts: string[]) => {\n    // For backward compatibility, if no searchData is provided, just call onSearch with basic parameters\n    if (searchData.length === 0) {\n      onSearch?.(query, filters, sorts, []);\n      return;\n    }\n\n    // Perform search on the provided data\n    let results = [...searchData];\n\n    // Filter by search text if provided\n    if (query.trim() !== \"\") {\n      results = results.filter(item => {\n        // Enhanced search for charities - check specific fields first\n        if (item.name && item.name.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.description && item.description.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.location && item.location.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.category && item.category.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.organization && item.organization.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n        if (item.title && item.title.toLowerCase().includes(query.toLowerCase())) {\n          return true;\n        }\n\n        // Fallback to generic search for other properties\n        const itemStr = JSON.stringify(item).toLowerCase();\n        return itemStr.includes(query.toLowerCase());\n      });\n    }\n\n    // Apply filters if any are selected\n    if (filters.length > 0) {\n      results = results.filter(item => {\n        // Enhanced filter logic for charities\n        return filters.some(filter => {\n          // Check category field first\n          if (item.category && item.category.toLowerCase().includes(filter.toLowerCase())) {\n            return true;\n          }\n          // Check tags field if it exists\n          if (item.tags && Array.isArray(item.tags)) {\n            return item.tags.some((tag: string) => tag.toLowerCase().includes(filter.toLowerCase()));\n          }\n          // Check organization field\n          if (item.organization && item.organization.toLowerCase().includes(filter.toLowerCase())) {\n            return true;\n          }\n          // Fallback to generic search\n          const itemStr = JSON.stringify(item).toLowerCase();\n          return itemStr.includes(filter.toLowerCase());\n        });\n      });\n    }\n\n    // Apply sorting if any is selected\n    if (sorts.length > 0) {\n      const sortOption = sorts[0]; // Only one sort at a time\n\n      // Enhanced sorting logic for charities\n      if (sortOption === 'alphabetical') {\n        results.sort((a, b) => {\n          const aName = (a.name || a.title || a.organization || '').toLowerCase();\n          const bName = (b.name || b.title || b.organization || '').toLowerCase();\n          return aName.localeCompare(bName, 'he');\n        });\n      } else if (sortOption === 'byLocation') {\n        results.sort((a, b) => {\n          const aLocation = (a.location || '').toLowerCase();\n          const bLocation = (b.location || '').toLowerCase();\n          return aLocation.localeCompare(bLocation, 'he');\n        });\n      } else if (sortOption === 'byCategory') {\n        results.sort((a, b) => {\n          const aCategory = (a.category || '').toLowerCase();\n          const bCategory = (b.category || '').toLowerCase();\n          return aCategory.localeCompare(bCategory, 'he');\n        });\n      } else if (sortOption === 'byDonors') {\n        results.sort((a, b) => {\n          const aDonors = a.donors || a.volunteers || 0;\n          const bDonors = b.donors || b.volunteers || 0;\n          return bDonors - aDonors; // Descending order\n        });\n      } else if (sortOption === 'byRating') {\n        results.sort((a, b) => {\n          const aRating = a.rating || 0;\n          const bRating = b.rating || 0;\n          return bRating - aRating; // Descending order\n        });\n      } else if (sortOption === 'byRelevance') {\n        // Default - by rating\n        results.sort((a, b) => {\n          const aRating = a.rating || 0;\n          const bRating = b.rating || 0;\n          return bRating - aRating; // Descending order\n        });\n      }\n    }\n\n    // Call the parent's search handler with all the parameters\n    onSearch?.(query, filters, sorts, results);\n  };\n\n  const handleSearch = () => {\n    performSearch(searchText, selectedFilters, selectedSorts);\n  };\n\n  const handleFilterSelection = (option: string) => {\n    setSelectedFilters((prevFilters) => {\n      const newFilters = prevFilters.includes(option)\n        ? prevFilters.filter((item) => item !== option)\n        : [...prevFilters, option];\n\n      // Notify parent of filter changes\n      onFiltersChange?.(newFilters);\n\n      // Perform real-time search with new filters\n      performSearch(searchText, newFilters, selectedSorts);\n\n      return newFilters;\n    });\n  };\n\n  const handleSortSelection = (option: string) => {\n    setSelectedSorts((prevSorts) => {\n      const newSorts = prevSorts.includes(option) ? [] : [option];\n\n      // Notify parent of sort changes\n      onSortsChange?.(newSorts);\n\n      // Perform real-time search with new sorts\n      performSearch(searchText, selectedFilters, newSorts);\n\n      return newSorts;\n    });\n  };\n\n  const removeFilter = (filterToRemove: string) => {\n    setSelectedFilters((prevFilters) => {\n      const newFilters = prevFilters.filter((filter) => filter !== filterToRemove);\n\n      // Notify parent of filter changes\n      onFiltersChange?.(newFilters);\n\n      // Perform real-time search with updated filters\n      performSearch(searchText, newFilters, selectedSorts);\n\n      return newFilters;\n    });\n  };\n\n  const removeSort = (sortToRemove: string) => {\n    setSelectedSorts([]); // Remove all sorts, as typically only one can be active\n\n    // Notify parent of sort changes\n    onSortsChange?.([]);\n\n    // Perform real-time search with updated sorts\n    performSearch(searchText, selectedFilters, []);\n  };\n\n  const isFilterSelected = (option: string) => selectedFilters.includes(option);\n  const isSortSelected = (option: string) => selectedSorts.includes(option);\n\n  // Handle text input changes\n  const handleTextChange = (text: string) => {\n    setSearchText(text);\n\n    // Perform real-time search as user types\n    performSearch(text, selectedFilters, selectedSorts);\n  };\n\n  // Handle search on submit\n  const handleSubmitEditing = () => {\n    handleSearch();\n  };\n\n  // Get responsive styles\n  const modalStyles = getResponsiveModalStyles();\n  const { isTablet, isDesktop, isLargeDesktop, width } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobileWeb = Platform.OS === 'web' && width <= BREAKPOINTS.TABLET;\n  // Icon size optimized for mobile web - smaller for better proportions\n  const iconSize = isLargeDesktop ? 28 : isDesktopWeb ? 26 : isTablet ? 24 : isMobileWeb ? 20 : 22;\n  // Default placeholder if none provided\n  const searchPlaceholder = placeholder || t('donations:searchCharitiesForHelp');\n\n  // Expose remove functions to parent component\n  React.useEffect(() => {\n    onRemoveFilterRequested?.(removeFilter);\n    onRemoveSortRequested?.(() => removeSort(''));\n  }, [selectedFilters, selectedSorts]);\n\n  return (\n    <View style={localStyles.container}>\n      {/* --- Main Search Bar Row --- */}\n      <View style={[localStyles.searchBarContainer, { flexDirection: rowDirection('row-reverse') }]}>\n        {/* Sort Button (opens sort modal) - Inside search bar, smaller */}\n        {!hideSortButton && (\n          <TouchableOpacity\n            style={localStyles.buttonContainer}\n            onPress={() => setIsSortModalVisible(true)}\n          >\n            <Text style={localStyles.buttonText}>{t('search:sortTitle')}</Text>\n          </TouchableOpacity>\n        )}\n\n        {/* Filter Button (opens filter modal) - Inside search bar, smaller */}\n        <TouchableOpacity\n          style={localStyles.buttonContainer}\n          onPress={() => setIsFilterModalVisible(true)}\n        >\n          <Text style={localStyles.buttonText}>{t('search:filterTitle')}</Text>\n        </TouchableOpacity>\n\n        {/* Search Input Field */}\n        <TextInput\n          style={[localStyles.searchInput, { textAlign: biDiTextAlign('right') }]}\n          placeholder={searchPlaceholder}\n          placeholderTextColor={colors.textTertiary}\n          value={searchText}\n          onChangeText={handleTextChange}\n          onSubmitEditing={handleSubmitEditing}\n          returnKeyType=\"search\"\n        />\n\n        {/* Search Icon - Inside search bar, before input */}\n        <TouchableOpacity\n          onPress={handleSearch}\n          style={localStyles.searchIconContainer}\n          activeOpacity={0.7}\n        >\n          <Ionicons name=\"search\" size={iconSize} color={colors.textSecondary} />\n        </TouchableOpacity>\n\n        {/* --- Filter Options Modal --- */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isFilterModalVisible}\n          onRequestClose={() => setIsFilterModalVisible(false)}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPress={() => setIsFilterModalVisible(false)}\n          >\n            <View style={[\n              localStyles.modalContent,\n              {\n                width: modalStyles.width,\n                maxWidth: modalStyles.maxWidth,\n                maxHeight: modalStyles.maxHeight,\n                padding: modalStyles.padding,\n                borderRadius: modalStyles.borderRadius,\n              }\n            ]}>\n              <Text style={localStyles.modalTitle}>{t('search:chooseFiltersTitle')}</Text>\n              <ScrollView style={localStyles.modalScrollView}>\n                {filterOptions.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.modalOption,\n                      isFilterSelected(option) && localStyles.modalOptionSelected,\n                    ]}\n                    onPress={() => handleFilterSelection(option)}\n                  >\n                    <Text\n                      style={[\n                        localStyles.modalOptionText,\n                        isFilterSelected(option) && localStyles.modalOptionTextSelected,\n                      ]}\n                    >\n                      {/* Try trump:filters first (for trump screen), then search:filters */}\n                      {t(`trump:filters.${option}`, { defaultValue: t(`search:filters.${option}`, { defaultValue: option }) })}\n                    </Text>\n                    {isFilterSelected(option) && (\n                      <Ionicons\n                        name=\"checkmark-circle\"\n                        size={20}\n                        color={colors.secondary}\n                        style={localStyles.modalCheckmark}\n                      />\n                    )}\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n              <TouchableOpacity\n                style={localStyles.modalCloseButton}\n                onPress={() => setIsFilterModalVisible(false)}\n              >\n                <Text style={localStyles.modalCloseButtonText}>{t('common:close')}</Text>\n              </TouchableOpacity>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n\n        {/* --- Sort Options Modal --- */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={isSortModalVisible}\n          onRequestClose={() => setIsSortModalVisible(false)}\n        >\n          <TouchableOpacity\n            style={localStyles.modalOverlay}\n            activeOpacity={1}\n            onPress={() => setIsSortModalVisible(false)}\n          >\n            <View style={[\n              localStyles.modalContent,\n              {\n                width: modalStyles.width,\n                maxWidth: modalStyles.maxWidth,\n                maxHeight: modalStyles.maxHeight,\n                padding: modalStyles.padding,\n                borderRadius: modalStyles.borderRadius,\n              }\n            ]}>\n              <Text style={localStyles.modalTitle}>{t('search:chooseSortsTitle')}</Text>\n              <ScrollView style={localStyles.modalScrollView}>\n                {sortOptions.map((option, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    style={[\n                      localStyles.modalOption,\n                      isSortSelected(option) && localStyles.modalOptionSelected,\n                    ]}\n                    onPress={() => handleSortSelection(option)}\n                  >\n                    <Text\n                      style={[\n                        localStyles.modalOptionText,\n                        isSortSelected(option) && localStyles.modalOptionTextSelected,\n                      ]}\n                    >\n                      {t(`search:sort.${option}`)}\n                    </Text>\n                    {isSortSelected(option) && (\n                      <Ionicons\n                        name=\"checkmark-circle\"\n                        size={20}\n                        color={colors.secondary}\n                        style={localStyles.modalCheckmark}\n                      />\n                    )}\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n              <TouchableOpacity\n                style={localStyles.modalCloseButton}\n                onPress={() => setIsSortModalVisible(false)}\n              >\n                <Text style={localStyles.modalCloseButtonText}>{t('common:close')}</Text>\n              </TouchableOpacity>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n      </View>\n\n      {/* --- Selected Filters & Sorts Row (Combined, thin, scrollable) --- */}\n      {renderSelectedRow && (selectedFilters.length > 0 || selectedSorts.length > 0) && (\n        <View style={localStyles.selectedRowWrapper}>\n          <ScrollView\n            horizontal={true}\n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={localStyles.selectedButtonsContainer}\n            style={localStyles.selectedScrollView}\n          >\n            {/* Sort items */}\n            {selectedSorts.length > 0 && (\n              <>\n                <Text style={localStyles.rowLabelInline}>{t('search:sortTitle')}:</Text>\n                {selectedSorts.map((sort) => (\n                  <TouchableOpacity\n                    key={sort}\n                    style={localStyles.selectedFilterSortButton}\n                    onPress={() => removeSort(sort)}\n                  >\n                    <Text style={localStyles.selectedFilterSortButtonText}>\n                      {t(`search:sort.${sort}`)}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={12} color={colors.black} style={localStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n\n            {/* Filter items */}\n            {selectedFilters.length > 0 && (\n              <>\n                {selectedSorts.length > 0 && (\n                  <Text style={localStyles.separator}>â€¢</Text>\n                )}\n                <Text style={localStyles.rowLabelInline}>{t('search:filterTitle')}:</Text>\n                {selectedFilters.map((filter) => (\n                  <TouchableOpacity\n                    key={filter}\n                    style={localStyles.selectedFilterSortButton}\n                    onPress={() => removeFilter(filter)}\n                  >\n                    <Text style={localStyles.selectedFilterSortButtonText}>\n                      {/* Try trump:filters first (for trump screen), then search:filters */}\n                      {t(`trump:filters.${filter}`, { defaultValue: t(`search:filters.${filter}`, { defaultValue: filter }) })}\n                    </Text>\n                    <Ionicons name=\"close-circle\" size={12} color={colors.black} style={localStyles.removeIcon} />\n                  </TouchableOpacity>\n                ))}\n              </>\n            )}\n          </ScrollView>\n        </View>\n      )}\n\n\n    </View>\n  );\n};\n\nconst localStyles = StyleSheet.create({\n  container: {\n    backgroundColor: \"transparent\",\n    flex: 1, // Take available space instead of fixed 60%\n    minWidth: 0, // Allow shrinking below content size\n  },\n  searchBarContainer: {\n    flexDirection: \"row-reverse\",\n    alignItems: \"center\",\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: responsiveSpacing(18, 20, 22),\n    ...createShadowStyle(colors.black, { width: 0, height: 1 }, 0.08, 2),\n    elevation: 2,\n    height: scaleSize(32), // Match the height of ModeToggleButton\n    paddingVertical: 5, // No vertical padding, height is fixed\n    paddingHorizontal: responsiveSpacing(4, 6, 8), // Optimized horizontal padding for mobile web\n    borderWidth: 0.5,\n    borderColor: colors.black,\n    width: '100%',\n  },\n  buttonContainer: {\n    backgroundColor: colors.pinkLight,\n    borderRadius: responsiveSpacing(12, 14, 16),\n    paddingVertical: responsiveSpacing(1, 2, 3), // Reduced padding to fit in 32px height\n    paddingHorizontal: responsiveSpacing(5, 6, 7), // Optimized padding for mobile web\n    marginLeft: responsiveSpacing(4, 5, 6), // Better spacing for mobile web\n    flexShrink: 0, // Don't shrink buttons\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%', // Match container height\n  },\n  buttonText: {\n    fontSize: responsiveFontSize(FontSizes.caption, 9, 11), // Smaller font for mobile\n    color: colors.textSecondary,\n    fontWeight: \"600\",\n    writingDirection: \"rtl\",\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: responsiveFontSize(FontSizes.small, 13, 15),\n    color: colors.textSecondary,\n    paddingLeft: responsiveSpacing(4, 6, 8),\n    paddingRight: responsiveSpacing(2, 3, 4), // Space between input and icon\n    paddingVertical: 0,\n    minWidth: 0, // Allow shrinking\n    height: '100%', // Take full height of container\n  },\n  searchIconContainer: {\n    paddingRight: responsiveSpacing(6, 8, 10), // More padding for better touch target\n    paddingLeft: responsiveSpacing(2, 3, 4),\n    paddingVertical: 0, // No vertical padding, container height is fixed\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexShrink: 0, // Don't shrink icon container\n    minWidth: scaleSize(32), // Minimum touch target size for mobile web\n    height: '100%', // Match container height\n  },\n\n  // --- Modals Styles ---\n  modalOverlay: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n  },\n  modalContent: {\n    backgroundColor: \"white\",\n    // Dynamic styles applied in JSX for responsive sizing\n    ...createShadowStyle(colors.black, { width: 0, height: 2 }, 0.25, 4),\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: responsiveFontSize(FontSizes.heading2, 20, 22),\n    fontWeight: \"bold\",\n    marginBottom: responsiveSpacing(15, 18, 20),\n    textAlign: \"center\",\n    color: colors.textSecondary,\n  },\n  modalScrollView: {\n    maxHeight: responsiveSpacing(300, 400, 500),\n  },\n  modalOption: {\n    paddingVertical: responsiveSpacing(15, 18, 20),\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    flexDirection: rowDirection(\"row-reverse\"),\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: responsiveSpacing(10, 12, 14),\n  },\n  modalOptionSelected: {\n    backgroundColor: colors.warning,\n  },\n  modalOptionText: {\n    fontSize: responsiveFontSize(FontSizes.medium, 16, 18),\n    textAlign: \"right\",\n    writingDirection: \"rtl\",\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  modalOptionTextSelected: {\n    fontWeight: \"bold\",\n    color: colors.secondary,\n  },\n  modalCheckmark: {\n    marginLeft: responsiveSpacing(10, 12, 14),\n  },\n  modalCloseButton: {\n    marginTop: responsiveSpacing(20, 24, 28),\n    backgroundColor: colors.secondary,\n    paddingVertical: responsiveSpacing(12, 14, 16),\n    borderRadius: responsiveSpacing(8, 10, 12),\n    alignItems: \"center\",\n  },\n  modalCloseButtonText: {\n    color: \"white\",\n    fontSize: responsiveFontSize(FontSizes.medium, 16, 18),\n    fontWeight: \"bold\",\n  },\n\n  // --- Selected Filter/Sort Rows Styles (Thin, scrollable, single row) ---\n  selectedRowWrapper: {\n    marginTop: responsiveSpacing(4, 5, 6),\n    marginHorizontal: responsiveSpacing(8, 10, 12),\n    maxHeight: responsiveSpacing(28, 32, 36),\n  },\n  selectedScrollView: {\n    maxHeight: responsiveSpacing(28, 32, 36),\n  },\n  rowLabelInline: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: \"600\",\n    color: colors.textSecondary,\n    marginLeft: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  separator: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    color: colors.textTertiary,\n    marginHorizontal: responsiveSpacing(4, 5, 6),\n    alignSelf: 'center',\n  },\n  selectedButtonsContainer: {\n    flexDirection: \"row-reverse\",\n    gap: responsiveSpacing(4, 5, 6),\n    paddingRight: responsiveSpacing(4, 5, 6),\n    alignItems: 'center',\n    flexGrow: 1,\n  },\n  selectedFilterSortButton: {\n    backgroundColor: colors.pinkLight,\n    paddingVertical: responsiveSpacing(2, 3, 4),\n    paddingHorizontal: responsiveSpacing(4, 5, 6),\n    borderRadius: responsiveSpacing(12, 14, 16),\n    flexDirection: \"row-reverse\",\n    alignItems: \"center\",\n    gap: responsiveSpacing(3, 4, 5),\n    ...createShadowStyle(colors.black, { width: 0, height: 0.5 }, 0.05, 1),\n    elevation: 1,\n  },\n  selectedFilterSortButtonText: {\n    fontSize: responsiveFontSize(FontSizes.caption, 10, 12),\n    fontWeight: '600',\n    color: colors.black,\n  },\n  removeIcon: {\n    margin: 0,\n  },\n\n  // --- Static Filter Buttons Row Styles ---\n  staticRowWrapper: {\n    marginTop: 10,\n    paddingBottom: 10,\n    minHeight: 40,\n  },\n  staticButtonsContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    gap: 10,\n    paddingHorizontal: 15,\n    flexGrow: 1,\n  },\n  staticFilterButton: {\n    backgroundColor: colors.accent,\n    paddingVertical: 8,\n    paddingHorizontal: 15,\n    borderRadius: 20,\n    flexShrink: 0,\n  },\n  staticFilterButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.black,\n  },\n});\n\nexport default SearchBar;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/SettingsItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":6,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":68,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[193,203],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":27,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":27,"endColumn":10},{"ruleId":"react/prop-types","severity":2,"message":"'description' is missing in props validation","line":28,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":16},{"ruleId":"react/prop-types","severity":2,"message":"'iconName' is missing in props validation","line":29,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":29,"endColumn":13},{"ruleId":"react/prop-types","severity":2,"message":"'type' is missing in props validation","line":30,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":30,"endColumn":9},{"ruleId":"react/prop-types","severity":2,"message":"'onPress' is missing in props validation","line":31,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":31,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'value' is missing in props validation","line":32,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":32,"endColumn":10},{"ruleId":"react/prop-types","severity":2,"message":"'onValueChange' is missing in props validation","line":33,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":33,"endColumn":18},{"ruleId":"react/prop-types","severity":2,"message":"'displayValue' is missing in props validation","line":34,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":34,"endColumn":17},{"ruleId":"react/prop-types","severity":2,"message":"'isDestructive' is missing in props validation","line":35,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":35,"endColumn":18},{"ruleId":"react/prop-types","severity":2,"message":"'children' is missing in props validation","line":36,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":36,"endColumn":13}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ===================================\n// SettingsItem.tsx\n// ===================================\n\nimport React, { memo } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, Platform } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\n\ntype SettingItemType = 'navigate' | 'toggle' | 'button' | 'value';\n\nexport interface SettingsItemProps {\n  title: string;\n  description?: string;\n  iconName?: keyof typeof Ionicons.glyphMap;\n  type: SettingItemType;\n  onPress?: () => void;\n  value?: boolean;\n  onValueChange?: (newValue: boolean) => void;\n  displayValue?: string;\n  isDestructive?: boolean;\n  children?: React.ReactNode;\n}\n\nconst SettingsItem: React.FC<SettingsItemProps> = memo((props) => {\n  const {\n    title,\n    description,\n    iconName,\n    type,\n    onPress,\n    value,\n    onValueChange,\n    displayValue,\n    isDestructive,\n    children\n  } = props;\n\n    const textColor = isDestructive ? colors.danger : colors.textPrimary;\n\n  const renderContent = () => {\n    switch (type) {\n      case 'toggle':\n        return (\n          <Switch\n            value={value}\n            onValueChange={onValueChange}\n            trackColor={{ false: colors.border, true: colors.primary }}\n            thumbColor={value ? colors.primary : colors.backgroundSecondary}\n            ios_backgroundColor={colors.border}\n          />\n        );\n      case 'value':\n        return (\n          <View style={styles.valueContainer}>\n            <Text style={styles.valueText}>{displayValue}</Text>\n            {/* Chevron should appear BEFORE the value text in RTL visually,\n                so we place it after the text when using row-reverse on the container */}\n            <Ionicons \n              name=\"chevron-back-outline\" // Changed to 'chevron-back-outline' for RTL visual consistency\n              size={20} \n              color={colors.textSecondary} \n              style={styles.chevron}\n            />\n          </View>\n        );\n      case 'navigate':\n        return (\n          <Ionicons name=\"chevron-back-outline\" size={20} color={colors.textSecondary} style={styles.chevron}/> // Changed to 'chevron-back-outline' for RTL visual consistency\n        );\n      case 'button':\n        return null;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <TouchableOpacity\n      style={[styles.container, type === 'button' && styles.buttonItem]}\n      onPress={onPress}\n      disabled={!onPress && type !== 'toggle'}\n      activeOpacity={type === 'toggle' ? 1 : 0.7}\n    >\n      {iconName && (\n        <Ionicons name={iconName} size={24} color={textColor} style={styles.icon} />\n      )}\n      <View style={styles.textContainer}>\n        {/* Explicitly setting textAlign: 'right' for all text for RTL */}\n        <Text style={[styles.title, { color: textColor, textAlign: 'right' }]}>{title}</Text>\n        {description && <Text style={[styles.description, { textAlign: 'right' }]}>{description}</Text>}\n      </View>\n      <View style={styles.rightContent}>\n        {renderContent()}\n        {children && (\n          typeof children === 'string' ? (\n            <Text style={[styles.childrenText, { textAlign: 'right' }]}>{children}</Text>\n          ) : (\n            children\n          )\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n});\n\nSettingsItem.displayName = 'SettingsItem';\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row-reverse', // Key for overall RTL layout\n    alignItems: 'center',\n    paddingVertical: 15,\n    paddingHorizontal: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: colors.border,\n    // Removed `writingDirection` and `textAlign` from here as they are for Text components or inherit\n  },\n  buttonItem: {\n    justifyContent: 'center',\n  },\n  icon: {\n    marginHorizontal: 15, // Space to the left of the icon in an RTL row\n  },\n  textContainer: {\n    flex: 1,\n    // Ensure text within this container flows RTL\n    writingDirection: 'rtl',\n  },\n  title: {\n    fontSize: 16,\n    color: colors.textPrimary,\n    // textAlign: 'right' applied inline for explicit text alignment\n  },\n  description: {\n    fontSize: 13,\n    color: colors.textSecondary,\n    marginTop: 2,\n    // textAlign: 'right' applied inline for explicit text alignment\n  },\n  rightContent: {\n    marginLeft: 'auto', // Pushes content to the left (start of RTL row)\n    flexDirection: 'row-reverse', // <--- Changed to 'row-reverse' for internal RTL order of elements like value + chevron\n    alignItems: 'center',\n    writingDirection: 'rtl', // Ensure content within this container flows RTL\n  },\n  valueContainer: {\n    flexDirection: 'row-reverse', // <--- Changed to 'row-reverse' to put chevron before text visually\n    alignItems: 'center',\n  },\n  valueText: {\n    fontSize: 16,\n    color: colors.textSecondary,\n    // If chevron is placed before text, this margin separates them\n    marginRight: 5, // Space between value text and chevron\n  },\n  chevron: {\n    // No explicit margin needed here if using flexbox correctly in valueContainer\n  },\n  childrenText: {\n    fontSize: 16,\n    color: colors.textSecondary,\n  }\n});\n\nexport default SettingsItem;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/StatDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1346,1349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1346,1349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":46,"column":70,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":46,"endColumn":88},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1618,1621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1618,1621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":76,"column":46,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":76,"endColumn":64},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2921,2924],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2921,2924],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Modal, View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport StatMiniCharts from './StatMiniCharts';\n\nexport type StatDetails = {\n  key: string;\n  title: string;\n  icon?: string; // emoji or Ionicon name\n  value: string;\n  description?: string;\n  bullets?: string[];\n  color?: string;\n  breakdownByCity?: Array<{ label: string; value: number }>;\n  trend?: number[]; // last N periods\n};\n\ninterface StatDetailsModalProps {\n  visible: boolean;\n  onClose: () => void;\n  details: StatDetails | null;\n}\n\nconst StatDetailsModal: React.FC<StatDetailsModalProps> = ({ visible, onClose, details }) => {\n  if (!details) return null;\n\n  const isEmoji = details.icon && /\\p{Emoji}/u.test(details.icon);\n\n  return (\n    <Modal visible={visible} transparent animationType=\"slide\" onRequestClose={onClose}>\n      <View style={styles.overlay}>\n        <View style={styles.card}>\n          <View style={styles.header}>\n            <View style={styles.titleRow}>\n              {details.icon ? (\n                isEmoji ? (\n                  <Text style={styles.emoji}>{details.icon}</Text>\n                ) : (\n                  <Ionicons name={details.icon as any} size={24} color={details.color || colors.info} />\n                )\n              ) : null}\n              <Text style={styles.title}>{details.title}</Text>\n            </View>\n            <TouchableOpacity onPress={onClose} accessibilityLabel={(require('i18next') as any).t('common:close')}>\n              <Ionicons name=\"close\" size={24} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n            <Text style={styles.value}>{details.value}</Text>\n            {details.description ? (\n              <Text style={styles.description}>{details.description}</Text>\n            ) : null}\n\n            {(details.breakdownByCity || details.trend) ? (\n              <View style={{ marginTop: 12 }}>\n                <StatMiniCharts breakdown={details.breakdownByCity} trend={details.trend} accentColor={details.color || colors.info} />\n              </View>\n            ) : null}\n\n            {details.bullets && details.bullets.length > 0 ? (\n              <View style={styles.list}>\n                {details.bullets.map((b, idx) => (\n                  <View key={idx} style={styles.listItem}>\n                    <View style={styles.dot} />\n                    <Text style={styles.listText}>{b}</Text>\n                  </View>\n                ))}\n              </View>\n            ) : null}\n          </ScrollView>\n\n          <TouchableOpacity style={styles.closeButton} onPress={onClose}>\n            <Text style={styles.closeText}>{(require('i18next') as any).t('common:close')}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.35)',\n    justifyContent: 'flex-end',\n  },\n  card: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 18,\n    borderTopRightRadius: 18,\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  header: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  titleRow: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 8,\n  },\n  emoji: {\n    fontSize: FontSizes.heading2,\n  },\n  title: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  content: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  value: {\n    fontSize: FontSizes.heading1,\n    color: colors.legacyDarkBlue,\n    fontWeight: '800',\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  description: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: 22,\n    textAlign: 'right',\n  },\n  list: {\n    marginTop: 12,\n    gap: 8,\n  },\n  listItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n  },\n  dot: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n    backgroundColor: colors.info,\n    marginLeft: 8,\n    marginRight: 4,\n  },\n  listText: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  closeButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: 12,\n    alignItems: 'center',\n  },\n  closeText: {\n    color: colors.buttonText,\n    fontWeight: '700',\n    fontSize: FontSizes.body,\n  },\n});\n\nexport default StatDetailsModal;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/StatMiniCharts.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":20,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":20,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":37,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":37,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1541,1544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1541,1544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n\ninterface StatMiniChartsProps {\n  breakdown?: Array<{ label: string; value: number }>;\n  trend?: number[];\n  accentColor?: string;\n}\n\nconst StatMiniCharts: React.FC<StatMiniChartsProps> = ({ breakdown, trend, accentColor = colors.info }) => {\n  const maxBreakdown = breakdown && breakdown.length > 0 ? Math.max(...breakdown.map(b => b.value)) : 0;\n  const maxTrend = trend && trend.length > 0 ? Math.max(...trend) : 0;\n\n  return (\n    <View style={styles.container}>\n      {breakdown && breakdown.length > 0 && (\n        <View style={styles.card}>\n          <Text style={styles.title}>{(require('i18next') as any).t('home:statsDetails.bullets.byCities')}</Text>\n          <View style={styles.breakdownList}>\n            {breakdown.slice(0, 5).map((b, idx) => (\n              <View key={idx} style={styles.row}>\n                <Text style={styles.label}>{b.label}</Text>\n                <View style={styles.barTrack}>\n                  <View style={[styles.barFill, { width: `${maxBreakdown ? (b.value / maxBreakdown) * 100 : 0}%`, backgroundColor: accentColor }]} />\n                </View>\n                <Text style={styles.value}>{b.value}</Text>\n              </View>\n            ))}\n          </View>\n        </View>\n      )}\n\n      {trend && trend.length > 0 && (\n        <View style={styles.card}>\n          <Text style={styles.title}>{(require('i18next') as any).t('home:statsDetails.bullets.trends')}</Text>\n          <View style={styles.trendRow}>\n            {trend.map((v, idx) => (\n              <View key={idx} style={styles.trendCol}>\n                <View style={[styles.trendBar, { height: Math.max(6, maxTrend ? (v / maxTrend) * 60 : 0), backgroundColor: accentColor }]} />\n              </View>\n            ))}\n          </View>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    gap: 10,\n  },\n  card: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  breakdownList: {\n    gap: 8,\n  },\n  row: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: 8,\n  },\n  label: {\n    width: 80,\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  barTrack: {\n    flex: 1,\n    height: 8,\n    backgroundColor: colors.border,\n    borderRadius: 4,\n    overflow: 'hidden',\n  },\n  barFill: {\n    height: '100%',\n    borderRadius: 4,\n  },\n  value: {\n    width: 40,\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'left',\n  },\n  trendRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    gap: 6,\n    height: 70,\n  },\n  trendCol: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  trendBar: {\n    width: 8,\n    borderTopLeftRadius: 4,\n    borderTopRightRadius: 4,\n  },\n});\n\nexport default StatMiniCharts;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TaskHoursModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1263,1266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1263,1266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Modal,\n  TextInput,\n  TouchableOpacity,\n  ActivityIndicator,\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\n\ninterface TaskHoursModalProps {\n  visible: boolean;\n  onClose: () => void;\n  onSave: (hours: number) => Promise<void>;\n  estimatedHours?: number | null;\n  taskTitle?: string;\n}\n\nexport default function TaskHoursModal({\n  visible,\n  onClose,\n  onSave,\n  estimatedHours,\n  taskTitle,\n}: TaskHoursModalProps) {\n  const [hours, setHours] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSave = async () => {\n    setError(null);\n    const hoursNum = parseFloat(hours);\n    \n    if (!hours || isNaN(hoursNum) || hoursNum <= 0) {\n      setError('×× × ×”×–×Ÿ ××¡×¤×¨ ×©×¢×•×ª ×ª×§×™×Ÿ (×’×“×•×œ ×-0)');\n      return;\n    }\n\n    if (hoursNum > 9999) {\n      setError('××¡×¤×¨ ×”×©×¢×•×ª ×’×“×•×œ ××“×™ (××§×¡×™××•× 9999)');\n      return;\n    }\n\n    try {\n      setSaving(true);\n      await onSave(hoursNum);\n      setHours('');\n      onClose();\n    } catch (err: any) {\n      setError(err.message || '×©×’×™××” ×‘×©××™×¨×ª ×”×©×¢×•×ª');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (!saving) {\n      setHours('');\n      setError(null);\n      onClose();\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent\n      onRequestClose={handleClose}\n    >\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n        style={styles.modalBackdrop}\n      >\n        <View style={styles.modalContainer}>\n          <View style={styles.modalCard}>\n            <View style={styles.header}>\n              <Text style={styles.modalTitle}>×¨×™×©×•× ×©×¢×•×ª ×¢×‘×•×“×”</Text>\n              <TouchableOpacity\n                onPress={handleClose}\n                disabled={saving}\n                style={styles.closeButton}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textSecondary} />\n              </TouchableOpacity>\n            </View>\n\n            {taskTitle && (\n              <Text style={styles.taskTitle}>{taskTitle}</Text>\n            )}\n\n            {(estimatedHours !== null && estimatedHours !== undefined && estimatedHours > 0) && (\n              <View style={styles.estimatedContainer}>\n                <Ionicons name=\"time-outline\" size={16} color={colors.info} />\n                <Text style={styles.estimatedText}>\n                  ×–××Ÿ ××•×¢×¨×š: {estimatedHours} ×©×¢×•×ª\n                </Text>\n              </View>\n            )}\n\n            <View style={styles.inputContainer}>\n              <Text style={styles.label}>×›××” ×–××Ÿ ×”××©×™××” ×œ×§×—×” ×‘×©×¢×•×ª?</Text>\n              <TextInput\n                style={[styles.input, error && styles.inputError]}\n                placeholder=\"×œ×“×•×’××”: 2.5\"\n                placeholderTextColor={colors.textSecondary}\n                value={hours}\n                onChangeText={(text) => {\n                  setHours(text);\n                  setError(null);\n                }}\n                keyboardType=\"decimal-pad\"\n                editable={!saving}\n              />\n              {error && (\n                <Text style={styles.errorText}>{error}</Text>\n              )}\n            </View>\n\n            <View style={styles.actions}>\n              <TouchableOpacity\n                style={[styles.button, styles.cancelButton]}\n                onPress={handleClose}\n                disabled={saving}\n              >\n                <Text style={styles.cancelButtonText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.button, styles.saveButton, saving && styles.saveButtonDisabled]}\n                onPress={handleSave}\n                disabled={saving}\n              >\n                {saving ? (\n                  <ActivityIndicator size=\"small\" color={colors.white} />\n                ) : (\n                  <Text style={styles.saveButtonText}>×©××•×¨</Text>\n                )}\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </KeyboardAvoidingView>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  modalBackdrop: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalContainer: {\n    width: '100%',\n    maxWidth: 500,\n  },\n  modalCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  closeButton: {\n    padding: 4,\n  },\n  taskTitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'right',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  estimatedContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    gap: 6,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    padding: LAYOUT_CONSTANTS.SPACING.SM,\n    backgroundColor: colors.infoLight,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  estimatedText: {\n    fontSize: FontSizes.small,\n    color: colors.info,\n    fontWeight: '600',\n  },\n  inputContainer: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    fontWeight: '600',\n  },\n  input: {\n    height: 50,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.heading3,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  inputError: {\n    borderColor: colors.error,\n  },\n  errorText: {\n    fontSize: FontSizes.small,\n    color: colors.error,\n    textAlign: 'right',\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  actions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  button: {\n    flex: 1,\n    height: 50,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  cancelButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  saveButton: {\n    backgroundColor: colors.primary,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.white,\n    fontWeight: '600',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TaskItem.tsx","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":18,"column":43,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":208,"endColumn":3},{"ruleId":"react/prop-types","severity":2,"message":"'task' is missing in props validation","line":19,"column":11,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":15},{"ruleId":"react/prop-types","severity":2,"message":"'onToggleComplete' is missing in props validation","line":19,"column":17,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":33},{"ruleId":"react/prop-types","severity":2,"message":"'onEditTask' is missing in props validation","line":19,"column":35,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":45},{"ruleId":"react/prop-types","severity":2,"message":"'onDeleteTask' is missing in props validation","line":19,"column":47,"nodeType":"Property","messageId":"missingPropType","endLine":19,"endColumn":59},{"ruleId":"react/prop-types","severity":2,"message":"'task.title' is missing in props validation","line":70,"column":53,"nodeType":"Identifier","messageId":"missingPropType","endLine":70,"endColumn":58},{"ruleId":"react/prop-types","severity":2,"message":"'task.id' is missing in props validation","line":76,"column":44,"nodeType":"Identifier","messageId":"missingPropType","endLine":76,"endColumn":46},{"ruleId":"react/prop-types","severity":2,"message":"'task.id' is missing in props validation","line":87,"column":27,"nodeType":"Identifier","messageId":"missingPropType","endLine":87,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'task.id' is missing in props validation","line":88,"column":12,"nodeType":"Identifier","messageId":"missingPropType","endLine":88,"endColumn":14},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":92,"column":38,"nodeType":"Identifier","messageId":"missingPropType","endLine":92,"endColumn":47},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":97,"column":88,"nodeType":"Identifier","messageId":"missingPropType","endLine":97,"endColumn":96},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":106,"column":22,"nodeType":"Identifier","messageId":"missingPropType","endLine":106,"endColumn":31},{"ruleId":"react/prop-types","severity":2,"message":"'task.title' is missing in props validation","line":110,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":110,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'task.description' is missing in props validation","line":112,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":112,"endColumn":30},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":114,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":114,"endColumn":59},{"ruleId":"react/prop-types","severity":2,"message":"'task.description' is missing in props validation","line":117,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":117,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":123,"column":88,"nodeType":"Identifier","messageId":"missingPropType","endLine":123,"endColumn":96},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":124,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":124,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3672,3675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3672,3675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":124,"column":107,"nodeType":"Identifier","messageId":"missingPropType","endLine":124,"endColumn":115},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":125,"column":79,"nodeType":"Identifier","messageId":"missingPropType","endLine":125,"endColumn":87},{"ruleId":"react/prop-types","severity":2,"message":"'task.priority' is missing in props validation","line":126,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":126,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'task.dueDate' is missing in props validation","line":133,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":133,"endColumn":24},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":136,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":136,"endColumn":60},{"ruleId":"react/prop-types","severity":2,"message":"'task.dueDate' is missing in props validation","line":137,"column":34,"nodeType":"Identifier","messageId":"missingPropType","endLine":137,"endColumn":41},{"ruleId":"react/prop-types","severity":2,"message":"'task.category' is missing in props validation","line":142,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":25},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":145,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":145,"endColumn":60},{"ruleId":"react/prop-types","severity":2,"message":"'task.category' is missing in props validation","line":146,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":146,"endColumn":31},{"ruleId":"react/prop-types","severity":2,"message":"'task.location' is missing in props validation","line":151,"column":17,"nodeType":"Identifier","messageId":"missingPropType","endLine":151,"endColumn":25},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":154,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":154,"endColumn":60},{"ruleId":"react/prop-types","severity":2,"message":"'task.location' is missing in props validation","line":155,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":155,"endColumn":31},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags' is missing in props validation","line":162,"column":15,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":19},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags' is missing in props validation","line":162,"column":28,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":32},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags.length' is missing in props validation","line":162,"column":33,"nodeType":"Identifier","messageId":"missingPropType","endLine":162,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags' is missing in props validation","line":164,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":164,"endColumn":23},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags.slice' is missing in props validation","line":164,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":164,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags' is missing in props validation","line":169,"column":19,"nodeType":"Identifier","messageId":"missingPropType","endLine":169,"endColumn":23},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags.length' is missing in props validation","line":169,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":169,"endColumn":30},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags' is missing in props validation","line":171,"column":53,"nodeType":"Identifier","messageId":"missingPropType","endLine":171,"endColumn":57},{"ruleId":"react/prop-types","severity":2,"message":"'task.tags.length' is missing in props validation","line":171,"column":58,"nodeType":"Identifier","messageId":"missingPropType","endLine":171,"endColumn":64},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":182,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":182,"endColumn":32},{"ruleId":"react/prop-types","severity":2,"message":"'task.completed' is missing in props validation","line":185,"column":28,"nodeType":"Identifier","messageId":"missingPropType","endLine":185,"endColumn":37}],"suppressedMessages":[],"errorCount":42,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// TaskItem.tsx\n'use strict';\n\nimport React, { useCallback, memo } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, Alert } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Task } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n\ninterface TaskItemProps {\n  task: Task;\n  onToggleComplete: (id: string) => void;\n  onEditTask: (task: Task) => void;\n  onDeleteTask: (id: string) => void;\n}\n\nconst TaskItem: React.FC<TaskItemProps> = memo((props) => {\n  const { task, onToggleComplete, onEditTask, onDeleteTask } = props;\n\n  const getPriorityColor = useCallback((priority: Task['priority']): string => {\n    switch (priority) {\n      case 'High':\n        return colors.error;\n      case 'Medium':\n        return colors.warning;\n      case 'Low':\n        return colors.success;\n      default:\n        return colors.textSecondary;\n    }\n  }, []);\n\n  const getPriorityIcon = useCallback((priority: Task['priority']): string => {\n    switch (priority) {\n      case 'High':\n        return 'alert-circle';\n      case 'Medium':\n        return 'time';\n      case 'Low':\n        return 'checkmark-circle';\n      default:\n        return 'help-circle';\n    }\n  }, []);\n\n  const getStatusColor = useCallback((completed: boolean): string => {\n    return completed ? colors.success : colors.textSecondary;\n  }, []);\n\n  const formatDate = useCallback((date: Date): string => {\n    const now = new Date();\n    const diffTime = date.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays < 0) {\n      return `××™×—×•×¨ ×©×œ ${Math.abs(diffDays)} ×™××™×`;\n    } else if (diffDays === 0) {\n      return '×”×™×•×';\n    } else if (diffDays === 1) {\n      return '××—×¨';\n    } else {\n      return `×‘×¢×•×“ ${diffDays} ×™××™×`;\n    }\n  }, []);\n\n  const handleDeletePress = useCallback(() => {\n    Alert.alert(\n      '××—×™×§×ª ××©×™××”',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”××©×™××” \"${task.title}\"?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { \n          text: '××—×§', \n          style: 'destructive',\n          onPress: () => onDeleteTask(task.id)\n        }\n      ]\n    );\n  }, [task, onDeleteTask]);\n\n  const handleEditPress = useCallback(() => {\n    onEditTask(task);\n  }, [task, onEditTask]);\n\n  const handleTogglePress = useCallback(() => {\n    onToggleComplete(task.id);\n  }, [task.id, onToggleComplete]);\n\n  return (\n    <TouchableOpacity \n      style={[styles.container, task.completed && styles.completedContainer]}\n      onPress={handleEditPress}\n      activeOpacity={0.7}\n    >\n      {/* Priority Indicator */}\n      <View style={[styles.priorityIndicator, { backgroundColor: getPriorityColor(task.priority) }]} />\n      \n      {/* Main Content */}\n      <View style={styles.contentContainer}>\n        <View style={styles.headerRow}>\n          <View style={styles.titleContainer}>\n            <Text\n              style={[\n                styles.title,\n                task.completed && styles.completedTitle,\n              ]}\n              numberOfLines={2}\n            >\n              {task.title}\n            </Text>\n            {task.description && (\n              <Text \n                style={[styles.description, task.completed && styles.completedText]}\n                numberOfLines={1}\n              >\n                {task.description}\n              </Text>\n            )}\n          </View>\n          \n          {/* Priority Badge */}\n          <View style={[styles.priorityBadge, { backgroundColor: getPriorityColor(task.priority) + '20' }]}>\n            <Ionicons name={getPriorityIcon(task.priority) as any} size={12} color={getPriorityColor(task.priority)} />\n            <Text style={[styles.priorityText, { color: getPriorityColor(task.priority) }]}>\n              {task.priority}\n            </Text>\n          </View>\n        </View>\n\n        {/* Meta Information */}\n        <View style={styles.metaContainer}>\n          {task.dueDate && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"calendar-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {formatDate(task.dueDate)}\n              </Text>\n            </View>\n          )}\n          \n          {task.category && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"folder-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {task.category}\n              </Text>\n            </View>\n          )}\n\n          {task.location && (\n            <View style={styles.metaItem}>\n              <Ionicons name=\"location-outline\" size={14} color={colors.textSecondary} />\n              <Text style={[styles.metaText, task.completed && styles.completedText]}>\n                {task.location}\n              </Text>\n            </View>\n          )}\n        </View>\n\n        {/* Tags */}\n        {task.tags && task.tags.length > 0 && (\n          <View style={styles.tagsContainer}>\n            {task.tags.slice(0, 3).map((tag, index) => (\n              <View key={index} style={styles.tag}>\n                <Text style={styles.tagText}>{tag}</Text>\n              </View>\n            ))}\n            {task.tags.length > 3 && (\n              <View style={styles.tag}>\n                <Text style={styles.tagText}>+{task.tags.length - 3}</Text>\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n\n      {/* Actions */}\n      <View style={styles.actionsContainer}>\n        {/* Toggle Switch */}\n        <Switch\n          value={task.completed}\n          onValueChange={handleTogglePress}\n          trackColor={{ false: colors.border, true: getStatusColor(true) + '40' }}\n          thumbColor={task.completed ? getStatusColor(true) : colors.white}\n          ios_backgroundColor={colors.border}\n        />\n        \n        {/* Action Buttons */}\n        <View style={styles.actionButtons}>\n          <TouchableOpacity \n            onPress={handleEditPress} \n            style={[styles.actionButton, styles.editButton]}\n          >\n            <Ionicons name=\"create-outline\" size={18} color={colors.secondary} />\n          </TouchableOpacity>\n          \n          <TouchableOpacity \n            onPress={handleDeletePress} \n            style={[styles.actionButton, styles.deleteButton]}\n          >\n            <Ionicons name=\"trash-outline\" size={18} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n});\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    backgroundColor: colors.background,\n    borderRadius: 12,\n    marginBottom: 12,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden',\n  },\n  completedContainer: {\n    opacity: 0.6,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  priorityIndicator: {\n    width: 4,\n    height: '100%',\n  },\n  contentContainer: {\n    flex: 1,\n    padding: 15,\n  },\n  headerRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  titleContainer: {\n    flex: 1,\n    marginRight: 10,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    lineHeight: 20,\n  },\n  completedTitle: {\n    textDecorationLine: 'line-through',\n    color: colors.textSecondary,\n  },\n  description: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: 18,\n  },\n  completedText: {\n    color: colors.textSecondary,\n  },\n  priorityBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n    marginLeft: 8,\n  },\n  priorityText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  metaContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 8,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 15,\n    marginBottom: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  tagsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  tag: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 10,\n    marginRight: 6,\n    marginBottom: 4,\n  },\n  tagText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  actionsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 15,\n    paddingLeft: 0,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    marginLeft: 15,\n  },\n  actionButton: {\n    padding: 8,\n    borderRadius: 8,\n    marginLeft: 8,\n  },\n  editButton: {\n    backgroundColor: colors.secondary + '10',\n  },\n  deleteButton: {\n    backgroundColor: colors.error + '10',\n  },\n});\n\nexport default TaskItem; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TimeInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/TimePicker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'label' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  ScrollView,\n} from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { Ionicons as Icon } from '@expo/vector-icons';\n\ninterface TimePickerProps {\n  value: string;\n  onTimeChange: (time: string) => void;\n  placeholder?: string;\n  label?: string;\n}\n\nexport default function TimePicker({ \n  value, \n  onTimeChange, \n  placeholder,\n  label,\n}: TimePickerProps) {\n  const { t } = useTranslation(['common']);\n  const [isVisible, setIsVisible] = useState(false);\n  const [selectedHour, setSelectedHour] = useState('00');\n  const [selectedMinute, setSelectedMinute] = useState('00');\n\n  const hours = Array.from({ length: 24 }, (_, i) => i.toString().padStart(2, '0'));\n  const minutes = Array.from({ length: 60 }, (_, i) => i.toString().padStart(2, '0'));\n\n  const handleOpen = () => {\n    if (value) {\n      const [hour, minute] = value.split(':');\n      setSelectedHour(hour || '00');\n      setSelectedMinute(minute || '00');\n    }\n    setIsVisible(true);\n  };\n\n  const handleConfirm = () => {\n    const timeString = `${selectedHour}:${selectedMinute}`;\n    onTimeChange(timeString);\n    setIsVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsVisible(false);\n  };\n\n  return (\n    <View style={styles.container}>\n      \n      <TouchableOpacity style={styles.timeButton} onPress={handleOpen}>\n        <Text style={[styles.timeText, !value && styles.placeholderText]}>\n          {value || placeholder || t('common:time.selectTime')}\n        </Text>\n        <Icon name=\"time-outline\" size={16} color={colors.textSecondary} />\n      </TouchableOpacity>\n\n      <Modal\n        visible={isVisible}\n        transparent={true}\n        animationType=\"slide\"\n        onRequestClose={handleCancel}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>{placeholder || t('common:time.selectTime')}</Text>\n              <TouchableOpacity onPress={handleCancel} style={styles.closeButton}>\n                <Icon name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <View style={styles.pickerContainer}>\n              <View style={styles.pickerColumn}>\n                <Text style={styles.pickerLabel}>{t('common:time.hours')}</Text>\n                <ScrollView \n                  style={styles.pickerScroll}\n                  showsVerticalScrollIndicator={false}\n                  snapToInterval={50}\n                >\n                  {hours.map((hour) => (\n                    <TouchableOpacity\n                      key={hour}\n                      style={[\n                        styles.pickerItem,\n                        selectedHour === hour && styles.selectedItem\n                      ]}\n                      onPress={() => setSelectedHour(hour)}\n                    >\n                      <Text style={[\n                        styles.pickerItemText,\n                        selectedHour === hour && styles.selectedItemText\n                      ]}>\n                        {hour}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n\n              <View style={styles.pickerSeparator}>\n                <Text style={styles.separatorText}>:</Text>\n              </View>\n\n              <View style={styles.pickerColumn}>\n                <Text style={styles.pickerLabel}>{t('common:time.minutes')}</Text>\n                <ScrollView \n                  style={styles.pickerScroll}\n                  showsVerticalScrollIndicator={false}\n                  snapToInterval={50}\n                >\n                  {minutes.map((minute) => (\n                    <TouchableOpacity\n                      key={minute}\n                      style={[\n                        styles.pickerItem,\n                        selectedMinute === minute && styles.selectedItem\n                      ]}\n                      onPress={() => setSelectedMinute(minute)}\n                    >\n                      <Text style={[\n                        styles.pickerItemText,\n                        selectedMinute === minute && styles.selectedItemText\n                      ]}>\n                        {minute}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n            </View>\n\n            <View style={styles.modalFooter}>\n              <TouchableOpacity style={styles.cancelButton} onPress={handleCancel}>\n                <Text style={styles.cancelButtonText}>{t('common:cancel')}</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={styles.confirmButton} onPress={handleConfirm}>\n                <Text style={styles.confirmButtonText}>{t('common:confirm')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 8,\n  },\n  label: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    textAlign: 'center',\n\n  },\n  timeButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    minHeight: 36,\n  },\n  timeText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  placeholderText: {\n    color: colors.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 300,\n    maxHeight: '70%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  pickerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n  },\n  pickerColumn: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  pickerLabel: {\n    fontSize: FontSizes.small,\n    fontWeight: '500',\n    color: colors.textSecondary,\n    marginBottom: 6,\n  },\n  pickerScroll: {\n    height: 100,\n  },\n  pickerItem: {\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    marginVertical: 1,\n    minWidth: 50,\n    alignItems: 'center',\n  },\n  selectedItem: {\n    backgroundColor: colors.secondary,\n  },\n  pickerItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  selectedItemText: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  pickerSeparator: {\n    paddingHorizontal: 10,\n  },\n  separatorText: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  modalFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  cancelButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginRight: 6,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n    alignItems: 'center',\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '500',\n  },\n  confirmButton: {\n    flex: 1,\n    paddingVertical: 10,\n    marginLeft: 6,\n    borderRadius: 8,\n    backgroundColor: colors.secondary,\n    alignItems: 'center',\n  },\n  confirmButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.white,\n    fontWeight: '600',\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/UserSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":2,"column":132,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":142,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[181,193],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, FlatList, Image, ActivityIndicator, StyleSheet, Modal, TouchableWithoutFeedback, Dimensions } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport apiService from '../utils/apiService';\n\ninterface User {\n    id: string;\n    name: string;\n    email: string;\n    avatar_url?: string;\n    roles?: string[];\n}\n\ninterface UserSelectorProps {\n    selectedUsers: User[];\n    onSelect: (user: User) => void;\n    onRemove: (userId: string) => void;\n    singleSelection?: boolean;\n    useModal?: boolean;\n}\n\nexport default function UserSelector({ selectedUsers, onSelect, onRemove, singleSelection = false, useModal = true }: UserSelectorProps) {\n\n    const [query, setQuery] = useState('');\n    const [results, setResults] = useState<User[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [modalVisible, setModalVisible] = useState(false);\n    const [defaultUsers, setDefaultUsers] = useState<User[]>([]);\n\n    // Fetch default users on mount\n    useEffect(() => {\n        const fetchDefaultUsers = async () => {\n            setLoading(true);\n            try {\n                const res = await apiService.getUsers({ limit: 50 });\n                if (res.success && res.data) {\n                    setDefaultUsers(res.data);\n                    // If no query, show defaults immediately\n                    if (!query) {\n                        setResults(res.data);\n                    }\n                }\n            } catch (err) {\n                console.error('Failed to fetch default users', err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        // Fetch if we open modal, or if inline and it's first load\n        if ((useModal && modalVisible) || !useModal) {\n            // Only fetch if we haven't already (or maybe refresh?)\n            // For now, let's fetch always to ensure fresh data\n            fetchDefaultUsers();\n        }\n    }, [useModal, modalVisible]);\n\n    useEffect(() => {\n        if (!query || query.length < 2) {\n            // If query is empty, show default users\n            setResults(defaultUsers);\n            return;\n        }\n\n        const timer = setTimeout(async () => {\n            setLoading(true);\n            try {\n                const res = await apiService.searchUsers(query);\n                if (res.success && res.data) {\n                    setResults(res.data);\n                }\n            } catch (err) {\n                console.error('Search failed', err);\n            } finally {\n                setLoading(false);\n            }\n        }, 500);\n\n        return () => clearTimeout(timer);\n    }, [query, defaultUsers]);\n\n    // Handle initial selection in modal mode: clear query for fresh search next time\n    const handleSelect = (user: User) => {\n        onSelect(user);\n        if (useModal) {\n            setModalVisible(false);\n            setQuery('');\n            setResults(defaultUsers);\n        } else {\n            setQuery('');\n            setResults(defaultUsers);\n        }\n    };\n\n    const renderSearchInput = () => (\n        <View style={styles.searchBox}>\n            <Ionicons name=\"search\" size={20} color={colors.textSecondary} />\n            <TextInput\n                style={styles.input}\n                placeholder=\"×—×¤×© ××©×ª××©...\"\n                value={query}\n                onChangeText={setQuery}\n                placeholderTextColor={colors.textSecondary}\n                autoFocus={useModal} // Auto focus when modal opens\n            />\n            {loading && <ActivityIndicator size=\"small\" color={colors.primary} />}\n        </View>\n    );\n\n    const renderResultsList = () => (\n        <View style={[styles.resultsList, useModal && styles.resultsListModal]}>\n            <FlatList\n                data={results}\n                keyExtractor={(item) => item.id}\n                keyboardShouldPersistTaps=\"handled\"\n                renderItem={({ item: user }) => {\n                    const isSelected = selectedUsers.some(u => u.id === user.id);\n                    if (isSelected) return null;\n\n                    return (\n                        <TouchableOpacity\n                            style={styles.resultItem}\n                            onPress={() => handleSelect(user)}\n                        >\n                            <Image\n                                source={{ uri: user.avatar_url || `https://ui-avatars.com/api/?name=${user.name}` }}\n                                style={styles.resultAvatar}\n                            />\n                            <View style={{ flex: 1 }}>\n                                <Text style={styles.resultName}>{user.name}</Text>\n                                <Text style={styles.resultEmail}>{user.email}</Text>\n                            </View>\n                            <Ionicons name=\"add-circle-outline\" size={24} color={colors.primary} />\n                        </TouchableOpacity>\n                    );\n                }}\n                ListEmptyComponent={\n                    <View style={{ alignItems: 'center', marginTop: 40, opacity: 0.7 }}>\n                        {loading ? (\n                            <ActivityIndicator size=\"large\" color={colors.primary} />\n                        ) : (\n                            <>\n                                <Ionicons name={query.length < 2 ? \"people-outline\" : \"warning-outline\"} size={40} color={colors.textSecondary} style={{ marginBottom: 8 }} />\n                                <Text style={styles.emptyText}>\n                                    {query.length < 2 ? '××™×Ÿ ××©×ª××©×™× ×œ×”×¦×’×”' : '×œ× × ××¦××• ×ª×•×¦××•×ª'}\n                                </Text>\n                            </>\n                        )}\n                    </View>\n                }\n            />\n        </View>\n    );\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.label}>×”×§×¦××” ×œ××©×ª××©×™×:</Text>\n\n            {/* Selected Users Chips */}\n            <View style={styles.chipsContainer}>\n                {selectedUsers.map(user => (\n                    <View key={user.id} style={styles.chip}>\n                        <Image\n                            source={{ uri: user.avatar_url || `https://ui-avatars.com/api/?name=${user.name}` }}\n                            style={styles.chipAvatar}\n                        />\n                        <Text style={styles.chipText}>{user.name}</Text>\n                        <TouchableOpacity onPress={() => onRemove(user.id)}>\n                            <Ionicons name=\"close-circle\" size={18} color={colors.textSecondary} />\n                        </TouchableOpacity>\n                    </View>\n                ))}\n            </View>\n\n            {/* Modal Trigger or Inline Search */}\n            {(!singleSelection || selectedUsers.length === 0) && (\n                useModal ? (\n                    <>\n                        <TouchableOpacity\n                            style={styles.openModalButton}\n                            onPress={() => setModalVisible(true)}\n                        >\n                            <Ionicons name=\"person-add-outline\" size={20} color={colors.textSecondary} />\n                            <Text style={styles.openModalText}>×œ×—×¥ ×œ×—×™×¤×•×© ×•×”×•×¡×¤×ª ××©×ª××©×™×...</Text>\n                        </TouchableOpacity>\n\n                        <Modal\n                            visible={modalVisible}\n                            transparent\n                            animationType=\"fade\"\n                            onRequestClose={() => setModalVisible(false)}\n                        >\n                            <View style={styles.modalBackdrop}>\n                                <TouchableWithoutFeedback onPress={() => setModalVisible(false)}>\n                                    <View style={styles.modalOverlay} />\n                                </TouchableWithoutFeedback>\n\n                                <View style={styles.modalContent}>\n                                    <View style={styles.modalHeader}>\n                                        <Text style={styles.modalTitle}>×‘×—×™×¨×ª ××©×ª××©</Text>\n                                        <TouchableOpacity onPress={() => setModalVisible(false)}>\n                                            <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                                        </TouchableOpacity>\n                                    </View>\n\n                                    {renderSearchInput()}\n                                    {renderResultsList()}\n                                </View>\n                            </View>\n                        </Modal>\n                    </>\n                ) : (\n                    <>\n                        {renderSearchInput()}\n                        {results.length > 0 && renderResultsList()}\n                    </>\n                )\n            )}\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        marginBottom: 16,\n        zIndex: 100,\n    },\n    label: {\n        fontSize: 14,\n        color: colors.textSecondary,\n        marginBottom: 8,\n        textAlign: 'right',\n    },\n    chipsContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        gap: 8,\n        marginBottom: 8,\n        justifyContent: 'flex-end',\n    },\n    chip: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 20,\n        padding: 4,\n        paddingRight: 12,\n        borderWidth: 1,\n        borderColor: colors.border,\n        gap: 6,\n    },\n    chipAvatar: {\n        width: 24,\n        height: 24,\n        borderRadius: 12,\n    },\n    chipText: {\n        fontSize: 14,\n        color: colors.textPrimary,\n    },\n    // Inline search styles\n    searchBox: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        paddingHorizontal: 12,\n        height: 44,\n        marginBottom: 8,\n    },\n    input: {\n        flex: 1,\n        textAlign: 'right',\n        marginRight: 8,\n        color: colors.textPrimary,\n        height: '100%',\n    },\n    resultsList: {\n        backgroundColor: colors.background,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        maxHeight: 200,\n        overflow: 'hidden',\n    },\n    resultsListModal: {\n        borderWidth: 0,\n        flex: 1,\n        maxHeight: undefined, // Let it fill space in modal\n        marginTop: 8,\n    },\n    resultItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        gap: 12,\n    },\n    resultAvatar: {\n        width: 40,\n        height: 40,\n        borderRadius: 20,\n    },\n    resultName: {\n        fontSize: 16,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    resultEmail: {\n        fontSize: 13,\n        color: colors.textSecondary,\n        textAlign: 'left',\n    },\n    emptyText: {\n        textAlign: 'center',\n        padding: 20,\n        color: colors.textSecondary,\n    },\n\n    // Modal Styles\n    openModalButton: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.border,\n        paddingHorizontal: 12,\n        height: 44,\n        justifyContent: 'flex-end',\n        gap: 8,\n    },\n    openModalText: {\n        color: colors.textSecondary,\n        fontSize: 14,\n    },\n    modalBackdrop: {\n        flex: 1,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingTop: 50, // Avoid status bar somewhat\n        paddingHorizontal: 20,\n        paddingBottom: 20,\n    },\n    modalOverlay: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    modalContent: {\n        backgroundColor: colors.background,\n        width: '100%',\n        height: '80%', // Takes most of screen but not all\n        borderRadius: 16,\n        padding: 16,\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.3,\n        shadowRadius: 10,\n        elevation: 10,\n    },\n    modalHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 16,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        paddingBottom: 12,\n    },\n    modalTitle: {\n        fontSize: 18,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/VerticalGridSlider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":2,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[64,82],"text":""},"desc":"Remove unused variable \"TouchableOpacity\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[291,294],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[291,294],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'stepHeight' is assigned a value but never used.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'gestureState' is defined but never used.","line":28,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'gestureState' is defined but never used.","line":36,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'evt' is defined but never used.","line":42,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'gestureState' is defined but never used.","line":42,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":54}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\nimport { View, StyleSheet, TouchableOpacity, PanResponder, Platform } from 'react-native';\nimport colors from '../globals/colors';\n\ninterface VerticalGridSliderProps {\n    numColumns: number;\n    onNumColumnsChange: (cols: number) => void;\n    style?: any;\n}\n\nexport default function VerticalGridSlider({\n    numColumns,\n    onNumColumnsChange,\n    style\n}: VerticalGridSliderProps) {\n    const sliderHeight = 160;\n    const stepCount = 5;\n    const stepHeight = sliderHeight / (stepCount - 1); // Height of one interval (40px)\n\n    // Calculate thumb position based on current columns (0-4 index)\n    // 0 -> 0%, 4 -> 100%\n    const thumbPosition = ((numColumns - 1) / 4) * sliderHeight;\n\n    const panResponder = useRef(\n        PanResponder.create({\n            onStartShouldSetPanResponder: () => true,\n            onMoveShouldSetPanResponder: () => true,\n            onPanResponderGrant: (evt, gestureState) => {\n                // When touch starts, we could snap to the touch position immediately\n                const locationY = evt.nativeEvent.locationY;\n                // Adjust for padding (the interaction container starts at top: 10)\n                // Actually, if we put responder on the wrapper, we need to account for it.\n                // Let's simplify: Put responder on a wrapper view that exactly matches the track + padding.\n                handleTouch(locationY - 10);\n            },\n            onPanResponderMove: (evt, gestureState) => {\n                // We use locationY from native event which is relative to the view\n                // This updates as we drag\n                const locationY = evt.nativeEvent.locationY;\n                handleTouch(locationY - 10);\n            },\n            onPanResponderRelease: (evt, gestureState) => {\n                // Already handled in Move\n            }\n        })\n    ).current;\n\n    const handleTouch = (y: number) => {\n        // y is relative to the top of the track (0 to 160)\n\n        // Clamp y to valid range first\n        let clampedY = y;\n        if (clampedY < 0) clampedY = 0;\n        if (clampedY > sliderHeight) clampedY = sliderHeight;\n\n        // Calculate which step we're closest to\n        // We have 5 steps (0, 1, 2, 3, 4) at positions (0, 40, 80, 120, 160)\n        const stepSize = sliderHeight / 4; // 40px per step\n        const rawStep = clampedY / stepSize;\n        const index = Math.round(rawStep);\n\n        const newCols = index + 1;\n\n        // Only update if changed\n        if (newCols !== numColumns) {\n            onNumColumnsChange(newCols);\n        }\n    };\n\n    return (\n        <View\n            style={[styles.columnSliderContainer, style]}\n            collapsable={false}\n            pointerEvents=\"box-none\"\n        >\n            {/* Combined Touch & Visual Area with PanResponder */}\n            <View\n                style={styles.touchArea}\n                pointerEvents=\"auto\"\n                {...panResponder.panHandlers}\n            >\n                {/* Visuals Layer */}\n                <View style={styles.visualsContainer} pointerEvents=\"none\">\n                    {/* Continuous Track Line */}\n                    <View style={styles.columnSliderTrack} />\n\n                    {/* Single Indicator Thumb */}\n                    <View\n                        style={[\n                            styles.columnSliderThumb,\n                            {\n                                top: thumbPosition - 8, // Center thumb\n                            }\n                        ]}\n                    />\n                </View>\n\n                {/* Helper overlay to visualise steps for debugging if needed, currently invisible */}\n                {/* \n                <View style={{...styles.visualsContainer, opacity: 0}} pointerEvents=\"none\">\n                     {[0,1,2,3,4].map(i => (\n                         <View key={i} style={{position:'absolute', top: (i/4)*160 - 2, height:4, width: 10, backgroundColor:'red'}} />\n                     ))}\n                </View>\n                */}\n            </View>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    columnSliderContainer: {\n        position: 'absolute',\n        left: 12,\n        top: 200,\n        zIndex: 999,\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 40,\n        height: 180,\n        ...(Platform.OS === 'android' ? {\n            elevation: 999,\n        } : {}),\n    },\n    touchArea: {\n        width: 40,\n        height: 180, // Full height container\n        alignItems: 'center',\n        paddingTop: 10, // Match visual offset\n    },\n    visualsContainer: {\n        width: '100%',\n        height: 160, // Track height\n        alignItems: 'center',\n    },\n    columnSliderTrack: {\n        width: 2,\n        height: 160,\n        backgroundColor: colors.textSecondary,\n        opacity: 0.3,\n        borderRadius: 1,\n        position: 'absolute',\n        left: 19, // Center in 40px width (40-2)/2 = 19\n    },\n    columnSliderThumb: {\n        position: 'absolute',\n        left: 12, // Center in 40px width (40-16)/2 = 12\n        width: 16,\n        height: 16,\n        borderRadius: 8,\n        backgroundColor: colors.primary,\n        borderWidth: 2,\n        borderColor: colors.white,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.2,\n        shadowRadius: 3,\n        elevation: 4,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/WebModeToggleOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'I18nManager' is defined but never used.","line":16,"column":100,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":111,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"I18nManager"},"fix":{"range":[966,979],"text":""},"desc":"Remove unused variable \"I18nManager\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FontSizes' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"FontSizes"},"fix":{"range":[1327,1377],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":45,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2506,2509],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2506,2509],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3038,3041],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3038,3041],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3200,3203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3200,3203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":157,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":157,"endColumn":69},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7834,7837],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7834,7837],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8729,8732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8729,8732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// WebModeToggleOverlay.tsx\n// A web-only toggle control to switch between '××¤×œ×™×§×¦×™×”' and '××ª×¨ ×‘×™×ª'. Hidden on native.\n// \n// IMPORTANT CHANGES:\n// - Position changes based on web mode: centered in both 'site' and 'app' modes\n// - In app mode: positioned centered above top bar (higher z-index) and stays persistent across all screens\n// - In site mode: centered at top of screen over landing page content\n// - Seamless switching between site mode (landing page) and app mode (login/home)\n// - Enhanced styling for better visibility and user experience\n// \n// VISIBILITY LOGIC:\n// - Toggle button is HIDDEN for authenticated users (users who created an account)\n// - Toggle button is SHOWN for guest users and non-authenticated users\n// - This provides a cleaner UI for logged-in users who don't need to switch modes\nimport React, { useState, useEffect } from 'react';\nimport { Platform, View, Text, TouchableOpacity, StyleSheet, Image, Dimensions, ScrollView, Modal, I18nManager } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useWebMode } from '../stores/webModeStore';\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\n\nconst MENU_ITEMS = [\n  { id: 'stats', label: '×‘××¡×¤×¨×™×', icon: 'stats-chart-outline' },\n  { id: 'vision', label: '×”×—×–×•×Ÿ', icon: 'bulb-outline' },\n  { id: 'problems', label: '×”×‘×¢×™×•×ª', icon: 'alert-circle-outline' },\n  { id: 'features', label: '×ª×›×•× ×•×ª', icon: 'apps-outline' },\n  { id: 'about', label: '××•×“×•×ª', icon: 'information-circle-outline' },\n  { id: 'how', label: '××™×š ×–×” ×¢×•×‘×“', icon: 'help-circle-outline' },\n  { id: 'who', label: '×œ××™ ×–×” ××ª××™×', icon: 'people-outline' },\n  { id: 'values', label: '×¢×¨×›×™×', icon: 'heart-outline' },\n  { id: 'roadmap', label: '××¤×ª ×“×¨×›×™×', icon: 'map-outline' },\n  { id: 'contact', label: '×™×¦×™×¨×ª ×§×©×¨', icon: 'mail-outline' },\n  { id: 'faq', label: '×©××œ×•×ª × ×¤×•×¦×•×ª', icon: 'chatbubble-ellipses-outline' },\n];\n\nconst WebModeToggleOverlay: React.FC = () => {\n  const { t } = useTranslation('webOverlay'); // Use specific namespace\n  const { mode, setMode } = useWebMode();\n  const { isAuthenticated, isGuestMode, selectedUser, isAdmin } = useUser();\n  const navigation: any = useNavigation<NavigationProp<ParamListBase>>();\n\n  const [windowWidth, setWindowWidth] = useState(Dimensions.get('window').width);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const isMobile = windowWidth < 1024; // Desktop breakpoint\n\n  useEffect(() => {\n    const updateWidth = () => setWindowWidth(Dimensions.get('window').width);\n    const subscription = Dimensions.addEventListener('change', updateWidth);\n    return () => subscription.remove();\n  }, []);\n\n  if (Platform.OS !== 'web') return null as any;\n\n  // Hide top bar if user is authenticated (not guest mode) - standard app user\n  if (isAuthenticated && !isGuestMode && selectedUser) {\n    return null as any;\n  }\n\n  const handleToggle = async () => {\n    const newMode: 'app' | 'site' = mode === 'site' ? 'app' : 'site';\n    setMode(newMode);\n\n    let targetRoute: string;\n    if (newMode === 'app') {\n      if (isAuthenticated || isGuestMode) {\n        targetRoute = 'HomeStack';\n      } else {\n        targetRoute = 'LoginScreen';\n      }\n    } else {\n      targetRoute = 'LandingSiteScreen';\n    }\n\n    const guardContext = {\n      isAuthenticated,\n      isGuestMode,\n      isAdmin,\n      mode: newMode,\n    };\n\n    const guardResult = await checkNavigationGuards(\n      {\n        type: 'reset',\n        index: 0,\n        routes: [{ name: targetRoute }],\n      },\n      guardContext\n    );\n\n    if (!guardResult.allowed) {\n      if (guardResult.redirectTo) {\n        await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n      }\n      return;\n    }\n\n    await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n  };\n\n  const scrollToSection = (id: string) => {\n    if (typeof document !== 'undefined') {\n      const element = document.getElementById(id) || document.getElementById(`section-${id}`);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth' });\n        setMobileMenuOpen(false);\n      }\n    }\n  };\n\n  return (\n    <>\n      <View style={styles.topBar}>\n        <View style={styles.topBarContent}>\n          {/* Right Side: Toggle + Menu (RTL) */}\n          <View style={styles.rightContainer}>\n            {/* Toggle Switch */}\n            <TouchableOpacity onPress={handleToggle} activeOpacity={0.9} style={styles.toggleWrapper}>\n              <View style={styles.toggleBackground}>\n                <View style={[styles.toggleSegment, mode === 'site' ? styles.toggleSelected : styles.toggleUnselected]}>\n                  <Text style={[styles.toggleText, mode === 'site' ? styles.toggleTextSelected : undefined]}>{t('siteMode')}</Text>\n                </View>\n                <View style={[styles.toggleSegment, mode === 'app' ? styles.toggleSelected : styles.toggleUnselected]}>\n                  <Text style={[styles.toggleText, mode === 'app' ? styles.toggleTextSelected : undefined]}>{t('appMode')}</Text>\n                </View>\n              </View>\n            </TouchableOpacity>\n\n            {mode === 'site' && (\n              isMobile ? (\n                <TouchableOpacity onPress={() => setMobileMenuOpen(true)} style={styles.menuButton}>\n                  <Ionicons name=\"menu\" size={28} color={colors.textPrimary} />\n                </TouchableOpacity>\n              ) : (\n                <View style={styles.desktopMenu}>\n                  {MENU_ITEMS.slice(0, 5).map((item) => (\n                    <TouchableOpacity key={item.id} onPress={() => scrollToSection(item.id)} style={styles.desktopMenuItem}>\n                      <Text style={styles.desktopMenuText}>{t(item.id)}</Text>\n                    </TouchableOpacity>\n                  ))}\n                  {/* Show \"More\" if needed or just fit as many as possible. For now showing first few for clean look */}\n                  <TouchableOpacity onPress={() => scrollToSection('contact')} style={styles.desktopMenuItem}>\n                    <Text style={styles.desktopMenuText}>{t('contact')}</Text>\n                  </TouchableOpacity>\n                </View>\n              )\n            )}\n          </View>\n\n          {/* Left Side: Logo */}\n          <View style={styles.logoContainer}>\n            <Image\n              source={require('../assets/images/new_logo_black.png')}\n              style={styles.logo}\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.logoText}>Karma Community</Text>\n          </View>\n        </View>\n      </View>\n\n      {/* Mobile Menu Modal for Site Mode */}\n      <Modal visible={mobileMenuOpen} transparent={true} animationType=\"fade\" onRequestClose={() => setMobileMenuOpen(false)}>\n        <TouchableOpacity style={styles.modalOverlay} activeOpacity={1} onPress={() => setMobileMenuOpen(false)}>\n          <View style={styles.mobileMenuContainer}>\n            <View style={styles.mobileMenuHeader}>\n              <Text style={styles.mobileMenuTitle}>{t('menu')}</Text>\n              <TouchableOpacity onPress={() => setMobileMenuOpen(false)}>\n                <Ionicons name=\"close\" size={28} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n            <ScrollView style={styles.mobileMenuItems}>\n              {MENU_ITEMS.map((item) => (\n                <TouchableOpacity key={item.id} onPress={() => scrollToSection(item.id)} style={styles.mobileMenuItem}>\n                  <Ionicons name={item.icon as any} size={20} color={colors.textSecondary} style={{ marginLeft: 10 }} />\n                  <Text style={styles.mobileMenuText}>{t(item.id)}</Text>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  topBar: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 64,\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    zIndex: 9999,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 10,\n    elevation: 4,\n    justifyContent: 'center',\n    paddingHorizontal: 16,\n    // Add backdrop filter for glass effect if supported\n    ...((Platform.OS === 'web') ? { backdropFilter: 'blur(10px)' } : {}) as any,\n  },\n  topBarContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    maxWidth: 1200,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  rightContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  logoContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  logo: {\n    width: 32,\n    height: 32,\n  },\n  logoText: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    fontFamily: Platform.OS === 'web' ? 'system-ui, -apple-system, sans-serif' : undefined,\n  },\n  // Toggle Styles\n  toggleWrapper: {\n    borderRadius: 999,\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n  },\n  toggleBackground: {\n    flexDirection: 'row-reverse',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 999,\n    height: 32,\n    borderWidth: 1,\n    borderColor: colors.border,\n    padding: 2,\n  },\n  toggleSegment: {\n    paddingHorizontal: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 14,\n  },\n  toggleSelected: {\n    backgroundColor: colors.white,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  toggleUnselected: {\n    backgroundColor: 'transparent',\n  },\n  toggleText: {\n    fontSize: 13,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  toggleTextSelected: {\n    color: colors.primary,\n    fontWeight: '700',\n  },\n  // Desktop Menu\n  desktopMenu: {\n    flexDirection: 'row-reverse', // RTL\n    alignItems: 'center',\n    gap: 20,\n    marginRight: 20,\n  },\n  desktopMenuItem: {\n    paddingVertical: 8,\n    paddingHorizontal: 4,\n  },\n  desktopMenuText: {\n    fontSize: 15,\n    fontWeight: '500',\n    color: colors.textPrimary,\n  },\n  menuButton: {\n    padding: 4,\n    marginRight: 8,\n  },\n  // Mobile Menu Modal\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.4)',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end', // Slide from right or just align right\n  },\n  mobileMenuContainer: {\n    width: 280,\n    height: '100%',\n    backgroundColor: 'white',\n    paddingTop: 0,\n    shadowColor: colors.black,\n    shadowOffset: { width: -2, height: 0 },\n    shadowOpacity: 0.2,\n    shadowRadius: 10,\n    elevation: 10,\n  },\n  mobileMenuHeader: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    marginTop: Platform.OS === 'ios' ? 40 : 0,\n  },\n  mobileMenuTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  mobileMenuItems: {\n    flex: 1,\n    padding: 16,\n  },\n  mobileMenuItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n  },\n  mobileMenuText: {\n    fontSize: 16,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n});\n\nexport default WebModeToggleOverlay;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[288,291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[288,291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[313,316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[313,316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\n\ninterface RideCardProps {\n    ride: any;\n    onPress: (ride: any) => void;\n}\n\nconst RideCard: React.FC<RideCardProps> = ({ ride, onPress }) => {\n    return (\n        <TouchableOpacity\n            style={styles.container}\n            onPress={() => onPress(ride)}\n            activeOpacity={0.7}\n        >\n            <View style={styles.header}>\n                <View style={styles.driverInfo}>\n                    <View style={styles.avatarContainer}>\n                        <Text style={styles.avatarEmoji}>{ride.image || 'ğŸš—'}</Text>\n                    </View>\n                    <View>\n                        <Text style={styles.driverName}>{ride.driverName}</Text>\n                        <Text style={styles.routeText} numberOfLines={1}>\n                            {ride.from} â {ride.to}\n                        </Text>\n                    </View>\n                </View>\n                <Text style={styles.price}>{ride.price ? `â‚ª${ride.price}` : '×—×™× ×'}</Text>\n            </View>\n\n            <View style={styles.details}>\n                <View style={styles.detailRow}>\n                    <Icon name=\"time-outline\" size={14} color={colors.textSecondary} />\n                    <Text style={styles.detailText}>{ride.time} | {ride.date}</Text>\n                </View>\n                <View style={styles.detailRow}>\n                    <Icon name=\"people-outline\" size={14} color={colors.textSecondary} />\n                    <Text style={styles.detailText}>{ride.seats} ××§×•××•×ª</Text>\n                </View>\n            </View>\n\n            <View style={styles.footer}>\n                {ride.noSmoking && <View style={styles.tag}><Text style={styles.tagText}>ğŸš«ğŸš­</Text></View>}\n                {ride.petsAllowed && <View style={styles.tag}><Text style={styles.tagText}>ğŸ¾</Text></View>}\n                {ride.kidsFriendly && <View style={styles.tag}><Text style={styles.tagText}>ğŸ‘¶</Text></View>}\n            </View>\n        </TouchableOpacity>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.moneyCardBackground,\n        borderRadius: 12,\n        padding: 12,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n        elevation: 2,\n        width: '100%',\n    },\n    header: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 8,\n    },\n    driverInfo: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        gap: 8,\n        flex: 1,\n    },\n    avatarContainer: {\n        width: 40,\n        height: 40,\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 20,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    avatarEmoji: {\n        fontSize: 20,\n    },\n    driverName: {\n        fontWeight: 'bold',\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n        textAlign: 'right',\n    },\n    routeText: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        textAlign: 'right',\n        maxWidth: 200,\n    },\n    price: {\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n        color: colors.moneyHistoryAmount,\n    },\n    details: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginBottom: 8,\n        borderTopWidth: 1,\n        borderTopColor: colors.moneyFormBorder,\n        paddingTop: 8,\n    },\n    detailRow: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        gap: 4,\n    },\n    detailText: {\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n    },\n    footer: {\n        flexDirection: 'row-reverse',\n        gap: 6,\n    },\n    tag: {\n        backgroundColor: colors.backgroundSecondary,\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4,\n    },\n    tagText: {\n        fontSize: FontSizes.caption,\n    }\n});\n\nexport default RideCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideHistoryCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":2,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[76,83],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[350,353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[350,353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[376,379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[376,379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[412,415],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[412,415],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Alert } from 'react-native';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\nimport { useTranslation } from 'react-i18next';\n\ninterface RideHistoryCardProps {\n    ride: any;\n    onDelete: (ride: any) => void;\n    onRestore: (ride: any) => void;\n}\n\nconst RideHistoryCard: React.FC<RideHistoryCardProps> = ({ ride, onDelete, onRestore }) => {\n    const { t } = useTranslation();\n    const isCancelled = ride.status === 'cancelled';\n\n    return (\n        <View style={styles.container}>\n            <View style={styles.header}>\n                <View style={{ flex: 1 }}>\n                    <Text style={styles.title} numberOfLines={1}>\n                        {ride.from} â {ride.to}\n                    </Text>\n                    <Text style={styles.date}>\n                        {ride.date} | {ride.time}\n                    </Text>\n                </View>\n\n                {!isCancelled && (\n                    <TouchableOpacity\n                        onPress={() => onDelete(ride)}\n                        style={styles.deleteButton}\n                        hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n                    >\n                        <Icon name=\"trash-outline\" size={20} color={colors.legacyDarkRed} />\n                    </TouchableOpacity>\n                )}\n            </View>\n\n            <View style={styles.footer}>\n                <View style={[styles.badge, isCancelled && styles.badgeCancelled]}>\n                    <Text style={[styles.badgeText, isCancelled && styles.badgeTextCancelled]}>\n                        {isCancelled ? (t('common:cancelled') || '×‘×•×˜×œ') : (ride.status || '×¤×•×¨×¡×')}\n                    </Text>\n                </View>\n\n                <View style={styles.actions}>\n                    <TouchableOpacity\n                        style={styles.restoreChip}\n                        onPress={() => onRestore(ride)}\n                    >\n                        <Text style={styles.restoreChipText}>{t('trump:restore') || '×©×—×–×¨'}</Text>\n                    </TouchableOpacity>\n                    <Text style={styles.price}>{ride.price ? `â‚ª${ride.price}` : '×—×™× ×'}</Text>\n                </View>\n            </View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: colors.moneyCardBackground,\n        borderRadius: 10,\n        padding: 12,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        marginBottom: 8,\n    },\n    header: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginBottom: 4,\n        alignItems: 'center',\n    },\n    title: {\n        fontWeight: 'bold',\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n        textAlign: 'right',\n    },\n    date: {\n        fontSize: FontSizes.caption,\n        color: colors.textSecondary,\n        textAlign: 'right',\n    },\n    deleteButton: {\n        padding: 4,\n        marginLeft: 8,\n    },\n    footer: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginTop: 8,\n    },\n    actions: {\n        flexDirection: 'row', // Left to right internally for price/restore\n        alignItems: 'center',\n        gap: 8,\n    },\n    badge: {\n        backgroundColor: colors.moneyStatusBackground,\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4,\n    },\n    badgeCancelled: {\n        backgroundColor: colors.errorLight,\n    },\n    badgeText: {\n        fontSize: FontSizes.caption,\n        color: colors.moneyStatusText,\n        fontWeight: 'bold',\n    },\n    badgeTextCancelled: {\n        color: colors.legacyDarkRed,\n    },\n    restoreChip: {\n        backgroundColor: colors.moneyFormBackground,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        borderRadius: 999,\n        paddingHorizontal: 10,\n        paddingVertical: 4,\n    },\n    restoreChipText: {\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n        fontWeight: '600',\n    },\n    price: {\n        fontSize: FontSizes.small,\n        fontWeight: 'bold',\n        color: colors.moneyHistoryAmount,\n    }\n});\n\nexport default RideHistoryCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/components/rides/RideOfferForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":84,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[122,132],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedTags' is defined but never used.","line":80,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onToggleTag' is defined but never used.","line":80,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'availableTags' is defined but never used.","line":80,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":45}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, I18nManager, Platform } from 'react-native';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport colors from '../../globals/colors';\nimport { FontSizes } from '../../globals/constants';\nimport TimePicker from '../TimePicker';\nimport DatePicker from '../DatePicker';\nimport { useTranslation } from 'react-i18next';\n\n// Ensure layout is RTL friendly manually where needed\nconst isRTL = I18nManager.isRTL;\n\ninterface RideOfferFormProps {\n    // Destination\n    destination: string;\n    onDestinationChange: (val: string) => void;\n\n    // Origin\n    fromLocation: string;\n    onFromLocationChange: (val: string) => void;\n    useCurrentLocation: boolean;\n    onToggleCurrentLocation: (val: boolean) => void;\n\n    // Time & Date Logic\n    departureTime: string;\n    onDepartureTimeChange: (val: string) => void;\n    immediateDeparture: boolean;\n    onToggleImmediateDeparture: (val: boolean) => void;\n\n    leavingToday: boolean;\n    onToggleLeavingToday: (val: boolean) => void;\n\n    rideDate: Date;\n    onDateChange: (date: Date) => void;\n\n    // Recurring\n    isRecurring: boolean;\n    onToggleRecurring: (val: boolean) => void;\n    recurrenceFrequency: number;\n    onRecurrenceFrequencyChange: (val: number) => void;\n    recurrenceUnit: 'day' | 'week' | 'month' | null;\n    onRecurrenceUnitChange: (val: 'day' | 'week' | 'month' | null) => void;\n\n    // Seats & Price\n    seats: number;\n    onSeatsChange: (val: number) => void;\n    price: string;\n    onPriceChange: (val: string) => void;\n\n    // Filters/Tags\n    selectedTags: string[];\n    onToggleTag: (tag: string) => void;\n    availableTags: string[];\n\n    // Submit\n    onSubmit: () => void;\n    isValid: boolean;\n    hideDestinationInput?: boolean;\n\n    // Location Details\n    detectedAddress?: string;\n    isLocating?: boolean;\n    isLocationError?: boolean;\n}\n\nconst RideOfferForm: React.FC<RideOfferFormProps> = ({\n    destination, onDestinationChange,\n    fromLocation, onFromLocationChange,\n    useCurrentLocation, onToggleCurrentLocation,\n    detectedAddress, isLocating, isLocationError, // Destructure new props\n    departureTime, onDepartureTimeChange,\n    immediateDeparture, onToggleImmediateDeparture,\n    leavingToday, onToggleLeavingToday,\n    rideDate, onDateChange,\n    isRecurring, onToggleRecurring,\n    recurrenceFrequency, onRecurrenceFrequencyChange,\n    recurrenceUnit, onRecurrenceUnitChange,\n    seats, onSeatsChange,\n    price, onPriceChange,\n    selectedTags, onToggleTag, availableTags,\n    onSubmit, isValid, hideDestinationInput\n}) => {\n    const { t } = useTranslation();\n    const priceInputRef = useRef<TextInput>(null);\n    const [needToPay, setNeedToPay] = useState(price !== '0' && price !== '');\n\n    // Synchronize internal pay toggle if price changes externally\n    React.useEffect(() => {\n        if (price && price !== '0') setNeedToPay(true);\n    }, [price]);\n\n    // Ensure rideDate is always a valid Date\n    const validRideDate = React.useMemo(() => {\n        if (!rideDate || !(rideDate instanceof Date) || isNaN(rideDate.getTime())) {\n            return new Date();\n        }\n        return rideDate;\n    }, [rideDate]);\n\n    const handleDateChange = (date: Date | null) => {\n        if (date && date instanceof Date && !isNaN(date.getTime())) {\n            onDateChange(date);\n        } else {\n            onDateChange(new Date());\n        }\n    };\n\n    return (\n        <View style={styles.formContainer}>\n\n            {/* 1. Destination */}\n            {!hideDestinationInput && (\n                <View style={styles.section}>\n                    <Text style={styles.label}>\n                        {t('trump:ui.searchPlaceholder.offer')} <Text style={styles.requiredStar}>*</Text>\n                    </Text>\n                    <TextInput\n                        style={styles.input}\n                        value={destination}\n                        onChangeText={onDestinationChange}\n                        placeholder={t('trump:ui.searchPlaceholder.offer')}\n                        textAlign={isRTL ? 'right' : 'left'}\n                    />\n                </View>\n            )}\n\n            {/* 2. From Location */}\n            <View style={styles.section}>\n                <Text style={styles.label}>\n                    {t('trump:ui.fromLocationLabel')} <Text style={styles.requiredStar}>*</Text>\n                </Text>\n\n                <TouchableOpacity\n                    style={styles.checkboxRow}\n                    onPress={() => onToggleCurrentLocation(!useCurrentLocation)}\n                >\n                    <View style={[styles.checkbox, useCurrentLocation && styles.checkboxChecked]}>\n                        {useCurrentLocation && <Icon name=\"checkmark\" size={16} color=\"white\" />}\n                    </View>\n                    <Text style={[\n                        styles.checkboxLabel,\n                        { flex: 1, flexWrap: 'wrap' },\n                        (isLocationError && useCurrentLocation) ? { color: colors.error } : {}\n                    ]}>\n                        {isLocating\n                            ? `${t('trump:currentLocation')}...`\n                            : (useCurrentLocation && detectedAddress ? detectedAddress : t('trump:currentLocation'))\n                        }\n                    </Text>\n                </TouchableOpacity>\n\n                {!useCurrentLocation && (\n                    <TextInput\n                        style={[styles.input, { marginTop: 8 }]}\n                        value={fromLocation}\n                        onChangeText={onFromLocationChange}\n                        placeholder={t('trump:ui.enterDepartureAddress')}\n                        textAlign={isRTL ? 'right' : 'left'}\n                    />\n                )}\n            </View>\n\n            {/* 3. Time & Date Logic */}\n            <View style={styles.section}>\n                <Text style={styles.label}>\n                    {t('trump:ui.timePickerPlaceholder')} <Text style={styles.requiredStar}>*</Text>\n                </Text>\n\n                {/* Immediate Departure Checkbox */}\n                <TouchableOpacity\n                    style={styles.checkboxRow}\n                    onPress={() => onToggleImmediateDeparture(!immediateDeparture)}\n                >\n                    <View style={[styles.checkbox, immediateDeparture && styles.checkboxChecked]}>\n                        {immediateDeparture && <Icon name=\"checkmark\" size={16} color=\"white\" />}\n                    </View>\n                    <Text style={styles.checkboxLabel}>{t('trump:ui.immediateDeparture')}</Text>\n                </TouchableOpacity>\n\n                {!immediateDeparture && (\n                    <View style={styles.dateTimeContainer}>\n                        {/* Time Picker */}\n                        <TimePicker\n                            value={departureTime}\n                            onTimeChange={onDepartureTimeChange}\n                            placeholder={t('trump:ui.timePickerPlaceholder')}\n                        />\n\n                        {/* Leaving Today Checkbox */}\n                        <TouchableOpacity\n                            style={[styles.checkboxRow, { marginTop: 12 }]}\n                            onPress={() => onToggleLeavingToday(!leavingToday)}\n                        >\n                            <View style={[styles.checkbox, leavingToday && styles.checkboxChecked]}>\n                                {leavingToday && <Icon name=\"checkmark\" size={16} color=\"white\" />}\n                            </View>\n                            <Text style={styles.checkboxLabel}>{t('trump:ui.leavingToday')}</Text>\n                        </TouchableOpacity>\n\n                        {/* Date Picker (if not today) */}\n                        {!leavingToday && (\n                            <View style={{ marginTop: 12 }}>\n                                <DatePicker\n                                    value={validRideDate}\n                                    onChange={handleDateChange}\n                                    placeholder={t('trump:ui.selectDate')}\n                                    minimumDate={new Date()}\n                                />\n                            </View>\n                        )}\n                    </View>\n                )}\n\n                {/* Recurring Ride Checkbox */}\n                <TouchableOpacity\n                    style={[styles.checkboxRow, { marginTop: 16, borderTopWidth: 1, borderTopColor: colors.border, paddingTop: 12 }]}\n                    onPress={() => {\n                        const newValue = !isRecurring;\n                        onToggleRecurring(newValue);\n                        if (!newValue) {\n                            onRecurrenceUnitChange(null);\n                            onRecurrenceFrequencyChange(1);\n                        }\n                    }}\n                >\n                    <View style={[styles.checkbox, isRecurring && styles.checkboxChecked]}>\n                        {isRecurring && <Icon name=\"checkmark\" size={16} color=\"white\" />}\n                    </View>\n                    <Text style={styles.checkboxLabel}>{t('trump:ui.recurringRide')}</Text>\n                </TouchableOpacity>\n\n                {/* Recurrence Configuration (shown when recurring is enabled) */}\n                {isRecurring && (\n                    <View style={[styles.dateTimeContainer, { marginTop: 12 }]}>\n                        <Text style={[styles.label, { fontSize: FontSizes.small, marginBottom: 12 }]}>\n                            {t('trump:ui.recurrenceConfigLabel')}\n                        </Text>\n\n                        {/* Frequency Counter */}\n                        <View style={styles.recurrenceRow}>\n                            <View style={styles.recurrenceFrequencyContainer}>\n                                <Text style={[styles.label, { fontSize: FontSizes.small, marginBottom: 8 }]}>\n                                    {t('trump:ui.recurrenceFrequencyLabel')}\n                                </Text>\n                                <View style={styles.counterRow}>\n                                    <TouchableOpacity\n                                        style={styles.counterBtn}\n                                        onPress={() => onRecurrenceFrequencyChange(Math.max(1, recurrenceFrequency - 1))}\n                                    >\n                                        <Text style={styles.counterText}>-</Text>\n                                    </TouchableOpacity>\n                                    <Text style={styles.counterValue}>{recurrenceFrequency}</Text>\n                                    <TouchableOpacity\n                                        style={styles.counterBtn}\n                                        onPress={() => onRecurrenceFrequencyChange(Math.min(12, recurrenceFrequency + 1))}\n                                    >\n                                        <Text style={styles.counterText}>+</Text>\n                                    </TouchableOpacity>\n                                </View>\n                            </View>\n\n                            {/* Unit Selection */}\n                            <View style={styles.recurrenceUnitContainer}>\n                                <Text style={[styles.label, { fontSize: FontSizes.small, marginBottom: 8 }]}>\n                                    {t('trump:ui.recurrenceUnitLabel')}\n                                </Text>\n                                <View style={styles.recurrenceUnitOptions}>\n                                    <TouchableOpacity\n                                        style={[styles.recurrenceUnitOption, recurrenceUnit === 'day' && styles.recurrenceUnitOptionSelected]}\n                                        onPress={() => onRecurrenceUnitChange('day')}\n                                    >\n                                        <Text style={[styles.recurrenceUnitOptionText, recurrenceUnit === 'day' && styles.recurrenceUnitOptionTextSelected]}>\n                                            {t('trump:ui.recurrenceDay')}\n                                        </Text>\n                                    </TouchableOpacity>\n                                    <TouchableOpacity\n                                        style={[styles.recurrenceUnitOption, recurrenceUnit === 'week' && styles.recurrenceUnitOptionSelected]}\n                                        onPress={() => onRecurrenceUnitChange('week')}\n                                    >\n                                        <Text style={[styles.recurrenceUnitOptionText, recurrenceUnit === 'week' && styles.recurrenceUnitOptionTextSelected]}>\n                                            {t('trump:ui.recurrenceWeek')}\n                                        </Text>\n                                    </TouchableOpacity>\n                                    <TouchableOpacity\n                                        style={[styles.recurrenceUnitOption, recurrenceUnit === 'month' && styles.recurrenceUnitOptionSelected]}\n                                        onPress={() => onRecurrenceUnitChange('month')}\n                                    >\n                                        <Text style={[styles.recurrenceUnitOptionText, recurrenceUnit === 'month' && styles.recurrenceUnitOptionTextSelected]}>\n                                            {t('trump:ui.recurrenceMonth')}\n                                        </Text>\n                                    </TouchableOpacity>\n                                </View>\n                            </View>\n                        </View>\n\n                        {/* Preview text */}\n                        {recurrenceUnit && (\n                            <Text style={[styles.recurrencePreview, { marginTop: 12, textAlign: 'right' }]}>\n                                {(() => {\n                                    const unitText = recurrenceUnit === 'day'\n                                        ? (recurrenceFrequency === 1 ? t('trump:ui.recurrenceDay') : t('trump:ui.recurrenceDays'))\n                                        : recurrenceUnit === 'week'\n                                            ? (recurrenceFrequency === 1 ? t('trump:ui.recurrenceWeek') : t('trump:ui.recurrenceWeeks'))\n                                            : (recurrenceFrequency === 1 ? t('trump:ui.recurrenceMonth') : t('trump:ui.recurrenceMonths'));\n                                    return t('trump:ui.recurrencePreview', { frequency: recurrenceFrequency, unit: unitText });\n                                })()}\n                            </Text>\n                        )}\n                    </View>\n                )}\n\n            </View>\n\n            {/* 4. Seats & Price */}\n            <View style={styles.row}>\n                <View style={styles.fieldSmall}>\n                    <Text style={styles.label}>{t('trump:ui.seatsLabel')}</Text>\n                    <View style={styles.counterRow}>\n                        <TouchableOpacity style={styles.counterBtn} onPress={() => onSeatsChange(Math.max(1, seats - 1))}>\n                            <Text style={styles.counterText}>-</Text>\n                        </TouchableOpacity>\n                        <Text style={styles.counterValue}>{seats}</Text>\n                        <TouchableOpacity style={styles.counterBtn} onPress={() => onSeatsChange(Math.min(8, seats + 1))}>\n                            <Text style={styles.counterText}>+</Text>\n                        </TouchableOpacity>\n                    </View>\n                </View>\n\n                <View style={styles.fieldSmall}>\n                    <TouchableOpacity onPress={() => {\n                        const newVal = !needToPay;\n                        setNeedToPay(newVal);\n                        if (!newVal) onPriceChange('0');\n                    }} activeOpacity={0.8}>\n                        <Text style={[styles.label, { color: needToPay ? colors.textPrimary : colors.textSecondary }]}>\n                            {t('trump:ui.fuelContributionLabel')}\n                        </Text>\n                    </TouchableOpacity>\n\n                    {needToPay && (\n                        <View style={styles.inputWrapper}>\n                            <TextInput\n                                ref={priceInputRef}\n                                style={[styles.input, { textAlign: 'center', paddingRight: 20 }]}\n                                value={price}\n                                onChangeText={(t) => onPriceChange(t.replace(/[^0-9]/g, ''))}\n                                keyboardType=\"numeric\"\n                                placeholder=\"0\"\n                            />\n                            <Text style={styles.currencySymbol}>â‚ª</Text>\n                        </View>\n                    )}\n                </View>\n            </View>\n\n            {/* Submit Button */}\n            <TouchableOpacity\n                style={[styles.offerButton, !isValid && { opacity: 0.5 }]}\n                onPress={onSubmit}\n                disabled={!isValid}\n            >\n                <Text style={styles.offerButtonText}>{t('trump:ui.publishRide')}</Text>\n            </TouchableOpacity>\n\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    formContainer: {\n        padding: 4,\n        width: '100%',\n    },\n    section: {\n        marginBottom: 16,\n        width: '100%',\n    },\n    dateTimeContainer: {\n        marginTop: 12,\n        paddingLeft: 12,\n        borderLeftWidth: 2,\n        borderLeftColor: colors.border,\n    },\n    row: {\n        flexDirection: 'row-reverse',\n        gap: 12,\n        marginBottom: 16,\n    },\n    fieldSmall: {\n        flex: 1,\n    },\n    label: {\n        fontSize: FontSizes.medium,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'right',\n    },\n    requiredStar: {\n        color: colors.error,\n        fontWeight: 'bold',\n    },\n    input: {\n        backgroundColor: colors.moneyInputBackground,\n        borderRadius: 10,\n        padding: 12,\n        fontSize: FontSizes.body,\n        color: colors.textPrimary,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        width: '100%',\n    },\n    locationOptions: {\n        flexDirection: 'row-reverse',\n        gap: 10,\n    },\n    locationOption: {\n        flex: 1,\n        padding: 10,\n        borderRadius: 8,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        alignItems: 'center',\n        backgroundColor: colors.moneyFormBackground,\n    },\n    locationOptionSelected: {\n        backgroundColor: colors.moneyButtonBackground,\n        borderColor: colors.moneyButtonBackground,\n    },\n    locationOptionText: {\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n    },\n    locationOptionTextSelected: {\n        color: colors.backgroundPrimary,\n        fontWeight: 'bold',\n    },\n    checkboxRow: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        gap: 10,\n        marginBottom: 4,\n    },\n    checkbox: {\n        width: 24,\n        height: 24,\n        borderRadius: 6,\n        borderWidth: 2,\n        borderColor: colors.moneyButtonBackground,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: colors.backgroundPrimary,\n    },\n    checkboxChecked: {\n        backgroundColor: colors.moneyButtonBackground,\n    },\n    checkboxLabel: {\n        fontSize: FontSizes.body,\n        color: colors.textPrimary,\n    },\n    dateButton: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: colors.moneyInputBackground,\n        padding: 12,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n    },\n    dateButtonText: {\n        fontSize: FontSizes.body,\n        color: colors.textPrimary,\n    },\n    counterRow: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: colors.moneyInputBackground,\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        paddingHorizontal: 8,\n        paddingVertical: 6,\n        height: 48,\n    },\n    counterBtn: {\n        backgroundColor: colors.moneyFormBackground,\n        width: 32,\n        height: 32,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderRadius: 8,\n    },\n    counterText: {\n        fontSize: 18,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n    counterValue: {\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n    inputWrapper: {\n        position: 'relative',\n        justifyContent: 'center',\n    },\n    currencySymbol: {\n        position: 'absolute',\n        left: 12,\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n    },\n    tagsRow: {\n        flexDirection: 'row-reverse',\n        flexWrap: 'wrap',\n        gap: 8,\n    },\n    tag: {\n        backgroundColor: colors.moneyFormBackground,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        borderRadius: 999,\n        paddingHorizontal: 12,\n        paddingVertical: 6,\n    },\n    tagSelected: {\n        backgroundColor: colors.moneyStatusBackground,\n        borderColor: colors.moneyStatusBackground,\n    },\n    tagText: {\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n    },\n    tagTextSelected: {\n        color: colors.moneyStatusText,\n        fontWeight: 'bold',\n    },\n    offerButton: {\n        backgroundColor: colors.moneyButtonBackground,\n        padding: 16,\n        borderRadius: 14,\n        alignItems: 'center',\n        marginTop: 8,\n        width: '100%',\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.2,\n        shadowRadius: 3,\n        elevation: 3,\n    },\n    offerButtonText: {\n        color: colors.backgroundPrimary,\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n    },\n    recurrenceRow: {\n        flexDirection: 'row-reverse',\n        gap: 12,\n        marginBottom: 8,\n    },\n    recurrenceFrequencyContainer: {\n        flex: 1,\n    },\n    recurrenceUnitContainer: {\n        flex: 1.5,\n    },\n    recurrenceUnitOptions: {\n        flexDirection: 'row-reverse',\n        gap: 6,\n    },\n    recurrenceUnitOption: {\n        flex: 1,\n        padding: 10,\n        borderRadius: 8,\n        borderWidth: 1,\n        borderColor: colors.moneyFormBorder,\n        backgroundColor: colors.moneyFormBackground,\n        alignItems: 'center',\n    },\n    recurrenceUnitOptionSelected: {\n        backgroundColor: colors.moneyButtonBackground,\n        borderColor: colors.moneyButtonBackground,\n    },\n    recurrenceUnitOptionText: {\n        fontSize: FontSizes.small,\n        color: colors.textPrimary,\n    },\n    recurrenceUnitOptionTextSelected: {\n        color: colors.backgroundPrimary,\n        fontWeight: 'bold',\n    },\n    recurrencePreview: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        fontStyle: 'italic',\n    },\n});\n\nexport default RideOfferForm;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/AppLoadingContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/UserContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'API_BASE_URL' is assigned a value but never used.","line":119,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":474,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21257,21260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21257,21260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Global user/session context managing auth mode (guest/demo/real), selected user, and auth persistence.\n// - Reached from: Wrapped around the app in `App.tsx`; consumed via `useUser()` in many screens.\n// - Provides: Methods to set user with mode, sign out, toggle guest/demo, and resetHomeScreen trigger.\n// - Storage: Persists `current_user`, `guest_mode`, and `auth_mode` in AsyncStorage; clears local collections on real auth.\n\n// TODO: CRITICAL - This context is doing too much. Split into multiple contexts:\n//   - AuthContext for authentication state\n//   - UserProfileContext for user data\n//   - AppStateContext for app-level state\n// TODO: Add proper error handling and recovery mechanisms\n// TODO: Implement proper TypeScript strict typing - remove any types\n// TODO: Add comprehensive state validation and sanitization\n// TODO: Remove hardcoded user data and implement proper user fetching\n// TODO: Add proper loading states for all async operations\n// TODO: Implement proper storage encryption for sensitive data\n// TODO: Add unit tests for all context methods and state changes\n// TODO: Remove console.log statements and use proper logging service\n// TODO: Add proper memory management and cleanup for subscriptions\nimport React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { db } from '../utils/databaseService';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { getAuth, onAuthStateChanged, User as FirebaseUser } from 'firebase/auth';\nimport { getFirebase } from '../utils/firebaseClient';\nimport { logger } from '../utils/loggerService';\n\n// Auth mode of the current session\nexport type AuthMode = 'guest' | 'demo' | 'real';\n// Simplified role model for the app\nexport type Role = 'guest' | 'user' | 'admin';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  avatar: string;\n  bio: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location: { city: string; country: string };\n  interests: string[];\n  roles: string[];\n  postsCount: number;\n  followersCount: number;\n  followingCount: number;\n  notifications: Array<{ type: string; text: string; date: string }>;\n  settings: { language: string; darkMode: boolean; notificationsEnabled: boolean };\n  // Optional org enrichment\n  orgApplicationId?: string;\n  orgName?: string;\n}\n\ninterface UserContextType {\n  selectedUser: User | null;\n  setSelectedUser: (user: User | null) => Promise<void>;\n  setSelectedUserWithMode: (user: User | null, mode: AuthMode) => Promise<void>;\n  // New simplified API\n  role: Role;\n  setCurrentPrincipal: (principal: { user: User | null; role: Role }) => Promise<void>;\n  isUserSelected: boolean;\n  isLoading: boolean;\n  signOut: () => Promise<void>;\n  isAuthenticated: boolean;\n  isGuestMode: boolean;\n  isRealAuth: boolean;\n  isAdmin: boolean;\n  setGuestMode: () => Promise<void>;\n  setDemoUser: () => Promise<void>;\n  resetHomeScreen: () => void;\n  resetHomeScreenTrigger: number;\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\ninterface UserProviderProps {\n  children: ReactNode;\n}\n\nexport const UserProvider: React.FC<UserProviderProps> = ({ children }) => {\n  const [selectedUser, setSelectedUserState] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isGuestMode, setIsGuestMode] = useState(false);\n  const [authMode, setAuthMode] = useState<AuthMode>('guest');\n  const [resetHomeScreenTrigger, setResetHomeScreenTrigger] = useState(0);\n\n  // Check authentication status on app start\n  useEffect(() => {\n    console.log('ğŸ” UserContext - useEffect - Starting auth check');\n    checkAuthStatus();\n  }, []);\n\n  // Firebase Auth State Listener - automatically detects when user logs in/out\n  useEffect(() => {\n    console.log('ğŸ”¥ UserContext - Setting up Firebase Auth listener');\n    let unsubscribe: (() => void) | undefined;\n\n    try {\n      const { app } = getFirebase();\n      const auth = getAuth(app);\n\n      unsubscribe = onAuthStateChanged(auth, async (firebaseUser: FirebaseUser | null) => {\n        logger.info('Auth', 'Firebase Auth State Changed', {\n          hasUser: !!firebaseUser,\n          email: firebaseUser?.email,\n          uid: firebaseUser?.uid,\n          emailVerified: firebaseUser?.emailVerified,\n        });\n\n        if (firebaseUser) {\n          // Firebase user is logged in - restore/create session\n          logger.info('Auth', 'Firebase user detected, restoring session');\n\n          try {\n            // Get UUID from server using firebase_uid\n            const { API_BASE_URL } = await import('../utils/config.constants');\n            const { apiService } = await import('../utils/apiService');\n\n            const resolveResponse = await apiService.resolveUserId({\n              firebase_uid: firebaseUser.uid,\n              email: firebaseUser.email || undefined\n            });\n\n            // Save JWT tokens if provided\n            if (resolveResponse.tokens) {\n              await AsyncStorage.setItem('jwt_access_token', resolveResponse.tokens.accessToken);\n              await AsyncStorage.setItem('jwt_refresh_token', resolveResponse.tokens.refreshToken);\n              await AsyncStorage.setItem('jwt_token_expires_at', \n                String(Date.now() + (resolveResponse.tokens.expiresIn * 1000))\n              );\n              logger.debug('Auth', 'JWT tokens saved from resolve-id');\n            }\n\n            const serverUser = resolveResponse.user || resolveResponse.data;\n            if (!resolveResponse.success || !serverUser) {\n              logger.warn('Auth', 'Failed to resolve user ID from server, using fallback');\n              // Fallback: try to get user by email\n              if (firebaseUser.email) {\n                const userResponse = await apiService.getUserById(firebaseUser.email);\n                if (userResponse.success && userResponse.data) {\n                  const fallbackServerUser = userResponse.data;\n                  const userData: User = {\n                    id: fallbackServerUser.id, // UUID from database\n                    name: fallbackServerUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n                    email: fallbackServerUser.email || firebaseUser.email || '',\n                    phone: fallbackServerUser.phone || firebaseUser.phoneNumber || '+9720000000',\n                    avatar: fallbackServerUser.avatar_url || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n                    bio: fallbackServerUser.bio || '',\n                    karmaPoints: fallbackServerUser.karma_points || 0,\n                    joinDate: fallbackServerUser.join_date || fallbackServerUser.created_at || new Date().toISOString(),\n                    isActive: fallbackServerUser.is_active !== false,\n                    lastActive: fallbackServerUser.last_active || new Date().toISOString(),\n                    location: { city: fallbackServerUser.city || '×™×©×¨××œ', country: fallbackServerUser.country || 'IL' },\n                    interests: fallbackServerUser.interests || [],\n                    roles: fallbackServerUser.roles || ['user'],\n                    postsCount: fallbackServerUser.posts_count || 0,\n                    followersCount: fallbackServerUser.followers_count || 0,\n                    followingCount: fallbackServerUser.following_count || 0,\n                    notifications: [],\n                    settings: fallbackServerUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                  };\n\n                  await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n                  await AsyncStorage.setItem('auth_mode', 'real');\n                  await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n                  const enrichedUser = await enrichUserWithOrgRoles(userData);\n                  setSelectedUserState(enrichedUser);\n                  setIsAuthenticated(true);\n                  setIsGuestMode(false);\n                  setAuthMode('real');\n\n                  logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n                  return;\n                }\n              }\n              throw new Error('Failed to get user from server');\n            }\n\n            // Use UUID from server (serverUser already defined above)\n            const nowIso = new Date().toISOString();\n            const userData: User = {\n              id: serverUser.id, // UUID from database - this is the primary identifier\n              name: serverUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n              email: serverUser.email || firebaseUser.email || '',\n              phone: serverUser.phone || firebaseUser.phoneNumber || '+9720000000',\n              avatar: serverUser.avatar || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n              bio: serverUser.bio || '',\n              karmaPoints: serverUser.karmaPoints || 0,\n              joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n              isActive: serverUser.isActive !== false,\n              lastActive: serverUser.lastActive || nowIso,\n              location: serverUser.location || { city: '×™×©×¨××œ', country: 'IL' },\n              interests: serverUser.interests || [],\n              roles: serverUser.roles || ['user'],\n              postsCount: serverUser.postsCount || 0,\n              followersCount: serverUser.followersCount || 0,\n              followingCount: serverUser.followingCount || 0,\n              notifications: [],\n              settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n            };\n\n            // Save to AsyncStorage for persistence\n            await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n            await AsyncStorage.setItem('auth_mode', 'real');\n            await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n            // Update context state\n            const enrichedUser = await enrichUserWithOrgRoles(userData);\n            setSelectedUserState(enrichedUser);\n            setIsAuthenticated(true);\n            setIsGuestMode(false);\n            setAuthMode('real');\n\n            logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n          } catch (error) {\n            logger.error('Auth', 'Failed to restore Firebase session', { error });\n            // Don't set user state if we can't get UUID from server\n          }\n        } else {\n          // No Firebase user - only clear if we had a Firebase user before\n          const firebaseUserId = await AsyncStorage.getItem('firebase_user_id');\n          if (firebaseUserId) {\n            logger.info('Auth', 'Firebase user logged out, clearing session');\n            await AsyncStorage.multiRemove(['current_user', 'auth_mode', 'firebase_user_id']);\n            setSelectedUserState(null);\n            setIsAuthenticated(false);\n            setIsGuestMode(false);\n            setAuthMode('guest');\n          }\n        }\n      });\n\n      logger.info('Auth', 'Firebase Auth listener set up successfully');\n    } catch (error) {\n      logger.error('Auth', 'Error setting up Firebase Auth listener', { error });\n    }\n\n    // Cleanup function\n    return () => {\n      logger.debug('Auth', 'Cleaning up Firebase Auth listener');\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, []);\n\n  const computeRole = (user: User | null, mode: AuthMode): Role => {\n    if (mode === 'guest' || !user) return 'guest';\n    const roles = Array.isArray(user?.roles) ? user!.roles : [];\n    return (roles.includes('admin') || roles.includes('super_admin') || roles.includes('org_admin')) ? 'admin' : 'user';\n  };\n\n  const checkAuthStatus = async () => {\n    try {\n      console.log('ğŸ” UserContext - checkAuthStatus - Starting auth check');\n      setIsLoading(true);\n\n      // First, check for successful OAuth authentication\n      console.log('ğŸ” UserContext - checkAuthStatus - Checking for OAuth success');\n      const oauthSuccess = await AsyncStorage.getItem('oauth_success_flag');\n      const userData = await AsyncStorage.getItem('google_auth_user');\n      const token = await AsyncStorage.getItem('google_auth_token');\n\n      if (oauthSuccess && userData && token) {\n        try {\n          console.log('ğŸ” UserContext - checkAuthStatus - Found OAuth success data, processing');\n          const parsedUserData = JSON.parse(userData);\n\n          // Validate the user data\n          if (parsedUserData && parsedUserData.id && parsedUserData.email) {\n            console.log('ğŸ” UserContext - checkAuthStatus - Setting authenticated user from OAuth');\n\n            // Enrich user with org roles if applicable\n            const enrichedUser = await enrichUserWithOrgRoles(parsedUserData);\n\n            setSelectedUserState(enrichedUser);\n            setIsAuthenticated(true);\n            setIsGuestMode(false);\n            setAuthMode('real');\n\n            // Clean up OAuth success flags since we've processed them\n            await AsyncStorage.multiRemove(['oauth_success_flag', 'google_auth_user', 'google_auth_token']);\n\n            console.log('ğŸ” UserContext - checkAuthStatus - OAuth authentication restored successfully');\n            return; // Exit early - user is authenticated\n          } else {\n            console.warn('ğŸ” UserContext - checkAuthStatus - Invalid OAuth user data found');\n          }\n        } catch (parseError) {\n          console.error('ğŸ” UserContext - checkAuthStatus - Error parsing OAuth user data:', parseError);\n        }\n      }\n\n      // Check for persistent user session\n      console.log('ğŸ” UserContext - checkAuthStatus - Checking for persistent session');\n      const persistedUser = await AsyncStorage.getItem('current_user');\n      const guestMode = await AsyncStorage.getItem('guest_mode');\n      const authModeStored = await AsyncStorage.getItem('auth_mode');\n\n      if (persistedUser) {\n        try {\n          const parsedUser = JSON.parse(persistedUser);\n          if (parsedUser && parsedUser.id) {\n            console.log('ğŸ” UserContext - checkAuthStatus - Found persisted user, validating token');\n\n            // Validate token before restoring session\n            // Only validate if not in guest mode\n            if (authModeStored !== 'guest') {\n              const { apiService } = await import('../utils/apiService');\n              \n              // Try to get a valid auth token (this will refresh if needed)\n              const authToken = await apiService.getAuthToken();\n              \n              if (!authToken) {\n                console.warn('ğŸ” UserContext - checkAuthStatus - No valid token found, clearing session');\n                // Token validation failed, clear session\n                await AsyncStorage.multiRemove([\n                  'current_user',\n                  'guest_mode',\n                  'auth_mode',\n                  'oauth_in_progress',\n                  'oauth_success_flag',\n                  'google_auth_user',\n                  'google_auth_token',\n                  'jwt_access_token',\n                  'jwt_token_expires_at',\n                  'jwt_refresh_token',\n                ]);\n                // Continue to unauthenticated state below\n              } else {\n                // Token is valid, proceed with session restoration\n                console.log('ğŸ” UserContext - checkAuthStatus - Token validated, restoring session');\n                const enrichedUser = await enrichUserWithOrgRoles(parsedUser);\n                setSelectedUserState(enrichedUser);\n                setIsAuthenticated(true);\n                setIsGuestMode(guestMode === 'true');\n                setAuthMode((authModeStored as AuthMode) || 'real');\n                console.log('ğŸ” UserContext - checkAuthStatus - Persisted session restored successfully');\n                return; // Exit early - user is authenticated\n              }\n            } else {\n              // Guest mode - no token validation needed\n              console.log('ğŸ” UserContext - checkAuthStatus - Guest mode, restoring session without token validation');\n              setSelectedUserState(parsedUser);\n              setIsAuthenticated(true);\n              setIsGuestMode(true);\n              setAuthMode('guest');\n              console.log('ğŸ” UserContext - checkAuthStatus - Guest session restored successfully');\n              return; // Exit early - guest user is authenticated\n            }\n          }\n        } catch (parseError) {\n          console.error('ğŸ” UserContext - checkAuthStatus - Error parsing persisted user:', parseError);\n        }\n      }\n\n      // No valid authentication found - clear any invalid data and set unauthenticated state\n      console.log('ğŸ” UserContext - checkAuthStatus - No valid authentication found, clearing data');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token',\n        'jwt_access_token',\n        'jwt_token_expires_at',\n        'jwt_refresh_token',\n      ]);\n\n      console.log('ğŸ” UserContext - checkAuthStatus - Setting unauthenticated state');\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n\n    } catch (error) {\n      console.error('ğŸ” UserContext - checkAuthStatus - Error:', error);\n      // On error, ensure clean unauthenticated state\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n    } finally {\n      console.log('ğŸ” UserContext - checkAuthStatus - Auth check completed');\n      setIsLoading(false);\n    }\n  };\n\n  // New simplified setter: sets current principal using role model\n  const setCurrentPrincipal = async (principal: { user: User | null; role: Role }) => {\n    try {\n      console.log('ğŸ” UserContext - setCurrentPrincipal:', { user: principal.user?.name || 'null', role: principal.role });\n      if (principal.role === 'guest' || !principal.user) {\n        setSelectedUserState(null);\n        setIsAuthenticated(true);\n        setIsGuestMode(true);\n        setAuthMode('guest');\n        return;\n      }\n      const enriched = await enrichUserWithOrgRoles(principal.user);\n      // Treat any non-guest role as real auth\n      try {\n        const { DatabaseService } = await import('../utils/databaseService');\n        await DatabaseService.clearLocalCollections();\n      } catch (e) {\n        console.log('âš ï¸ Failed to clear local collections on real auth (non-fatal):', e);\n      }\n      setSelectedUserState(enriched);\n      setIsAuthenticated(true);\n      setIsGuestMode(false);\n      setAuthMode('real');\n    } catch (error) {\n      console.error('Error in setCurrentPrincipal:', error);\n      // Fallbacks\n      if (principal.role === 'guest' || !principal.user) {\n        setSelectedUserState(null);\n        setIsAuthenticated(true);\n        setIsGuestMode(true);\n        setAuthMode('guest');\n      } else {\n        setSelectedUserState(principal.user);\n        setIsAuthenticated(true);\n        setIsGuestMode(false);\n        setAuthMode('real');\n      }\n    }\n  };\n\n  const setSelectedUserWithMode = async (user: User | null, mode: AuthMode) => {\n    try {\n      console.log('ğŸ” UserContext - setSelectedUserWithMode:', { user: user?.name || 'null', mode });\n      // Bridge to new API\n      const role = computeRole(user, mode);\n      await setCurrentPrincipal({ user, role });\n      console.log('ğŸ” UserContext - setSelectedUserWithMode - bridged to setCurrentPrincipal');\n    } catch (error) {\n      console.error('Error setting user:', error);\n      const role = computeRole(user, mode);\n      await setCurrentPrincipal({ user, role });\n    }\n  };\n\n  // Backward compatible API\n  const setSelectedUser = async (user: User | null) => setSelectedUserWithMode(user, user ? 'real' as const : 'guest');\n\n  /**\n   * Enriches a user object with organization roles if there is an approved org application\n   * keyed by the user's email (partition key in DB for org applications).\n   */\n  const enrichUserWithOrgRoles = async (user: User): Promise<User> => {\n    try {\n      const emailKey = (user.email || '').toLowerCase();\n      if (!emailKey) return user;\n\n      // Super admin email - hardcoded for main admin\n      const SUPER_ADMINS = ['navesarussi@gmail.com', 'karmacommunity2.0@gmail.com'];\n      const isSuperAdmin = SUPER_ADMINS.includes(emailKey);\n\n      // Grant admin role by env config (comma-separated emails)\n      const adminEmailsEnv = (process.env.EXPO_PUBLIC_ADMIN_EMAILS || '').toLowerCase();\n      const adminEmails = adminEmailsEnv\n        .split(',')\n        .map((s: string) => s.trim())\n        .filter(Boolean);\n      const withAdmin = adminEmails.includes(emailKey) || isSuperAdmin;\n\n      const applications = await db.listOrgApplications(emailKey);\n      const approved = (applications as any[]).find((a) => a.status === 'approved');\n\n      if (approved || withAdmin) {\n        // Super admin gets super_admin role, others get admin\n        const adminRole = isSuperAdmin ? 'super_admin' : 'admin';\n        const extraRoles = [\n          approved ? 'org_admin' : null,\n          withAdmin ? adminRole : null\n        ].filter(Boolean) as string[];\n        const roles = Array.isArray(user.roles)\n          ? Array.from(new Set([...user.roles, ...extraRoles]))\n          : extraRoles;\n        return { ...user, roles, orgApplicationId: approved?.id, orgName: approved?.orgName };\n      }\n      return user;\n    } catch (err) {\n      console.log('ğŸ” UserContext - enrichUserWithOrgRoles - skipped (no backend or no data)', err);\n      return user;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      console.log('ğŸ” UserContext - signOut - Starting sign out process');\n      setIsLoading(true);\n\n      // Sign out from Firebase Auth\n      try {\n        const { app } = getFirebase();\n        const auth = getAuth(app);\n        await auth.signOut();\n        console.log('ğŸ”¥ Firebase - User signed out successfully');\n      } catch (firebaseError) {\n        console.warn('ğŸ”¥ Firebase - Sign out error (non-fatal):', firebaseError);\n      }\n\n      console.log('ğŸ” UserContext - signOut - Removing all auth data from AsyncStorage');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'firebase_user_id',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token'\n      ]);\n\n      console.log('ğŸ” UserContext - signOut - Setting user state to null');\n      setSelectedUserState(null);\n\n      console.log('ğŸ” UserContext - signOut - Setting isAuthenticated to false');\n      setIsAuthenticated(false);\n\n      console.log('ğŸ” UserContext - signOut - Setting isGuestMode to false');\n      setIsGuestMode(false);\n\n      console.log('ğŸ” UserContext - signOut - Setting authMode to guest');\n      setAuthMode('guest');\n\n      console.log('ğŸ” UserContext - signOut - Sign out completed successfully');\n    } catch (error) {\n      console.error('ğŸ” UserContext - signOut - Error during sign out:', error);\n      setSelectedUserState(null);\n      setIsAuthenticated(false);\n      setIsGuestMode(false);\n      setAuthMode('guest');\n    } finally {\n      console.log('ğŸ” UserContext - signOut - Setting isLoading to false');\n      setIsLoading(false);\n    }\n  };\n\n  const setGuestMode = async () => {\n    try {\n      console.log('ğŸ” UserContext - setGuestMode - Starting (session only)');\n      setIsLoading(true);\n\n      // DO NOT SAVE TO AsyncStorage - session only\n      console.log('ğŸ” UserContext - setGuestMode - Setting guest mode for session only');\n\n      // Update state for current session only\n      setSelectedUserState(null);\n      setAuthMode('guest');\n      setIsGuestMode(true);\n      setIsAuthenticated(true);\n\n      console.log('ğŸ” UserContext - setGuestMode - Guest mode set successfully (session only)');\n    } catch (error) {\n      console.error('ğŸ” UserContext - setGuestMode - Error:', error);\n      setSelectedUserState(null);\n      setAuthMode('guest');\n      setIsGuestMode(true);\n      setIsAuthenticated(true);\n    } finally {\n      setIsLoading(false);\n      console.log('ğŸ” UserContext - setGuestMode - Completed');\n    }\n  };\n\n  const setDemoUser = async () => {\n    // Demo mode removed â€“ keep API for backward compatibility, but no-op\n    console.log('ğŸ” UserContext - setDemoUser called (no-op, demo removed)');\n  };\n\n  const resetHomeScreen = () => {\n    console.log('ğŸ  UserContext - resetHomeScreen called');\n    setResetHomeScreenTrigger(prev => prev + 1);\n  };\n\n  /**\n   * Checks if the current user has admin privileges\n   * Returns true if user has 'admin' or 'super_admin' role\n   */\n  const isAdmin = (): boolean => {\n    if (!selectedUser || !selectedUser.roles) return false;\n    const roles = Array.isArray(selectedUser.roles) ? selectedUser.roles : [];\n    return roles.includes('admin') || roles.includes('super_admin');\n  };\n\n  const value: UserContextType = {\n    selectedUser,\n    setSelectedUser,\n    setSelectedUserWithMode,\n    role: computeRole(selectedUser, authMode),\n    setCurrentPrincipal,\n    isUserSelected: selectedUser !== null,\n    isLoading,\n    signOut,\n    isAuthenticated,\n    isGuestMode,\n    isRealAuth: authMode === 'real',\n    isAdmin: isAdmin(),\n    setGuestMode,\n    setDemoUser,\n    resetHomeScreen,\n    resetHomeScreenTrigger,\n  };\n\n  return (\n    <UserContext.Provider value={value}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = (): UserContextType => {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUser must be used within a UserProvider');\n  }\n  return context;\n};\n\nexport type { User }; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/context/WebModeContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":39,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":47,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":71},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":47,"column":73,"nodeType":"BlockStatement","messageId":"unexpected","endLine":47,"endColumn":75,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1743,1743],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":55,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":74},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":55,"column":76,"nodeType":"BlockStatement","messageId":"unexpected","endLine":55,"endColumn":78,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[2032,2032],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// WebModeContext.tsx\n// Provides a simple global mode for Web: 'site' (marketing landing) vs 'app' (application UI)\n//\n// IMPORTANT BEHAVIOR:\n// - Default mode for web is 'site' - new users will see the landing page first\n// - Mode persisted in localStorage to remember user preference\n// - First-time web visitors always start with 'site' mode (landing page)\n// - Navigation automatically handled by MainNavigator based on current mode\n// - 'app' mode for mobile platforms by default (no site mode on native)\nimport React, { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { Platform } from 'react-native';\n\nexport type WebMode = 'site' | 'app';\n\ninterface WebModeContextValue {\n  mode: WebMode;\n  setMode: (next: WebMode) => void;\n  toggleMode: () => void;\n}\n\nconst DEFAULT_MODE: WebMode = Platform.OS === 'web' ? 'site' : 'app';\nconst STORAGE_KEY = 'kc_web_mode';\n\nconst WebModeContext = createContext<WebModeContextValue | undefined>(undefined);\n\nexport const WebModeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [mode, setModeState] = useState<WebMode>(DEFAULT_MODE);\n\n  // Initialize from localStorage on web\n  useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    try {\n      const stored = typeof window !== 'undefined' ? window.localStorage.getItem(STORAGE_KEY) : null;\n      if (stored === 'site' || stored === 'app') {\n        setModeState(stored);\n      } else {\n        setModeState('site');\n      }\n    } catch (_) {\n      setModeState('site');\n    }\n  }, []);\n\n  const setMode = useCallback((next: WebMode) => {\n    setModeState(next);\n    if (Platform.OS === 'web') {\n      try { window.localStorage.setItem(STORAGE_KEY, next); } catch (_) {}\n    }\n  }, []);\n\n  const toggleMode = useCallback(() => {\n    setModeState((prev) => (prev === 'site' ? 'app' : 'site'));\n    if (Platform.OS === 'web') {\n      const newMode = mode === 'site' ? 'app' : 'site';\n      try { window.localStorage.setItem(STORAGE_KEY, newMode); } catch (_) {}\n    }\n  }, [mode]);\n\n  const value = useMemo(() => ({ mode, setMode, toggleMode }), [mode, setMode, toggleMode]);\n\n  return (\n    <WebModeContext.Provider value={value}>{children}</WebModeContext.Provider>\n  );\n};\n\nexport function useWebMode(): WebModeContextValue {\n  const ctx = useContext(WebModeContext);\n  if (!ctx) throw new Error('useWebMode must be used within a WebModeProvider');\n  return ctx;\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/AnimalsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ArtScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/BooksScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/CategoryScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scaleSize' is defined but never used.","line":7,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"scaleSize"},"fix":{"range":[393,404],"text":""},"desc":"Remove unused variable \"scaleSize\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1915,1918],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1915,1918],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2618,2621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2618,2621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2891,2894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2891,2894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":151,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":151,"endColumn":33}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Linking, Alert } from 'react-native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport { biDiTextAlign, isLandscape, scaleSize } from '../globals/responsive';\nimport { useTranslation } from 'react-i18next';\nimport { donationResources } from '../utils/donationResources';\nimport ScrollContainer from '../components/ScrollContainer';\nimport AddLinkComponent from '../components/AddLinkComponent';\n\nexport interface CategoryConfig {\n  id: string;\n  title?: string;\n  subtitle?: string;\n  icon: string;\n  color: string;\n  bgColor: string;\n  description?: string;\n}\n\ninterface Props {\n  route?: { params?: { config?: CategoryConfig } };\n  config?: CategoryConfig;\n}\n\nconst CategoryScreen: React.FC<Props> = ({ route, config: propConfig }) => {\n  const { t } = useTranslation(['donations','common']);\n  const config: CategoryConfig = propConfig || route?.params?.config || {\n    id: 'generic',\n    icon: 'help-circle-outline',\n    color: colors.info,\n    bgColor: colors.infoLight,\n  };\n  const [mode, setMode] = useState(true);\n  const [linkHealth, setLinkHealth] = useState<Record<string, boolean>>({});\n\n  const title = config.title ?? t(`donations:categories.${config.id}.title`);\n  const subtitle = config.subtitle ?? t(`donations:categories.${config.id}.subtitle`);\n  const description = config.description ?? t(`donations:categories.${config.id}.description`);\n\n  const handleToggleMode = () => setMode((prev) => !prev);\n  const handleSelectMenuItem = (option: string) => {\n    console.log('Category menu selected:', option);\n  };\n\n  const handleSearch = (\n    query: string,\n    filters?: string[],\n    sorts?: string[],\n    results?: any[]\n  ) => {\n    console.log('Category search:', {\n      query,\n      filters: filters ?? [],\n      sorts: sorts ?? [],\n      results: results ?? [],\n    });\n  };\n\n  // Check links health in background\n  React.useEffect(() => {\n    const resources = donationResources[config.id] || [];\n    if (resources.length === 0) return;\n\n    let isCancelled = false;\n    const controller = new AbortController();\n\n    const checkUrl = async (url: string): Promise<boolean> => {\n      try {\n        const timeout = setTimeout(() => controller.abort(), 5000);\n        // Some servers block HEAD; try HEAD then GET fallback\n        const headResp = await fetch(url, { method: 'HEAD', signal: controller.signal } as any).catch(() => null);\n        if (headResp && (headResp.ok || (headResp.status >= 200 && headResp.status < 400))) {\n          clearTimeout(timeout);\n          return true;\n        }\n        const getResp = await fetch(url, { method: 'GET', signal: controller.signal } as any).catch(() => null);\n        clearTimeout(timeout);\n        return !!(getResp && (getResp.ok || (getResp.status >= 200 && getResp.status < 400)));\n      } catch {\n        return false;\n      }\n    };\n\n    (async () => {\n      const results: Record<string, boolean> = {};\n      for (const r of resources) {\n        const ok = await checkUrl(r.url);\n        results[r.url] = ok;\n        if (isCancelled) return;\n        setLinkHealth((prev) => ({ ...prev, [r.url]: ok }));\n      }\n    })();\n\n    return () => {\n      isCancelled = true;\n      controller.abort();\n    };\n  }, [config.id]);\n\n  return (\n    <View style={styles.container}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={[`${t('donations:share')} ${title}`, t('common:settings'), t('common:report')]}\n        onToggleMode={handleToggleMode}\n        onSelectMenuItem={handleSelectMenuItem}\n        placeholder={`${t('donations:searchWithin')} ${title}`}\n        filterOptions={[t('donations:filter.nearMe'), t('donations:filter.popular'), t('donations:filter.new')]}\n        sortOptions={[t('donations:sort.name'), t('donations:sort.date'), t('donations:sort.rating')]}\n        searchData={[]}\n        onSearch={handleSearch}\n      />\n\n      <ScrollContainer contentStyle={[\n        styles.content,\n        isLandscape() && { paddingHorizontal: LAYOUT_CONSTANTS.SPACING.XL },\n      ]} showsVerticalScrollIndicator={false}>\n        <View style={[styles.hero, { backgroundColor: config.bgColor, borderColor: config.color }]}>\n          <Text style={[styles.title, { color: colors.textPrimary }]}>{title}</Text>\n          {!!subtitle && (\n            <Text style={styles.subtitle}>{subtitle}</Text>\n          )}\n          {!!description && (\n            <Text style={styles.description}>{description}</Text>\n          )}\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('donations:section.content')}</Text>\n          <Text style={styles.sectionText}>\n            {t('donations:section.contentBody', { title })}\n          </Text>\n\n          {!!donationResources[config.id] && donationResources[config.id].length > 0 && (\n            <View style={styles.linksContainer}>\n              {donationResources[config.id].map((res) => {\n                const isHealthy = linkHealth[res.url];\n                return (\n                  <TouchableOpacity\n                    key={`${config.id}-${res.url}`}\n                    style={[styles.linkButton, !isHealthy === true ? styles.linkButtonDisabled : null, { borderColor: config.color }]}\n                    activeOpacity={0.8}\n                    onPress={async () => {\n                      try {\n                        const supported = await Linking.canOpenURL(res.url);\n                        if (supported) await Linking.openURL(res.url);\n                        else Alert.alert(t('common:error'), t('common:cannotOpenLink'));\n                      } catch (e) {\n                        Alert.alert(t('common:error'), t('common:cannotOpenLink'));\n                      }\n                    }}\n                  >\n                    <View style={styles.linkButtonHeader}>\n                      <Text style={styles.linkButtonTitle}>{res.name}</Text>\n                      <Text style={[styles.linkPill, { borderColor: config.color, color: config.color }]}>{t('common:web')}</Text>\n                    </View>\n                    {!!res.description && (\n                      <Text style={styles.linkButtonDesc}>{res.description}</Text>\n                    )}\n                    {isHealthy === false && (\n                      <Text style={styles.linkWarningText}>{t('common:cannotOpenLink')}</Text>\n                    )}\n                  </TouchableOpacity>\n                );\n              })}\n            </View>\n          )}\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>{t('donations:section.relatedStats')}</Text>\n          <DonationStatsFooter\n            stats={[\n              { label: t('donations:stats.newPosts'), value: 12, icon: 'megaphone-outline' },\n              { label: t('donations:stats.activeRequests'), value: 7, icon: 'help-circle-outline' },\n              { label: t('donations:stats.activePartners'), value: 5, icon: 'people-outline' },\n            ]}\n          />\n        </View>\n\n        {/* Add Links Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n          <AddLinkComponent category={config.id} />\n        </View>\n      </ScrollContainer>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  content: {\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingBottom: LAYOUT_CONSTANTS.SPACING.XL * 3 + LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  hero: {\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  title: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n    textAlign: biDiTextAlign('right'),\n  },\n  subtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: biDiTextAlign('right'),\n  },\n  description: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    lineHeight: Math.round(FontSizes.body * 1.4),\n    textAlign: biDiTextAlign('right'),\n  },\n  section: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'semibold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    textAlign: 'center',\n  },\n  sectionText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    lineHeight: Math.round(FontSizes.body * 1.3),\n    textAlign: biDiTextAlign('right'),\n  },\n  linksContainer: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  linkButton: {\n    backgroundColor: colors.background,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  linkButtonDisabled: {\n    opacity: 0.7,\n  },\n  linkButtonHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  linkButtonTitle: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  linkButtonDesc: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 2,\n  },\n  linkPill: {\n    borderWidth: 1,\n    borderRadius: 999,\n    paddingVertical: 2,\n    paddingHorizontal: 8,\n    fontSize: FontSizes.caption,\n  },\n  linkWarningText: {\n    marginTop: 6,\n    fontSize: FontSizes.caption,\n    color: colors.error,\n  },\n});\n\nexport default CategoryScreen;\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ClothesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/CommunityChallengesScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ParamListBase' is defined but never used.","line":18,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ParamListBase"},"fix":{"range":[457,472],"text":""},"desc":"Remove unused variable \"ParamListBase\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1661,1664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1661,1664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedFrequencyFilter' is assigned a value but never used.","line":84,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedDifficultyFilter' is assigned a value but never used.","line":85,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5176,5179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5176,5179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8999,9002],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8999,9002],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":274,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9286,9289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9286,9289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10283,10286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10283,10286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":335,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":335,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11687,11690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11687,11690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":393,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":393,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13904,13907],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13904,13907],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":471,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":471,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16839,16842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16839,16842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":494,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":494,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17697,17700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17697,17700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":519,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":519,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18644,18647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18644,18647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":584,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":584,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20868,20871],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20868,20871],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":586,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":586,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21018,21021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21018,21021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":588,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":588,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21171,21174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21171,21174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Community Challenges Screen\n// Main screen for community challenges - similar to ItemsScreen structure\n// Supports two modes: Search (browse challenges) and Offer (create new challenge)\nimport React, { useCallback, useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n  TextInput,\n  Image,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge, ChallengeType, ChallengeFrequency, ChallengeDifficulty } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\n\n// Default challenge images by difficulty\nconst DEFAULT_CHALLENGE_IMAGES = {\n  easy: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400',\n  medium: 'https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400',\n  hard: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400',\n  expert: 'https://images.unsplash.com/photo-1549060279-7e168fcee0c2?w=400',\n};\n\nexport interface CommunityChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\n// Filter options for challenges\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', label: '×›×Ÿ/×œ×', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', label: '××¡×¤×¨×™', icon: 'calculator-outline' },\n  { id: 'DURATION', label: '×–××Ÿ', icon: 'time-outline' },\n];\n\nconst CHALLENGE_FREQUENCY_OPTIONS = [\n  { id: 'DAILY', label: '×™×•××™', icon: 'calendar-outline' },\n  { id: 'WEEKLY', label: '×©×‘×•×¢×™', icon: 'calendar-number-outline' },\n  { id: 'FLEXIBLE', label: '×’××™×©', icon: 'infinite-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', label: '×§×œ', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', label: '×‘×™× ×•× ×™', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', label: '×§×©×”', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', label: '××•××—×”', icon: 'trophy-outline', color: colors.primary },\n];\n\nexport default function CommunityChallengesScreen({ navigation, route }: CommunityChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['donations', 'common', 'challenges']);\n  const { selectedUser: user } = useUser();\n  \n  const routeParams = route?.params as { mode?: string } | undefined;\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n  \n  // Mode: true = ××—×¤×© (search), false = ××¦×™×¢ (offer/create)\n  const [mode, setMode] = useState(initialMode);\n  \n  // State for challenges list\n  const [allChallenges, setAllChallenges] = useState<CommunityChallenge[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<CommunityChallenge[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  \n  // Search and filters\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTypeFilter, setSelectedTypeFilter] = useState<ChallengeType | ''>('');\n  const [selectedFrequencyFilter, setSelectedFrequencyFilter] = useState<ChallengeFrequency | ''>('');\n  const [selectedDifficultyFilter, setSelectedDifficultyFilter] = useState<ChallengeDifficulty | ''>('');\n  const [showMyCreatedOnly, setShowMyCreatedOnly] = useState(false);\n  \n  // Form state for creating challenge\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageUri, setImageUri] = useState('');\n  const [challengeType, setChallengeType] = useState<ChallengeType>('BOOLEAN');\n  const [frequency, setFrequency] = useState<ChallengeFrequency>('DAILY');\n  const [goalValue, setGoalValue] = useState('');\n  const [difficulty, setDifficulty] = useState<ChallengeDifficulty>('easy');\n  const [category, setCategory] = useState('');\n\n  // Update mode from route params\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      // Reset filters when coming back to the screen\n      setShowMyCreatedOnly(false);\n      \n      if (mode) {\n        loadChallenges();\n      }\n    }, [mode])\n  );\n\n  // Apply filters when search or filters change\n  useEffect(() => {\n    applyFilters();\n  }, [searchQuery, selectedTypeFilter, selectedFrequencyFilter, selectedDifficultyFilter, showMyCreatedOnly, allChallenges]);\n\n  const loadChallenges = async () => {\n    try {\n      setLoading(true);\n      const filters: any = {\n        is_active: true,\n        sort_by: 'created_at',\n        sort_order: 'DESC' as const,\n        limit: 100,\n      };\n      \n      const response = await db.getCommunityChallenges(filters);\n      \n      if (response.success && response.data) {\n        setAllChallenges(response.data);\n      } else {\n        setAllChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n      setAllChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const applyFilters = () => {\n    let filtered = [...allChallenges];\n\n    // My created filter\n    if (showMyCreatedOnly && user?.id) {\n      filtered = filtered.filter((c) => c.creator_id === user.id);\n    }\n\n    // Search filter\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (c) =>\n          c.title.toLowerCase().includes(query) ||\n          c.description?.toLowerCase().includes(query) ||\n          c.category?.toLowerCase().includes(query)\n      );\n    }\n\n    // Type filter\n    if (selectedTypeFilter) {\n      filtered = filtered.filter((c) => c.type === selectedTypeFilter);\n    }\n\n    // Frequency filter\n    if (selectedFrequencyFilter) {\n      filtered = filtered.filter((c) => c.frequency === selectedFrequencyFilter);\n    }\n\n    // Difficulty filter\n    if (selectedDifficultyFilter) {\n      filtered = filtered.filter((c) => c.difficulty === selectedDifficultyFilter);\n    }\n\n    setFilteredChallenges(filtered);\n  };\n\n  const pickImage = async () => {\n    try {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert(t('common:error'), t('challenges:imagePermissionRequired'));\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setImageUri(result.assets[0].uri);\n      }\n    } catch (error) {\n      console.error('Error picking image:', error);\n      Alert.alert(t('common:error'), t('challenges:imagePickError'));\n    }\n  };\n\n  const handleCreateChallenge = async () => {\n    try {\n      if (!title.trim()) {\n        Alert.alert(t('common:error'), t('challenges:fields.titleRequired'));\n        return;\n      }\n\n      if (!user?.id) {\n        Alert.alert(t('common:error'), t('challenges:messages.loginRequired'));\n        return;\n      }\n\n      setLoading(true);\n\n      const challengeData = {\n        creator_id: user.id,\n        title: title.trim(),\n        description: description.trim() || undefined,\n        image_url: imageUri || DEFAULT_CHALLENGE_IMAGES[difficulty] || undefined,\n        type: challengeType,\n        frequency,\n        goal_value: goalValue ? parseFloat(goalValue) : undefined,\n        difficulty,\n        category: category.trim() || undefined,\n      };\n\n      const response = await db.createCommunityChallenge(challengeData);\n\n      if (response.success) {\n        showToast(t('challenges:challengeCreated'), 'success');\n        \n        // Reset form\n        setTitle('');\n        setDescription('');\n        setImageUri('');\n        setChallengeType('BOOLEAN');\n        setFrequency('DAILY');\n        setGoalValue('');\n        setDifficulty('easy');\n        setCategory('');\n\n        // Switch to search mode and reload\n        setMode(true);\n        await loadChallenges();\n      } else {\n        showToast(t('challenges:messages.errorCreating'), 'error');\n      }\n    } catch (error: any) {\n      console.error('Error creating challenge:', error);\n      showToast(error.message || t('challenges:messages.errorCreating'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChallengePress = (challenge: CommunityChallenge) => {\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n    });\n  };\n\n  const renderChallengeCard = ({ item }: { item: CommunityChallenge }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((t) => t.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n    const imageUrl = item.image_url || DEFAULT_CHALLENGE_IMAGES[item.difficulty || 'easy'];\n\n    return (\n      <TouchableOpacity\n        style={styles.challengeCard}\n        onPress={() => handleChallengePress(item)}\n        activeOpacity={0.7}\n      >\n        {/* Challenge Image */}\n        {imageUrl && (\n          <Image\n            source={{ uri: imageUrl }}\n            style={styles.cardImage}\n            resizeMode=\"cover\"\n          />\n        )}\n\n        <View style={styles.cardContent}>\n          <View style={styles.cardHeader}>\n            <View style={styles.cardTitleRow}>\n              <Ionicons\n                name={typeOption?.icon as any || 'trophy-outline'}\n                size={24}\n                color={difficultyOption?.color || colors.primary}\n              />\n              <Text style={styles.cardTitle} numberOfLines={2}>\n                {item.title}\n              </Text>\n            </View>\n            {difficultyOption && (\n              <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n                <Text style={styles.difficultyText}>{difficultyOption.label}</Text>\n              </View>\n            )}\n          </View>\n\n          {item.description && (\n            <Text style={styles.cardDescription} numberOfLines={2}>\n              {item.description}\n            </Text>\n          )}\n\n        <View style={styles.cardMeta}>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"person-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{item.creator_name || '××©×ª××©'}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{t('challenges:stats.participantsCount', { count: item.participants_count })}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons\n              name={CHALLENGE_FREQUENCY_OPTIONS.find((f) => f.id === item.frequency)?.icon as any}\n              size={16}\n              color={colors.textSecondary}\n            />\n            <Text style={styles.metaText}>\n              {CHALLENGE_FREQUENCY_OPTIONS.find((f) => f.id === item.frequency)?.label}\n            </Text>\n          </View>\n        </View>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('challenges:messages.noChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>\n        {mode ? t('challenges:messages.noChallengesSubtitle') : t('challenges:createNewChallenge')}\n      </Text>\n    </View>\n  );\n\n  const renderSearchMode = () => (\n    <View style={styles.container}>\n      {/* My Created Filter Badge */}\n      {showMyCreatedOnly && (\n        <View style={styles.myCreatedBanner}>\n          <Text style={styles.myCreatedText}>\n            {t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')}\n          </Text>\n          <TouchableOpacity onPress={() => setShowMyCreatedOnly(false)}>\n            <Ionicons name=\"close-circle\" size={24} color={colors.white} />\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* Filters */}\n      <ScrollContainer horizontal style={styles.filtersContainer} showsHorizontalScrollIndicator={false}>\n        <TouchableOpacity\n          style={[styles.filterChip, !selectedTypeFilter && !showMyCreatedOnly && styles.filterChipActive]}\n          onPress={() => {\n            setSelectedTypeFilter('');\n            setShowMyCreatedOnly(false);\n          }}\n        >\n          <Text style={[styles.filterChipText, !selectedTypeFilter && !showMyCreatedOnly && styles.filterChipTextActive]}>\n            {t('challenges:filters.all')}\n          </Text>\n        </TouchableOpacity>\n        {CHALLENGE_TYPE_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.filterChip, selectedTypeFilter === option.id && styles.filterChipActive]}\n            onPress={() => setSelectedTypeFilter(option.id as ChallengeType)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={16}\n              color={selectedTypeFilter === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text\n              style={[\n                styles.filterChipText,\n                selectedTypeFilter === option.id && styles.filterChipTextActive,\n              ]}\n            >\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </ScrollContainer>\n\n      {/* Challenges List */}\n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n    </View>\n  );\n\n  const renderOfferMode = () => (\n    <ScrollContainer style={styles.formContainer}>\n      <Text style={styles.formTitle}>{t('challenges:createNewChallenge')}</Text>\n\n      {/* Title */}\n      <Text style={styles.label}>{t('challenges:fields.title')} *</Text>\n      <TextInput\n        style={styles.input}\n        placeholder={t('challenges:fields.titlePlaceholder')}\n        value={title}\n        onChangeText={setTitle}\n        maxLength={255}\n      />\n\n      {/* Description */}\n      <Text style={styles.label}>{t('challenges:fields.description')}</Text>\n      <TextInput\n        style={[styles.input, styles.textArea]}\n        placeholder={t('challenges:fields.descriptionPlaceholder')}\n        value={description}\n        onChangeText={setDescription}\n        multiline\n        numberOfLines={4}\n        maxLength={2000}\n      />\n\n      {/* Image */}\n      <Text style={styles.label}>{t('challenges:fields.image')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n      <TouchableOpacity style={styles.imagePickerButton} onPress={pickImage}>\n        {imageUri ? (\n          <Image source={{ uri: imageUri }} style={styles.challengeImage} resizeMode=\"cover\" />\n        ) : (\n          <View style={styles.imagePlaceholder}>\n            <Ionicons name=\"image-outline\" size={48} color={colors.textSecondary} />\n            <Text style={styles.imagePlaceholderText}>{t('challenges:addImage')}</Text>\n            <Text style={styles.imagePlaceholderSubtext}>{t('challenges:defaultImageInfo')}</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n\n      {/* Challenge Type */}\n      <Text style={styles.label}>{t('challenges:fields.type')} *</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_TYPE_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.optionButton, challengeType === option.id && styles.optionButtonActive]}\n            onPress={() => setChallengeType(option.id as ChallengeType)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={challengeType === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text\n              style={[styles.optionText, challengeType === option.id && styles.optionTextActive]}\n            >\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Frequency */}\n      <Text style={styles.label}>{t('challenges:fields.frequency')} *</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_FREQUENCY_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.optionButton, frequency === option.id && styles.optionButtonActive]}\n            onPress={() => setFrequency(option.id as ChallengeFrequency)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={frequency === option.id ? colors.white : colors.textSecondary}\n            />\n            <Text style={[styles.optionText, frequency === option.id && styles.optionTextActive]}>\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Difficulty */}\n      <Text style={styles.label}>{t('challenges:fields.difficulty')}</Text>\n      <View style={styles.optionsRow}>\n        {CHALLENGE_DIFFICULTY_OPTIONS.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[\n              styles.optionButton,\n              difficulty === option.id && styles.optionButtonActive,\n              difficulty === option.id && { backgroundColor: option.color },\n            ]}\n            onPress={() => setDifficulty(option.id as ChallengeDifficulty)}\n          >\n            <Ionicons\n              name={option.icon as any}\n              size={20}\n              color={difficulty === option.id ? colors.white : option.color}\n            />\n            <Text style={[styles.optionText, difficulty === option.id && styles.optionTextActive]}>\n              {option.label}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      {/* Goal Value (optional) */}\n      {challengeType !== 'BOOLEAN' && (\n        <>\n          <Text style={styles.label}>{t('challenges:fields.goalValue')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n          <TextInput\n            style={styles.input}\n            placeholder={challengeType === 'DURATION' ? t('challenges:fields.goalValueMinutes') : t('challenges:fields.goalValuePlaceholder')}\n            value={goalValue}\n            onChangeText={setGoalValue}\n            keyboardType=\"numeric\"\n          />\n        </>\n      )}\n\n      {/* Category (optional) */}\n      <Text style={styles.label}>{t('challenges:fields.category')} ({t('common:optional', '××•×¤×¦×™×•× ×œ×™')})</Text>\n      <TextInput\n        style={styles.input}\n        placeholder={t('challenges:fields.categoryPlaceholder')}\n        value={category}\n        onChangeText={setCategory}\n        maxLength={50}\n      />\n\n      {/* Create Button */}\n      <TouchableOpacity\n        style={[styles.createButton, loading && styles.createButtonDisabled]}\n        onPress={handleCreateChallenge}\n        disabled={loading}\n      >\n        {loading ? (\n          <ActivityIndicator color={colors.white} />\n        ) : (\n          <>\n            <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n            <Text style={styles.createButtonText}>{t('challenges:createButton')}</Text>\n          </>\n        )}\n      </TouchableOpacity>\n    </ScrollContainer>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('challenges:title')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n      {mode ? renderSearchMode() : renderOfferMode()}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  container: {\n    flex: 1,\n  },\n  filtersContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  filterChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    borderRadius: 20,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  filterChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  filterChipText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  filterChipTextActive: {\n    color: colors.white,\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n    overflow: 'hidden',\n  },\n  cardImage: {\n    width: '100%',\n    height: 120,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  cardContent: {\n    padding: 16,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  cardMeta: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  formContainer: {\n    padding: 16,\n  },\n  formTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    marginTop: 16,\n  },\n  input: {\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  optionsRow: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  optionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    borderRadius: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  optionButtonActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  optionText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  optionTextActive: {\n    color: colors.white,\n  },\n  createButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    marginTop: 32,\n    marginBottom: 24,\n  },\n  createButtonDisabled: {\n    opacity: 0.6,\n  },\n  createButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  myCreatedBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  myCreatedText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  imagePickerButton: {\n    marginBottom: 16,\n    borderRadius: 12,\n    overflow: 'hidden',\n    borderWidth: 2,\n    borderColor: colors.border,\n    borderStyle: 'dashed',\n  },\n  challengeImage: {\n    width: '100%',\n    height: 200,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  imagePlaceholder: {\n    width: '100%',\n    height: 200,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n  },\n  imagePlaceholderText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textSecondary,\n  },\n  imagePlaceholderSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textTertiary,\n    textAlign: 'center',\n    paddingHorizontal: 32,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/DreamsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/EducationScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/EnvironmentScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FertilityScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FoodScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/FurnitureScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/GamesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/GoldenAgeScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/HousingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/ItemsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ScrollView' is defined but never used.","line":2,"column":66,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":76,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ScrollView"},"fix":{"range":[145,157],"text":""},"desc":"Remove unused variable \"ScrollView\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRoute' is defined but never used.","line":3,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":65,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRoute"},"fix":{"range":[299,309],"text":""},"desc":"Remove unused variable \"useRoute\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3006,3009],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3006,3009],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":124,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5722,5725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5722,5725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5883,5886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5883,5886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'filteredItems' is assigned a value but never used.","line":162,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'recentMine' is assigned a value but never used.","line":163,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isRefreshing' is assigned a value but never used.","line":169,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":169,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dummyItems' is assigned a value but never used.","line":259,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":259,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":262,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10196,10199],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10196,10199],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":324,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":324,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12476,12479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12476,12479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13722,13725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13722,13725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":391,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":391,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15616,15619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15616,15619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":416,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":416,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16684,16687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16684,16687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16825,16828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16825,16828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardWidth' is assigned a value but never used.","line":595,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":595,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_results' is defined but never used.","line":599,"column":86,"nodeType":"Identifier","messageId":"unusedVar","endLine":599,"endColumn":94},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":599,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":599,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23627,23630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23627,23630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":667,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":667,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25621,25624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25621,25624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":709,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":709,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27044,27047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27044,27047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":767,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":767,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29067,29070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29067,29070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":806,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":806,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30247,30250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30247,30250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'renderItemCard' is assigned a value but never used.","line":897,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":897,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'renderRecentCard' is assigned a value but never used.","line":926,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":926,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1152,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1152,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43962,43965],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43962,43965],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1223,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1223,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[47127,47130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[47127,47130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1225,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1225,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[47246,47249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[47246,47249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1231,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1231,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[47483,47486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[47483,47486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { View, Text, StyleSheet, SafeAreaView, TouchableOpacity, ScrollView, TextInput, Alert, Image, Modal, FlatList, Dimensions, Platform } from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { biDiTextAlign, rowDirection, isLandscape, marginStartEnd, getScreenInfo, BREAKPOINTS, isMobileWeb } from '../globals/responsive';\nimport { getCategoryLabel } from '../utils/itemCategoryUtils';\nimport { useToast } from '../utils/toastService';\nimport VerticalGridSlider from '../components/VerticalGridSlider';\nimport { postsService } from '../utils/postsService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { FeedItem } from '../types/feed';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\nimport { useTranslation } from 'react-i18next';\n\ntype ItemType = 'furniture' | 'clothes' | 'general' | 'books' | 'dry_food' | 'games' | 'electronics' | 'toys' | 'sports' | 'art' | 'kitchen' | 'bathroom' | 'garden' | 'tools' | 'baby' | 'pet' | 'other';\n\n// ×¨×©×™××ª ×§×˜×’×•×¨×™×•×ª ×œ×¤×¨×¡×•× ×¤×¨×™×˜×™×\nconst ITEM_CATEGORIES = [\n  { id: 'clothes', label: '×‘×’×“×™×', icon: 'shirt-outline' },\n  { id: 'books', label: '×¡×¤×¨×™×', icon: 'library-outline' },\n  { id: 'furniture', label: '×¨×”×™×˜×™×', icon: 'bed-outline' },\n  { id: 'dry_food', label: '××•×›×œ ×™×‘×©', icon: 'restaurant-outline' },\n  { id: 'games', label: '××©×—×§×™×', icon: 'game-controller-outline' },\n  { id: 'electronics', label: '×—×©××œ ×•××œ×§×˜×¨×•× ×™×§×”', icon: 'phone-portrait-outline' },\n  { id: 'toys', label: '×¦×¢×¦×•×¢×™×', icon: 'happy-outline' },\n  { id: 'sports', label: '×¡×¤×•×¨×˜', icon: 'football-outline' },\n  { id: 'art', label: '××× ×•×ª', icon: 'color-palette-outline' },\n  { id: 'kitchen', label: '××˜×‘×—', icon: 'cafe-outline' },\n  { id: 'bathroom', label: '×××‘×˜×™×”', icon: 'water-outline' },\n  { id: 'garden', label: '×’×™× ×”', icon: 'leaf-outline' },\n  { id: 'tools', label: '×›×œ×™×', icon: 'construct-outline' },\n  { id: 'baby', label: '×ª×™× ×•×§×•×ª', icon: 'baby-outline' },\n  { id: 'pet', label: '×—×™×•×ª ××—××“', icon: 'paw-outline' },\n  { id: 'other', label: '××—×¨', icon: 'cube-outline' },\n] as const;\n\nexport interface ItemsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n  route?: any;\n}\n\ninterface DonationItem {\n  id: string;\n  ownerId: string;\n  title: string;\n  description?: string;\n  category: ItemType;\n  condition?: 'new' | 'like_new' | 'used' | 'for_parts';\n\n  // Location fields - separate\n  city?: string;\n  address?: string;\n  coordinates?: string;\n\n  price?: number; // 0 means free\n  image_base64?: string; // base64 encoded image\n  rating?: number;\n  timestamp: string;\n  tags?: string; // comma-separated string\n  qty?: number;\n  delivery_method?: string;\n  status?: string;\n  isDeleted?: boolean;\n  deletedAt?: string;\n}\n\nconst itemsFilterOptionsBase = [\n  '×‘×—×™× ×',\n  '×›××• ×—×“×©',\n  '××©×•××©',\n  '×œ×—×œ×¤×™×',\n  '×¢× ××™×¡×•×£ ×¢×¦××™',\n  '××©×œ×•×— ×‘×ª×©×œ×•×',\n  '× ×’×™×©×•×ª',\n];\n\nconst itemsSortOptions = [\n  '××œ×¤×‘×™×ª×™',\n  '×œ×¤×™ ××™×§×•×',\n  '×œ×¤×™ ×ª××¨×™×š',\n  '×œ×¤×™ ×“×™×¨×•×’',\n  '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª',\n];\n\nexport default function ItemsScreen({ navigation, route }: ItemsScreenProps) {\n  const { ToastComponent } = useToast();\n  const { t } = useTranslation(['donations', 'common', 'items']);\n  const itemType: ItemType = (route?.params?.itemType as ItemType) || 'general';\n  const routeParams = route?.params as { mode?: string } | undefined;\n\n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: false = ××¦×™×¢, true = ××—×¤×©\n  // URL mode: 'offer' = false, 'search' = true\n  // Default is search mode (true)\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n  const [mode, setMode] = useState(initialMode);\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'search' : 'offer';\n    const currentMode = routeParams?.mode;\n\n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n\n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n  const [allItems, setAllItems] = useState<DonationItem[]>([]);\n  const [filteredItems, setFilteredItems] = useState<DonationItem[]>([]);\n  const [recentMine, setRecentMine] = useState<DonationItem[]>([]);\n  // Posts state for search mode\n  const [allPosts, setAllPosts] = useState<FeedItem[]>([]);\n  const [filteredPosts, setFilteredPosts] = useState<FeedItem[]>([]);\n  // Posts state for offer mode history\n  const [recentPosts, setRecentPosts] = useState<FeedItem[]>([]);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const titleInputRef = useRef<TextInput | null>(null);\n  const loadItemsRef = useRef<(() => Promise<void>) | undefined>(undefined);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageUri, setImageUri] = useState<string>('');\n  const [price, setPrice] = useState('0');\n  const [city, setCity] = useState('');\n  const [address, setAddress] = useState('');\n  const [qty, setQty] = useState<number>(1);\n  const [condition, setCondition] = useState<'new' | 'like_new' | 'used' | 'for_parts' | ''>('');\n  const [selectedCategory, setSelectedCategory] = useState<ItemType>('general');\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false);\n  const { selectedUser } = useUser();\n  const [selectedItem, setSelectedItem] = useState<DonationItem | null>(null);\n  const [showItemModal, setShowItemModal] = useState(false);\n\n  useFocusEffect(\n    useCallback(() => {\n      setTitle('');\n      setDescription('');\n      setPrice('0');\n      setCity('');\n      setAddress('');\n      setQty(1);\n      setCondition('');\n      setImageUri('');\n      setSelectedCategory('general');\n    }, [])\n  );\n\n  // Convert image URI to base64 with compression\n  const convertImageToBase64 = async (uri: string): Promise<string | null> => {\n    try {\n      console.log('ğŸ–¼ï¸ Converting and compressing image...');\n\n      // Fetch the image\n      const response = await fetch(uri);\n      const blob = await response.blob();\n\n      // Create canvas to compress the image\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const base64 = reader.result as string;\n\n          // Check size and compress if needed\n          const sizeInMB = (base64.length * 0.75) / (1024 * 1024); // Approximate size\n          console.log(`ğŸ“ Image size: ${sizeInMB.toFixed(2)} MB`);\n\n          if (sizeInMB > 5) {\n            console.warn('âš ï¸ Image too large, it may fail to upload. Consider using a smaller image.');\n            Alert.alert(\n              '×ª××•× ×” ×’×“×•×œ×”',\n              '×”×ª××•× ×” ×©×‘×—×¨×ª ×’×“×•×œ×” ×××•×“. ××•××œ×¥ ×œ×”×©×ª××© ×‘×ª××•× ×” ×§×˜× ×” ×™×•×ª×¨.',\n              [\n                { text: '×”××©×š ×‘×›×œ ×–××ª', onPress: () => resolve(base64) },\n                { text: '×‘×˜×œ', onPress: () => resolve(null), style: 'cancel' }\n              ]\n            );\n          } else {\n            console.log('âœ… Image converted to base64');\n            resolve(base64);\n          }\n        };\n        reader.onerror = (error) => {\n          console.error('âŒ Error converting image:', error);\n          reject(error);\n        };\n        reader.readAsDataURL(blob);\n      });\n    } catch (error) {\n      console.error('âŒ Error in convertImageToBase64:', error);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×”××™×¨ ××ª ×”×ª××•× ×”');\n      return null;\n    }\n  };\n\n  const filterOptions = useMemo(() => {\n    // ×›×œ ×”×§×˜×’×•×¨×™×•×ª ×”××¤×©×¨×™×•×ª ×œ×¤×¨×™×˜×™×\n    const allCategories = ITEM_CATEGORIES.map(cat => cat.label);\n\n    const typeSpecific = itemType === 'furniture' ? ['×¡×¤×•×ª', '××¨×•× ×•×ª', '××™×˜×•×ª']\n      : itemType === 'clothes' ? ['×’×‘×¨×™×', '× ×©×™×', '×™×œ×“×™×']\n        : ['××˜×‘×—', '×—×©××œ', '×¦×¢×¦×•×¢×™×'];\n\n    // ××—×–×™×¨: ×§×˜×’×•×¨×™×•×ª ×›×œ×œ×™×•×ª + ×¤×™×œ×˜×¨×™× ×¡×¤×¦×™×¤×™×™× ×œ×¡×•×’ + ×¤×™×œ×˜×¨×™× ×‘×¡×™×¡×™×™×\n    return [...allCategories, ...typeSpecific, ...itemsFilterOptionsBase];\n  }, [itemType]);\n\n  const dummyItems: DonationItem[] = useMemo(() => [], []);\n\n  // Helper to map API post to FeedItem (same as useFeedData.mapPostToItem)\n  const mapPostToFeedItem = (post: any): FeedItem | null => {\n    // ×”×’× ×” ××¤× ×™ post null/undefined\n    if (!post || !post.id) {\n      console.warn('âš ï¸ mapPostToFeedItem: post is null or missing id', post);\n      return null;\n    }\n\n    // Extract item data if available\n    const itemData = post.item_data || {};\n    let metadata = {};\n    try {\n      metadata = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : (post.metadata || {});\n    } catch (e) {\n      console.warn('âš ï¸ Failed to parse metadata:', e);\n    }\n\n    // Ensure user is always defined (same format as useFeedData)\n    // ×‘×“×™×§×” ××¤×•×¨×˜×ª ×™×•×ª×¨\n    let author = null;\n    if (post.author) {\n      author = post.author;\n    } else if (post.author_id) {\n      // ×× ××™×Ÿ author object, × ×™×¦×•×¨ ××—×“ ×‘×¡×™×¡×™\n      author = { id: post.author_id, name: null, avatar_url: null };\n    }\n\n    const userId = author?.id || post.author_id || 'unknown';\n    const userName = author?.name || 'common.unknownUser';\n    const userAvatar = author?.avatar_url || undefined;\n\n    // ×•×™×“×•× ×©×”-user ×ª××™×“ ××•×’×“×¨\n    if (!userId || userId === 'unknown') {\n      console.warn('âš ï¸ mapPostToFeedItem: post without valid user', { postId: post.id, author, author_id: post.author_id });\n    }\n\n    // Get status from item_data or ride_data\n    let itemStatus: string | undefined;\n    if (post.item_data) {\n      itemStatus = post.item_data.status;\n    } else if (post.ride_data) {\n      itemStatus = post.ride_data.status;\n    }\n\n    return {\n      id: post.id,\n      type: post.post_type || 'post',\n      subtype: post.post_type, // Same as useFeedData - e.g. 'item', 'donation', 'ride'\n      title: post.title || 'post.noTitle', // Same as useFeedData\n      description: post.description || '',\n      thumbnail: post.images && post.images.length > 0 ? post.images[0] : null, // Same as useFeedData\n      user: {\n        id: userId,\n        name: userName,\n        avatar: userAvatar,\n      },\n      likes: parseInt(post.likes || '0'),\n      comments: parseInt(post.comments || '0'),\n      isLiked: post.is_liked || false,\n      timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n        ? new Date(post.created_at).toISOString()\n        : new Date().toISOString(),\n      // Item-specific fields\n      category: itemData?.category || (metadata as any)?.category,\n      // Add status for items and donations\n      status: itemStatus,\n      // Add IDs for updating posts\n      // IMPORTANT: For items, ALWAYS prefer item_data.id (from JOIN) - this is the most reliable source\n      // item_id column might be a timestamp if post was created incorrectly\n      itemId: post.item_data?.id || (post.item_id && !/^\\d{10,13}$/.test(post.item_id) ? post.item_id : undefined),\n      rideId: post.ride_id || post.ride_data?.id,\n      taskId: post.task_id || post.task?.id,\n    };\n  };\n\n  // ×¤×•× ×§×¦×™×” × ×¤×¨×“×ª ×œ×˜×¢×™× ×ª ×¤×¨×™×˜×™×/×¤×•×¡×˜×™× ×©× ×•×›×œ ×œ×§×¨×•× ×œ×” ×’× ××—×¨×™ ×©××™×¨×”\n  const loadItems = async () => {\n    try {\n      console.log('ğŸ“¥ ×˜×•×¢×Ÿ ×¤×¨×™×˜×™×/×¤×•×¡×˜×™× ××”×©×¨×ª...', { mode, itemType });\n      const uid = selectedUser?.id || 'guest';\n\n      if (mode) {\n        // ××¦×‘ \"××—×¤×©\" - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n        console.log('ğŸ” ××¦×‘ ××—×¤×© - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™×');\n        try {\n          // ×˜×•×¢×Ÿ ××ª ×›×œ ×”×¤×•×¡×˜×™× ×•××– ××¡× ×Ÿ ×œ×¤×™ post_type\n          const postsResponse = await postsService.getPosts(200, 0, uid);\n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n            const itemPosts = postsResponse.data.filter((post: any) => \n              post.post_type === 'item' || post.post_type === 'donation' || post.item_id\n            );\n            \n            console.log('ğŸ“Š ×¡×”\"×› ×¤×•×¡×˜×™×:', postsResponse.data.length, '×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™×:', itemPosts.length);\n            \n            // ×××¤×” ××ª ×”×¤×•×¡×˜×™× ×¢× ×”×’× ×” ××¤× ×™ user undefined\n            const mappedPosts = itemPosts\n              .map(mapPostToFeedItem)\n              .filter((post: FeedItem | null): post is FeedItem => \n                post !== null && post !== undefined && !!post.user && !!post.user.id && !!post.user.name\n              ); // ××¡× ×Ÿ ×¤×•×¡×˜×™× ×œ×œ× user ×ª×§×™×Ÿ\n            \n            setAllPosts(mappedPosts);\n            setFilteredPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n            \n            if (mappedPosts.length === 0 && itemPosts.length > 0) {\n              console.warn('âš ï¸ ×™×© ×¤×•×¡×˜×™× ××‘×œ ×”× ×œ× × ××¤×• × ×›×•×Ÿ. ×“×•×’××”:', itemPosts[0]);\n            }\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× × ×›×©×œ×”:', postsResponse.error);\n            setAllPosts([]);\n            setFilteredPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™×:', error);\n          setAllPosts([]);\n          setFilteredPosts([]);\n        }\n        return; // Don't load items in search mode\n      } else {\n        // ××¦×‘ \"××¦×™×¢\" - ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”\n        console.log('ğŸ”µ ××¦×‘ ××¦×™×¢ - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”:', uid);\n        try {\n          // ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××©\n          const { apiService } = await import('../utils/apiService');\n          const postsResponse = await apiService.getUserPosts(uid, 50, uid);\n          \n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×¤×¨×™×˜×™× (item ××• donation)\n            const itemPosts = postsResponse.data.filter((post: any) => \n              post.post_type === 'item' || post.post_type === 'donation' || post.item_id\n            );\n            \n            // ×××¤×” ××ª ×”×¤×•×¡×˜×™×\n            const mappedPosts = itemPosts\n              .map(mapPostToFeedItem)\n              .filter((post: FeedItem | null): post is FeedItem => \n                post !== null && post !== undefined && !!post.user && !!post.user.id && !!post.user.name\n              );\n            \n            setRecentPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” × ×›×©×œ×”:', postsResponse.error);\n            setRecentPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×”:', error);\n          setRecentPosts([]);\n        }\n\n        // ×¢×“×™×™×Ÿ ×˜×•×¢×Ÿ ×¤×¨×™×˜×™× ×œ×¦×•×¨×š ×™×¦×™×¨×”/×¢×¨×™×›×” (×× ×¦×¨×™×š)\n        const serverItems = await db.getDedicatedItemsByOwner(uid);\n        const displayItems: DonationItem[] = (serverItems || [])\n          .filter((item: any) => {\n            const isDeleted = item.is_deleted || item.isDeleted;\n            return !isDeleted;\n          })\n          .map((item: any) => ({\n            id: item.id,\n            ownerId: item.owner_id || item.ownerId,\n            title: item.title,\n            description: item.description,\n            category: item.category,\n            condition: item.condition,\n            city: item.city || (item.location && typeof item.location === 'object' ? item.location.city : null),\n            address: item.address || (item.location && typeof item.location === 'object' ? item.location.address : null),\n            coordinates: item.coordinates || (item.location && typeof item.location === 'object' ? item.location.coordinates : null),\n            price: item.price,\n            image_base64: item.image_base64,\n            rating: item.rating,\n            timestamp: item.created_at || item.timestamp,\n            tags: item.tags,\n            qty: item.quantity || item.qty,\n            delivery_method: item.delivery_method,\n            status: item.status,\n            isDeleted: item.is_deleted || item.isDeleted,\n            deletedAt: item.deleted_at || item.deletedAt,\n          }));\n\n        const forType = displayItems.filter(i => itemType === 'general' ? true : i.category === itemType);\n        setAllItems(forType);\n        setRecentMine(forType);\n      }\n\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×™×˜×™×:', error);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×˜×¢×•×Ÿ ××ª ×”×¤×¨×™×˜×™×');\n      setAllItems([]);\n      setRecentMine([]);\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  // Store loadItems in ref so it can be used in callbacks without dependency issues\n  useEffect(() => {\n    loadItemsRef.current = loadItems;\n  });\n\n  useEffect(() => {\n    loadItems();\n  }, [selectedUser, itemType, mode]);\n\n  const getFilteredItems = useCallback(() => {\n    // In search mode, filter posts instead of items\n    if (mode) {\n      let filtered = [...allPosts];\n      if (searchQuery) {\n        const q = searchQuery.toLowerCase();\n        filtered = filtered.filter(p =>\n          p.title.toLowerCase().includes(q) ||\n          (p.description || '').toLowerCase().includes(q) ||\n          (p.user?.name || '').toLowerCase().includes(q)\n        );\n      }\n\n      // Apply filters (category, etc.)\n      if (selectedFilters.length > 0) {\n        selectedFilters.forEach(f => {\n          // Filter by category\n          const matchingCategory = ITEM_CATEGORIES.find(cat => cat.label === f);\n          if (matchingCategory) {\n            filtered = filtered.filter(post => post.category === matchingCategory.id);\n          }\n        });\n      }\n\n      // Sorting\n      const selectedSort = selectedSorts[0];\n      switch (selectedSort) {\n        case '××œ×¤×‘×™×ª×™':\n          filtered.sort((a, b) => a.title.localeCompare(b.title, 'he'));\n          break;\n        case '×œ×¤×™ ×ª××¨×™×š':\n          filtered.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n          break;\n        case '×œ×¤×™ ×“×™×¨×•×’':\n          filtered.sort((a, b) => (b.likes || 0) - (a.likes || 0));\n          break;\n        case '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª':\n          filtered.sort((a, b) => (b.likes || 0) - (a.likes || 0));\n          break;\n      }\n\n      return filtered;\n    }\n\n    // In offer mode, filter items as before\n    let filtered = [...allItems];\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(i =>\n        i.title.toLowerCase().includes(q) ||\n        (i.city || '').toLowerCase().includes(q) ||\n        (i.address || '').toLowerCase().includes(q) ||\n        (i.description || '').toLowerCase().includes(q) ||\n        (i.tags || '').toLowerCase().includes(q)\n      );\n    }\n\n    if (selectedFilters.length > 0) {\n      selectedFilters.forEach(f => {\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ××—×™×¨\n        if (f === '×‘×—×™× ×') filtered = filtered.filter(i => (i.price ?? 0) === 0);\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ××¦×‘\n        if (f === '×›××• ×—×“×©') filtered = filtered.filter(i => i.condition === 'like_new' || i.condition === 'new');\n        if (f === '××©×•××©') filtered = filtered.filter(i => i.condition === 'used');\n        if (f === '×œ×—×œ×¤×™×') filtered = filtered.filter(i => i.condition === 'for_parts');\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ×§×˜×’×•×¨×™×” - ×‘×•×“×§ ×× ×”×¤×™×œ×˜×¨ ×ª×•×× ×œ××—×ª ×”×§×˜×’×•×¨×™×•×ª\n        const matchingCategory = ITEM_CATEGORIES.find(cat => cat.label === f);\n        if (matchingCategory) {\n          filtered = filtered.filter(item => item.category === matchingCategory.id);\n        }\n\n        // ×¡×™× ×•×Ÿ ×œ×¤×™ ×ª×’×™×•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ×¡×•×’\n        if (['×¡×¤×•×ª', '××¨×•× ×•×ª', '××™×˜×•×ª', '×’×‘×¨×™×', '× ×©×™×', '×™×œ×“×™×', '××˜×‘×—', '×—×©××œ', '×¦×¢×¦×•×¢×™×'].includes(f)) {\n          filtered = filtered.filter(item => {\n            const tagsArray = typeof item.tags === 'string' ? item.tags.split(',') : (item.tags || []);\n            return tagsArray.includes(f);\n          });\n        }\n      });\n    }\n\n    const selectedSort = selectedSorts[0];\n    switch (selectedSort) {\n      case '××œ×¤×‘×™×ª×™':\n        filtered.sort((a, b) => a.title.localeCompare(b.title, 'he'));\n        break;\n      case '×œ×¤×™ ××™×§×•×':\n        filtered.sort((a, b) => (a.city || '').localeCompare((b.city || ''), 'he'));\n        break;\n      case '×œ×¤×™ ×ª××¨×™×š':\n        filtered.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n        break;\n      case '×œ×¤×™ ×“×™×¨×•×’':\n        filtered.sort((a, b) => (b.rating ?? 0) - (a.rating ?? 0));\n        break;\n      case '×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª':\n        filtered.sort((a, b) => (b.rating ?? 0) - (a.rating ?? 0));\n        break;\n    }\n\n    return filtered;\n  }, [allItems, searchQuery, selectedFilters, selectedSorts]);\n\n  // Update filtered items/posts whenever search/filter/sort changes\n  useEffect(() => {\n    if (mode) {\n      setFilteredPosts(getFilteredItems() as FeedItem[]);\n    } else {\n      setFilteredItems(getFilteredItems() as DonationItem[]);\n    }\n  }, [getFilteredItems, mode]);\n\n  // Calculate grid layout for search mode\n  const { width } = Dimensions.get('window');\n  const { isTablet, isDesktop } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobile = isMobileWeb();\n\n  // Initialize with appropriate default, but allow user control via slider\n  const [numColumns, setNumColumns] = useState(() => (isTablet || isDesktop || isDesktopWeb) ? 3 : 2);\n\n  // Use same padding values as PostsReelsScreen for consistency\n  const HORIZONTAL_PADDING = isMobile ? 8 : 16;\n  const COLUMN_GAP = isMobile ? 8 : 16;\n  const screenPadding = HORIZONTAL_PADDING;\n  const cardGap = COLUMN_GAP;\n  // Calculate card width: full width minus padding on both sides, minus gaps between columns\n  const cardWidth = numColumns === 1 \n    ? width - (screenPadding * 2) \n    : (width - (screenPadding * 2) - (cardGap * (numColumns - 1))) / numColumns;\n\n  const handleSearch = (query: string, filters: string[] = [], sorts: string[] = [], _results?: any[]) => {\n    setSearchQuery(query);\n    setSelectedFilters(filters);\n    setSelectedSorts(sorts);\n  };\n\n  const handleClearAll = () => {\n    setSearchQuery('');\n    setSelectedFilters([]);\n    setSelectedSorts([]);\n  };\n\n  const pickImage = async () => {\n    try {\n      // ×‘×§×©×ª ×”×¨×©××”\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('××™×Ÿ ×”×¨×©××”', '× ×“×¨×©×ª ×”×¨×©××” ×œ×’×©×ª ×œ×’×œ×¨×™×”');\n        return;\n      }\n\n      // ×¤×ª×™×—×ª ×”×’×œ×¨×™×”\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        setImageUri(result.assets[0].uri);\n        console.log('âœ… ×ª××•× ×” × ×‘×—×¨×”:', result.assets[0].uri);\n      }\n    } catch (e) {\n      console.error('âŒ ×©×’×™××” ×‘×‘×—×™×¨×ª ×ª××•× ×”:', e);\n      Alert.alert('×©×’×™××”', '×œ× ×”×¦×œ×—× ×• ×œ×˜×¢×•×Ÿ ××ª ×”×ª××•× ×”');\n    }\n  };\n\n  const handleDeleteItem = async (item: DonationItem) => {\n    console.warn('ğŸ—‘ï¸ ××—×™×§×ª ×¤×¨×™×˜ - Soft Delete', { itemId: item.id, title: item.title });\n\n    Alert.alert(\n      'ğŸ—‘ï¸ ××—×™×§×ª ×¤×¨×™×˜',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª:\\n\"${item.title}\"?`,\n      [\n        {\n          text: '×‘×™×˜×•×œ',\n          style: 'cancel'\n        },\n        {\n          text: '××—×§',\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              console.log('ğŸ—‘ï¸ ××•×—×§ ×¤×¨×™×˜:', item.id);\n\n              // Soft Delete ×“×¨×š ×”-API ×”×—×“×©\n              await db.deleteDedicatedItem(item.id);\n\n              console.log('âœ… ×¤×¨×™×˜ × ××—×§ ×‘×©×¨×ª');\n\n              // ×”×¡×¨×” ××”-UI\n              setAllItems(prev => prev.filter(i => i.id !== item.id));\n              setFilteredItems(prev => prev.filter(i => i.id !== item.id));\n              setRecentMine(prev => prev.filter(i => i.id !== item.id));\n\n              Alert.alert('âœ… ×”×¦×œ×—×”', '×”×¤×¨×™×˜ × ××—×§!');\n            } catch (error: any) {\n              console.error('âŒ ×©×’×™××” ×‘××—×™×§×”:', error);\n              Alert.alert('×©×’×™××”', `×œ× ×”×¦×œ×—× ×• ×œ××—×•×§ ××ª ×”×¤×¨×™×˜:\\n${error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”'}`);\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleCreateItem = async () => {\n    try {\n      if (!title.trim()) {\n        Alert.alert('×©×’×™××”', '× × ×œ××œ× ×›×•×ª×¨×ª');\n        titleInputRef.current?.focus();\n        return;\n      }\n\n      console.log('ğŸ”µ ××ª×—×™×œ ×ª×”×œ×™×š ×©××™×¨×ª ×¤×¨×™×˜...');\n\n      // Ensure we have a valid UUID - guests cannot create items\n      if (!selectedUser?.id) {\n        Alert.alert('×©×’×™××”', '× × ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×™×¦×•×¨ ×¤×¨×™×˜');\n        return;\n      }\n      const uid = selectedUser.id; // This is already a UUID from the server\n      // Note: We don't send 'id' to the server - the backend will generate it\n      // This is similar to how rides work - the backend creates the ID\n\n      // ×”××¨×ª ×ª××•× ×” ×œ-base64\n      let imageBase64 = null;\n      if (imageUri) {\n        console.log('ğŸ–¼ï¸ ×××™×¨ ×ª××•× ×” ×œ-base64...');\n        imageBase64 = await convertImageToBase64(imageUri);\n        if (imageBase64) {\n          console.log('âœ… ×”×ª××•× ×” ×”×•××¨×” ×‘×”×¦×œ×—×” (×’×•×“×œ:', imageBase64.length, '×ª×•×•×™×)');\n        }\n      }\n\n      // ×”×›× ×ª ××•×‘×™×™×§×˜ ×¢× ×›×œ ×”×©×“×•×ª ×”× ×¤×¨×“×™×\n      // Note: We don't include 'id' - the backend will generate it\n      // For optional fields, send undefined instead of empty string to avoid validation issues\n      const itemData: any = {\n        owner_id: uid,\n        title: title.trim(),\n        category: selectedCategory || itemType,\n      };\n\n      // Add optional fields only if they have values\n      if (description.trim()) {\n        itemData.description = description.trim();\n      }\n      if (condition) {\n        itemData.condition = condition;\n      }\n      if (city.trim()) {\n        itemData.city = city.trim();\n      }\n      if (address.trim()) {\n        itemData.address = address.trim();\n      }\n      // Note: coordinates is not currently supported in the UI\n      // If needed in the future, add a coordinates state variable and input field\n      if (price && Number(price) > 0) {\n        itemData.price = Number(price);\n      }\n      if (imageBase64) {\n        itemData.image_base64 = imageBase64;\n      }\n      if (selectedFilters.length > 0) {\n        itemData.tags = selectedFilters.join(',');\n      }\n      if (qty && qty > 1) {\n        itemData.quantity = qty;\n      }\n      // Note: delivery_method and status are optional\n      // Backend will use defaults: 'pickup' for delivery_method and 'available' for status\n      // If you want to customize these, add state variables and UI inputs for them\n\n      console.log('ğŸ“¤ ×©×•×œ×— ×œ×©×¨×ª:', {\n        title: itemData.title,\n        city: itemData.city,\n        address: itemData.address,\n        hasImage: !!itemData.image_base64,\n        tagsCount: selectedFilters.length,\n      });\n\n      // ×©×œ×™×—×” ×œ×©×¨×ª ×“×¨×š API ×”×—×“×©\n      const savedItem = await db.createDedicatedItem(itemData);\n\n      console.log('âœ… × ×©××¨ ×‘×”×¦×œ×—×” ×‘×©×¨×ª:', savedItem);\n\n      // Optimistic Update: Add to local state immediately\n      // Use the ID returned from the server (savedItem.id) - this is the proper ID generated by backend\n      const newItemForState: DonationItem = {\n        id: savedItem.id || savedItem.data?.id,\n        ownerId: itemData.owner_id,\n        title: itemData.title,\n        description: itemData.description,\n        category: itemData.category,\n        condition: itemData.condition as any,\n        city: itemData.city,\n        address: itemData.address,\n        coordinates: itemData.coordinates,\n        price: itemData.price,\n        image_base64: itemData.image_base64 || undefined,\n        rating: itemData.rating,\n        timestamp: new Date().toISOString(),\n        tags: itemData.tags,\n        qty: itemData.quantity,\n        delivery_method: itemData.delivery_method,\n        status: itemData.status,\n        isDeleted: false,\n      };\n\n      setAllItems(prev => [newItemForState, ...prev]);\n      // Filter logic will run via useEffect but we can also update explicitly if needed\n      // With optimistic update, we don't strictly need to await loadItems\n      // But we can trigger it in background\n      loadItems();\n\n      // ××™×¤×•×¡ ×›×œ ×”×©×“×•×ª\n      setTitle('');\n      setDescription('');\n      setPrice('0');\n      setCity('');\n      setAddress('');\n      setQty(1);\n      setCondition('');\n      setImageUri('');\n      setSelectedCategory('general');\n      setSelectedFilters([]);\n\n      Alert.alert(\n        'âœ… × ×©××¨ ×‘×”×¦×œ×—×”!',\n        `×”×¤×¨×™×˜ \"${savedItem.title}\" × ×©××¨ ×‘××¢×¨×›×ª`,\n        [{ text: '××™×©×•×¨', style: 'default' }]\n      );\n\n    } catch (error: any) {\n      console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×¤×¨×™×˜:', error);\n      const errorMessage = error.response?.data?.error || error.response?.data?.message || error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n      console.error('âŒ Error details:', {\n        message: errorMessage,\n        status: error.response?.status,\n        data: error.response?.data,\n        fullError: error\n      });\n      Alert.alert(\n        'âŒ ×©×’×™××”',\n        `×œ× ×”×¦×œ×—× ×• ×œ×©××•×¨ ××ª ×”×¤×¨×™×˜:\\n${errorMessage}`,\n        [{ text: '×¡×’×•×¨', style: 'cancel' }]\n      );\n    }\n  };\n\n  const menuOptions = ['×”×™×¡×˜×•×¨×™×™×ª ×¤×¨×™×˜×™×', '×”×’×“×¨×•×ª', '×¢×–×¨×”', '×¦×•×¨ ×§×©×¨'];\n\n  const handleItemPress = (item: DonationItem) => {\n    setSelectedItem(item);\n    setShowItemModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setShowItemModal(false);\n    setSelectedItem(null);\n  };\n\n  // Handle post closed - immediately update UI for fast responsiveness\n  const handlePostClosed = useCallback((postId: string) => {\n    // Optimistic update: remove post from lists immediately for instant UI feedback\n    setAllPosts(prev => prev.filter(p => p.id !== postId));\n    setFilteredPosts(prev => prev.filter(p => p.id !== postId));\n    setRecentPosts(prev => prev.filter(p => p.id !== postId));\n    \n    // Background reload to ensure consistency (non-blocking)\n    // The UI is already updated, so this is just for data sync\n    setTimeout(() => {\n      if (loadItemsRef.current) {\n        loadItemsRef.current().catch(err => {\n          console.error('Error reloading items after close:', err);\n        });\n      }\n    }, 100);\n  }, []);\n\n  // Render item callback for FlatList (search mode)\n  const renderPostItem = useCallback(({ item }: { item: FeedItem }) => {\n    // Calculate available width: screen width minus horizontal padding on both sides\n    const availableWidth = width - (screenPadding * 2);\n    \n    // For grid view: with justifyContent: 'space-between', FlatList distributes items automatically\n    // So each item gets availableWidth / numColumns (no need to account for gaps)\n    const itemWidth = numColumns > 1 \n      ? availableWidth / numColumns\n      : availableWidth; // Full available width for list view\n\n    return (\n      <PostReelItem\n        item={item}\n        cardWidth={itemWidth}\n        numColumns={numColumns}\n        onPress={(item) => {\n          // Navigate to post details or open modal\n          console.log('Post pressed:', item.id);\n        }}\n        onCommentPress={(item) => {\n          // Handle comment press\n          console.log('Comment pressed:', item.id);\n        }}\n        onMorePress={handleMorePress}\n        onPostClosed={handlePostClosed}\n      />\n    );\n  }, [numColumns, screenPadding, width, handleMorePress, handlePostClosed]);\n\n  // Empty component for FlatList\n  const renderEmptyPosts = useCallback(() => (\n    <View style={localStyles.emptyState}>\n      <Icon name=\"search-outline\" size={48} color={colors.textSecondary} />\n      <Text style={localStyles.emptyStateTitle}>×œ× × ××¦××• ×¤×•×¡×˜×™×</Text>\n      <Text style={localStyles.emptyStateText}>× ×¡×” ×œ×©× ×•×ª ××ª ×”×¤×™×œ×˜×¨×™× ××• ×”×—×™×¤×•×©</Text>\n      {(searchQuery || selectedFilters.length > 0 || selectedSorts.length > 0) && (\n        <TouchableOpacity style={localStyles.emptyStateClearButton} onPress={handleClearAll}>\n          <Text style={localStyles.emptyStateClearButtonText}>× ×§×” ×”×›×œ</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  ), [searchQuery, selectedFilters, selectedSorts, handleClearAll]);\n\n  const renderItemCard = ({ item }: { item: DonationItem }) => (\n    <TouchableOpacity style={localStyles.itemCard} onPress={() => handleItemPress(item)}>\n      {/* ×ª××•× ×” base64 */}\n      {item.image_base64 && (\n        <Image\n          source={{ uri: item.image_base64 }}\n          style={{ width: '100%', height: 120, borderRadius: 8, marginBottom: 8 }}\n          resizeMode=\"cover\"\n        />\n      )}\n\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemTitle} numberOfLines={1}>{item.title}</Text>\n        <View style={localStyles.itemBadge}>\n          <Text style={localStyles.itemBadgeText}>\n            {getCategoryLabel(item.category)}\n          </Text>\n        </View>\n      </View>\n\n      {/* ××™×§×•× ××¤×•×¦×œ */}\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta} numberOfLines={1}>\n          ğŸ“ {item.city || '××™×§×•× ×œ× ×–××™×Ÿ'}{item.address ? `, ${item.address}` : ''}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderRecentCard = ({ item }: { item: DonationItem }) => (\n    <View style={localStyles.itemCard}>\n      {/* ×ª××•× ×” base64 */}\n      {item.image_base64 && (\n        <Image\n          source={{ uri: item.image_base64 }}\n          style={{ width: '100%', height: 120, borderRadius: 8, marginBottom: 8 }}\n          resizeMode=\"cover\"\n        />\n      )}\n\n      <View style={localStyles.itemRow}>\n        <View style={{ flexDirection: 'row', alignItems: 'center', flex: 1 }}>\n          <Text style={localStyles.itemTitle} numberOfLines={1}>{item.title}</Text>\n          <TouchableOpacity\n            onPress={() => handleDeleteItem(item)}\n            style={localStyles.deleteButton}\n            hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n          >\n            <Icon name=\"trash-outline\" size={20} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n        <Text style={localStyles.itemMeta}>ğŸ“… {new Date(item.timestamp).toLocaleDateString('he-IL')} {new Date(item.timestamp).toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}</Text>\n      </View>\n\n      {/* ×©×•×¨×” × ×•×¡×¤×ª ×¢× ××¦×‘ + ×›××•×ª */}\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta}>\n          {item.condition === 'new' ? 'ğŸ†• ×—×“×©' :\n            item.condition === 'like_new' ? 'âœ¨ ×›××• ×—×“×©' :\n              item.condition === 'used' ? 'ğŸ“¦ ××©×•××©' : 'ğŸ”§ ×œ×—×œ×¤×™×'}\n          {' â€¢ '}\n          ×›××•×ª: {item.qty || 1}\n        </Text>\n      </View>\n\n      <View style={localStyles.itemRow}>\n        <Text style={localStyles.itemMeta} numberOfLines={1}>\n          ğŸ“ {item.city || '××™×§×•× ×œ× ×–××™×Ÿ'}{item.address ? `, ${item.address}` : ''}\n        </Text>\n        <View style={localStyles.itemBadge}>\n          <Text style={localStyles.itemBadgeText}>\n            {getCategoryLabel(item.category)}\n          </Text>\n        </View>\n        <TouchableOpacity\n          style={localStyles.restoreChip}\n          onPress={() => {\n            setTitle(item.title);\n            setDescription(item.description || '');\n            setCity(item.city || '');\n            setAddress(item.address || '');\n            setPrice(String(item.price ?? 0));\n            setQty(item.qty || 1);\n            setCondition(item.condition || '');\n            if (item.image_base64) {\n              setImageUri(item.image_base64);\n            }\n          }}\n        >\n          <Text style={localStyles.restoreChipText}>×©×—×–×¨</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={menuOptions}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(o) => Alert.alert('×ª×¤×¨×™×˜', `× ×‘×—×¨: ${o}`)}\n        title=\"\"\n        placeholder={mode ? '×—×¤×© ×¤×¨×™×˜×™× ×–××™× ×™×' : '×©× ×”×¤×¨×™×˜'}\n        filterOptions={filterOptions}\n        sortOptions={itemsSortOptions}\n        searchData={allItems}\n        onSearch={handleSearch}\n      />\n\n      {mode ? (\n        <View style={{ flex: 1 }}>\n          <VerticalGridSlider\n            numColumns={numColumns}\n            onNumColumnsChange={setNumColumns}\n            style={{\n              top: 10, // Relative to container below header\n              left: 4,\n            }}\n          />\n          <ScrollContainer\n            style={localStyles.container}\n            contentStyle={[\n              localStyles.scrollContent,\n              isLandscape() && { paddingHorizontal: 32 }\n            ]}\n          >\n            {/* Header */}\n            <View style={localStyles.headerRow}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilters.length > 0 ? '×¤×¨×™×˜×™× ×–××™× ×™×' : '×¤×¨×™×˜×™× ××•××œ×¦×™×'}\n              </Text>\n              {(searchQuery || selectedFilters.length > 0 || selectedSorts.length > 0) && (\n                <TouchableOpacity style={localStyles.clearButton} onPress={handleClearAll}>\n                  <Text style={localStyles.clearButtonText}>× ×§×” ×”×›×œ</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n\n            {/* Posts List (in search mode) */}\n            <FlatList\n              data={filteredPosts}\n              renderItem={renderPostItem}\n              keyExtractor={(item) => item.id}\n              key={numColumns} // Force re-render on column change\n              numColumns={numColumns}\n              columnWrapperStyle={numColumns > 1 ? localStyles.columnWrapper : undefined}\n              contentContainerStyle={{ paddingHorizontal: screenPadding }}\n              scrollEnabled={false}\n              nestedScrollEnabled={true}\n              ListEmptyComponent={renderEmptyPosts}\n              showsVerticalScrollIndicator={false}\n            />\n\n            {/* Footer Stats */}\n            <View style={localStyles.section}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×¤×•×¡×˜×™× ×©×¤×•×¨×¡××•', value: filteredPosts.length, icon: 'cube-outline' },\n                  { label: '×œ×™×™×§×™×', value: filteredPosts.reduce((sum, p) => sum + (p.likes || 0), 0), icon: 'heart-outline' },\n                  { label: '×ª×’×•×‘×•×ª', value: filteredPosts.reduce((sum, p) => sum + (p.comments || 0), 0), icon: 'chatbubble-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={localStyles.section}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"items\" />\n            </View>\n          </ScrollContainer>\n        </View>\n      ) : (\n        <ScrollContainer\n          style={localStyles.container}\n          contentStyle={localStyles.scrollContent}\n          keyboardShouldPersistTaps=\"always\"\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={localStyles.formContainer}>\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×›×•×ª×¨×ª ×”×¤×¨×™×˜</Text>\n                <TextInput ref={titleInputRef} style={localStyles.input} value={title} onChangeText={setTitle} placeholder=\"×œ×“×•×’××”: ×¡×¤×” 3 ××•×©×‘×™×\" />\n              </View>\n            </View>\n\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×ª×™××•×¨</Text>\n                <TextInput style={[localStyles.input, { height: 80 }]} value={description} onChangeText={setDescription} placeholder=\"××¦×‘ ×”×¤×¨×™×˜, ××™×“×•×ª, ×”×¢×¨×•×ª\" multiline />\n              </View>\n            </View>\n\n            {/* ×‘×—×™×¨×ª ×§×˜×’×•×¨×™×” - ×“×¨×•×¤×“××•×Ÿ */}\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <Text style={localStyles.label}>×§×˜×’×•×¨×™×”</Text>\n                <TouchableOpacity\n                  style={localStyles.dropdownButton}\n                  onPress={() => setShowCategoryDropdown(true)}\n                  activeOpacity={0.7}\n                >\n                  <Text style={[\n                    localStyles.dropdownButtonText,\n                    !selectedCategory && localStyles.dropdownPlaceholder\n                  ]}>\n                    {ITEM_CATEGORIES.find(c => c.id === selectedCategory)?.label || '×‘×—×¨ ×§×˜×’×•×¨×™×”'}\n                  </Text>\n                  <Icon\n                    name={showCategoryDropdown ? \"chevron-up\" : \"chevron-down\"}\n                    size={20}\n                    color={colors.textSecondary}\n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Modal ×œ×‘×—×™×¨×ª ×§×˜×’×•×¨×™×” */}\n            <Modal\n              visible={showCategoryDropdown}\n              transparent\n              animationType=\"fade\"\n              onRequestClose={() => setShowCategoryDropdown(false)}\n            >\n              <TouchableOpacity\n                style={localStyles.modalOverlay}\n                activeOpacity={1}\n                onPress={() => setShowCategoryDropdown(false)}\n              >\n                <View style={localStyles.modalContent} onStartShouldSetResponder={() => true}>\n                  <View style={localStyles.modalHeader}>\n                    <Text style={localStyles.modalTitle}>×‘×—×¨ ×§×˜×’×•×¨×™×”</Text>\n                    <TouchableOpacity\n                      onPress={() => setShowCategoryDropdown(false)}\n                      style={localStyles.modalCloseButton}\n                    >\n                      <Icon name=\"close\" size={24} color={colors.textSecondary} />\n                    </TouchableOpacity>\n                  </View>\n                  <FlatList\n                    data={ITEM_CATEGORIES}\n                    keyExtractor={(item) => item.id}\n                    renderItem={({ item }) => (\n                      <TouchableOpacity\n                        style={[\n                          localStyles.dropdownItem,\n                          selectedCategory === item.id && localStyles.dropdownItemSelected\n                        ]}\n                        onPress={() => {\n                          setSelectedCategory(item.id as ItemType);\n                          setShowCategoryDropdown(false);\n                        }}\n                      >\n                        <Icon\n                          name={item.icon as any}\n                          size={20}\n                          color={selectedCategory === item.id ? colors.primary : colors.textSecondary}\n                          style={localStyles.dropdownItemIcon}\n                        />\n                        <Text style={[\n                          localStyles.dropdownItemText,\n                          selectedCategory === item.id && localStyles.dropdownItemTextSelected\n                        ]}>\n                          {item.label}\n                        </Text>\n                        {selectedCategory === item.id && (\n                          <Icon name=\"checkmark\" size={20} color={colors.success} />\n                        )}\n                      </TouchableOpacity>\n                    )}\n                    style={localStyles.dropdownList}\n                  />\n                </View>\n              </TouchableOpacity>\n            </Modal>\n\n            {/* Location fields - split into city and address */}\n            <View style={localStyles.row}>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×¢×™×¨</Text>\n                <TextInput\n                  style={localStyles.input}\n                  value={city}\n                  onChangeText={setCity}\n                  placeholder=\"×ª×œ ××‘×™×‘\"\n                />\n              </View>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×›×ª×•×‘×ª</Text>\n                <TextInput\n                  style={localStyles.input}\n                  value={address}\n                  onChangeText={setAddress}\n                  placeholder=\"×¨×—×•×‘ 123\"\n                />\n              </View>\n            </View>\n\n            {/* Quantity field */}\n            <View style={localStyles.row}>\n              <View style={localStyles.fieldSmall}>\n                <Text style={localStyles.label}>×›××•×ª</Text>\n                <View style={localStyles.counterRow}>\n                  <TouchableOpacity style={localStyles.counterBtn} onPress={() => setQty(Math.max(1, qty - 1))}><Text style={localStyles.counterText}>-</Text></TouchableOpacity>\n                  <Text style={localStyles.counterValue}>{qty}</Text>\n                  <TouchableOpacity style={localStyles.counterBtn} onPress={() => setQty(qty + 1)}><Text style={localStyles.counterText}>+</Text></TouchableOpacity>\n                </View>\n              </View>\n            </View>\n\n            <Text style={localStyles.labelInline}>××¦×‘</Text>\n            <View style={localStyles.row}>\n              <View style={localStyles.field}>\n                <View style={localStyles.tagsRow}>\n                  {[\n                    { key: 'new', label: '×—×“×©' },\n                    { key: 'like_new', label: '×›××• ×—×“×©' },\n                    { key: 'used', label: '××©×•××©' },\n                    { key: 'for_parts', label: '×œ×—×œ×¤×™×' },\n                  ].map(opt => (\n                    <TouchableOpacity\n                      key={opt.key}\n                      style={[\n                        localStyles.tag,\n                        localStyles.tagSmall,\n                        condition === (opt.key as any) && localStyles.tagSelected,\n                      ]}\n                      onPress={() => setCondition(opt.key as any)}\n                    >\n                      <Text\n                        style={[\n                          localStyles.tagText,\n                          localStyles.tagTextSm,\n                          condition === (opt.key as any) && localStyles.tagTextSelected,\n                        ]}\n                      >\n                        {opt.label}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              </View>\n            </View>\n\n            {/* ×›×¤×ª×•×¨ ×”×¢×œ××ª ×ª××•× ×” */}\n            <View style={localStyles.imageSection}>\n              <Text style={localStyles.labelInline}>×ª××•× ×” (××•×¤×¦×™×•× ×œ×™)</Text>\n              <TouchableOpacity\n                style={localStyles.imagePickerButton}\n                onPress={pickImage}\n              >\n                <Icon name=\"image-outline\" size={24} color={colors.primary} />\n                <Text style={localStyles.imagePickerText}>\n                  {imageUri ? 'âœ… ×ª××•× ×” × ×‘×—×¨×”' : '×‘×—×¨ ×ª××•× ×” ××”×’×œ×¨×™×”'}\n                </Text>\n              </TouchableOpacity>\n\n              {/* ×ª×¦×•×’×” ××§×“×™××” ×©×œ ×”×ª××•× ×” */}\n              {imageUri && (\n                <View style={localStyles.imagePreview}>\n                  <Image source={{ uri: imageUri }} style={localStyles.previewImage} />\n                  <View style={localStyles.imageInfo}>\n                    <Text style={localStyles.imageInfoText}>âœ… ×ª××•× ×” ××•×›× ×”</Text>\n                    <Text style={localStyles.imageInfoSubtext}>80Ã—80 ×¤×™×§×¡×œ×™×</Text>\n                  </View>\n                  <TouchableOpacity\n                    style={localStyles.removeImageButton}\n                    onPress={() => setImageUri('')}\n                  >\n                    <Icon name=\"close-circle\" size={24} color={colors.error} />\n                  </TouchableOpacity>\n                </View>\n              )}\n            </View>\n\n            <TouchableOpacity style={[localStyles.offerButton, !title && { opacity: 0.5 }]} onPress={handleCreateItem} disabled={!title}>\n              <Text style={localStyles.offerButtonText}>×¤×¨×¡× ×¤×¨×™×˜</Text>\n            </TouchableOpacity>\n          </View>\n\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>×¤×¨×™×˜×™× ×©×¤×¨×¡××ª ×œ××—×¨×•× ×”</Text>\n            {recentPosts.length === 0 ? (\n              <Text style={localStyles.emptyStateText}>××™×Ÿ ×¤×•×¡×˜×™× ×©×¤×•×¨×¡××• ×¢×“×™×™×Ÿ</Text>\n            ) : (\n              <View style={localStyles.recentContainer}>\n                {recentPosts.map((post) => {\n                  // Container has paddingHorizontal: 16, scrollContent has paddingHorizontal: 16, \n                  // and recentContainer has paddingHorizontal: 8\n                  // Total padding is 16 + 16 + 8 = 40 on each side\n                  const totalPadding = 16 + 16 + 8;\n                  const recentCardWidth = width - (totalPadding * 2);\n                  return (\n                    <View key={post.id} style={localStyles.recentItemWrapper}>\n                      <PostReelItem\n                        item={post}\n                        cardWidth={recentCardWidth}\n                        numColumns={1}\n                        onPress={(item) => {\n                          console.log('Post pressed:', item.id);\n                        }}\n                        onCommentPress={(item) => {\n                          console.log('Comment pressed:', item.id);\n                        }}\n                        onMorePress={handleMorePress}\n                        onPostClosed={handlePostClosed}\n                      />\n                    </View>\n                  );\n                })}\n              </View>\n            )}\n          </View>\n\n          {/* Add Links Section */}\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n            <AddLinkComponent category=\"items\" />\n          </View>\n        </ScrollContainer>\n      )}\n\n      {/* Item Details Modal */}\n      <ItemDetailsModal\n        visible={showItemModal}\n        onClose={handleCloseModal}\n        item={selectedItem}\n        type=\"item\"\n        navigation={navigation}\n      />\n\n      {/* Post Menu Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n  safeArea: { flex: 1, backgroundColor: colors.backgroundTertiary },\n  container: { flex: 1, paddingHorizontal: 16, paddingTop: 4 },\n  scrollContent: { paddingHorizontal: 16, paddingTop: 4, paddingBottom: 120, flexGrow: 1 },\n  formContainer: { padding: 5, alignItems: 'center', borderRadius: 15, marginBottom: 15 },\n  row: { flexDirection: rowDirection('row-reverse'), gap: 10, width: '100%', paddingHorizontal: 8 },\n  field: { flex: 1 },\n  fieldSmall: { flex: 0.5 },\n  label: { fontSize: FontSizes.medium, fontWeight: '600', color: colors.textPrimary, marginBottom: 10, textAlign: 'center' },\n  labelInline: { marginTop: 3, flex: 1, fontSize: FontSizes.medium, fontWeight: '600', color: colors.textPrimary, ...marginStartEnd(6, 0) },\n  input: { backgroundColor: colors.white, borderRadius: 10, padding: 12, fontSize: FontSizes.body, textAlign: biDiTextAlign('right'), color: colors.textPrimary, borderWidth: 1, borderColor: colors.secondary },\n  inputWrapper: { position: 'relative', justifyContent: 'center' },\n  inputWithAdornment: { paddingRight: 30 },\n  inputAdornment: { position: 'absolute', right: 10, color: colors.textSecondary, fontSize: FontSizes.body },\n  counterRow: { flexDirection: rowDirection('row'), alignItems: 'center', justifyContent: 'space-between', backgroundColor: colors.white, borderRadius: 10, borderWidth: 1, borderColor: colors.secondary, paddingHorizontal: 8, paddingVertical: 6 },\n  counterBtn: { backgroundColor: colors.pinkLight, paddingHorizontal: 10, paddingVertical: 6, borderRadius: 8 },\n  counterText: { fontSize: FontSizes.medium, fontWeight: 'bold', color: colors.textPrimary },\n  counterValue: { fontSize: FontSizes.medium, fontWeight: 'bold', color: colors.textPrimary, minWidth: 30, textAlign: 'center' },\n  tagsRow: { marginTop: 10, alignItems: 'stretch', flexDirection: rowDirection('row-reverse'), flexWrap: 'wrap', gap: 3 },\n  tag: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 999, paddingHorizontal: 10, paddingVertical: 6 },\n  tagSmall: { paddingHorizontal: 8, marginHorizontal: \"4%\", paddingVertical: 4 },\n  tagSelected: { backgroundColor: colors.backgroundSecondary, borderColor: colors.success },\n  tagText: { fontSize: FontSizes.small, color: colors.textPrimary },\n  tagTextSm: { fontSize: FontSizes.caption },\n  tagTextSelected: { color: colors.success, fontWeight: '600' },\n  offerButton: { backgroundColor: colors.accent, padding: 14, borderRadius: 12, alignItems: 'center', marginTop: 10 },\n  offerButtonText: { color: colors.background, fontSize: FontSizes.medium, fontWeight: 'bold' },\n  section: { marginBottom: 10 },\n  sectionTitle: { fontSize: FontSizes.body, fontWeight: 'bold', alignSelf: 'center', color: colors.textPrimary, textAlign: 'center' },\n  headerRow: { flexDirection: rowDirection('row-reverse'), justifyContent: 'space-between', alignItems: 'center', marginBottom: 8, paddingHorizontal: 4 },\n  clearButton: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 8, paddingHorizontal: 12, paddingVertical: 6 },\n  clearButtonText: { fontSize: FontSizes.small, color: colors.textPrimary, fontWeight: '600' },\n  noOuterScrollContainer: { flex: 1 },\n  sectionWithScroller: { flex: 1, backgroundColor: colors.pinkLight, borderRadius: 12, borderWidth: 1, borderColor: colors.secondary, paddingVertical: 8, paddingHorizontal: 8 },\n  innerScroll: { flex: 1 },\n  itemsGridContainer: {},\n  columnWrapper: {\n    justifyContent: 'space-between',\n  },\n  emptyState: { flex: 1, justifyContent: 'center', alignItems: 'center', paddingVertical: 40 },\n  emptyStateTitle: { fontSize: FontSizes.body, fontWeight: 'bold', color: colors.textPrimary, marginTop: 16, marginBottom: 8 },\n  emptyStateText: { fontSize: FontSizes.small, color: colors.textSecondary, textAlign: 'center', marginBottom: 16 },\n  emptyStateClearButton: { backgroundColor: colors.accent, paddingHorizontal: 20, paddingVertical: 10, borderRadius: 8, marginTop: 8 },\n  emptyStateClearButtonText: { fontSize: FontSizes.small, color: colors.background, fontWeight: '600' },\n  itemCardWrapper: { marginBottom: 8, width: '100%' },\n  itemCard: { backgroundColor: colors.pinkLight, borderRadius: 10, padding: 8, borderWidth: 1, borderColor: colors.secondary },\n  itemRow: { flexDirection: rowDirection('row-reverse'), justifyContent: 'space-between', alignItems: 'center', marginBottom: 4 },\n  itemTitle: { fontSize: FontSizes.small, fontWeight: 'bold', color: colors.textPrimary, textAlign: biDiTextAlign('right'), flex: 1, marginLeft: 6 },\n  itemMeta: { fontSize: FontSizes.small, color: colors.textSecondary },\n  itemBadge: { backgroundColor: colors.backgroundSecondary, paddingHorizontal: 6, paddingVertical: 2, borderRadius: 6, marginLeft: 6 },\n  itemBadgeText: { fontSize: FontSizes.small, color: colors.success, fontWeight: 'bold' },\n  recentContainer: { paddingHorizontal: 8, paddingVertical: 8 },\n  recentItemWrapper: { marginBottom: 8, width: '100%' },\n  restoreChip: { backgroundColor: colors.pinkLight, borderWidth: 1, borderColor: colors.secondary, borderRadius: 999, paddingHorizontal: 10, paddingVertical: 4 },\n  restoreChipText: { fontSize: FontSizes.small, color: colors.textPrimary, fontWeight: '600' },\n  deleteButton: {\n    padding: 6,\n    marginLeft: 12,\n    backgroundColor: colors.pinkLight,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: colors.pinkLight,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 32,\n    minHeight: 32,\n  },\n  itemImageContainer: {\n    padding: 4,\n    marginBottom: 4,\n  },\n  itemImageIndicator: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  imageSection: {\n    width: '100%',\n    marginTop: 8,\n    marginBottom: 8,\n  },\n  imagePickerButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 2,\n    borderColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    gap: 8,\n    marginTop: 4,\n  },\n  imagePickerText: {\n    color: colors.primary,\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  imagePreview: {\n    marginTop: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  previewImage: {\n    width: 80,\n    height: 80,\n    borderRadius: 8,\n    resizeMode: 'cover',\n  },\n  removeImageButton: {\n    marginLeft: 'auto',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 20,\n    padding: 4,\n  },\n  imageInfo: {\n    flex: 1,\n    marginLeft: 12,\n    justifyContent: 'center',\n  },\n  imageInfoText: {\n    fontSize: FontSizes.medium,\n    color: colors.success,\n    fontWeight: '600',\n  },\n  imageInfoSubtext: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginTop: 2,\n  },\n  // Dropdown styles\n  dropdownButton: {\n    backgroundColor: colors.white,\n    borderRadius: 10,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    minHeight: 48,\n  },\n  dropdownButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('right'),\n    flex: 1,\n  },\n  dropdownPlaceholder: {\n    color: colors.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: colors.white,\n    borderRadius: 16,\n    width: '85%',\n    maxHeight: '70%',\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: rowDirection('row-reverse'),\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  modalCloseButton: {\n    padding: 4,\n  },\n  dropdownList: {\n    maxHeight: 400,\n  },\n  dropdownItem: {\n    flexDirection: rowDirection('row-reverse'),\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  dropdownItemSelected: {\n    backgroundColor: colors.pinkLight,\n  },\n  dropdownItemIcon: {\n    marginLeft: 12,\n  },\n  dropdownItemText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: biDiTextAlign('right'),\n  },\n  dropdownItemTextSelected: {\n    color: colors.primary,\n    fontWeight: '600',\n  },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/JobsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/KnowledgeScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DonationStatsFooter' is defined but never used.","line":15,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"DonationStatsFooter"},"fix":{"range":[352,421],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":137,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4635,4638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4635,4638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'searchQuery' is assigned a value but never used.","line":159,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":159,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedFilter' is assigned a value but never used.","line":160,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedSort' is assigned a value but never used.","line":161,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedMentorship' is assigned a value but never used.","line":164,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5128,5131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5128,5131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":165,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":165,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":185,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":185,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5943,5946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5943,5946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6108,6111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6108,6111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7448,7451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7448,7451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7935,7938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7935,7938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11196,11199],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11196,11199],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":372,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12648,12651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12648,12651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  TouchableOpacity,\n  Image,\n  Linking,\n  Alert,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport HeaderComp from '../components/HeaderComp';\nimport { donationResources } from '../utils/donationResources';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport ScrollContainer from '../components/ScrollContainer';\n\n// Mock data for educational content\nconst educationalLinks = [\n  {\n    id: '1',\n    title: '×§×•×¨×¡ ××ª××˜×™×§×” ×‘×¡×™×¡×™',\n    description: '×œ×™××•×“ ××ª××˜×™×§×” ×‘×¡×™×¡×™×ª ×œ×›×™×ª×•×ª ×-×•',\n    url: 'https://www.khanacademy.org/math',\n    icon: 'calculator-outline',\n    color: colors.success,\n    category: '××ª××˜×™×§×”',\n  },\n  {\n    id: '2',\n    title: '×œ×™××•×“ ×× ×’×œ×™×ª',\n    description: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××ª×—×™×œ×™× ×•××ª×§×“××™×',\n    url: 'https://www.duolingo.com',\n    icon: 'language-outline',\n    color: colors.info,\n    category: '×©×¤×•×ª',\n  },\n  {\n    id: '3',\n    title: '×ª×›× ×•×ª ×‘×¡×™×¡×™',\n    description: '×œ×™××•×“ ×ª×›× ×•×ª ×¢× Python ×•-JavaScript',\n    url: 'https://www.codecademy.com',\n    icon: 'code-outline',\n    color: colors.donationItems,\n    category: '×ª×›× ×•×ª',\n  },\n  {\n    id: '4',\n    title: '××“×¢×™× ×•×˜×‘×¢',\n    description: '×¡×¨×˜×•× ×™× ×—×™× ×•×›×™×™× ×¢×œ ××“×¢ ×•×˜×‘×¢',\n    url: 'https://www.youtube.com/c/Kurzgesagt',\n    icon: 'flask-outline',\n    color: colors.warning,\n    category: '××“×¢×™×',\n  },\n  {\n    id: '5',\n    title: '×”×™×¡×˜×•×¨×™×” ×™×”×•×“×™×ª',\n    description: '×§×•×¨×¡ ×”×™×¡×˜×•×¨×™×” ×™×”×•×“×™×ª ×•×™×©×¨××œ×™×ª',\n    url: 'https://www.youtube.com/c/JewishHistory',\n    icon: 'library-outline',\n    color: colors.textPrimary,\n    category: '×”×™×¡×˜×•×¨×™×”',\n  },\n  {\n    id: '6',\n    title: '××× ×•×ª ×•×™×¦×™×¨×”',\n    description: '×©×™×¢×•×¨×™ ××× ×•×ª ×•×™×¦×™×¨×” ×œ×›×œ ×”×’×™×œ××™×',\n    url: 'https://www.youtube.com/c/ArtForKidsHub',\n    icon: 'brush-outline',\n    color: colors.pinkDeep,\n    category: '××× ×•×ª',\n  },\n];\n\nconst communityContent = [\n  {\n    id: '1',\n    title: '×©×™×¢×•×¨ ×¤×¨×˜×™ ×‘××ª××˜×™×§×”',\n    teacher: '×©×¨×” ×›×”×Ÿ',\n    subject: '××ª××˜×™×§×” - ×›×™×ª×” ×™\"×',\n    description: '×©×™×¢×•×¨ ×¤×¨×˜×™ ×‘××ª××˜×™×§×” ×œ×›×™×ª×” ×™\"×, ×›×•×œ×œ ×”×›× ×” ×œ×‘×’×¨×•×ª',\n    rating: 4.8,\n    students: 15,\n    price: 'â‚ª80 ×œ×©×¢×”',\n    image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400',\n  },\n  {\n    id: '2',\n    title: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××‘×•×’×¨×™×',\n    teacher: '×“×•×“ ×œ×•×™',\n    subject: '×× ×’×œ×™×ª - ××ª×—×™×œ×™×',\n    description: '×§×•×¨×¡ ×× ×’×œ×™×ª ×œ××‘×•×’×¨×™× ××ª×—×™×œ×™×, ×©×™×¢×•×¨×™× ×§×‘×•×¦×ª×™×™×',\n    rating: 4.9,\n    students: 8,\n    price: 'â‚ª120 ×œ×©×™×¢×•×¨',\n    image: 'https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=400',\n  },\n  {\n    id: '3',\n    title: '×©×™×¢×•×¨ ××•×–×™×§×” - ×¤×¡× ×ª×¨',\n    teacher: '××™×›×œ ×¨×•×–×Ÿ',\n    subject: '××•×–×™×§×” - ×¤×¡× ×ª×¨',\n    description: '×©×™×¢×•×¨×™ ×¤×¡× ×ª×¨ ×œ××ª×—×™×œ×™× ×•××ª×§×“××™×, ×›×•×œ×œ ×ª×™××•×¨×™×”',\n    rating: 4.7,\n    students: 12,\n    price: 'â‚ª100 ×œ×©×¢×”',\n    image: 'https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?w=400',\n  },\n  {\n    id: '4',\n    title: '×§×•×¨×¡ ×ª×›× ×•×ª ×œ×™×œ×“×™×',\n    teacher: '×™×•×¡×™ ×’×•×œ×“×‘×¨×’',\n    subject: '×ª×›× ×•×ª - Scratch',\n    description: '×§×•×¨×¡ ×ª×›× ×•×ª ×œ×™×œ×“×™× ×¢× Scratch, ×œ×™××•×“ ××©×—×§',\n    rating: 4.6,\n    students: 20,\n    price: 'â‚ª90 ×œ×©×™×¢×•×¨',\n    image: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400',\n  },\n];\n\nexport default function KnowledgeScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { selectedUser, isRealAuth } = useUser();\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to teach/share), false = seeker (needs learning)\n  // URL mode: 'offer' = true, 'search' = false or undefined = search\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n  \n  // If no mode in URL, set it to search (default) and update URL\n  useEffect(() => {\n    if (!routeParams?.mode || routeParams.mode === 'undefined' || routeParams.mode === 'null' || routeParams.mode === '') {\n      // URL doesn't have mode, so we're in default search mode\n      // Make sure state reflects this and update URL\n      if (mode !== false) {\n        setMode(false);\n      }\n      // Update URL to include /search\n      (navigation as any).setParams({ mode: 'search' });\n    }\n  }, [routeParams?.mode]);\n  \n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [filteredEducationalLinks, setFilteredEducationalLinks] = useState(educationalLinks);\n  const [filteredCommunityContent, setFilteredCommunityContent] = useState(communityContent);\n  const [selectedMentorship, setSelectedMentorship] = useState<any>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ“š KnowledgeScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setSelectedMentorship(null);\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  // Filter and sort options for knowledge screen\n  const knowledgeFilterOptions = [\n    \"××ª××˜×™×§×”\",\n    \"×©×¤×•×ª\",\n    \"×ª×›× ×•×ª\",\n    \"××“×¢×™×\",\n    \"×”×™×¡×˜×•×¨×™×”\",\n    \"××× ×•×ª\",\n    \"××•×–×™×§×”\",\n    \"×¡×¤×•×¨×˜\",\n    \"×‘×™×©×•×œ\",\n    \"×˜×›× ×•×œ×•×’×™×”\",\n    \"×¤×¡×™×›×•×œ×•×’×™×”\",\n    \"×›×œ×›×œ×”\"\n  ];\n\n  const knowledgeSortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ×§×˜×’×•×¨×™×”\",\n    \"×œ×¤×™ ×“×™×¨×•×’\",\n    \"×œ×¤×™ ××¡×¤×¨ ×ª×œ××™×“×™×\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n  const handleLinkPress = async (url: string, title: string) => {\n    console.log('Opening educational link:', title);\n    try {\n      const supported = await Linking.canOpenURL(url);\n      if (supported) {\n        await Linking.openURL(url);\n      } else {\n        Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨');\n      }\n    } catch (error) {\n      console.error('Error opening link:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×¤×ª×™×—×ª ×”×§×™×©×•×¨');\n    }\n  };\n\n  const handleCommunityContentPress = (content: any) => {\n    console.log('Community content pressed:', content.title);\n    Alert.alert(\n      '×”×¦×˜×¨×¤×•×ª ×œ×§×•×¨×¡',\n      `×”×× ×ª×¨×¦×” ×œ×”×¦×˜×¨×£ ×œ×§×•×¨×¡ \"${content.title}\" ×¢× ${content.teacher}?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { text: '×”×¦×˜×¨×£', onPress: () => Alert.alert('×”×¦×œ×—×”', '×”×¦×˜×¨×¤×ª ×œ×§×•×¨×¡ ×‘×”×¦×œ×—×”!') }\n      ]\n    );\n  };\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('ğŸ“š KnowledgeScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\");\n    setSelectedSort(sorts?.[0] || \"\");\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      // Split results between educational links and community content\n      const educationalResults = results.filter(item => item.url);\n      const communityResults = results.filter(item => item.teacher);\n      \n      setFilteredEducationalLinks(educationalResults);\n      setFilteredCommunityContent(communityResults);\n    } else {\n      // Otherwise, perform local filtering\n      let filteredEducational = [...educationalLinks];\n      let filteredCommunity = [...communityContent];\n      \n      // Filter by search query\n      if (query.trim() !== \"\") {\n        filteredEducational = filteredEducational.filter(item =>\n          item.title.toLowerCase().includes(query.toLowerCase()) ||\n          item.description.toLowerCase().includes(query.toLowerCase()) ||\n          item.category.toLowerCase().includes(query.toLowerCase())\n        );\n        \n        filteredCommunity = filteredCommunity.filter(item =>\n          item.title.toLowerCase().includes(query.toLowerCase()) ||\n          item.subject.toLowerCase().includes(query.toLowerCase()) ||\n          item.description.toLowerCase().includes(query.toLowerCase()) ||\n          item.teacher.toLowerCase().includes(query.toLowerCase())\n        );\n      }\n      \n      setFilteredEducationalLinks(filteredEducational);\n      setFilteredCommunityContent(filteredCommunity);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n      <HeaderComp\n        mode={mode}\n        menuOptions={[]}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={() => {}}\n        title=\"\"\n        placeholder=\"×—×¤×© ×§×•×¨×¡×™× ×•×©×™×¢×•×¨×™×...\"\n        filterOptions={knowledgeFilterOptions}\n        sortOptions={knowledgeSortOptions}\n        searchData={isRealAuth ? [] : [...educationalLinks, ...communityContent]}\n        onSearch={handleSearch}\n      />\n\n      <ScrollContainer\n        style={styles.scrollView}\n        contentStyle={styles.content}\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Educational Links Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×—×™× ×•×›×™×™×</Text>\n          <Text style={styles.sectionDescription}>\n            ×§×™×©×•×¨×™× ×œ××ª×¨×™ ×œ×™××•×“ ××•××œ×¦×™× ×‘×—×™× ×\n          </Text>\n          \n          <View style={styles.linksGrid}>\n            {(isRealAuth ? [] : filteredEducationalLinks).map((link) => (\n              <TouchableOpacity\n                key={link.id}\n                style={styles.linkCard}\n                onPress={() => handleLinkPress(link.url, link.title)}\n              >\n                <View style={styles.linkHeader}>\n                  <View style={[styles.linkIcon, { backgroundColor: link.color }]}>\n                    <Ionicons name={link.icon as any} size={20} color=\"white\" />\n                  </View>\n                  <Text style={styles.linkTitle}>{link.title}</Text>\n                  <Ionicons name=\"open-outline\" size={16} color={colors.textSecondary} />\n                </View>\n                <View style={styles.linkContent}>\n                  <Text style={styles.linkCategory}>{link.category}</Text>\n                  <Text style={styles.linkDescription}>{link.description}</Text>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Recommended Organizations Section */}\n        {!!donationResources.knowledge && donationResources.knowledge.length > 0 && (\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{'×¢××•×ª×•×ª ××•××œ×¦×•×ª'}</Text>\n            <Text style={styles.sectionDescription}>\n              ××¨×’×•× ×™× ××•×‘×™×œ×™× ×‘×™×©×¨××œ ×œ×—×•× ×›×•×ª, ×œ×™××•×“ ×•×ª××™×›×” ×—×™× ×•×›×™×ª\n            </Text>\n            <View style={styles.linksGrid}>\n              {donationResources.knowledge.map((org) => (\n                <TouchableOpacity\n                  key={`knowledge-${org.url}`}\n                  style={styles.linkCard}\n                  onPress={() => handleLinkPress(org.url, org.name)}\n                >\n                  <View style={styles.linkHeader}>\n                    <View style={[styles.linkIcon, { backgroundColor: colors.info }]}>\n                      <Ionicons name={'school-outline' as any} size={20} color=\"white\" />\n                    </View>\n                    <Text style={styles.linkTitle}>{org.name}</Text>\n                    <View style={{ borderWidth: 1, borderColor: colors.info, borderRadius: 999, paddingHorizontal: 8, paddingVertical: 2 }}>\n                      <Text style={{ color: colors.info, fontSize: FontSizes.caption }}>×‘×§×¨ ×‘××ª×¨</Text>\n                    </View>\n                  </View>\n                  <View style={styles.linkContent}>\n                    {!!org.description && (\n                      <Text style={styles.linkDescription}>{org.description}</Text>\n                    )}\n                  </View>\n                </TouchableOpacity>\n              ))}\n            </View>\n          </View>\n        )}\n\n        {/* Community Content Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×ª×•×›×Ÿ ×§×”×™×œ×ª×™</Text>\n          <Text style={styles.sectionDescription}>\n            ×©×™×¢×•×¨×™× ×¤×¨×˜×™×™× ×•×§×•×¨×¡×™× ××”×§×”×™×œ×”\n          </Text>\n          \n          <View style={styles.communityGrid}>\n            {(isRealAuth ? [] : filteredCommunityContent).map((content) => (\n              <TouchableOpacity\n                key={content.id}\n                style={styles.communityCard}\n                onPress={() => handleCommunityContentPress(content)}\n              >\n                <Image source={{ uri: content.image }} style={styles.communityImage} />\n                <View style={styles.communityContent}>\n                  <View style={styles.communityHeader}>\n                    <Text style={styles.communityTitle}>{content.title}</Text>\n                    <View style={styles.ratingContainer}>\n                      <Ionicons name=\"star\" size={16} color={colors.warning} />\n                      <Text style={styles.ratingText}>{content.rating}</Text>\n                    </View>\n                  </View>\n                  \n                  <Text style={styles.communitySubject}>{content.subject}</Text>\n                  <Text style={styles.communityDescription}>{content.description}</Text>\n                  \n                  <View style={styles.communityFooter}>\n                    <View style={styles.communityStats}>\n                      <Ionicons name=\"people\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.communityStatsText}>{content.students} ×ª×œ××™×“×™×</Text>\n                    </View>\n                    <Text style={styles.communityPrice}>{content.price}</Text>\n                  </View>\n                  \n                  <View style={styles.communityTeacher}>\n                    <Ionicons name=\"person\" size={16} color={colors.secondary} />\n                    <Text style={styles.communityTeacherText}>{content.teacher}</Text>\n                  </View>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n\n        {/* Add Links Section */}\n        <View style={styles.sectionLinks}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n          <AddLinkComponent category=\"knowledge\" />\n        </View>\n      </ScrollContainer>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n\n  header: {\n    backgroundColor: colors.background,\n    paddingTop: 20,\n    paddingBottom: 15,\n    paddingHorizontal: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: 45,\n    height: 45,\n    borderRadius: 22.5,\n    marginRight: 12,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  welcomeText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 2,\n  },\n  userName: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  settingsButton: {\n    padding: 8,\n  },\n  scrollView: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  content: {\n    paddingBottom: 40,\n  },\n  section: {\n    marginTop: 20,\n    marginBottom: 30,\n    paddingHorizontal: 60,\n  },\n  sectionLinks: {\n    marginTop: 20,\n    marginBottom: 130,\n    paddingHorizontal: 60,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 12,\n  },\n  sectionDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 16,\n  },\n  linksGrid: {\n    gap: 15,\n  },\n  linkCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    padding: 20,\n    marginBottom: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  linkHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  linkIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  linkContent: {\n    flex: 1,\n  },\n  linkCategory: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 3,\n  },\n  linkTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n    marginRight: 8,\n  },\n  linkDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 6,\n  },\n  communityGrid: {\n    gap: 15,\n  },\n  communityCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    padding: 20,\n    marginBottom: 15,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  communityImage: {\n    width: '100%',\n    height: 150,\n  },\n  communityContent: {\n    padding: 15,\n  },\n  communityHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 6,\n  },\n  communityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  ratingText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    marginLeft: 4,\n  },\n  communitySubject: {\n    fontSize: FontSizes.small,\n    color: colors.secondary,\n    marginBottom: 6,\n  },\n  communityDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 8,\n    lineHeight: 16,\n  },\n  communityFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  communityStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  communityStatsText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginLeft: 4,\n  },\n  communityPrice: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.secondary,\n  },\n  communityTeacher: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  communityTeacherText: {\n    fontSize: FontSizes.small,\n    color: colors.secondary,\n    marginLeft: 4,\n  },\n  statsSection: {\n    marginBottom: 30,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.secondary,\n    marginTop: 8,\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/LanguagesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MatchmakingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MedicalScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MentalHealthScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MoneyScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used.","line":1,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[48,56],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FlatList' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FlatList"},"fix":{"range":[126,138],"text":""},"desc":"Remove unused variable \"FlatList\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Image"},"fix":{"range":[158,167],"text":""},"desc":"Remove unused variable \"Image\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PanResponder' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PanResponder"},"fix":{"range":[235,251],"text":""},"desc":"Remove unused variable \"PanResponder\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'charityNames' is assigned a value but never used.","line":21,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[528,531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[528,531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[557,560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[557,560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":56,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":26,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Icon"},"fix":{"range":[1919,1974],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5227,5230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5227,5230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5392,5395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5392,5395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":150,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":150,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6485,6488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6485,6488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6580,6583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6580,6583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6720,6723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6720,6723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8432,8435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8432,8435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'preferredCharity' is assigned a value but never used.","line":227,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":227,"endColumn":25},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":268,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":268,"endColumn":45,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10557,10589],"text":"// @ts-expect-error window ×§×™×™× ×‘×“×¤×“×¤×Ÿ"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":274,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":274,"endColumn":19,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[10759,10759],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":281,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":281,"endColumn":45,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10936,10968],"text":"// @ts-expect-error window ×§×™×™× ×‘×“×¤×“×¤×Ÿ"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":287,"column":17,"nodeType":"BlockStatement","messageId":"unexpected","endLine":287,"endColumn":19,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[11132,11132],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":310,"column":11,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":310,"endColumn":24,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[11955,11968],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":316,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":316,"endColumn":17,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[12108,12108],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showCharityDetailsModal' is assigned a value but never used.","line":396,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":396,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":396,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":396,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14530,14533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14530,14533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":414,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":414,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15037,15040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15037,15040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":480,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":480,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16393,16396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16393,16396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDonate' is assigned a value but never used.","line":503,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":503,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'openBitDonation' is assigned a value but never used.","line":515,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":515,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":541,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":541,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":568,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":568,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19209,19212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19209,19212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":575,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":575,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19478,19481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19478,19481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":607,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":607,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20847,20850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20847,20850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":32,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  FlatList,\n  TouchableOpacity,\n  Image,\n  Alert,\n  ScrollView,\n  TextInput,\n  Platform,\n  Modal,\n  Linking,\n  PanResponder,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { FontSizes } from '../globals/constants';\n// Empty arrays - replace with real data from API\nconst charityNames: string[] = [];\nconst charities: any[] = [];\nconst donations: any[] = [];\nimport { charitiesStore } from '../utils/charitiesStore';\nimport { donationResources } from '../utils/donationResources';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\n\n// Convert new charity format to old dummy format for compatibility\nconst dummyCharitiesBase = charities.map((charity, index) => ({\n  id: index + 1,\n  name: charity.name,\n  category: charity.tags[0] || \"×›×œ×œ×™\",\n  location: charity.location.city,\n  rating: charity.rating,\n  donors: charity.volunteersCount + charity.beneficiariesCount,\n  description: charity.description.substring(0, 100) + \"...\",\n  image: charity.tags[0] === \"×§×©×™×©×™×\" ? \"ğŸ‘´\" : \n        charity.tags[0] === \"×—×™× ×•×š\" ? \"ğŸ“š\" : \n        charity.tags[0] === \"×‘×¢×œ×™ ×—×™×™×\" ? \"ğŸ•\" : \n        charity.tags[0] === \"×‘×¨×™××•×ª\" ? \"ğŸ¥\" : \"ğŸ’\",\n  minDonation: 20 + (index * 10)\n}));\n\n// Convert donations to old format for recent donations\nconst dummyRecentDonationsBase = donations.slice(0, 5).map((donation, index) => ({\n  id: index + 1,\n  charityName: charities[index % charities.length]?.name || \"×¢××•×ª×” ×œ× ×™×“×•×¢×”\",\n  amount: donation.amount || 100,\n  date: new Date(donation.createdAt).toLocaleDateString('he-IL'),\n  status: \"×”×•×©×œ××”\",\n  category: donation.category || \"×›×œ×œ×™\"\n}));\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { Slider } from '@miblanchard/react-native-slider';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport AddLinkComponent from '../components/AddLinkComponent';\n\n// Slider component using @miblanchard/react-native-slider\nconst DonationAmountSlider: React.FC<{\n  value: number;\n  onChange: (nextValue: number) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n}> = ({ value, onChange, min = 0, max = 1000, step = 5 }) => {\n  const toNumber = (v: number | number[]) => (Array.isArray(v) ? v[0] : v);\n  return (\n    <View style={localStyles.amountSliderContainer}>\n      <Slider\n        value={value}\n        onValueChange={(v: number | number[]) => onChange(toNumber(v))}\n        minimumValue={min}\n        maximumValue={max}\n        step={step}\n        trackClickable\n        containerStyle={{ paddingHorizontal: 0 }}\n        trackStyle={localStyles.sliderTrack}\n        minimumTrackTintColor={colors.secondary}\n        maximumTrackTintColor=\"transparent\"\n        thumbStyle={localStyles.sliderThumb}\n        renderThumbComponent={() => <View style={localStyles.sliderThumbInner} />}\n      />\n      <View style={localStyles.amountRangeRow}>\n        <Text style={localStyles.amountRangeText}>â‚ª{min}</Text>\n        <Text style={localStyles.amountDisplayText}>â‚ª{value}</Text>\n        <Text style={localStyles.amountRangeText}>â‚ª{max}</Text>\n      </View>\n    </View>\n  );\n};\n\nexport default function MoneyScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { isRealAuth } = useUser();\n  const { t } = useTranslation(['donations','common']);\n  // Debug log for MoneyScreen\n  // console.log('ğŸ’° MoneyScreen - Component rendered');\n  // console.log('ğŸ’° MoneyScreen - Navigation object:', navigation);\n  // console.log('ğŸ’° MoneyScreen - Navigation state:', JSON.stringify(navigation.getState(), null, 2));\n  const [selectedRecipient, setSelectedRecipient] = useState<string>('');\n  const [amount, setAmount] = useState<string>('50');\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to donate), false = seeker (needs help)\n  // URL mode: 'offer' = true, 'search' = false\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Build external charities from donationResources to appear as donation cards\n  const externalCharities = React.useMemo(() => {\n    const categoryIds = Object.keys(donationResources || {}) as string[];\n    const toEmoji = (id: string): string => {\n      switch (id) {\n        case 'food': return 'ğŸ';\n        case 'clothes': return 'ğŸ‘•';\n        case 'books': return 'ğŸ“š';\n        case 'furniture': return 'ğŸ›‹ï¸';\n        case 'medical': return 'ğŸ¥';\n        case 'animals': return 'ğŸ¾';\n        case 'housing': return 'ğŸ ';\n        case 'support': return 'ğŸ’Ÿ';\n        case 'education': return 'ğŸ“';\n        case 'environment': return 'ğŸŒ¿';\n        case 'technology': return 'ğŸ’»';\n        case 'knowledge': return 'ğŸ§ ';\n        default: return 'ğŸ’';\n      }\n    };\n    const list: any[] = [];\n    categoryIds.forEach((catId) => {\n      const resources = (donationResources as any)[catId] || [];\n      const categoryTitle = (t(`donations:categories.${catId}.title`) as string) || catId;\n      resources.forEach((res: any, index: number) => {\n        list.push({\n          id: `ext_${catId}_${index}`,\n          name: res.name,\n          category: categoryTitle,\n          location: '×›×œ ×”××¨×¥',\n          rating: 4.7,\n          donors: 500 + (index * 7),\n          description: res.description || categoryTitle,\n          image: toEmoji(catId),\n          minDonation: 20,\n          _extUrl: res.url,\n        });\n      });\n    });\n    // Deduplicate by name\n    const seen = new Set<string>();\n    return list.filter((c) => (seen.has(c.name) ? false : (seen.add(c.name), true)));\n  }, [t]);\n\n  const combinedCharities = React.useMemo(() => {\n    const mapFromStore = charitiesStore.map((c, index) => ({\n      id: `store_${c.id}`,\n      name: c.name,\n      category: (c.categories && c.categories[0]) ? String(c.categories[0]) : '×›×œ×œ×™',\n      location: c.location?.city || '×›×œ ×”××¨×¥',\n      rating: 4.8,\n      donors: 100 + index * 5,\n      description: c.description || '',\n      image: 'ğŸ’',\n      minDonation: 20,\n      _extUrl: c.url,\n    }));\n    const dummies = isRealAuth ? [] : dummyCharitiesBase;\n    return [...mapFromStore, ...dummies, ...externalCharities];\n  }, [externalCharities]);\n\n  const [filteredCharities, setFilteredCharities] = useState(combinedCharities); // Search results\n\n  // Menu modals state\n  const [isSavingsModalVisible, setIsSavingsModalVisible] = useState(false);\n  const [isRecurringModalVisible, setIsRecurringModalVisible] = useState(false);\n  const [isReceiptsModalVisible, setIsReceiptsModalVisible] = useState(false);\n\n  // Charity modal state\n  const [isCharityModalVisible, setIsCharityModalVisible] = useState(false);\n  const [selectedCharityForModal, setSelectedCharityForModal] = useState<any | null>(null);\n  const [charityModalIsOfferMode, setCharityModalIsOfferMode] = useState<boolean>(true);\n  const [charityModalAmount, setCharityModalAmount] = useState<string>('50');\n\n  // Quick donate preferred charity (fallback to top rated)\n  const preferredCharity = filteredCharities.length > 0\n    ? filteredCharities[0]\n    : (isRealAuth ? (charitiesStore[0] ? {\n        id: `store_${charitiesStore[0].id}`,\n        name: charitiesStore[0].name,\n        category: (charitiesStore[0].categories && charitiesStore[0].categories[0]) ? String(charitiesStore[0].categories[0]) : '×›×œ×œ×™',\n        location: charitiesStore[0].location?.city || '×›×œ ×”××¨×¥',\n        rating: 4.8,\n        donors: 100,\n        description: charitiesStore[0].description || '',\n        image: 'ğŸ’',\n        minDonation: 20,\n        _extUrl: charitiesStore[0].url,\n      } : null) : (dummyCharitiesBase[0] || null));\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ’° MoneyScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setAmount('');\n      setSelectedRecipient('');\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n  const PAYBOX_WEB_URL = 'https://payboxapp.com/transfer?phone=0528616878&amount={AMOUNT}&note=×ª×¨×•××”%20×œ×§×”×™×œ×”';\n  const PAYBOX_GROUP_LINK: string | null = 'https://payboxapp.page.link/tfzsUhNpZzRqqe1g8';\n  const BIT_GROUP_LINK: string | null = 'https://www.bitpay.co.il/app/share-info?i=192485429007_19klqS2v';\n\n  const openPaymentApp = async (amount: number) => {\n    const encodedReason = encodeURIComponent('×ª×¨×•××” ×œ×§×”×™×œ×”');\n    const payboxGroupLink: string = (PAYBOX_GROUP_LINK ?? '').trim();\n    const bitGroupLink: string = (BIT_GROUP_LINK ?? '').trim();\n    const bitUrl = `bit://pay?phone=0528616878&amount=${amount}&reason=${encodedReason}`;\n\n    try {\n      // 1) ×¢×“×™×¤×•×ª: ×¤×ª×™×—×” ×™×©×™×¨×” ×©×œ ×§×‘×•×¦×ª PayBox \"Karma Community\" ×× ×¡×•×¤×§ ×§×™×©×•×¨ (× × ×¡×” ×œ×¤×ª×•×— ×™×©×¨)\n      if (payboxGroupLink.length > 0) {\n        try {\n          if (Platform.OS === 'web') {\n            // @ts-ignore window ×§×™×™× ×‘×“×¤×“×¤×Ÿ\n            window.open(payboxGroupLink, '_blank');\n            return;\n          }\n          await Linking.openURL(payboxGroupLink);\n          return;\n        } catch {}\n      }\n\n      // 1b) ×¢×“×™×¤×•×ª ×©× ×™×™×”: ×¤×ª×™×—×” ×™×©×™×¨×” ×©×œ ×§×‘×•×¦×ª Bit ×× ×™×© ×§×™×©×•×¨\n      if (bitGroupLink.length > 0) {\n        try {\n          if (Platform.OS === 'web') {\n            // @ts-ignore window ×§×™×™× ×‘×“×¤×“×¤×Ÿ\n            window.open(bitGroupLink, '_blank');\n            return;\n          }\n          await Linking.openURL(bitGroupLink);\n          return;\n        } catch {}\n      }\n\n      // 2) ×× ×œ× × ×¤×ª×— ×§×™×©×•×¨ ×§×‘×•×¦×”: × ×•×•×“× ×©×™×© ×¡×›×•× ×—×™×•×‘×™ ×œ×¤× ×™ ××¡×œ×•×œ×™ ×¡×›×•× ×™×©×™×¨×™×\n      if (!amount || amount <= 0) {\n        Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ ×¡×›×•× ×—×™×•×‘×™ ×œ×¤× ×™ ×¤×ª×™×—×ª ×”×ª×©×œ×•×.');\n        return;\n      }\n\n      // 3) × ×™×¡×™×•×Ÿ ×œ×¤×ª×•×— PayBox ×¢× ×¡×›×•× ×•×”×¢×¨×” (××¤×œ×™×§×¦×™×”)\n      const payboxScheme = `paybox://transfer?phone=0528616878&amount=${amount}&note=${encodedReason}`;\n      const supportedPb = await Linking.canOpenURL(payboxScheme);\n      if (supportedPb) {\n        await Linking.openURL(payboxScheme);\n        return;\n      }\n\n      // 4) × ×™×¡×™×•×Ÿ ×“×¨×š ×“×¤×“×¤×Ÿ: ×× ×™×© ×§×™×©×•×¨ ×§×‘×•×¦×” â€” × ×©×ª××© ×‘×•; ××—×¨×ª ×§×™×©×•×¨ ×”×¢×‘×¨×” ×¨×’×™×œ\n      const webUrl = payboxGroupLink.length > 0\n        ? payboxGroupLink\n        : PAYBOX_WEB_URL.replace('{AMOUNT}', String(amount));\n      try {\n        if (Platform.OS === 'web') {\n          // @ts-ignore\n          window.open(webUrl, '_blank');\n          return;\n        }\n        await Linking.openURL(webUrl);\n        return;\n      } catch {}\n\n      // 5) Fallback ××—×¨×•×Ÿ: Bit\n      const bitSupported = await Linking.canOpenURL(bitUrl);\n      if (bitSupported) {\n        await Linking.openURL(bitUrl);\n        return;\n      }\n    } catch (error) {\n      console.error('Error opening payment link:', error);\n    }\n    Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×§×™×©×•×¨ ×”×ª×©×œ×•× ×‘××›×©×™×¨ ×–×”.');\n  };\n\n  // Function to filter charities by search and filter\n  const getFilteredCharities = () => {\n    let filtered = [...combinedCharities];\n\n    // Filter by search\n    if (searchQuery) {\n      filtered = filtered.filter(charity =>\n        charity.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        charity.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        charity.location.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Filter by category\n    if (selectedFilter) {\n      filtered = filtered.filter(charity => charity.category === selectedFilter);\n    }\n\n    // Sorting\n    switch (selectedSort) {\n      case \"××œ×¤×‘×™×ª×™\":\n        filtered.sort((a, b) => a.name.localeCompare(b.name));\n        break;\n      case \"×œ×¤×™ ××™×§×•×\":\n        filtered.sort((a, b) => a.location.localeCompare(b.location));\n        break;\n      case \"×œ×¤×™ ×ª×—×•×\":\n        filtered.sort((a, b) => a.category.localeCompare(b.category));\n        break;\n      case \"×œ×¤×™ ××¡×¤×¨ ×ª×•×¨××™×\":\n        filtered.sort((a, b) => b.donors - a.donors);\n        break;\n      case \"×œ×¤×™ ×“×™×¨×•×’\":\n         filtered.sort((a, b) => (Number(b.rating) || 0) - (Number(a.rating) || 0));\n        break;\n      case \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\":\n        // Default - by rating\n        filtered.sort((a, b) => b.rating - a.rating);\n        break;\n    }\n\n    return filtered;\n  };\n\n  // Function to filter recent donations\n  const getFilteredRecentDonations = () => {\n    const base = isRealAuth ? [] : dummyRecentDonationsBase;\n    let filtered = [...base];\n\n    // Filter by search\n    if (searchQuery) {\n      filtered = filtered.filter(donation =>\n        donation.charityName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        donation.category.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Filter by category\n    if (selectedFilter) {\n      filtered = filtered.filter(donation => donation.category === selectedFilter);\n    }\n\n    return filtered;\n  };\n\n  // Function to show charity details in search mode\n  const showCharityDetailsModal = (charity: any) => {\n    Alert.alert(\n      charity.name,\n      `${charity.description}\\n\\nğŸ“ ×¦×•×¨ ×§×©×¨: 03-1234567\\nğŸ“§ ××™××™×™×œ: info@${charity.name.replace(/\\s+/g, '').toLowerCase()}.org.il\\n\\n×”×× ×ª×¨×¦×” ×œ×ª×¨×•× ×œ×¢××•×ª×” ×–×•?`,\n      [\n        {\n          text: '×œ× ×¢×›×©×™×•',\n          style: 'cancel',\n        },\n        {\n          text: '×ª×¨×•× ×¢×›×©×™×•',\n          onPress: () => showDonationAmountModal(charity),\n        },\n      ]\n    );\n  };\n\n  // Function to select donation amount\n  const showDonationAmountModal = (charity: any) => {\n    Alert.prompt(\n      '×‘×—×¨ ×¡×›×•× ×œ×ª×¨×•××”',\n      `×œ×ª×¨×•××” ×œ: ${charity.name}\\n\\n×”×›× ×¡ ×¡×›×•×:`,\n      [\n        {\n          text: '×‘×™×˜×•×œ',\n          style: 'cancel',\n        },\n        {\n          text: '×ª×¨×•×',\n          onPress: (amount) => {\n            if (amount && !isNaN(Number(amount))) {\n              Alert.alert(\n                '×ª×¨×•××” ×‘×•×¦×¢×”',\n                `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${amount} ×œ-${charity.name}!`\n              );\n            } else {\n              Alert.alert('×©×’×™××”', '×× × ×”×›× ×¡ ×¡×›×•× ×ª×§×™×Ÿ');\n            }\n          },\n        },\n      ],\n      'plain-text',\n      '50'\n    );\n  };\n\n \n  const menuOptions = [\n    '×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”',\n    '×”×•×¨××•×ª ×§×‘×¢',\n    '×§×‘×œ×•×ª ×•×“×•×—×•×ª',\n    '×”×™×¡×˜×•×¨×™×™×ª ×ª×¨×•××•×ª',\n    '×”×’×“×¨×•×ª ×ª×©×œ×•×',\n    '×¢×–×¨×”',\n    '×¦×•×¨ ×§×©×¨'\n  ];\n\n  // Specific filter and sort options for money screen\n  const moneyFilterOptions = [\n    \"×—×™× ×•×š\",\n    \"×‘×¨×™××•×ª\",\n    \"×¨×•×•×—×”\",\n    \"×¡×‘×™×‘×”\",\n    \"×‘×¢×œ×™ ×—×™×™×\",\n    \"× ×•×¢×¨ ×‘×¡×™×›×•×Ÿ\",\n    \"×§×©×™×©×™×\",\n    \"× ×›×™×\",\n    \"×—×•×œ×™×\",\n    \"××©×¤×—×•×ª ×‘××¦×•×§×”\",\n    \"×¢×•×œ×™× ×—×“×©×™×\",\n    \"×§×”×™×œ×”\",\n  ];\n\n  const moneySortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ××™×§×•×\",\n    \"×œ×¤×™ ×ª×—×•×\",\n    \"×œ×¤×™ ×ª××¨×™×š ×”×§××”\",\n    \"×œ×¤×™ ××¡×¤×¨ ×ª×•×¨××™×\",\n    \"×œ×¤×™ ×“×™×¨×•×’\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('ğŸ’° MoneyScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\"); // Only first filter\n    setSelectedSort(sorts?.[0] || \"\"); // Only first sort\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      setFilteredCharities(results);\n    } else {\n      // Otherwise, perform local filtering\n      const filtered = getFilteredCharities();\n      setFilteredCharities(filtered);\n    }\n  };\n\n  const handleDonate = () => {\n    if (!selectedRecipient || !amount) {\n      Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ × ××¢×Ÿ ×•×¡×›×•× ×œ×¤× ×™ ×”×ª×¨×•××”.');\n    } else {\n      Alert.alert(\n        '×ª×¨×•××” ×‘×•×¦×¢×”',\n        `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${amount} ×œ-${selectedRecipient}!`\n      );\n    }\n  };\n\n  // Open Bit app to donate to a specific phone with optional amount and note\n  const openBitDonation = async (phone: string, amountValue: number, note: string = '×ª×¨×•××” ×œ×§×”×™×œ×”') => {\n    try {\n      // Deep link patterns used by Bit app; try multiple known schemes\n      const encodedNote = encodeURIComponent(note);\n      const attempts = [\n        // iOS modern\n        `bit://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n        // Android possible\n        `com.poalim.bit://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n        // Generic\n        `bitapp://send?phone=${phone}&amount=${amountValue}&note=${encodedNote}`,\n      ];\n\n      for (const url of attempts) {\n        const supported = await Linking.canOpenURL(url);\n        if (supported) {\n          await Linking.openURL(url);\n          return;\n        }\n      }\n\n      // Fallbacks: try to open Bit app page or provide instruction\n      const appStoreLink = Platform.OS === 'ios'\n        ? 'https://apps.apple.com/il/app/bit/id1148052748'\n        : 'https://play.google.com/store/apps/details?id=com.poalim.bit';\n      await Linking.openURL(appStoreLink);\n    } catch (e) {\n      Alert.alert('Bit', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª Bit ×‘××›×©×™×¨ ×–×” ×›×¨×’×¢.');\n    }\n  };\n\n  const handleToggleMode = useCallback(() => {\n    setMode(!mode);\n    console.log('Mode toggled:', !mode ? '× ×–×§×§' : '×ª×•×¨×');\n  }, [mode]);\n\n  const handleSelectMenuItem = useCallback((option: string) => {\n    if (option === '×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”') {\n      setIsSavingsModalVisible(true);\n      return;\n    }\n    if (option === '×”×•×¨××•×ª ×§×‘×¢') {\n      setIsRecurringModalVisible(true);\n      return;\n    }\n    if (option === '×§×‘×œ×•×ª ×•×“×•×—×•×ª') {\n      setIsReceiptsModalVisible(true);\n      return;\n    }\n    // Default fallback\n    Alert.alert('×ª×¤×¨×™×˜', `× ×‘×—×¨: ${option}`);\n  }, []);\n\n  const openCharityModal = (charity: any, isOfferMode: boolean) => {\n    setSelectedCharityForModal(charity);\n    setCharityModalIsOfferMode(isOfferMode);\n    setCharityModalAmount(String(charity.minDonation || 50));\n    setIsCharityModalVisible(true);\n  };\n\n  const renderCharityCard = ({ item }: { item: any }) => (\n    <TouchableOpacity \n      style={localStyles.charityCard}\n      onPress={() => {\n        if (item._extUrl && typeof item._extUrl === 'string') {\n          Linking.openURL(item._extUrl).catch(() => Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'));\n          return;\n        }\n        openCharityModal(item, !!mode);\n      }}\n    >\n      <View style={localStyles.charityCardHeader}>\n        <Text style={localStyles.charityEmoji}>{item.image}</Text>\n        <View style={localStyles.charityRating}>\n          <Text style={localStyles.ratingText}>â­ {item.rating}</Text>\n        </View>\n      </View>\n      <Text style={localStyles.charityName}>{item.name}</Text>\n      <Text style={[localStyles.charityDescription, mode && localStyles.charityDescriptionCompact]} numberOfLines={mode ? 2 : 3}>\n        {item.description}\n      </Text>\n      <View style={localStyles.charityDetails}>\n        <Text style={localStyles.charityLocation}>ğŸ“ {item.location}</Text>\n        <Text style={localStyles.charityCategory}>ğŸ·ï¸ {item.category}</Text>\n      </View>\n      <View style={localStyles.charityStats}>\n        <Text style={localStyles.charityDonors}>ğŸ‘¥ {item.donors} ×ª×•×¨××™×</Text>\n        <Text style={localStyles.charityMinDonation}>ğŸ’° ×-â‚ª{item.minDonation}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const renderRecentDonationCard = ({ item }: { item: any }) => (\n    <TouchableOpacity style={localStyles.recentDonationCard}>\n      <View style={localStyles.recentDonationHeader}>\n        <Text style={localStyles.recentDonationCharity}>{item.charityName}</Text>\n        <Text style={localStyles.recentDonationAmount}>â‚ª{item.amount}</Text>\n      </View>\n      <View style={localStyles.recentDonationDetails}>\n        <Text style={localStyles.recentDonationDate}>ğŸ“… {item.date}</Text>\n        <Text style={localStyles.recentDonationCategory}>ğŸ·ï¸ {item.category}</Text>\n      </View>\n      <View style={localStyles.recentDonationStatus}>\n        <Text style={localStyles.recentDonationStatusText}>âœ… {item.status}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const FormHeader = () => (\n    <View>\n      {/* Mode toggle is now handled by HeaderComp */}\n\n      {mode ? (\n        <></>\n      ) : (\n        <View style={localStyles.formContainer}>\n          {/* Beneficiary mode - help search message */}\n          <View style={localStyles.searchHelpContainer}>\n            <Text style={localStyles.searchHelpTitle}>××—×¤×© ×¢×–×¨×” ×›×¡×¤×™×ª?</Text>\n            <Text style={localStyles.searchHelpText}>\n              ×”×©×ª××© ×‘×¡×¨×’×œ ×”×—×™×¤×•×© ×œ××¢×œ×” ×›×“×™ ×œ××¦×•× ×¢××•×ª×•×ª ×©×™×›×•×œ×•×ª ×œ×¢×–×•×¨ ×œ×š ××‘×—×™× ×” ×›×¡×¤×™×ª\n            </Text>\n            <View style={localStyles.searchHelpTipsContainer}>\n              <Text style={localStyles.searchHelpTipsTitle}>××™×š ×œ××¦×•× ×¢×–×¨×”:</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ×ª×—×•×: ×—×™× ×•×š, ×‘×¨×™××•×ª, ×¨×•×•×—×”</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ××™×§×•×: ×¢×™×¨, ××–×•×¨</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×—×¤×© ×œ×¤×™ ×¡×•×’ ×¢×–×¨×”: ××–×•×Ÿ, ×‘×™×’×•×“, ×˜×™×¤×•×œ ×¨×¤×•××™</Text>\n              <Text style={localStyles.searchHelpTip}>â€¢ ×¤× ×” ×™×©×™×¨×•×ª ×œ×¢××•×ª×” ×“×¨×š ×¤×¨×˜×™ ×”×§×©×¨</Text>\n            </View>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n  \n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      <HeaderComp\n        mode={mode}\n        menuOptions={menuOptions}\n        onToggleMode={handleToggleMode}\n        onSelectMenuItem={handleSelectMenuItem}\n        title=\"\"\n        placeholder={mode ? (t('donations:searchCharitiesForDonation') as string) : (t('donations:searchCharitiesForHelp') as string)}\n        filterOptions={moneyFilterOptions}\n        sortOptions={moneySortOptions}\n        searchData={combinedCharities}\n        onSearch={handleSearch}\n      />\n\n      {/* Quick Donate Section */}\n     \n      <ScrollContainer \n        style={localStyles.container} \n        contentStyle={localStyles.scrollContent}\n        showsVerticalScrollIndicator={false}\n      >\n        <FormHeader />\n\n        {mode ? (\n          // Donor mode - show charities for donation and donation history\n          <View style={localStyles.sectionsContainer}>\n        <View style={localStyles.quickDonatePanel}>\n          <Text style={localStyles.quickDonateTitle}>×ª×¨×•××” ×œ×§×”×™×œ×”</Text>\n          {(() => {\n            const numericAmount = Number(amount) || 0;\n            const isZeroAmount = numericAmount <= 0;\n            return (\n              <>\n                <DonationAmountSlider \n                  value={numericAmount}\n                  min={0}\n                  max={1000}\n                  step={5}\n                  onChange={(v) => setAmount(String(v))}\n                />\n                <View style={localStyles.quickDonateActionsRow}>\n                  <TouchableOpacity\n                    disabled={isZeroAmount}\n                    style={[localStyles.donateMainButton, isZeroAmount ? localStyles.donateMainButtonDisabled : localStyles.donateMainButtonActive]}\n                    onPress={() => Alert.alert('×ª×¨×•××” ×‘×•×¦×¢×”', `×ª×¨×•××” ×‘×¡×š â‚ª${numericAmount} ×œ××¢×Ÿ ×”×§×”×™×œ×”`)}\n                  >\n                    <Text style={[localStyles.donateMainButtonText, isZeroAmount ? localStyles.donateMainButtonTextDisabled : localStyles.donateMainButtonTextActive]}>×ª×¨×•×</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={localStyles.bitCornerButton}\n                    onPress={() => openPaymentApp(numericAmount)}\n                  >\n                    <Text style={localStyles.bitCornerButtonText}>bit</Text>\n                  </TouchableOpacity>\n                </View>\n              </>\n            );\n          })()}\n        </View>\n\n\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilter ? '×ª×•×¦××•×ª ×—×™×¤×•×©' : '×¢××•×ª×•×ª ××•××œ×¦×•×ª ×œ×ª×¨×•××”'}\n              </Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.charitiesScrollContainer}\n              >\n                {filteredCharities.map((charity) => (\n                  <View key={charity.id} style={[localStyles.charityCardWrapper, mode && localStyles.charityCardWrapperCompact]}>\n                    {renderCharityCard({ item: charity })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×”×™×¡×˜×•×¨×™×™×ª ×ª×¨×•××•×ª ×©×œ×š</Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.recentDonationsScrollContainer}\n              >\n                {getFilteredRecentDonations().map((donation) => (\n                  <View key={donation.id} style={localStyles.recentDonationCardWrapper}>\n                    {renderRecentDonationCard({ item: donation })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            {/* Bottom small stats */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×ª×¨××ª ×¢×“ ×¢×›×©×™×•', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'cash-outline' },\n                  { label: '× ×ª×¨× ×‘××¤×œ×™×§×¦×™×”', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'trending-up-outline' },\n                  { label: '×¢××•×ª×•×ª ×©× ×ª××›×•', value: new Set(getFilteredRecentDonations().map(d => d.charityName)).size, icon: 'business-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"money\" />\n            </View>\n          </View>\n        ) : (\n          // Beneficiary mode - show charities that can help\n          <View style={localStyles.sectionsContainer}>\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>\n                {searchQuery || selectedFilter ? '×¢××•×ª×•×ª ×©×™×›×•×œ×•×ª ×œ×¢×–×•×¨' : '×¢××•×ª×•×ª ××•××œ×¦×•×ª ×œ×¢×–×¨×”'}\n              </Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={localStyles.charitiesScrollContainer}\n              >\n                {getFilteredCharities().map((charity) => (\n                  <View key={charity.id} style={localStyles.charityCardWrapper}>\n                    {renderCharityCard({ item: charity })}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n\n            {/* Bottom small stats */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <DonationStatsFooter\n                stats={[\n                  { label: '×ª×¨××ª ×¢×“ ×¢×›×©×™×•', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}`, icon: 'cash-outline' },\n                  { label: '× ×ª×¨× ×‘××¤×œ×™×§×¦×™×”', value: `â‚ª${getFilteredRecentDonations().reduce((s, d) => s + (Number(d.amount) || 0), 0)}` , icon: 'trending-up-outline' },\n                  { label: '×¢××•×ª×•×ª ×©× ×ª××›×•', value: new Set(getFilteredRecentDonations().map(d => d.charityName)).size, icon: 'business-outline' },\n                ]}\n              />\n            </View>\n\n            {/* Add Links Section */}\n            <View style={[localStyles.section, localStyles.sectionPanel]}>\n              <Text style={localStyles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n              <AddLinkComponent category=\"money\" />\n            </View>\n          </View>\n        )}\n      </ScrollContainer>\n\n      {/* Charity Details Modal (centered, not full screen) */}\n      <Modal\n        animationType=\"fade\"\n        transparent\n        visible={isCharityModalVisible}\n        onRequestClose={() => setIsCharityModalVisible(false)}\n      >\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsCharityModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            {selectedCharityForModal && (\n              <>\n                <Text style={localStyles.modalTitle}>{selectedCharityForModal.name}</Text>\n                <Text style={localStyles.modalSubtitle}>ğŸ“ {selectedCharityForModal.location}   Â·   ğŸ·ï¸ {selectedCharityForModal.category}</Text>\n                <Text style={localStyles.modalDescription} numberOfLines={6}>{selectedCharityForModal.description}</Text>\n                {charityModalIsOfferMode ? (\n                  <>\n                    <Text style={localStyles.modalFieldLabel}>×‘×—×¨ ×¡×›×•× ×œ×ª×¨×•××”</Text>\n                    <TextInput\n                      style={[localStyles.input, localStyles.modalAmountInput]}\n                      keyboardType=\"number-pad\"\n                      value={charityModalAmount}\n                      onChangeText={(t) => setCharityModalAmount(t.replace(/[^0-9]/g, ''))}\n                      placeholder=\"50\"\n                    />\n                    <View style={localStyles.modalActionsRow}>\n                      <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => {\n                        setIsCharityModalVisible(false);\n                        Alert.alert('×ª×¨×•××” ×‘×•×¦×¢×”', `×ª×•×“×” ×¢×œ ×ª×¨×•××ª×š ×‘×¡×š â‚ª${charityModalAmount} ×œ-${selectedCharityForModal.name}!`);\n                      }}>\n                        <Text style={localStyles.modalPrimaryButtonText}>×ª×¨×•× ×¢×›×©×™×•</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        style={localStyles.bitButton}\n                        onPress={() => openPaymentApp(Number(charityModalAmount) || 0)}\n                      >\n                        <Text style={localStyles.bitButtonText}>×ª×¨×•× ×¢× Bit</Text>\n                      </TouchableOpacity>\n                    </View>\n                    <TouchableOpacity style={localStyles.contactButton} onPress={() => Alert.alert('×™×¦×™×¨×ª ×§×©×¨', '×¤×¨×˜×™ ×§×©×¨: 03-1234567 Â· info@example.org')}>\n                      <Text style={localStyles.contactButtonText}>×™×¦×™×¨×ª ×§×©×¨</Text>\n                    </TouchableOpacity>\n                  </>\n                ) : (\n                  <>\n                    <TouchableOpacity style={localStyles.contactButton} onPress={() => Alert.alert('×™×¦×™×¨×ª ×§×©×¨', '×¤×¨×˜×™ ×§×©×¨: 03-1234567 Â· info@example.org')}>\n                      <Text style={localStyles.contactButtonText}>×™×¦×™×¨×ª ×§×©×¨</Text>\n                    </TouchableOpacity>\n                  </>\n                )}\n              </>\n            )}\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Savings Modal */}\n      <Modal animationType=\"fade\" transparent visible={isSavingsModalVisible} onRequestClose={() => setIsSavingsModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsSavingsModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××”</Text>\n            <Text style={localStyles.modalDescription}>×§×‘×¢ ×™×¢×“ ×—×™×¡×›×•×Ÿ ×—×•×“×©×™ ×œ×ª×¨×•××” ×¢×ª×™×“×™×ª. ×‘×›×œ ×—×•×“×© × ×•×¡×™×£ ××ª ×”×¡×›×•× ×œ×§×•×¤×ª ×—×™×¡×›×•×Ÿ ×™×™×¢×•×“×™×ª.</Text>\n            <Text style={localStyles.modalFieldLabel}>×¡×›×•× ×—×•×“×©×™ (â‚ª)</Text>\n            <TextInput style={[localStyles.input, localStyles.modalAmountInput]} keyboardType=\"number-pad\" placeholder=\"50\" />\n            <Text style={localStyles.modalFieldLabel}>×™×¢×“ (×¢××•×ª×”/×§×˜×’×•×¨×™×”)</Text>\n            <TextInput style={[localStyles.input]} placeholder=\"×œ×“×•×’××”: ×—×™× ×•×š\" />\n            <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => { setIsSavingsModalVisible(false); Alert.alert('× ×©××¨', '×ª×•×›× ×™×ª ×—×™×¡×›×•×Ÿ ×œ×ª×¨×•××” × ×©××¨×”'); }}>\n              <Text style={localStyles.modalPrimaryButtonText}>×©××•×¨ ×—×™×¡×›×•×Ÿ</Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Recurring Donations Modal */}\n      <Modal animationType=\"fade\" transparent visible={isRecurringModalVisible} onRequestClose={() => setIsRecurringModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsRecurringModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×”×•×¨××•×ª ×§×‘×¢</Text>\n            <Text style={localStyles.modalDescription}>×§×‘×¢ ×ª×¨×•××” ×§×‘×•×¢×” (×—×•×“×©×™×ª/×©×‘×•×¢×™×ª) ×œ×¢××•×ª×” ×©×‘×—×¨×ª.</Text>\n            <Text style={localStyles.modalFieldLabel}>×¡×›×•× ×§×‘×•×¢ (â‚ª)</Text>\n            <TextInput style={[localStyles.input, localStyles.modalAmountInput]} keyboardType=\"number-pad\" placeholder=\"36\" />\n            <Text style={localStyles.modalFieldLabel}>×ª×“×™×¨×•×ª</Text>\n            <View style={localStyles.modalActionsRow}>\n              <TouchableOpacity style={localStyles.quickAmountButton}><Text style={localStyles.quickAmountButtonText}>×—×•×“×©×™</Text></TouchableOpacity>\n              <TouchableOpacity style={localStyles.quickAmountButton}><Text style={localStyles.quickAmountButtonText}>×©×‘×•×¢×™</Text></TouchableOpacity>\n            </View>\n            <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => { setIsRecurringModalVisible(false); Alert.alert('× ×©××¨', '×”×•×¨××ª ×”×§×‘×¢ × ×©××¨×”'); }}>\n              <Text style={localStyles.modalPrimaryButtonText}>×©××•×¨ ×”×•×¨××”</Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Receipts/Reports Modal */}\n      <Modal animationType=\"fade\" transparent visible={isReceiptsModalVisible} onRequestClose={() => setIsReceiptsModalVisible(false)}>\n        <TouchableOpacity style={localStyles.modalOverlay} activeOpacity={1} onPressOut={() => setIsReceiptsModalVisible(false)}>\n          <View style={localStyles.centerModalContent}>\n            <Text style={localStyles.modalTitle}>×§×‘×œ×•×ª ×•×“×•×—×•×ª</Text>\n            <Text style={localStyles.modalDescription}>×™×™×¦×•× ×§×‘×œ×•×ª ×©× ×ª×™×•×ª, ×¦×¤×™×™×” ×‘×¡×™×›×•× ×—×•×“×©×™ ×•×”×©×•×•××ª ×ª×¨×•××•×ª.</Text>\n            <View style={localStyles.modalActionsRow}>\n              <TouchableOpacity style={localStyles.modalPrimaryButton} onPress={() => Alert.alert('×§×‘×œ×•×ª', '×§×•×‘×¥ ×§×‘×œ×•×ª ×™×¨×•×›×– ×›××Ÿ')}>\n                <Text style={localStyles.modalPrimaryButtonText}>×™×™×¦× ×§×‘×œ×•×ª</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={localStyles.bitButton} onPress={() => Alert.alert('×“×•×— ×—×•×“×©×™', '× ×¡×›× ×¢×‘×•×¨×š ××ª ×”×—×•×“×© ×”××—×¨×•×Ÿ')}>\n                <Text style={localStyles.bitButtonText}>×“×•×— ×—×•×“×©×™</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n    safeArea: {\n      flex: 1,\n      backgroundColor: colors.backgroundTertiary,\n    },\n    container: {\n        flex: 1,\n        paddingHorizontal: 16,\n        paddingTop: 4,\n    },\n    scrollContent: {\n        paddingBottom: 100, // Bottom margin for screen\n    },\n    formContainer: {\n      backgroundColor: colors.pinkLight,\n      padding: 16,\n      borderRadius: 15,\n      marginBottom: 24,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n    },\n    inputContainer: {\n        marginBottom: 20,\n    },\n    label: {\n        fontSize: FontSizes.medium,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        textAlign: 'right',\n    },\n    input: {\n        backgroundColor: colors.white,\n        borderRadius: 10,\n        padding: 15,\n        fontSize: FontSizes.body,\n        textAlign: 'right',\n        color: colors.textPrimary,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    amountContainer: {\n        marginBottom: 25,\n    },\n    suggestedAmountsContainer: {\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginBottom: 15,\n    },\n    amountButton: {\n        backgroundColor: colors.white,\n        paddingVertical: 12,\n        paddingHorizontal: 20,\n        borderRadius: 20,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    selectedAmount: {\n        backgroundColor: colors.secondary,\n        borderColor: colors.secondary,\n    },\n    amountButtonText: {\n        fontSize: FontSizes.body,\n        fontWeight: '700',\n        color: colors.textPrimary,\n    },\n    selectedAmountText: {\n        color: colors.background,\n    },\n    customAmountInput: {\n        textAlign: 'center',\n    },\n    donateButton: {\n        // backgroundColor: colors.accent,\n        padding: 16,\n        borderRadius: 12,\n        alignItems: 'center',\n        marginTop: 10,\n    },\n    donateButtonText: {\n        color: colors.background,\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n    },\n    section: {\n        marginBottom: 10,\n    },\n    sectionTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'center',\n    },\n    sectionsContainer: {\n        flex: 1,\n        gap: 5,\n    },\n    sectionPanel: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        paddingVertical: 8,\n        paddingHorizontal: 8,\n    },\n    recommendationCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 15,\n        padding: 15,\n        marginRight: 15,\n        width: 150,\n        alignItems: 'center',\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    cardImage: {\n        width: 60,\n        height: 60,\n        borderRadius: 30,\n        marginBottom: 10,\n    },\n    cardTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n    },\n    cardDescription: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    historyCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 16,\n        marginBottom: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    historyContent: {\n        flex: 1,\n    },\n    historyTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 4,\n    },\n    historyAmount: {\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n        color: colors.accent,\n        marginBottom: 2,\n    },\n    historyDate: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    historyStatus: {\n        backgroundColor: colors.successLight,\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 8,\n    },\n    historyStatusText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: '600',\n    },\n    searchContainer: {\n        marginBottom: 20,\n    },\n    searchInput: {\n        marginBottom: 15,\n    },\n    searchButton: {\n        backgroundColor: colors.accent,\n        padding: 16,\n        borderRadius: 12,\n        alignItems: 'center',\n        marginTop: 10,\n    },\n    searchButtonText: {\n        color: colors.background,\n        fontSize: FontSizes.medium,\n        fontWeight: 'bold',\n    },\n    recommendationsContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        paddingVertical: 10,\n    },\n    historyContainer: {\n        paddingVertical: 5,\n    },\n    searchInfoContainer: {\n        alignItems: 'center',\n        paddingVertical: 20,\n    },\n    searchInfoTitle: {\n        fontSize: FontSizes.heading3,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        textAlign: 'center',\n    },\n    searchInfoText: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        textAlign: 'center',\n        marginBottom: 20,\n        lineHeight: 24,\n    },\n    searchTipsContainer: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n    },\n    searchTipsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'right',\n    },\n    searchTip: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 4,\n        textAlign: 'right',\n    },\n    // Charity Cards Styles\n    charitiesScrollContainer: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n    },\n    charityCardWrapper: {\n        marginRight: 12,\n        width: 280,\n    },\n    charityCardWrapperCompact: {\n        width: 220,\n    },\n    charityCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        minHeight: 200,\n    },\n    charityCardHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 8,\n    },\n    charityEmoji: {\n        fontSize: FontSizes.displayLarge,\n    },\n    charityRating: {\n        backgroundColor: colors.successLight,\n        paddingHorizontal: 8,\n        paddingVertical: 4,\n        borderRadius: 8,\n    },\n    ratingText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: 'bold',\n    },\n    charityName: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 6,\n        textAlign: 'right',\n    },\n    charityDescription: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 8,\n        textAlign: 'right',\n        lineHeight: 18,\n    },\n    charityDescriptionCompact: {\n        fontSize: FontSizes.small,\n        lineHeight: 16,\n    },\n    charityDetails: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 8,\n    },\n    charityLocation: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    charityCategory: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    charityStats: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginTop: 'auto',\n    },\n    charityDonors: {\n        fontSize: FontSizes.small,\n        color: colors.accent,\n        fontWeight: '600',\n    },\n    charityMinDonation: {\n        fontSize: FontSizes.small,\n        color: colors.accent,\n        fontWeight: '600',\n    },\n    // Recent Donations Styles\n    recentDonationsScrollContainer: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n    },\n    recentDonationCardWrapper: {\n        marginRight: 12,\n        width: 200,\n    },\n    recentDonationCard: {\n        backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        padding: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        minHeight: 120,\n    },\n    recentDonationHeader: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 6,\n    },\n    recentDonationCharity: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        textAlign: 'right',\n        flex: 1,\n    },\n    recentDonationAmount: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.accent,\n    },\n    recentDonationDetails: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 6,\n    },\n    recentDonationDate: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    recentDonationCategory: {\n        fontSize: FontSizes.small,\n        color: colors.textSecondary,\n    },\n    recentDonationStatus: {\n        alignItems: 'flex-end',\n    },\n    recentDonationStatusText: {\n        fontSize: FontSizes.small,\n        color: colors.success,\n        fontWeight: '600',\n    },\n    // Quick Donate Panel\n    quickDonatePanel: {\n      backgroundColor: colors.pinkLight,\n        borderRadius: 12,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n\n      marginHorizontal: 0,\n      paddingVertical: 10,\n      paddingHorizontal: 12,\n    },\n    bitCornerButton: {\n      position: 'absolute',\n      top: 8,\n      left: 8,\n      padding: 8,\n      paddingHorizontal: 10,\n      borderRadius: 999,\n      backgroundColor: 'rgba(33, 150, 243, 0.12)',\n      borderWidth: 1,\n      borderColor: 'rgba(33, 150, 243, 0.35)',\n      zIndex: 2,\n    },\n    bitCornerButtonText: {\n      color: 'rgba(33, 150, 243, 0.9)',\n      fontSize: FontSizes.small,\n      fontWeight: '700',\n    },\n    quickDonateTitle: {\n      fontSize: FontSizes.body,\n      fontWeight: '700',\n      color: 'rgba(44,44,44,0.85)',\n      textAlign: 'center',\n    },\n    quickDonateSubtitle: {\n      fontSize: FontSizes.small,\n      color: 'rgba(102,102,102,0.75)',\n      textAlign: 'center',\n      marginTop: 2,\n      marginBottom: 6,\n    },\n    quickDonateAmountsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'center',\n      gap: 8,\n      marginBottom: 6,\n    },\n    quickAmountButton: {\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      borderRadius: 999,\n      paddingHorizontal: 12,\n      paddingVertical: 6,\n    },\n    quickAmountButtonText: {\n      fontSize: FontSizes.small,\n      color: colors.textPrimary,\n      fontWeight: '600',\n      textAlign: 'center',\n    },\n    quickDonateActionsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'center',\n      gap: 8,\n      marginTop: 4,\n    },\n    // Slider styles (modern, subtle)\n    amountSliderContainer: {\n      marginTop: 6,\n      marginBottom: 8,\n      paddingHorizontal: 6,\n    },\n    sliderTrack: {\n      height: \"20%\",\n      borderRadius: 999,\n      backgroundColor: 'rgba(255, 255, 255, 0.85)',\n      borderWidth: 1,\n      borderColor: colors.border,\n      overflow: 'hidden',\n    },\n    sliderFill: {\n      backgroundColor: colors.secondary,\n    },\n    sliderThumb: {\n      // height: 30,\n      borderRadius: 14,\n      backgroundColor: colors.secondary,\n      borderWidth: 2,\n      borderColor: colors.pinkDeep,\n      shadowColor: colors.black,\n      shadowOpacity: 0.08,\n      shadowRadius: 4,\n      shadowOffset: { width: 0, height: 2 },\n      elevation: 2,\n    },\n    sliderThumbInner: {\n      width: 12,\n      height: 12,\n      borderRadius: 6,\n      backgroundColor: colors.pinkLight,\n      alignSelf: 'center',\n      // marginTop: 7,\n    },\n    amountDisplayRow: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      marginTop: 8,\n    },\n    amountDisplayText: {\n      fontSize: FontSizes.medium,\n      fontWeight: '700',\n      color: 'rgba(44,44,44,0.9)',\n    },\n    amountRangeRow: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      marginTop: 4,\n    },\n    amountRangeText: {\n      fontSize: FontSizes.caption,\n      color: 'rgba(102,102,102,0.7)',\n    },\n    // Donate CTA styles\n    donateMainButton: {\n      paddingVertical: 8,\n      paddingHorizontal: 16,\n      borderRadius: 999,\n      alignItems: 'center',\n      justifyContent: 'center',\n      minWidth: 88,\n    },\n    donateMainButtonActive: {\n      backgroundColor: 'rgba(255, 107, 157, 0.2)',\n      borderWidth: 1,\n      borderColor: 'rgba(255, 107, 157, 0.4)',\n    },\n    donateMainButtonDisabled: {\n      backgroundColor: 'rgba(0,0,0,0.05)',\n      borderWidth: 1,\n      borderColor: 'rgba(0,0,0,0.06)',\n    },\n    donateMainButtonText: {\n      fontSize: FontSizes.body,\n      fontWeight: '700',\n      textAlign: 'center',\n    },\n    donateMainButtonTextActive: {\n      color: 'rgba(44,44,44,0.9)',\n    },\n    donateMainButtonTextDisabled: {\n      color: 'rgba(0,0,0,0.3)',\n    },\n    // removed inline bitSmallButton in favor of corner button\n    // Search Help Styles\n    searchHelpContainer: {\n        alignItems: 'center',\n        paddingVertical: 20,\n    },\n    searchHelpTitle: {\n        fontSize: FontSizes.heading2,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 12,\n        textAlign: 'center',\n    },\n    searchHelpText: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        textAlign: 'center',\n        marginBottom: 20,\n        lineHeight: 24,\n    },\n    searchHelpTipsContainer: {\n        backgroundColor: colors.white,\n        borderRadius: 12,\n        padding: 16,\n        borderWidth: 1,\n        borderColor: colors.secondary,\n        width: '100%',\n    },\n    searchHelpTipsTitle: {\n        fontSize: FontSizes.body,\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginBottom: 10,\n        writingDirection: 'rtl',\n    },\n    searchHelpTip: {\n        fontSize: FontSizes.body,\n        color: colors.textSecondary,\n        marginBottom: 6,\n        writingDirection: 'rtl',\n        lineHeight: 20,\n    },\n    // Bottom small stats\n    bottomStatsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'space-between',\n      gap: 6,\n    },\n    statChip: {\n      flex: 1,\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      borderRadius: 10,\n      paddingVertical: 8,\n      paddingHorizontal: 10,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    statLabel: {\n      fontSize: FontSizes.caption,\n      color: colors.textSecondary,\n      marginBottom: 4,\n    },\n    statValue: {\n      fontSize: FontSizes.body,\n      color: colors.textPrimary,\n      fontWeight: 'bold',\n    },\n\n    // Modal shared styles\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0,0,0,0.4)',\n      alignItems: 'center',\n      justifyContent: 'center',\n      paddingHorizontal: 16,\n    },\n    centerModalContent: {\n      width: '85%',\n      maxHeight: '75%',\n      backgroundColor: colors.surface,\n      borderRadius: 12,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      padding: 14,\n    },\n    modalTitle: {\n      fontSize: FontSizes.heading3,\n      fontWeight: 'bold',\n      color: colors.textPrimary,\n      textAlign: 'center',\n    },\n    modalSubtitle: {\n      fontSize: FontSizes.small,\n      color: colors.textSecondary,\n      textAlign: 'center',\n      marginTop: 4,\n      marginBottom: 8,\n    },\n    modalDescription: {\n      fontSize: FontSizes.body,\n      color: colors.textSecondary,\n      textAlign: 'right',\n      marginBottom: 10,\n      lineHeight: 20,\n    },\n    modalFieldLabel: {\n      fontSize: FontSizes.small,\n      color: colors.textPrimary,\n      fontWeight: '600',\n      textAlign: 'right',\n      marginBottom: 6,\n      marginTop: 4,\n    },\n    modalAmountInput: {\n      textAlign: 'center',\n      marginBottom: 10,\n    },\n    modalActionsRow: {\n      flexDirection: 'row-reverse',\n      justifyContent: 'space-between',\n      gap: 8,\n      marginBottom: 8,\n    },\n    // Dedicated modal primary button styles to avoid duplicate keys\n    modalPrimaryButton: {\n      backgroundColor: colors.accent,\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n      flex: 1,\n    },\n    modalPrimaryButtonText: {\n      color: colors.background,\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n    bitButton: {\n      backgroundColor: 'transparent',\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n      flex: 1,\n      borderWidth: 1,\n      borderColor: colors.border,\n    },\n    bitButtonText: {\n      color: 'rgba(44,44,44,0.85)',\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n    contactButton: {\n      backgroundColor: colors.white,\n      borderWidth: 1,\n      borderColor: colors.secondary,\n      padding: 12,\n      borderRadius: 10,\n      alignItems: 'center',\n    },\n    contactButtonText: {\n      color: colors.textPrimary,\n      fontSize: FontSizes.medium,\n      fontWeight: 'bold',\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/MusicScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/PlantsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/RecipesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/RiddlesScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/SportsScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/SupportScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TechnologyScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TimeScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":113,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":113,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'searchQuery' is assigned a value but never used.","line":123,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedFilter' is assigned a value but never used.","line":124,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedSort' is assigned a value but never used.","line":125,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":125,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedTask' is assigned a value but never used.","line":127,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4001,4004],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4001,4004],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":128,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4816,4819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4816,4819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4981,4984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4981,4984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5955,5958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5955,5958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7112,7115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7112,7115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  StatusBar,\n  ScrollView,\n  TouchableOpacity,\n  Image,\n  Linking,\n  Alert,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport AddLinkComponent from '../components/AddLinkComponent';\n\n// Mock data for volunteer opportunities\nconst volunteerOpportunities = [\n  {\n    id: '1',\n    title: '×”×ª× ×“×‘×•×ª ×‘×‘×™×ª ××‘×•×ª',\n    organization: '×‘×™×ª ××‘×•×ª \"×‘×™×ª ×—×\"',\n    description: '×¢×–×¨×” ×œ×§×©×™×©×™×, ×©×™×—×”, ×œ×™×•×•×™ ×œ×˜×™×•×œ×™× ×•×¤×¢×™×œ×•×™×•×ª',\n    location: '×ª×œ ××‘×™×‘',\n    duration: '2-4 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 8,\n    needed: 12,\n    image: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400',\n    category: '×§×©×™×©×™×',\n  },\n  {\n    id: '2',\n    title: '×¢×–×¨×” ×‘×©×™×¢×•×¨×™ ×‘×™×ª',\n    organization: '××¨×›×– ×œ××™×“×” ×§×”×™×œ×ª×™',\n    description: '×¢×–×¨×” ×œ×™×œ×“×™× ×‘×©×™×¢×•×¨×™ ×‘×™×ª ×‘××ª××˜×™×§×” ×•×× ×’×œ×™×ª',\n    location: '×™×¨×•×©×œ×™×',\n    duration: '1-2 ×©×¢×•×ª',\n    frequency: '×¤×¢××™×™× ×‘×©×‘×•×¢',\n    volunteers: 15,\n    needed: 20,\n    image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400',\n    category: '×—×™× ×•×š',\n  },\n  {\n    id: '3',\n    title: '××™×¡×•×£ ××–×•×Ÿ ×œ× ×–×§×§×™×',\n    organization: '×œ×§×˜ ×™×©×¨××œ',\n    description: '××™×¡×•×£ ××–×•×Ÿ ×¢×•×“×£ ××—× ×•×™×•×ª ×•×—×œ×•×§×” ×œ× ×–×§×§×™×',\n    location: '×—×™×¤×”',\n    duration: '3-5 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 25,\n    needed: 30,\n    image: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400',\n    category: '×¨×•×•×—×”',\n  },\n  {\n    id: '4',\n    title: '×˜×™×¤×•×œ ×‘×—×™×•×ª ××—××“',\n    organization: '××§×œ×˜ ×—×™×•×ª \"×œ×‘ ×–×”×‘\"',\n    description: '×˜×™×¤×•×œ ×‘×—×™×•×ª ××—××“, ×˜×™×•×œ×™×, ×”××›×œ×” ×•× ×™×§×™×•×Ÿ',\n    location: '×‘××¨ ×©×‘×¢',\n    duration: '2-3 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×©×‘×•×¢',\n    volunteers: 12,\n    needed: 18,\n    image: 'https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=400',\n    category: '×—×™×•×ª',\n  },\n  {\n    id: '5',\n    title: '×¢×–×¨×” ×‘×¤×¨×•×™×§×˜×™× ×§×”×™×œ×ª×™×™×',\n    organization: '×§×”×™×œ×” ×™×¨×•×§×”',\n    description: '×¢×–×¨×” ×‘×¤×¨×•×™×§×˜×™× ×™×¨×•×§×™×, × ×˜×™×¢×•×ª ×•× ×™×§×™×•×Ÿ',\n    location: '××¨×™××œ',\n    duration: '4-6 ×©×¢×•×ª',\n    frequency: '×¤×¢× ×‘×—×•×“×©',\n    volunteers: 40,\n    needed: 50,\n    image: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400',\n    category: '×¡×‘×™×‘×”',\n  },\n  {\n    id: '6',\n    title: '×œ×™×•×•×™ ×—×•×œ×™×',\n    organization: '×‘×™×ª ×—×•×œ×™× \"×©×¢×¨×™ ×¦×“×§\"',\n    description: '×œ×™×•×•×™ ×—×•×œ×™× ×œ×‘×“×™×§×•×ª, ×©×™×—×” ×•×¢×–×¨×” ×›×œ×œ×™×ª',\n    location: '×™×¨×•×©×œ×™×',\n    duration: '3-4 ×©×¢×•×ª',\n    frequency: '×¤×¢××™×™× ×‘×©×‘×•×¢',\n    volunteers: 20,\n    needed: 25,\n    image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400',\n    category: '×‘×¨×™××•×ª',\n  },\n];\n\nexport default function TimeScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n  \n  const { selectedUser, isRealAuth } = useUser();\n  \n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: true = offerer (wants to volunteer), false = seeker (needs volunteers)\n  // URL mode: 'offer' = true, 'search' = false\n  // Default is search mode (false)\n  const initialMode = routeParams?.mode === 'offer' ? true : false;\n  const [mode, setMode] = useState(initialMode);\n  \n  const [selectedCategory, setSelectedCategory] = useState<string>('×›×œ ×”×§×˜×’×•×¨×™×•×ª');\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilter, setSelectedFilter] = useState(\"\");\n  const [selectedSort, setSelectedSort] = useState(\"\");\n  const [filteredOpportunities, setFilteredOpportunities] = useState(volunteerOpportunities);\n  const [selectedTask, setSelectedTask] = useState<any>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'offer' ? true : false;\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'offer' : 'search';\n    const currentMode = routeParams?.mode;\n    \n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n    \n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('â° TimeScreen - Screen focused, refreshing data...');\n      // Reset form when returning to screen\n      setSelectedTask(null);\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  const categories = ['×›×œ ×”×§×˜×’×•×¨×™×•×ª', '×§×©×™×©×™×', '×—×™× ×•×š', '×¨×•×•×—×”', '×—×™×•×ª', '×¡×‘×™×‘×”', '×‘×¨×™××•×ª'];\n  \n  // Filter and sort options for time screen\n  const timeFilterOptions = [\n    \"×§×©×™×©×™×\",\n    \"×—×™× ×•×š\", \n    \"×¨×•×•×—×”\",\n    \"×—×™×•×ª\",\n    \"×¡×‘×™×‘×”\",\n    \"×‘×¨×™××•×ª\",\n    \"× ×•×¢×¨\",\n    \"×§×”×™×œ×”\",\n    \"×¡×¤×•×¨×˜\",\n    \"×ª×¨×‘×•×ª\",\n    \"××–×•×Ÿ\",\n    \"×‘×™×’×•×“\"\n  ];\n\n  const timeSortOptions = [\n    \"××œ×¤×‘×™×ª×™\",\n    \"×œ×¤×™ ××™×§×•×\",\n    \"×œ×¤×™ ×ª×—×•×\",\n    \"×œ×¤×™ ××©×š ×–××Ÿ\",\n    \"×œ×¤×™ ×ª×“×™×¨×•×ª\",\n    \"×œ×¤×™ ××¡×¤×¨ ××ª× ×“×‘×™× × ×“×¨×©\",\n    \"×œ×¤×™ ×¨×œ×•×•× ×˜×™×•×ª\",\n  ];\n\n  const handleVolunteerPress = (opportunity: any) => {\n    console.log('Volunteer opportunity pressed:', opportunity.title);\n    Alert.alert(\n      '×”×¦×˜×¨×¤×•×ª ×œ×”×ª× ×“×‘×•×ª',\n      `×”×× ×ª×¨×¦×” ×œ×”×¦×˜×¨×£ ×œ×”×ª× ×“×‘×•×ª \"${opportunity.title}\"?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        { \n          text: '×”×¦×˜×¨×£', \n          onPress: () => {\n            Alert.alert(\n              '×”×¦×œ×—×”!',\n              '×”×¦×˜×¨×¤×ª ×œ×”×ª× ×“×‘×•×ª ×‘×”×¦×œ×—×”. × ×¦×™×’ ×”××¨×’×•×Ÿ ×™×¦×•×¨ ××™×ª×š ×§×©×¨ ×‘×§×¨×•×‘.',\n              [{ text: '××™×©×•×¨', style: 'default' }]\n            );\n          }\n        }\n      ]\n    );\n  };\n\n  const handleEmergencyLink = async () => {\n    console.log('Emergency volunteer link pressed');\n    const url = 'https://www.volunteer.gov.il';\n    try {\n      const supported = await Linking.canOpenURL(url);\n      if (supported) {\n        await Linking.openURL(url);\n      } else {\n        Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨');\n      }\n    } catch (error) {\n      console.error('Error opening link:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×¤×ª×™×—×ª ×”×§×™×©×•×¨');\n    }\n  };\n\n  // Function to handle search results from HeaderComp\n  const handleSearch = (query: string, filters?: string[], sorts?: string[], results?: any[]) => {\n    console.log('â° TimeScreen - Search received:', { \n      query, \n      filters: filters || [], \n      sorts: sorts || [], \n      resultsCount: results?.length || 0 \n    });\n    \n    // Update state with search results\n    setSearchQuery(query);\n    setSelectedFilter(filters?.[0] || \"\");\n    setSelectedSort(sorts?.[0] || \"\");\n    \n    // If results are provided from SearchBar, use them\n    if (results && results.length > 0) {\n      setFilteredOpportunities(results);\n    } else {\n      // Otherwise, perform local filtering\n      let filtered = [...volunteerOpportunities];\n      \n      // Filter by search query\n      if (query.trim() !== \"\") {\n        filtered = filtered.filter(opp =>\n          opp.title.toLowerCase().includes(query.toLowerCase()) ||\n          opp.organization.toLowerCase().includes(query.toLowerCase()) ||\n          opp.description.toLowerCase().includes(query.toLowerCase()) ||\n          opp.location.toLowerCase().includes(query.toLowerCase()) ||\n          opp.category.toLowerCase().includes(query.toLowerCase())\n        );\n      }\n      \n      // Filter by category\n      if (selectedCategory !== '×›×œ ×”×§×˜×’×•×¨×™×•×ª') {\n        filtered = filtered.filter(opp => opp.category === selectedCategory);\n      }\n      \n      setFilteredOpportunities(filtered);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n      \n      <HeaderComp\n        mode={mode}\n        menuOptions={['×”×’×“×¨×•×ª', '×¢×–×¨×”', '×¦×•×¨ ×§×©×¨']}\n        onToggleMode={() => setMode(!mode)}\n        onSelectMenuItem={(option: string) => console.log('Menu selected:', option)}\n        title=\"\"\n        placeholder=\"×—×¤×© ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª...\"\n        filterOptions={timeFilterOptions}\n        sortOptions={timeSortOptions}\n         searchData={isRealAuth ? [] : volunteerOpportunities}\n        onSearch={handleSearch}\n      />\n\n       <ScrollView style={styles.content} showsVerticalScrollIndicator={false} nestedScrollEnabled>\n        {/* Emergency Volunteer Link */}\n        <View style={styles.emergencySection}>\n          <TouchableOpacity\n            style={styles.emergencyCard}\n            onPress={handleEmergencyLink}\n          >\n            <View style={styles.emergencyContent}>\n              <Ionicons name=\"flash\" size={32} color={colors.accent} />\n              <View style={styles.emergencyText}>\n                <Text style={styles.emergencyTitle}>×”×ª× ×“×‘×•×ª ×“×—×•×¤×”</Text>\n                <Text style={styles.emergencyDescription}>\n                  ××¦× ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª ×“×—×•×¤×•×ª ×‘××–×•×¨ ×©×œ×š\n                </Text>\n              </View>\n              <Ionicons name=\"arrow-forward\" size={24} color={colors.accent} />\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Categories Filter */}\n        <View style={styles.categoriesSection}>\n          <Text style={styles.sectionTitle}>×§×˜×’×•×¨×™×•×ª</Text>\n          <ScrollView \n            horizontal \n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={styles.categoriesScroll}\n          >\n            {categories.map((category) => (\n              <TouchableOpacity\n                key={category}\n                style={[\n                  styles.categoryButton,\n                  selectedCategory === category && styles.categoryButtonActive\n                ]}\n                onPress={() => setSelectedCategory(category)}\n              >\n                <Text style={[\n                  styles.categoryButtonText,\n                  selectedCategory === category && styles.categoryButtonTextActive\n                ]}>\n                  {category}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n\n        {/* Volunteer Opportunities */}\n        <View style={styles.opportunitiesSection}>\n          <Text style={styles.sectionTitle}>×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª</Text>\n          <Text style={styles.sectionDescription}>\n            ××¦× ×”×–×“×× ×•×™×•×ª ×”×ª× ×“×‘×•×ª ××ª××™××•×ª ×œ×š\n          </Text>\n          \n          <View style={styles.opportunitiesGrid}>\n             {(isRealAuth ? [] : filteredOpportunities).map((opportunity) => (\n              <TouchableOpacity\n                key={opportunity.id}\n                style={styles.opportunityCard}\n                onPress={() => handleVolunteerPress(opportunity)}\n              >\n                <Image source={{ uri: opportunity.image }} style={styles.opportunityImage} />\n                <View style={styles.opportunityContent}>\n                  <View style={styles.opportunityHeader}>\n                    <Text style={styles.opportunityTitle}>{opportunity.title}</Text>\n                    <View style={styles.opportunityCategory}>\n                      <Text style={styles.opportunityCategoryText}>{opportunity.category}</Text>\n                    </View>\n                  </View>\n                  \n                  <Text style={styles.opportunityOrganization}>{opportunity.organization}</Text>\n                  <Text style={styles.opportunityDescription}>{opportunity.description}</Text>\n                  <TouchableOpacity\n                    style={styles.visitButton}\n                    onPress={() => Linking.openURL('https://www.ruachtova.org.il/').catch(() => Alert.alert('×©×’×™××”','×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'))}\n                  >\n                    <Text style={styles.visitButtonText}>××¦× ×”×ª× ×“×‘×•×™×•×ª ×“×•××•×ª</Text>\n                  </TouchableOpacity>\n                  \n                  <View style={styles.opportunityDetails}>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"location\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.location}</Text>\n                    </View>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"time\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.duration}</Text>\n                    </View>\n                    <View style={styles.detailItem}>\n                      <Ionicons name=\"calendar\" size={16} color={colors.textSecondary} />\n                      <Text style={styles.detailText}>{opportunity.frequency}</Text>\n                    </View>\n                  </View>\n                  \n                  <View style={styles.volunteersInfo}>\n                    <View style={styles.volunteersProgress}>\n                      <View style={styles.progressBar}>\n                        <View \n                          style={[\n                            styles.progressFill, \n                            { width: `${(opportunity.volunteers / opportunity.needed) * 100}%` }\n                          ]} \n                        />\n                      </View>\n                      <Text style={styles.volunteersText}>\n                        {opportunity.volunteers}/{opportunity.needed} ××ª× ×“×‘×™×\n                      </Text>\n                    </View>\n                    <TouchableOpacity style={styles.joinButton}>\n                      <Text style={styles.joinButtonText}>×”×¦×˜×¨×£</Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Stats Section */}\n        <View style={styles.statsSection}>\n          <DonationStatsFooter\n            stats={[\n              { label: '××ª× ×“×‘×™× ×¤×¢×™×œ×™×', value: 2847, icon: 'people-outline' },\n              { label: '×©×¢×•×ª ×”×ª× ×“×‘×•×ª', value: 15234, icon: 'time-outline' },\n              { label: '××¨×’×•× ×™× ×¤×¢×™×œ×™×', value: 156, icon: 'heart-outline' },\n            ]}\n          />\n        </View>\n\n        {/* Add Links Section */}\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>×§×™×©×•×¨×™× ×©×™××•×©×™×™×</Text>\n          <AddLinkComponent category=\"time\" />\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n\n  content: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingTop: 16,\n  },\n  emergencySection: {\n    marginTop: 20,\n    marginBottom: 20,\n  },\n  emergencyCard: {\n    backgroundColor: colors.warningLight,\n    borderRadius: 15,\n    padding: 20,\n    borderWidth: 2,\n    borderColor: colors.accent,\n  },\n  emergencyContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  emergencyText: {\n    flex: 1,\n    marginLeft: 15,\n  },\n  emergencyTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.accent,\n    marginBottom: 4,\n  },\n  emergencyDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  categoriesSection: {\n    marginBottom: 20,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 15,\n  },\n  categoriesScroll: {\n    paddingRight: 20,\n  },\n  categoryButton: {\n    backgroundColor: colors.background,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 20,\n    marginRight: 10,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  categoryButtonActive: {\n    backgroundColor: colors.secondary,\n    borderColor: colors.secondary,\n  },\n  categoryButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n  },\n  categoryButtonTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  opportunitiesSection: {\n    marginBottom: 30,\n  },\n  sectionDescription: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 20,\n  },\n  opportunitiesGrid: {\n    gap: 15,\n  },\n  opportunityCard: {\n    backgroundColor: colors.background,\n    borderRadius: 15,\n    overflow: 'hidden',\n    boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    elevation: 3,\n  },\n  opportunityImage: {\n    width: '100%',\n    height: 150,\n  },\n  opportunityContent: {\n    padding: 15,\n  },\n  visitButton: {\n    marginTop: 6,\n    alignSelf: 'flex-start',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.secondary,\n    borderRadius: 999,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n  },\n  visitButtonText: {\n    color: colors.textPrimary,\n    fontSize: FontSizes.caption,\n    fontWeight: '600',\n  },\n  opportunityHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  opportunityTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  opportunityCategory: {\n    backgroundColor: colors.pinkLight,\n    borderRadius: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    marginLeft: 8,\n  },\n  opportunityCategoryText: {\n    color: colors.pinkDeep,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  opportunityOrganization: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 4,\n  },\n  opportunityDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 8,\n  },\n  opportunityDetails: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  detailText: {\n    fontSize: FontSizes.small,\n    color: colors.textTertiary,\n    marginLeft: 4,\n  },\n  volunteersInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  volunteersProgress: {\n    flex: 1,\n    marginRight: 8,\n  },\n  progressBar: {\n    height: 6,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: 3,\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: 6,\n    backgroundColor: colors.accent,\n    borderRadius: 3,\n  },\n  volunteersText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  joinButton: {\n    backgroundColor: colors.accent,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    borderRadius: 20,\n  },\n  joinButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n  },\n  statsSection: {\n    marginBottom: 30,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  statCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    elevation: 2,\n  },\n  statNumber: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.accent,\n    marginTop: 8,\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/TrumpScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ScrollView' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ScrollView"},"fix":{"range":[127,141],"text":""},"desc":"Remove unused variable \"ScrollView\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RideCard' is defined but never used.","line":31,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"RideCard"},"fix":{"range":[1116,1169],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RideHistoryCard' is defined but never used.","line":32,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"RideHistoryCard"},"fix":{"range":[1169,1236],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reason' is defined but never used.","line":76,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3790,3793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3790,3793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3951,3954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3951,3954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tabBarHeight' is assigned a value but never used.","line":113,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":113,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4382,4385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4382,4385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'filteredRides' is assigned a value but never used.","line":123,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4499,4502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4499,4502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'recentRides' is assigned a value but never used.","line":124,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4610,4613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4610,4613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5005,5008],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5005,5008],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'needToPay' is assigned a value but never used.","line":250,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setNeedToPay' is assigned a value but never used.","line":250,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10411,10414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10411,10414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10527,10530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10527,10530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":392,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":392,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15572,15575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15572,15575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":425,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":425,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16945,16948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16945,16948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":431,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":431,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17214,17217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17214,17217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":435,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":435,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":445,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17589,17592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17589,17592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":464,"column":5,"endLine":464,"endColumn":60,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":565,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":565,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22243,22246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22243,22246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDeleteRide' is assigned a value but never used.","line":770,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":770,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":770,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":770,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30118,30121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30118,30121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleRestoreRide' is assigned a value but never used.","line":794,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":794,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":794,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":794,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30954,30957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30954,30957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSelectRide' is assigned a value but never used.","line":817,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":817,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":817,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":817,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31890,31893],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31890,31893],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardWidth' is assigned a value but never used.","line":837,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":837,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSelectRideOld' is assigned a value but never used.","line":883,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":883,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":883,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":883,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34426,34429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34426,34429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  Alert,\n  ScrollView,\n  FlatList,\n  Dimensions,\n  Platform,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useTranslation } from 'react-i18next';\nimport * as Location from 'expo-location';\n\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport DonationStatsFooter from '../components/DonationStatsFooter';\nimport ItemDetailsModal from '../components/ItemDetailsModal';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport ScrollContainer from '../components/ScrollContainer';\nimport AddLinkComponent from '../components/AddLinkComponent';\nimport { useToast } from '../utils/toastService';\nimport { getScreenInfo, BREAKPOINTS, isMobileWeb } from '../globals/responsive';\n\n// New Modular Components\nimport RideCard from '../components/rides/RideCard';\nimport RideHistoryCard from '../components/rides/RideHistoryCard';\nimport RideOfferForm from '../components/rides/RideOfferForm';\nimport VerticalGridSlider from '../components/VerticalGridSlider';\nimport { postsService } from '../utils/postsService';\nimport PostReelItem from '../components/Feed/PostReelItem';\nimport { usePostMenu } from '../hooks/usePostMenu';\nimport OptionsModal from '../components/Feed/OptionsModal';\nimport ReportPostModal from '../components/Feed/ReportPostModal';\nimport { FeedItem } from '../types/feed';\n\nexport default function TrumpScreen({\n  navigation,\n}: {\n  navigation: NavigationProp<ParamListBase>;\n}) {\n  console.log('ğŸš— TrumpScreen - Refactored Component Rendered');\n\n  const { ToastComponent } = useToast();\n  const route = useRoute();\n  const routeParams = route.params as { mode?: string } | undefined;\n\n  // Get initial mode from URL (deep link) or default to search mode (××—×¤×©)\n  // mode: false = Offer Mode (Driver/×¤×¨×¡×•×), true = Search Mode (Passenger/×—×™×¤×•×©)\n  // URL mode: 'offer' = false, 'search' = true\n  // Default is search mode (true)\n  const initialMode = routeParams?.mode === 'offer' ? false : true;\n\n  const [mode, setMode] = useState(initialMode); // false = Offer Mode (Driver/×¤×¨×¡×•×), true = Search Mode (Passenger/×—×™×¤×•×©)\n  const { t } = useTranslation(['donations', 'common', 'trump', 'search']);\n\n  // Post menu hook\n  const {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  } = usePostMenu();\n\n  // Report submit handler\n  const handleReportSubmit = async (reason: string) => {\n    if (!selectedPostForReport) return;\n    // Report functionality can be implemented here if needed\n    setReportModalVisible(false);\n    setSelectedPostForReport(null);\n  };\n\n  // Update mode when route params change (e.g., from deep link)\n  useEffect(() => {\n    if (routeParams?.mode && routeParams.mode !== 'undefined' && routeParams.mode !== 'null') {\n      const newMode = routeParams.mode === 'search';\n      if (newMode !== mode) {\n        setMode(newMode);\n      }\n    }\n  }, [routeParams?.mode]);\n\n  // Update URL when mode changes (toggle button pressed) or when screen loads without mode\n  useEffect(() => {\n    const newMode = mode ? 'search' : 'offer';\n    const currentMode = routeParams?.mode;\n\n    // If no mode in URL, set it to search (default)\n    if (!currentMode || currentMode === 'undefined' || currentMode === 'null') {\n      // Set initial mode to search in URL\n      (navigation as any).setParams({ mode: 'search' });\n      return;\n    }\n\n    // Only update URL if mode actually changed\n    if (newMode !== currentMode) {\n      (navigation as any).setParams({ mode: newMode });\n    }\n  }, [mode, navigation, routeParams?.mode]);\n\n  // === Shared State ===\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // === Data State ===\n  const [allRides, setAllRides] = useState<any[]>([]); // Active rides for search (legacy, for offer mode)\n  const [filteredRides, setFilteredRides] = useState<any[]>([]); // Filtered active rides (legacy, for offer mode)\n  const [recentRides, setRecentRides] = useState<any[]>([]); // User's Published History (legacy)\n  // Posts state for search mode\n  const [allPosts, setAllPosts] = useState<FeedItem[]>([]);\n  const [filteredPosts, setFilteredPosts] = useState<FeedItem[]>([]);\n  // Posts state for offer mode history\n  const [recentPosts, setRecentPosts] = useState<FeedItem[]>([]);\n\n  // === Modal State ===\n  const [selectedRide, setSelectedRide] = useState<any | null>(null);\n  const [showRideModal, setShowRideModal] = useState(false);\n\n  // === Search Mode State ===\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedSorts, setSelectedSorts] = useState<string[]>([]);\n\n  // === Offer Mode Form State ===\n  const [toLocation, setToLocation] = useState(\"\");\n  const [fromLocation, setFromLocation] = useState(\"\");\n  const [useCurrentLocation, setUseCurrentLocation] = useState(true);\n  const [detectedAddress, setDetectedAddress] = useState<string>(\"\");\n  const [isLocating, setIsLocating] = useState(false);\n  const [isLocationError, setIsLocationError] = useState(false);\n\n  // Location Fetching Effect - Only run if mounted\n  useEffect(() => {\n    if (!isMounted) return;\n\n    let isMountedLocal = true;\n\n    const getLocation = async () => {\n      if (!useCurrentLocation) {\n        setDetectedAddress(\"\");\n        setIsLocationError(false);\n        return;\n      }\n\n      setIsLocating(true);\n      setIsLocationError(false);\n      try {\n        const { status } = await Location.requestForegroundPermissionsAsync();\n        if (status !== 'granted') {\n          if (isMountedLocal) {\n            setDetectedAddress(t('trump:errors.locationPermissionDenied') || \"Permission denied\");\n            setIsLocationError(true);\n            setIsLocating(false);\n          }\n          return;\n        }\n\n        const location = await Location.getCurrentPositionAsync({ accuracy: Location.Accuracy.High });\n        const reverseGeocode = await Location.reverseGeocodeAsync({\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude\n        });\n\n        console.log('ğŸ“ Reverse Geocode Result:', JSON.stringify(reverseGeocode, null, 2));\n\n        if (isMountedLocal && reverseGeocode && reverseGeocode.length > 0) {\n          const addr = reverseGeocode[0];\n\n          // Construct a robust address string\n          // 1. Street + Number\n          const streetPart = [addr.street, addr.streetNumber].filter(Boolean).join(' ');\n\n          // 2. Fallback to 'name' if street is missing (often 'name' contains the PoI or street equivalent)\n          const firstPart = streetPart || addr.name || '';\n\n          // 3. City hierarchy: City -> Subregion -> District -> Region\n          const cityPart = addr.city || addr.subregion || addr.district || addr.region || '';\n\n          // 4. Combine\n          let formattedAddress = [firstPart, cityPart].filter(Boolean).join(', ');\n\n          // 5. Final fallback if empty\n          if (!formattedAddress.trim()) {\n            formattedAddress = `${t('trump:near')} ${location.coords.latitude.toFixed(4)}, ${location.coords.longitude.toFixed(4)}`;\n          }\n\n          setDetectedAddress(formattedAddress);\n          setIsLocationError(false);\n        } else {\n          if (isMountedLocal) {\n            setDetectedAddress(t('trump:errors.locationFetchFailed') || \"Address not found\");\n            setIsLocationError(true);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching location:\", error);\n        if (isMountedLocal) {\n          setDetectedAddress(t('trump:errors.locationFetchFailed') || \"Location unavailable\");\n          setIsLocationError(true);\n        }\n      } finally {\n        if (isMountedLocal) setIsLocating(false);\n      }\n    };\n\n    if (useCurrentLocation) {\n      getLocation();\n    }\n\n    return () => { isMountedLocal = false; };\n  }, [useCurrentLocation, t, isMounted]);\n\n  // Advanced Scheduling State\n  const [immediateDeparture, setImmediateDeparture] = useState(true); // 1. Immediate?\n  const [departureTime, setDepartureTime] = useState(\"\");           // 2. If not, what time?\n  const [leavingToday, setLeavingToday] = useState(true);           // 3. If time set, is it today?\n  const [rideDate, setRideDate] = useState<Date>(new Date());       // 4. If not today, what date?\n  const [isRecurring, setIsRecurring] = useState(false);            // 5. Recurring?\n  const [recurrenceFrequency, setRecurrenceFrequency] = useState(1);\n  const [recurrenceUnit, setRecurrenceUnit] = useState<'day' | 'week' | 'month' | null>(null);\n\n  // Ensure rideDate is always valid\n  const handleDateChange = (date: Date) => {\n    if (date && date instanceof Date && !isNaN(date.getTime())) {\n      setRideDate(date);\n    } else {\n      setRideDate(new Date());\n    }\n  };\n\n  // Other Offer Details\n  const [seats, setSeats] = useState(3);\n  const [price, setPrice] = useState(\"0\");\n  const [needToPay, setNeedToPay] = useState(false);\n  const [selectedFormTags, setSelectedFormTags] = useState<string[]>([]);\n\n  // Static Options (Now Translated Keys mapped to Labels)\n  // trump:filters is now an object with keys like {noCostSharing: \"...\", noSmoking: \"...\", ...}\n  const filtersObj = (t('trump:filters', { returnObjects: true }) as Record<string, string>) || {};\n  // Use keys instead of values so SearchBar can translate them properly\n  const trumpFilterOptions = Object.keys(filtersObj);\n\n  const trumpSortOptions = (t('trump:sorts', { returnObjects: true }) as unknown as string[]) || [];\n\n  // Inside render / HeaderComp prop:\n  // placeholder={mode ? t('trump:ui.searchPlaceholder.offer') : t('trump:ui.searchPlaceholder.seek')}\n\n  // Helper to map API post to FeedItem (same as useFeedData.mapPostToItem)\n  const mapPostToFeedItem = (post: any): FeedItem => {\n    // For ride posts, extract ride-specific data (same logic as useFeedData)\n    let rideData: any = {};\n    const formatRideTime = (dateIso: string) => {\n      if (!dateIso) return { time: '', date: '' };\n      const dep = new Date(dateIso);\n      if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n      const hours = dep.getHours().toString().padStart(2, '0');\n      const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n      const day = dep.getDate().toString().padStart(2, '0');\n      const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n      const year = dep.getFullYear();\n\n      return {\n        time: `${hours}:${minutes}`,\n        date: `${day}.${month}.${year}`\n      };\n    };\n\n    // 1. Try ride_data from DB Join (same as useFeedData)\n    if (post.ride_data) {\n      const rd = post.ride_data;\n      const { time, date } = formatRideTime(rd.departure_time);\n\n      rideData = {\n        from: typeof rd.from_location === 'string' ? rd.from_location : (rd.from_location?.name || rd.from_location?.city || ''),\n        to: typeof rd.to_location === 'string' ? rd.to_location : (rd.to_location?.name || rd.to_location?.city || ''),\n        seats: rd.available_seats || 0,\n        price: rd.price_per_seat || 0,\n        time,\n        date\n      };\n    }\n    // 2. Fallback to metadata (same as useFeedData)\n    else if ((post.post_type === 'ride' || post.post_type === 'ride_offered') && post.metadata) {\n      const meta = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n      const r = meta.ride || meta;\n\n      // Check departure_time (schema) or time/date (legacy/manual)\n      let timeStr = r.time || '';\n      let dateStr = r.date || '';\n\n      if (r.departure_time) {\n        const formatted = formatRideTime(r.departure_time);\n        if (formatted.time) timeStr = formatted.time;\n        if (formatted.date) dateStr = formatted.date;\n      }\n\n      rideData = {\n        from: typeof r.from_location === 'string' ? r.from_location : (r.from_location?.name || r.from_location?.city || r.from || ''),\n        to: typeof r.to_location === 'string' ? r.to_location : (r.to_location?.name || r.to_location?.city || r.to || ''),\n        seats: r.available_seats || r.seats || 0,\n        price: r.price_per_seat || r.price || 0,\n        time: timeStr,\n        date: dateStr\n      };\n    }\n\n    // Ensure user is always defined (same format as useFeedData)\n    const author = post.author || {};\n    const userId = author.id || post.author_id || 'unknown';\n    const userName = author.name || 'common.unknownUser';\n    const userAvatar = author.avatar_url || undefined;\n\n    return {\n      id: post.id,\n      type: post.post_type || 'post',\n      subtype: post.post_type, // Same as useFeedData - e.g. 'ride', 'ride_offered'\n      title: post.title || 'post.noTitle', // Same as useFeedData\n      description: post.description || '',\n      thumbnail: post.images && post.images.length > 0 ? post.images[0] : null, // Same as useFeedData\n      user: {\n        id: userId,\n        name: userName,\n        avatar: userAvatar,\n      },\n      likes: parseInt(post.likes || '0'),\n      comments: parseInt(post.comments || '0'),\n      isLiked: post.is_liked || false,\n      timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n        ? new Date(post.created_at).toISOString()\n        : new Date().toISOString(),\n      // Add ride-specific fields if this is a ride post (same as useFeedData)\n      ...rideData\n    };\n  };\n\n  // --- 1. Data Loading ---\n  const loadRides = useCallback(async (includePastOverride?: boolean) => {\n    try {\n      const uid = selectedUser?.id || 'guest';\n      console.log('ğŸ”„ Loading rides/posts for user:', uid, 'mode:', mode);\n\n      if (mode) {\n        // Search mode - load posts\n        console.log('ğŸ” ××¦×‘ ××—×¤×© - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×˜×¨××¤×™×');\n        try {\n          const postsResponse = await postsService.getPosts(100, 0, uid, 'ride');\n          if (postsResponse.success && Array.isArray(postsResponse.data)) {\n            const mappedPosts = postsResponse.data.map(mapPostToFeedItem);\n            setAllPosts(mappedPosts);\n            setFilteredPosts(mappedPosts);\n            console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n          } else {\n            console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× × ×›×©×œ×”:', postsResponse.error);\n            setAllPosts([]);\n            setFilteredPosts([]);\n          }\n        } catch (error) {\n          console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™×:', error);\n          setAllPosts([]);\n          setFilteredPosts([]);\n        }\n        return; // Don't load rides in search mode\n      }\n\n      // Offer mode - load posts for history\n      console.log('ğŸ”µ ××¦×‘ ××¦×™×¢ - ×˜×•×¢×Ÿ ×¤×•×¡×˜×™× ×©×œ ×”××©×ª××© ×œ×”×™×¡×˜×•×¨×™×”:', uid);\n      try {\n        // ×˜×•×¢×Ÿ ××ª ×”×¤×•×¡×˜×™× ×©×œ ×”××©×ª××©\n        const { apiService } = await import('../utils/apiService');\n        const postsResponse = await apiService.getUserPosts(uid, 50, uid);\n        \n        if (postsResponse.success && Array.isArray(postsResponse.data)) {\n          // ××¡× ×Ÿ ×¨×§ ×¤×•×¡×˜×™× ×©×œ ×˜×¨××¤×™×\n          const ridePosts = postsResponse.data.filter((post: any) => \n            post.post_type === 'ride' || post.post_type === 'ride_offered' || post.ride_id\n          );\n          \n          // ×××¤×” ××ª ×”×¤×•×¡×˜×™×\n          const mappedPosts = ridePosts\n            .map(mapPostToFeedItem)\n            .filter((post: FeedItem | null): post is FeedItem => \n              post !== null && post !== undefined && post.user && post.user.id && post.user.name\n            );\n          \n          setRecentPosts(mappedPosts);\n          console.log('âœ… ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” ×”×¦×œ×™×—×”:', mappedPosts.length, '×¤×•×¡×˜×™×');\n        } else {\n          console.warn('âš ï¸ ×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×” × ×›×©×œ×”:', postsResponse.error);\n          setRecentPosts([]);\n        }\n      } catch (error) {\n        console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×•×¡×˜×™× ×œ×”×™×¡×˜×•×¨×™×”:', error);\n        setRecentPosts([]);\n      }\n\n      // ×¢×“×™×™×Ÿ ×˜×•×¢×Ÿ rides ×œ×¦×•×¨×š history (legacy support)\n      const shouldIncludePast = includePastOverride !== undefined\n        ? includePastOverride\n        : selectedFilters.includes('includePast');\n\n      const [activeRides, myHistory] = await Promise.all([\n        db.listRides(uid, { includePast: shouldIncludePast }),\n        selectedUser?.id ? db.getUserRides(selectedUser.id, 'driver') : Promise.resolve([])\n      ]);\n\n      // Enrich activeRides with real user names\n      const enrichedRides = await Promise.all((activeRides || []).map(async (ride: any) => {\n        const driverId = ride.driverId;\n        const needsFetch = !ride.driverName || ride.driverName === driverId || ride.driverName === 'Driver';\n\n        if (needsFetch && driverId) {\n          try {\n            const user = await db.getUser(driverId) as any;\n            if (user && user.name && user.name !== driverId) {\n              return { ...ride, driverName: user.name };\n            }\n          } catch (e) {\n            // Ignore error\n          }\n        }\n        return ride;\n      }));\n\n      setAllRides(enrichedRides);\n\n      // Map history to UI format (legacy)\n      const userRecent = (myHistory || []).map((r: any) => ({\n        ...r,\n        status: r.status || 'active',\n        price: r.price || 0,\n      }));\n      setRecentRides(userRecent);\n    } catch (e) {\n      console.error(\"âŒ Failed to load rides\", e);\n      setAllRides([]);\n      setRecentRides([]);\n    }\n  }, [selectedUser?.id, t, selectedFilters]);\n\n  // Reload rides when includePast filter changes\n  useEffect(() => {\n    if (mode) { // Only in search mode\n      const shouldIncludePast = selectedFilters.includes('includePast');\n      loadRides(shouldIncludePast);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedFilters, mode]); // Reload when filters change\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”„ useFocusEffect triggered, refreshKey:', refreshKey);\n      loadRides();\n    }, [loadRides, refreshKey])\n  );\n\n  // --- 2. Search Logic (Search Mode) ---\n  const getFilteredRides = useCallback(() => {\n    // In search mode, filter posts instead of rides\n    if (mode) {\n      let filtered = [...allPosts];\n\n      console.log('ğŸ” Filtering posts - Total:', allPosts.length, 'Search query:', searchQuery, 'Filters:', selectedFilters.length);\n\n      // Filter by text\n      if (searchQuery) {\n        const q = searchQuery.toLowerCase();\n        filtered = filtered.filter(post =>\n          (post.user?.name?.toLowerCase()?.includes(q) ?? false) ||\n          (post.from?.toLowerCase()?.includes(q) ?? false) ||\n          (post.to?.toLowerCase()?.includes(q) ?? false) ||\n          (post.title?.toLowerCase()?.includes(q) ?? false) ||\n          (post.description?.toLowerCase()?.includes(q) ?? false)\n        );\n        console.log('ğŸ” After text filter:', filtered.length);\n      }\n\n      // Apply Filters\n      if (selectedFilters.length > 0) {\n        selectedFilters.forEach(f => {\n          if (f === 'noCostSharing') filtered = filtered.filter(p => (p.price ?? 0) === 0);\n          // Add other filters as needed\n        });\n        console.log('ğŸ” After tag filters:', filtered.length);\n      }\n\n      // Sorting\n      const selectedSort = selectedSorts[0];\n      if (selectedSort) {\n        if (selectedSort === t('trump:sort.byPrice')) filtered.sort((a, b) => (a.price || 0) - (b.price || 0));\n        else if (selectedSort === t('trump:sort.byDate')) filtered.sort((a, b) => new Date(a.timestamp || 0).getTime() - new Date(b.timestamp || 0).getTime());\n      }\n\n      console.log('âœ… Final filtered posts:', filtered.length);\n      return filtered;\n    }\n\n    // In offer mode, filter rides as before\n    let filtered = [...allRides];\n\n    console.log('ğŸ” Filtering rides - Total:', allRides.length, 'Search query:', searchQuery, 'Filters:', selectedFilters.length);\n\n    // Filter by text\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(ride =>\n        (ride.driverName?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.from?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.to?.toLowerCase()?.includes(q) ?? false) ||\n        (ride.category?.toLowerCase()?.includes(q) ?? false)\n      );\n      console.log('ğŸ” After text filter:', filtered.length);\n    }\n\n    // Apply Filters (Search Mode Tags)\n    if (selectedFilters.length > 0) {\n      selectedFilters.forEach(f => {\n        // f is now a key like 'noCostSharing', not the translated value\n        if (f === 'noCostSharing') filtered = filtered.filter(r => (r.price ?? 0) === 0);\n        if (f === 'noSmoking') filtered = filtered.filter(r => r.noSmoking);\n        if (f === 'withPets') filtered = filtered.filter(r => r.petsAllowed);\n        if (f === 'withKids') filtered = filtered.filter(r => r.kidsFriendly);\n        if (f === 'includePast') {\n          // Include past rides - don't filter them out\n          // This filter is handled by the server, so we don't need to filter here\n          // But we can add a visual indicator if needed\n        }\n      });\n      console.log('ğŸ” After tag filters:', filtered.length);\n    }\n\n    // Sorting\n    const selectedSort = selectedSorts[0];\n    if (selectedSort) {\n      if (selectedSort === t('trump:sort.byPrice')) filtered.sort((a, b) => (a.price || 0) - (b.price || 0));\n      else if (selectedSort === t('trump:sort.byDate')) filtered.sort((a, b) => new Date(a.date || 0).getTime() - new Date(b.date || 0).getTime());\n      // Add other sorts as needed\n    }\n\n    console.log('âœ… Final filtered rides:', filtered.length);\n    return filtered;\n  }, [allRides, searchQuery, selectedFilters, selectedSorts, t]);\n\n  useEffect(() => {\n    if (mode) {\n      setFilteredPosts(getFilteredRides() as FeedItem[]);\n    } else {\n      setFilteredRides(getFilteredRides() as any[]);\n    }\n  }, [getFilteredRides, mode]);\n\n  const handleSearch = (query: string, filters?: string[], sorts?: string[]) => {\n    if (!mode) {\n      // Offer Mode: Header search input acts as \"Destination\"\n      setToLocation(query);\n    } else {\n      // Search Mode: Standard search\n      setSearchQuery(query);\n      setSelectedFilters(filters || []);\n      setSelectedSorts(sorts || []);\n    }\n  };\n\n  // --- 3. Offer Logic (Create Ride) ---\n  const isFormValid = (): boolean => {\n    const hasDest = Boolean(toLocation && toLocation.trim().length > 0);\n    // Origin validity:\n    // If using current location, we MUST have a detected address.\n    // Otherwise, we need a manual fromLocation.\n    const hasOrigin = useCurrentLocation\n      ? Boolean(detectedAddress && detectedAddress.length > 0 && !isLocationError)\n      : Boolean(fromLocation && fromLocation.trim().length > 0);\n\n    // Time validity:\n    // If immediate, valid.\n    // If not immediate, must have time.\n    // If not immediate and not today, Date is technically always present (default), but conceptually checked.\n    const hasTime = immediateDeparture || Boolean(departureTime && departureTime.trim().length > 0);\n\n    // If recurring is selected, recurrence unit must be selected\n    const hasRecurrenceUnit = !isRecurring || Boolean(recurrenceUnit);\n\n    return Boolean(hasDest && hasOrigin && hasTime && hasRecurrenceUnit);\n  };\n\n  const handleCreateRide = async () => {\n    if (!isFormValid()) {\n      // Provide detailed error messages\n      const errors: string[] = [];\n\n      if (!toLocation || !toLocation.trim()) {\n        errors.push('×™×© ×œ×”×–×™×Ÿ ×™×¢×“');\n      }\n\n      if (useCurrentLocation) {\n        if (!detectedAddress || isLocationError) {\n          errors.push('×× × ×”××ª×Ÿ ×œ×–×™×”×•×™ ×”××™×§×•× ××• ×”×–×Ÿ ×›×ª×•×‘×ª ×™×“× ×™×ª');\n        }\n      } else {\n        if (!fromLocation || !fromLocation.trim()) {\n          errors.push('×™×© ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ×™×¦×™××”');\n        }\n      }\n\n      if (!immediateDeparture && (!departureTime || !departureTime.trim())) {\n        errors.push('×™×© ×œ×”×–×™×Ÿ ×©×¢×ª ×™×¦×™××”');\n      }\n\n      if (isRecurring && !recurrenceUnit) {\n        errors.push('×™×© ×œ×‘×—×•×¨ ×ª×“×™×¨×•×ª ×œ× ×¡×™×¢×” ×—×•×–×¨×ª');\n      }\n\n      Alert.alert(\n        t('common:errorTitle') || '×©×’×™××”',\n        errors.length > 0 ? errors.join('\\n') : (t('trump:errors.formInvalid') || '×™×© ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™×')\n      );\n      return;\n    }\n\n    try {\n      const uid = selectedUser?.id || 'guest';\n      const rideId = `${Date.now()}`; // Or DB generated\n\n      // --- Calculate Final Date ---\n      let dateToSave: string;\n      if (immediateDeparture || leavingToday) {\n        dateToSave = new Date().toISOString().split('T')[0]; // Current date YYYY-MM-DD\n      } else {\n        // Ensure rideDate is valid before using toISOString\n        const validDate = rideDate && rideDate instanceof Date && !isNaN(rideDate.getTime())\n          ? rideDate\n          : new Date();\n        dateToSave = validDate.toISOString().split('T')[0]; // Selected date YYYY-MM-DD\n      }\n\n      // --- Calculate Final Time ---\n      let timeToSave: string;\n      if (immediateDeparture) {\n        // Current time HH:MM in local timezone (not UTC)\n        const now = new Date();\n        // Use local time, not UTC\n        const localHours = now.getHours();\n        const localMinutes = now.getMinutes();\n        timeToSave = `${String(localHours).padStart(2, '0')}:${String(localMinutes).padStart(2, '0')}`;\n        console.log('â° Immediate departure time (local):', timeToSave);\n      } else {\n        timeToSave = departureTime; // Selected HH:MM\n        console.log('â° Selected departure time:', timeToSave);\n      }\n\n      const baseRideData = {\n        driverId: uid,\n        driverName: selectedUser?.name || 'Me', // Fallback name\n        from: useCurrentLocation ? (detectedAddress || (t('trump:currentLocation') as string)) : fromLocation,\n        to: toLocation,\n        date: dateToSave,\n        time: timeToSave,\n        seats: seats,\n        price: Number(price) || 0,\n        noSmoking: selectedFormTags.includes('noSmoking') || selectedFormTags.includes(t('trump:filters.noSmoking') as string),\n        petsAllowed: selectedFormTags.includes('withPets') || selectedFormTags.includes(t('trump:filters.withPets') as string),\n        kidsFriendly: selectedFormTags.includes('withKids') || selectedFormTags.includes(t('trump:filters.withKids') as string),\n        isRecurring: isRecurring,\n        recurrenceFrequency: recurrenceFrequency,\n        recurrenceUnit: recurrenceUnit,\n        status: 'active' // Changed from 'published' to 'active' to match server filter\n      };\n\n      // Calculate base departure datetime for recurring rides\n      // Use local timezone, not UTC\n      const [hours, minutes] = timeToSave.split(':').map(Number);\n      const baseDate = new Date(dateToSave + 'T00:00:00'); // Create date in local timezone\n      baseDate.setHours(hours, minutes, 0, 0);\n      console.log('ğŸ“… Base date calculated:', baseDate.toISOString(), 'Local:', baseDate.toLocaleString('he-IL'));\n\n      // Create the first ride\n      console.log('ğŸš— Creating ride with data:', JSON.stringify(baseRideData, null, 2));\n      await db.createRide(uid, rideId, baseRideData);\n      console.log('âœ… Ride created successfully');\n\n      // If recurring, create 5 future instances\n      if (isRecurring && recurrenceUnit) {\n        const instancesToCreate = 5;\n        for (let i = 1; i <= instancesToCreate; i++) {\n          const nextDate = new Date(baseDate);\n\n          // Calculate next occurrence based on frequency and unit\n          switch (recurrenceUnit) {\n            case 'day':\n              // Every X days\n              nextDate.setDate(nextDate.getDate() + (recurrenceFrequency * i));\n              break;\n            case 'week':\n              // Every X weeks\n              nextDate.setDate(nextDate.getDate() + (recurrenceFrequency * 7 * i));\n              break;\n            case 'month':\n              // Every X months\n              nextDate.setMonth(nextDate.getMonth() + (recurrenceFrequency * i));\n              break;\n          }\n\n          const nextDateStr = nextDate.toISOString().split('T')[0];\n          const nextTimeStr = `${String(nextDate.getHours()).padStart(2, '0')}:${String(nextDate.getMinutes()).padStart(2, '0')}`;\n\n          const recurringRideData = {\n            ...baseRideData,\n            date: nextDateStr,\n            time: nextTimeStr,\n          };\n\n          const recurringRideId = `${Date.now()}_${i}`;\n          await db.createRide(uid, recurringRideId, recurringRideData);\n        }\n      }\n\n      // Reset Form\n      setToLocation('');\n      setFromLocation('');\n      setDepartureTime('');\n      setImmediateDeparture(true); // Default back to immediate\n      setLeavingToday(true);         // Default back to today\n      setRideDate(new Date());       // Reset date\n      setIsRecurring(false);         // Reset recurring\n      setRecurrenceFrequency(1);     // Reset recurrence frequency\n      setRecurrenceUnit(null);       // Reset recurrence unit\n      setUseCurrentLocation(true);\n      setSeats(3);\n      setPrice('0');\n      setSelectedFormTags([]);\n\n      // Also clear header search if possible via searchQuery state if it was bound\n      if (!mode) setSearchQuery('');\n\n      Alert.alert(t('trump:success.title') as string, t('trump:success.ridePublished') as string);\n\n      // Refresh Data - wait a bit for backend to update cache\n      setTimeout(() => {\n        setRefreshKey(prev => prev + 1);\n      }, 1500);\n\n    } catch (e) {\n      console.error(\"Failed to create ride\", e);\n      const errorMessage = e instanceof Error ? e.message : String(e);\n      Alert.alert(\n        t('common:errorTitle') as string,\n        `${t('trump:errors.saveFailed') as string}\\n${errorMessage}`\n      );\n    }\n  };\n\n  // --- 4. History Actions ---\n  const handleDeleteRide = async (ride: any) => {\n    Alert.alert(\n      t('trump:alerts.deleteRideTitle') || '××—×™×§×ª ×˜×¨××¤',\n      t('trump:alerts.deleteRideBody') || '×”×× ×œ××—×•×§ ×˜×¨××¤ ×–×”?',\n      [\n        { text: t('common:cancel') as string, style: 'cancel' },\n        {\n          text: t('common:delete') as string,\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              await db.updateRide(selectedUser?.id || 'guest', ride.id, { status: 'cancelled' });\n              // Optimistic UI Update\n              setRecentRides(prev => prev.map(r => r.id === ride.id ? { ...r, status: 'cancelled' } : r));\n            } catch (e) {\n              console.error('Delete ride failed', e);\n              Alert.alert('Error', 'Failed to delete ride');\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleRestoreRide = (ride: any) => {\n    // Populate form with ride data\n    setToLocation(ride.to || '');\n    setFromLocation(ride.from || '');\n    setUseCurrentLocation(ride.from === t('trump:currentLocation'));\n    setDepartureTime(ride.time || '');\n\n    // Logic for restoring specific time vs immediate is tricky, default to explicit time\n    setImmediateDeparture(false);\n    setSeats(ride.seats || 3);\n    setPrice(String(ride.price || 0));\n    // If date is in future, we set it, otherwise default to today logic or keep it old? \n    // Usually restore is for convenience, so let's default to logic that user can adjust.\n    // Let's assume user wants to repost for today or same settings\n    setLeavingToday(true);\n    setRideDate(new Date());\n\n    Alert.alert(t('trump:alerts.restoreDoneTitle') || '×©×•×—×–×¨', '×¤×¨×˜×™ ×”×˜×¨××¤ ×”×•×¢×ª×§×• ×œ×˜×•×¤×¡');\n  };\n\n  // --- Render Helpers ---\n  const handleToggleMode = () => setMode(!mode);\n\n  const handleSelectRide = (ride: any) => {\n    setSelectedRide(ride);\n    setShowRideModal(true);\n  };\n\n  // Calculate grid layout for search mode\n  const { width } = Dimensions.get('window');\n  const { isTablet, isDesktop } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const isMobile = isMobileWeb();\n\n  // Initialize with appropriate default, but allow user control via slider\n  const [numColumns, setNumColumns] = useState(() => (isTablet || isDesktop || isDesktopWeb) ? 3 : 2);\n\n  // Use same padding values as PostsReelsScreen for consistency\n  const HORIZONTAL_PADDING = isMobile ? 8 : 16;\n  const COLUMN_GAP = isMobile ? 8 : 16;\n  const screenPadding = HORIZONTAL_PADDING;\n  const cardGap = COLUMN_GAP;\n  // Calculate card width: full width minus padding on both sides, minus gaps between columns\n  const cardWidth = numColumns === 1 \n    ? width - (screenPadding * 2) \n    : (width - (screenPadding * 2) - (cardGap * (numColumns - 1))) / numColumns;\n\n  const handleCloseRideModal = () => {\n    setShowRideModal(false);\n    setSelectedRide(null);\n  };\n\n  // Render item callback for FlatList (search mode)\n  const renderPostItem = useCallback(({ item }: { item: FeedItem }) => {\n    // Calculate available width: screen width minus horizontal padding on both sides\n    const availableWidth = width - (screenPadding * 2);\n    \n    // For grid view: with justifyContent: 'space-between', FlatList distributes items automatically\n    // So each item gets availableWidth / numColumns (no need to account for gaps)\n    const itemWidth = numColumns > 1 \n      ? availableWidth / numColumns\n      : availableWidth; // Full available width for list view\n\n    return (\n      <PostReelItem\n        item={item}\n        cardWidth={itemWidth}\n        numColumns={numColumns}\n        onPress={(item) => {\n          // Navigate to post details or open modal\n          console.log('Post pressed:', item.id);\n        }}\n        onCommentPress={(item) => {\n          // Handle comment press\n          console.log('Comment pressed:', item.id);\n        }}\n        onMorePress={handleMorePress}\n      />\n    );\n  }, [numColumns, screenPadding, width, handleMorePress]);\n\n  // Empty component for FlatList\n  const renderEmptyPosts = useCallback(() => (\n    <View style={localStyles.emptyState}>\n      <Text style={localStyles.emptyStateTitle}>{t('trump:ui.noRidesFoundTitle')}</Text>\n      <Text style={localStyles.emptyStateText}>{t('trump:ui.noRidesFoundBody')}</Text>\n    </View>\n  ), [t]);\n\n  const handleSelectRideOld = (ride: any) => {\n    // In Search Mode: Show join details/contact\n    Alert.alert(\n      t('trump:rideOf', { name: ride.driverName }) as string,\n      `${ride.from} â ${ride.to}\\nâ° ${ride.time}\\nğŸ’° â‚ª${ride.price}\\n\\n${t('trump:joinQuestion')}`,\n      [\n        { text: t('common:cancel') as string, style: 'cancel' },\n        { text: t('trump:joinRide') as string, onPress: () => Alert.alert('×‘×§×©×” × ×©×œ×—×”') }\n      ]\n    );\n  };\n\n  if (!isMounted) {\n    return <View style={localStyles.safeArea} />;\n  }\n\n  return (\n    <SafeAreaView style={localStyles.safeArea}>\n      {/* Header handles Search Mode inputs & Mode Toggle */}\n      <HeaderComp\n        mode={mode}\n        menuOptions={['×”×™×¡×˜×•×¨×™×”', '×”×’×“×¨×•×ª']}\n        onToggleMode={handleToggleMode}\n        onSelectMenuItem={() => { }}\n        title=\"\"\n        // Dynamic placeholder based on mode\n        placeholder={mode ? t('trump:ui.searchPlaceholder.seek') : t('trump:ui.searchPlaceholder.offer')}\n        filterOptions={trumpFilterOptions}\n        sortOptions={trumpSortOptions}\n        searchData={allRides}\n        onSearch={handleSearch}\n        // Hide sort button in offer mode (mode === false)\n        hideSortButton={!mode}\n      />\n\n      {!mode ? (\n        // === OFFER MODE (Driver) - Show Form ===\n        <ScrollContainer\n          style={localStyles.container}\n          contentStyle={localStyles.scrollContent}\n          keyboardShouldPersistTaps=\"always\"\n        >\n          {/* 1. Form */}\n          <RideOfferForm\n            destination={toLocation}\n            onDestinationChange={setToLocation}\n\n            fromLocation={fromLocation}\n            onFromLocationChange={setFromLocation}\n            useCurrentLocation={useCurrentLocation}\n            onToggleCurrentLocation={setUseCurrentLocation}\n            detectedAddress={detectedAddress}\n            isLocating={isLocating}\n            isLocationError={isLocationError}\n\n            // Scheduling\n            departureTime={departureTime}\n            onDepartureTimeChange={setDepartureTime}\n            immediateDeparture={immediateDeparture}\n            onToggleImmediateDeparture={setImmediateDeparture}\n            leavingToday={leavingToday}\n            onToggleLeavingToday={setLeavingToday}\n            rideDate={rideDate}\n            onDateChange={handleDateChange}\n            isRecurring={isRecurring}\n            onToggleRecurring={setIsRecurring}\n            recurrenceFrequency={recurrenceFrequency}\n            onRecurrenceFrequencyChange={setRecurrenceFrequency}\n            recurrenceUnit={recurrenceUnit}\n            onRecurrenceUnitChange={setRecurrenceUnit}\n\n            seats={seats}\n            onSeatsChange={setSeats}\n            price={price}\n            onPriceChange={setPrice}\n\n            selectedTags={selectedFormTags}\n            onToggleTag={(tag) => {\n              setSelectedFormTags(prev => prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]);\n            }}\n            availableTags={trumpFilterOptions}\n\n            onSubmit={handleCreateRide}\n            isValid={isFormValid()}\n            hideDestinationInput={true} // New prop to hide internal input\n          />\n\n          {/* 2. History */}\n          <View style={localStyles.section}>\n            <Text style={localStyles.sectionTitle}>{t('trump:ui.yourRecentRides')}</Text>\n            {recentPosts.length === 0 ? (\n              <Text style={localStyles.emptyStateText}>{t('trump:ui.noRecentRides')}</Text>\n            ) : (\n              recentPosts.map((post) => {\n                // Container has paddingHorizontal: 16, so card width should account for that\n                const containerPadding = 16;\n                const historyCardWidth = width - (containerPadding * 2);\n                return (\n                  <View key={post.id} style={{ marginBottom: 16, width: '100%' }}>\n                    <PostReelItem\n                      item={post}\n                      cardWidth={historyCardWidth}\n                      numColumns={1}\n                      onPress={(item) => {\n                        console.log('Post pressed:', item.id);\n                      }}\n                      onCommentPress={(item) => {\n                        console.log('Comment pressed:', item.id);\n                      }}\n                      onMorePress={handleMorePress}\n                    />\n                  </View>\n                );\n              })\n            )}\n          </View>\n\n          {/* 3. Groups Section */}\n          <View style={[localStyles.section, { marginTop: 30, paddingBottom: 20 }]}>\n            <View style={{ flexDirection: 'row-reverse', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\n              <Text style={localStyles.sectionTitle}>{t('trump:ui.whatsappGroups')}</Text>\n            </View>\n            <AddLinkComponent category=\"trump\" />\n          </View>\n        </ScrollContainer>\n      ) : (\n        // === SEARCH MODE (Passenger) - Show Search Results ===\n        <View style={localStyles.searchContainer}>\n          <VerticalGridSlider\n            numColumns={numColumns}\n            onNumColumnsChange={setNumColumns}\n            style={{\n              top: 10, // Relative to searchContainer\n              left: 4,\n              height: 160 // Pass height if needed by style? No, it's defined inside.\n            }}\n          />\n          <View style={localStyles.resultsHeader}>\n            <Text style={localStyles.resultsTitle}>\n              {searchQuery ? `${t('trump:ui.searchResultsPrefix')} \"${searchQuery}\"` : t('trump:ui.availableRides')} ({filteredPosts.length})\n            </Text>\n          </View>\n\n          <ScrollContainer\n            contentStyle={localStyles.resultsList}\n            showsVerticalScrollIndicator={false}\n          >\n            <FlatList\n              data={filteredPosts}\n              renderItem={renderPostItem}\n              keyExtractor={(item) => item.id || String(Math.random())}\n              key={numColumns} // Force re-render on column change\n              numColumns={numColumns}\n              columnWrapperStyle={numColumns > 1 ? localStyles.columnWrapper : undefined}\n              contentContainerStyle={{ paddingHorizontal: screenPadding }}\n              scrollEnabled={false}\n              nestedScrollEnabled={true}\n              ListEmptyComponent={renderEmptyPosts}\n              showsVerticalScrollIndicator={false}\n            />\n\n            {/* Groups Section (Restored) */}\n            <View style={[localStyles.section, { marginTop: 30, paddingBottom: 40 }]}>\n              <View style={{ flexDirection: 'row-reverse', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\n                <Text style={localStyles.sectionTitle}>\n                  {t('trump:ui.whatsappGroups')}\n                </Text>\n              </View>\n              <AddLinkComponent category=\"trump\" />\n            </View>\n\n          </ScrollContainer>\n        </View>\n      )}\n\n      {/* Ride Details Modal */}\n      <ItemDetailsModal\n        visible={showRideModal}\n        onClose={handleCloseRideModal}\n        item={selectedRide}\n        type=\"ride\"\n        navigation={navigation}\n      />\n\n      {/* Post Menu Modals */}\n      <OptionsModal\n        visible={optionsModalVisible}\n        onClose={() => setOptionsModalVisible(false)}\n        options={modalOptions}\n        title={t('common.options') || 'Options'}\n        anchorPosition={modalPosition}\n      />\n      <ReportPostModal\n        visible={reportModalVisible}\n        onClose={() => setReportModalVisible(false)}\n        onSubmit={handleReportSubmit}\n        isLoading={false}\n      />\n\n      {/* Footer Stats (Visible in Search Mode usually, or always) */}\n      {mode && (\n        <DonationStatsFooter\n          stats={[\n            { label: t('trump:stats.availableRides') || '×–××™× ×™×', value: filteredPosts.length, icon: 'car-outline' },\n            { label: '×œ×™×™×§×™×', value: filteredPosts.reduce((sum, p) => sum + (p.likes || 0), 0), icon: 'heart-outline' },\n            { label: '×ª×’×•×‘×•×ª', value: filteredPosts.reduce((sum, p) => sum + (p.comments || 0), 0), icon: 'chatbubble-outline' },\n          ]}\n        />\n      )}\n      {ToastComponent}\n    </SafeAreaView>\n  );\n}\n\nconst localStyles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary_2,\n  },\n  container: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n  },\n  scrollContent: {\n    paddingBottom: 100,\n  },\n  section: {\n    marginTop: 24,\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 12,\n    textAlign: 'center',\n  },\n  emptyStateText: {\n    textAlign: 'center',\n    color: colors.textSecondary,\n    marginTop: 20,\n  },\n  // Search Mode Styles\n  searchContainer: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    // paddingBottom: 80, // Removed to allow full usage of space; footer is in-flow\n  },\n  resultsHeader: {\n    marginBottom: 10,\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  resultsTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  resultsList: {\n    paddingBottom: 20,\n    flexGrow: 1, // ensure it fills space if needed\n  },\n  emptyState: {\n    alignItems: 'center',\n    marginTop: 60,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8,\n  },\n  columnWrapper: {\n    justifyContent: 'space-between',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/donationScreens/WasteScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/expo-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/colors.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/constants.tsx","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\+.","line":275,"column":19,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":275,"endColumn":20,"suggestions":[{"messageId":"removeEscape","fix":{"range":[6759,6760],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[6759,6759],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Charities list moved to fakeData.ts file\nimport colors from './colors';\n\n// TODO: Add comprehensive constants documentation and usage examples\n// TODO: Implement proper TypeScript strict types for all constants\n// TODO: Create constants validation and testing system\n// TODO: Group related constants into logical modules/namespaces\n// TODO: Add responsive constants for different screen sizes\n// TODO: Remove hardcoded values throughout the app and use these constants\n// TODO: Create constants management system for easy updates\n// TODO: Add internationalization support for text constants\n// TODO: Implement proper naming conventions consistency\n// TODO: Add runtime constants validation\n\n// icone size\nexport const IconSizes = {\n  xxxsmall: 12,\n  xxsmall: 16,\n  xsmall: 20,\n  small: 24,\n  medium: 32,\n  large: 48,\n  xlarge: 56,\n  xxlarge: 64,\n}\n\n// Motivational quotes moved to fakeData.ts file\n\nexport const FontSizes = {\n  // --- General Text Sizes ---\n  /** Smallest text size, often used for captions or fine print. */\n  caption: 10,\n  /** Typically used for secondary information, dates, or small labels. */\n  small: 12,\n  /** Standard body text size for most paragraphs and descriptions. */\n  body: 14,\n  /** Slightly larger text, often used for subheadings or prominent labels. */\n  medium: 16,\n  /** Larger text, suitable for section titles or important short phrases. */\n  large: 18,\n\n  // --- Heading Sizes ---\n  /** Primary heading size for main screen titles. */\n  heading1: 24,\n  /** Secondary heading size for major sections. */\n  heading2: 20,\n  /** Tertiary heading size for subsections. */\n  heading3: 18, // Can be same as 'large' if appropriate\n  // --- Legacy/Compatibility ---\n  /** Compatibility mapping for older screens expecting 'title' */\n  title: 24,\n\n  // --- UI Specific Sizes (if distinct from general text) ---\n  /** Size for button text. */\n  button: 14,\n  /** Size for input field text. */\n  input: 16,\n  /** Size for tab bar labels. */\n  tabLabel: 12,\n  /** Size for icon labels that accompany text. */\n  iconLabel: 12,\n\n  // --- App-specific adjustments (if needed) ---\n  /** For specific very large numbers or display text */\n  displayLarge: 32,\n  /** For very small UI elements */\n  extraSmall: 8,\n};\n\n// For searching \n// i18n keys for search filters (displayed via t('search:filters.<key>'))\nexport const filterOptions: string[] = [\n  'education',\n  'health',\n  'welfare',\n  'environment',\n  'animals',\n  'atRiskYouth',\n  'elderly',\n  'disabled',\n  'patients',\n  'familiesInDistress',\n  'immigrants',\n  'community',\n];\n\n// i18n keys for search sorts (displayed via t('search:sort.<key>'))\nexport const sortOptions: string[] = [\n  'alphabetical',\n  'byLocation',\n  'byCategory',\n  'byEstablishedDate',\n  'byDonors',\n  'byRating',\n  'byRelevance',\n];\n\n// TODO: URGENT - Remove hardcoded Hebrew text and implement proper i18n\n// TODO: Rename 'trumps' to proper English names (rides/transportation)\n// TODO: Create proper filter/menu management system\nexport const filter_for_trumps: string[] = [\n  '×œ×¤×™ ××™×§×•×',\n  '×œ×¤×™ ×¡×•×’ ×ª×¨×•××”',\n  '×œ×¤×™ ×’×™×œ',\n  '×œ×¤×™ ××’×“×¨',\n  '×‘×—×™× ×/×‘×”×©×ª×ª×¤×•×ª',\n  '× ×¡×™×¢×•×ª ×¢× ×™×œ×“×™×',\n]\nexport const menu_for_trumps: string[] = [\n  '× ×¡×™×¢×•×ª ×§×‘×•×¢×•×ª',\n  '× ×¡×™×¢×•×ª ×—×“ ×¤×¢××™×•×ª',\n  '× ×¡×™×¢×•×ª ××©×•×ª×¤×•×ª',\n  '×”×•×‘×œ×•×ª',\n  '××©×œ×•×—×™×',\n]\n\n// WhatsApp groups details moved to fakeData.ts file\n\n// Bubble Component Constants\nexport const BUBBLE_CONSTANTS = {\n  NUM_BUBBLES: 30,\n  MIN_SIZE: 50,\n  MAX_SIZE: 150,\n  MIN_NUMBER: 1,\n  MAX_NUMBER: 100,\n  ANIMATION_DURATION: 4000,\n  ANIMATION_DELAY: 2000,\n  OVERLAP_THRESHOLD: 2.5,\n  MAX_ATTEMPTS: 1000,\n  HEIGHT_OFFSET: 150,\n  FONT_SIZE_RATIO: 7,\n  NAME_SIZE_RATIO: 10,\n  MIN_FONT_SIZE: 10,\n  MIN_NAME_SIZE: 8,\n  TEXT_SIZE_RATIO: 0.2,\n  NAME_LINE_HEIGHT_RATIO: 1.2,\n  MIN_FONT_SCALE: 0.5,\n  MIN_NAME_SCALE: 0.3,\n  MOVEMENT_BACKGROUND: 8,\n  MOVEMENT_FOREGROUND: 5,\n  OPACITY_BACKGROUND: 0.2,\n  OPACITY_DEFAULT: 0.7,\n  OPACITY_SELECTED: 1,\n  SCALE_SELECTED: 1.1,\n  SCALE_DEFAULT: 1,\n  ANIMATION_DAMPING: 10,\n  ANIMATION_STIFFNESS: 100,\n  ANIMATION_DURATION_SHORT: 200,\n  SHADOW_OPACITY: 0.1,\n  SHADOW_OFFSET: -1,\n  SHADOW_RADIUS: 3,\n  MESSAGE_MARGIN_VERTICAL: 80,\n  MESSAGE_MARGIN_HORIZONTAL: 20,\n  MESSAGE_PADDING_HORIZONTAL: 5,\n  MESSAGE_PADDING_VERTICAL: 8,\n  MESSAGE_BORDER_RADIUS: 20,\n  MESSAGE_SHADOW_OFFSET: 2,\n  MESSAGE_SHADOW_OPACITY: 0.25,\n  MESSAGE_SHADOW_RADIUS: 4,\n  MESSAGE_OPACITY: 0.78,\n  MESSAGE_ELEVATION: 1,\n  TITLE_MARGIN_TOP: 10,\n  TITLE_FONT_SIZE: 25,\n};\n\n// Animation constants\nexport const ANIMATION_CONSTANTS = {\n  SPRING_CONFIG: {\n    damping: 10,\n    stiffness: 100,\n  },\n  TIMING_CONFIG: {\n    duration: 300,\n  },\n  BUBBLE_MOVEMENT: {\n    SLOW: 2000,\n    MEDIUM: 3000,\n    FAST: 4000,\n  },\n};\n\n// Screen dimensions and layout constants\nexport const LAYOUT_CONSTANTS = {\n  PANEL_OFFSET: 50,\n  BOTTOM_NAV_HEIGHT: 80,\n  TOP_BAR_HEIGHT: 60,\n  BORDER_RADIUS: {\n    SMALL: 8,\n    MEDIUM: 15,\n    LARGE: 20,\n    XLARGE: 25,\n  },\n  SPACING: {\n    XS: 4,\n    SM: 8,\n    MD: 16,\n    LG: 24,\n    XL: 32,\n  },\n  SHADOW: {\n    LIGHT: {\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    },\n    MEDIUM: {\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.2,\n      shadowRadius: 5,\n      elevation: 5,\n    },\n    HEAVY: {\n      shadowOffset: { width: 0, height: 8 },\n      shadowOpacity: 0.3,\n      shadowRadius: 10,\n      elevation: 10,\n    },\n  },\n};\n\n// Categories for tasks and donations\nexport const categories = [\n  '××–×•×Ÿ', '×‘×’×“×™×', '×—×™× ×•×š', '×‘×¨×™××•×ª', '×¡×‘×™×‘×”', '×§×©×™×©×™×', '×™×œ×“×™×', '×—×™×•×ª', '×ª×¨×‘×•×ª', '×¡×¤×•×¨×˜', '×™×™×¢×•×¥', '×ª×—×‘×•×¨×”'\n];\n\n// Task priorities\nexport const priorities = [\n  { value: 'low', label: '× ××•×›×”', color: colors.success },\n  { value: 'medium', label: '×‘×™× ×•× ×™×ª', color: colors.warning },\n  { value: 'high', label: '×’×‘×•×”×”', color: colors.error }\n];\n\n// Task statuses\nexport const statuses = [\n  { value: 'pending', label: '×××ª×™×Ÿ', color: colors.warning },\n  { value: 'in_progress', label: '×‘×‘×™×¦×•×¢', color: colors.primary },\n  { value: 'completed', label: '×”×•×©×œ×', color: colors.success },\n  { value: 'cancelled', label: '×‘×•×˜×œ', color: colors.textTertiary }\n];\n\n// Component size constants\nexport const COMPONENT_SIZES = {\n  AVATAR: {\n    SMALL: 30,\n    MEDIUM: 50,\n    LARGE: 80,\n    XLARGE: 120,\n  },\n  BUTTON_HEIGHT: {\n    SMALL: 32,\n    MEDIUM: 44,\n    LARGE: 56,\n  },\n  INPUT_HEIGHT: {\n    SMALL: 36,\n    MEDIUM: 48,\n    LARGE: 56,\n  },\n};\n\n// API and network constants\nexport const API_CONSTANTS = {\n  REQUEST_TIMEOUT: 10000,\n  RETRY_ATTEMPTS: 3,\n  RETRY_DELAY: 1000,\n};\n\n// Validation constants\nexport const VALIDATION = {\n  MIN_PASSWORD_LENGTH: 6,\n  MAX_MESSAGE_LENGTH: 500,\n  MAX_TITLE_LENGTH: 100,\n  EMAIL_REGEX: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n  PHONE_REGEX: /^[\\+]?[1-9][\\d]{0,15}$/,\n};\n\n// App version - synced with package.json\n// IMPORTANT: Update this value whenever package.json version changes\n// TODO: Consider creating a build script to auto-sync this with package.json\nexport const APP_VERSION = '2.0.0';\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/responsive.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ScaledSize' is defined but never used.","line":1,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ScaledSize"},"fix":{"range":[42,54],"text":""},"desc":"Remove unused variable \"ScaledSize\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'height' is assigned a value but never used.","line":114,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isLargeDesktop' is assigned a value but never used.","line":207,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":207,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":222,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":222,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":239,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":239,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":253,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDesktop' is assigned a value but never used.","line":268,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":268,"endColumn":30}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Dimensions, Platform, I18nManager, ScaledSize } from 'react-native';\n\n// TODO: Add comprehensive TypeScript interfaces for all responsive utilities\n// TODO: Implement proper breakpoint system with named breakpoints\n// TODO: Add comprehensive device detection (iPhone models, Android variants)\n// TODO: Create responsive hook system with proper subscription management\n// TODO: Add comprehensive orientation change handling\n// TODO: Implement proper accessibility scaling support\n// TODO: Add comprehensive performance optimization for responsive calculations\n// TODO: Create proper responsive testing and validation tools\n// TODO: Add comprehensive documentation for responsive design patterns\n// TODO: Implement proper responsive image and asset management\n\n// Breakpoint constants for responsive design\nexport const BREAKPOINTS = {\n  MOBILE: 360,\n  SMALL_PHONE: 480,\n  LARGE_PHONE: 768,\n  TABLET: 1024,\n  DESKTOP: 1440,\n  LARGE_DESKTOP: 1920,\n} as const;\n\n// Screen info helpers - Enhanced with better breakpoint detection\nexport const getScreenInfo = () => {\n  const { width, height } = Dimensions.get('window');\n  const shortest = Math.min(width, height);\n  const longest = Math.max(width, height);\n\n  const isMobile = width < BREAKPOINTS.SMALL_PHONE;\n  const isSmallPhone = width >= BREAKPOINTS.MOBILE && width < BREAKPOINTS.SMALL_PHONE;\n  const isLargePhone = width >= BREAKPOINTS.SMALL_PHONE && width < BREAKPOINTS.LARGE_PHONE;\n  const isTablet = width >= BREAKPOINTS.LARGE_PHONE && width < BREAKPOINTS.TABLET;\n  const isDesktop = Platform.OS === 'web' && width >= BREAKPOINTS.TABLET && width < BREAKPOINTS.DESKTOP;\n  const isLargeDesktop = Platform.OS === 'web' && width >= BREAKPOINTS.DESKTOP;\n\n  return {\n    width,\n    height,\n    shortest,\n    longest,\n    isMobile,\n    isSmallPhone,\n    isLargePhone,\n    isTablet,\n    isDesktop,\n    isLargeDesktop,\n  };\n};\n\nexport type Orientation = 'portrait' | 'landscape';\n\nexport const getOrientation = (): Orientation => {\n  const { width, height } = Dimensions.get('window');\n  return height >= width ? 'portrait' : 'landscape';\n};\n\nexport const isPortrait = () => getOrientation() === 'portrait';\nexport const isLandscape = () => getOrientation() === 'landscape';\n\n// React hook to track orientation at runtime\nexport const useOrientation = (): Orientation => {\n  const { width, height } = Dimensions.get('window');\n  // Basic, lightweight: any change in window dims implies orientation change\n  return height >= width ? 'portrait' : 'landscape';\n};\n\n// Enhanced scale based on iPhone 11 baseline width (414) with better mobile web support\n// TODO: Make baseline configurable and support multiple device baselines\n// TODO: Add proper scale caching to improve performance\n// TODO: Implement proper scale testing across different devices\n// TODO: Add scale limits and validation to prevent extreme scaling\nexport const scaleSize = (size: number) => {\n  const { width, height } = Dimensions.get('window');\n  const baseline = 414; // TODO: Move to constants file\n\n  // For web, use better mobile detection and scaling\n  if (Platform.OS === 'web') {\n    // Check if it's a mobile browser based on viewport size\n    const isMobileWeb = width <= 768 && (width / height < 1.2); // Portrait-ish mobile\n\n    if (isMobileWeb) {\n      // More aggressive scaling for mobile web to ensure readability\n      const mobileFactor = Math.min(Math.max(width / baseline, 0.9), 1.4);\n      return Math.round(size * mobileFactor);\n    } else {\n      // Desktop web - moderate scaling\n      const desktopFactor = Math.min(Math.max(width / 1024, 0.8), 1.2);\n      return Math.round(size * desktopFactor);\n    }\n  }\n\n  // Original scaling for native mobile\n  const factor = Math.min(Math.max(width / baseline, 0.85), 1.25);\n  return Math.round(size * factor);\n};\n\nexport const vw = (percent: number) => Dimensions.get('window').width * (percent / 100);\nexport const vh = (percent: number) => Dimensions.get('window').height * (percent / 100);\n\nexport const isWeb = Platform.OS === 'web';\nexport const isIOS = Platform.OS === 'ios';\nexport const isAndroid = Platform.OS === 'android';\n\n// Enhanced web platform detection\nexport const isMobileWeb = () => {\n  if (!isWeb) return false;\n  const { width, height } = Dimensions.get('window');\n  return width <= 768 && (width / height < 1.5); // Mobile web viewport\n};\n\nexport const isTabletWeb = () => {\n  if (!isWeb) return false;\n  const { width, height } = Dimensions.get('window');\n  return width > 768 && width <= 1024;\n};\n\nexport const isDesktopWeb = () => {\n  if (!isWeb) return false;\n  const { width } = Dimensions.get('window');\n  return width > 1024;\n};\n\n// Per requirement: on web, left/right should be flipped relative to mobile (mainly texts)\n// We assume app is RTL on mobile; web should visually invert left/right for texts and inline spacing\ntype Align = 'left' | 'right' | 'center';\n\nexport const biDiTextAlign = (mobileDefault: Align = 'right'): Align => {\n  if (isWeb) {\n    if (mobileDefault === 'left') return 'right';\n    if (mobileDefault === 'right') return 'left';\n    return 'center';\n  }\n  // Mobile respects RTL via I18nManager; but we follow requested behavior and keep given default for mobile\n  return mobileDefault;\n};\n\nexport const marginStartEnd = (mobileStart: number = 0, mobileEnd: number = 0) => {\n  // On web invert start/end\n  const isRTL = I18nManager.isRTL;\n  const resolvedStart = isRTL ? mobileEnd : mobileStart;\n  const resolvedEnd = isRTL ? mobileStart : mobileEnd;\n  if (isWeb) {\n    // invert\n    return { marginLeft: resolvedEnd, marginRight: resolvedStart };\n  }\n  return { marginLeft: resolvedStart, marginRight: resolvedEnd };\n};\n\nexport const paddingStartEnd = (mobileStart: number = 0, mobileEnd: number = 0) => {\n  const isRTL = I18nManager.isRTL;\n  const resolvedStart = isRTL ? mobileEnd : mobileStart;\n  const resolvedEnd = isRTL ? mobileStart : mobileEnd;\n  if (isWeb) {\n    return { paddingLeft: resolvedEnd, paddingRight: resolvedStart };\n  }\n  return { paddingLeft: resolvedStart, paddingRight: resolvedEnd };\n};\n\nexport const rowDirection = (mobileDefault: 'row' | 'row-reverse' = 'row') => {\n  // For rows, keep mobile default; invert for web to mirror\n  if (isWeb) {\n    return mobileDefault === 'row' ? 'row-reverse' : 'row';\n  }\n  return mobileDefault;\n};\n\n// Responsive spacing function - returns spacing based on screen size\nexport const responsiveSpacing = (\n  mobile: number,\n  tablet?: number,\n  desktop?: number\n): number => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  if (isLargeDesktop && desktop !== undefined) return Math.round(desktop * 1.2);\n  if (isDesktopWeb && desktop !== undefined) return desktop;\n  if (isDesktop && desktop !== undefined) return desktop;\n  if (isTablet && tablet !== undefined) return tablet;\n  return mobile;\n};\n\n// Responsive font size function\nexport const responsiveFontSize = (\n  mobile: number,\n  tablet?: number,\n  desktop?: number\n): number => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  if (isLargeDesktop && desktop !== undefined) return Math.round(desktop * 1.1);\n  if (isDesktopWeb && desktop !== undefined) return desktop;\n  if (isDesktop && desktop !== undefined) return desktop;\n  if (isTablet && tablet !== undefined) return tablet;\n  return scaleSize(mobile);\n};\n\n// Responsive width function - returns width based on screen size with optional max width\nexport const responsiveWidth = (\n  mobilePercent: number,\n  maxWidth?: number\n): number | string => {\n  const { width, isDesktop, isLargeDesktop } = getScreenInfo();\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n  const calculatedWidth = (width * mobilePercent) / 100;\n\n  if (isDesktopWeb && maxWidth) {\n    return Math.min(calculatedWidth, maxWidth);\n  }\n  if (isDesktop && maxWidth) {\n    return Math.min(calculatedWidth, maxWidth);\n  }\n  return calculatedWidth;\n};\n\n// Responsive button styles helper - returns button style props\nexport const getResponsiveButtonStyles = () => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  return {\n    paddingHorizontal: isLargeDesktop ? 36 : isDesktopWeb ? 32 : isTablet ? 28 : 24,\n    paddingVertical: isLargeDesktop ? 18 : isDesktopWeb ? 16 : isTablet ? 14 : 12,\n    minWidth: isLargeDesktop ? 300 : isDesktopWeb ? 280 : isTablet ? 240 : 200,\n    maxWidth: isLargeDesktop ? 450 : isDesktopWeb ? 400 : isTablet ? 360 : '100%',\n    borderRadius: isLargeDesktop ? 15 : isDesktopWeb ? 14 : isTablet ? 13 : 12,\n    fontSize: isLargeDesktop ? 20 : isDesktopWeb ? 18 : isTablet ? 17 : scaleSize(16),\n    alignSelf: 'center' as const,\n  };\n};\n\n// Responsive container styles helper - returns container style props\nexport const getResponsiveContainerStyles = () => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  return {\n    padding: isLargeDesktop ? 48 : isDesktopWeb ? 40 : isTablet ? 32 : 20,\n    paddingHorizontal: isLargeDesktop ? 48 : isDesktopWeb ? 40 : isTablet ? 32 : 20,\n    paddingVertical: isLargeDesktop ? 48 : isDesktopWeb ? 40 : isTablet ? 32 : 20,\n    width: '100%',\n  };\n};\n\n// Responsive modal styles helper\nexport const getResponsiveModalStyles = () => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  return {\n    width: isLargeDesktop ? '40%' : isDesktopWeb ? '50%' : isTablet ? '70%' : '80%',\n    maxWidth: isLargeDesktop ? 600 : isDesktopWeb ? 500 : isTablet ? 400 : undefined,\n    maxHeight: isLargeDesktop ? '85%' : isDesktopWeb ? '80%' : isTablet ? '75%' : '70%',\n    padding: isLargeDesktop ? 40 : isDesktopWeb ? 32 : isTablet ? 24 : 20,\n    borderRadius: isLargeDesktop ? 18 : isDesktopWeb ? 16 : isTablet ? 14 : 10,\n  };\n};\n\n// Responsive menu styles helper - for dropdown menus\nexport const getResponsiveMenuStyles = () => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  return {\n    minWidth: isLargeDesktop ? 220 : isDesktopWeb ? 200 : isTablet ? 180 : 160,\n    maxWidth: isLargeDesktop ? 280 : isDesktopWeb ? 250 : isTablet ? 220 : 200,\n    maxHeight: isLargeDesktop ? 400 : isDesktopWeb ? 350 : isTablet ? 300 : 250,\n    paddingVertical: isLargeDesktop ? 12 : isDesktopWeb ? 10 : isTablet ? 8 : 6,\n    paddingHorizontal: isLargeDesktop ? 16 : isDesktopWeb ? 14 : isTablet ? 12 : 10,\n    borderRadius: isLargeDesktop ? 14 : isDesktopWeb ? 12 : isTablet ? 11 : 10,\n    top: isLargeDesktop ? 80 : isDesktopWeb ? 70 : isTablet ? 65 : 60,\n    right: isLargeDesktop ? 24 : isDesktopWeb ? 20 : isTablet ? 18 : 15,\n    fontSize: isLargeDesktop ? 18 : isDesktopWeb ? 16 : isTablet ? 15 : scaleSize(14),\n  };\n};\n\n// Return the width for the login side panel\nexport const getLoginSidePanelWidth = () => {\n  const { width, isDesktop, isTablet } = getScreenInfo();\n  if (isDesktop) return 400;\n  if (isTablet) return 350;\n  return width * 0.85;\n};\n\n// Responsive padding function - returns padding object\nexport const responsivePadding = (\n  mobile: number | { horizontal?: number; vertical?: number },\n  tablet?: number | { horizontal?: number; vertical?: number },\n  desktop?: number | { horizontal?: number; vertical?: number }\n) => {\n  const { isTablet, isDesktop, isLargeDesktop } = getScreenInfo();\n  const { width } = Dimensions.get('window');\n  const isDesktopWeb = Platform.OS === 'web' && width > BREAKPOINTS.TABLET;\n\n  let result: { horizontal?: number; vertical?: number } = {};\n\n  if (isLargeDesktop && desktop !== undefined) {\n    result = typeof desktop === 'number'\n      ? { horizontal: Math.round(desktop * 1.2), vertical: Math.round(desktop * 1.2) }\n      : {\n        horizontal: desktop.horizontal ? Math.round(desktop.horizontal * 1.2) : undefined,\n        vertical: desktop.vertical ? Math.round(desktop.vertical * 1.2) : undefined\n      };\n  } else if (isDesktopWeb && desktop !== undefined) {\n    result = typeof desktop === 'number'\n      ? { horizontal: desktop, vertical: desktop }\n      : desktop;\n  } else if (isDesktop && desktop !== undefined) {\n    result = typeof desktop === 'number'\n      ? { horizontal: desktop, vertical: desktop }\n      : desktop;\n  } else if (isTablet && tablet !== undefined) {\n    result = typeof tablet === 'number'\n      ? { horizontal: tablet, vertical: tablet }\n      : tablet;\n  } else {\n    result = typeof mobile === 'number'\n      ? { horizontal: mobile, vertical: mobile }\n      : mobile;\n  }\n\n  return {\n    paddingHorizontal: result.horizontal ?? 0,\n    paddingVertical: result.vertical ?? 0,\n  };\n};\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/styles.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":1,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[19,31],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getScreenInfo' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getScreenInfo"},"fix":{"range":[152,170],"text":""},"desc":"Remove unused variable \"getScreenInfo\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getResponsiveButtonStyles' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getResponsiveButtonStyles"},"fix":{"range":[170,200],"text":""},"desc":"Remove unused variable \"getResponsiveButtonStyles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getResponsiveContainerStyles' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getResponsiveContainerStyles"},"fix":{"range":[200,232],"text":""},"desc":"Remove unused variable \"getResponsiveContainerStyles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getResponsiveModalStyles' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getResponsiveModalStyles"},"fix":{"range":[232,260],"text":""},"desc":"Remove unused variable \"getResponsiveModalStyles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getResponsiveMenuStyles' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getResponsiveMenuStyles"},"fix":{"range":[260,287],"text":""},"desc":"Remove unused variable \"getResponsiveMenuStyles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'responsiveSpacing' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"responsiveSpacing"},"fix":{"range":[287,308],"text":""},"desc":"Remove unused variable \"responsiveSpacing\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'responsiveFontSize' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"responsiveFontSize"},"fix":{"range":[308,330],"text":""},"desc":"Remove unused variable \"responsiveFontSize\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'responsiveWidth' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"responsiveWidth"},"fix":{"range":[330,349],"text":""},"desc":"Remove unused variable \"responsiveWidth\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BREAKPOINTS' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BREAKPOINTS"},"fix":{"range":[349,364],"text":""},"desc":"Remove unused variable \"BREAKPOINTS\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3099,3102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3099,3102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3300,3303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3300,3303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { StyleSheet, Dimensions, Platform } from \"react-native\";\nimport colors from \"./colors\";\nimport { \n  biDiTextAlign, \n  rowDirection, \n  scaleSize, \n  getScreenInfo, \n  getResponsiveButtonStyles,\n  getResponsiveContainerStyles,\n  getResponsiveModalStyles,\n  getResponsiveMenuStyles,\n  responsiveSpacing,\n  responsiveFontSize,\n  responsiveWidth,\n  BREAKPOINTS\n} from \"./responsive\";\nimport { FontSizes, LAYOUT_CONSTANTS } from \"./constants\";\n\n// TODO: CRITICAL - This styles file is extremely long (601+ lines). Split into themed modules:\n//   - baseStyles.ts for common/global styles\n//   - componentStyles.ts for reusable component styles\n//   - layoutStyles.ts for layout-specific styles\n//   - utilityStyles.ts for utility classes\n// TODO: Remove duplicate style definitions and create proper style inheritance\n// TODO: Implement proper theming system with light/dark mode support\n// TODO: Add comprehensive TypeScript interfaces for all style objects\n// TODO: Remove hardcoded values and use design token system\n// TODO: Implement proper responsive breakpoint system\n// TODO: Add comprehensive style validation and linting\n// TODO: Create proper style documentation and usage guidelines\n// TODO: Remove unused styles throughout the application\n// TODO: Implement proper cross-platform style optimization\n\n\n// Helper function to convert color string to rgba string\nconst colorToRgba = (color: string, opacity: number): string => {\n  // Safety check: if color is undefined or null, use black\n  if (!color || typeof color !== 'string') {\n    return `rgba(0, 0, 0, ${opacity})`;\n  }\n  \n  // If color is already rgba/rgb, extract RGB values\n  if (color.startsWith('rgba(')) {\n    const matches = color.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n    if (matches) {\n      return `rgba(${matches[1]}, ${matches[2]}, ${matches[3]}, ${opacity})`;\n    }\n  }\n  \n  // If color is hex (#RRGGBB or #RGB)\n  if (color.startsWith('#')) {\n    const hex = color.slice(1);\n    const r = parseInt(hex.length === 3 ? hex[0] + hex[0] : hex.slice(0, 2), 16);\n    const g = parseInt(hex.length === 3 ? hex[1] + hex[1] : hex.slice(2, 4), 16);\n    const b = parseInt(hex.length === 3 ? hex[2] + hex[2] : hex.slice(4, 6), 16);\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n  }\n  \n  // Fallback to black with opacity\n  return `rgba(0, 0, 0, ${opacity})`;\n};\n\n// Helper function to create shadow styles that work on both web and mobile\n// TODO: Extract this utility function to separate utilities file\n// TODO: Replace 'any' types with proper TypeScript interfaces\n// TODO: Add proper cross-platform shadow validation\n// TODO: Implement shadow presets for consistent usage\n// TODO: Add proper performance optimization for shadow rendering\nexport const createShadowStyle = (\n  shadowColor: string,\n  shadowOffset: { width: number; height: number },\n  shadowOpacity: number,\n  shadowRadius: number\n) => {\n  if (Platform.OS === 'web') {\n    const rgbaColor = colorToRgba(shadowColor, shadowOpacity);\n    return {\n      boxShadow: `${shadowOffset.width}px ${shadowOffset.height}px ${shadowRadius}px ${rgbaColor}`,\n    } as any; // TODO: Replace any with proper web style type\n  }\n  return {\n    shadowColor,\n    shadowOffset,\n    shadowOpacity,\n    shadowRadius,\n    elevation: Math.max(1, Math.round(shadowRadius)),\n  } as any; // TODO: Replace any with proper native style type\n};\n\n\nexport const styles = StyleSheet.create({\n  /**\n   * Container for the bottom navigation bar.\n   * Flexes to take available space and aligns content to the bottom.\n   */\n  container_bottom_nav: {\n    flex: 1,\n    justifyContent: \"flex-end\",\n    backgroundColor: 'transparent',\n  },\n  /**\n   * Style for a subtitle text.\n   * Centers the text and sets a black color.\n   */\n  subTitle: {\n    fontSize: 15,\n    color: colors.black,\n    textAlign: \"center\",\n  },\n  /**\n   * Container for the top bar of the screen.\n   * Uses transparent background, aligns items, and adds horizontal padding.\n   */\n  container_top_bar: {\n    backgroundColor: colors.backgroundSecondary,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 15,\n  },\n  /**\n   * Generic content container that centers its children both vertically and horizontally.\n   */\n  content: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  /**\n   * Safe area view style with a white background for the entire screen.\n   */\n  safeArea: {\n    backgroundColor: 'transparent',\n    flex: 1,\n  },\n  /**\n   * Style for a scroll view, allowing it to take up available space.\n   */\n  scrollView: {\n    flex: 1,\n    marginBottom: 20,\n    paddingBottom: Platform.OS === 'web' ? 60 : 200, // Much less padding on web\n    backgroundColor: colors.warningLight,\n  },\n  /**\n   * Header container with row layout, space between content, and bottom border.\n   */\n  header: {\n    flexDirection: rowDirection('row'),\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  /**\n   * Style for the main title in the header.\n   */\n  headerTitle: {\n    fontSize: scaleSize(20),\n    fontWeight: 'bold',\n    color: colors.textSecondary,\n  },\n  /**\n   * Container for left-aligned header icons.\n   */\n  headerIconsLeft: {\n    flexDirection: 'row',\n    width: 60,\n    justifyContent: 'space-between',\n  },\n  /**\n   * Container for right-aligned header icons.\n   */\n  headerIconsRight: {\n    flexDirection: 'row',\n    width: 60,\n    justifyContent: 'space-between',\n  },\n  /**\n   * Content style for scrollable areas with top and bottom padding.\n   */\n  scrollViewContent: {\n    paddingBottom: Platform.OS === 'web' ? 80 : 240, // Much less padding on web\n    paddingTop: 12,\n  },\n  /**\n   * Style for individual icons, providing horizontal margin and font size.\n   */\n  icon: {\n    marginHorizontal: 6,\n    fontSize: scaleSize(22),\n  },\n  /**\n   * General section container with padding.\n   */\n  sectionContainer: {\n    padding: 20,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  /**\n   * Main section container that fills available space with a light background.\n   */\n  mainSectionContainer: {\n    flex: 1,\n    backgroundColor: colors.surfaceVariant,\n  },\n  /**\n   * Title style for sections, bold and centered.\n   */\n  sectionTitle: {\n    fontSize: scaleSize(18),\n    fontWeight: 'bold',\n    marginBottom: 5,\n    textAlign: 'center',\n    paddingBottom: 0,\n  },\n  /**\n   * Container for recent buttons, arranged with space around them, light orange background, and rounded corners.\n   */\n  recentButtonsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    backgroundColor: colors.warningLight,\n    borderRadius: 15,\n    paddingVertical: 15,\n    paddingHorizontal: 20,\n    marginBottom: 0,\n  },\n  /**\n   * Style for individual recent buttons, with white background, padding, rounded corners, and shadow.\n   */\n  recentButton: {\n    backgroundColor: colors.white,\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    borderRadius: 10,\n    ...createShadowStyle(colors.black, { width: 0, height: 2 }, 0.1, 3),\n  },\n  /**\n   * Text style for recent buttons.\n   */\n  recentButtonText: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: colors.textSecondary,\n  },\n  /**\n   * Grid container for all categories, with wrap functionality, centered content, light orange background, and rounded corners.\n   */\n  allCategoriesGrid: {\n    // flex:  1,\n    marginBottom: 20,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    backgroundColor: colors.warningLight,\n    borderRadius: 15,\n    paddingVertical: 15,\n    paddingHorizontal: 0,\n    height: 800,\n  },\n  contentWrapperPadded: {\n    backgroundColor: colors.warningLight,\n    // paddingVertical: 10, // Vertical padding inside this wrapper\n    // We're letting localStyles.container handle paddingHorizontal\n    // If this view needs a background, define it here.\n  },\n  /**\n   * Style for individual category buttons, making them square, centered, with white background, rounded corners, and shadow.\n   */\n  categoryButton: {\n    backgroundColor: colors.white,\n    width: '25%',\n    height: '20%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10,\n    margin: 10,\n    ...createShadowStyle(colors.black, { width: 0, height: 2 }, 0.1, 3),\n  },\n  /**\n   * Text style for category buttons, centered.\n   */\n  categoryButtonText: {\n    fontSize: scaleSize(14),\n    fontWeight: 'bold',\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  /**\n   * Bottom navigation bar style with row layout, space around items, white background, and top border.\n   */\n  bottomNav: {\n    flexDirection: rowDirection('row'),\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderTopWidth: 1,\n    borderTopColor: colors.surfaceVariant,\n    paddingVertical: 10,\n  },\n  /**\n   * Style for individual items in the bottom navigation.\n   */\n  bottomNavItem: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  /**\n   * Icon style for bottom navigation items.\n   */\n  bottomNavIcon: {\n    fontSize: scaleSize(20),\n  },\n  /**\n   * Text style for bottom navigation items.\n   */\n  bottomNavText: {\n    fontSize: 12,\n    color: colors.textSecondary,\n  },\n  /**\n   * Container for the special center icon in the bottom navigation.\n   * Features an orange background, circular shape, lifted position, border, and shadow.\n   */\n  bottomNavCenterIconContainer: {\n    backgroundColor: colors.accent,\n    borderRadius: 30,\n    width: 60,\n    height: 60,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: -30,\n    borderWidth: 4,\n    borderColor: colors.surfaceVariant, // Match screen background color\n    ...createShadowStyle(colors.black, { width: 0, height: 4 }, 0.2, 5),\n  },\n  /**\n   * Icon style for the center icon in the bottom navigation.\n   */\n  bottomNavCenterIcon: {\n    fontSize: 30,\n    color: colors.white,\n  },\n  /**\n   * Container for search and filter elements with a light orange background.\n   */\n  searchFilterContainer: {\n    padding: 15,\n    backgroundColor: colors.warningLight,\n  },\n  /**\n   * Search box style with white background, rounded corners, and right alignment.\n   */\n  searchBox: {\n    backgroundColor: colors.white,\n    borderRadius: 10,\n    padding: 10,\n    marginBottom: 10,\n    alignSelf: 'flex-end',\n  },\n  /**\n   * Text style within the search box.\n   */\n  searchText: {\n    fontSize: scaleSize(16),\n    fontWeight: 'bold',\n    color: colors.warning,\n  },\n  /**\n   * Container for search input fields, arranged in a row.\n   */\n  searchInputs: {\n    flexDirection: rowDirection('row'),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  /**\n   * Style for individual search input fields, with white background, rounded corners, and right-aligned text.\n   */\n  searchInput: {\n    flex: 1,\n    backgroundColor: colors.white,\n    borderRadius: 10,\n    padding: 8,\n    marginHorizontal: 5,\n    textAlign: biDiTextAlign('right'),\n  },\n  /**\n   * Style for search icons.\n   */\n  searchIcon: {\n    padding: 8,\n    backgroundColor: colors.white,\n    borderRadius: 10,\n  },\n  /**\n   * Container for filter buttons, arranged with space around, light orange background, and rounded bottom corners.\n   */\n  filterButtonsContainer: {\n    flexDirection: rowDirection('row'),\n    justifyContent: 'space-around',\n    paddingVertical: 10,\n    backgroundColor: colors.warningLight,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n  },\n  /**\n   * Style for individual filter buttons, with orange background, rounded corners, and padding.\n   */\n  filterButton: {\n    backgroundColor: colors.pinkDeep,\n    borderRadius: 20,\n    paddingVertical: 8,\n    paddingHorizontal: 15,\n  },\n  /**\n   * Text style for filter buttons.\n   */\n  filterButtonText: {\n    color: colors.white,\n    fontWeight: 'bold',\n  },\n  /**\n   * Input section container with white background and padding.\n   */\n  inputSection: {\n    padding: 15,\n    backgroundColor: colors.white,\n  },\n  /**\n   * Style for an input field row, with right alignment for content.\n   */\n  inputField: {\n    flexDirection: rowDirection('row'),\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    marginBottom: 15,\n  },\n  /**\n   * Style for input field labels.\n   */\n  inputLabel: {\n    fontSize: scaleSize(16),\n    marginRight: 10,\n    fontWeight: 'bold',\n  },\n  /**\n   * Style for a dropdown component, with border, padding, and centered content.\n   */\n  dropdown: {\n    borderWidth: 1,\n    borderColor: colors.surfaceVariant,\n    borderRadius: 8,\n    padding: 10,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '60%',\n  },\n  /**\n   * Generic section style with light orange background, margin, and rounded corners.\n   */\n  section: {\n    padding: 15,\n    backgroundColor: colors.warningLight,\n    marginTop: 10,\n    borderRadius: 20,\n    marginHorizontal: 10,\n  },\n  /**\n   * Card style with row layout, white background, rounded corners, padding, and shadow.\n   */\n  card: {\n    flexDirection: rowDirection('row'),\n    backgroundColor: colors.white,\n    borderRadius: 15,\n    padding: 15,\n    marginBottom: 10,\n    alignItems: 'center',\n    ...createShadowStyle(colors.black, { width: 0, height: 2 }, 0.1, 3),\n  },\n  /**\n   * Style for images within cards, circular and with left margin.\n   */\n  cardImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginLeft: 15,\n  },\n  /**\n   * Content style for cards, aligning text to the right.\n   */\n  cardContent: {\n    flex: 1,\n    alignItems: 'flex-end',\n  },\n  /**\n   * Title style for cards.\n   */\n  cardTitle: {\n    fontSize: scaleSize(16),\n    fontWeight: 'bold',\n    marginBottom: 5,\n  },\n  /**\n   * Description style for cards.\n   */\n  cardDescription: {\n    fontSize: 14,\n    color: 'gray', // Keeping this as a literal as no specific gray color is defined in Colors for this\n  },\n  /**\n   * Main container style, aligning content to the bottom and with an off-white background.\n   */\n  container: {\n    flex: 1,\n    ...Platform.select({\n      web: {\n        alignSelf: \"stretch\", // Use full width on web\n        width: \"100%\", // Full width\n        maxWidth: \"100vw\", // Use viewport width\n        minHeight: \"100vh\", // Ensure full height\n      },\n    }),\n    backgroundColor: colors.background,\n  },\n  /**\n   * Scroll container with padding for content.\n   */\n  scrollContainer: {\n    padding: 20,\n    flex: 1,\n    paddingTop: 60,\n  },\n  /**\n   * Top section style, centering its content.\n   */\n  topSection: {\n    alignItems: 'center',\n  },\n  /**\n   * Main title style, bold, black, and centered.\n   */\n  title: {\n    fontSize: scaleSize(32),\n    fontWeight: 'bold',\n    color: colors.black,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  /**\n   * Top bar title style for navigation headers.\n   */\n  topBarTitle: {\n    fontSize: scaleSize(18),\n    fontWeight: '600',\n    color: colors.topNavTitle,\n    textAlign: 'center',\n  },\n  /**\n   * Subtitle style, with specific color and centered.\n   */\n  subtitle: {\n    fontSize: scaleSize(18),\n    color: colors.textSecondary, // Keeping this as a literal as no specific gray color is defined in Colors for this\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  /**\n   * Description text style, with specific color, line height, and right alignment.\n   */\n  description: {\n    fontSize: scaleSize(16),\n    color: colors.textPrimary, // Keeping this as a literal as no specific gray color is defined in Colors for this\n    lineHeight: 24,\n    textAlign: biDiTextAlign('right'),\n  },\n  /**\n   * Bottom section container with padding, top border, and pink background.\n   */\n  bottomSection: {\n    padding: 20,\n    borderTopWidth: 1,\n    borderColor: colors.border,\n    backgroundColor: colors.secondary,\n  },\n  /**\n   * Button style with dark pink background, padding, rounded corners, and centered content.\n   * Note: Use getResponsiveButtonStyles() for dynamic responsive values in components\n   */\n  button: {\n    alignSelf: \"center\", // Make container as small as needed\n    backgroundColor: colors.pinkDeep,\n    paddingVertical: 14,\n    paddingHorizontal: 24,\n    borderRadius: 25,\n    alignItems: 'center',\n    minWidth: 200,\n    maxWidth: 400,\n  },\n  /**\n   * Text style for buttons.\n   * Note: Use responsiveFontSize() for dynamic responsive font sizes in components\n   */\n  buttonText: {\n    color: colors.white,\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  /**\n   * Logo image style, centered and with specific dimensions.\n   */\n  logo: {\n    width: 180,\n    height: 180,\n    marginTop: 20,\n    justifyContent: \"center\",\n    alignSelf: 'center',\n  },\n  /**\n   * Form container style with vibrant orange background, padding, rounded corners, and centered.\n   */\n  formContainer: {\n    width: '90%',\n    height: '60%',\n    backgroundColor: colors.accent,\n    padding: 24,\n    borderRadius: 20,\n    marginTop: 10,\n    alignSelf: 'center',\n  },\n  /**\n   * Input field style within forms, with peach background, padding, rounded corners, and white text.\n   */\n  input: {\n    backgroundColor: colors.warningLight,\n    padding: 12,\n    borderRadius: 20,\n    marginBottom: 12,\n    color: colors.white,\n  },\n  /**\n   * Style for password hint text, black, right-aligned, and underlined.\n   */\n  passwordHint: {\n    color: colors.black,\n    fontSize: 14,\n    textAlign: 'right',\n    marginBottom: 16,\n    textDecorationLine: 'underline',\n  },\n  /**\n   * Row for buttons, with reverse direction and space between them.\n   */\n  buttonsRow: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'space-between',\n    marginBottom: 20,\n  },\n  /**\n   * Style for a primary button.\n   */\n  primaryButton: {\n    backgroundColor: colors.accent,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 20,\n  },\n  /**\n   * Style for a secondary button.\n   */\n  secondaryButton: {\n    backgroundColor: colors.warningLight,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 20,\n  },\n  /**\n   * Style for \"or\" text, centered and bold.\n   */\n  orText: {\n    textAlign: 'center',\n    color: colors.black,\n    fontWeight: 'bold',\n    marginBottom: 12,\n  },\n  /**\n   * Row for social media icons, distributed evenly.\n   */\n  iconsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n  },\n  /**\n   * Wrapper for top content, ensuring it pushes subsequent content downwards and starts from the top.\n   */\n  topContentWrapper: {\n    flex: 1,\n    justifyContent: 'flex-start',\n  },\n  loadingText: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  errorText: {\n    color: \"red\",\n    fontSize: 18,\n    textAlign: \"center\",\n  },\n  /**\n   * Generic centered full-screen container for loading/empty states.\n   */\n  centeredScreen: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n  },\n  /**\n   * Row container for top-bar icon groups with platform/orientation-aware direction.\n   */\n  topBarIconsRow: {\n    flexDirection: rowDirection('row'),\n    // Use margin between children instead of gap for broader RN compatibility\n    // Consumers should add marginHorizontal on child buttons if needed\n  },\n  /**\n   * Touchable area for top-bar icons.\n   */\n  topBarIconButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  /**\n   * Title container within top bar.\n   */\n  topBarTitleContainer: {\n    alignItems: 'center',\n  },\n  /**\n   * Badge indicator for unread notifications count on top bar icon.\n   */\n  notificationBadge: {\n    position: 'absolute',\n    top: -2,\n    right: -2,\n    backgroundColor: colors.error,\n    borderRadius: 10,\n    minWidth: 18,\n    height: 18,\n    paddingHorizontal: 4,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1.5,\n    borderColor: colors.white,\n    ...LAYOUT_CONSTANTS.SHADOW.LIGHT,\n  },\n  /**\n   * Text inside the notification badge.\n   */\n  notificationBadgeText: {\n    color: colors.white,\n    fontSize: FontSizes.extraSmall,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n});\n\nexport default styles;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/globals/types.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2657,2660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2657,2660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BottomTabNavigationProp } from \"@react-navigation/bottom-tabs\";\nimport {\n  NavigationProp,\n  NavigatorScreenParams,\n  ParamListBase,\n} from \"@react-navigation/native\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { ImageSourcePropType } from \"react-native\";\n\nexport interface Task {\n  id: string;\n  title: string;\n  description?: string;\n  completed: boolean;\n  dueDate?: Date;\n  priority: \"Low\" | \"Medium\" | \"High\";\n  createdAt: Date;\n  category?: string;\n  location?: string;\n  tags?: string[];\n}\n\nexport type Filter = \"All\" | \"Pending\" | \"Completed\";\nexport type SortBy = \"createdAt\" | \"dueDate\" | \"priority\";\nexport type SortOrder = \"asc\" | \"desc\";\n\n// Interface for defining the structure of bubble data\nexport interface BubbleData {\n  id: string;\n  size: number;\n  x: number;\n  y: number;\n  value: number | null;\n  name: string | null;\n  directionX: number;\n  directionY: number;\n  delay: number;\n  isBackground: boolean;\n}\n\nexport type DonationsStackParamList = {\n  DonationsScreen: undefined;\n  MoneyScreen: undefined;\n  TrumpScreen: undefined;\n  KnowledgeScreen: undefined;\n  TimeScreen: undefined;\n  ItemsScreen: undefined;\n  CategoryScreen: undefined;\n  CommunityChallengesScreen: { mode?: 'search' | 'offer' } | undefined;\n  ChallengeDetailsScreen: { challengeId: string; openEntryForm?: boolean } | undefined;\n  ChallengeStatisticsScreen: undefined;\n  MyChallengesScreen: undefined;\n  MyCreatedChallengesScreen: undefined;\n  // Top bar accessible screens that are also used inside the Donations stack\n  ChatListScreen: undefined;\n  ChatDetailScreen: { chatId?: string } | undefined;\n  NewChatScreen: undefined;\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  LandingSiteScreen: undefined;\n  SettingsScreen: undefined;\n  DiscoverPeopleScreen: undefined;\n  // Category screens\n  FoodScreen: undefined;\n  ClothesScreen: undefined;\n  BooksScreen: undefined;\n  FurnitureScreen: undefined;\n  MedicalScreen: undefined;\n  AnimalsScreen: undefined;\n  HousingScreen: undefined;\n  SupportScreen: undefined;\n  EducationScreen: undefined;\n  EnvironmentScreen: undefined;\n  TechnologyScreen: undefined;\n  MusicScreen: undefined;\n  GamesScreen: undefined;\n  RiddlesScreen: undefined;\n  RecipesScreen: undefined;\n  PlantsScreen: undefined;\n  WasteScreen: undefined;\n  ArtScreen: undefined;\n  SportsScreen: undefined;\n  DreamsScreen: undefined;\n  FertilityScreen: undefined;\n  JobsScreen: undefined;\n  MatchmakingScreen: undefined;\n  MentalHealthScreen: undefined;\n  GoldenAgeScreen: undefined;\n  LanguagesScreen: undefined;\n  UserProfileScreen: { userId: string; userName?: string; characterData?: any } | undefined;\n  FollowersScreen: { userId: string; type: 'followers' | 'following'; title: string } | undefined;\n};\n\nexport type SettingItemType = \"navigate\" | \"toggle\" | \"button\" | \"value\";\n\nexport interface SettingsItemProps {\n  title: string;\n  description?: string;\n  iconName?: string;\n  type: SettingItemType;\n  onPress?: () => void;\n  value?: boolean;\n  onValueChange?: (newValue: boolean) => void;\n  displayValue?: string;\n  isDestructive?: boolean;\n  children?: React.ReactNode;\n}\n\nexport interface SectionHeaderItem {\n  type: \"sectionHeader\";\n  title?: string;\n}\n\nexport type SettingsDataItem = SettingsItemProps | SectionHeaderItem;\n\nexport interface WhatsAppGroup {\n  name: string;\n  link: string;\n  image: ImageSourcePropType;\n}\n\nexport interface Filters {\n  to: string;\n  from: string;\n  when: string;\n}\n\nexport interface TrumpResult {\n  id: string;\n  name: string;\n  from: string;\n  to: string;\n  date: string;\n  time: string;\n}\n\nexport type ListItem =\n  | { type: \"form\"; key: string }\n  | { type: \"results-header\"; key: string }\n  | { type: \"result\"; key: string; data: TrumpResult }\n  | { type: \"groups-header\"; key: string }\n  | { type: \"group\"; key: string; data: WhatsAppGroup }\n  | { type: \"thank-you\"; key: string };\n\nexport interface TrumpScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n}\n// --- Root Stack Navigator (MainNavigator) Parameter List ---\n// This lists all the screens directly in your MainNavigator.tsx\nexport type RootStackParamList = {\n  HomeStack: NavigatorScreenParams<BottomTabNavigatorParamList>;\n  FirstScreen: undefined;\n  LoginScreen: undefined;\n  LandingSiteScreen: undefined;\n  SettingsScreen: undefined;\n  ChatListScreen: undefined;\n  NewChatScreen: undefined;\n  ChatDetailScreen: {\n    conversationId: string;\n    userName: string;\n    userAvatar: string;\n    otherUserId: string;\n  };\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  InactiveScreen: undefined;\n  WebViewScreen: undefined;\n  PostsReelsScreen: undefined; // ADD THIS LINE - this was probably missing\n  BookmarksScreen: undefined;\n  UserProfileScreen: {\n    userId: string;\n    userName: string;\n    userAvatar?: string;\n  };\n  FollowersScreen: {\n    userId: string;\n    type: 'followers' | 'following';\n    title: string;\n  };\n  DiscoverPeopleScreen: undefined;\n  OrgOnboardingScreen: undefined;\n  AdminOrgApprovalsScreen: undefined;\n  OrgDashboardScreen: undefined;\n  EditProfileScreen: undefined;\n  AdminDashboard: { viewOnly?: boolean; hideTopBar?: boolean; hideBottomBar?: boolean };\n};\n\n// --- Bottom Tab Navigator (BottomNavigator) Parameter List ---\n// This lists all the screens within your BottomNavigator.tsx\nexport type BottomTabNavigatorParamList = {\n  DonationsTab: undefined; // Renamed to avoid nested name collision with DonationsStack's DonationsScreen\n  HomeScreen: undefined; // This is the HomeScreen with the drag handle\n  SearchTab: undefined; // Renamed to avoid nested name collision with SearchTabStack's SearchScreen\n  ProfileScreen: undefined;\n  AdminTab: undefined; // Admin management tab (only visible to admins)\n  SettingsScreen: undefined;\n  ChatListScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  NotificationsScreen: undefined;\n};\n\n// --- Donations Stack (Example - adjust if you have internal screens) ---\n// If DonationsStack is just one screen, you might not need this,\n// but if it has multiple internal screens, define its own param list.\n// export type DonationsStackParamList = {\n//   DonationsMain: undefined;\n//   DonationDetails: { itemId: string };\n// };\n\n// Define the screens that will appear *inside* your PostsReelsScreen modal\nexport type PostsReelsStackParamList = {\n  PostsReels: undefined; // The content screen you want to show\n  SomeOtherContent: undefined; // Example of another screen within the modal\n  // Add any other screens that can be displayed inside the PostsReelsScreen modal\n};\n\nexport type AdminStackParamList = {\n  AdminDashboard: { viewOnly?: boolean; hideTopBar?: boolean; hideBottomBar?: boolean } | undefined;\n  AdminMoney: undefined;\n  AdminTasks: undefined;\n  AdminPeople: undefined;\n  AdminAdmins: undefined;\n  AdminReview: undefined;\n  AdminFiles: undefined;\n  AdminCRM: undefined;\n  AdminTimeManagement: undefined;\n  AdminTables: undefined;\n  AdminTableRows: {\n    tableId: string;\n    tableName: string;\n  };\n  ChatListScreen: undefined;\n  ChatDetailScreen: {\n    conversationId: string;\n    userName: string;\n    userAvatar: string;\n    otherUserId: string;\n  };\n  NewChatScreen: undefined;\n  SettingsScreen: undefined;\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  DiscoverPeopleScreen: undefined;\n  LandingSiteScreen: undefined;\n};\n\n// --- Helper Types for Navigation Props ---\n\n// For use with `useNavigation()` within screens that are part of the RootStack\nexport type RootStackNavigationProp<\n  RouteName extends keyof RootStackParamList\n> = StackNavigationProp<RootStackParamList, RouteName>;\n\n// For use with `useNavigation()` within screens that are part of the BottomTabNavigator\nexport type BottomTabNavigationPropType<\n  RouteName extends keyof BottomTabNavigatorParamList\n> = BottomTabNavigationProp<BottomTabNavigatorParamList, RouteName>;\n\n// You might also need a type for the 'route' prop if you're accessing params:\n// import { RouteProp } from '@react-navigation/native';\n// export type PostsReelsScreenRouteProp = RouteProp<RootStackParamList, 'PostsReelsScreen'>;\n\n// --- Shared app user preview type (lightweight, nullable fields allowed) ---\nexport interface UserPreview {\n  id: string;\n  name: string;\n  email?: string; // Added for filtering current user by email\n  avatar?: string;\n  bio?: string;\n  karmaPoints?: number;\n  completedTasks?: number;\n  followersCount?: number;\n  roles?: string[];\n  isVerified?: boolean;\n  isActive?: boolean;\n  location?: {\n    city: string;\n    country: string;\n  };\n  joinDate?: string;\n  interests?: string[];\n  parentManagerId?: string | null;\n  hierarchyLevel?: number | null; // ×“×¨×’×” ×‘×”×™×¨×¨×›×™×”: 0 = ×× ×”×œ ×¨××©×™, 1 = ×¡×•×¤×¨ ×× ×”×œ, 2+ = ×× ×”×œ×™×/××ª× ×“×‘×™×, null = ××©×ª××© ×¨×’×™×œ\n}\n\n// --- Community Challenges Types ---\nexport type ChallengeType = 'BOOLEAN' | 'NUMERIC' | 'DURATION';\nexport type ChallengeFrequency = 'DAILY' | 'WEEKLY' | 'FLEXIBLE';\nexport type ChallengeDifficulty = 'easy' | 'medium' | 'hard' | 'expert';\nexport type GoalDirection = 'maximize' | 'minimize' | null;\n\nexport interface CommunityChallenge {\n  id: string;\n  creator_id: string;\n  title: string;\n  description?: string;\n  image_url?: string;\n  type: ChallengeType;\n  frequency: ChallengeFrequency;\n  goal_value?: number;\n  goal_direction?: GoalDirection;\n  deadline?: string;\n  difficulty?: ChallengeDifficulty;\n  category?: string;\n  is_active: boolean;\n  participants_count: number;\n  created_at: string;\n  updated_at: string;\n  // Extended fields from JOIN\n  creator_name?: string;\n  creator_avatar?: string;\n  post_id?: string;\n  participants?: ChallengeParticipant[];\n}\n\nexport interface ChallengeParticipant {\n  id: string;\n  challenge_id: string;\n  user_id: string;\n  joined_at: string;\n  current_streak: number;\n  best_streak: number;\n  total_entries: number;\n  last_entry_date?: string;\n  // Extended fields from JOIN\n  user_name?: string;\n  user_avatar?: string;\n}\n\nexport interface ChallengeEntry {\n  id: string;\n  challenge_id: string;\n  user_id: string;\n  entry_date: string;\n  value: number;\n  notes?: string;\n  created_at: string;\n}\n\nexport interface ChallengeStatistics {\n  overall: {\n    active_challenges: number;\n    total_entries: number;\n    best_streak_overall: number;\n    avg_current_streak: number;\n  };\n  challenges: Array<ChallengeParticipant & {\n    title: string;\n    type: ChallengeType;\n    frequency: ChallengeFrequency;\n    difficulty?: ChallengeDifficulty;\n    category?: string;\n    goal_value?: number;\n    deadline?: string;\n  }>;\n}\n\n// New types for Daily Habits Tracker\nexport type EntryStatus = 'success' | 'failed' | 'neutral' | 'empty';\n\nexport interface ChallengeEntryWithStatus extends ChallengeEntry {\n  status: EntryStatus;\n}\n\nexport interface DailyTrackerChallenge extends CommunityChallenge {\n  participant_data: ChallengeParticipant;\n}\n\nexport interface DailyTrackerData {\n  challenges: DailyTrackerChallenge[];\n  entries_by_date: {\n    [date: string]: {\n      [challengeId: string]: ChallengeEntryWithStatus;\n    };\n  };\n  stats: {\n    total_success_rate: number | null;\n    total_days_tracked: number;\n  };\n}\n\nexport type ViewMode = 'day' | 'week' | 'month';\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/AuthConfiguration.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1763,1766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1763,1766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2942,2945],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2942,2945],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":422,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":424,"endColumn":84,"suggestions":[{"messageId":"addBrackets","fix":{"range":[12347,12563],"text":"{ const webDomain = typeof window !== 'undefined' \n        ? window.location.origin \n        : (process.env.EXPO_PUBLIC_WEB_DOMAIN || 'https://karma-community-kc.com');\n      \n      return `${webDomain}/oauthredirect`; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * GOOGLE AUTHENTICATION CONFIGURATION\n * ========================================\n * \n * Centralized configuration for all Google authentication settings.\n * This file contains all security, performance, and behavioral settings\n * for the authentication system.\n * \n * CONFIGURATION CATEGORIES:\n * - OAuth settings (client IDs, scopes, redirect URIs)\n * - Security settings (token expiration, validation rules)\n * - Performance settings (caching, retry logic)\n * - UI/UX settings (timeouts, error messages)\n * - Platform-specific settings (iOS, Android, Web)\n * \n * SECURITY PRINCIPLES:\n * - Environment-based configuration (no hardcoded secrets)\n * - Minimal permission scope (only necessary permissions)\n * - Secure defaults with explicit overrides\n * - Regular rotation of secrets and tokens\n * \n * AUTHOR: AI Assistant\n * SECURITY LEVEL: Enterprise Grade\n * LAST UPDATED: 2024\n */\n\nimport Constants from 'expo-constants';\nimport { Platform } from 'react-native';\nimport { logger } from '../utils/loggerService';\nimport { API_BASE_URL } from '../utils/dbConfig';\n\n// ========================================\n// ENVIRONMENT VALIDATION\n// ========================================\n\n/**\n * Validate that all required environment variables are present\n * This prevents runtime errors and provides clear configuration feedback\n */\nconst validateEnvironmentConfiguration = (): {\n  isValid: boolean;\n  missingVars: string[];\n  warnings: string[];\n} => {\n  const requiredVars = [\n    'EXPO_PUBLIC_API_BASE_URL',\n  ];\n  \n  const recommendedVars = [\n    'EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID',\n    'EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID', \n    'EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID',\n  ];\n  const extra = (Constants?.expoConfig as any)?.extra || {};\n  const getVar = (varName: string) => process.env[varName] ?? extra[varName];\n\n  const missingRequired = requiredVars.filter(varName => !getVar(varName));\n  const missingRecommended = recommendedVars.filter(varName => !getVar(varName));\n\n  const isValid = missingRequired.length === 0;\n\n  if (!isValid) {\n    logger.error('AuthConfiguration', 'Missing required environment variables', {\n      missing: missingRequired\n    });\n  }\n\n  if (missingRecommended.length > 0) {\n    logger.warn('AuthConfiguration', 'Missing recommended environment variables', {\n      missing: missingRecommended\n    });\n  }\n\n  return {\n    isValid,\n    missingVars: missingRequired,\n    warnings: missingRecommended\n  };\n};\n\n// ========================================\n// CLIENT ID CONFIGURATION\n// ========================================\n\n/**\n * Google OAuth Client IDs for different platforms\n * These are loaded from environment variables for security\n * \n * SECURITY NOTE: Client IDs are not secrets (they're public by design)\n * but they should still be properly configured per environment\n */\nexport const getGoogleClientIds = () => {\n  const extra = (Constants?.expoConfig as any)?.extra ?? {};\n  \n  const clientIds = {\n    /** iOS client ID from Google Cloud Console */\n    ios: extra.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID || \n         process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n         \n    /** Android client ID from Google Cloud Console */  \n    android: extra.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID || \n             process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n             \n    /** Web client ID from Google Cloud Console */\n    web: extra.EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID || \n         process.env.EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID,\n  };\n\n  // Log configuration status (IDs are public so logging is safe)\n  logger.info('AuthConfiguration', 'Google Client IDs loaded', {\n    hasIosClientId: !!clientIds.ios,\n    hasAndroidClientId: !!clientIds.android,\n    hasWebClientId: !!clientIds.web,\n    platform: Platform.OS\n  });\n\n  return clientIds;\n};\n\n/**\n * Check if Google OAuth is properly configured for current platform\n */\nexport const isGoogleOAuthConfigured = (): boolean => {\n  const clientIds = getGoogleClientIds();\n  \n  switch (Platform.OS) {\n    case 'ios': \n      return !!(clientIds.ios || clientIds.web);\n    case 'android': \n      return !!(clientIds.android || clientIds.web);\n    case 'web': \n      return !!clientIds.web;\n    default: \n      return false;\n  }\n};\n\n// ========================================\n// OAUTH SETTINGS\n// ========================================\n\n/**\n * Google OAuth configuration settings\n */\nexport const OAUTH_SETTINGS = {\n  /**\n   * OAuth scopes - minimal permissions for security and user privacy\n   * \n   * - openid: Required for OpenID Connect\n   * - profile: User's basic profile information (name, picture)\n   * - email: User's email address\n   * \n   * NOTE: We deliberately do NOT request additional scopes like:\n   * - google-auth-library: Would allow access to user's Google services\n   * - drive: Would allow access to user's Google Drive\n   * - calendar: Would allow access to user's calendar\n   */\n  SCOPES: ['openid', 'profile', 'email'] as const,\n  \n  /**\n   * OAuth response type\n   * Using 'id_token' for immediate verification without backend code exchange\n   * \n   * SECURITY: ID tokens are signed JWTs that can be verified directly\n   * TODO: Consider switching to 'code' with PKCE for enhanced security\n   */\n  RESPONSE_TYPE: 'id_token' as const,\n  \n  /**\n   * Maximum time to wait for user OAuth interaction\n   * Prevents hanging authentication flows\n   */\n  USER_INTERACTION_TIMEOUT: 5 * 60 * 1000, // 5 minutes\n  \n  /**\n   * OAuth state parameter for CSRF protection\n   * TODO: Implement proper state generation and validation\n   */\n  USE_STATE_PARAMETER: false, // TODO: Enable when implemented\n  \n  /**\n   * Use PKCE (Proof Key for Code Exchange) for enhanced security\n   * TODO: Implement PKCE support for authorization code flow\n   */\n  USE_PKCE: false, // TODO: Enable when implemented\n} as const;\n\n// ========================================\n// SECURITY SETTINGS\n// ========================================\n\n/**\n * Security-related configuration\n */\nexport const SECURITY_SETTINGS = {\n  /**\n   * JWT Token settings\n   */\n  TOKEN: {\n    /** How long before expiry should we refresh tokens (5 minutes) */\n    REFRESH_THRESHOLD_MS: 5 * 60 * 1000,\n    \n    /** Maximum age for ID tokens we accept (5 minutes) */\n    MAX_TOKEN_AGE_MS: 5 * 60 * 1000,\n    \n    /** Maximum number of token refresh attempts before requiring re-auth */\n    MAX_REFRESH_ATTEMPTS: 3,\n    \n    /** How often to validate tokens when app is active (15 minutes) */\n    VALIDATION_INTERVAL_MS: 15 * 60 * 1000,\n  },\n  \n  /**\n   * Session settings\n   */\n  SESSION: {\n    /** Session timeout for inactive users (24 hours) */\n    INACTIVE_TIMEOUT_MS: 24 * 60 * 60 * 1000,\n    \n    /** How often to check for session expiry (1 minute) */\n    EXPIRY_CHECK_INTERVAL_MS: 1 * 60 * 1000,\n    \n    /** Whether to extend session on activity */\n    EXTEND_ON_ACTIVITY: true,\n  },\n  \n  /**\n   * Rate limiting settings (client-side awareness)\n   */\n  RATE_LIMITING: {\n    /** Maximum authentication attempts per hour */\n    MAX_AUTH_ATTEMPTS_PER_HOUR: 10,\n    \n    /** Backoff delay after failed attempts (exponential) */\n    BACKOFF_DELAY_MS: 1000,\n    \n    /** Maximum backoff delay */\n    MAX_BACKOFF_DELAY_MS: 30 * 1000,\n  },\n  \n  /**\n   * Storage security settings\n   */\n  STORAGE: {\n    /** Use secure storage for tokens (platform-specific) */\n    USE_SECURE_STORAGE: true,\n    \n    /** Encrypt sensitive data in storage */\n    ENCRYPT_STORAGE: false, // TODO: Implement encryption\n    \n    /** Clear storage on app uninstall */\n    CLEAR_ON_UNINSTALL: true,\n  },\n} as const;\n\n// ========================================\n// API CONFIGURATION\n// ========================================\n\n/**\n * API service configuration\n */\nexport const API_SETTINGS = {\n  /**\n   * Base URLs for different environments\n   */\n  BASE_URLS: {\n    development: 'http://localhost:3001',\n    staging: 'https://staging-api.karma-community.com', // TODO: Set up staging environment\n    production: 'https://api.karma-community.com', // TODO: Set up production environment\n  },\n  \n  /**\n   * Request settings\n   */\n  REQUEST: {\n    /** Default timeout for API requests (30 seconds) */\n    DEFAULT_TIMEOUT_MS: 30 * 1000,\n    \n    /** Maximum retry attempts for failed requests */\n    MAX_RETRIES: 3,\n    \n    /** Retry delay multiplier for exponential backoff */\n    RETRY_MULTIPLIER: 2,\n    \n    /** Maximum retry delay */\n    MAX_RETRY_DELAY_MS: 30 * 1000,\n  },\n  \n  /**\n   * Caching settings\n   */\n  CACHE: {\n    /** Enable response caching for GET requests */\n    ENABLED: true,\n    \n    /** Default cache duration (5 minutes) */\n    DEFAULT_DURATION_MS: 5 * 60 * 1000,\n    \n    /** Maximum cache size (number of entries) */\n    MAX_SIZE: 100,\n    \n    /** Cache TTL by endpoint pattern */\n    TTL_BY_ENDPOINT: {\n      '/api/users/': 15 * 60 * 1000,     // User profiles: 15 minutes\n      '/api/donations': 2 * 60 * 1000,   // Donations: 2 minutes\n      '/api/rides': 1 * 60 * 1000,       // Rides: 1 minute\n      '/api/stats/': 10 * 60 * 1000,     // Statistics: 10 minutes\n    },\n  },\n} as const;\n\n// ========================================\n// PLATFORM CONFIGURATION\n// ========================================\n\n/**\n * Platform-specific configuration\n */\nexport const PLATFORM_SETTINGS = {\n  /**\n   * iOS-specific settings\n   */\n  IOS: {\n    /** Use SFSafariViewController for OAuth (more secure) */\n    USE_SAFARI_VIEW_CONTROLLER: true,\n    \n    /** Enable keychain access group for shared storage */\n    KEYCHAIN_ACCESS_GROUP: 'com.navesarussi1.KarmaCommunity',\n    \n    /** Use Face ID/Touch ID for token access */\n    USE_BIOMETRIC_AUTH: false, // TODO: Implement biometric authentication\n  },\n  \n  /**\n   * Android-specific settings\n   */\n  ANDROID: {\n    /** Use Chrome Custom Tabs for OAuth */\n    USE_CHROME_CUSTOM_TABS: true,\n    \n    /** Android Keystore configuration */\n    KEYSTORE_ALIAS: 'karma_auth_keys',\n    \n    /** Use fingerprint authentication for token access */\n    USE_FINGERPRINT_AUTH: false, // TODO: Implement fingerprint authentication\n  },\n  \n  /**\n   * Web-specific settings\n   */\n  WEB: {\n    /** Use session storage for tokens (more secure than localStorage) */\n    USE_SESSION_STORAGE: true,\n    \n    /** Enable service worker for offline caching */\n    USE_SERVICE_WORKER: false, // TODO: Implement service worker\n    \n    /** Cross-origin settings for OAuth popup */\n    CORS_ORIGINS: [\n      'https://accounts.google.com',\n      'https://oauth2.googleapis.com',\n    ],\n  },\n} as const;\n\n// ========================================\n// ERROR CONFIGURATION\n// ========================================\n\n/**\n * Error handling configuration\n * Provides user-friendly Hebrew messages for all error scenarios\n */\nexport const ERROR_MESSAGES = {\n  // Network errors\n  NETWORK_ERROR: '×‘×¢×™×™×ª ×—×™×‘×•×¨ ×œ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×©×œ×š ×•× ×¡×” ×©×•×‘.',\n  TIMEOUT_ERROR: '×”×‘×§×©×” × ××©×›×” ×™×•×ª×¨ ××“×™ ×–××Ÿ. ×× × × ×¡×” ×©×•×‘.',\n  SERVER_ERROR: '×©×’×™××ª ×©×¨×ª. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.',\n  \n  // Authentication errors  \n  INVALID_TOKEN: '××¡×™××•×Ÿ ×”××™××•×ª ×©×’×•×™. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n  TOKEN_EXPIRED: '×ª×•×§×£ ×”××™××•×ª ×¤×’. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n  AUTHENTICATION_REQUIRED: '× ×“×¨×© ××™××•×ª. ×× × ×”×ª×—×‘×¨ ×œ××¢×¨×›×ª.',\n  \n  // OAuth errors\n  OAUTH_CANCELLED: '×”××™××•×ª ×‘×•×˜×œ ×¢×œ ×™×“×™ ×”××©×ª××©.',\n  OAUTH_FAILED: '×”××™××•×ª ×¢× Google × ×›×©×œ. ×× × × ×¡×” ×©×•×‘.',\n  INVALID_OAUTH_RESPONSE: '×ª×’×•×‘×” ×©×’×•×™×” ×Google. ×× × × ×¡×” ×©×•×‘.',\n  \n  // Configuration errors\n  MISSING_CLIENT_ID: 'Google Client ID ××™× ×• ××•×’×“×¨.',\n  INVALID_REDIRECT_URI: '×›×ª×•×‘×ª ×”×—×–×¨×” ×©×’×•×™×”.',\n  MISSING_API_URL: '×›×ª×•×‘×ª ×”×©×¨×ª ××™× ×” ××•×’×“×¨×ª.',\n  \n  // Rate limiting errors\n  RATE_LIMIT_EXCEEDED: '×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª. ×× × ×”××ª×Ÿ ××¡×¤×¨ ×“×§×•×ª.',\n  TOO_MANY_AUTH_ATTEMPTS: '×™×•×ª×¨ ××“×™ × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª. ×× × ×”××ª×Ÿ ×•× ×¡×” ×©×•×‘.',\n  \n  // Generic errors\n  UNKNOWN_ERROR: '×©×’×™××” ×œ× ×¦×¤×•×™×”. ×× × × ×¡×” ×©×•×‘.',\n  SERVICE_UNAVAILABLE: '×”×©×™×¨×•×ª ××™× ×• ×–××™×Ÿ ×›×¨×’×¢. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.',\n} as const;\n\n// ========================================\n// REDIRECT URI CONFIGURATION\n// ========================================\n\n/**\n * Generate redirect URI based on platform and environment\n * \n * SECURITY: Redirect URIs must be whitelisted in Google Cloud Console\n * to prevent OAuth redirect attacks\n * \n * @returns Platform-specific redirect URI\n */\nexport const getRedirectUri = (): string => {\n  switch (Platform.OS) {\n    case 'web':\n      // Web: Use current domain or configured production domain\n      const webDomain = typeof window !== 'undefined' \n        ? window.location.origin \n        : (process.env.EXPO_PUBLIC_WEB_DOMAIN || 'https://karma-community-kc.com');\n      \n      return `${webDomain}/oauthredirect`;\n    \n    case 'ios':\n    case 'android':\n      // Mobile: Use custom scheme for deep linking\n      return `com.navesarussi1.KarmaCommunity://oauthredirect`;\n    \n    default:\n      logger.error('AuthConfiguration', 'Unsupported platform for redirect URI');\n      return '';\n  }\n};\n\n// ========================================\n// OAUTH CONFIGURATION FACTORY\n// ========================================\n\n/**\n * Create OAuth configuration object for expo-auth-session\n * \n * This function generates the complete OAuth configuration\n * based on platform and environment settings\n * \n * @returns OAuth configuration object\n */\nexport const createOAuthConfig = () => {\n  const clientIds = getGoogleClientIds();\n  const redirectUri = getRedirectUri();\n  \n  // Validate configuration\n  if (!isGoogleOAuthConfigured()) {\n    logger.error('AuthConfiguration', 'Cannot create OAuth config - missing client IDs');\n    throw new Error('Google OAuth not properly configured');\n  }\n\n  const config = {\n    // Client IDs for different platforms\n    iosClientId: clientIds.ios,\n    androidClientId: clientIds.android,\n    webClientId: clientIds.web,\n    expoClientId: clientIds.web, // Expo uses web client ID\n    \n    // OAuth parameters\n    scopes: OAUTH_SETTINGS.SCOPES,\n    responseType: OAUTH_SETTINGS.RESPONSE_TYPE,\n    redirectUri,\n    \n    // Additional parameters for security (when implemented)\n    // TODO: Add these when PKCE and state are implemented\n    // codeChallenge: generateCodeChallenge(),\n    // codeChallengeMethod: 'S256',\n    // state: generateSecureState(),\n    \n    // Additional Google-specific parameters\n    additionalParameters: {\n      // Ensure fresh consent (good for testing, disable in production)\n      prompt: process.env.NODE_ENV === 'development' ? 'select_account' : undefined,\n      \n      // Request ID token with email verification\n      include_granted_scopes: 'true',\n      \n      // Hint for account selection (can improve UX)\n      login_hint: undefined, // TODO: Could be set if we know user's email\n    },\n  };\n\n  logger.debug('AuthConfiguration', 'OAuth configuration created', {\n    platform: Platform.OS,\n    redirectUri,\n    scopeCount: config.scopes.length,\n    hasPromptParam: !!config.additionalParameters?.prompt\n  });\n\n  return config;\n};\n\n// ========================================\n// API ENDPOINT CONFIGURATION\n// ========================================\n\n/**\n * API endpoint definitions\n * Centralized endpoint management for consistency and maintainability\n */\nexport const API_ENDPOINTS = {\n  // Authentication endpoints\n  AUTH: {\n    GOOGLE: '/auth/google',\n    REFRESH: '/auth/refresh', \n    LOGOUT: '/auth/logout',\n    SESSIONS: '/auth/sessions',\n    VALIDATE: '/auth/validate',\n  },\n  \n  // User endpoints\n  USERS: {\n    PROFILE: (userId: string) => `/api/users/${userId}`,\n    UPDATE_PROFILE: (userId: string) => `/api/users/${userId}`,\n    LIST: '/api/users',\n    ACTIVITIES: (userId: string) => `/api/users/${userId}/activities`,\n    STATS: (userId: string) => `/api/users/${userId}/stats`,\n    FOLLOW: (userId: string) => `/api/users/${userId}/follow`,\n  },\n  \n  // Donation endpoints\n  DONATIONS: {\n    LIST: '/api/donations',\n    CREATE: '/api/donations',\n    DETAIL: (id: string) => `/api/donations/${id}`,\n    UPDATE: (id: string) => `/api/donations/${id}`,\n    DELETE: (id: string) => `/api/donations/${id}`,\n    CATEGORIES: '/api/donations/categories',\n    STATS: '/api/donations/stats',\n    USER_DONATIONS: (userId: string) => `/api/donations/user/${userId}`,\n  },\n  \n  // Ride endpoints\n  RIDES: {\n    LIST: '/api/rides',\n    CREATE: '/api/rides',\n    DETAIL: (id: string) => `/api/rides/${id}`,\n    UPDATE: (id: string) => `/api/rides/${id}`,\n    DELETE: (id: string) => `/api/rides/${id}`,\n    BOOK: (id: string) => `/api/rides/${id}/book`,\n    USER_RIDES: (userId: string) => `/api/rides/user/${userId}`,\n    STATS: '/api/rides/stats',\n  },\n  \n  // Community endpoints\n  COMMUNITY: {\n    STATS: '/api/stats/community',\n    TRENDS: '/api/stats/community/trends',\n    CITIES: '/api/stats/community/cities',\n    DASHBOARD: '/api/stats/dashboard',\n    REAL_TIME: '/api/stats/real-time',\n  },\n  \n  // Chat endpoints\n  CHAT: {\n    CONVERSATIONS: '/api/chat/conversations',\n    MESSAGES: '/api/chat/messages',\n    SEARCH: '/api/chat/search',\n    USER_CONVERSATIONS: (userId: string) => `/api/chat/conversations/user/${userId}`,\n    CONVERSATION_MESSAGES: (conversationId: string) => `/api/chat/conversations/${conversationId}/messages`,\n  },\n  \n  // Health and monitoring\n  HEALTH: '/health',\n  STATUS: '/status',\n} as const;\n\n// ========================================\n// PERFORMANCE CONFIGURATION\n// ========================================\n\n/**\n * Performance optimization settings\n */\nexport const PERFORMANCE_SETTINGS = {\n  /**\n   * Request caching configuration\n   */\n  CACHE: {\n    /** Enable caching for GET requests */\n    ENABLED: true,\n    \n    /** Maximum number of cached responses */\n    MAX_ENTRIES: 100,\n    \n    /** Default cache duration */\n    DEFAULT_TTL_MS: 5 * 60 * 1000, // 5 minutes\n    \n    /** Cache key prefix for namespacing */\n    KEY_PREFIX: 'karma_api_cache_',\n    \n    /** Automatically purge expired entries */\n    AUTO_PURGE: true,\n    \n    /** Purge interval */\n    PURGE_INTERVAL_MS: 10 * 60 * 1000, // 10 minutes\n  },\n  \n  /**\n   * Request optimization settings\n   */\n  REQUEST: {\n    /** Enable request compression */\n    COMPRESSION: true,\n    \n    /** Enable HTTP/2 multiplexing where available */\n    HTTP2_MULTIPLEXING: true,\n    \n    /** Connection keepalive duration */\n    KEEPALIVE_MS: 30 * 1000,\n    \n    /** Enable request batching for multiple operations */\n    BATCHING: false, // TODO: Implement request batching\n  },\n  \n  /**\n   * Monitoring settings\n   */\n  MONITORING: {\n    /** Track request performance metrics */\n    TRACK_PERFORMANCE: true,\n    \n    /** Log slow requests (over this threshold) */\n    SLOW_REQUEST_THRESHOLD_MS: 3000, // 3 seconds\n    \n    /** Track error rates */\n    TRACK_ERROR_RATES: true,\n    \n    /** Send analytics to server */\n    SEND_ANALYTICS: false, // TODO: Implement analytics collection\n  },\n} as const;\n\n// ========================================\n// ENVIRONMENT-SPECIFIC CONFIGURATION\n// ========================================\n\n/**\n * Get API base URL based on current environment\n */\nexport const getApiBaseUrl = (): string => API_BASE_URL;\n\n// ========================================\n// CONFIGURATION VALIDATION\n// ========================================\n\n/**\n * Validate the complete authentication configuration\n * \n * This function checks all configuration aspects and provides\n * detailed feedback about any issues found.\n * \n * @returns Validation result with details\n */\nexport const validateAuthConfiguration = (): {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n  recommendations: string[];\n} => {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n  const recommendations: string[] = [];\n\n  // Check environment variables\n  const envValidation = validateEnvironmentConfiguration();\n  if (!envValidation.isValid) {\n    errors.push(...envValidation.missingVars.map(v => `Missing required environment variable: ${v}`));\n  }\n  warnings.push(...envValidation.warnings.map(v => `Missing recommended environment variable: ${v}`));\n\n  // Check OAuth configuration\n  if (!isGoogleOAuthConfigured()) {\n    errors.push('Google OAuth not configured for current platform');\n  }\n\n  // Check API URL\n  const apiUrl = getApiBaseUrl();\n  if (!apiUrl || !apiUrl.startsWith('http')) {\n    errors.push('Invalid API base URL configuration');\n  }\n\n  // Security recommendations\n  if (process.env.NODE_ENV === 'production') {\n    if (!SECURITY_SETTINGS.STORAGE.USE_SECURE_STORAGE) {\n      warnings.push('Secure storage is disabled in production');\n    }\n    \n    if (!OAUTH_SETTINGS.USE_STATE_PARAMETER) {\n      recommendations.push('Enable OAuth state parameter for CSRF protection');\n    }\n    \n    if (!OAUTH_SETTINGS.USE_PKCE) {\n      recommendations.push('Enable PKCE for enhanced OAuth security');\n    }\n  }\n\n  const isValid = errors.length === 0;\n  \n  logger.info('AuthConfiguration', 'Configuration validation completed', {\n    isValid,\n    errorCount: errors.length,\n    warningCount: warnings.length,\n    recommendationCount: recommendations.length\n  });\n\n  return {\n    isValid,\n    errors,\n    warnings,\n    recommendations\n  };\n};\n\n// ========================================\n// CONFIGURATION EXPORTS\n// ========================================\n\n/**\n * Main configuration object exported for use throughout the app\n */\nexport const AUTH_CONFIG = {\n  // Core settings\n  OAUTH: OAUTH_SETTINGS,\n  SECURITY: SECURITY_SETTINGS,\n  API: API_SETTINGS,\n  PLATFORM: PLATFORM_SETTINGS,\n  \n  // Dynamic configuration\n  getClientIds: getGoogleClientIds,\n  getRedirectUri,\n  getApiBaseUrl,\n  createOAuthConfig,\n  \n  // Validation\n  validateConfiguration: validateAuthConfiguration,\n  isConfigured: isGoogleOAuthConfigured,\n  \n  // Error messages\n  ERRORS: ERROR_MESSAGES,\n} as const;\n\n\n// Default export\nexport default AUTH_CONFIG;\n\n/**\n * ========================================\n * CONFIGURATION TODO LIST\n * ========================================\n * \n * SECURITY ENHANCEMENTS:\n * - [ ] Implement PKCE (Proof Key for Code Exchange) support\n * - [ ] Add OAuth state parameter for CSRF protection\n * - [ ] Implement nonce parameter for replay attack prevention\n * - [ ] Add client certificate authentication for enterprise\n * - [ ] Implement request signing for API integrity verification\n * - [ ] Add support for multiple OAuth providers (GitHub, Apple, etc.)\n * \n * ENVIRONMENT MANAGEMENT:\n * - [ ] Set up staging environment configuration\n * - [ ] Implement environment-specific feature flags\n * - [ ] Add configuration hot-reloading for development\n * - [ ] Implement configuration encryption for sensitive settings\n * - [ ] Add configuration validation at build time\n * \n * MONITORING AND OBSERVABILITY:\n * - [ ] Add configuration change tracking\n * - [ ] Implement configuration health checks\n * - [ ] Add metrics for configuration usage\n * - [ ] Implement configuration A/B testing\n * - [ ] Add configuration rollback mechanisms\n * \n * COMPLIANCE AND GOVERNANCE:\n * - [ ] Add GDPR compliance configuration\n * - [ ] Implement data retention policy settings\n * - [ ] Add audit logging configuration\n * - [ ] Implement privacy control settings\n * - [ ] Add consent management configuration\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/GoogleAuthService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2768,2771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2768,2771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3143,3146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3143,3146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * GOOGLE AUTHENTICATION SERVICE\n * ========================================\n * \n * This is the main authentication service that handles all Google OAuth operations\n * in a secure, professional, and efficient manner.\n * \n * SECURITY FEATURES:\n * - Server-side token verification (prevents token forgery)\n * - Secure token storage using platform-specific secure storage\n * - Automatic token refresh to maintain seamless user experience  \n * - Proper session management with server-side validation\n * - Comprehensive error handling and recovery mechanisms\n * - Rate limiting awareness and proper backoff strategies\n * \n * ARCHITECTURE:\n * - Singleton pattern for consistent state management\n * - Event-driven authentication state changes\n * - Separation of concerns between OAuth, storage, and API communication\n * - Platform-agnostic implementation (iOS, Android, Web)\n * \n * AUTHOR: AI Assistant\n * SECURITY LEVEL: Enterprise Grade\n * LAST UPDATED: 2024\n */\n\nimport * as SecureStore from 'expo-secure-store';\nimport { Platform, AppState } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { logger } from '../utils/loggerService';\nimport { API_BASE_URL as GLOBAL_API_BASE_URL } from '../utils/dbConfig';\n\n// ========================================\n// TYPE DEFINITIONS\n// ========================================\n\n/**\n * Authentication tokens received from the server after successful OAuth verification\n * These tokens are cryptographically signed by the server and cannot be forged\n */\nexport interface AuthTokens {\n  /** JWT access token for API requests (short-lived, typically 1 hour) */\n  accessToken: string;\n  /** JWT refresh token for obtaining new access tokens (long-lived, typically 30 days) */\n  refreshToken: string;\n  /** Access token expiration time in seconds from now */\n  expiresIn: number;\n  /** Refresh token expiration time in seconds from now */\n  refreshExpiresIn: number;\n  /** Server-assigned session ID for tracking and security */\n  sessionId?: string;\n}\n\n/**\n * User profile data verified and enriched by the server\n * This data is trusted because it comes from server verification\n */\nexport interface SecureAuthUser {\n  /** Unique user identifier from Google (stable across sessions) */\n  id: string;\n  /** User's full name from Google profile */\n  name: string;\n  /** Verified email address from Google */\n  email: string;\n  /** User's profile picture URL from Google */\n  avatar: string;\n  /** User roles assigned by the server (e.g., 'user', 'admin', 'org_admin') */\n  roles: string[];\n  /** User preferences and settings */\n  settings: {\n    language: string;\n    darkMode: boolean;\n    notificationsEnabled: boolean;\n    [key: string]: any;\n  };\n  /** Account verification status from Google */\n  emailVerified?: boolean;\n  /** Server-side user metadata */\n  metadata?: {\n    lastLoginAt?: string;\n    loginCount?: number;\n    accountCreatedAt?: string;\n  };\n}\n\n/**\n * Response format from authentication operations\n * Consistent response structure for all auth operations\n */\nexport interface AuthResponse<T = any> {\n  /** Whether the operation was successful */\n  success: boolean;\n  /** Response data if successful */\n  data?: T;\n  /** Error message if unsuccessful */\n  error?: string;\n  /** Additional context for debugging */\n  details?: string;\n  /** Server response metadata */\n  metadata?: {\n    requestId?: string;\n    timestamp?: string;\n    rateLimitInfo?: {\n      remaining: number;\n      resetTime: number;\n    };\n  };\n}\n\n/**\n * Authentication state for reactive UI updates\n */\nexport type AuthState = \n  | 'initializing'    // Service is starting up and checking stored credentials\n  | 'unauthenticated' // No valid authentication found\n  | 'authenticating'  // OAuth flow in progress\n  | 'authenticated'   // User is successfully authenticated\n  | 'refreshing'      // Tokens are being refreshed\n  | 'error'           // Authentication error occurred\n  | 'expired';        // Session has expired and needs re-authentication\n\n// ========================================\n// EVENT SYSTEM\n// ========================================\n\n/**\n * Event listener type for authentication state changes\n * Allows components to react to authentication state changes\n */\ntype AuthEventListener = (state: AuthState, user?: SecureAuthUser | null) => void;\n\n// ========================================\n// CONFIGURATION CONSTANTS\n// ========================================\n\n/**\n * Secure storage keys for different types of authentication data\n * Using prefixed keys to avoid conflicts with other app data\n */\nconst STORAGE_KEYS = {\n  ACCESS_TOKEN: 'karma_secure_auth_access_token',\n  REFRESH_TOKEN: 'karma_secure_auth_refresh_token', \n  USER_DATA: 'karma_secure_auth_user_data',\n  TOKEN_EXPIRY: 'karma_secure_auth_token_expiry',\n  SESSION_ID: 'karma_secure_auth_session_id',\n  LAST_AUTH_CHECK: 'karma_secure_auth_last_check',\n} as const;\n\n/**\n * Configuration constants for security and performance\n */\nconst CONFIG = {\n  /** How long before expiry should we refresh tokens (5 minutes) */\n  TOKEN_REFRESH_THRESHOLD: 5 * 60 * 1000,\n  /** Maximum number of consecutive refresh attempts before requiring re-auth */\n  MAX_REFRESH_ATTEMPTS: 3,\n  /** Timeout for authentication requests (30 seconds) */\n  AUTH_TIMEOUT: 30 * 1000,\n  /** How often to validate tokens when app is active (15 minutes) */\n  TOKEN_VALIDATION_INTERVAL: 15 * 60 * 1000,\n  /** API base URL for authentication endpoints */\n  API_BASE_URL: GLOBAL_API_BASE_URL ?? 'http://localhost:3001',\n} as const;\n\n// ========================================\n// MAIN SERVICE CLASS\n// ========================================\n\n/**\n * GoogleAuthService - Enterprise-grade authentication service\n * \n * This service provides a complete authentication solution with:\n * - Secure server-side token verification\n * - Automatic token refresh and session management  \n * - Cross-platform secure storage\n * - Event-driven state management\n * - Comprehensive error handling and recovery\n * \n * USAGE EXAMPLE:\n * ```typescript\n * // Initialize the service\n * await GoogleAuthService.getInstance().initialize();\n * \n * // Authenticate with Google\n * const result = await GoogleAuthService.getInstance().authenticateWithGoogle(idToken);\n * \n * // Check authentication status\n * const isAuth = GoogleAuthService.getInstance().isAuthenticated();\n * \n * // Get current user\n * const user = GoogleAuthService.getInstance().getCurrentUser();\n * ```\n */\nclass GoogleAuthService {\n  // ========================================\n  // SINGLETON IMPLEMENTATION\n  // ========================================\n  \n  private static instance: GoogleAuthService | null = null;\n  \n  /**\n   * Get the singleton instance of GoogleAuthService\n   * Ensures consistent state across the entire application\n   * \n   * @returns The singleton service instance\n   */\n  public static getInstance(): GoogleAuthService {\n    if (!GoogleAuthService.instance) {\n      GoogleAuthService.instance = new GoogleAuthService();\n    }\n    return GoogleAuthService.instance;\n  }\n\n  // ========================================\n  // PRIVATE PROPERTIES\n  // ========================================\n  \n  /** Current authentication state */\n  private authState: AuthState = 'initializing';\n  \n  /** Current authenticated user (null if not authenticated) */\n  private currentUser: SecureAuthUser | null = null;\n  \n  /** Current access token for API requests */\n  private accessToken: string | null = null;\n  \n  /** Current refresh token for obtaining new access tokens */\n  private refreshToken: string | null = null;\n  \n  /** Timestamp when the current access token expires */\n  private tokenExpiry: number = 0;\n  \n  /** Current session ID for tracking */\n  private sessionId: string | null = null;\n  \n  /** Event listeners for state changes */\n  private listeners: Set<AuthEventListener> = new Set();\n  \n  /** Whether the service has been initialized */\n  private isInitialized: boolean = false;\n  \n  /** Timer for automatic token validation */\n  private validationTimer: ReturnType<typeof setInterval> | null = null;\n  \n  /** Counter for consecutive failed refresh attempts */\n  private refreshAttempts: number = 0;\n\n  // ========================================\n  // PRIVATE CONSTRUCTOR (Singleton)\n  // ========================================\n  \n  /**\n   * Private constructor to enforce singleton pattern\n   * Sets up app state change listeners for token validation\n   */\n  private constructor() {\n    // Listen for app state changes to validate tokens when app becomes active\n    AppState.addEventListener('change', this.handleAppStateChange.bind(this));\n    \n    logger.info('GoogleAuthService', 'Service instance created');\n  }\n\n  // ========================================\n  // PUBLIC INITIALIZATION\n  // ========================================\n  \n  /**\n   * Initialize the authentication service\n   * \n   * This method MUST be called before using any other service methods.\n   * It performs the following operations:\n   * 1. Restores stored authentication data\n   * 2. Validates existing tokens\n   * 3. Sets up automatic token refresh\n   * 4. Initializes event listeners\n   * \n   * @returns Promise that resolves when initialization is complete\n   * \n   * @example\n   * ```typescript\n   * try {\n   *   await GoogleAuthService.getInstance().initialize();\n   *   console.log('Auth service ready');\n   * } catch (error) {\n   *   console.error('Failed to initialize auth service:', error);\n   * }\n   * ```\n   */\n  public async initialize(): Promise<void> {\n    if (this.isInitialized) {\n      logger.debug('GoogleAuthService', 'Already initialized, skipping');\n      return;\n    }\n\n    try {\n      logger.info('GoogleAuthService', 'Initializing secure authentication service');\n      \n      // Step 1: Restore authentication data from secure storage\n      await this.restoreStoredAuthentication();\n      \n      // Step 2: Validate restored tokens if they exist\n      if (this.accessToken && this.refreshToken) {\n        const isValid = await this.validateStoredTokens();\n        if (!isValid) {\n          logger.info('GoogleAuthService', 'Stored tokens invalid, clearing session');\n          await this.clearAuthenticationData();\n        }\n      }\n      \n      // Step 3: Set final authentication state\n      this.updateAuthState();\n      \n      // Step 4: Start automatic token validation\n      this.startTokenValidation();\n      \n      // Step 5: Mark as initialized\n      this.isInitialized = true;\n      \n      logger.info('GoogleAuthService', 'Authentication service initialized successfully', {\n        hasTokens: !!this.accessToken,\n        hasUser: !!this.currentUser,\n        authState: this.authState\n      });\n      \n    } catch (error) {\n      logger.error('GoogleAuthService', 'Failed to initialize authentication service', {\n        error: String(error)\n      });\n      \n      // Clear potentially corrupted data\n      await this.clearAuthenticationData();\n      this.setAuthState('error');\n      \n      throw new Error('Failed to initialize authentication service');\n    }\n  }\n\n  // ========================================\n  // MAIN AUTHENTICATION METHOD\n  // ========================================\n  \n  /**\n   * Authenticate user with Google using server-side verification\n   * \n   * This is the main authentication method that:\n   * 1. Sends the Google ID token to our server for verification\n   * 2. Receives server-signed JWT tokens in response\n   * 3. Stores tokens securely on the device\n   * 4. Updates the authentication state\n   * \n   * SECURITY: The ID token is verified by our server with Google's servers,\n   * ensuring that the token is genuine and not forged by malicious clients.\n   * \n   * @param idToken - Google ID token received from OAuth flow\n   * @returns Promise resolving to authentication result\n   * \n   * @example\n   * ```typescript\n   * const result = await authService.authenticateWithGoogle(googleIdToken);\n   * if (result.success) {\n   *   console.log('User authenticated:', result.data.user);\n   * } else {\n   *   console.error('Authentication failed:', result.error);\n   * }\n   * ```\n   */\n  public async authenticateWithGoogle(idToken: string): Promise<AuthResponse<{\n    tokens: AuthTokens;\n    user: SecureAuthUser;\n  }>> {\n    try {\n      // Input validation\n      if (!idToken || typeof idToken !== 'string' || idToken.trim().length === 0) {\n        return {\n          success: false,\n          error: 'Invalid ID token provided',\n          details: 'ID token must be a non-empty string'\n        };\n      }\n\n      logger.info('GoogleAuthService', 'Starting secure Google authentication');\n      \n      // Set authenticating state to update UI\n      this.setAuthState('authenticating');\n      \n      // Prepare request to our authentication server\n      const requestBody = {\n        idToken: idToken.trim(),\n        // Additional metadata for security logging\n        platform: Platform.OS,\n        timestamp: new Date().toISOString(),\n        appVersion: process.env.EXPO_PUBLIC_APP_VERSION || 'unknown'\n      };\n\n      logger.debug('GoogleAuthService', 'Sending token to server for verification', {\n        tokenLength: idToken.length,\n        platform: Platform.OS\n      });\n\n      // Send ID token to server for verification with timeout\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), CONFIG.AUTH_TIMEOUT);\n      \n      try {\n        const response = await fetch(`${CONFIG.API_BASE_URL}/auth/google`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'User-Agent': `KarmaCommunity-${Platform.OS}`,\n          },\n          body: JSON.stringify(requestBody),\n          signal: controller.signal,\n        });\n        \n        clearTimeout(timeoutId);\n\n        // Parse server response\n        const serverResponse = await response.json();\n\n        // Handle server errors\n        if (!response.ok) {\n          const errorMessage = serverResponse.error || `Server error: ${response.status}`;\n          logger.warn('GoogleAuthService', 'Server authentication failed', {\n            status: response.status,\n            error: errorMessage\n          });\n          \n          this.setAuthState('error');\n          \n          return {\n            success: false,\n            error: errorMessage,\n            details: `HTTP ${response.status}`,\n            metadata: {\n              timestamp: new Date().toISOString(),\n              requestId: serverResponse.requestId\n            }\n          };\n        }\n\n        // Validate server response structure\n        if (!serverResponse.success || !serverResponse.tokens || !serverResponse.user) {\n          logger.error('GoogleAuthService', 'Invalid server response format', {\n            hasSuccess: !!serverResponse.success,\n            hasTokens: !!serverResponse.tokens,\n            hasUser: !!serverResponse.user\n          });\n          \n          this.setAuthState('error');\n          \n          return {\n            success: false,\n            error: 'Invalid response from authentication server',\n            details: 'Server response missing required fields'\n          };\n        }\n\n        // Store authentication data securely\n        await this.storeAuthenticationData(serverResponse.tokens, serverResponse.user);\n        \n        // Update service state\n        this.updateAuthState();\n        \n        // Start token validation\n        this.startTokenValidation();\n        \n        // Reset refresh attempts counter\n        this.refreshAttempts = 0;\n\n        logger.info('GoogleAuthService', 'Google authentication completed successfully', {\n          userId: serverResponse.user.id,\n          email: serverResponse.user.email,\n          sessionId: this.sessionId,\n          expiresIn: serverResponse.tokens.expiresIn\n        });\n\n        return {\n          success: true,\n          data: {\n            tokens: serverResponse.tokens,\n            user: serverResponse.user\n          },\n          metadata: {\n            timestamp: new Date().toISOString(),\n            requestId: serverResponse.requestId\n          }\n        };\n\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        throw fetchError;\n      }\n\n    } catch (error) {\n      logger.error('GoogleAuthService', 'Google authentication failed', {\n        error: String(error)\n      });\n      \n      this.setAuthState('error');\n      \n      // Handle specific error types\n      if (error instanceof TypeError && error.message.includes('fetch')) {\n        return {\n          success: false,\n          error: 'Network connection failed',\n          details: 'Please check your internet connection and try again'\n        };\n      }\n      \n      if (error instanceof Error && error.name === 'AbortError') {\n        return {\n          success: false,\n          error: 'Authentication timeout',\n          details: 'The server took too long to respond. Please try again.'\n        };\n      }\n      \n      return {\n        success: false,\n        error: 'Authentication failed',\n        details: error instanceof Error ? error.message : 'Unknown error occurred'\n      };\n    }\n  }\n\n  // ========================================\n  // TOKEN MANAGEMENT\n  // ========================================\n  \n  /**\n   * Refresh the access token using the stored refresh token\n   * \n   * This method is automatically called when:\n   * - The access token is about to expire (within 5 minutes)\n   * - An API request receives a 401 Unauthorized response\n   * - The app becomes active after being in background\n   * \n   * The refresh process:\n   * 1. Sends refresh token to server\n   * 2. Receives new access token  \n   * 3. Updates stored tokens\n   * 4. Continues user session seamlessly\n   * \n   * @returns Promise resolving to success status\n   */\n  public async refreshAccessToken(): Promise<boolean> {\n    // Check if we have a refresh token\n    if (!this.refreshToken) {\n      logger.warn('GoogleAuthService', 'No refresh token available for refresh');\n      this.setAuthState('unauthenticated');\n      return false;\n    }\n\n    // Prevent multiple simultaneous refresh attempts\n    if (this.authState === 'refreshing') {\n      logger.debug('GoogleAuthService', 'Token refresh already in progress');\n      return false;\n    }\n\n    // Check refresh attempts limit\n    if (this.refreshAttempts >= CONFIG.MAX_REFRESH_ATTEMPTS) {\n      logger.error('GoogleAuthService', 'Maximum refresh attempts exceeded, requiring re-authentication');\n      await this.clearAuthenticationData();\n      this.setAuthState('expired');\n      return false;\n    }\n\n    try {\n      this.setAuthState('refreshing');\n      this.refreshAttempts++;\n      \n      logger.info('GoogleAuthService', 'Refreshing access token', {\n        attempt: this.refreshAttempts,\n        maxAttempts: CONFIG.MAX_REFRESH_ATTEMPTS\n      });\n\n      const response = await fetch(`${CONFIG.API_BASE_URL}/auth/refresh`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          refreshToken: this.refreshToken,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok || !result.success) {\n        throw new Error(result.error || 'Token refresh failed');\n      }\n\n      // Update access token and expiry\n      this.accessToken = result.accessToken;\n      this.tokenExpiry = Date.now() + (result.expiresIn * 1000);\n      \n      // Store updated token securely\n      await this.storeSecurely(STORAGE_KEYS.ACCESS_TOKEN, result.accessToken);\n      await this.storeSecurely(STORAGE_KEYS.TOKEN_EXPIRY, this.tokenExpiry.toString());\n\n      // Reset refresh attempts counter on success\n      this.refreshAttempts = 0;\n      \n      // Update authentication state\n      this.updateAuthState();\n\n      logger.info('GoogleAuthService', 'Access token refreshed successfully', {\n        newExpiryTime: new Date(this.tokenExpiry).toISOString()\n      });\n\n      return true;\n\n    } catch (error) {\n      logger.error('GoogleAuthService', 'Token refresh failed', {\n        error: String(error),\n        attempt: this.refreshAttempts\n      });\n\n      // If we've exceeded max attempts, clear session\n      if (this.refreshAttempts >= CONFIG.MAX_REFRESH_ATTEMPTS) {\n        await this.clearAuthenticationData();\n        this.setAuthState('expired');\n      } else {\n        this.setAuthState('authenticated'); // Return to authenticated state for retry\n      }\n\n      return false;\n    }\n  }\n\n  // ========================================\n  // LOGOUT AND SESSION MANAGEMENT  \n  // ========================================\n  \n  /**\n   * Log out the current user and clean up all authentication data\n   * \n   * This method performs a complete logout:\n   * 1. Notifies server to revoke tokens\n   * 2. Clears all local authentication data\n   * 3. Updates authentication state\n   * 4. Stops automatic token validation\n   * \n   * @returns Promise resolving when logout is complete\n   */\n  public async logout(): Promise<void> {\n    try {\n      logger.info('GoogleAuthService', 'Starting user logout process');\n\n      // Notify server to revoke tokens (best effort)\n      if (this.accessToken || this.refreshToken) {\n        try {\n          await fetch(`${CONFIG.API_BASE_URL}/auth/logout`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              ...(this.accessToken ? { 'Authorization': `Bearer ${this.accessToken}` } : {}),\n            },\n            body: JSON.stringify({\n              token: this.accessToken,\n              refreshToken: this.refreshToken,\n              sessionId: this.sessionId,\n            }),\n          });\n          \n          logger.info('GoogleAuthService', 'Server logout notification sent');\n        } catch (error) {\n          // Server logout failure is not critical for client-side cleanup\n          logger.warn('GoogleAuthService', 'Server logout notification failed', {\n            error: String(error)\n          });\n        }\n      }\n\n      // Clear all local authentication data\n      await this.clearAuthenticationData();\n      \n      // Stop token validation\n      this.stopTokenValidation();\n      \n      logger.info('GoogleAuthService', 'User logout completed successfully');\n      \n    } catch (error) {\n      logger.error('GoogleAuthService', 'Logout error', {\n        error: String(error)\n      });\n      \n      // Even if logout fails, clear local data to ensure user is logged out\n      await this.clearAuthenticationData();\n    }\n  }\n\n  // ========================================\n  // PUBLIC GETTERS\n  // ========================================\n  \n  /**\n   * Check if user is currently authenticated\n   * @returns true if user has valid authentication\n   */\n  public isAuthenticated(): boolean {\n    return this.authState === 'authenticated' && !!this.currentUser && !!this.accessToken;\n  }\n\n  /**\n   * Get the current authenticated user\n   * @returns Current user object or null if not authenticated\n   */\n  public getCurrentUser(): SecureAuthUser | null {\n    return this.currentUser;\n  }\n\n  /**\n   * Get the current access token for API requests\n   * @returns Current access token or null if not authenticated\n   */\n  public getAccessToken(): string | null {\n    return this.accessToken;\n  }\n\n  /**\n   * Get authentication headers for API requests\n   * @returns Object with Authorization header or empty object\n   */\n  public getAuthHeaders(): Record<string, string> {\n    if (!this.accessToken) {\n      return {};\n    }\n    \n    return {\n      'Authorization': `Bearer ${this.accessToken}`,\n    };\n  }\n\n  /**\n   * Get the current authentication state\n   * @returns Current authentication state\n   */\n  public getAuthState(): AuthState {\n    return this.authState;\n  }\n\n  // ========================================\n  // EVENT MANAGEMENT\n  // ========================================\n  \n  /**\n   * Add event listener for authentication state changes\n   * @param listener Function to call when state changes\n   */\n  public addEventListener(listener: AuthEventListener): void {\n    this.listeners.add(listener);\n    logger.debug('GoogleAuthService', 'Event listener added', {\n      totalListeners: this.listeners.size\n    });\n  }\n\n  /**\n   * Remove event listener\n   * @param listener Function to remove from listeners\n   */\n  public removeEventListener(listener: AuthEventListener): void {\n    this.listeners.delete(listener);\n    logger.debug('GoogleAuthService', 'Event listener removed', {\n      totalListeners: this.listeners.size\n    });\n  }\n\n  // ========================================\n  // PRIVATE HELPER METHODS\n  // ========================================\n  \n  /**\n   * Restore authentication data from secure storage\n   * Called during service initialization\n   */\n  private async restoreStoredAuthentication(): Promise<void> {\n    try {\n      logger.debug('GoogleAuthService', 'Restoring authentication data from storage');\n      \n      const [accessToken, refreshToken, userData, tokenExpiry, sessionId] = await Promise.all([\n        this.getFromSecureStorage(STORAGE_KEYS.ACCESS_TOKEN),\n        this.getFromSecureStorage(STORAGE_KEYS.REFRESH_TOKEN),\n        this.getFromSecureStorage(STORAGE_KEYS.USER_DATA),\n        this.getFromSecureStorage(STORAGE_KEYS.TOKEN_EXPIRY),\n        this.getFromSecureStorage(STORAGE_KEYS.SESSION_ID),\n      ]);\n\n      if (accessToken && refreshToken && userData) {\n        this.accessToken = accessToken;\n        this.refreshToken = refreshToken;\n        this.sessionId = sessionId;\n        this.tokenExpiry = tokenExpiry ? parseInt(tokenExpiry, 10) : 0;\n        \n        try {\n          this.currentUser = JSON.parse(userData);\n          logger.info('GoogleAuthService', 'Authentication data restored successfully', {\n            hasUser: !!this.currentUser,\n            userId: this.currentUser?.id,\n            expiryTime: new Date(this.tokenExpiry).toISOString()\n          });\n        } catch (parseError) {\n          logger.error('GoogleAuthService', 'Failed to parse stored user data', {\n            error: String(parseError)\n          });\n          // Clear corrupted data\n          await this.clearAuthenticationData();\n        }\n      } else {\n        logger.debug('GoogleAuthService', 'No stored authentication data found');\n      }\n      \n    } catch (error) {\n      logger.error('GoogleAuthService', 'Failed to restore authentication data', {\n        error: String(error)\n      });\n    }\n  }\n\n  /**\n   * Store authentication data securely\n   * @param tokens Token pair from server\n   * @param user User data from server\n   */\n  private async storeAuthenticationData(tokens: AuthTokens, user: SecureAuthUser): Promise<void> {\n    try {\n      // Update instance variables\n      this.accessToken = tokens.accessToken;\n      this.refreshToken = tokens.refreshToken;\n      this.tokenExpiry = Date.now() + (tokens.expiresIn * 1000);\n      this.sessionId = tokens.sessionId || null;\n      this.currentUser = user;\n\n      // Store in secure storage\n      await Promise.all([\n        this.storeSecurely(STORAGE_KEYS.ACCESS_TOKEN, tokens.accessToken),\n        this.storeSecurely(STORAGE_KEYS.REFRESH_TOKEN, tokens.refreshToken),\n        this.storeSecurely(STORAGE_KEYS.USER_DATA, JSON.stringify(user)),\n        this.storeSecurely(STORAGE_KEYS.TOKEN_EXPIRY, this.tokenExpiry.toString()),\n        this.storeSecurely(STORAGE_KEYS.SESSION_ID, tokens.sessionId || ''),\n        this.storeSecurely(STORAGE_KEYS.LAST_AUTH_CHECK, Date.now().toString()),\n      ]);\n\n      logger.debug('GoogleAuthService', 'Authentication data stored securely');\n      \n    } catch (error) {\n      logger.error('GoogleAuthService', 'Failed to store authentication data', {\n        error: String(error)\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Clear all authentication data from storage and memory\n   */\n  private async clearAuthenticationData(): Promise<void> {\n    try {\n      // Clear instance variables\n      this.accessToken = null;\n      this.refreshToken = null;\n      this.currentUser = null;\n      this.tokenExpiry = 0;\n      this.sessionId = null;\n      this.refreshAttempts = 0;\n\n      // Clear secure storage\n      await Promise.all([\n        this.removeFromSecureStorage(STORAGE_KEYS.ACCESS_TOKEN),\n        this.removeFromSecureStorage(STORAGE_KEYS.REFRESH_TOKEN),\n        this.removeFromSecureStorage(STORAGE_KEYS.USER_DATA),\n        this.removeFromSecureStorage(STORAGE_KEYS.TOKEN_EXPIRY),\n        this.removeFromSecureStorage(STORAGE_KEYS.SESSION_ID),\n        this.removeFromSecureStorage(STORAGE_KEYS.LAST_AUTH_CHECK),\n      ]);\n\n      // Update authentication state\n      this.setAuthState('unauthenticated');\n      \n      logger.debug('GoogleAuthService', 'Authentication data cleared successfully');\n      \n    } catch (error) {\n      logger.error('GoogleAuthService', 'Failed to clear authentication data', {\n        error: String(error)\n      });\n    }\n  }\n\n  // TODO: Add biometric authentication option for accessing stored tokens\n  // TODO: Implement device fingerprinting for additional security\n  // TODO: Add support for multiple concurrent sessions\n  // TODO: Implement OAuth PKCE for enhanced security\n  // TODO: Add analytics for authentication success/failure rates\n  // TODO: Implement automatic server health checking before auth requests\n  // TODO: Add support for social login providers beyond Google\n  // TODO: Implement progressive web app (PWA) specific optimizations\n  // TODO: Add support for enterprise SSO integration\n  // TODO: Implement advanced fraud detection mechanisms\n\n  /**\n   * Store data securely based on platform capabilities\n   * @param key Storage key\n   * @param value Value to store\n   */\n  private async storeSecurely(key: string, value: string): Promise<void> {\n    try {\n      if (Platform.OS === 'web') {\n        // Use sessionStorage for web (more secure than localStorage for tokens)\n        sessionStorage.setItem(key, value);\n      } else {\n        // Use SecureStore for mobile platforms\n        await SecureStore.setItemAsync(key, value);\n      }\n    } catch (error) {\n      logger.warn('GoogleAuthService', `Failed to store ${key} securely, using fallback`, {\n        error: String(error)\n      });\n      // Fallback to AsyncStorage (less secure but functional)\n      await AsyncStorage.setItem(key, value);\n    }\n  }\n\n  /**\n   * Retrieve data from secure storage\n   * @param key Storage key\n   * @returns Retrieved value or null\n   */\n  private async getFromSecureStorage(key: string): Promise<string | null> {\n    try {\n      if (Platform.OS === 'web') {\n        return sessionStorage.getItem(key);\n      } else {\n        return await SecureStore.getItemAsync(key);\n      }\n    } catch (error) {\n      logger.warn('GoogleAuthService', `Failed to get ${key} securely, using fallback`, {\n        error: String(error)\n      });\n      // Fallback to AsyncStorage\n      return await AsyncStorage.getItem(key);\n    }\n  }\n\n  /**\n   * Remove data from secure storage\n   * @param key Storage key\n   */\n  private async removeFromSecureStorage(key: string): Promise<void> {\n    try {\n      if (Platform.OS === 'web') {\n        sessionStorage.removeItem(key);\n      } else {\n        await SecureStore.deleteItemAsync(key);\n      }\n    } catch (error) {\n      logger.warn('GoogleAuthService', `Failed to remove ${key} securely, using fallback`, {\n        error: String(error)\n      });\n      // Fallback to AsyncStorage\n      await AsyncStorage.removeItem(key);\n    }\n  }\n\n  /**\n   * Update authentication state and notify listeners\n   */\n  private updateAuthState(): void {\n    const newState: AuthState = this.determineAuthState();\n    \n    if (newState !== this.authState) {\n      const oldState = this.authState;\n      this.setAuthState(newState);\n      \n      logger.debug('GoogleAuthService', 'Authentication state changed', {\n        from: oldState,\n        to: newState,\n        hasUser: !!this.currentUser\n      });\n    }\n  }\n\n  /**\n   * Determine the current authentication state based on available data\n   */\n  private determineAuthState(): AuthState {\n    if (!this.isInitialized) {\n      return 'initializing';\n    }\n    \n    if (!this.accessToken || !this.refreshToken || !this.currentUser) {\n      return 'unauthenticated';\n    }\n    \n    // Check if access token is expired\n    if (Date.now() >= this.tokenExpiry) {\n      return 'refreshing'; // Will trigger automatic refresh\n    }\n    \n    return 'authenticated';\n  }\n\n  /**\n   * Set authentication state and notify listeners\n   * @param newState New authentication state\n   */\n  private setAuthState(newState: AuthState): void {\n    this.authState = newState;\n    \n    // Notify all listeners of state change\n    for (const listener of this.listeners) {\n      try {\n        listener(newState, this.currentUser);\n      } catch (error) {\n        logger.error('GoogleAuthService', 'Event listener error', {\n          error: String(error)\n        });\n      }\n    }\n  }\n\n  /**\n   * Validate stored tokens with the server\n   */\n  private async validateStoredTokens(): Promise<boolean> {\n    if (!this.accessToken) {\n      return false;\n    }\n\n    try {\n      const response = await fetch(`${CONFIG.API_BASE_URL}/auth/sessions`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${this.accessToken}`,\n        },\n      });\n\n      return response.ok;\n      \n    } catch (error) {\n      logger.warn('GoogleAuthService', 'Token validation failed', {\n        error: String(error)\n      });\n      return false;\n    }\n  }\n\n  /**\n   * Start automatic token validation timer\n   */\n  private startTokenValidation(): void {\n    this.stopTokenValidation(); // Clear any existing timer\n    \n    this.validationTimer = setInterval(() => {\n      this.performPeriodicValidation();\n    }, CONFIG.TOKEN_VALIDATION_INTERVAL);\n    \n    logger.debug('GoogleAuthService', 'Token validation timer started');\n  }\n\n  /**\n   * Stop automatic token validation timer\n   */\n  private stopTokenValidation(): void {\n    if (this.validationTimer) {\n      clearInterval(this.validationTimer);\n      this.validationTimer = null;\n      logger.debug('GoogleAuthService', 'Token validation timer stopped');\n    }\n  }\n\n  /**\n   * Perform periodic token validation and refresh if needed\n   */\n  private async performPeriodicValidation(): Promise<void> {\n    if (!this.isAuthenticated()) {\n      return;\n    }\n\n    // Check if token needs refresh soon\n    const timeUntilExpiry = this.tokenExpiry - Date.now();\n    if (timeUntilExpiry <= CONFIG.TOKEN_REFRESH_THRESHOLD) {\n      logger.info('GoogleAuthService', 'Token expiring soon, refreshing automatically');\n      await this.refreshAccessToken();\n    }\n  }\n\n  /**\n   * Handle app state changes for security validation\n   * @param nextAppState New app state\n   */\n  private async handleAppStateChange(nextAppState: string): Promise<void> {\n    if (nextAppState === 'active' && this.isAuthenticated()) {\n      logger.debug('GoogleAuthService', 'App became active, validating tokens');\n      \n      // Validate tokens when app becomes active\n      const isValid = await this.validateStoredTokens();\n      if (!isValid && this.refreshToken) {\n        logger.info('GoogleAuthService', 'Tokens invalid on app activation, refreshing');\n        await this.refreshAccessToken();\n      }\n    }\n  }\n}\n\n// ========================================\n// EXPORT SINGLETON INSTANCE\n// ========================================\n\n/**\n * Export the singleton instance for use throughout the application\n * \n * USAGE:\n * ```typescript\n * import { googleAuthService } from './google_auth/GoogleAuthService';\n * \n * // Initialize once in your app\n * await googleAuthService.initialize();\n * \n * // Use throughout the app\n * const user = googleAuthService.getCurrentUser();\n * ```\n */\nexport const googleAuthService = GoogleAuthService.getInstance();\n\n// Export the class for advanced usage\nexport { GoogleAuthService };\n\n/**\n * Default export for convenient importing\n */\nexport default googleAuthService;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/SecureApiService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AuthResponse' is defined but never used.","line":36,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":41,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AuthResponse"},"fix":{"range":[1203,1217],"text":""},"desc":"Remove unused variable \"AuthResponse\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1596,1599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1596,1599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3875,3878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3875,3878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":139,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3939,3942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3939,3942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4079,4082],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4079,4082],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":604,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":604,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17540,17543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17540,17543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'endpoint' is defined but never used.","line":604,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":604,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":696,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":696,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20285,20288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20285,20288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":712,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":712,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20752,20755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20752,20755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":728,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":728,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21219,21222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21219,21222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":760,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":760,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22115,22118],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22115,22118],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":779,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":779,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22621,22624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22621,22624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":779,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":779,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22647,22650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22647,22650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":800,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":800,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23181,23184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23181,23184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":823,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":823,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23794,23797],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23794,23797],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":849,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":849,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24514,24517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24514,24517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":849,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":849,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24540,24543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24540,24543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":863,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":863,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24955,24958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24955,24958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":888,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":888,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25591,25594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25591,25594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":914,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":914,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26307,26310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26307,26310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":914,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":914,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26333,26336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26333,26336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":935,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":935,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26928,26931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26928,26931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1014,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1014,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29036,29039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29036,29039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1021,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1021,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29191,29194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29191,29194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1084,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1084,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30758,30761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30758,30761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1086,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1086,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30810,30813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30810,30813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * SECURE API SERVICE\n * ========================================\n * \n * Enterprise-grade API service for authenticated requests to the Karma Community backend.\n * This service provides comprehensive security, error handling, and performance optimization.\n * \n * SECURITY FEATURES:\n * - Automatic authentication header injection\n * - Token expiration handling with automatic refresh\n * - Request/response logging for security auditing\n * - Rate limiting awareness and proper backoff\n * - CSRF protection through custom headers\n * - Request timeout and retry mechanisms\n * \n * PERFORMANCE FEATURES:\n * - Request caching for GET endpoints\n * - Connection pooling and keepalive\n * - Response compression support\n * - Progress tracking for long operations\n * - Offline request queuing (TODO)\n * \n * ERROR HANDLING:\n * - Comprehensive error categorization\n * - Automatic retry with exponential backoff\n * - User-friendly error messages in Hebrew\n * - Detailed error logging for debugging\n * \n * AUTHOR: AI Assistant\n * SECURITY LEVEL: Enterprise Grade\n * COMPATIBILITY: iOS, Android, Web\n */\n\nimport { Platform } from 'react-native';\nimport { googleAuthService, AuthResponse } from './GoogleAuthService';\nimport { logger } from '../utils/loggerService';\nimport { API_BASE_URL } from '../utils/dbConfig';\n\n// ========================================\n// TYPE DEFINITIONS\n// ========================================\n\n/**\n * Standard API response format\n * Consistent across all endpoints for predictable error handling\n */\nexport interface ApiResponse<T = any> {\n  /** Whether the request was successful */\n  success: boolean;\n  /** Response data if successful */\n  data?: T;\n  /** Error message if unsuccessful */\n  error?: string;\n  /** Additional error context */\n  message?: string;\n  /** Response metadata */\n  metadata?: {\n    requestId?: string;\n    timestamp?: string;\n    duration?: number;\n    cached?: boolean;\n  };\n}\n\n/**\n * Request options for API calls\n */\nexport interface RequestOptions {\n  /** Whether to cache the response (GET requests only) */\n  enableCache?: boolean;\n  /** Cache duration in milliseconds */\n  cacheDuration?: number;\n  /** Request timeout in milliseconds */\n  timeout?: number;\n  /** Number of retry attempts */\n  retries?: number;\n  /** Whether to include authentication headers */\n  authenticated?: boolean;\n  /** Custom headers to include */\n  headers?: Record<string, string>;\n}\n\n/**\n * Error categories for better error handling\n */\nexport type ApiErrorType = \n  | 'NETWORK_ERROR'       // Network connectivity issues\n  | 'AUTHENTICATION_ERROR' // Authentication/authorization failures  \n  | 'VALIDATION_ERROR'    // Input validation failures\n  | 'SERVER_ERROR'        // Internal server errors\n  | 'RATE_LIMIT_ERROR'    // Rate limiting triggered\n  | 'TIMEOUT_ERROR'       // Request timeout\n  | 'UNKNOWN_ERROR';      // Unclassified errors\n\n/**\n * Detailed error information\n */\nexport interface ApiError {\n  type: ApiErrorType;\n  message: string;\n  details?: string;\n  statusCode?: number;\n  retryable?: boolean;\n  retryAfter?: number;\n}\n\n// ========================================\n// CONFIGURATION CONSTANTS\n// ========================================\n\n/**\n * API service configuration\n */\nconst API_CONFIG = {\n  /** Default request timeout (30 seconds) */\n  DEFAULT_TIMEOUT: 30 * 1000,\n  \n  /** Maximum retry attempts for failed requests */\n  MAX_RETRIES: 3,\n  \n  /** Default cache duration for GET requests (5 minutes) */\n  DEFAULT_CACHE_DURATION: 5 * 60 * 1000,\n  \n  /** Retry delay base for exponential backoff (1 second) */\n  RETRY_DELAY_BASE: 1000,\n  \n  /** Maximum retry delay (30 seconds) */\n  MAX_RETRY_DELAY: 30 * 1000,\n} as const;\n\n/**\n * Cache storage for GET requests\n * In-memory cache for performance optimization\n */\nclass ApiCache {\n  private cache: Map<string, { data: any; expiry: number }> = new Map();\n  \n  set(key: string, data: any, duration: number): void {\n    this.cache.set(key, {\n      data,\n      expiry: Date.now() + duration\n    });\n  }\n  \n  get(key: string): any | null {\n    const item = this.cache.get(key);\n    if (!item) return null;\n    \n    if (Date.now() > item.expiry) {\n      this.cache.delete(key);\n      return null;\n    }\n    \n    return item.data;\n  }\n  \n  clear(): void {\n    this.cache.clear();\n  }\n  \n  size(): number {\n    return this.cache.size;\n  }\n}\n\n// ========================================\n// MAIN SERVICE CLASS\n// ========================================\n\n/**\n * SecureApiService - Production-ready API client with comprehensive security\n * \n * This service handles all communication with the Karma Community backend\n * with enterprise-grade security and reliability features.\n * \n * KEY FEATURES:\n * - Automatic authentication management\n * - Intelligent error handling and recovery\n * - Response caching for performance\n * - Request retry with exponential backoff\n * - Comprehensive logging and monitoring\n * \n * USAGE EXAMPLE:\n * ```typescript\n * // Make authenticated request\n * const user = await secureApiService.getCurrentUser();\n * \n * // Make public request\n * const donations = await secureApiService.getDonations({ city: '×ª×œ ××‘×™×‘' });\n * \n * // Create resource with authentication\n * const result = await secureApiService.createDonation(donationData);\n * ```\n */\nclass SecureApiService {\n  // ========================================\n  // PRIVATE PROPERTIES\n  // ========================================\n  \n  /** Base URL for all API requests */\n  private _baseUrl: string | null = null;\n  \n  /** Request counter for tracking and logging */\n  private requestCounter: number = 0;\n  \n  /** Cache instance for GET request responses */\n  private cache: ApiCache = new ApiCache();\n\n  // ========================================\n  // CONSTRUCTOR\n  // ========================================\n  \n  /**\n   * Initialize the secure API service\n   * @param baseUrl Override default API base URL\n   */\n  constructor(baseUrl?: string) {\n    this._baseUrl = baseUrl || null;\n    \n    logger.info('SecureApiService', 'Secure API service initialized', {\n      baseUrl: this.baseUrl\n    });\n  }\n  \n  /**\n   * Get base URL with runtime environment detection for web\n   */\n  private get baseUrl(): string {\n    // If baseUrl was provided in constructor, use it\n    if (this._baseUrl !== null) {\n      return this._baseUrl;\n    }\n    \n    // Try environment variables first (highest priority - for local development)\n    if (typeof process !== 'undefined' && process.env?.EXPO_PUBLIC_API_BASE_URL) {\n      return process.env.EXPO_PUBLIC_API_BASE_URL;\n    }\n    \n    // For web, detect environment from domain at runtime\n    if (typeof window !== 'undefined' && window.location) {\n      const hostname = window.location.hostname;\n      \n      // If on localhost, use local server\n      if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname === '0.0.0.0') {\n        return 'http://localhost:3001';\n      }\n      \n      // If on dev domain, use dev server\n      if (hostname.includes('dev.')) {\n        return 'https://kc-mvp-server-development.up.railway.app';\n      }\n      \n      // Otherwise use production server\n      return 'https://kc-mvp-server-production.up.railway.app';\n    }\n    \n    // Fallback to config constant\n    return API_BASE_URL;\n  }\n\n  // ========================================\n  // CORE REQUEST METHOD\n  // ========================================\n  \n  /**\n   * Core request method that handles authentication, retries, and error handling\n   * \n   * This method is the foundation of all API requests and provides:\n   * 1. Automatic authentication header injection\n   * 2. Token refresh on 401 responses\n   * 3. Exponential backoff retry logic\n   * 4. Comprehensive error categorization\n   * 5. Response caching for GET requests\n   * 6. Request/response logging\n   * \n   * @param endpoint API endpoint (relative to base URL)\n   * @param options Request configuration options\n   * @returns Promise resolving to API response\n   */\n  private async makeRequest<T>(\n    endpoint: string,\n    options: RequestInit & RequestOptions = {}\n  ): Promise<ApiResponse<T>> {\n    const requestId = ++this.requestCounter;\n    const startTime = Date.now();\n    \n    // Extract custom options\n    const {\n      enableCache = false,\n      cacheDuration = API_CONFIG.DEFAULT_CACHE_DURATION,\n      timeout = API_CONFIG.DEFAULT_TIMEOUT,\n      retries = API_CONFIG.MAX_RETRIES,\n      authenticated = true,\n      headers: customHeaders = {},\n      ...fetchOptions\n    } = options;\n\n    // Check cache for GET requests\n    if (fetchOptions.method === 'GET' && enableCache) {\n      const cacheKey = `${endpoint}_${JSON.stringify(fetchOptions)}`;\n      const cachedResponse = this.cache.get(cacheKey);\n      \n      if (cachedResponse) {\n        logger.debug('SecureApiService', 'Returning cached response', {\n          endpoint,\n          requestId,\n          cacheSize: this.cache.size()\n        });\n        \n        return {\n          success: true,\n          data: cachedResponse,\n          metadata: {\n            requestId: `${requestId}`,\n            timestamp: new Date().toISOString(),\n            duration: 0,\n            cached: true\n          }\n        };\n      }\n    }\n\n    // Prepare request headers\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      'X-Request-ID': requestId.toString(),\n      'X-Client-Version': process.env.EXPO_PUBLIC_APP_VERSION || '1.0.0',\n      'X-Platform': Platform.OS.toString(),\n    };\n    \n    // Add custom headers\n    Object.assign(headers, customHeaders);\n\n    // Add authentication headers if required\n    if (authenticated) {\n      const authHeaders = googleAuthService.getAuthHeaders();\n      Object.assign(headers, authHeaders);\n      \n      if (!authHeaders.Authorization) {\n        logger.warn('SecureApiService', 'Authenticated request without auth header', {\n          endpoint,\n          requestId\n        });\n        \n        return {\n          success: false,\n          error: 'Authentication required',\n          metadata: {\n            requestId: requestId.toString(),\n            timestamp: new Date().toISOString()\n          }\n        };\n      }\n    }\n\n    // Retry logic with exponential backoff\n    for (let attempt = 1; attempt <= retries + 1; attempt++) {\n      try {\n        logger.debug('SecureApiService', 'Making API request', {\n          method: fetchOptions.method || 'GET',\n          endpoint,\n          requestId,\n          attempt,\n          maxAttempts: retries + 1,\n          authenticated\n        });\n\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n        try {\n          // Make the actual HTTP request\n          const response = await fetch(`${this.baseUrl}${endpoint}`, {\n            ...fetchOptions,\n            headers,\n            signal: controller.signal,\n          });\n\n          clearTimeout(timeoutId);\n\n          // Handle authentication errors\n          if (response.status === 401) {\n            logger.warn('SecureApiService', 'Received 401 Unauthorized', {\n              endpoint,\n              requestId,\n              attempt\n            });\n\n            // Try to refresh token and retry\n            if (attempt === 1) { // Only try refresh on first attempt\n              logger.info('SecureApiService', 'Attempting token refresh');\n              \n              const refreshSuccessful = await googleAuthService.refreshAccessToken();\n              \n              if (refreshSuccessful) {\n                // Update auth headers and continue to retry\n                const newAuthHeaders = googleAuthService.getAuthHeaders();\n                Object.assign(headers, newAuthHeaders);\n                \n                logger.info('SecureApiService', 'Token refreshed, retrying request', {\n                  endpoint,\n                  requestId\n                });\n                continue; // Retry with new token\n              }\n            }\n\n            return {\n              success: false,\n              error: 'Session expired. Please log in again.',\n              metadata: {\n                requestId: requestId.toString(),\n                timestamp: new Date().toISOString(),\n                duration: Date.now() - startTime\n              }\n            };\n          }\n\n          // Process successful response\n          const duration = Date.now() - startTime;\n          const apiResponse = await this.processResponse<T>(\n            response, \n            endpoint, \n            requestId, \n            duration\n          );\n\n          // Cache successful GET responses\n          if (apiResponse.success && fetchOptions.method === 'GET' && enableCache) {\n            const cacheKey = `${endpoint}_${JSON.stringify(fetchOptions)}`;\n            this.cache.set(cacheKey, apiResponse.data, cacheDuration);\n            \n            logger.debug('SecureApiService', 'Response cached', {\n              endpoint,\n              requestId,\n              cacheDuration\n            });\n          }\n\n          return apiResponse;\n\n        } catch (fetchError) {\n          clearTimeout(timeoutId);\n          throw fetchError;\n        }\n\n      } catch (error) {\n        const isLastAttempt = attempt > retries;\n        const duration = Date.now() - startTime;\n        \n        // Categorize the error\n        const apiError = this.categorizeError(error, endpoint);\n        \n        logger.warn('SecureApiService', `Request attempt ${attempt} failed`, {\n          endpoint,\n          requestId,\n          attempt,\n          maxAttempts: retries + 1,\n          error: apiError.message,\n          errorType: apiError.type,\n          duration\n        });\n\n        // Return error if it's the last attempt or error is not retryable\n        if (isLastAttempt || !apiError.retryable) {\n          return {\n            success: false,\n            error: apiError.message,\n            metadata: {\n              requestId: requestId.toString(),\n              timestamp: new Date().toISOString(),\n              duration\n            }\n          };\n        }\n\n        // Calculate retry delay with exponential backoff\n        const retryDelay = Math.min(\n          API_CONFIG.RETRY_DELAY_BASE * Math.pow(2, attempt - 1),\n          API_CONFIG.MAX_RETRY_DELAY\n        );\n        \n        logger.info('SecureApiService', `Retrying request in ${retryDelay}ms`, {\n          endpoint,\n          requestId,\n          attempt\n        });\n\n        // Wait before retrying\n        await new Promise(resolve => setTimeout(resolve, retryDelay));\n      }\n    }\n\n    // This should never be reached, but included for type safety\n    return {\n      success: false,\n      error: 'Maximum retry attempts exceeded',\n      metadata: {\n        requestId: requestId.toString(),\n        timestamp: new Date().toISOString()\n      }\n    };\n  }\n\n  // ========================================\n  // RESPONSE PROCESSING\n  // ========================================\n  \n  /**\n   * Process HTTP response and extract data\n   * \n   * @param response HTTP Response object\n   * @param endpoint API endpoint for logging\n   * @param requestId Request identifier for tracking\n   * @param duration Request duration for performance monitoring\n   * @returns Processed API response\n   */\n  private async processResponse<T>(\n    response: Response,\n    endpoint: string,\n    requestId: number,\n    duration: number\n  ): Promise<ApiResponse<T>> {\n    try {\n      // Parse JSON response\n      const data = await response.json();\n\n      // Handle successful responses\n      if (response.ok) {\n        logger.debug('SecureApiService', 'API request successful', {\n          endpoint,\n          requestId,\n          status: response.status,\n          duration,\n          hasData: !!data\n        });\n\n        return {\n          success: true,\n          data: data.data || data, // Handle both formats\n          message: data.message,\n          metadata: {\n            requestId: requestId.toString(),\n            timestamp: new Date().toISOString(),\n            duration\n          }\n        };\n      }\n\n      // Handle error responses\n      logger.warn('SecureApiService', 'API request returned error', {\n        endpoint,\n        requestId,\n        status: response.status,\n        statusText: response.statusText,\n        error: data.error || data.message,\n        duration\n      });\n\n      return {\n        success: false,\n        error: data.error || data.message || `HTTP ${response.status}: ${response.statusText}`,\n        metadata: {\n          requestId: requestId.toString(),\n          timestamp: new Date().toISOString(),\n          duration\n        }\n      };\n\n    } catch (parseError) {\n      logger.error('SecureApiService', 'Failed to parse API response', {\n        endpoint,\n        requestId,\n        status: response.status,\n        parseError: String(parseError),\n        duration\n      });\n\n      return {\n        success: false,\n        error: 'Invalid response from server',\n        metadata: {\n          requestId: requestId.toString(),\n          timestamp: new Date().toISOString(),\n          duration\n        }\n      };\n    }\n  }\n\n  // ========================================\n  // ERROR HANDLING\n  // ========================================\n  \n  /**\n   * Categorize errors for appropriate handling\n   * \n   * @param error The error that occurred\n   * @param endpoint The endpoint that failed\n   * @returns Categorized error information\n   */\n  private categorizeError(error: any, endpoint: string): ApiError {\n    // Network errors\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      return {\n        type: 'NETWORK_ERROR',\n        message: '×‘×¢×™×™×ª ×—×™×‘×•×¨ ×œ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×©×œ×š.', // Network connection issue. Please check your connection.\n        retryable: true\n      };\n    }\n\n    // Timeout errors\n    if (error instanceof Error && error.name === 'AbortError') {\n      return {\n        type: 'TIMEOUT_ERROR',\n        message: '×”×‘×§×©×” × ××©×›×” ×™×•×ª×¨ ××“×™ ×–××Ÿ. ×× × × ×¡×” ×©×•×‘.', // Request took too long. Please try again.\n        retryable: true\n      };\n    }\n\n    // Authentication errors\n    if (error.status === 401) {\n      return {\n        type: 'AUTHENTICATION_ERROR',\n        message: '×™×© ×œ×”×ª×—×‘×¨ ××—×“×© ×œ××¢×¨×›×ª.', // Please log in to the system again.\n        retryable: false\n      };\n    }\n\n    // Rate limiting errors\n    if (error.status === 429) {\n      return {\n        type: 'RATE_LIMIT_ERROR',\n        message: '×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª. ×× × ×”××ª×Ÿ ××¡×¤×¨ ×“×§×•×ª.', // Too many requests. Please wait a few minutes.\n        retryable: true,\n        retryAfter: parseInt(error.headers?.['Retry-After'] || '60', 10) * 1000\n      };\n    }\n\n    // Validation errors\n    if (error.status === 400) {\n      return {\n        type: 'VALIDATION_ERROR',\n        message: error.message || '× ×ª×•× ×™× ×©×’×•×™×™× × ×©×œ×—×• ×œ×©×¨×ª.', // Invalid data sent to server.\n        retryable: false\n      };\n    }\n\n    // Server errors\n    if (error.status >= 500) {\n      return {\n        type: 'SERVER_ERROR',\n        message: '×©×’×™××ª ×©×¨×ª ×¤× ×™××™×ª. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.', // Internal server error. Please try again later.\n        retryable: true\n      };\n    }\n\n    // Unknown errors\n    return {\n      type: 'UNKNOWN_ERROR',\n      message: '×©×’×™××” ×œ× ×¦×¤×•×™×”. ×× × × ×¡×” ×©×•×‘.', // Unexpected error. Please try again.\n      details: error instanceof Error ? error.message : String(error),\n      retryable: true\n    };\n  }\n\n  // ========================================\n  // HTTP METHOD WRAPPERS\n  // ========================================\n  \n  /**\n   * Make GET request with optional caching\n   * \n   * @param endpoint API endpoint\n   * @param options Request options\n   * @returns Promise resolving to API response\n   */\n  async get<T>(endpoint: string, options: RequestOptions = {}): Promise<ApiResponse<T>> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'GET',\n      enableCache: true, // Enable caching by default for GET requests\n      ...options,\n    });\n  }\n\n  /**\n   * Make POST request for creating resources\n   * \n   * @param endpoint API endpoint\n   * @param data Request body data\n   * @param options Request options\n   * @returns Promise resolving to API response\n   */\n  async post<T>(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ApiResponse<T>> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'POST',\n      body: data ? JSON.stringify(data) : undefined,\n      ...options,\n    });\n  }\n\n  /**\n   * Make PUT request for updating resources\n   * \n   * @param endpoint API endpoint\n   * @param data Request body data\n   * @param options Request options\n   * @returns Promise resolving to API response\n   */\n  async put<T>(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ApiResponse<T>> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'PUT',\n      body: data ? JSON.stringify(data) : undefined,\n      ...options,\n    });\n  }\n\n  /**\n   * Make PATCH request for partial updates\n   * \n   * @param endpoint API endpoint\n   * @param data Request body data\n   * @param options Request options\n   * @returns Promise resolving to API response\n   */\n  async patch<T>(endpoint: string, data?: any, options: RequestOptions = {}): Promise<ApiResponse<T>> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'PATCH',\n      body: data ? JSON.stringify(data) : undefined,\n      ...options,\n    });\n  }\n\n  /**\n   * Make DELETE request for removing resources\n   * \n   * @param endpoint API endpoint\n   * @param options Request options\n   * @returns Promise resolving to API response\n   */\n  async delete<T>(endpoint: string, options: RequestOptions = {}): Promise<ApiResponse<T>> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'DELETE',\n      ...options,\n    });\n  }\n\n  // ========================================\n  // USER API METHODS\n  // ========================================\n  \n  /**\n   * Get current authenticated user's profile\n   * Requires authentication\n   * \n   * @returns Promise resolving to user profile data\n   */\n  async getCurrentUser(): Promise<ApiResponse<any>> {\n    const user = googleAuthService.getCurrentUser();\n    if (!user) {\n      return {\n        success: false,\n        error: 'Not authenticated'\n      };\n    }\n    \n    return this.get(`/api/users/${user.id}`, { enableCache: true });\n  }\n\n  /**\n   * Update current user's profile\n   * Requires authentication and validates user owns the profile\n   * \n   * @param updateData Profile data to update\n   * @returns Promise resolving to updated profile\n   */\n  async updateCurrentUserProfile(updateData: any): Promise<ApiResponse<any>> {\n    const user = googleAuthService.getCurrentUser();\n    if (!user) {\n      return {\n        success: false,\n        error: 'Not authenticated'\n      };\n    }\n    \n    // Clear cached user data since we're updating\n    this.clearUserCache(user.id);\n    \n    return this.put(`/api/users/${user.id}`, updateData);\n  }\n\n  /**\n   * Get user's active sessions for security monitoring\n   * Requires authentication\n   * \n   * @returns Promise resolving to list of active sessions\n   */\n  async getUserSessions(): Promise<ApiResponse<any[]>> {\n    return this.get('/auth/sessions');\n  }\n\n  // ========================================\n  // DONATION API METHODS\n  // ========================================\n  \n  /**\n   * Get donations with optional filtering\n   * Public endpoint - no authentication required\n   * \n   * @param filters Donation filters (type, category, city, etc.)\n   * @returns Promise resolving to filtered donations\n   */\n  async getDonations(filters: {\n    type?: string;\n    category?: string;\n    city?: string;\n    status?: string;\n    limit?: number;\n    offset?: number;\n    search?: string;\n  } = {}): Promise<ApiResponse<any[]>> {\n    const params = new URLSearchParams();\n    \n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        params.append(key, value.toString());\n      }\n    });\n    \n    const queryString = params.toString();\n    const endpoint = `/api/donations${queryString ? `?${queryString}` : ''}`;\n    \n    return this.get(endpoint, { \n      authenticated: false, \n      enableCache: true,\n      cacheDuration: 2 * 60 * 1000 // Cache for 2 minutes\n    });\n  }\n\n  /**\n   * Create a new donation\n   * Requires authentication\n   * \n   * @param donationData Donation details\n   * @returns Promise resolving to created donation\n   */\n  async createDonation(donationData: any): Promise<ApiResponse<any>> {\n    // Clear donations cache since we're adding a new item\n    this.clearCacheByPattern('/api/donations');\n    \n    return this.post('/api/donations', donationData);\n  }\n\n  /**\n   * Get donation by ID\n   * Public endpoint with caching\n   * \n   * @param donationId Donation identifier\n   * @returns Promise resolving to donation details\n   */\n  async getDonationById(donationId: string): Promise<ApiResponse<any>> {\n    return this.get(`/api/donations/${donationId}`, {\n      authenticated: false,\n      enableCache: true\n    });\n  }\n\n  // ========================================\n  // RIDE API METHODS  \n  // ========================================\n  \n  /**\n   * Get available rides with filtering\n   * Public endpoint with caching\n   * \n   * @param filters Ride filters (from/to cities, date, etc.)\n   * @returns Promise resolving to filtered rides\n   */\n  async getRides(filters: {\n    from_city?: string;\n    to_city?: string;\n    date?: string;\n    status?: string;\n    limit?: number;\n    offset?: number;\n  } = {}): Promise<ApiResponse<any[]>> {\n    const params = new URLSearchParams();\n    \n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        params.append(key, value.toString());\n      }\n    });\n    \n    const queryString = params.toString();\n    const endpoint = `/api/rides${queryString ? `?${queryString}` : ''}`;\n    \n    return this.get(endpoint, { \n      authenticated: false,\n      enableCache: true,\n      cacheDuration: 1 * 60 * 1000 // Cache for 1 minute (rides change frequently)\n    });\n  }\n\n  /**\n   * Create a new ride\n   * Requires authentication\n   * \n   * @param rideData Ride details\n   * @returns Promise resolving to created ride\n   */\n  async createRide(rideData: any): Promise<ApiResponse<any>> {\n    // Clear rides cache since we're adding a new item\n    this.clearCacheByPattern('/api/rides');\n    \n    return this.post('/api/rides', rideData);\n  }\n\n  // ========================================\n  // COMMUNITY API METHODS\n  // ========================================\n  \n  /**\n   * Get community statistics\n   * Public endpoint with extended caching\n   * \n   * @param filters Stats filters (city, period, etc.)\n   * @returns Promise resolving to community statistics\n   */\n  async getCommunityStats(filters: {\n    city?: string;\n    period?: string;\n  } = {}): Promise<ApiResponse<any>> {\n    const params = new URLSearchParams();\n    \n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        params.append(key, value.toString());\n      }\n    });\n    \n    const queryString = params.toString();\n    const endpoint = `/api/stats/community${queryString ? `?${queryString}` : ''}`;\n    \n    return this.get(endpoint, { \n      authenticated: false,\n      enableCache: true,\n      cacheDuration: 10 * 60 * 1000 // Cache for 10 minutes (stats change slowly)\n    });\n  }\n\n  // ========================================\n  // AUTHENTICATION API METHODS\n  // ========================================\n  \n  /**\n   * Logout from current session\n   * Clears both local and server-side session data\n   * \n   * @returns Promise resolving when logout is complete\n   */\n  async logout(): Promise<ApiResponse> {\n    try {\n      // Use GoogleAuthService for proper logout\n      await googleAuthService.logout();\n      \n      // Clear API cache\n      this.cache.clear();\n      \n      return {\n        success: true,\n        message: 'Logged out successfully'\n      };\n      \n    } catch (error) {\n      logger.error('SecureApiService', 'Logout failed', {\n        error: String(error)\n      });\n      \n      return {\n        success: false,\n        error: 'Logout failed, but local session cleared'\n      };\n    }\n  }\n\n  // ========================================\n  // UTILITY METHODS\n  // ========================================\n  \n  /**\n   * Clear cached responses for a specific user\n   * Called when user data changes\n   * \n   * @param userId User identifier\n   */\n  private clearUserCache(userId: string): void {\n    // Clear all cache entries containing the user ID\n    this.clearCacheByPattern(`/api/users/${userId}`);\n    \n    logger.debug('SecureApiService', 'User cache cleared', { userId });\n  }\n\n  /**\n   * Clear cached responses matching a pattern\n   * \n   * @param pattern URL pattern to match\n   */\n  private clearCacheByPattern(pattern: string): void {\n    const keysToDelete: string[] = [];\n    \n    for (const [key] of (this.cache as any).cache) {\n      if (key.includes(pattern)) {\n        keysToDelete.push(key);\n      }\n    }\n    \n    keysToDelete.forEach(key => {\n      (this.cache as any).cache.delete(key);\n    });\n    \n    if (keysToDelete.length > 0) {\n      logger.debug('SecureApiService', 'Cache cleared by pattern', {\n        pattern,\n        clearedItems: keysToDelete.length\n      });\n    }\n  }\n\n  /**\n   * Get cache statistics for monitoring\n   * \n   * @returns Cache statistics object\n   */\n  public getCacheStats(): {\n    size: number;\n    totalRequests: number;\n    cacheHits: number;\n    cacheHitRate: number;\n  } {\n    // TODO: Implement proper cache statistics tracking\n    return {\n      size: this.cache.size(),\n      totalRequests: this.requestCounter,\n      cacheHits: 0, // TODO: Track cache hits\n      cacheHitRate: 0 // TODO: Calculate hit rate\n    };\n  }\n\n  /**\n   * Clear all cached data\n   * Useful for debugging or memory management\n   */\n  public clearCache(): void {\n    this.cache.clear();\n    logger.info('SecureApiService', 'All cache cleared');\n  }\n\n  /**\n   * Health check endpoint\n   * Tests connectivity to the backend without authentication\n   * \n   * @returns Promise resolving to health status\n   */\n  async healthCheck(): Promise<ApiResponse<{ status: string; timestamp: string }>> {\n    return this.get('/health', { \n      authenticated: false,\n      timeout: 5000, // Short timeout for health checks\n      retries: 1 // Don't retry health checks aggressively\n    });\n  }\n\n  /**\n   * Get service information and statistics\n   * Useful for debugging and monitoring\n   * \n   * @returns Service information object\n   */\n  public getServiceInfo(): {\n    baseUrl: string;\n    totalRequests: number;\n    cacheStats: any;\n    isAuthenticated: boolean;\n    currentUser: any;\n  } {\n    return {\n      baseUrl: this.baseUrl,\n      totalRequests: this.requestCounter,\n      cacheStats: this.getCacheStats(),\n      isAuthenticated: googleAuthService.isAuthenticated(),\n      currentUser: googleAuthService.getCurrentUser()\n    };\n  }\n}\n\n// ========================================\n// SINGLETON EXPORT\n// ========================================\n\n/**\n * Export singleton instance for consistent usage across the app\n * \n * USAGE:\n * ```typescript\n * import { secureApiService } from './google_auth/SecureApiService';\n * \n * // Get user profile\n * const user = await secureApiService.getCurrentUser();\n * \n * // Get donations\n * const donations = await secureApiService.getDonations({ city: '×ª×œ ××‘×™×‘' });\n * ```\n */\nexport const secureApiService = new SecureApiService();\n\n// Export class for advanced usage\nexport { SecureApiService };\n\n// Default export\nexport default secureApiService;\n\n/**\n * ========================================\n * TODO LIST FOR FUTURE ENHANCEMENTS\n * ========================================\n * \n * SECURITY IMPROVEMENTS:\n * - [ ] Implement request signing for API integrity verification\n * - [ ] Add certificate pinning for man-in-the-middle attack prevention\n * - [ ] Implement request/response encryption for sensitive data\n * - [ ] Add support for API key authentication for public endpoints\n * - [ ] Implement request rate limiting on client side\n * - [ ] Add CSRF token support for state-changing operations\n * \n * PERFORMANCE OPTIMIZATIONS:\n * - [ ] Implement intelligent cache invalidation strategies\n * - [ ] Add request batching for multiple small requests  \n * - [ ] Implement connection pooling and keepalive optimization\n * - [ ] Add response compression support (gzip, brotli)\n * - [ ] Implement progressive loading for large datasets\n * - [ ] Add lazy loading for less critical data\n * \n * RELIABILITY FEATURES:\n * - [ ] Implement offline request queuing with sync when online\n * - [ ] Add circuit breaker pattern for failing services\n * - [ ] Implement intelligent retry strategies per endpoint type\n * - [ ] Add request deduplication to prevent duplicate operations\n * - [ ] Implement graceful degradation for partial service failures\n * \n * MONITORING AND OBSERVABILITY:\n * - [ ] Add detailed performance metrics collection\n * - [ ] Implement distributed tracing for request flows\n * - [ ] Add user-friendly error reporting to backend\n * - [ ] Implement client-side error analytics\n * - [ ] Add real-time service health monitoring\n * \n * TESTING AND QUALITY:\n * - [ ] Add comprehensive unit tests for all API methods\n * - [ ] Implement integration tests with mock server\n * - [ ] Add performance regression tests\n * - [ ] Implement contract testing with backend\n * - [ ] Add chaos engineering tests for resilience validation\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":178,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4346,4349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4346,4349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4367,4370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4367,4370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":183,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":183,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'googleAuthService' is assigned a value but never used.","line":240,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":240,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":276,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":276,"endColumn":17}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * GOOGLE AUTHENTICATION SYSTEM - MAIN EXPORTS\n * ========================================\n * \n * This is the main entry point for the Karma Community Google Authentication System.\n * Import everything you need for authentication from this single file.\n * \n * MAIN EXPORTS:\n * - GoogleAuthService: Main authentication service (singleton)\n * - SecureGoogleAuthButton: React component for Google login\n * - SecureApiService: API client with automatic authentication\n * - AuthConfiguration: Configuration and settings\n * - Types: All TypeScript interfaces and types\n * \n * USAGE:\n * ```typescript\n * import { \n *   googleAuthService, \n *   SecureGoogleAuthButton,\n *   secureApiService \n * } from './google_auth';\n * ```\n * \n * AUTHOR: AI Assistant\n * VERSION: 1.0.1\n * SECURITY LEVEL: Enterprise Grade\n */\n\n// ========================================\n// MAIN SERVICES\n// ========================================\n\n/**\n * Main authentication service (singleton)\n * Handles all Google OAuth operations, token management, and session handling\n */\nexport { \n  googleAuthService,\n  GoogleAuthService \n} from './GoogleAuthService';\n\n/**\n * Secure API service for authenticated requests\n * Automatically handles authentication headers, token refresh, and error handling\n */\nexport { \n  secureApiService,\n  SecureApiService \n} from './SecureApiService';\n\n// ========================================\n// REACT COMPONENTS\n// ========================================\n\n/**\n * Secure Google authentication button component\n * Drop-in replacement for old authentication buttons with enterprise-grade security\n */\nexport { \n  default as SecureGoogleAuthButton\n} from './SecureGoogleAuthButton';\n\n// ========================================\n// CONFIGURATION\n// ========================================\n\n/**\n * Authentication configuration and settings\n * All OAuth, security, and performance settings\n */\nexport {\n  default as AuthConfiguration,\n  AUTH_CONFIG,\n  getGoogleClientIds,\n  isGoogleOAuthConfigured,\n  getRedirectUri,\n  createOAuthConfig,\n  getApiBaseUrl,\n  validateAuthConfiguration,\n  ERROR_MESSAGES\n} from './AuthConfiguration';\n\n// ========================================\n// TYPE DEFINITIONS\n// ========================================\n\n/**\n * Main authentication types\n */\nexport type {\n  AuthTokens,\n  SecureAuthUser,\n  AuthResponse,\n  AuthState,\n} from './GoogleAuthService';\n\n/**\n * API service types\n */\nexport type {\n  ApiResponse,\n  RequestOptions,\n  ApiError,\n  ApiErrorType,\n} from './SecureApiService';\n\n/**\n * Component prop types\n */\nexport type {\n  SecureGoogleAuthButtonProps as GoogleAuthButtonProps,\n} from './SecureGoogleAuthButton';\n\n// ========================================\n// UTILITY FUNCTIONS\n// ========================================\n\n/**\n * Quick initialization function for easy setup\n * Call this once in your App.tsx or main component\n * \n * @example\n * ```typescript\n * import { initializeGoogleAuth } from './google_auth';\n * \n * useEffect(() => {\n *   initializeGoogleAuth().then(() => {\n *     console.log('Google Auth initialized');\n *   });\n * }, []);\n * ```\n */\nexport const initializeGoogleAuth = async (): Promise<{\n  success: boolean;\n  error?: string;\n}> => {\n  try {\n    // Import services dynamically to avoid circular dependencies\n    const { googleAuthService } = await import('./GoogleAuthService');\n    const { validateAuthConfiguration } = await import('./AuthConfiguration');\n    \n    // Validate configuration\n    const validation = validateAuthConfiguration();\n    if (!validation.isValid) {\n      throw new Error(`Configuration errors: ${validation.errors.join(', ')}`);\n    }\n\n    // Initialize the service\n    await googleAuthService.initialize();\n    \n    return { success: true };\n    \n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Initialization failed'\n    };\n  }\n};\n\n/**\n * Quick authentication status check\n * Useful for navigation guards and conditional rendering\n * \n * @returns Object with authentication status and user data\n * \n * @example\n * ```typescript\n * const { isAuthenticated, user } = getAuthStatus();\n * if (isAuthenticated) {\n *   console.log('User logged in:', user.email);\n * }\n * ```\n */\nexport const getAuthStatus = (): {\n  isAuthenticated: boolean;\n  user: any | null;\n  state: any;\n  hasValidTokens: boolean;\n} => {\n  // Import services dynamically to avoid circular dependencies\n  const { googleAuthService } = require('./GoogleAuthService');\n  \n  return {\n    isAuthenticated: googleAuthService.isAuthenticated(),\n    user: googleAuthService.getCurrentUser(),\n    state: googleAuthService.getAuthState(),\n    hasValidTokens: !!googleAuthService.getAccessToken(),\n  };\n};\n\n/**\n * Quick logout function\n * Performs complete logout with cleanup\n * \n * @returns Promise resolving when logout is complete\n * \n * @example\n * ```typescript\n * const handleLogout = async () => {\n *   await logoutUser();\n *   navigation.navigate('LoginScreen');\n * };\n * ```\n */\nexport const logoutUser = async (): Promise<void> => {\n  const { googleAuthService } = await import('./GoogleAuthService');\n  await googleAuthService.logout();\n};\n\n/**\n * Health check for the authentication system\n * Useful for debugging and monitoring\n * \n * @returns Health status of all authentication components\n * \n * @example\n * ```typescript\n * const health = await checkAuthHealth();\n * console.log('Auth system health:', health);\n * ```\n */\nexport const checkAuthHealth = async (): Promise<{\n  overall: 'healthy' | 'degraded' | 'unhealthy';\n  components: {\n    authService: 'healthy' | 'unhealthy';\n    apiService: 'healthy' | 'unhealthy';\n    serverConnection: 'healthy' | 'unhealthy';\n  };\n  details: {\n    configurationValid: boolean;\n    hasStoredTokens: boolean;\n    serverReachable: boolean;\n  };\n}> => {\n  try {\n    // Import services dynamically to avoid circular dependencies\n    const { validateAuthConfiguration } = await import('./AuthConfiguration');\n    const { googleAuthService } = await import('./GoogleAuthService');\n    const { secureApiService } = await import('./SecureApiService');\n    \n    // Check configuration\n    const configValidation = validateAuthConfiguration();\n    \n    // Check stored authentication\n    const authStatus = getAuthStatus();\n    \n    // Check server connectivity\n    const serverHealth = await secureApiService.healthCheck();\n    \n    // Determine component health\n    const components = {\n      authService: (authStatus.state !== 'error' ? 'healthy' : 'unhealthy') as 'healthy' | 'unhealthy',\n      apiService: 'healthy' as const, // API service is always functional\n      serverConnection: (serverHealth.success ? 'healthy' : 'unhealthy') as 'healthy' | 'unhealthy',\n    };\n    \n    // Determine overall health\n    const healthyComponents = Object.values(components).filter(h => h === 'healthy').length;\n    const overall = \n      healthyComponents === 3 ? 'healthy' :\n      healthyComponents >= 2 ? 'degraded' : \n      'unhealthy';\n    \n    return {\n      overall,\n      components,\n      details: {\n        configurationValid: configValidation.isValid,\n        hasStoredTokens: authStatus.hasValidTokens,\n        serverReachable: serverHealth.success,\n      }\n    };\n    \n  } catch (error) {\n    return {\n      overall: 'unhealthy',\n      components: {\n        authService: 'unhealthy',\n        apiService: 'unhealthy', \n        serverConnection: 'unhealthy',\n      },\n      details: {\n        configurationValid: false,\n        hasStoredTokens: false,\n        serverReachable: false,\n      }\n    };\n  }\n};\n\n// ========================================\n// MIGRATION HELPERS\n// ========================================\n\n/**\n * Migration helper for upgrading from old authentication system\n * \n * @returns Promise resolving when migration is complete\n * \n * @example\n * ```typescript\n * // Call this once when upgrading to new auth system\n * await migrateFromLegacyAuth();\n * ```\n */\nexport const migrateFromLegacyAuth = async (): Promise<{\n  migrated: boolean;\n  clearedData: string[];\n}> => {\n  const clearedData: string[] = [];\n  \n  try {\n    // List of old authentication storage keys to clean up\n    const oldKeys = [\n      'current_user',\n      'guest_mode',\n      'auth_mode', \n      'oauth_success_flag',\n      'google_auth_user',\n      'google_auth_token',\n      'oauth_in_progress',\n    ];\n    \n    // Clear old authentication data from AsyncStorage\n    const { default: AsyncStorage } = await import('@react-native-async-storage/async-storage');\n    \n    for (const key of oldKeys) {\n      const value = await AsyncStorage.getItem(key);\n      if (value !== null) {\n        await AsyncStorage.removeItem(key);\n        clearedData.push(key);\n      }\n    }\n    \n    if (clearedData.length > 0) {\n      const { logger } = await import('../utils/loggerService');\n      logger.info('GoogleAuth', 'Legacy authentication data cleared', {\n        clearedKeys: clearedData\n      });\n    }\n    \n    return {\n      migrated: true,\n      clearedData\n    };\n    \n  } catch (error) {\n    const { logger } = await import('../utils/loggerService');\n    logger.error('GoogleAuth', 'Failed to migrate from legacy auth', {\n      error: String(error)\n    });\n    \n    return {\n      migrated: false,\n      clearedData\n    };\n  }\n};\n\n// ========================================\n// CONSTANTS\n// ========================================\n\n/**\n * Current version of the authentication system\n */\nexport const AUTH_SYSTEM_VERSION = '1.0.1';\n\n/**\n * System capabilities\n */\nexport const CAPABILITIES = {\n  HAS_SERVER_VERIFICATION: true,\n  HAS_SECURE_STORAGE: true,\n  HAS_AUTOMATIC_REFRESH: true,\n  HAS_RATE_LIMITING: true,\n  HAS_SESSION_MANAGEMENT: true,\n  HAS_ERROR_RECOVERY: true,\n  HAS_OFFLINE_SUPPORT: false, // TODO\n  HAS_BIOMETRIC_AUTH: false,  // TODO\n} as const;\n\n/**\n * ========================================\n * QUICK START GUIDE\n * ========================================\n * \n * 1. SETUP ENVIRONMENT VARIABLES:\n * ```env\n * EXPO_PUBLIC_API_BASE_URL=your-server-url\n * EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID=your-client-id\n * ```\n * \n * 2. INITIALIZE IN APP:\n * ```typescript\n * import { initializeGoogleAuth } from './google_auth';\n * \n * useEffect(() => {\n *   initializeGoogleAuth();\n * }, []);\n * ```\n * \n * 3. USE LOGIN BUTTON:\n * ```tsx\n * import { SecureGoogleAuthButton } from './google_auth';\n * \n * <SecureGoogleAuthButton\n *   onSuccess={(user) => navigation.navigate('Home')}\n * />\n * ```\n * \n * 4. MAKE API CALLS:\n * ```typescript\n * import { secureApiService } from './google_auth';\n * \n * const data = await secureApiService.getCurrentUser();\n * ```\n * \n * That's it! The authentication system handles everything else automatically.\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/types/ApiTypes.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[855,858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[855,858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3655,3658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3655,3658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":178,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":178,"endColumn":38,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[4185,4396],"text":"type TokenRefreshResponse = BaseApiResponse<{\n  /** New access token */\n  accessToken: string;\n  /** Expiration time in seconds */\n  expiresIn: number;\n  /** Token type */\n  tokenType: 'Bearer';\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":202,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":202,"endColumn":38,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[4695,4942],"text":"type UserSessionsResponse = BaseApiResponse<Array<{\n  sessionId: string;\n  createdAt: string;\n  expiresAt: string;\n  lastActivity: string;\n  ipAddress: string;\n  userAgent: string;\n  platform: string;\n  isCurrentSession: boolean;\n}>>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":220,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":220,"endColumn":37,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[5091,5711],"text":"type UserProfileResponse = BaseApiResponse<{\n  id: string;\n  email: string;\n  name: string;\n  phone?: string;\n  avatar: string;\n  bio?: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  interests: string[];\n  roles: string[];\n  settings: {\n    language: string;\n    darkMode: boolean;\n    notificationsEnabled: boolean;\n    [key: string]: any;\n  };\n  stats: {\n    postsCount: number;\n    followersCount: number;\n    followingCount: number;\n    donationsCount: number;\n    ridesCount: number;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":241,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5548,5551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5548,5551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":276,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6241,6244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6241,6244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":397,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":397,"endColumn":35,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[8789,8859],"text":"type DonationsResponse = PaginatedResponse<DonationItem>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":402,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":402,"endColumn":44,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[8908,9088],"text":"type DonationCategoriesResponse = BaseApiResponse<Array<{\n  id: string;\n  name: string;\n  nameHe: string;\n  icon: string;\n  count: number;\n  description?: string;\n}>>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":790,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":790,"endColumn":36,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[16982,17422],"text":"type FileUploadResponse = BaseApiResponse<{\n  /** Unique file identifier */\n  fileId: string;\n  /** Direct URL to uploaded file */\n  url: string;\n  /** CDN URL for optimized delivery */\n  cdnUrl?: string;\n  /** Thumbnail URL (for images) */\n  thumbnailUrl?: string;\n  /** Upload metadata */\n  metadata: {\n    originalName: string;\n    size: number;\n    mimeType: string;\n    uploadedAt: string;\n    expiresAt?: string;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":822,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":822,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17773,17776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17773,17776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":913,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":913,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19676,19679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19676,19679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":935,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":935,"endColumn":37,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[20118,20824],"text":"type HealthCheckResponse = BaseApiResponse<{\n  /** Overall service status */\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  \n  /** Individual service components */\n  services: {\n    database: 'healthy' | 'unhealthy';\n    redis: 'healthy' | 'unhealthy';\n    googleOAuth: 'healthy' | 'unhealthy';\n    storage: 'healthy' | 'unhealthy';\n  };\n  \n  /** Performance metrics */\n  metrics: {\n    responseTime: number;\n    memoryUsage: number;\n    cpuUsage: number;\n    activeConnections: number;\n  };\n  \n  /** Version information */\n  version: {\n    api: string;\n    database: string;\n    node: string;\n  };\n  \n  /** Uptime information */\n  uptime: {\n    seconds: number;\n    human: string;\n  };\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":1000,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":1000,"endColumn":39,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[21441,21825],"text":"type BulkOperationResponse<T = any> = BaseApiResponse<{\n  /** Number of items processed successfully */\n  successCount: number;\n  /** Number of items that failed */\n  errorCount: number;\n  /** Total items attempted */\n  totalCount: number;\n  /** Results for each item */\n  results: Array<{\n    id: string;\n    success: boolean;\n    data?: T;\n    error?: string;\n  }>;\n}>"},"desc":"Replace empty interface with a type alias."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1000,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1000,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21477,21480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21477,21480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * API TYPE DEFINITIONS  \n * ========================================\n * \n * Type definitions for all API operations in the Google Authentication System.\n * These types ensure type safety for all server communication and data structures.\n * \n * CATEGORIES:\n * - Request/Response types for all API endpoints\n * - Data Transfer Objects (DTOs) for validation\n * - Server response formats and error structures\n * - Pagination and filtering types\n * - Real-time communication types\n * \n * AUTHOR: AI Assistant\n * LAST UPDATED: 2024\n */\n\n// ========================================\n// BASE API TYPES\n// ========================================\n\n/**\n * Standard API response wrapper used by all endpoints\n * Provides consistent response structure across the entire API\n */\nexport interface BaseApiResponse<TData = any> {\n  /** Whether the operation was successful */\n  success: boolean;\n  \n  /** Response data (present when success is true) */\n  data?: TData;\n  \n  /** Error message (present when success is false) */\n  error?: string;\n  \n  /** Additional context message */\n  message?: string;\n  \n  /** Response metadata for debugging and monitoring */\n  metadata?: {\n    /** Unique request identifier for tracing */\n    requestId: string;\n    \n    /** Response timestamp in ISO format */\n    timestamp: string;\n    \n    /** Request processing duration in milliseconds */\n    duration: number;\n    \n    /** API version that handled the request */\n    version?: string;\n    \n    /** Whether response was cached */\n    cached?: boolean;\n    \n    /** Rate limiting information */\n    rateLimit?: {\n      /** Remaining requests in current window */\n      remaining: number;\n      /** When the rate limit window resets */\n      resetTime: number;\n      /** Total request limit per window */\n      limit: number;\n    };\n  };\n}\n\n/**\n * Pagination metadata for list responses\n */\nexport interface PaginationMeta {\n  /** Current page number (1-based) */\n  page: number;\n  \n  /** Number of items per page */\n  limit: number;\n  \n  /** Total number of items across all pages */\n  total: number;\n  \n  /** Total number of pages */\n  totalPages: number;\n  \n  /** Whether there are more pages after this one */\n  hasNext: boolean;\n  \n  /** Whether there are pages before this one */\n  hasPrev: boolean;\n  \n  /** Cursor for efficient pagination (if using cursor-based pagination) */\n  cursor?: {\n    next?: string;\n    prev?: string;\n  };\n}\n\n/**\n * Paginated response wrapper\n */\nexport interface PaginatedResponse<TData> extends BaseApiResponse<TData[]> {\n  /** Pagination metadata */\n  pagination: PaginationMeta;\n}\n\n// ========================================\n// AUTHENTICATION API TYPES\n// ========================================\n\n/**\n * Google OAuth token verification request\n */\nexport interface GoogleAuthRequest {\n  /** Google ID token to verify */\n  idToken: string;\n  \n  /** Optional access token (alternative to ID token) */\n  accessToken?: string;\n  \n  /** Client metadata for security logging */\n  metadata?: {\n    platform: string;\n    appVersion?: string;\n    deviceId?: string;\n    userAgent?: string;\n  };\n}\n\n/**\n * Successful authentication response\n */\nexport interface AuthSuccessResponse extends BaseApiResponse<{\n  /** JWT token pair for session management */\n  tokens: {\n    accessToken: string;\n    refreshToken: string;\n    expiresIn: number;\n    refreshExpiresIn: number;\n    tokenType: 'Bearer';\n  };\n  \n  /** Verified user profile data */\n  user: {\n    id: string;\n    email: string;\n    name: string;\n    avatar: string;\n    roles: string[];\n    emailVerified: boolean;\n    settings: Record<string, any>;\n  };\n}> {\n  /** Additional authentication metadata */\n  metadata?: BaseApiResponse['metadata'] & {\n    /** Whether this is a new user registration */\n    isNewUser?: boolean;\n    /** Previous login timestamp */\n    lastLogin?: string;\n    /** Login count */\n    loginCount?: number;\n    /** Security warnings */\n    securityWarnings?: string[];\n  };\n}\n\n/**\n * Token refresh request\n */\nexport interface TokenRefreshRequest {\n  /** Current refresh token */\n  refreshToken: string;\n}\n\n/**\n * Token refresh response\n */\nexport interface TokenRefreshResponse extends BaseApiResponse<{\n  /** New access token */\n  accessToken: string;\n  /** Expiration time in seconds */\n  expiresIn: number;\n  /** Token type */\n  tokenType: 'Bearer';\n}> {}\n\n/**\n * Logout request\n */\nexport interface LogoutRequest {\n  /** Current access token (optional) */\n  token?: string;\n  /** Current refresh token (optional) */\n  refreshToken?: string;\n  /** Whether to logout from all devices */\n  allDevices?: boolean;\n}\n\n/**\n * User sessions response\n */\nexport interface UserSessionsResponse extends BaseApiResponse<Array<{\n  sessionId: string;\n  createdAt: string;\n  expiresAt: string;\n  lastActivity: string;\n  ipAddress: string;\n  userAgent: string;\n  platform: string;\n  isCurrentSession: boolean;\n}>> {}\n\n// ========================================\n// USER API TYPES\n// ========================================\n\n/**\n * User profile response\n */\nexport interface UserProfileResponse extends BaseApiResponse<{\n  id: string;\n  email: string;\n  name: string;\n  phone?: string;\n  avatar: string;\n  bio?: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  interests: string[];\n  roles: string[];\n  settings: {\n    language: string;\n    darkMode: boolean;\n    notificationsEnabled: boolean;\n    [key: string]: any;\n  };\n  stats: {\n    postsCount: number;\n    followersCount: number;\n    followingCount: number;\n    donationsCount: number;\n    ridesCount: number;\n  };\n}> {}\n\n/**\n * User profile update request\n */\nexport interface UserUpdateRequest {\n  /** Updated name */\n  name?: string;\n  /** Updated phone number */\n  phone?: string;\n  /** Updated avatar URL */\n  avatar?: string;\n  /** Updated bio */\n  bio?: string;\n  /** Updated location */\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  /** Updated interests */\n  interests?: string[];\n  /** Updated settings */\n  settings?: {\n    language?: string;\n    darkMode?: boolean;\n    notificationsEnabled?: boolean;\n    [key: string]: any;\n  };\n}\n\n/**\n * User list filters\n */\nexport interface UserListFilters {\n  /** Filter by city */\n  city?: string;\n  /** Filter by country */\n  country?: string;\n  /** Search by name or email */\n  search?: string;\n  /** Filter by role */\n  role?: string;\n  /** Filter by activity status */\n  isActive?: boolean;\n  /** Sort field */\n  sortBy?: 'name' | 'joinDate' | 'karmaPoints' | 'lastActive';\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n}\n\n// ========================================\n// DONATION API TYPES\n// ========================================\n\n/**\n * Donation item structure\n */\nexport interface DonationItem {\n  id: string;\n  title: string;\n  description: string;\n  category: string;\n  type: 'item' | 'service' | 'money' | 'time';\n  status: 'available' | 'reserved' | 'completed' | 'cancelled';\n  donorId: string;\n  donorName: string;\n  location: {\n    city: string;\n    country: string;\n    address?: string;\n  };\n  images: string[];\n  tags: string[];\n  createdAt: string;\n  updatedAt: string;\n  expiresAt?: string;\n  value?: number;\n  currency?: string;\n  contactInfo?: {\n    phone?: string;\n    email?: string;\n    preferredContact?: 'phone' | 'email' | 'app';\n  };\n}\n\n/**\n * Create donation request\n */\nexport interface CreateDonationRequest {\n  title: string;\n  description: string;\n  category: string;\n  type: 'item' | 'service' | 'money' | 'time';\n  location: {\n    city: string;\n    country: string;\n    address?: string;\n  };\n  images?: string[];\n  tags?: string[];\n  expiresAt?: string;\n  value?: number;\n  currency?: string;\n  contactInfo?: {\n    phone?: string;\n    email?: string;\n    preferredContact?: 'phone' | 'email' | 'app';\n  };\n}\n\n/**\n * Donation filters for search and listing\n */\nexport interface DonationFilters {\n  /** Filter by category */\n  category?: string;\n  /** Filter by type */\n  type?: 'item' | 'service' | 'money' | 'time';\n  /** Filter by city */\n  city?: string;\n  /** Filter by status */\n  status?: 'available' | 'reserved' | 'completed';\n  /** Search by title or description */\n  search?: string;\n  /** Filter by value range */\n  minValue?: number;\n  maxValue?: number;\n  /** Filter by creation date */\n  dateFrom?: string;\n  dateTo?: string;\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n  /** Sort field */\n  sortBy?: 'createdAt' | 'title' | 'value' | 'location';\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Donation list response\n */\nexport interface DonationsResponse extends PaginatedResponse<DonationItem> {}\n\n/**\n * Donation categories response\n */\nexport interface DonationCategoriesResponse extends BaseApiResponse<Array<{\n  id: string;\n  name: string;\n  nameHe: string;\n  icon: string;\n  count: number;\n  description?: string;\n}>> {}\n\n// ========================================\n// RIDE API TYPES  \n// ========================================\n\n/**\n * Ride sharing item structure\n */\nexport interface RideItem {\n  id: string;\n  title: string;\n  driverId: string;\n  driverName: string;\n  driverRating: number;\n  from: {\n    name: string;\n    city: string;\n    address?: string;\n    coordinates?: {\n      lat: number;\n      lng: number;\n    };\n  };\n  to: {\n    name: string;\n    city: string;\n    address?: string;\n    coordinates?: {\n      lat: number;\n      lng: number;\n    };\n  };\n  departureTime: string;\n  estimatedArrival?: string;\n  availableSeats: number;\n  totalSeats: number;\n  pricePerSeat: number;\n  currency: string;\n  status: 'available' | 'full' | 'in_progress' | 'completed' | 'cancelled';\n  requirements?: string[];\n  description?: string;\n  vehicle?: {\n    model?: string;\n    color?: string;\n    licensePlate?: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Create ride request\n */\nexport interface CreateRideRequest {\n  title: string;\n  fromLocation: {\n    name: string;\n    city: string;\n    address?: string;\n  };\n  toLocation: {\n    name: string;\n    city: string;\n    address?: string;\n  };\n  departureTime: string;\n  availableSeats: number;\n  pricePerSeat: number;\n  currency?: string;\n  requirements?: string[];\n  description?: string;\n  vehicle?: {\n    model?: string;\n    color?: string;\n  };\n}\n\n/**\n * Ride filters for search\n */\nexport interface RideFilters {\n  /** Filter by departure city */\n  fromCity?: string;\n  /** Filter by destination city */\n  toCity?: string;\n  /** Filter by departure date */\n  date?: string;\n  /** Filter by time range */\n  timeFrom?: string;\n  timeTo?: string;\n  /** Filter by available seats */\n  minSeats?: number;\n  /** Filter by price range */\n  maxPrice?: number;\n  /** Filter by status */\n  status?: 'available' | 'full';\n  /** Results per page */\n  limit?: number;\n  /** Page offset */\n  offset?: number;\n  /** Sort options */\n  sortBy?: 'departureTime' | 'price' | 'availableSeats';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Ride booking request\n */\nexport interface RideBookingRequest {\n  /** Number of seats to book */\n  seats: number;\n  /** Passenger contact information */\n  passengerInfo: {\n    name: string;\n    phone: string;\n    email?: string;\n  };\n  /** Special requests or notes */\n  notes?: string;\n}\n\n// ========================================\n// COMMUNITY STATS TYPES\n// ========================================\n\n/**\n * Community statistics structure\n */\nexport interface CommunityStats {\n  /** Total statistics */\n  totals: {\n    activeUsers: number;\n    totalDonations: number;\n    totalRides: number;\n    karmaPointsDistributed: number;\n    citiesCovered: number;\n  };\n  \n  /** Recent activity (last 30 days) */\n  recentActivity: {\n    newUsers: number;\n    newDonations: number;\n    newRides: number;\n    completedTransactions: number;\n  };\n  \n  /** Top performing cities */\n  topCities: Array<{\n    city: string;\n    country: string;\n    userCount: number;\n    donationCount: number;\n    rideCount: number;\n    karmaPoints: number;\n  }>;\n  \n  /** Category breakdown */\n  categoryStats: Array<{\n    category: string;\n    count: number;\n    percentage: number;\n    growth: number; // percentage change from previous period\n  }>;\n  \n  /** Time-based statistics */\n  timeStats: {\n    hourlyActivity: number[]; // 24 hours\n    weeklyActivity: number[]; // 7 days  \n    monthlyActivity: number[]; // 12 months\n  };\n}\n\n/**\n * Community stats filters\n */\nexport interface StatsFilters {\n  /** Filter by city */\n  city?: string;\n  /** Filter by time period */\n  period?: 'day' | 'week' | 'month' | 'year';\n  /** Start date for custom period */\n  dateFrom?: string;\n  /** End date for custom period */\n  dateTo?: string;\n  /** Specific statistic type */\n  statType?: string;\n}\n\n// ========================================\n// ERROR TYPES\n// ========================================\n\n/**\n * API error response structure\n */\nexport interface ApiErrorResponse extends BaseApiResponse<never> {\n  /** Always false for error responses */\n  success: false;\n  \n  /** Error message for display to user */\n  error: string;\n  \n  /** Additional error details */\n  details?: {\n    /** Error code for programmatic handling */\n    code?: string;\n    /** Field-specific validation errors */\n    fieldErrors?: Record<string, string[]>;\n    /** Suggestions for fixing the error */\n    suggestions?: string[];\n    /** Documentation link for the error */\n    docsUrl?: string;\n  };\n}\n\n/**\n * Network error information\n */\nexport interface NetworkError {\n  /** Error type classification */\n  type: 'NETWORK_ERROR' | 'TIMEOUT_ERROR' | 'CONNECTIVITY_ERROR';\n  /** User-friendly error message */\n  message: string;\n  /** Technical error details */\n  technical?: string;\n  /** Whether the operation can be retried */\n  retryable: boolean;\n  /** Suggested retry delay in milliseconds */\n  retryDelay?: number;\n}\n\n// ========================================\n// REQUEST TYPES\n// ========================================\n\n/**\n * Base filter interface for list endpoints\n */\nexport interface BaseFilters {\n  /** Search query string */\n  search?: string;\n  /** Results per page (max 100) */\n  limit?: number;\n  /** Page offset for pagination */\n  offset?: number;\n  /** Sort field */\n  sortBy?: string;\n  /** Sort direction */\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * Date range filter\n */\nexport interface DateRangeFilter {\n  /** Start date (ISO format) */\n  dateFrom?: string;\n  /** End date (ISO format) */\n  dateTo?: string;\n}\n\n/**\n * Location filter\n */\nexport interface LocationFilter {\n  /** City name */\n  city?: string;\n  /** Country code or name */\n  country?: string;\n  /** Radius for geographic search (in km) */\n  radius?: number;\n  /** Geographic coordinates */\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n}\n\n// ========================================\n// CHAT API TYPES\n// ========================================\n\n/**\n * Chat conversation structure\n */\nexport interface ChatConversation {\n  id: string;\n  participants: Array<{\n    userId: string;\n    name: string;\n    avatar: string;\n    role: 'owner' | 'participant';\n    joinedAt: string;\n  }>;\n  title?: string;\n  type: 'direct' | 'group' | 'support';\n  lastMessage?: {\n    id: string;\n    text: string;\n    senderId: string;\n    timestamp: string;\n    type: 'text' | 'image' | 'file';\n  };\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n  isArchived: boolean;\n  isMuted: boolean;\n  settings?: {\n    allowInvites: boolean;\n    deleteAfterDays?: number;\n  };\n}\n\n/**\n * Chat message structure\n */\nexport interface ChatMessage {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  senderName: string;\n  senderAvatar: string;\n  type: 'text' | 'image' | 'file' | 'system' | 'voice';\n  content: {\n    text?: string;\n    imageUrl?: string;\n    fileUrl?: string;\n    fileName?: string;\n    fileSize?: number;\n    voiceDuration?: number;\n  };\n  timestamp: string;\n  editedAt?: string;\n  isEdited: boolean;\n  replyTo?: {\n    messageId: string;\n    text: string;\n    senderName: string;\n  };\n  reactions?: Array<{\n    emoji: string;\n    count: number;\n    users: string[];\n  }>;\n  readBy: Array<{\n    userId: string;\n    readAt: string;\n  }>;\n  metadata?: {\n    platform: string;\n    ipAddress?: string;\n    edited?: boolean;\n    deleted?: boolean;\n  };\n}\n\n// ========================================\n// FILE UPLOAD TYPES\n// ========================================\n\n/**\n * File upload request\n */\nexport interface FileUploadRequest {\n  /** File name */\n  fileName: string;\n  /** File MIME type */\n  fileType: string;\n  /** File size in bytes */\n  fileSize: number;\n  /** Upload purpose/context */\n  purpose: 'avatar' | 'donation_image' | 'chat_attachment' | 'document';\n  /** Associated resource ID */\n  resourceId?: string;\n}\n\n/**\n * File upload response\n */\nexport interface FileUploadResponse extends BaseApiResponse<{\n  /** Unique file identifier */\n  fileId: string;\n  /** Direct URL to uploaded file */\n  url: string;\n  /** CDN URL for optimized delivery */\n  cdnUrl?: string;\n  /** Thumbnail URL (for images) */\n  thumbnailUrl?: string;\n  /** Upload metadata */\n  metadata: {\n    originalName: string;\n    size: number;\n    mimeType: string;\n    uploadedAt: string;\n    expiresAt?: string;\n  };\n}> {}\n\n// ========================================\n// NOTIFICATION TYPES\n// ========================================\n\n/**\n * Push notification structure\n */\nexport interface PushNotification {\n  id: string;\n  userId: string;\n  type: 'system' | 'social' | 'transaction' | 'security' | 'promotional';\n  title: string;\n  body: string;\n  data?: Record<string, any>;\n  priority: 'low' | 'normal' | 'high' | 'critical';\n  scheduledFor?: string;\n  sentAt?: string;\n  readAt?: string;\n  actionButtons?: Array<{\n    id: string;\n    title: string;\n    action: string;\n  }>;\n  expiresAt?: string;\n  metadata?: {\n    campaign?: string;\n    source?: string;\n    category?: string;\n  };\n}\n\n/**\n * Notification preferences\n */\nexport interface NotificationPreferences {\n  /** Push notification settings */\n  push: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n    quietHours?: {\n      start: string;\n      end: string;\n      timezone: string;\n    };\n  };\n  \n  /** Email notification settings */\n  email: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n    frequency: 'immediate' | 'daily' | 'weekly';\n  };\n  \n  /** SMS notification settings */\n  sms: {\n    enabled: boolean;\n    types: Record<string, boolean>;\n  };\n}\n\n// ========================================\n// ANALYTICS TYPES\n// ========================================\n\n/**\n * User analytics data\n */\nexport interface UserAnalytics {\n  /** User engagement metrics */\n  engagement: {\n    sessionsThisWeek: number;\n    averageSessionDuration: number; // minutes\n    screenViews: Record<string, number>;\n    actionsPerSession: number;\n  };\n  \n  /** User activity metrics */\n  activity: {\n    donationsCreated: number;\n    donationsReceived: number;\n    ridesOffered: number;\n    ridesTaken: number;\n    messagesExchanged: number;\n    karmaPointsEarned: number;\n  };\n  \n  /** User behavior patterns */\n  behavior: {\n    mostActiveHours: number[];\n    preferredCategories: string[];\n    averageResponseTime: number; // minutes\n    completionRate: number; // percentage\n  };\n}\n\n/**\n * Event tracking structure\n */\nexport interface AnalyticsEvent {\n  /** Event name */\n  event: string;\n  /** User who triggered the event */\n  userId?: string;\n  /** Event properties */\n  properties: Record<string, any>;\n  /** Event timestamp */\n  timestamp: string;\n  /** Session identifier */\n  sessionId?: string;\n  /** Platform/device information */\n  context: {\n    platform: string;\n    appVersion: string;\n    userAgent?: string;\n    screenResolution?: string;\n    timezone: string;\n  };\n}\n\n// ========================================\n// HEALTH CHECK TYPES\n// ========================================\n\n/**\n * Service health check response\n */\nexport interface HealthCheckResponse extends BaseApiResponse<{\n  /** Overall service status */\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  \n  /** Individual service components */\n  services: {\n    database: 'healthy' | 'unhealthy';\n    redis: 'healthy' | 'unhealthy';\n    googleOAuth: 'healthy' | 'unhealthy';\n    storage: 'healthy' | 'unhealthy';\n  };\n  \n  /** Performance metrics */\n  metrics: {\n    responseTime: number;\n    memoryUsage: number;\n    cpuUsage: number;\n    activeConnections: number;\n  };\n  \n  /** Version information */\n  version: {\n    api: string;\n    database: string;\n    node: string;\n  };\n  \n  /** Uptime information */\n  uptime: {\n    seconds: number;\n    human: string;\n  };\n}> {}\n\n// ========================================\n// UTILITY TYPES\n// ========================================\n\n/**\n * Generic list response\n */\nexport type ListResponse<T> = PaginatedResponse<T>;\n\n/**\n * Generic create response\n */\nexport type CreateResponse<T> = BaseApiResponse<T & { id: string; createdAt: string }>;\n\n/**\n * Generic update response\n */\nexport type UpdateResponse<T> = BaseApiResponse<T & { updatedAt: string }>;\n\n/**\n * Generic delete response\n */\nexport type DeleteResponse = BaseApiResponse<{ \n  deleted: boolean; \n  deletedAt: string; \n  id: string \n}>;\n\n/**\n * Bulk operation response\n */\nexport interface BulkOperationResponse<T = any> extends BaseApiResponse<{\n  /** Number of items processed successfully */\n  successCount: number;\n  /** Number of items that failed */\n  errorCount: number;\n  /** Total items attempted */\n  totalCount: number;\n  /** Results for each item */\n  results: Array<{\n    id: string;\n    success: boolean;\n    data?: T;\n    error?: string;\n  }>;\n}> {}\n\n// ========================================\n// TYPE GUARDS\n// ========================================\n\n/**\n * Type guard for successful API responses\n */\nexport function isSuccessResponse<T>(response: BaseApiResponse<T>): response is BaseApiResponse<T> & { \n  success: true; \n  data: T \n} {\n  return response.success === true && response.data !== undefined;\n}\n\n/**\n * Type guard for error API responses\n */\nexport function isErrorResponse<T>(response: BaseApiResponse<T>): response is ApiErrorResponse {\n  return response.success === false && typeof response.error === 'string';\n}\n\n/**\n * Type guard for paginated responses\n */\nexport function isPaginatedResponse<T>(response: BaseApiResponse<T[]>): response is PaginatedResponse<T> {\n  return response.success === true && \n         Array.isArray(response.data) && \n         'pagination' in response;\n}\n\n// ========================================\n// EXPORT ALL TYPES\n// ========================================\n\n// All types are exported via their interface/type declarations above\n\n/**\n * ========================================\n * USAGE EXAMPLES\n * ========================================\n * \n * // Type-safe API call\n * const response: UserProfileResponse = await api.getCurrentUser();\n * if (isSuccessResponse(response)) {\n *   console.log('User name:', response.data.name);\n * }\n * \n * // Create donation with validation\n * const donationData: CreateDonationRequest = {\n *   title: '×¡×¤×¨ ×œ×™××•×“',\n *   description: '×¡×¤×¨ ×¤×™×–×™×§×” ×œ××›×™×¨×”',\n *   category: 'education',\n *   type: 'item',\n *   location: {\n *     city: '×ª×œ ××‘×™×‘',\n *     country: '×™×©×¨××œ'\n *   }\n * };\n * \n * // Filter rides with type safety\n * const filters: RideFilters = {\n *   fromCity: '×ª×œ ××‘×™×‘',\n *   toCity: '×™×¨×•×©×œ×™×',\n *   date: '2024-01-15',\n *   maxPrice: 50\n * };\n * \n * const rides = await api.getRides(filters);\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/types/AuthTypes.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":599,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":599,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14484,14487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14484,14487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":771,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":771,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18839,18842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18839,18842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1019,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1019,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23997,24000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23997,24000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1029,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1029,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24261,24264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24261,24264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1038,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1038,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24539,24542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24539,24542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * AUTHENTICATION TYPE DEFINITIONS\n * ========================================\n * \n * Comprehensive TypeScript type definitions for the Google Authentication System.\n * These types ensure type safety throughout the authentication flow and provide\n * clear interfaces for all authentication-related operations.\n * \n * TYPE CATEGORIES:\n * - Core authentication types (users, tokens, sessions)\n * - OAuth flow types (requests, responses, states)\n * - Security types (permissions, roles, policies)\n * - Error types (categorized error handling)\n * - Event types (authentication state changes)\n * \n * DESIGN PRINCIPLES:\n * - Strict typing for security-critical operations\n * - Extensible interfaces for future enhancements\n * - Clear documentation for each type\n * - Consistent naming conventions\n * - Backward compatibility considerations\n * \n * AUTHOR: AI Assistant\n * LAST UPDATED: 2024\n */\n\n// ========================================\n// CORE AUTHENTICATION TYPES\n// ========================================\n\n/**\n * Unique identifier for users across the system\n * Uses Google's 'sub' claim as the stable identifier\n */\nexport type UserId = string;\n\n/**\n * Email address (normalized to lowercase)\n * Always verified when coming from Google OAuth\n */\nexport type VerifiedEmail = string;\n\n/**\n * Authentication state of the current session\n * Used for UI updates and flow control\n */\nexport type AuthState = \n  | 'initializing'    // Service is starting up and checking stored credentials\n  | 'unauthenticated' // No valid authentication found, user needs to log in\n  | 'authenticating'  // OAuth flow in progress with Google\n  | 'verifying'       // Server is verifying the OAuth token\n  | 'authenticated'   // User is successfully authenticated with valid tokens\n  | 'refreshing'      // Access token is being refreshed using refresh token\n  | 'error'           // Authentication error occurred, user intervention needed\n  | 'expired'         // Session has expired and needs re-authentication\n  | 'logout';         // User is being logged out, clearing session data\n\n/**\n * User roles for authorization and access control\n * Extensible system for role-based permissions\n */\nexport type UserRole = \n  | 'user'           // Regular app user with basic permissions\n  | 'premium'        // Premium user with enhanced features\n  | 'org_admin'      // Organization administrator  \n  | 'moderator'      // Content moderator\n  | 'volunteer'      // Volunteer in the organization hierarchy\n  | 'admin'          // System administrator\n  | 'super_admin';   // Super administrator with all permissions\n\n/**\n * Authentication mode for different user types\n * Determines app behavior and available features\n */\nexport type AuthMode = \n  | 'guest'    // Guest mode with limited functionality\n  | 'demo'     // Demo mode with sample data\n  | 'real';    // Real authenticated user\n\n// ========================================\n// USER DATA TYPES\n// ========================================\n\n/**\n * Core user profile information verified by Google\n * This data is trusted because it's verified by the server\n */\nexport interface VerifiedUserProfile {\n  /** Unique Google user identifier (stable across sessions) */\n  readonly id: UserId;\n  \n  /** User's full name from Google profile */\n  readonly name: string;\n  \n  /** Verified email address from Google */\n  readonly email: VerifiedEmail;\n  \n  /** User's profile picture URL from Google */\n  readonly avatar: string;\n  \n  /** Whether the email is verified by Google */\n  readonly emailVerified: boolean;\n  \n  /** When the user first joined our system */\n  readonly joinedAt: string; // ISO 8601 timestamp\n  \n  /** Last time the user was active */\n  lastActiveAt: string; // ISO 8601 timestamp\n  \n  /** User's locale/language preference */\n  locale: string; // e.g., 'he-IL', 'en-US'\n  \n  /** User's timezone */\n  timezone?: string; // e.g., 'Asia/Jerusalem'\n}\n\n/**\n * Extended user profile with app-specific data\n * Combines Google profile with our app's user data\n */\nexport interface SecureAuthUser extends VerifiedUserProfile {\n  /** User's assigned roles in the system */\n  roles: UserRole[];\n  \n  /** User's app preferences and settings */\n  settings: UserSettings;\n  \n  /** User's public profile information */\n  publicProfile: PublicUserProfile;\n  \n  /** User's privacy and security settings */\n  privacy: PrivacySettings;\n  \n  /** User's notification preferences */\n  notifications: NotificationSettings;\n  \n  /** Server-side metadata */\n  metadata: UserMetadata;\n}\n\n/**\n * User preferences and application settings\n */\nexport interface UserSettings {\n  /** Preferred language/locale */\n  language: string;\n  \n  /** Dark mode preference */\n  darkMode: boolean;\n  \n  /** Notification preferences */\n  notificationsEnabled: boolean;\n  \n  /** Accessibility preferences */\n  accessibility?: {\n    largeText?: boolean;\n    highContrast?: boolean;\n    voiceOver?: boolean;\n  };\n  \n  /** Map and location preferences */\n  location?: {\n    shareLocation?: boolean;\n    defaultCity?: string;\n    searchRadius?: number; // in kilometers\n  };\n  \n  /** App behavior preferences */\n  behavior?: {\n    autoRefresh?: boolean;\n    showTutorials?: boolean;\n    compactMode?: boolean;\n  };\n}\n\n/**\n * Public user profile information\n * Safe to display to other users\n */\nexport interface PublicUserProfile {\n  /** User's display name */\n  displayName: string;\n  \n  /** User's bio/description */\n  bio?: string;\n  \n  /** User's location (if shared) */\n  location?: {\n    city?: string;\n    country?: string;\n  };\n  \n  /** User's interests/tags */\n  interests: string[];\n  \n  /** Public statistics */\n  stats: {\n    karmaPoints: number;\n    postsCount: number;\n    donationsCount: number;\n    volunteeredHours: number;\n  };\n  \n  /** Social connections */\n  social: {\n    followersCount: number;\n    followingCount: number;\n  };\n}\n\n/**\n * User privacy and security settings\n */\nexport interface PrivacySettings {\n  /** Profile visibility level */\n  profileVisibility: 'public' | 'friends' | 'private';\n  \n  /** Location sharing preferences */\n  shareLocation: boolean;\n  \n  /** Contact information visibility */\n  showEmail: boolean;\n  showPhone: boolean;\n  \n  /** Activity visibility */\n  showActivity: boolean;\n  \n  /** Search engine indexing */\n  allowIndexing: boolean;\n  \n  /** Data retention preferences */\n  dataRetention: {\n    deleteInactiveDays?: number;\n    exportOnRequest: boolean;\n  };\n}\n\n/**\n * Notification preferences\n */\nexport interface NotificationSettings {\n  /** Push notifications enabled */\n  push: boolean;\n  \n  /** Email notifications enabled */\n  email: boolean;\n  \n  /** SMS notifications enabled */  \n  sms: boolean;\n  \n  /** Notification types */\n  types: {\n    newMessages: boolean;\n    donations: boolean;\n    rides: boolean;\n    socialUpdates: boolean;\n    systemAlerts: boolean;\n  };\n  \n  /** Quiet hours */\n  quietHours?: {\n    enabled: boolean;\n    startTime: string; // HH:MM format\n    endTime: string;   // HH:MM format\n    timezone: string;\n  };\n}\n\n/**\n * Server-side user metadata\n * Not directly modifiable by the client\n */\nexport interface UserMetadata {\n  /** When the user account was created */\n  readonly createdAt: string;\n  \n  /** Last time the user data was updated */\n  readonly updatedAt: string;\n  \n  /** Last successful login timestamp */\n  readonly lastLoginAt?: string;\n  \n  /** Total number of logins */\n  readonly loginCount: number;\n  \n  /** Account verification status */\n  readonly verified: boolean;\n  \n  /** Account status */\n  readonly status: 'active' | 'suspended' | 'pending' | 'deleted';\n  \n  /** Security flags */\n  readonly security: {\n    twoFactorEnabled: boolean;\n    suspiciousActivityDetected: boolean;\n    passwordLastChanged?: string;\n  };\n  \n  /** Usage statistics */\n  readonly usage: {\n    totalSessions: number;\n    averageSessionDuration: number; // in minutes\n    lastActiveFeatures: string[];\n  };\n}\n\n// ========================================\n// TOKEN AND SESSION TYPES\n// ========================================\n\n/**\n * JWT token pair received from authentication server\n * Both tokens are cryptographically signed and cannot be forged\n */\nexport interface AuthTokens {\n  /** JWT access token for API requests (short-lived) */\n  readonly accessToken: string;\n  \n  /** JWT refresh token for obtaining new access tokens (long-lived) */\n  readonly refreshToken: string;\n  \n  /** Access token expiration time in seconds from now */\n  readonly expiresIn: number;\n  \n  /** Refresh token expiration time in seconds from now */\n  readonly refreshExpiresIn: number;\n  \n  /** Token type (always 'Bearer') */\n  readonly tokenType: 'Bearer';\n  \n  /** Server-assigned session identifier */\n  readonly sessionId?: string;\n  \n  /** Token issuance timestamp */\n  readonly issuedAt: number; // Unix timestamp\n}\n\n/**\n * JWT token payload structure\n * Decoded from access/refresh tokens for validation\n */\nexport interface JwtTokenPayload {\n  /** User identifier */\n  userId: UserId;\n  \n  /** User email address */\n  email: VerifiedEmail;\n  \n  /** Session identifier */\n  sessionId: string;\n  \n  /** User roles */\n  roles: UserRole[];\n  \n  /** Token issued at (Unix timestamp) */\n  iat: number;\n  \n  /** Token expires at (Unix timestamp) */\n  exp: number;\n  \n  /** Token issuer (our auth server) */\n  iss: string;\n  \n  /** Token audience (our app) */\n  aud: string;\n  \n  /** Token type */\n  type: 'access' | 'refresh';\n  \n  /** Token subject (user ID) */\n  sub: UserId;\n}\n\n/**\n * Session information for monitoring and security\n */\nexport interface UserSession {\n  /** Unique session identifier */\n  readonly sessionId: string;\n  \n  /** User this session belongs to */\n  readonly userId: UserId;\n  \n  /** When the session was created */\n  readonly createdAt: string;\n  \n  /** When the session expires */\n  readonly expiresAt: string;\n  \n  /** Last activity timestamp */\n  lastActivityAt: string;\n  \n  /** Session metadata */\n  metadata: SessionMetadata;\n  \n  /** Whether the session is currently active */\n  readonly isActive: boolean;\n  \n  /** Session device information */\n  device: DeviceInfo;\n}\n\n/**\n * Session metadata for security tracking\n */\nexport interface SessionMetadata {\n  /** IP address when session was created */\n  readonly ipAddress: string;\n  \n  /** User agent string */\n  readonly userAgent: string;\n  \n  /** Geographic location (if available) */\n  readonly location?: {\n    country?: string;\n    city?: string;\n    timezone?: string;\n  };\n  \n  /** Authentication method used */\n  readonly authMethod: 'google_oauth';\n  \n  /** Session security level */\n  readonly securityLevel: 'standard' | 'high' | 'critical';\n}\n\n/**\n * Device information for security monitoring\n */\nexport interface DeviceInfo {\n  /** Platform (iOS, Android, Web) */\n  readonly platform: string;\n  \n  /** Device model/browser */\n  readonly model?: string;\n  \n  /** OS version */\n  readonly osVersion?: string;\n  \n  /** App version */\n  readonly appVersion?: string;\n  \n  /** Device identifier (hashed for privacy) */\n  readonly deviceId?: string;\n  \n  /** Whether the device is trusted */\n  isTrusted: boolean;\n  \n  /** Device capabilities */\n  capabilities: {\n    hasSecureStorage: boolean;\n    hasBiometrics: boolean;\n    hasScreenLock: boolean;\n  };\n}\n\n// ========================================\n// OAUTH FLOW TYPES\n// ========================================\n\n/**\n * Google OAuth configuration\n * Used to configure the expo-auth-session OAuth flow\n */\nexport interface GoogleOAuthConfig {\n  /** iOS client ID from Google Cloud Console */\n  iosClientId?: string;\n  \n  /** Android client ID from Google Cloud Console */\n  androidClientId?: string;\n  \n  /** Web client ID from Google Cloud Console */\n  webClientId?: string;\n  \n  /** OAuth scopes to request */\n  scopes: string[];\n  \n  /** OAuth response type */\n  responseType: 'id_token' | 'code';\n  \n  /** Redirect URI for OAuth callback */\n  redirectUri: string;\n  \n  /** Additional OAuth parameters */\n  additionalParameters?: {\n    prompt?: 'none' | 'consent' | 'select_account';\n    include_granted_scopes?: string;\n    state?: string;\n    nonce?: string;\n    login_hint?: string;\n  };\n  \n  /** PKCE parameters (when implemented) */\n  pkce?: {\n    codeChallenge: string;\n    codeChallengeMethod: 'S256';\n  };\n}\n\n/**\n * OAuth response from Google\n * Structure returned by expo-auth-session\n */\nexport interface OAuthResponse {\n  /** Response type */\n  type: 'success' | 'error' | 'cancel' | 'dismiss';\n  \n  /** OAuth parameters */\n  params?: {\n    id_token?: string;\n    access_token?: string;\n    state?: string;\n    error?: string;\n    error_description?: string;\n  };\n  \n  /** Error information (if type is 'error') */\n  error?: {\n    code: string;\n    description?: string;\n    message?: string;\n  };\n  \n  /** Authentication object (alternative format) */\n  authentication?: {\n    idToken?: string;\n    accessToken?: string;\n    refreshToken?: string;\n    expiresIn?: number;\n  };\n  \n  /** Full callback URL */\n  url?: string;\n}\n\n/**\n * Google JWT ID token payload\n * Structure of the decoded Google ID token\n */\nexport interface GoogleIdTokenPayload {\n  /** Token issuer (always https://accounts.google.com) */\n  readonly iss: 'https://accounts.google.com';\n  \n  /** Authorized presenter (our client ID) */\n  readonly azp: string;\n  \n  /** Audience (our client ID) */\n  readonly aud: string;\n  \n  /** Subject - Google user identifier */\n  readonly sub: string;\n  \n  /** User's email address */\n  readonly email: string;\n  \n  /** Whether email is verified by Google */\n  readonly email_verified: boolean;\n  \n  /** Token issued at timestamp */\n  readonly iat: number;\n  \n  /** Token expires at timestamp */\n  readonly exp: number;\n  \n  /** User's full name */\n  readonly name?: string;\n  \n  /** User's given name (first name) */\n  readonly given_name?: string;\n  \n  /** User's family name (last name) */\n  readonly family_name?: string;\n  \n  /** User's profile picture URL */\n  readonly picture?: string;\n  \n  /** User's locale */\n  readonly locale?: string;\n  \n  /** Nonce for replay protection (when implemented) */\n  readonly nonce?: string;\n  \n  /** Not before timestamp */\n  readonly nbf?: number;\n  \n  /** JWT ID */\n  readonly jti?: string;\n}\n\n// ========================================\n// API RESPONSE TYPES\n// ========================================\n\n/**\n * Standard API response wrapper\n * Consistent response format across all API endpoints\n */\nexport interface ApiResponse<TData = any> {\n  /** Whether the operation was successful */\n  success: boolean;\n  \n  /** Response data (only present if success is true) */\n  data?: TData;\n  \n  /** Error message (only present if success is false) */\n  error?: string;\n  \n  /** Additional message or context */\n  message?: string;\n  \n  /** Response metadata */\n  metadata?: ResponseMetadata;\n}\n\n/**\n * Response metadata for debugging and monitoring\n */\nexport interface ResponseMetadata {\n  /** Unique request identifier */\n  requestId?: string;\n  \n  /** Response timestamp */\n  timestamp: string;\n  \n  /** Request duration in milliseconds */\n  duration?: number;\n  \n  /** Whether response was served from cache */\n  cached?: boolean;\n  \n  /** API version that handled the request */\n  apiVersion?: string;\n  \n  /** Rate limiting information */\n  rateLimitInfo?: {\n    remaining: number;\n    resetTime: number;\n    limit: number;\n  };\n}\n\n/**\n * Authentication response from server OAuth verification\n */\nexport interface AuthenticationResponse extends ApiResponse<{\n  tokens: AuthTokens;\n  user: SecureAuthUser;\n}> {\n  /** Additional authentication metadata */\n  metadata?: ResponseMetadata & {\n    /** Whether this is a new user registration */\n    isNewUser?: boolean;\n    \n    /** Authentication method used */\n    authMethod: 'google_oauth';\n    \n    /** Security warnings (if any) */\n    securityWarnings?: string[];\n  };\n}\n\n// ========================================\n// ERROR TYPES\n// ========================================\n\n/**\n * Categories of authentication errors\n * Used for appropriate error handling and user feedback\n */\nexport type AuthErrorType = \n  | 'CONFIGURATION_ERROR'    // Missing or invalid configuration\n  | 'NETWORK_ERROR'          // Network connectivity issues\n  | 'OAUTH_ERROR'            // OAuth flow failures  \n  | 'TOKEN_ERROR'            // Token validation/parsing errors\n  | 'SERVER_ERROR'           // Backend server errors\n  | 'STORAGE_ERROR'          // Local storage access errors\n  | 'VALIDATION_ERROR'       // Input validation errors\n  | 'PERMISSION_ERROR'       // Insufficient permissions\n  | 'RATE_LIMIT_ERROR'       // Rate limiting triggered\n  | 'TIMEOUT_ERROR'          // Request timeout\n  | 'UNKNOWN_ERROR';         // Unclassified errors\n\n/**\n * Detailed authentication error information\n */\nexport interface AuthError {\n  /** Error category */\n  type: AuthErrorType;\n  \n  /** User-friendly error message (localized) */\n  message: string;\n  \n  /** Technical error details for debugging */\n  details?: string;\n  \n  /** HTTP status code (if applicable) */\n  statusCode?: number;\n  \n  /** Whether the operation can be retried */\n  retryable: boolean;\n  \n  /** Suggested retry delay in milliseconds */\n  retryAfter?: number;\n  \n  /** Error timestamp */\n  timestamp: string;\n  \n  /** Context where the error occurred */\n  context?: {\n    operation: string;\n    userId?: string;\n    sessionId?: string;\n  };\n  \n  /** Recovery suggestions */\n  recovery?: {\n    userAction?: string; // What the user should do\n    developerAction?: string; // What the developer should check\n  };\n}\n\n// ========================================\n// EVENT TYPES\n// ========================================\n\n/**\n * Authentication event listener function type\n */\nexport type AuthEventListener = (\n  state: AuthState,\n  user?: SecureAuthUser | null,\n  error?: AuthError | null\n) => void;\n\n/**\n * Authentication events that can be subscribed to\n */\nexport type AuthEvent = \n  | 'state_changed'        // Authentication state changed\n  | 'user_authenticated'   // User successfully authenticated\n  | 'user_unauthenticated' // User logged out or session expired\n  | 'token_refreshed'      // Access token was refreshed\n  | 'error_occurred'       // Authentication error occurred\n  | 'session_expired'      // User session expired\n  | 'security_alert';      // Security-related alert\n\n/**\n * Event data structure\n */\nexport interface AuthEventData {\n  /** Event type */\n  type: AuthEvent;\n  \n  /** Event timestamp */\n  timestamp: string;\n  \n  /** Current authentication state */\n  authState: AuthState;\n  \n  /** Current user (if authenticated) */\n  user?: SecureAuthUser | null;\n  \n  /** Error information (if applicable) */\n  error?: AuthError;\n  \n  /** Additional event context */\n  context?: {\n    sessionId?: string;\n    operation?: string;\n    metadata?: Record<string, any>;\n  };\n}\n\n// ========================================\n// REQUEST/RESPONSE TYPES\n// ========================================\n\n/**\n * Google OAuth token verification request\n * Sent to our server for token validation\n */\nexport interface GoogleTokenVerificationRequest {\n  /** Google ID token to verify */\n  idToken: string;\n  \n  /** Request metadata for security logging */\n  metadata?: {\n    platform: string;\n    appVersion?: string;\n    timestamp: string;\n    userAgent?: string;\n  };\n}\n\n/**\n * Token refresh request\n * Sent to obtain new access token\n */\nexport interface TokenRefreshRequest {\n  /** Current refresh token */\n  refreshToken: string;\n  \n  /** Optional session context */\n  sessionContext?: {\n    sessionId: string;\n    lastActivity: string;\n  };\n}\n\n/**\n * Logout request\n * Sent to revoke tokens and end session\n */\nexport interface LogoutRequest {\n  /** Access token to revoke */\n  accessToken?: string;\n  \n  /** Refresh token to revoke */\n  refreshToken?: string;\n  \n  /** Session ID to end */\n  sessionId?: string;\n  \n  /** Whether to logout from all devices */\n  allDevices?: boolean;\n}\n\n// ========================================\n// CONFIGURATION TYPES\n// ========================================\n\n/**\n * Authentication system configuration\n */\nexport interface AuthConfig {\n  /** OAuth settings */\n  oauth: {\n    scopes: string[];\n    responseType: 'id_token' | 'code';\n    useStateParameter: boolean;\n    usePKCE: boolean;\n  };\n  \n  /** Security settings */\n  security: {\n    tokenRefreshThreshold: number;\n    maxTokenAge: number;\n    maxRefreshAttempts: number;\n    useSecureStorage: boolean;\n  };\n  \n  /** API settings */\n  api: {\n    baseUrl: string;\n    timeout: number;\n    retries: number;\n    cacheEnabled: boolean;\n  };\n  \n  /** UI settings */\n  ui: {\n    showSecurityIndicator: boolean;\n    autoNavigateOnSuccess: boolean;\n    errorDisplayDuration: number;\n  };\n}\n\n/**\n * Environment-specific configuration\n */\nexport interface EnvironmentConfig {\n  /** Current environment */\n  environment: 'development' | 'staging' | 'production';\n  \n  /** API endpoints */\n  apiEndpoints: {\n    auth: string;\n    users: string;\n    donations: string;\n    rides: string;\n  };\n  \n  /** Feature flags */\n  features: {\n    enableBiometrics: boolean;\n    enableOfflineMode: boolean;\n    enableAnalytics: boolean;\n    enableDebugLogging: boolean;\n  };\n  \n  /** Platform-specific settings */\n  platform: {\n    ios?: {\n      keychainAccessGroup?: string;\n      useSafariViewController: boolean;\n    };\n    android?: {\n      keystoreAlias?: string;\n      useChromeCustomTabs: boolean;\n    };\n    web?: {\n      useServiceWorker: boolean;\n      corsOrigins: string[];\n    };\n  };\n}\n\n// ========================================\n// VALIDATION TYPES\n// ========================================\n\n/**\n * Configuration validation result\n */\nexport interface ConfigValidationResult {\n  /** Whether configuration is valid */\n  isValid: boolean;\n  \n  /** Critical errors that prevent operation */\n  errors: string[];\n  \n  /** Warnings about suboptimal configuration */\n  warnings: string[];\n  \n  /** Recommendations for improvement */\n  recommendations: string[];\n  \n  /** Validation metadata */\n  metadata: {\n    checkedAt: string;\n    environment: string;\n    platform: string;\n  };\n}\n\n/**\n * Token validation result\n */\nexport interface TokenValidationResult {\n  /** Whether the token is valid */\n  isValid: boolean;\n  \n  /** Decoded token payload (if valid) */\n  payload?: JwtTokenPayload;\n  \n  /** Validation error (if invalid) */\n  error?: string;\n  \n  /** Whether token needs refresh */\n  needsRefresh: boolean;\n  \n  /** Time until expiry in milliseconds */\n  timeUntilExpiry?: number;\n}\n\n// ========================================\n// UTILITY TYPES\n// ========================================\n\n/**\n * Generic callback function type\n */\nexport type Callback<T = void> = (data: T) => void;\n\n/**\n * Async callback function type\n */\nexport type AsyncCallback<T = void> = (data: T) => Promise<void>;\n\n/**\n * Optional fields helper type\n */\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\n/**\n * Readonly deep helper type\n */\nexport type DeepReadonly<T> = {\n  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P];\n};\n\n/**\n * Non-empty string type\n */\nexport type NonEmptyString = string & { readonly brand: unique symbol };\n\n/**\n * Email address type with validation\n */\nexport type EmailAddress = string & { readonly brand: unique symbol };\n\n/**\n * Secure string type (for tokens, secrets)\n */\nexport type SecureString = string & { readonly brand: unique symbol };\n\n// ========================================\n// RE-EXPORTS FOR CONVENIENCE\n// ========================================\n\n/**\n * Main user type (re-export for backward compatibility)\n */\nexport type { SecureAuthUser as AuthUser };\n\n/**\n * Main auth service types\n * Note: These are already defined above, no need to re-export\n */\n\n// ========================================\n// TYPE GUARDS\n// ========================================\n\n/**\n * Type guard to check if a value is a valid user ID\n */\nexport function isValidUserId(value: any): value is UserId {\n  return typeof value === 'string' && \n         value.length > 0 && \n         value.length <= 100 &&\n         /^[a-zA-Z0-9_-]+$/.test(value);\n}\n\n/**\n * Type guard to check if a value is a valid email\n */\nexport function isValidEmail(value: any): value is VerifiedEmail {\n  return typeof value === 'string' && \n         /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value) &&\n         value.length <= 320; // RFC 5321 limit\n}\n\n/**\n * Type guard to check if a value is a valid auth state\n */\nexport function isValidAuthState(value: any): value is AuthState {\n  const validStates: AuthState[] = [\n    'initializing', 'unauthenticated', 'authenticating', 'verifying',\n    'authenticated', 'refreshing', 'error', 'expired', 'logout'\n  ];\n  return validStates.includes(value);\n}\n\n/**\n * Type guard to check if a response is successful\n */\nexport function isSuccessResponse<T>(response: ApiResponse<T>): response is ApiResponse<T> & { success: true; data: T } {\n  return response.success === true && response.data !== undefined;\n}\n\n/**\n * Type guard to check if a response is an error\n */\nexport function isErrorResponse<T>(response: ApiResponse<T>): response is ApiResponse<T> & { success: false; error: string } {\n  return response.success === false && typeof response.error === 'string';\n}\n\n// ========================================\n// BRAND TYPES (for type safety)\n// ========================================\n\n/**\n * Create branded types for additional type safety\n * These prevent accidental mixing of similar string types\n */\n\n/**\n * JWT token string (branded for type safety)\n */\nexport type JwtToken = string & { readonly __brand: 'JwtToken' };\n\n/**\n * Session ID string (branded for type safety)\n */\nexport type SessionId = string & { readonly __brand: 'SessionId' };\n\n/**\n * OAuth state parameter (branded for type safety)\n */\nexport type OAuthState = string & { readonly __brand: 'OAuthState' };\n\n/**\n * Nonce value (branded for type safety)\n */\nexport type Nonce = string & { readonly __brand: 'Nonce' };\n\n// ========================================\n// HELPER FUNCTIONS\n// ========================================\n\n/**\n * Create a branded JWT token\n */\nexport function createJwtToken(token: string): JwtToken {\n  return token as JwtToken;\n}\n\n/**\n * Create a branded session ID\n */\nexport function createSessionId(id: string): SessionId {\n  return id as SessionId;\n}\n\n/**\n * Create a branded OAuth state\n */\nexport function createOAuthState(state: string): OAuthState {\n  return state as OAuthState;\n}\n\n/**\n * Create a branded nonce\n */\nexport function createNonce(nonce: string): Nonce {\n  return nonce as Nonce;\n}\n\n/**\n * ========================================\n * TYPE USAGE EXAMPLES\n * ========================================\n * \n * // Basic authentication\n * const user: SecureAuthUser = await authenticateUser();\n * const tokens: AuthTokens = await getTokens();\n * \n * // API requests\n * const response: ApiResponse<UserProfile> = await api.getProfile();\n * if (isSuccessResponse(response)) {\n *   console.log('Profile:', response.data);\n * }\n * \n * // Error handling\n * const error: AuthError = {\n *   type: 'OAUTH_ERROR',\n *   message: 'OAuth flow was cancelled',\n *   retryable: true,\n *   timestamp: new Date().toISOString()\n * };\n * \n * // Event handling\n * const listener: AuthEventListener = (state, user, error) => {\n *   console.log('Auth state:', state);\n * };\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/utils/ErrorHandler.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2683,2686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2683,2686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3505,3508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3505,3508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":300,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":300,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8897,8900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8897,8900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":305,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9032,9035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9032,9035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":378,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":378,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11144,11147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11144,11147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":425,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":425,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12312,12315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12312,12315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":498,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":498,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14585,14588],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14585,14588],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":526,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15529,15532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15529,15532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":531,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":531,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15791,15794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15791,15794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":555,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":555,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16857,16860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16857,16860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":583,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":583,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17864,17867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17864,17867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":652,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":652,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":652,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":652,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19750,19753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19750,19753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":706,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":706,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21705,21708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21705,21708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":849,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":849,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25717,25720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25717,25720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":859,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":859,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26046,26049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26046,26049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":882,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":882,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26634,26637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26634,26637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":918,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":918,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27624,27627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27624,27627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * AUTHENTICATION ERROR HANDLER\n * ========================================\n * \n * Comprehensive error handling system for Google authentication operations.\n * This module provides centralized error processing, user-friendly messages,\n * and recovery strategies for all authentication-related errors.\n * \n * ERROR CATEGORIES:\n * - OAuth flow errors (cancellation, invalid tokens, etc.)\n * - Network and connectivity errors\n * - Server-side validation errors\n * - Storage and persistence errors\n * - Configuration and setup errors\n * \n * FEATURES:\n * - Automatic error categorization and classification\n * - User-friendly error messages in Hebrew and English\n * - Recovery suggestions and retry strategies\n * - Comprehensive error logging for debugging\n * - Integration with monitoring and alerting systems\n * \n * AUTHOR: AI Assistant\n * SECURITY LEVEL: Enterprise Grade\n * LAST UPDATED: 2024\n */\n\nimport { Alert, Platform } from 'react-native';\nimport { logger } from '../../utils/loggerService';\n\n// ========================================\n// ERROR TYPE DEFINITIONS\n// ========================================\n\n/**\n * Authentication error categories for proper handling\n */\nexport enum AuthErrorCategory {\n  /** OAuth flow related errors */\n  OAUTH = 'OAUTH',\n  /** Network connectivity issues */\n  NETWORK = 'NETWORK',\n  /** Server-side errors */\n  SERVER = 'SERVER',\n  /** Client storage errors */\n  STORAGE = 'STORAGE',\n  /** Configuration errors */\n  CONFIG = 'CONFIG',\n  /** Token-related errors */\n  TOKEN = 'TOKEN',\n  /** User permission errors */\n  PERMISSION = 'PERMISSION',\n  /** Rate limiting errors */\n  RATE_LIMIT = 'RATE_LIMIT',\n  /** Unknown/unclassified errors */\n  UNKNOWN = 'UNKNOWN',\n}\n\n/**\n * Error severity levels for appropriate handling\n */\nexport enum AuthErrorSeverity {\n  /** Low impact, doesn't affect core functionality */\n  LOW = 'LOW',\n  /** Medium impact, may affect some features */\n  MEDIUM = 'MEDIUM',\n  /** High impact, affects core authentication */\n  HIGH = 'HIGH',\n  /** Critical impact, prevents app usage */\n  CRITICAL = 'CRITICAL',\n}\n\n/**\n * Comprehensive error information structure\n */\nexport interface AuthError {\n  /** Unique error identifier for tracking */\n  readonly id: string;\n  \n  /** Error category for handling logic */\n  readonly category: AuthErrorCategory;\n  \n  /** Error severity level */\n  readonly severity: AuthErrorSeverity;\n  \n  /** User-friendly error message (localized) */\n  readonly message: string;\n  \n  /** Technical error details for developers */\n  readonly technicalDetails?: string;\n  \n  /** Original error object that caused this */\n  readonly originalError?: any;\n  \n  /** Error timestamp */\n  readonly timestamp: string;\n  \n  /** Whether the operation can be retried */\n  readonly retryable: boolean;\n  \n  /** Suggested retry delay in milliseconds */\n  readonly retryDelay?: number;\n  \n  /** Maximum number of retry attempts */\n  readonly maxRetries?: number;\n  \n  /** Context where the error occurred */\n  readonly context: {\n    operation: string;\n    userId?: string;\n    sessionId?: string;\n    platform: string;\n    appVersion?: string;\n  };\n  \n  /** Recovery suggestions */\n  readonly recovery: {\n    /** What the user should do */\n    userAction?: string;\n    /** What the developer should check */\n    developerAction?: string;\n    /** Automatic recovery possible */\n    autoRecoverable?: boolean;\n  };\n  \n  /** Additional metadata */\n  readonly metadata?: Record<string, any>;\n}\n\n// ========================================\n// ERROR MESSAGES\n// ========================================\n\n/**\n * Localized error messages in Hebrew and English\n */\nconst ERROR_MESSAGES = {\n  [AuthErrorCategory.OAUTH]: {\n    CANCELLED: {\n      he: '×”×”×ª×—×‘×¨×•×ª ×‘×•×˜×œ×” ×¢×œ ×™×“×™ ×”××©×ª××©.',\n      en: 'Authentication was cancelled by the user.',\n    },\n    INVALID_TOKEN: {\n      he: '××¡×™××•×Ÿ Google ×œ× ×ª×§×£. ×× × × ×¡×” ×©×•×‘.',\n      en: 'Invalid Google token. Please try again.',\n    },\n    EXPIRED_TOKEN: {\n      he: '××¡×™××•×Ÿ Google ×¤×’ ×ª×•×§×£. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      en: 'Google token has expired. Please login again.',\n    },\n    FLOW_ERROR: {\n      he: '×©×’×™××” ×‘×ª×”×œ×™×š ×”×”×ª×—×‘×¨×•×ª ×¢× Google.',\n      en: 'Error in Google authentication flow.',\n    },\n  },\n  [AuthErrorCategory.NETWORK]: {\n    CONNECTION_FAILED: {\n      he: '×œ× × ×™×ª×Ÿ ×œ×”×ª×—×‘×¨ ×œ×©×¨×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜.',\n      en: 'Cannot connect to server. Please check your internet connection.',\n    },\n    TIMEOUT: {\n      he: '×”×‘×§×©×” × ××©×›×” ×™×•×ª×¨ ××“×™ ×–××Ÿ. ×× × × ×¡×” ×©×•×‘.',\n      en: 'Request timed out. Please try again.',\n    },\n    DNS_ERROR: {\n      he: '×œ× × ×™×ª×Ÿ ×œ××¦×•× ××ª ×”×©×¨×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨.',\n      en: 'Cannot find server. Please check your connection.',\n    },\n  },\n  [AuthErrorCategory.SERVER]: {\n    INTERNAL_ERROR: {\n      he: '×©×’×™××” ×¤× ×™××™×ª ×‘×©×¨×ª. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.',\n      en: 'Internal server error. Please try again later.',\n    },\n    MAINTENANCE: {\n      he: '×”×©×¨×ª ×‘××¦×‘ ×ª×—×–×•×§×”. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.',\n      en: 'Server is under maintenance. Please try again later.',\n    },\n    OVERLOADED: {\n      he: '×”×©×¨×ª ×¢××•×¡. ×× × × ×¡×” ×©×•×‘ ×‘×¢×•×“ ××¡×¤×¨ ×“×§×•×ª.',\n      en: 'Server is overloaded. Please try again in a few minutes.',\n    },\n  },\n  [AuthErrorCategory.STORAGE]: {\n    ACCESS_DENIED: {\n      he: '×œ× × ×™×ª×Ÿ ×œ×’×©×ª ×œ××—×¡×•×Ÿ ×”×××•×‘×˜×—. ×× × ×‘×“×•×§ ×”×¨×©××•×ª ×”××¤×œ×™×§×¦×™×”.',\n      en: 'Cannot access secure storage. Please check app permissions.',\n    },\n    CORRUPTED_DATA: {\n      he: '× ×ª×•× ×™ ×”××™××•×ª × ×¤×’××•. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      en: 'Authentication data corrupted. Please login again.',\n    },\n    STORAGE_FULL: {\n      he: '××—×¡×•×Ÿ ×”××›×©×™×¨ ××œ×. ×× × ×¤× ×” ××§×•× ×•× ×¡×” ×©×•×‘.',\n      en: 'Device storage is full. Please free up space and try again.',\n    },\n  },\n  [AuthErrorCategory.CONFIG]: {\n    MISSING_CLIENT_ID: {\n      he: '×”×’×“×¨×•×ª Google OAuth ×—×¡×¨×•×ª. ×× × ×¤× ×” ×œ×ª××™×›×” ×˜×›× ×™×ª.',\n      en: 'Google OAuth configuration missing. Please contact technical support.',\n    },\n    INVALID_REDIRECT: {\n      he: '×”×’×“×¨×•×ª ×”×¤× ×™×” ×©×’×•×™×•×ª. ×× × ×¤× ×” ×œ×ª××™×›×” ×˜×›× ×™×ª.',\n      en: 'Invalid redirect configuration. Please contact technical support.',\n    },\n    UNSUPPORTED_PLATFORM: {\n      he: '×¤×œ×˜×¤×•×¨××” ×œ× × ×ª××›×ª ×œ××™××•×ª Google.',\n      en: 'Unsupported platform for Google authentication.',\n    },\n  },\n  [AuthErrorCategory.RATE_LIMIT]: {\n    TOO_MANY_REQUESTS: {\n      he: '×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª. ×× × ×”××ª×Ÿ {minutes} ×“×§×•×ª ×•× ×¡×” ×©×•×‘.',\n      en: 'Too many requests. Please wait {minutes} minutes and try again.',\n    },\n    AUTH_ATTEMPTS_EXCEEDED: {\n      he: '×™×•×ª×¨ ××“×™ × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª. ×× × ×”××ª×Ÿ {minutes} ×“×§×•×ª.',\n      en: 'Too many authentication attempts. Please wait {minutes} minutes.',\n    },\n  },\n  [AuthErrorCategory.TOKEN]: {\n    INVALID: {\n      he: '××¡×™××•×Ÿ ×”××™××•×ª ×©×’×•×™. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      en: 'Authentication token is invalid. Please login again.',\n    },\n    EXPIRED: {\n      he: '××¡×™××•×Ÿ ×”××™××•×ª ×¤×’ ×ª×•×§×£. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      en: 'Authentication token has expired. Please login again.',\n    },\n    CORRUPTED: {\n      he: '××¡×™××•×Ÿ ×”××™××•×ª ×¤×’×•×. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      en: 'Authentication token is corrupted. Please login again.',\n    },\n  },\n  [AuthErrorCategory.PERMISSION]: {\n    INSUFFICIENT: {\n      he: '××™×Ÿ ×”×¨×©××” ×œ×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”.',\n      en: 'Insufficient permissions for this operation.',\n    },\n    FORBIDDEN: {\n      he: '×”×’×™×©×” × ×“×—×ª×”.',\n      en: 'Access denied.',\n    },\n  },\n  [AuthErrorCategory.UNKNOWN]: {\n    GENERIC: {\n      he: '×©×’×™××” ×œ× ×¦×¤×•×™×”. ×× × × ×¡×” ×©×•×‘.',\n      en: 'Unexpected error. Please try again.',\n    },\n  },\n} as const;\n\n// ========================================\n// MAIN ERROR HANDLER CLASS\n// ========================================\n\n/**\n * AuthErrorHandler - Centralized error handling for authentication operations\n * \n * This class provides comprehensive error processing with:\n * - Automatic error categorization\n * - User-friendly message generation\n * - Recovery strategy suggestions\n * - Comprehensive error logging\n * - Integration with alerting systems\n */\nclass AuthErrorHandlerClass {\n  /**\n   * Process and handle an authentication error\n   * \n   * This method takes any error that occurs during authentication\n   * and transforms it into a structured AuthError with appropriate\n   * handling suggestions and user-friendly messages.\n   * \n   * @param error The original error object\n   * @param context Context information about where the error occurred\n   * @returns Structured AuthError object\n   * \n   * @example\n   * ```typescript\n   * try {\n   *   await authenticateUser();\n   * } catch (originalError) {\n   *   const authError = AuthErrorHandler.handleError(originalError, {\n   *     operation: 'google_oauth_verification',\n   *     userId: 'user123'\n   *   });\n   *   \n   *   console.error('Auth error:', authError.message);\n   *   \n   *   if (authError.retryable) {\n   *     setTimeout(() => retryAuthentication(), authError.retryDelay);\n   *   }\n   * }\n   * ```\n   */\n  public static handleError(\n    error: any,\n    context: {\n      operation: string;\n      userId?: string;\n      sessionId?: string;\n      additionalContext?: Record<string, any>;\n    }\n  ): AuthError {\n    const errorId = this.generateErrorId();\n    const timestamp = new Date().toISOString();\n    \n    // Categorize the error\n    const category = this.categorizeError(error);\n    const severity = this.determineSeverity(category, error);\n    \n    // Generate user-friendly message\n    const message = this.generateUserMessage(error, category);\n    \n    // Determine retry strategy\n    const { retryable, retryDelay, maxRetries } = this.determineRetryStrategy(category, error);\n    \n    // Generate recovery suggestions\n    const recovery = this.generateRecoveryStrategy(category, error);\n    \n    // Create structured error object\n    const authError: AuthError = {\n      id: errorId,\n      category,\n      severity,\n      message,\n      technicalDetails: this.extractTechnicalDetails(error),\n      originalError: error,\n      timestamp,\n      retryable,\n      retryDelay,\n      maxRetries,\n      context: {\n        ...context,\n        platform: Platform.OS,\n        appVersion: process.env.EXPO_PUBLIC_APP_VERSION || 'unknown',\n      },\n      recovery,\n      metadata: {\n        errorSource: error?.constructor?.name || typeof error,\n        stackTrace: error?.stack ? error.stack.substring(0, 500) : undefined,\n      },\n    };\n\n    // Log the error\n    this.logError(authError);\n    \n    // Send to monitoring system (if configured)\n    this.reportError(authError);\n    \n    return authError;\n  }\n\n  /**\n   * Display user-friendly error to the user\n   * \n   * This method shows an appropriate error message to the user\n   * based on the error category and severity.\n   * \n   * @param authError The structured authentication error\n   * @param options Display options\n   */\n  public static displayErrorToUser(\n    authError: AuthError,\n    options: {\n      showRetryButton?: boolean;\n      onRetry?: () => void;\n      onDismiss?: () => void;\n      autoHide?: boolean;\n    } = {}\n  ): void {\n    const { showRetryButton = false, onRetry, onDismiss, autoHide = true } = options;\n    \n    // Determine alert buttons\n    const buttons: Array<{ text: string; onPress?: () => void; style?: any }> = [];\n    \n    if (showRetryButton && authError.retryable && onRetry) {\n      buttons.push({\n        text: '× ×¡×” ×©×•×‘', // Try Again\n        onPress: onRetry,\n      });\n    }\n    \n    buttons.push({\n      text: '××™×©×•×¨', // OK\n      onPress: onDismiss,\n      style: 'default',\n    });\n    \n    // Show alert with appropriate title based on severity\n    const title = this.getAlertTitle(authError.category, authError.severity);\n    \n    Alert.alert(\n      title,\n      authError.message,\n      buttons,\n      { cancelable: false }\n    );\n\n    // Auto-hide for low severity errors\n    if (autoHide && authError.severity === AuthErrorSeverity.LOW) {\n      setTimeout(() => {\n        // Auto-dismiss logic could go here\n      }, 5000);\n    }\n\n    logger.info('AuthErrorHandler', 'Error displayed to user', {\n      errorId: authError.id,\n      category: authError.category,\n      severity: authError.severity,\n      showRetryButton\n    });\n  }\n\n  // ========================================\n  // PRIVATE HELPER METHODS\n  // ========================================\n\n  /**\n   * Categorize error based on its characteristics\n   */\n  private static categorizeError(error: any): AuthErrorCategory {\n    if (!error) return AuthErrorCategory.UNKNOWN;\n    \n    const errorString = String(error).toLowerCase();\n    const errorMessage = error?.message?.toLowerCase() || '';\n    \n    // OAuth-related errors\n    if (errorString.includes('oauth') || \n        errorString.includes('cancelled') ||\n        errorString.includes('id_token') ||\n        error?.type === 'cancel') {\n      return AuthErrorCategory.OAUTH;\n    }\n    \n    // Network-related errors\n    if (error instanceof TypeError && errorMessage.includes('fetch') ||\n        errorMessage.includes('network') ||\n        errorMessage.includes('connection') ||\n        errorMessage.includes('dns') ||\n        error?.name === 'NetworkError') {\n      return AuthErrorCategory.NETWORK;\n    }\n    \n    // Server errors\n    if (error?.status >= 500 ||\n        errorMessage.includes('server error') ||\n        errorMessage.includes('internal error')) {\n      return AuthErrorCategory.SERVER;\n    }\n    \n    // Rate limiting errors\n    if (error?.status === 429 ||\n        errorMessage.includes('rate limit') ||\n        errorMessage.includes('too many')) {\n      return AuthErrorCategory.RATE_LIMIT;\n    }\n    \n    // Token-related errors  \n    if (errorMessage.includes('token') ||\n        errorMessage.includes('expired') ||\n        errorMessage.includes('invalid') ||\n        error?.status === 401) {\n      return AuthErrorCategory.TOKEN;\n    }\n    \n    // Storage errors\n    if (errorMessage.includes('storage') ||\n        errorMessage.includes('keychain') ||\n        errorMessage.includes('secure store')) {\n      return AuthErrorCategory.STORAGE;\n    }\n    \n    // Configuration errors\n    if (errorMessage.includes('client id') ||\n        errorMessage.includes('configuration') ||\n        errorMessage.includes('redirect uri')) {\n      return AuthErrorCategory.CONFIG;\n    }\n    \n    // Permission errors\n    if (error?.status === 403 ||\n        errorMessage.includes('permission') ||\n        errorMessage.includes('unauthorized') ||\n        errorMessage.includes('forbidden')) {\n      return AuthErrorCategory.PERMISSION;\n    }\n    \n    return AuthErrorCategory.UNKNOWN;\n  }\n\n  /**\n   * Determine error severity level\n   */\n  private static determineSeverity(category: AuthErrorCategory, error: any): AuthErrorSeverity {\n    // Critical errors that prevent core functionality\n    if (category === AuthErrorCategory.CONFIG ||\n        (category === AuthErrorCategory.SERVER && error?.status >= 500)) {\n      return AuthErrorSeverity.CRITICAL;\n    }\n    \n    // High severity errors that affect authentication\n    if (category === AuthErrorCategory.TOKEN ||\n        category === AuthErrorCategory.OAUTH ||\n        category === AuthErrorCategory.PERMISSION) {\n      return AuthErrorSeverity.HIGH;\n    }\n    \n    // Medium severity errors that may affect features\n    if (category === AuthErrorCategory.NETWORK ||\n        category === AuthErrorCategory.STORAGE ||\n        category === AuthErrorCategory.RATE_LIMIT) {\n      return AuthErrorSeverity.MEDIUM;\n    }\n    \n    // Low severity for everything else\n    return AuthErrorSeverity.LOW;\n  }\n\n  /**\n   * Generate user-friendly error message\n   */\n  private static generateUserMessage(error: any, category: AuthErrorCategory): string {\n    const locale = 'he'; // Default to Hebrew\n    const errorType = this.getSpecificErrorType(error, category);\n    \n    // Get message from predefined messages\n    const categoryMessages = ERROR_MESSAGES[category] as any;\n    if (categoryMessages && categoryMessages[errorType]) {\n      return categoryMessages[errorType][locale] || categoryMessages[errorType].en;\n    }\n    \n    // Fallback messages by category\n    const fallbackMessages = {\n      [AuthErrorCategory.OAUTH]: '×©×’×™××” ×‘××™××•×ª Google. ×× × × ×¡×” ×©×•×‘.',\n      [AuthErrorCategory.NETWORK]: '×‘×¢×™×™×ª ×—×™×‘×•×¨ ×œ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×©×œ×š.',\n      [AuthErrorCategory.SERVER]: '×©×’×™××ª ×©×¨×ª. ×× × × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.',\n      [AuthErrorCategory.STORAGE]: '×©×’×™××” ×‘×©××™×¨×ª × ×ª×•× ×™×. ×× × × ×¡×” ×©×•×‘.',\n      [AuthErrorCategory.CONFIG]: '×©×’×™××ª ×”×’×“×¨×”. ×× × ×¤× ×” ×œ×ª××™×›×” ×˜×›× ×™×ª.',\n      [AuthErrorCategory.TOKEN]: '×‘×¢×™×” ×‘××™××•×ª. ×× × ×”×ª×—×‘×¨ ××—×“×©.',\n      [AuthErrorCategory.PERMISSION]: '××™×Ÿ ×”×¨×©××” ×œ×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”.',\n      [AuthErrorCategory.RATE_LIMIT]: '×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª. ×× × ×”××ª×Ÿ ××¡×¤×¨ ×“×§×•×ª.',\n      [AuthErrorCategory.UNKNOWN]: '×©×’×™××” ×œ× ×¦×¤×•×™×”. ×× × × ×¡×” ×©×•×‘.',\n    };\n    \n    return fallbackMessages[category] || '×©×’×™××” ×œ× ×¦×¤×•×™×”. ×× × × ×¡×” ×©×•×‘.';\n  }\n\n  /**\n   * Determine specific error type within category\n   */\n  private static getSpecificErrorType(error: any, category: AuthErrorCategory): string {\n    const errorMessage = error?.message?.toLowerCase() || '';\n    \n    switch (category) {\n      case AuthErrorCategory.OAUTH:\n        if (error?.type === 'cancel') return 'CANCELLED';\n        if (errorMessage.includes('token')) return 'INVALID_TOKEN';\n        if (errorMessage.includes('expired')) return 'EXPIRED_TOKEN';\n        return 'FLOW_ERROR';\n        \n      case AuthErrorCategory.NETWORK:\n        if (error?.name === 'AbortError') return 'TIMEOUT';\n        if (errorMessage.includes('dns')) return 'DNS_ERROR';\n        return 'CONNECTION_FAILED';\n        \n      case AuthErrorCategory.SERVER:\n        if (error?.status === 503) return 'MAINTENANCE';\n        if (error?.status === 502 || error?.status === 504) return 'OVERLOADED';\n        return 'INTERNAL_ERROR';\n        \n      default:\n        return 'GENERIC';\n    }\n  }\n\n  /**\n   * Determine retry strategy for error\n   */\n  private static determineRetryStrategy(category: AuthErrorCategory, error: any): {\n    retryable: boolean;\n    retryDelay?: number;\n    maxRetries?: number;\n  } {\n    switch (category) {\n      case AuthErrorCategory.NETWORK:\n        return {\n          retryable: true,\n          retryDelay: 2000, // 2 seconds\n          maxRetries: 3,\n        };\n        \n      case AuthErrorCategory.SERVER:\n        // Don't retry 4xx errors, do retry 5xx errors\n        if (error?.status >= 400 && error?.status < 500) {\n          return { retryable: false };\n        }\n        return {\n          retryable: true,\n          retryDelay: 5000, // 5 seconds\n          maxRetries: 2,\n        };\n        \n      case AuthErrorCategory.TOKEN:\n        // Token errors usually need re-authentication\n        return { retryable: false };\n        \n      case AuthErrorCategory.OAUTH:\n        // OAuth cancellation is not retryable, but other OAuth errors might be\n        if (error?.type === 'cancel') {\n          return { retryable: false };\n        }\n        return {\n          retryable: true,\n          retryDelay: 1000, // 1 second\n          maxRetries: 2,\n        };\n        \n      case AuthErrorCategory.RATE_LIMIT:\n        return {\n          retryable: true,\n          retryDelay: error?.retryAfter || 60000, // Default 1 minute\n          maxRetries: 1, // Only retry once for rate limits\n        };\n        \n      case AuthErrorCategory.STORAGE:\n        return {\n          retryable: true,\n          retryDelay: 500, // 0.5 seconds\n          maxRetries: 2,\n        };\n        \n      case AuthErrorCategory.CONFIG:\n        // Configuration errors are not retryable\n        return { retryable: false };\n        \n      default:\n        return {\n          retryable: true,\n          retryDelay: 1000,\n          maxRetries: 1,\n        };\n    }\n  }\n\n  /**\n   * Generate recovery strategy suggestions\n   */\n  private static generateRecoveryStrategy(category: AuthErrorCategory, error: any): AuthError['recovery'] {\n    switch (category) {\n      case AuthErrorCategory.OAUTH:\n        return {\n          userAction: '× ×¡×” ×œ×”×ª×—×‘×¨ ×©×•×‘ ×¢× Google', // Try to login with Google again\n          autoRecoverable: false,\n        };\n        \n      case AuthErrorCategory.NETWORK:\n        return {\n          userAction: '×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜ ×•× ×¡×” ×©×•×‘', // Check internet connection and try again\n          developerAction: 'Check API endpoint URL and network configuration',\n          autoRecoverable: true,\n        };\n        \n      case AuthErrorCategory.TOKEN:\n        return {\n          userAction: '×”×ª×—×‘×¨ ××—×“×© ×œ××¢×¨×›×ª', // Login to the system again\n          developerAction: 'Check token validation logic and expiration times',\n          autoRecoverable: false,\n        };\n        \n      case AuthErrorCategory.CONFIG:\n        return {\n          userAction: '×¤× ×” ×œ×ª××™×›×” ×˜×›× ×™×ª', // Contact technical support\n          developerAction: 'Check Google OAuth configuration in app.config.js',\n          autoRecoverable: false,\n        };\n        \n      case AuthErrorCategory.STORAGE:\n        return {\n          userAction: '×‘×“×•×§ ×”×¨×©××•×ª ×”××¤×œ×™×§×¦×™×” ×•××§×•× ×¤× ×•×™ ×‘××›×©×™×¨', // Check app permissions and device storage\n          developerAction: 'Check SecureStore availability and fallback mechanisms',\n          autoRecoverable: true,\n        };\n        \n      case AuthErrorCategory.RATE_LIMIT:\n        return {\n          userAction: '×”××ª×Ÿ ××¡×¤×¨ ×“×§×•×ª ×•× ×¡×” ×©×•×‘', // Wait a few minutes and try again\n          developerAction: 'Implement exponential backoff and respect rate limit headers',\n          autoRecoverable: true,\n        };\n        \n      default:\n        return {\n          userAction: '× ×¡×” ×©×•×‘ ××• ×¤× ×” ×œ×ª××™×›×” ×× ×”×‘×¢×™×” × ××©×›×ª', // Try again or contact support if issue persists\n          autoRecoverable: true,\n        };\n    }\n  }\n\n  /**\n   * Extract technical details from error for debugging\n   */\n  private static extractTechnicalDetails(error: any): string {\n    const details: string[] = [];\n    \n    if (error?.message) {\n      details.push(`Message: ${error.message}`);\n    }\n    \n    if (error?.status) {\n      details.push(`Status: ${error.status}`);\n    }\n    \n    if (error?.code) {\n      details.push(`Code: ${error.code}`);\n    }\n    \n    if (error?.name) {\n      details.push(`Type: ${error.name}`);\n    }\n    \n    if (error?.url) {\n      details.push(`URL: ${error.url}`);\n    }\n    \n    return details.join(', ') || 'No technical details available';\n  }\n\n  /**\n   * Generate unique error ID for tracking\n   */\n  private static generateErrorId(): string {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).substr(2, 5);\n    return `auth_error_${timestamp}_${random}`;\n  }\n\n  /**\n   * Get appropriate alert title based on category and severity\n   */\n  private static getAlertTitle(category: AuthErrorCategory, severity: AuthErrorSeverity): string {\n    if (severity === AuthErrorSeverity.CRITICAL) {\n      return '×©×’×™××” ×§×¨×™×˜×™×ª'; // Critical Error\n    }\n    \n    if (severity === AuthErrorSeverity.HIGH) {\n      return '×©×’×™××” ×‘××™××•×ª'; // Authentication Error\n    }\n    \n    switch (category) {\n      case AuthErrorCategory.NETWORK:\n        return '×‘×¢×™×™×ª ×—×™×‘×•×¨'; // Connection Problem\n      case AuthErrorCategory.RATE_LIMIT:\n        return '×™×•×ª×¨ ××“×™ × ×™×¡×™×•× ×•×ª'; // Too Many Attempts\n      default:\n        return '×©×’×™××”'; // Error\n    }\n  }\n\n  /**\n   * Log error with appropriate level\n   */\n  private static logError(authError: AuthError): void {\n    const logLevel = this.getLogLevel(authError.severity);\n    const logData = {\n      errorId: authError.id,\n      category: authError.category,\n      severity: authError.severity,\n      operation: authError.context.operation,\n      userId: authError.context.userId,\n      platform: authError.context.platform,\n      retryable: authError.retryable,\n      technicalDetails: authError.technicalDetails,\n    };\n\n    switch (logLevel) {\n      case 'error':\n        logger.error('AuthErrorHandler', authError.message, logData);\n        break;\n      case 'warn':\n        logger.warn('AuthErrorHandler', authError.message, logData);\n        break;\n      case 'info':\n        logger.info('AuthErrorHandler', authError.message, logData);\n        break;\n      default:\n        logger.debug('AuthErrorHandler', authError.message, logData);\n    }\n  }\n\n  /**\n   * Determine appropriate log level for error\n   */\n  private static getLogLevel(severity: AuthErrorSeverity): 'error' | 'warn' | 'info' | 'debug' {\n    switch (severity) {\n      case AuthErrorSeverity.CRITICAL:\n      case AuthErrorSeverity.HIGH:\n        return 'error';\n      case AuthErrorSeverity.MEDIUM:\n        return 'warn';\n      case AuthErrorSeverity.LOW:\n        return 'info';\n      default:\n        return 'debug';\n    }\n  }\n\n  /**\n   * Report error to monitoring system\n   * TODO: Implement integration with monitoring service\n   */\n  private static reportError(authError: AuthError): void {\n    // Only report high and critical severity errors\n    if (authError.severity === AuthErrorSeverity.HIGH || \n        authError.severity === AuthErrorSeverity.CRITICAL) {\n      \n      logger.info('AuthErrorHandler', 'Error reported to monitoring system', {\n        errorId: authError.id,\n        category: authError.category,\n        severity: authError.severity\n      });\n      \n      // TODO: Integrate with monitoring service (Sentry, DataDog, etc.)\n      // monitoringService.reportError(authError);\n    }\n  }\n}\n\n// ========================================\n// MAIN EXPORT\n// ========================================\n\nexport const AuthErrorHandler = AuthErrorHandlerClass;\n\n// ========================================\n// CONVENIENCE FUNCTIONS\n// ========================================\n\n/**\n * Quick error handling for common authentication scenarios\n * \n * @param error Original error\n * @param operation Operation context\n * @returns Processed AuthError\n */\nexport const handleAuthError = (error: any, operation: string): AuthError => {\n  return AuthErrorHandlerClass.handleError(error, { operation });\n};\n\n/**\n * Handle OAuth response errors specifically\n * \n * @param oauthResponse OAuth response from expo-auth-session\n * @returns Processed AuthError or null if no error\n */\nexport const handleOAuthError = (oauthResponse: any): AuthError | null => {\n  if (oauthResponse?.type === 'error') {\n    return AuthErrorHandlerClass.handleError(oauthResponse.error, {\n      operation: 'oauth_flow',\n    });\n  }\n  \n  if (oauthResponse?.type === 'cancel') {\n    return AuthErrorHandlerClass.handleError({ type: 'cancel', message: 'User cancelled OAuth' }, {\n      operation: 'oauth_flow',\n    });\n  }\n  \n  return null;\n};\n\n/**\n * Handle network errors specifically\n * \n * @param error Network error\n * @param endpoint API endpoint that failed\n * @returns Processed AuthError\n */\nexport const handleNetworkError = (error: any, endpoint: string): AuthError => {\n  return AuthErrorHandlerClass.handleError(error, {\n    operation: `api_request_${endpoint}`,\n  });\n};\n\n/**\n * Show error to user with retry option\n * \n * @param error AuthError to display\n * @param onRetry Retry callback function\n */\nexport const showRetryableError = (error: AuthError, onRetry?: () => void): void => {\n  AuthErrorHandlerClass.displayErrorToUser(error, {\n    showRetryButton: error.retryable,\n    onRetry,\n  });\n};\n\n// ========================================\n// ERROR RECOVERY UTILITIES\n// ========================================\n\n/**\n * Automatic error recovery with exponential backoff\n * \n * @param operation Function to retry\n * @param maxAttempts Maximum retry attempts\n * @param baseDelay Base delay between attempts\n * @returns Promise resolving to operation result\n */\nexport async function withRetry<T>(\n  operation: () => Promise<T>,\n  maxAttempts: number = 3,\n  baseDelay: number = 1000\n): Promise<T> {\n  let lastError: any;\n  \n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      return await operation();\n    } catch (error) {\n      lastError = error;\n      \n      // Don't wait after the last attempt\n      if (attempt < maxAttempts) {\n        const delay = baseDelay * Math.pow(2, attempt - 1); // Exponential backoff\n        \n        logger.info('withRetry', `Attempt ${attempt} failed, retrying in ${delay}ms`, {\n          error: String(error),\n          attempt,\n          maxAttempts,\n          delay\n        });\n        \n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n  }\n  \n  // All attempts failed, throw the last error\n  throw lastError;\n}\n\n/**\n * Execute operation with timeout\n * \n * @param operation Function to execute\n * @param timeoutMs Timeout in milliseconds\n * @returns Promise resolving to operation result\n */\nexport async function withTimeout<T>(\n  operation: () => Promise<T>,\n  timeoutMs: number\n): Promise<T> {\n  const timeoutPromise = new Promise<never>((_, reject) => {\n    setTimeout(() => reject(new Error('Operation timed out')), timeoutMs);\n  });\n  \n  return Promise.race([operation(), timeoutPromise]);\n}\n\n// ========================================\n// EXPORTS\n// ========================================\n\n// Types are exported via their declarations above\n\n// Default export\nexport default AuthErrorHandler;\n\n/**\n * ========================================\n * ERROR HANDLING BEST PRACTICES\n * ========================================\n * \n * 1. ALWAYS HANDLE ERRORS:\n *    ```typescript\n *    try {\n *      await authOperation();\n *    } catch (error) {\n *      const authError = handleAuthError(error, 'login');\n *      showRetryableError(authError, () => retryLogin());\n *    }\n *    ```\n * \n * 2. PROVIDE USER FEEDBACK:\n *    - Show user-friendly messages in Hebrew\n *    - Provide retry options for retryable errors\n *    - Give clear instructions for recovery\n * \n * 3. LOG FOR DEBUGGING:\n *    - All errors are automatically logged\n *    - Include context information\n *    - Use appropriate log levels\n * \n * 4. IMPLEMENT RECOVERY:\n *    - Use withRetry for network operations\n *    - Implement exponential backoff\n *    - Respect rate limiting\n * \n * 5. MONITOR ERRORS:\n *    - High/Critical errors are reported to monitoring\n *    - Track error rates and patterns\n *    - Set up alerts for critical errors\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/google_auth/utils/SecureStorage.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1350,1353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1350,1353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'secureError' is defined but never used.","line":410,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":410,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":554,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":554,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":787,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":787,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23526,23529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23526,23529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":800,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":800,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23902,23905],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23902,23905],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ========================================\n * SECURE STORAGE UTILITY\n * ========================================\n * \n * Cross-platform secure storage utility for authentication tokens and sensitive data.\n * This utility provides a consistent interface for secure data storage across\n * iOS, Android, and Web platforms with proper fallback mechanisms.\n * \n * SECURITY FEATURES:\n * - Platform-specific secure storage (Keychain on iOS, Keystore on Android)\n * - Encryption at rest for sensitive data\n * - Automatic fallback to less secure storage when secure storage fails\n * - Audit logging for all storage operations\n * - Access control and permission management\n * \n * PLATFORM IMPLEMENTATIONS:\n * - iOS: Uses SecureStore (Keychain Services)\n * - Android: Uses SecureStore (Android Keystore)  \n * - Web: Uses sessionStorage (more secure than localStorage for tokens)\n * \n * AUTHOR: AI Assistant\n * SECURITY LEVEL: Enterprise Grade\n * LAST UPDATED: 2024\n */\n\nimport * as SecureStore from 'expo-secure-store';\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { logger } from '../../utils/loggerService';\n\n// ========================================\n// TYPE DEFINITIONS\n// ========================================\n\n/**\n * Storage operation result\n */\ninterface StorageResult<T = any> {\n  /** Whether the operation was successful */\n  success: boolean;\n  /** Retrieved data (for get operations) */\n  data?: T;\n  /** Error message (if operation failed) */\n  error?: string;\n  /** Whether fallback storage was used */\n  usedFallback?: boolean;\n}\n\n/**\n * Storage options for fine-grained control\n */\ninterface StorageOptions {\n  /** Whether to use encryption (when available) */\n  encrypted?: boolean;\n  /** Access level for the stored data */\n  accessLevel?: 'always' | 'whenUnlocked' | 'afterFirstUnlock';\n  /** Whether to allow fallback to less secure storage */\n  allowFallback?: boolean;\n  /** TTL for the stored data in milliseconds */\n  ttl?: number;\n}\n\n/**\n * Storage statistics for monitoring\n */\ninterface StorageStats {\n  /** Total number of stored items */\n  totalItems: number;\n  /** Number of items in secure storage */\n  secureItems: number;\n  /** Number of items in fallback storage */\n  fallbackItems: number;\n  /** Total storage size estimation */\n  estimatedSize: number;\n  /** Last cleanup timestamp */\n  lastCleanup: string;\n}\n\n// ========================================\n// CONFIGURATION\n// ========================================\n\n/**\n * Default storage options\n */\nconst DEFAULT_OPTIONS: Required<StorageOptions> = {\n  encrypted: true,\n  accessLevel: 'whenUnlocked',\n  allowFallback: true,\n  ttl: 0, // No expiration by default\n};\n\n/**\n * Storage key prefixes for organization\n */\nconst KEY_PREFIXES = {\n  AUTH: 'karma_auth_',\n  CACHE: 'karma_cache_',\n  CONFIG: 'karma_config_',\n  TEMP: 'karma_temp_',\n} as const;\n\n/**\n * Sensitive data patterns that should always use secure storage\n */\nconst SENSITIVE_PATTERNS = [\n  /token/i,\n  /secret/i,\n  /password/i,\n  /key/i,\n  /credential/i,\n] as const;\n\n// ========================================\n// MAIN STORAGE CLASS\n// ========================================\n\n/**\n * SecureStorage - Cross-platform secure storage utility\n * \n * This class provides a unified interface for secure data storage\n * across all supported platforms with automatic fallback handling.\n * \n * USAGE:\n * ```typescript\n * // Store sensitive data\n * await SecureStorage.setItem('auth_token', token, { encrypted: true });\n * \n * // Retrieve data\n * const result = await SecureStorage.getItem('auth_token');\n * if (result.success) {\n *   console.log('Token:', result.data);\n * }\n * \n * // Remove data\n * await SecureStorage.removeItem('auth_token');\n * ```\n */\nclass SecureStorageClass {\n  /**\n   * Store data securely with platform-specific implementation\n   * \n   * This method automatically chooses the most secure storage method\n   * available on the current platform and falls back gracefully if needed.\n   * \n   * @param key Storage key (will be prefixed automatically)\n   * @param value Data to store (will be JSON serialized)\n   * @param options Storage options for fine-grained control\n   * @returns Promise resolving to operation result\n   * \n   * @example\n   * ```typescript\n   * // Store auth token with encryption\n   * const result = await SecureStorage.setItem('access_token', token, {\n   *   encrypted: true,\n   *   accessLevel: 'whenUnlocked'\n   * });\n   * \n   * if (result.success) {\n   *   console.log('Token stored securely');\n   * } else {\n   *   console.error('Storage failed:', result.error);\n   * }\n   * ```\n   */\n  static async setItem<T>(\n    key: string,\n    value: T,\n    options: StorageOptions = {}\n  ): Promise<StorageResult> {\n    const opts = { ...DEFAULT_OPTIONS, ...options };\n    const prefixedKey = this.addPrefix(key);\n    const serializedValue = JSON.stringify({\n      data: value,\n      timestamp: Date.now(),\n      ttl: opts.ttl,\n      encrypted: opts.encrypted,\n    });\n\n    logger.debug('SecureStorage', 'Storing item', {\n      key: prefixedKey,\n      valueLength: serializedValue.length,\n      platform: Platform.OS,\n      encrypted: opts.encrypted,\n      allowFallback: opts.allowFallback\n    });\n\n    try {\n      // Try secure storage first (mobile platforms)\n      if (Platform.OS !== 'web') {\n        try {\n          await SecureStore.setItemAsync(prefixedKey, serializedValue, {\n            requireAuthentication: opts.accessLevel !== 'always',\n            keychainService: 'karma_community', // iOS keychain service\n          });\n\n          logger.debug('SecureStorage', 'Item stored in secure storage', { key: prefixedKey });\n          \n          return { success: true };\n        } catch (secureError) {\n          logger.warn('SecureStorage', 'Secure storage failed, trying fallback', {\n            key: prefixedKey,\n            error: String(secureError),\n            allowFallback: opts.allowFallback\n          });\n\n          // Fall back to AsyncStorage if allowed\n          if (opts.allowFallback) {\n            await AsyncStorage.setItem(prefixedKey, serializedValue);\n            \n            logger.info('SecureStorage', 'Item stored in fallback storage', { \n              key: prefixedKey,\n              reason: 'secure_storage_unavailable'\n            });\n            \n            return { success: true, usedFallback: true };\n          } else {\n            throw secureError;\n          }\n        }\n      } else {\n        // Web platform: use sessionStorage for tokens, localStorage for other data\n        const storage = this.isSensitiveKey(key) ? sessionStorage : localStorage;\n        storage.setItem(prefixedKey, serializedValue);\n        \n        logger.debug('SecureStorage', 'Item stored in web storage', {\n          key: prefixedKey,\n          storageType: this.isSensitiveKey(key) ? 'sessionStorage' : 'localStorage'\n        });\n        \n        return { success: true };\n      }\n    } catch (error) {\n      logger.error('SecureStorage', 'Failed to store item', {\n        key: prefixedKey,\n        error: String(error),\n        platform: Platform.OS\n      });\n\n      return {\n        success: false,\n        error: `Storage failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  /**\n   * Retrieve data from secure storage\n   * \n   * This method attempts to retrieve data from the most secure storage\n   * available and validates the data integrity.\n   * \n   * @param key Storage key\n   * @param options Storage options\n   * @returns Promise resolving to retrieval result\n   * \n   * @example\n   * ```typescript\n   * const result = await SecureStorage.getItem('access_token');\n   * if (result.success && result.data) {\n   *   const token = result.data;\n   *   console.log('Retrieved token:', token);\n   * } else {\n   *   console.log('No token found or error:', result.error);\n   * }\n   * ```\n   */\n  static async getItem<T>(\n    key: string,\n    options: StorageOptions = {}\n  ): Promise<StorageResult<T>> {\n    const opts = { ...DEFAULT_OPTIONS, ...options };\n    const prefixedKey = this.addPrefix(key);\n\n    logger.debug('SecureStorage', 'Retrieving item', {\n      key: prefixedKey,\n      platform: Platform.OS\n    });\n\n    try {\n      let rawValue: string | null = null;\n      let usedFallback = false;\n\n      // Try secure storage first (mobile platforms)\n      if (Platform.OS !== 'web') {\n        try {\n          rawValue = await SecureStore.getItemAsync(prefixedKey, {\n            requireAuthentication: opts.accessLevel !== 'always',\n            keychainService: 'karma_community',\n          });\n          \n          if (rawValue === null) {\n            // Try fallback if allowed\n            if (opts.allowFallback) {\n              rawValue = await AsyncStorage.getItem(prefixedKey);\n              usedFallback = rawValue !== null;\n            }\n          }\n        } catch (secureError) {\n          logger.warn('SecureStorage', 'Secure storage retrieval failed, trying fallback', {\n            key: prefixedKey,\n            error: String(secureError),\n            allowFallback: opts.allowFallback\n          });\n\n          // Fall back to AsyncStorage if allowed\n          if (opts.allowFallback) {\n            rawValue = await AsyncStorage.getItem(prefixedKey);\n            usedFallback = rawValue !== null;\n          } else {\n            throw secureError;\n          }\n        }\n      } else {\n        // Web platform\n        const storage = this.isSensitiveKey(key) ? sessionStorage : localStorage;\n        rawValue = storage.getItem(prefixedKey);\n      }\n\n      // Handle case where no data is found\n      if (rawValue === null) {\n        logger.debug('SecureStorage', 'Item not found', { key: prefixedKey });\n        return { success: false, error: 'Item not found' };\n      }\n\n      // Parse and validate stored data\n      try {\n        const parsedValue = JSON.parse(rawValue);\n        \n        // Check TTL if set\n        if (parsedValue.ttl && parsedValue.ttl > 0) {\n          const age = Date.now() - (parsedValue.timestamp || 0);\n          if (age > parsedValue.ttl) {\n            logger.info('SecureStorage', 'Item expired, removing', {\n              key: prefixedKey,\n              age,\n              ttl: parsedValue.ttl\n            });\n            \n            // Remove expired item\n            await this.removeItem(key, options);\n            \n            return { success: false, error: 'Item expired' };\n          }\n        }\n\n        logger.debug('SecureStorage', 'Item retrieved successfully', {\n          key: prefixedKey,\n          usedFallback,\n          hasData: parsedValue.data !== undefined\n        });\n\n        return {\n          success: true,\n          data: parsedValue.data,\n          usedFallback\n        };\n      } catch (parseError) {\n        logger.error('SecureStorage', 'Failed to parse stored data', {\n          key: prefixedKey,\n          parseError: String(parseError)\n        });\n\n        // Remove corrupted data\n        await this.removeItem(key, options);\n        \n        return { success: false, error: 'Corrupted data removed' };\n      }\n    } catch (error) {\n      logger.error('SecureStorage', 'Failed to retrieve item', {\n        key: prefixedKey,\n        error: String(error),\n        platform: Platform.OS\n      });\n\n      return {\n        success: false,\n        error: `Retrieval failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  /**\n   * Remove data from secure storage\n   * \n   * @param key Storage key\n   * @param options Storage options\n   * @returns Promise resolving to operation result\n   */\n  static async removeItem(\n    key: string,\n    options: StorageOptions = {}\n  ): Promise<StorageResult> {\n    const opts = { ...DEFAULT_OPTIONS, ...options };\n    const prefixedKey = this.addPrefix(key);\n\n    logger.debug('SecureStorage', 'Removing item', {\n      key: prefixedKey,\n      platform: Platform.OS\n    });\n\n    try {\n      // Remove from secure storage (mobile platforms)\n      if (Platform.OS !== 'web') {\n        try {\n          await SecureStore.deleteItemAsync(prefixedKey, {\n            keychainService: 'karma_community',\n          });\n        } catch (secureError) {\n          // Also try fallback storage\n          if (opts.allowFallback) {\n            await AsyncStorage.removeItem(prefixedKey);\n          }\n        }\n      } else {\n        // Web platform\n        const storage = this.isSensitiveKey(key) ? sessionStorage : localStorage;\n        storage.removeItem(prefixedKey);\n      }\n\n      // Also remove from fallback storage to ensure complete cleanup\n      if (Platform.OS !== 'web' && opts.allowFallback) {\n        try {\n          await AsyncStorage.removeItem(prefixedKey);\n        } catch {\n          // Ignore fallback removal errors\n        }\n      }\n\n      logger.debug('SecureStorage', 'Item removed successfully', { key: prefixedKey });\n      \n      return { success: true };\n    } catch (error) {\n      logger.error('SecureStorage', 'Failed to remove item', {\n        key: prefixedKey,\n        error: String(error)\n      });\n\n      return {\n        success: false,\n        error: `Removal failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  /**\n   * Clear all stored data (use with caution!)\n   * \n   * @param keyPrefix Optional prefix to clear only specific keys\n   * @returns Promise resolving to operation result\n   */\n  static async clearAll(keyPrefix?: string): Promise<StorageResult<number>> {\n    logger.warn('SecureStorage', 'Clearing storage data', {\n      keyPrefix: keyPrefix || 'ALL',\n      platform: Platform.OS\n    });\n\n    try {\n      let clearedCount = 0;\n\n      if (Platform.OS !== 'web') {\n        // Mobile platforms: We can't list keys in SecureStore, so clear known patterns\n        const knownKeys = await this.getKnownKeys();\n        const keysToRemove = keyPrefix \n          ? knownKeys.filter(k => k.startsWith(keyPrefix))\n          : knownKeys;\n\n        for (const key of keysToRemove) {\n          try {\n            await SecureStore.deleteItemAsync(key);\n            clearedCount++;\n          } catch {\n            // Continue with other keys even if one fails\n          }\n        }\n\n        // Also clear from AsyncStorage\n        const asyncKeys = await AsyncStorage.getAllKeys();\n        const asyncKeysToRemove = asyncKeys.filter(k => \n          k.startsWith(KEY_PREFIXES.AUTH) ||\n          k.startsWith(KEY_PREFIXES.CACHE) ||\n          (keyPrefix && k.startsWith(keyPrefix))\n        );\n\n        if (asyncKeysToRemove.length > 0) {\n          await AsyncStorage.multiRemove(asyncKeysToRemove);\n          clearedCount += asyncKeysToRemove.length;\n        }\n      } else {\n        // Web platform: Clear from both sessionStorage and localStorage\n        const clearStorage = (storage: Storage) => {\n          const keys = Object.keys(storage);\n          const keysToRemove = keyPrefix\n            ? keys.filter(k => k.startsWith(keyPrefix))\n            : keys.filter(k => \n                k.startsWith(KEY_PREFIXES.AUTH) ||\n                k.startsWith(KEY_PREFIXES.CACHE)\n              );\n\n          keysToRemove.forEach(k => {\n            storage.removeItem(k);\n            clearedCount++;\n          });\n        };\n\n        clearStorage(sessionStorage);\n        clearStorage(localStorage);\n      }\n\n      logger.info('SecureStorage', 'Storage cleared successfully', {\n        clearedCount,\n        keyPrefix: keyPrefix || 'ALL'\n      });\n\n      return { success: true, data: clearedCount };\n    } catch (error) {\n      logger.error('SecureStorage', 'Failed to clear storage', {\n        error: String(error),\n        keyPrefix\n      });\n\n      return {\n        success: false,\n        error: `Clear failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  /**\n   * Get storage statistics\n   * \n   * @returns Promise resolving to storage statistics\n   */\n  static async getStats(): Promise<StorageResult<StorageStats>> {\n    try {\n      let secureItems = 0;\n      let fallbackItems = 0;\n      let estimatedSize = 0;\n\n      if (Platform.OS !== 'web') {\n        // Count items in AsyncStorage (fallback)\n        const asyncKeys = await AsyncStorage.getAllKeys();\n        const karmaKeys = asyncKeys.filter(k => \n          k.startsWith(KEY_PREFIXES.AUTH) ||\n          k.startsWith(KEY_PREFIXES.CACHE)\n        );\n\n        fallbackItems = karmaKeys.length;\n\n        // Estimate size\n        if (karmaKeys.length > 0) {\n          const values = await AsyncStorage.multiGet(karmaKeys);\n          estimatedSize = values.reduce((size, [_, value]) => \n            size + (value?.length || 0), 0\n          );\n        }\n\n        // We can't easily count SecureStore items, so estimate\n        secureItems = Math.max(0, fallbackItems - 5); // Rough estimation\n      } else {\n        // Web platform\n        const sessionKeys = Object.keys(sessionStorage).filter(k => \n          k.startsWith(KEY_PREFIXES.AUTH)\n        );\n        const localKeys = Object.keys(localStorage).filter(k => \n          k.startsWith(KEY_PREFIXES.CACHE)\n        );\n\n        secureItems = sessionKeys.length; // sessionStorage is more secure for tokens\n        fallbackItems = localKeys.length;\n\n        // Calculate estimated size\n        estimatedSize = [...sessionKeys, ...localKeys].reduce((size, key) => {\n          const storage = sessionKeys.includes(key) ? sessionStorage : localStorage;\n          const value = storage.getItem(key);\n          return size + (value?.length || 0);\n        }, 0);\n      }\n\n      const stats: StorageStats = {\n        totalItems: secureItems + fallbackItems,\n        secureItems,\n        fallbackItems,\n        estimatedSize,\n        lastCleanup: new Date().toISOString(),\n      };\n\n      logger.debug('SecureStorage', 'Storage statistics calculated', {\n        totalItems: stats.totalItems,\n        secureItems: stats.secureItems,\n        fallbackItems: stats.fallbackItems,\n        estimatedSize: stats.estimatedSize,\n        lastCleanup: stats.lastCleanup\n      });\n\n      return { success: true, data: stats };\n    } catch (error) {\n      logger.error('SecureStorage', 'Failed to get storage statistics', {\n        error: String(error)\n      });\n\n      return {\n        success: false,\n        error: `Stats failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  /**\n   * Cleanup expired items from storage\n   * \n   * @returns Promise resolving to number of items cleaned up\n   */\n  static async cleanup(): Promise<StorageResult<number>> {\n    logger.info('SecureStorage', 'Starting storage cleanup');\n\n    try {\n      let cleanedCount = 0;\n\n      if (Platform.OS !== 'web') {\n        // Mobile: Check AsyncStorage for expired items\n        const asyncKeys = await AsyncStorage.getAllKeys();\n        const karmaKeys = asyncKeys.filter(k => \n          k.startsWith(KEY_PREFIXES.CACHE) ||\n          k.startsWith(KEY_PREFIXES.TEMP)\n        );\n\n        const values = await AsyncStorage.multiGet(karmaKeys);\n        const expiredKeys: string[] = [];\n\n        values.forEach(([key, value]) => {\n          if (value) {\n            try {\n              const parsed = JSON.parse(value);\n              if (parsed.ttl && parsed.ttl > 0) {\n                const age = Date.now() - (parsed.timestamp || 0);\n                if (age > parsed.ttl) {\n                  expiredKeys.push(key);\n                }\n              }\n            } catch {\n              // Remove corrupted data\n              expiredKeys.push(key);\n            }\n          }\n        });\n\n        if (expiredKeys.length > 0) {\n          await AsyncStorage.multiRemove(expiredKeys);\n          cleanedCount = expiredKeys.length;\n        }\n      } else {\n        // Web: Check both storage types for expired items\n        const checkStorage = (storage: Storage) => {\n          const keysToRemove: string[] = [];\n          \n          for (let i = 0; i < storage.length; i++) {\n            const key = storage.key(i);\n            if (key && (key.startsWith(KEY_PREFIXES.CACHE) || key.startsWith(KEY_PREFIXES.TEMP))) {\n              const value = storage.getItem(key);\n              if (value) {\n                try {\n                  const parsed = JSON.parse(value);\n                  if (parsed.ttl && parsed.ttl > 0) {\n                    const age = Date.now() - (parsed.timestamp || 0);\n                    if (age > parsed.ttl) {\n                      keysToRemove.push(key);\n                    }\n                  }\n                } catch {\n                  keysToRemove.push(key);\n                }\n              }\n            }\n          }\n\n          keysToRemove.forEach(key => storage.removeItem(key));\n          return keysToRemove.length;\n        };\n\n        cleanedCount += checkStorage(sessionStorage);\n        cleanedCount += checkStorage(localStorage);\n      }\n\n      logger.info('SecureStorage', 'Storage cleanup completed', {\n        cleanedCount,\n        platform: Platform.OS\n      });\n\n      return { success: true, data: cleanedCount };\n    } catch (error) {\n      logger.error('SecureStorage', 'Storage cleanup failed', {\n        error: String(error)\n      });\n\n      return {\n        success: false,\n        error: `Cleanup failed: ${error instanceof Error ? error.message : String(error)}`\n      };\n    }\n  }\n\n  // ========================================\n  // HELPER METHODS\n  // ========================================\n\n  /**\n   * Add appropriate prefix to storage key\n   */\n  private static addPrefix(key: string): string {\n    // If key already has a prefix, don't add another\n    if (Object.values(KEY_PREFIXES).some(prefix => key.startsWith(prefix))) {\n      return key;\n    }\n\n    // Determine appropriate prefix based on key content\n    if (this.isSensitiveKey(key)) {\n      return KEY_PREFIXES.AUTH + key;\n    } else if (key.includes('cache') || key.includes('temp')) {\n      return KEY_PREFIXES.CACHE + key;\n    } else {\n      return KEY_PREFIXES.CONFIG + key;\n    }\n  }\n\n  /**\n   * Check if a key contains sensitive data\n   */\n  private static isSensitiveKey(key: string): boolean {\n    return SENSITIVE_PATTERNS.some(pattern => pattern.test(key));\n  }\n\n  /**\n   * Get known storage keys for cleanup operations\n   */\n  private static async getKnownKeys(): Promise<string[]> {\n    // Return all possible auth-related keys\n    return [\n      'karma_auth_access_token',\n      'karma_auth_refresh_token',\n      'karma_auth_user_data',\n      'karma_auth_token_expiry',\n      'karma_auth_session_id',\n      'karma_auth_last_check',\n    ];\n  }\n}\n\n// ========================================\n// CONVENIENCE METHODS\n// ========================================\n\n/**\n * Store authentication token securely\n * Convenience method for storing auth tokens with proper security settings\n */\nexport const storeAuthToken = async (\n  tokenType: 'access' | 'refresh',\n  token: string\n): Promise<StorageResult> => {\n  return SecureStorageClass.setItem(`${tokenType}_token`, token, {\n    encrypted: true,\n    accessLevel: 'whenUnlocked',\n    allowFallback: false, // Never allow fallback for tokens\n  });\n};\n\n/**\n * Retrieve authentication token\n * Convenience method for getting auth tokens\n */\nexport const getAuthToken = async (\n  tokenType: 'access' | 'refresh'\n): Promise<StorageResult<string>> => {\n  return SecureStorageClass.getItem(`${tokenType}_token`, {\n    allowFallback: false,\n  });\n};\n\n/**\n * Store user profile data\n * Convenience method for storing user profile with caching\n */\nexport const storeUserProfile = async (\n  userId: string,\n  profile: any,\n  ttl: number = 15 * 60 * 1000 // 15 minutes default\n): Promise<StorageResult> => {\n  return SecureStorageClass.setItem(`user_profile_${userId}`, profile, {\n    encrypted: false, // Profile data is not sensitive\n    ttl,\n    allowFallback: true,\n  });\n};\n\n/**\n * Get user profile from cache\n */\nexport const getUserProfile = async (userId: string): Promise<StorageResult<any>> => {\n  return SecureStorageClass.getItem(`user_profile_${userId}`, {\n    allowFallback: true,\n  });\n};\n\n// ========================================\n// EXPORTS\n// ========================================\n\nexport const SecureStorage = SecureStorageClass;\nexport default SecureStorage;\n\n/**\n * ========================================\n * SECURITY BEST PRACTICES\n * ========================================\n * \n * 1. TOKEN STORAGE:\n *    - Always use encrypted storage for tokens\n *    - Never allow fallback for authentication tokens\n *    - Set appropriate access levels (whenUnlocked)\n * \n * 2. DATA CLASSIFICATION:\n *    - Sensitive: tokens, passwords, private keys -> secure storage only\n *    - Personal: profile data, preferences -> secure storage with fallback\n *    - Public: app settings, cache data -> regular storage OK\n * \n * 3. EXPIRATION:\n *    - Set TTL for cached data\n *    - Regular cleanup of expired items\n *    - Monitor storage usage\n * \n * 4. ERROR HANDLING:\n *    - Always check storage results\n *    - Handle storage unavailability gracefully\n *    - Log storage errors for monitoring\n * \n * 5. PLATFORM CONSIDERATIONS:\n *    - iOS: Keychain may require user authentication\n *    - Android: Keystore may not be available on all devices\n *    - Web: sessionStorage is cleared when tab closes\n * \n * ========================================\n * USAGE EXAMPLES\n * ========================================\n * \n * // Store authentication token (most secure)\n * await storeAuthToken('access', accessToken);\n * \n * // Store user profile (cached)\n * await storeUserProfile(userId, profileData);\n * \n * // Store temporary data with expiration\n * await SecureStorage.setItem('temp_data', data, { \n *   ttl: 5 * 60 * 1000, // 5 minutes\n *   encrypted: false \n * });\n * \n * // Retrieve with error handling\n * const result = await getAuthToken('access');\n * if (result.success) {\n *   console.log('Token:', result.data);\n * } else {\n *   console.error('No token:', result.error);\n * }\n * \n * // Cleanup expired items\n * const cleaned = await SecureStorage.cleanup();\n * console.log('Cleaned items:', cleaned.data);\n */\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useAdminProtection.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[422,425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[422,425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[501,504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[501,504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useRef } from 'react';\nimport { Alert } from 'react-native';\nimport { useNavigation, useFocusEffect, useRoute } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\n\nexport function useAdminProtection(allowViewOnly?: boolean) {\n    const { isAdmin, isLoading, selectedUser, refreshUserRoles, isAuthenticated, isGuestMode } = useUser();\n    const navigation = useNavigation<any>();\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const isViewOnly = routeParams?.viewOnly === true;\n    const isVerifyingRef = useRef(false);\n    const lastCheckRef = useRef<number>(0);\n\n    const handleUnauthorized = useCallback(() => {\n        Alert.alert('×©×’×™××”', '××™×Ÿ ×œ×š ×”×¨×©××•×ª ×œ×¦×¤×•×ª ×‘×“×£ ×–×”');\n        if (navigation.canGoBack()) {\n            navigation.goBack();\n        } else {\n            navigation.navigate('Home');\n        }\n    }, [navigation]);\n\n    const verifyAdminStatus = useCallback(async () => {\n        // Prevent multiple simultaneous checks\n        if (!selectedUser?.id || isVerifyingRef.current) return;\n\n        // Throttle checks - don't check more than once every 5 seconds\n        const now = Date.now();\n        if (now - lastCheckRef.current < 5000) {\n            return;\n        }\n\n        try {\n            isVerifyingRef.current = true;\n            lastCheckRef.current = now;\n\n            console.log('ğŸ” Admin protection: Verifying admin status for user:', selectedUser.email);\n\n            // Refresh user roles from database\n            // This will update the store if roles changed\n            await refreshUserRoles();\n\n            // The isAdmin flag will be updated automatically by the store\n            // If it becomes false, the next render will catch it in the local check below\n\n        } catch (err) {\n            console.warn('ğŸ” Admin verification failed (network error or other)', err);\n        } finally {\n            isVerifyingRef.current = false;\n        }\n    }, [selectedUser?.id, selectedUser?.email, refreshUserRoles]);\n\n    useFocusEffect(\n        useCallback(() => {\n            // If view-only mode is allowed and active, allow everyone (including unauthenticated)\n            if (allowViewOnly && isViewOnly) {\n                // In view-only mode, allow everyone - no authentication required\n                console.log('ğŸ” View-only protection: Allowing access (view-only mode)');\n                return;\n            }\n\n            // 1. Immediate local check for admin access\n            if (!isLoading && !isAdmin) {\n                console.log('ğŸ” Admin protection: User not admin (local check), redirecting');\n                handleUnauthorized();\n                return;\n            }\n\n            // 2. Server check if locally admin\n            // This runs every time the screen comes into focus\n            if (!isLoading && isAdmin && selectedUser) {\n                verifyAdminStatus();\n            }\n        }, [isAdmin, isLoading, selectedUser, verifyAdminStatus, handleUnauthorized, allowViewOnly, isViewOnly, isAuthenticated, isGuestMode])\n    );\n\n    return { isAuthorized: isAdmin || (allowViewOnly && isViewOnly && (isAuthenticated || isGuestMode)) };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useFeedData.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'databaseService' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"databaseService"},"fix":{"range":[112,168],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[706,709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[706,709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[847,850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[847,850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":100,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8403,8406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8403,8406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8465,8468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8465,8468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":203,"column":40,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":203,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9556,9559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9556,9559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\nimport { postsService } from '../utils/postsService';\nimport databaseService from '../utils/databaseService';\nimport { logger } from '../utils/loggerService';\nimport { FeedItem } from '../types/feed';\nimport { useUser } from '../stores/userStore';\n\nconst NUM_ITEMS = 50; // Per page/batch\n\nexport const useFeedData = (feedMode: 'friends' | 'discovery') => {\n    const { selectedUser: currentUser } = useUser();\n    const [feed, setFeed] = useState<FeedItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [refreshing, setRefreshing] = useState(false);\n\n    // Helper to map API post to FeedItem\n    const mapPostToItem = (post: any): FeedItem => {\n        // For ride posts, extract ride-specific data\n        // Helper to format date/time safely\n        let rideData: any = {};\n        const formatRideTime = (dateIso: string) => {\n            if (!dateIso) return { time: '', date: '' };\n            const dep = new Date(dateIso);\n            if (isNaN(dep.getTime())) return { time: '', date: '' };\n\n            const hours = dep.getHours().toString().padStart(2, '0');\n            const minutes = dep.getMinutes().toString().padStart(2, '0');\n\n            const day = dep.getDate().toString().padStart(2, '0');\n            const month = (dep.getMonth() + 1).toString().padStart(2, '0');\n            const year = dep.getFullYear();\n\n            return {\n                time: `${hours}:${minutes}`,\n                date: `${day}.${month}.${year}`\n            };\n        };\n\n        // 1. Try ride_data from DB Join\n        if (post.ride_data) {\n            const rd = post.ride_data;\n            const { time, date } = formatRideTime(rd.departure_time);\n\n            rideData = {\n                from: typeof rd.from_location === 'string' ? rd.from_location : (rd.from_location?.name || rd.from_location?.city || ''),\n                to: typeof rd.to_location === 'string' ? rd.to_location : (rd.to_location?.name || rd.to_location?.city || ''),\n                seats: rd.available_seats || 0,\n                price: rd.price_per_seat || 0,\n                time,\n                date,\n                status: rd.status // Add status for ride\n            };\n        }\n        // 2. Fallback to metadata\n        else if ((post.post_type === 'ride' || post.post_type === 'ride_offered') && post.metadata) {\n            const meta = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n            const r = meta.ride || meta;\n\n            // Check departure_time (schema) or time/date (legacy/manual)\n            let timeStr = r.time || '';\n            let dateStr = r.date || '';\n\n            if (r.departure_time) {\n                const formatted = formatRideTime(r.departure_time);\n                if (formatted.time) timeStr = formatted.time;\n                if (formatted.date) dateStr = formatted.date;\n            }\n\n            rideData = {\n                from: typeof r.from_location === 'string' ? r.from_location : (r.from_location?.name || r.from_location?.city || r.from || ''),\n                to: typeof r.to_location === 'string' ? r.to_location : (r.to_location?.name || r.to_location?.city || r.to || ''),\n                seats: r.available_seats || r.seats || 0,\n                price: r.price_per_seat || r.price || 0,\n                time: timeStr,\n                date: dateStr\n            };\n        }\n\n        // Ensure user is always defined\n        const author = post.author || {};\n        const userId = author.id || post.author_id || 'unknown';\n        const userName = author.name || 'common.unknownUser';\n        const userAvatar = author.avatar_url || undefined;\n\n        // Get status from item_data or ride_data or default\n        let itemStatus: string | undefined;\n        if (post.item_data) {\n            itemStatus = post.item_data.status;\n        } else if (post.ride_data) {\n            itemStatus = post.ride_data.status;\n        }\n\n        // Parse metadata to get item_id if needed\n        let metadataItemId: string | undefined;\n        try {\n            if (post.metadata) {\n                const metadata = typeof post.metadata === 'string' ? JSON.parse(post.metadata) : post.metadata;\n                metadataItemId = metadata?.item_id;\n            }\n        } catch (e) {\n            // Ignore parse errors\n        }\n\n        // For items: ALWAYS prefer item_data.id (from JOIN with items table) - this is the most reliable source\n        // Then try metadata.item_id, then item_id column (if not timestamp)\n        // This is a workaround for cases where item_id column was stored incorrectly as timestamp\n        let finalItemId: string | undefined;\n        if (post.item_data?.id) {\n            // item_data.id comes from JOIN with items table - this is the most reliable\n            finalItemId = post.item_data.id;\n        } else if (metadataItemId && !/^\\d{10,13}$/.test(metadataItemId)) {\n            // metadata.item_id is valid (not timestamp) - this is stored when post is created\n            finalItemId = metadataItemId;\n        } else if (post.item_id && !/^\\d{10,13}$/.test(post.item_id)) {\n            // item_id column is valid (not timestamp)\n            finalItemId = post.item_id;\n        } else {\n            // If all else fails and we have a timestamp, we can't use it\n            // But we'll log it for debugging\n            finalItemId = undefined;\n        }\n\n        // Debug log for item/donation posts to help diagnose issues\n        if ((post.post_type === 'item' || post.post_type === 'donation')) {\n            if (!finalItemId || /^\\d{10,13}$/.test(finalItemId || '')) {\n                console.warn('âš ï¸ Invalid item ID for post:', {\n                    postId: post.id,\n                    postType: post.post_type,\n                    finalItemId,\n                    item_id_column: post.item_id,\n                    item_data_id: post.item_data?.id,\n                    metadata_item_id: metadataItemId,\n                    hasItemData: !!post.item_data\n                });\n            }\n        }\n\n        return {\n            id: post.id,\n            type: post.post_type || 'post',\n            subtype: post.post_type, // e.g. 'task_assignment', 'ride'\n            title: post.title || 'post.noTitle', // Use key or default in UI\n            description: post.description || '',\n            thumbnail: post.images && post.images.length > 0 ? post.images[0] : null,\n            user: {\n                id: userId,\n                name: userName,\n                avatar: userAvatar,\n            },\n            likes: parseInt(post.likes || '0'),\n            comments: parseInt(post.comments || '0'),\n            isLiked: post.is_liked || false,\n            timestamp: (post.created_at && !isNaN(new Date(post.created_at).getTime()))\n                ? new Date(post.created_at).toISOString()\n                : new Date().toISOString(),\n            taskData: post.task ? {\n                id: post.task.id,\n                title: post.task.title,\n                status: post.task.status\n            } : undefined,\n            // Add status for items and donations\n            status: itemStatus,\n            // Add IDs for updating posts\n            itemId: finalItemId,\n            rideId: post.ride_id || post.ride_data?.id,\n            taskId: post.task_id || post.task?.id,\n            // Add ride-specific fields if this is a ride post\n            ...rideData\n        };\n    };\n\n    const loadFeed = useCallback(async (isRefresh = false) => {\n        if (isRefresh) {\n            setRefreshing(true);\n        } else {\n            setLoading(true);\n        }\n\n        try {\n            logger.debug('useFeedData', 'Loading feed', { feedMode, userId: currentUser?.id });\n\n            // 1. Fetch Posts from Backend\n            const postsResponse = await postsService.getPosts(NUM_ITEMS, 0, feedMode === 'friends' ? currentUser?.id : undefined);\n            const rawPosts = postsResponse.success ? (postsResponse.data || []) : [];\n            const mappedPosts = rawPosts.map(mapPostToItem);\n\n            const allContent: FeedItem[] = [...mappedPosts];\n            const existingIds = new Set(allContent.map(item => item.id));\n\n            // Track IDs of tasks that already have a post to avoid duplicates\n            const postedTaskIds = new Set(\n                rawPosts\n                    .filter((p: any) => p.task_id || p.task?.id)\n                    .map((p: any) => p.task_id || p.task?.id)\n            );\n\n            // Note: Rides are now included in posts with post_type='ride', so no need to fetch separately\n            // Note: Items are now included in posts with post_type='item' or 'donation', so no need to fetch separately\n            // When an item is created, a post is automatically created for it in the backend\n\n            // 4. Fetch Tasks (Match ProfileScreen logic - independent tasks)\n            try {\n                const { apiService } = require('../utils/apiService');\n                const [openTasksRes, progressTasksRes] = await Promise.all([\n                    apiService.getTasks({ status: 'open', limit: 20 }),\n                    apiService.getTasks({ status: 'in_progress', limit: 20 })\n                ]);\n\n                const rawTasks = [\n                    ...(openTasksRes.success ? (openTasksRes.data || []) : []),\n                    ...(progressTasksRes.success ? (progressTasksRes.data || []) : [])\n                ];\n\n                // Map tasks to FeedItems\n                rawTasks.forEach((task: any) => {\n                    // Check if this task is already in a post\n                    if (postedTaskIds.has(task.id)) {\n                        return;\n                    }\n\n                    // Use actual task ID (UUID) without prefix\n                    if (!existingIds.has(task.id)) {\n                        const creator = task.creator_details || {};\n\n                        const taskItem: FeedItem = {\n                            id: task.id, // Use actual task ID\n                            type: 'post', // Show as post\n                            subtype: 'task_assignment',\n                            title: `×™×¦×¨/×” ××©×™××” ×—×“×©×”: ${task.title}`,\n                            description: task.description || '',\n                            thumbnail: null,\n                            user: {\n                                id: creator.id || task.created_by || 'unknown',\n                                name: creator.name || 'Unknown User',\n                                avatar: creator.avatar_url || undefined\n                            },\n                            likes: 0,\n                            comments: 0,\n                            isLiked: false,\n                            timestamp: task.created_at || new Date().toISOString(),\n                            taskData: {\n                                id: task.id,\n                                title: task.title,\n                                status: task.status\n                            }\n                        };\n                        allContent.push(taskItem);\n                        existingIds.add(task.id);\n                    }\n                });\n            } catch (e) {\n                logger.warn('useFeedData', 'Failed to load tasks', { error: e });\n            }\n\n            // Sort by timestamp\n            allContent.sort((a, b) => {\n                return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();\n            });\n\n            setFeed(allContent);\n\n        } catch (error) {\n            logger.error('useFeedData', 'Error loading feed', { error });\n            // Don't clear feed on error, maybe show toast\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    }, [feedMode, currentUser?.id]);\n\n    useEffect(() => {\n        loadFeed();\n    }, [loadFeed]);\n\n    return {\n        feed,\n        loading,\n        refreshing,\n        refresh: () => loadFeed(true),\n        loadMore: () => { } // Implement pagination later\n    };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostDeletion.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":10,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Alert, Platform } from 'react-native';\nimport { apiService } from '../utils/apiService';\nimport { useUser } from '../stores/userStore';\nimport { toastService } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\n\nexport const usePostDeletion = () => {\n    const { selectedUser } = useUser();\n    const { t } = useTranslation();\n    const [isDeleting, setIsDeleting] = useState(false);\n\n    const canDelete = (postAuthorId: string): boolean => {\n        if (!selectedUser) return false;\n\n        // User can delete their own posts\n        if (postAuthorId === selectedUser.id) return true;\n\n        // Super admin can delete any post\n        if (selectedUser.roles?.includes('super_admin')) return true;\n\n        return false;\n    };\n\n    const showDeleteConfirmation = (postType: string): Promise<boolean> => {\n        return new Promise((resolve) => {\n            const messages = {\n                ride: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜ ×˜×¨××¤',\n                    message: '××—×™×§×ª ×”×¤×•×¡×˜ ×ª××—×§ ×’× ××ª ×”× ×¡×™×¢×” ×•××ª ×›×œ ×”×”×–×× ×•×ª. ×”×× ×œ×”××©×™×š?'\n                },\n                item: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜ ×¤×¨×™×˜',\n                    message: '××—×™×§×ª ×”×¤×•×¡×˜ ×ª××—×§ ×’× ××ª ×”×¤×¨×™×˜ ×•××ª ×›×œ ×”×‘×§×©×•×ª. ×”×× ×œ×”××©×™×š?'\n                },\n                donation: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜ ×ª×¨×•××”',\n                    message: '××—×™×§×ª ×”×¤×•×¡×˜ ×ª××—×§ ×’× ××ª ×”×ª×¨×•××”. ×”×× ×œ×”××©×™×š?'\n                },\n                task_completion: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜ ××©×™××”',\n                    message: '×”×× ×œ××—×•×§ ××ª ×”×¤×•×¡×˜? (×”××©×™××” ×ª×™×©××¨)'\n                },\n                task_assignment: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜ ××©×™××”',\n                    message: '×”×× ×œ××—×•×§ ××ª ×”×¤×•×¡×˜? (×”××©×™××” ×ª×™×©××¨)'\n                },\n                default: {\n                    title: '××—×™×§×ª ×¤×•×¡×˜',\n                    message: '×”×× ×œ××—×•×§ ××ª ×”×¤×•×¡×˜?'\n                }\n            };\n\n            const config = messages[postType as keyof typeof messages] || messages.default;\n\n            if (Platform.OS === 'web') {\n                const confirmed = window.confirm(`${config.title}\\n\\n${config.message}`);\n                resolve(confirmed);\n            } else {\n                Alert.alert(\n                    config.title,\n                    config.message,\n                    [\n                        {\n                            text: '×‘×™×˜×•×œ',\n                            style: 'cancel',\n                            onPress: () => resolve(false)\n                        },\n                        {\n                            text: '××—×§',\n                            style: 'destructive',\n                            onPress: () => resolve(true)\n                        }\n                    ],\n                    { cancelable: true }\n                );\n            }\n        });\n    };\n\n    const deletePost = async (\n        postId: string,\n        postType: string,\n        onSuccess?: () => void\n    ): Promise<boolean> => {\n        if (!selectedUser) {\n            toastService.showError('×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ××—×•×§ ×¤×•×¡×˜');\n            return false;\n        }\n\n        // Show confirmation dialog\n        const confirmed = await showDeleteConfirmation(postType);\n        if (!confirmed) return false;\n\n        setIsDeleting(true);\n\n        try {\n            const result = await apiService.deletePost(postId, selectedUser.id);\n\n            if (result.success) {\n                toastService.showSuccess(\n                    result.data?.message || '×”×¤×•×¡×˜ × ××—×§ ×‘×”×¦×œ×—×”'\n                );\n\n                // Call success callback\n                if (onSuccess) {\n                    onSuccess();\n                }\n\n                return true;\n            } else {\n                toastService.showError(\n                    result.error || '×©×’×™××” ×‘××—×™×§×ª ×”×¤×•×¡×˜'\n                );\n                return false;\n            }\n        } catch (error) {\n            console.error('Error deleting post:', error);\n            toastService.showError('×©×’×™××” ×‘××—×™×§×ª ×”×¤×•×¡×˜');\n            return false;\n        } finally {\n            setIsDeleting(false);\n        }\n    };\n\n    return {\n        canDelete,\n        deletePost,\n        isDeleting\n    };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostInteractions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":2,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[59,66],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[66,76],"text":""},"desc":"Remove unused variable \"Platform\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Share, Alert, Platform } from 'react-native';\nimport { postsService } from '../utils/postsService';\nimport { isBookmarked, addBookmark, removeBookmark } from '../utils/bookmarksService';\nimport { toastService } from '../utils/toastService';\nimport { logger } from '../utils/loggerService';\nimport { FeedItem } from '../types/feed';\nimport { useUser } from '../stores/userStore';\n\nexport const usePostInteractions = (item: FeedItem) => {\n    // Correct destructuring for useUser\n    const { selectedUser: user } = useUser();\n\n    // Local state for optimistic updates\n    const [isLiked, setIsLiked] = useState(item.isLiked);\n    const [likesCount, setLikesCount] = useState(item.likes);\n    const [commentsCount, setCommentsCount] = useState(item.comments);\n    const [isBookmarkedState, setIsBookmarkedState] = useState(false);\n    const [isLikeLoading, setIsLikeLoading] = useState(false);\n\n    // Sync state if item prop changes (e.g. after refresh)\n    useEffect(() => {\n        setIsLiked(item.isLiked);\n        setLikesCount(item.likes);\n        setCommentsCount(item.comments);\n    }, [item.isLiked, item.likes, item.comments]);\n\n    // Check bookmark status on mount\n    useEffect(() => {\n        const checkBookmark = async () => {\n            if (item.id && user?.id) {\n                const bookmarked = await isBookmarked(user.id, item.id);\n                setIsBookmarkedState(bookmarked);\n            }\n        };\n        checkBookmark();\n    }, [item.id, user?.id]);\n\n    const handleLike = async () => {\n        if (!user || !user.id) {\n            toastService.show('Please login to like posts');\n            return;\n        }\n\n        if (isLikeLoading) return;\n\n        // Optimistic update\n        const previousIsLiked = isLiked;\n        const previousLikesCount = likesCount;\n        const newIsLiked = !isLiked;\n\n        setIsLiked(newIsLiked);\n        setLikesCount(prev => newIsLiked ? prev + 1 : Math.max(0, prev - 1));\n        setIsLikeLoading(true);\n\n        try {\n            logger.debug('usePostInteractions', 'Toggling like', { postId: item.id, newIsLiked });\n            // Correct method name: togglePostLike\n            const response = await postsService.togglePostLike(item.id, user.id);\n\n            if (!response.success) {\n                throw new Error('Failed to toggle like');\n            }\n        } catch (error) {\n            logger.error('usePostInteractions', 'Error toggling like', { error });\n            // Revert on error\n            setIsLiked(previousIsLiked);\n            setLikesCount(previousLikesCount);\n            toastService.showError('Failed to update like');\n        } finally {\n            setIsLikeLoading(false);\n        }\n    };\n\n    const handleBookmark = async () => {\n        if (!user || !user.id) {\n            toastService.show('Please login to bookmark posts');\n            return;\n        }\n\n        try {\n            if (isBookmarkedState) {\n                await removeBookmark(user.id, item.id);\n                setIsBookmarkedState(false);\n                toastService.show('Removed from bookmarks');\n            } else {\n                await addBookmark(user.id, item);\n                setIsBookmarkedState(true);\n                toastService.show('Added to bookmarks');\n            }\n        } catch (error) {\n            logger.error('usePostInteractions', 'Error toggling bookmark', { error });\n            toastService.showError('Failed to update bookmark');\n        }\n    };\n\n    const handleShare = async () => {\n        try {\n            const result = await Share.share({\n                message: `Check out this post on Karma Community: ${item.title}`,\n                // url: `https://karma-community.com/post/${item.id}`, // TODO: Deep linking\n            });\n\n            if (result.action === Share.sharedAction) {\n                if (result.activityType) {\n                    logger.debug('usePostInteractions', 'Shared with activity type', { type: result.activityType });\n                } else {\n                    logger.debug('usePostInteractions', 'Shared successfully');\n                }\n            } else if (result.action === Share.dismissedAction) {\n                logger.debug('usePostInteractions', 'Share dismissed');\n            }\n        } catch (error) {\n            logger.error('usePostInteractions', 'Error sharing', { error });\n            toastService.showError('Failed to share post');\n        }\n    };\n\n    return {\n        isLiked,\n        likesCount,\n        commentsCount,\n        isBookmarked: isBookmarkedState,\n        isLikeLoading,\n        handleLike,\n        handleBookmark,\n        handleShare,\n        setCommentsCount\n    };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/usePostMenu.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":2,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":41,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[80,87],"text":""},"desc":"Remove unused variable \"Alert\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useState } from 'react';\nimport { Platform, ActionSheetIOS, Alert } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { FeedItem } from '../types/feed';\nimport { usePostDeletion } from './usePostDeletion';\nimport { useUser } from '../stores/userStore';\nimport { toastService } from '../utils/toastService';\nimport { Option } from '../components/Feed/OptionsModal';\n\ninterface UsePostMenuOptions {\n  onDelete?: (postId: string) => void;\n  onReport?: (item: FeedItem) => void;\n  onEdit?: (item: FeedItem) => void;\n  onReopen?: (item: FeedItem) => void;\n  onHide?: (item: FeedItem) => void;\n}\n\ninterface UsePostMenuReturn {\n  handleMorePress: (item: FeedItem, measurements?: { x: number, y: number }) => void;\n  optionsModalVisible: boolean;\n  setOptionsModalVisible: (visible: boolean) => void;\n  modalOptions: Option[];\n  modalPosition: { x: number, y: number } | undefined;\n  reportModalVisible: boolean;\n  setReportModalVisible: (visible: boolean) => void;\n  selectedPostForReport: FeedItem | null;\n  setSelectedPostForReport: (item: FeedItem | null) => void;\n}\n\nexport const usePostMenu = (options: UsePostMenuOptions = {}): UsePostMenuReturn => {\n  const { t } = useTranslation('common');\n  const { selectedUser } = useUser();\n  const { canDelete, deletePost } = usePostDeletion();\n  \n  const [optionsModalVisible, setOptionsModalVisible] = useState(false);\n  const [modalOptions, setModalOptions] = useState<Option[]>([]);\n  const [modalPosition, setModalPosition] = useState<{ x: number, y: number } | undefined>(undefined);\n  const [reportModalVisible, setReportModalVisible] = useState(false);\n  const [selectedPostForReport, setSelectedPostForReport] = useState<FeedItem | null>(null);\n\n  // Check if post is closed\n  const isPostClosed = useCallback((item: FeedItem): boolean => {\n    const status = item.status;\n    const subtype = item.subtype || item.type;\n\n    // Tasks: done or archived\n    if (subtype === 'task_assignment' || subtype === 'task_completion' || subtype === 'task_post') {\n      const taskStatus = item.taskData?.status || status;\n      return taskStatus === 'done' || taskStatus === 'archived';\n    }\n\n    // Rides: completed or cancelled\n    if (subtype === 'ride' || subtype === 'ride_offered' || subtype === 'ride_completed') {\n      return status === 'completed' || status === 'cancelled';\n    }\n\n    // Items: delivered, completed, or expired\n    if (subtype === 'item' || subtype === 'donation') {\n      return status === 'delivered' || status === 'completed' || status === 'expired';\n    }\n\n    return false;\n  }, []);\n\n  const handleMorePress = useCallback((item: FeedItem, measurements?: { x: number, y: number }) => {\n    const isOwner = selectedUser?.id === item.user.id;\n    const canDeleteThisPost = canDelete(item.user.id);\n    const isClosed = isPostClosed(item);\n\n    // Actions\n    const handleDelete = () => {\n      deletePost(item.id, item.subtype || 'general', () => {\n        if (options.onDelete) {\n          options.onDelete(item.id);\n        }\n      });\n    };\n\n    const handleReport = () => {\n      if (options.onReport) {\n        options.onReport(item);\n      } else {\n        setSelectedPostForReport(item);\n        setReportModalVisible(true);\n      }\n    };\n\n    const handleEdit = () => {\n      if (options.onEdit) {\n        options.onEdit(item);\n      } else {\n        toastService.showInfo(t('edit_coming_soon') || 'Edit functionality coming soon!');\n      }\n    };\n\n    const handleReopen = () => {\n      if (options.onReopen) {\n        options.onReopen(item);\n      } else {\n        toastService.showInfo(t('reopen_coming_soon') || 'Reopen functionality coming soon!');\n      }\n    };\n\n    const handleHide = () => {\n      if (options.onHide) {\n        options.onHide(item);\n      } else {\n        toastService.showInfo(t('hide_coming_soon') || 'Hide functionality coming soon!');\n      }\n    };\n\n    if (Platform.OS === 'ios') {\n      const iosOptions = [t('cancel') || 'Cancel'];\n      const destructiveButtonIndex: number[] = [];\n\n      // Delete (if has permission)\n      if (canDeleteThisPost) {\n        iosOptions.push(t('delete') || 'Delete');\n        destructiveButtonIndex.push(iosOptions.length - 1);\n      }\n\n      // Reopen (if closed and is owner)\n      if (isClosed && isOwner) {\n        iosOptions.push(t('reopen') || 'Reopen');\n      }\n\n      // Edit (if owner)\n      if (isOwner) {\n        iosOptions.push(t('edit') || 'Edit');\n      }\n\n      // Hide (if owner and not closed)\n      if (isOwner && !isClosed) {\n        iosOptions.push(t('hide') || 'Hide');\n      }\n\n      // Report (always show)\n      if (!isOwner) {\n        iosOptions.push(t('report') || 'Report');\n        destructiveButtonIndex.push(iosOptions.length - 1);\n      }\n\n      ActionSheetIOS.showActionSheetWithOptions(\n        {\n          options: iosOptions,\n          cancelButtonIndex: 0,\n          destructiveButtonIndex,\n          title: t('options') || 'Options'\n        },\n        (buttonIndex) => {\n          if (buttonIndex === 0) return; // Cancel\n          \n          const selectedOption = iosOptions[buttonIndex];\n          if (selectedOption === (t('delete') || 'Delete')) {\n            handleDelete();\n          } else if (selectedOption === (t('report') || 'Report')) {\n            handleReport();\n          } else if (selectedOption === (t('edit') || 'Edit')) {\n            handleEdit();\n          } else if (selectedOption === (t('reopen') || 'Reopen')) {\n            handleReopen();\n          } else if (selectedOption === (t('hide') || 'Hide')) {\n            handleHide();\n          }\n        }\n      );\n    } else {\n      // Android & Web: Use Custom OptionsModal\n      const androidOptions: Option[] = [];\n\n      // Delete (if has permission)\n      if (canDeleteThisPost) {\n        androidOptions.push({\n          label: t('delete') || 'Delete',\n          onPress: handleDelete,\n          isDestructive: true,\n          icon: 'trash-outline'\n        });\n      }\n\n      // Reopen (if closed and is owner)\n      if (isClosed && isOwner) {\n        androidOptions.push({\n          label: t('reopen') || 'Reopen',\n          onPress: handleReopen,\n          icon: 'refresh-outline'\n        });\n      }\n\n      // Edit (if owner)\n      if (isOwner) {\n        androidOptions.push({\n          label: t('edit') || 'Edit',\n          onPress: handleEdit,\n          icon: 'create-outline'\n        });\n      }\n\n      // Hide (if owner and not closed)\n      if (isOwner && !isClosed) {\n        androidOptions.push({\n          label: t('hide') || 'Hide',\n          onPress: handleHide,\n          icon: 'eye-off-outline'\n        });\n      }\n\n      // Always show report option\n      androidOptions.push({\n        label: t('report') || 'Report',\n        onPress: handleReport,\n        isDestructive: true,\n        icon: 'flag-outline'\n      });\n\n      setModalOptions(androidOptions);\n      setModalPosition(measurements);\n      setOptionsModalVisible(true);\n    }\n  }, [selectedUser, canDelete, deletePost, isPostClosed, t, options]);\n\n  return {\n    handleMorePress,\n    optionsModalVisible,\n    setOptionsModalVisible,\n    modalOptions,\n    modalPosition,\n    reportModalVisible,\n    setReportModalVisible,\n    selectedPostForReport,\n    setSelectedPostForReport\n  };\n};\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useProfileNavigation.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[236,239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[236,239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fromScreen' is assigned a value but never used.","line":9,"column":78,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":88},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1170,1173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1170,1173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1188,1191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1188,1191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2881,2884],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2881,2884],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":120,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":120,"endColumn":23}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useNavigation } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\n\nexport const useProfileNavigation = () => {\n    const navigation = useNavigation<any>();\n    const { selectedUser: currentUser } = useUser();\n\n    const navigateToProfile = (targetUserId: string, targetUserName: string, fromScreen: string = 'Feed') => {\n        logger.debug('useProfileNavigation', 'Navigating to profile', {\n            targetUserId,\n            targetUserName,\n            currentUserId: currentUser?.id\n        });\n\n        if (!targetUserId) {\n            logger.warn('useProfileNavigation', 'Cannot navigate to profile - missing userId');\n            return;\n        }\n\n        const isOwnProfile = targetUserId === currentUser?.id;\n\n        if (isOwnProfile) {\n            _navigateToOwnProfile(navigation, currentUser);\n        } else {\n            _navigateToUserProfile(navigation, targetUserId, targetUserName);\n        }\n    };\n\n    return { navigateToProfile };\n};\n\n// Helper: Traverse to find BottomNavigator or correct stack for Own Profile\nconst _navigateToOwnProfile = (navigation: any, currentUser: any) => {\n    try {\n        logger.debug('useProfileNavigation', 'Attempting navigation to own profile (Tab)');\n\n        // Strategy 1: Direct Tab Navigation if available in root\n        // This is often the most reliable for BottomTabs\n        try {\n            navigation.navigate('ProfileScreen');\n            return;\n        } catch (err) {\n            // Ignore, try next strategy\n        }\n\n        // Strategy 2: Find Parent Navigator (BottomTabs)\n        let parent = navigation.getParent();\n        while (parent) {\n            const state = parent.getState();\n            if (state?.type === 'tab' || state?.routeNames?.includes('ProfileScreen')) {\n                parent.navigate('ProfileScreen');\n                return;\n            }\n            parent = parent.getParent();\n        }\n\n        logger.warn('useProfileNavigation', 'Could not find ProfileScreen tab, falling back');\n        // Fallback behavior: if we really can't find the tab, we might be in a detached stack.\n        // But for the user request, they specifically want the \"ProfileMain\" (which implies the tab root).\n\n        // If all else fails, forcing a navigate might work if 'ProfileScreen' is registered globally\n        navigation.navigate('ProfileScreen');\n\n    } catch (error) {\n        logger.error('useProfileNavigation', 'Error navigating to ProfileScreen tab', { error });\n        // Absolute fallback to user profile screen if the system is completely broken\n        if (currentUser) {\n            _navigateToUserProfile(navigation, currentUser.id, currentUser.name || 'My Profile');\n        }\n    }\n};\n\n// Helper: Navigate to generic UserProfileScreen\nconst _navigateToUserProfile = (navigation: any, userId: string, userName: string) => {\n    try {\n        // Try to navigate via HomeTabStack first to keep bottom bar\n        let bottomNavigator = null;\n        let currentNav = navigation;\n        let depth = 0;\n        const maxDepth = 5;\n\n        while (currentNav && depth < maxDepth) {\n            const state = currentNav.getState?.();\n            if (state?.routeNames?.includes('HomeScreen')) {\n                bottomNavigator = currentNav;\n                break;\n            }\n            const parent = currentNav.getParent?.();\n            if (parent) {\n                currentNav = parent;\n                depth++;\n            } else {\n                break;\n            }\n        }\n\n        const params = {\n            userId: userId,\n            userName: userName,\n            characterData: null\n        };\n\n        if (bottomNavigator) {\n            bottomNavigator.navigate('HomeScreen', {\n                screen: 'UserProfileScreen',\n                params\n            });\n            return;\n        }\n\n        // Standard navigation\n        const parentNavigator = navigation.getParent();\n        if (parentNavigator) {\n            try {\n                parentNavigator.navigate('HomeScreen', {\n                    screen: 'UserProfileScreen',\n                    params\n                });\n            } catch (e) {\n                parentNavigator.navigate('UserProfileScreen', params);\n            }\n        } else {\n            navigation.navigate('UserProfileScreen', params);\n        }\n\n    } catch (error) {\n        logger.error('useProfileNavigation', 'Error navigating to UserProfileScreen', { error, userId });\n        navigation.navigate('UserProfileScreen', {\n            userId: userId,\n            userName: userName,\n            characterData: null\n        });\n    }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useScrollPosition.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useLayoutEffect' is defined but never used.","line":6,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useLayoutEffect"},"fix":{"range":[228,245],"text":""},"desc":"Remove unused variable \"useLayoutEffect\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3496,3499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3496,3499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scrollView' is assigned a value but never used.","line":138,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7539,7542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7539,7542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7867,7870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7867,7870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":305,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10320,10323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10320,10323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// useScrollPosition.ts\n// Hook for preserving scroll position across re-renders\n// Works with both ScrollView and FlatList components\n// Session-only persistence - position is cleared when app closes\n\nimport { useEffect, useRef, useLayoutEffect, useCallback } from 'react';\nimport { Platform, ScrollView, FlatList } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\n\nconst LOG_SOURCE = 'useScrollPosition';\n\n// Storage key format: scroll_pos_{screenKey}_{userId}\nconst getStorageKey = (screenKey: string, userId: string | null): string => {\n  const userIdPart = userId || 'guest';\n  return `scroll_pos_${screenKey}_${userIdPart}`;\n};\n\n// Debounce function to limit save frequency\nconst createDebouncer = () => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  return (fn: () => void, delay: number) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(fn, delay);\n  };\n};\n\ninterface UseScrollPositionOptions {\n  enabled?: boolean;\n  debounceDelay?: number;\n}\n\n/**\n * Hook to preserve scroll position for a screen\n * \n * @param screenKey - Unique identifier for the screen (e.g., 'AdminMoneyScreen')\n * @param options - Configuration options\n * @returns ref to attach to ScrollView or FlatList component\n * \n * @example\n * ```tsx\n * const scrollRef = useScrollPosition('AdminMoneyScreen');\n * \n * <ScrollView ref={scrollRef}>\n *   {content}\n * </ScrollView>\n * ```\n */\nexport const useScrollPosition = (\n  screenKey: string,\n  options: UseScrollPositionOptions = {}\n): React.RefObject<ScrollView | FlatList> => {\n  const { enabled = true, debounceDelay = 200 } = options;\n  const { selectedUser } = useUser();\n  const scrollRef = useRef<ScrollView | FlatList>(null);\n  const debounce = useRef(createDebouncer()).current;\n  const isRestoringRef = useRef(false);\n  const lastSavedPositionRef = useRef<number>(0);\n\n  // Load saved position when screen gains focus\n  useFocusEffect(\n    useCallback(() => {\n      if (!enabled) {\n        return;\n      }\n\n      const restorePosition = async () => {\n        try {\n          const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n          let savedPosition: string | null = null;\n\n          if (Platform.OS === 'web') {\n            // Web: synchronous localStorage\n            if (typeof window !== 'undefined' && window.localStorage) {\n              savedPosition = window.localStorage.getItem(storageKey);\n            }\n          } else {\n            // Native: asynchronous AsyncStorage\n            savedPosition = await AsyncStorage.getItem(storageKey);\n          }\n\n          if (savedPosition) {\n            const position = parseFloat(savedPosition);\n            if (!isNaN(position) && position > 0 && scrollRef.current) {\n              isRestoringRef.current = true;\n              \n              // Small delay to ensure ScrollView is fully rendered\n              setTimeout(() => {\n                try {\n                  if (scrollRef.current) {\n                    if ('scrollTo' in scrollRef.current) {\n                      // ScrollView\n                      scrollRef.current.scrollTo({ y: position, animated: false });\n                    } else if ('scrollToOffset' in scrollRef.current) {\n                      // FlatList\n                      (scrollRef.current as FlatList<any>).scrollToOffset({\n                        offset: position,\n                        animated: false,\n                      });\n                    }\n                    logger.debug(LOG_SOURCE, 'Scroll position restored', {\n                      screenKey,\n                      position,\n                    });\n                  }\n                } catch (error) {\n                  logger.error(LOG_SOURCE, 'Error restoring scroll position', { error });\n                } finally {\n                  // Reset flag after a short delay\n                  setTimeout(() => {\n                    isRestoringRef.current = false;\n                  }, 100);\n                }\n              }, 100);\n            }\n          }\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error loading scroll position', { error });\n        }\n      };\n\n      restorePosition();\n    }, [screenKey, selectedUser?.id, enabled])\n  );\n\n  // Save position when scrolling\n  useEffect(() => {\n    if (!enabled || !scrollRef.current) {\n      return;\n    }\n\n    // For ScrollView - attach scroll event handler\n    if ('scrollTo' in scrollRef.current) {\n      const scrollView = scrollRef.current as ScrollView;\n      \n      // Note: ScrollView's onScroll event needs to be passed as a prop\n      // We'll need to handle this differently - see usage example\n      // For now, we'll save on blur/focus change\n    }\n\n    return () => {\n      // Cleanup if needed\n    };\n  }, [enabled, scrollRef.current]);\n\n  // Save position when screen loses focus\n  useFocusEffect(\n    useCallback(() => {\n      return () => {\n        // Cleanup function - called when screen loses focus\n        if (!enabled || isRestoringRef.current) {\n          return;\n        }\n\n        const savePosition = async () => {\n          try {\n            if (!scrollRef.current) {\n              return;\n            }\n\n            let position: number | null = null;\n\n            // Try to get current scroll position\n            // Note: ScrollView and FlatList don't expose scroll position directly\n            // This is a limitation - we'll need to track it via onScroll callback\n            // For now, we save the last known position\n\n            if (lastSavedPositionRef.current > 0) {\n              position = lastSavedPositionRef.current;\n            }\n\n            if (position !== null && position > 0) {\n              const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n              const positionString = position.toString();\n\n              debounce(() => {\n                if (Platform.OS === 'web') {\n                  // Web: synchronous localStorage\n                  if (typeof window !== 'undefined' && window.localStorage) {\n                    window.localStorage.setItem(storageKey, positionString);\n                  }\n                } else {\n                  // Native: asynchronous AsyncStorage\n                  AsyncStorage.setItem(storageKey, positionString).catch((error) => {\n                    logger.error(LOG_SOURCE, 'Failed to save scroll position', { error });\n                  });\n                }\n              }, debounceDelay);\n\n              logger.debug(LOG_SOURCE, 'Scroll position saved', {\n                screenKey,\n                position,\n              });\n            }\n          } catch (error) {\n            logger.error(LOG_SOURCE, 'Error saving scroll position', { error });\n          }\n        };\n\n        savePosition();\n      };\n    }, [screenKey, selectedUser?.id, enabled, debounceDelay])\n  );\n\n  return scrollRef;\n};\n\n/**\n * Hook that returns both ref and onScroll handler for ScrollView\n * Use this version when you need full control over scroll events\n * \n * @param screenKey - Unique identifier for the screen\n * @param options - Configuration options\n * @returns { ref, onScroll } - ref to attach and onScroll handler\n */\nexport const useScrollPositionWithHandler = (\n  screenKey: string,\n  options: UseScrollPositionOptions = {}\n): {\n  ref: React.RefObject<ScrollView | FlatList>;\n  onScroll: (event: any) => void;\n} => {\n  const { enabled = true, debounceDelay = 200 } = options;\n  const { selectedUser } = useUser();\n  const scrollRef = useRef<ScrollView | FlatList>(null);\n  const debounce = useRef(createDebouncer()).current;\n  const lastSavedPositionRef = useRef<number>(0);\n\n  const handleScroll = useCallback(\n    (event: any) => {\n      if (!enabled) {\n        return;\n      }\n\n      const {\n        nativeEvent: { contentOffset },\n      } = event;\n\n      const position = contentOffset?.y || 0;\n      lastSavedPositionRef.current = position;\n\n      // Debounce the save operation\n      debounce(() => {\n        const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n        const positionString = position.toString();\n\n        try {\n          if (Platform.OS === 'web') {\n            // Web: synchronous localStorage\n            if (typeof window !== 'undefined' && window.localStorage) {\n              window.localStorage.setItem(storageKey, positionString);\n            }\n          } else {\n            // Native: asynchronous AsyncStorage\n            AsyncStorage.setItem(storageKey, positionString).catch((error) => {\n              logger.error(LOG_SOURCE, 'Failed to save scroll position', { error });\n            });\n          }\n\n          logger.debug(LOG_SOURCE, 'Scroll position saved during scroll', {\n            screenKey,\n            position,\n          });\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error saving scroll position during scroll', { error });\n        }\n      }, debounceDelay);\n    },\n    [screenKey, selectedUser?.id, enabled, debounceDelay, debounce]\n  );\n\n  // Load saved position when screen gains focus\n  useFocusEffect(\n    useCallback(() => {\n      if (!enabled) {\n        return;\n      }\n\n      const restorePosition = async () => {\n        try {\n          const storageKey = getStorageKey(screenKey, selectedUser?.id || null);\n          let savedPosition: string | null = null;\n\n          if (Platform.OS === 'web') {\n            if (typeof window !== 'undefined' && window.localStorage) {\n              savedPosition = window.localStorage.getItem(storageKey);\n            }\n          } else {\n            savedPosition = await AsyncStorage.getItem(storageKey);\n          }\n\n          if (savedPosition) {\n            const position = parseFloat(savedPosition);\n            if (!isNaN(position) && position > 0 && scrollRef.current) {\n              setTimeout(() => {\n                try {\n                  if (scrollRef.current) {\n                    if ('scrollTo' in scrollRef.current) {\n                      scrollRef.current.scrollTo({ y: position, animated: false });\n                    } else if ('scrollToOffset' in scrollRef.current) {\n                      (scrollRef.current as FlatList<any>).scrollToOffset({\n                        offset: position,\n                        animated: false,\n                      });\n                    }\n                    logger.debug(LOG_SOURCE, 'Scroll position restored', {\n                      screenKey,\n                      position,\n                    });\n                  }\n                } catch (error) {\n                  logger.error(LOG_SOURCE, 'Error restoring scroll position', { error });\n                }\n              }, 100);\n            }\n          }\n        } catch (error) {\n          logger.error(LOG_SOURCE, 'Error loading scroll position', { error });\n        }\n      };\n\n      restorePosition();\n    }, [screenKey, selectedUser?.id, enabled])\n  );\n\n  return {\n    ref: scrollRef,\n    onScroll: handleScroll,\n  };\n};\n\n\n\n\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/hooks/useUnreadNotificationsCount.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/jest.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  preset: 'react-native',\n  transformIgnorePatterns: [\n    // ×ª××™×›×” ×‘-Expo 53, React 19, React Native 0.79.5\n    'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg|@shopify/react-native-skia)',\n  ],\n  collectCoverageFrom: [\n    'app/**/*.{ts,tsx}',\n    'components/**/*.{ts,tsx}',\n    'utils/**/*.{ts,tsx}',\n    'stores/**/*.{ts,tsx}',\n    '!**/*.d.ts',\n    '!**/node_modules/**',\n    '!**/scripts/**', // scripts ×œ× × ×›×œ×œ×™× ×‘-coverage\n    '!**/audit-reports/**',\n  ],\n  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n  // ×ª××™×›×” ×‘-tsconfig.json ×”×§×™×™×\n  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json'],\n  testMatch: ['**/__tests__/**/*.{ts,tsx}', '**/*.{test,spec}.{ts,tsx}'],\n  moduleNameMapper: {\n    '^@/(.*)$': '<rootDir>/$1',\n  },\n  testEnvironment: 'node', // ××©×ª××© ×‘-node environment ×œ×‘×“×™×§×•×ª utils\n};\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/jest.setup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":18,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":20,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":21,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":25,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":26,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":27,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":30,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":31,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":32,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":33,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":37,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":38,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":39,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":40,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":44,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":45,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":46,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":50,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":51,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":52,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":53,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":54,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":58,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":5}],"suppressedMessages":[],"errorCount":27,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Jest setup file - ×¨×¥ ×œ×¤× ×™ ×›×œ ×‘×“×™×§×”\n// Mock Expo modules ×©×œ× ×–××™× ×™× ×‘×¡×‘×™×‘×ª ×‘×“×™×§×•×ª\n\n// Mock expo-constants\njest.mock('expo-constants', () => ({\n  default: {\n    expoConfig: {\n      extra: {\n        EXPO_PUBLIC_API_BASE_URL: 'http://localhost:3001',\n        EXPO_PUBLIC_ENVIRONMENT: 'test',\n      },\n    },\n    executionEnvironment: 'standalone',\n  },\n}));\n\n// Mock expo-secure-store\njest.mock('expo-secure-store', () => ({\n  getItemAsync: jest.fn(),\n  setItemAsync: jest.fn(),\n  deleteItemAsync: jest.fn(),\n}));\n\n// Mock AsyncStorage\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  getAllKeys: jest.fn(),\n  multiGet: jest.fn(),\n  multiSet: jest.fn(),\n  multiRemove: jest.fn(),\n}));\n\n// Mock expo-haptics\njest.mock('expo-haptics', () => ({\n  impactAsync: jest.fn(),\n  notificationAsync: jest.fn(),\n  selectionAsync: jest.fn(),\n}));\n\n// Mock expo-location\njest.mock('expo-location', () => ({\n  requestForegroundPermissionsAsync: jest.fn(),\n  getCurrentPositionAsync: jest.fn(),\n}));\n\n// Mock expo-notifications\njest.mock('expo-notifications', () => ({\n  getPermissionsAsync: jest.fn(),\n  requestPermissionsAsync: jest.fn(),\n  scheduleNotificationAsync: jest.fn(),\n  cancelAllScheduledNotificationsAsync: jest.fn(),\n}));\n\n// ×”×’×“×¨×ª timeout ×’×œ×•×‘×œ×™\njest.setTimeout(10000); // 10 ×©× ×™×•×ª\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/metro.config.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":3,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":51,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":58},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":43,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":7}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { getDefaultConfig } = require('expo/metro-config');\n\nconst config = getDefaultConfig(__dirname);\n\n// Fix nanoid resolution issue\nconst originalResolveRequest = config.resolver.resolveRequest;\nconfig.resolver.resolveRequest = (context, moduleName, platform) => {\n  if (moduleName === 'nanoid/non-secure' || moduleName.startsWith('nanoid/')) {\n    return context.resolveRequest(context, 'nanoid', platform);\n  }\n  \n  // Use original resolver for everything else\n  if (originalResolveRequest) {\n    return originalResolveRequest(context, moduleName, platform);\n  }\n  return context.resolveRequest(context, moduleName, platform);\n};\n\n// Enable package exports to avoid circular dependency issues\nconfig.resolver.unstable_enablePackageExports = true;\n\n// Fix for react-native-reanimated web circular dependency\nconfig.resolver.sourceExts = [...config.resolver.sourceExts, 'mjs', 'cjs'];\n\n// Additional resolver configuration for web\nif (process.env.EXPO_PUBLIC_PLATFORM === 'web' || process.env.PLATFORM === 'web') {\n  // Ensure proper module resolution order\n  config.resolver.platforms = ['web', 'native', 'ios', 'android'];\n}\n\n// Workaround for react-native-reanimated web circular dependency\n// Force eager evaluation of reanimated modules to avoid Player.js initialization issues\nconfig.transformer = {\n  ...config.transformer,\n  getTransformOptions: async () => ({\n    transform: {\n      experimentalImportSupport: false,\n      inlineRequires: false,\n    },\n  }),\n};\n\nmodule.exports = config;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/AdminStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2534,2537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2534,2537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2581,2584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2581,2584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Stack navigator for admin screens (dashboard, money management, people, review) and top bar screens.\n// - Reached from: `BottomNavigator` -> Tab 'AdminTab' (only visible to admins).\n// - Provides: Admin dashboard and management screens, plus top bar screens (Settings, Notifications, About, Chat screens, LandingSiteScreen).\n// - Header: Uses `TopBarNavigator`; can be hidden per-screen with route param `hideTopBar`.\nimport React from \"react\";\nimport { Platform } from \"react-native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport AdminDashboardScreen from \"../screens/AdminDashboardScreen\";\nimport AdminMoneyScreen from \"../screens/AdminMoneyScreen\";\nimport AdminPeopleScreen from \"../screens/AdminPeopleScreen\";\nimport AdminReviewScreen from \"../screens/AdminReviewScreen\";\nimport AdminAdminsScreen from \"../screens/AdminAdminsScreen\";\nimport AdminTasksScreen from \"../screens/AdminTasksScreen\";\nimport AdminCRMScreen from \"../screens/AdminCRMScreen\";\nimport AdminFilesScreen from \"../screens/AdminFilesScreen\";\nimport AdminTimeManagementScreen from \"../screens/AdminTimeManagementScreen\";\nimport AdminTablesScreen from \"../screens/AdminTablesScreen\";\nimport AdminTableRowsScreen from \"../screens/AdminTableRowsScreen\";\nimport ChatListScreen from \"../topBarScreens/ChatListScreen\";\nimport ChatDetailScreen from \"../screens/ChatDetailScreen\";\nimport NewChatScreen from \"../screens/NewChatScreen\";\nimport SettingsScreen from \"../topBarScreens/SettingsScreen\";\nimport NotificationsScreen from \"../screens/NotificationsScreen\";\nimport AboutKarmaCommunityScreen from \"../topBarScreens/AboutKarmaCommunityScreen\";\nimport LandingSiteScreen from \"../screens/Landing/LandingSiteScreen\";\nimport DiscoverPeopleScreen from \"../screens/DiscoverPeopleScreen\";\nimport TopBarNavigator from \"./TopBarNavigator\";\nimport { AdminStackParamList } from \"../globals/types\";\nimport { logger } from \"../utils/loggerService\";\n\nconst Stack = createStackNavigator<AdminStackParamList>();\n\nexport default function AdminStack() {\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('AdminStack', 'Navigator focused');\n    }, [])\n  );\n\n  return (\n    <Stack.Navigator\n      id={undefined}\n      initialRouteName=\"AdminDashboard\"\n      detachInactiveScreens={true}\n      screenOptions={({ navigation, route }) => ({\n        headerShown: true,\n        header: () => (\n          <TopBarNavigator\n            navigation={navigation as any}\n            hideTopBar={(route?.params as any)?.hideTopBar === true}\n          />\n        ),\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        // detachInactiveScreens already handles this, but we keep cardStyle for web compatibility\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n          // This prevents elements in hidden screens from receiving focus\n        } : undefined,\n      })}\n    >\n      <Stack.Screen name=\"AdminDashboard\" component={AdminDashboardScreen} />\n      <Stack.Screen name=\"AdminMoney\" component={AdminMoneyScreen} />\n      <Stack.Screen name=\"AdminPeople\" component={AdminPeopleScreen} />\n      <Stack.Screen name=\"AdminReview\" component={AdminReviewScreen} />\n      <Stack.Screen name=\"AdminAdmins\" component={AdminAdminsScreen} />\n      <Stack.Screen name=\"AdminTasks\" component={AdminTasksScreen} />\n      <Stack.Screen name=\"AdminCRM\" component={AdminCRMScreen} />\n      <Stack.Screen name=\"AdminFiles\" component={AdminFilesScreen} />\n      <Stack.Screen name=\"AdminTimeManagement\" component={AdminTimeManagementScreen} />\n      <Stack.Screen name=\"AdminTables\" component={AdminTablesScreen} />\n      <Stack.Screen name=\"AdminTableRows\" component={AdminTableRowsScreen} />\n      <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n      <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n      <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n      <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n      <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n      <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n      <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n      <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n    </Stack.Navigator>\n  );\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/BottomNavigator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Platform"},"fix":{"range":[1524,1533],"text":""},"desc":"Remove unused variable \"Platform\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BookmarksScreen' is defined but never used.","line":32,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"BookmarksScreen"},"fix":{"range":[2055,2113],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SettingsScreen' is defined but never used.","line":33,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"SettingsScreen"},"fix":{"range":[2113,2175],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChatListScreen' is defined but never used.","line":34,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ChatListScreen"},"fix":{"range":[2175,2237],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AboutKarmaCommunityScreen' is defined but never used.","line":35,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":33,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"AboutKarmaCommunityScreen"},"fix":{"range":[2237,2321],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'NotificationsScreen' is defined but never used.","line":36,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"NotificationsScreen"},"fix":{"range":[2321,2387],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":156,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":156,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7749,7752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7749,7752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7770,7773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7770,7773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8348,8351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8348,8351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8365,8368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8365,8368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9476,9479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9476,9479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Bottom tab navigator hosting main tabs: Home, Search, Donations, Profile (hidden in guest mode).\n// - Reached from: `MainNavigator` route 'HomeStack'.\n// - Provides: Tab bar with custom styling, responsive insets, icons per route; hides tab bar when nested route sets `hideBottomBar` param.\n// - Reads from context: `useUser()` -> `isGuestMode`, `resetHomeScreen()` used on Home tab press.\n// - Child stacks: `HomeTabStack`, `SearchTabStack`, `DonationsStack`, `ProfileTabStack`.\n// - Navigation params pattern: nested screens can pass `{ hideBottomBar: true }` to hide tab bar; Home tab press triggers reset via context.\n// - External deps: react-navigation/bottom-tabs, Ionicons, responsive helpers, colors/constants.\n// BottomNavigator.tsx\n\n// TODO: Extract complex animation logic to custom hooks (usePulseAnimation, useTabBarAnimation)\n// TODO: Add comprehensive TypeScript interfaces for all navigation types\n// TODO: Implement proper accessibility for tab navigation\n// TODO: Add comprehensive error handling for navigation failures  \n// TODO: Remove hardcoded animation values and use constants\n// TODO: Implement proper tab badge system for notifications/updates\n// TODO: Add comprehensive performance optimization with React.memo\n// TODO: Remove 'use strict' directive - not needed in modern JavaScript\n// TODO: Add comprehensive unit tests for all navigation logic\n// TODO: Implement proper deep linking support for tab navigation\n'use strict';\nimport React from \"react\";\nimport { Platform, Animated, Easing, View, StyleSheet } from \"react-native\";\nimport { createBottomTabNavigator, BottomTabNavigationOptions } from \"@react-navigation/bottom-tabs\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useFocusEffect, useNavigation, CommonActions } from \"@react-navigation/native\";\nimport HomeTabStack from \"./HomeTabStack\";\nimport SearchTabStack from \"./SearchTabStack\";\nimport ProfileTabStack from \"./ProfileTabStack\";\nimport DonationsStack from \"./DonationsStack\";\nimport AdminStack from \"./AdminStack\";\nimport BookmarksScreen from \"../screens/BookmarksScreen\";\nimport SettingsScreen from \"../topBarScreens/SettingsScreen\";\nimport ChatListScreen from \"../topBarScreens/ChatListScreen\";\nimport AboutKarmaCommunityScreen from \"../topBarScreens/AboutKarmaCommunityScreen\";\nimport NotificationsScreen from \"../screens/NotificationsScreen\";\nimport colors from \"../globals/colors\"; // Adjust path if needed\nimport { vw, getScreenInfo, isLandscape } from \"../globals/responsive\";\nimport { LAYOUT_CONSTANTS } from \"../globals/constants\";\nimport { useUser } from \"../stores/userStore\";\nimport { useWebMode } from \"../stores/webModeStore\";\nimport { logger } from \"../utils/loggerService\";\n\n// Define the type for your bottom tab navigator's route names and their parameters.\nexport type BottomTabNavigatorParamList = {\n  DonationsTab: undefined;\n  HomeScreen: undefined;\n  SearchTab: undefined;\n  ProfileScreen: undefined;\n  AdminTab: undefined;\n  SettingsScreen: undefined;\n  ChatListScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  NotificationsScreen: undefined;\n};\n\n// Create an instance of the Bottom Tab Navigator with its parameter list type\nconst Tab = createBottomTabNavigator<BottomTabNavigatorParamList>();\n\n// Animated icon for Donations tab when not focused\n// TODO: Extract this component to separate file (components/AnimatedTabIcon.tsx)\n// TODO: Add proper cleanup for animations on unmount\n// TODO: Implement proper animation performance optimization\n// TODO: Add proper accessibility for animated elements\nconst DonationsPulseIcon: React.FC<{ color: string; size: number }> = ({ color, size }) => {\n  const ring1 = React.useRef(new Animated.Value(0)).current;\n  const ring2 = React.useRef(new Animated.Value(0)).current;\n  const ring3 = React.useRef(new Animated.Value(0)).current;\n\n  const runPulse = React.useCallback((anim: Animated.Value, delayMs: number) => {\n    return Animated.loop(\n      Animated.sequence([\n        Animated.delay(delayMs),\n        Animated.timing(anim, {\n          toValue: 1,\n          duration: 2000,\n          easing: Easing.out(Easing.quad),\n          useNativeDriver: false,\n        }),\n        Animated.timing(anim, {\n          toValue: 0,\n          duration: 0,\n          useNativeDriver: false,\n        }),\n      ])\n    );\n  }, []);\n\n  React.useEffect(() => {\n    const a1 = runPulse(ring1, 0);\n    const a2 = runPulse(ring2, 500);\n    const a3 = runPulse(ring3, 1000);\n    a1.start();\n    a2.start();\n    a3.start();\n    return () => {\n      a1.stop();\n      a2.stop();\n      a3.stop();\n    };\n  }, [ring1, ring2, ring3, runPulse]);\n\n  const containerSize = size * 1.6;\n  const ringBaseStyle = {\n    width: containerSize,\n    height: containerSize,\n    borderRadius: containerSize / 2,\n    borderColor: color,\n  } as const;\n\n  const ringStyleFrom = (anim: Animated.Value) => ({\n    opacity: anim.interpolate({ inputRange: [0, 1], outputRange: [0.22, 0] }),\n    transform: [\n      {\n        scale: anim.interpolate({ inputRange: [0, 1], outputRange: [0.8, 1.35] }),\n      },\n    ],\n  });\n\n  return (\n    <View style={[styles.pulseContainer, { width: containerSize, height: containerSize }]}\n      pointerEvents=\"none\"\n      accessibilityElementsHidden>\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring1)]} />\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring2)]} />\n      <Animated.View style={[styles.ring, ringBaseStyle, ringStyleFrom(ring3)]} />\n      <Ionicons name=\"heart-outline\" size={size} color={color} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  pulseContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  ring: {\n    position: \"absolute\",\n    borderWidth: 1,\n  },\n});\n\n/**\n * BottomNavigator Component.\n *\n * This component sets up the main bottom tab navigation for the application.\n * It defines the screens accessible via the tab bar, their icons, and the\n * overall styling and behavior of the tab bar itself, including responsive\n * positioning and shadow effects.\n *\n * @returns {React.FC} A React component rendering the Bottom Tab Navigator.\n */\nexport default function BottomNavigator(): React.ReactElement {\n  const { isGuestMode, resetHomeScreen, isAdmin, refreshUserRoles, isAuthenticated } = useUser();\n  const { mode } = useWebMode();\n  const navigation = useNavigation();\n\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('BottomNavigator', 'Navigator focused');\n      // Refresh user roles when navigator comes into focus to detect admin changes\n      if (isAuthenticated && !isGuestMode) {\n        refreshUserRoles();\n      }\n    }, [isAuthenticated, isGuestMode, refreshUserRoles])\n  );\n\n\n\n  /**\n   * Helper function to determine the Ionicons name based on the route and focus state.\n   * @param {string} routeName - The name of the current route.\n   * @param {boolean} focused - True if the tab is currently focused.\n   * @returns {string} The Ionicons icon name (e.g., \"home\" or \"home-outline\").\n   */\n  const getTabBarIconName = (routeName: keyof BottomTabNavigatorParamList, focused: boolean): keyof typeof Ionicons.glyphMap => {\n    switch (routeName) {\n      case \"HomeScreen\":\n        return focused ? \"home\" : \"home-outline\";\n      case \"SearchTab\":\n        return focused ? \"search\" : \"search-outline\";\n      case \"DonationsTab\":\n        return focused ? \"heart\" : \"heart-outline\";\n      case \"ProfileScreen\":\n        return focused ? \"person\" : \"person-outline\";\n      case \"AdminTab\":\n        return focused ? \"shield\" : \"shield-outline\";\n      default:\n        return \"help-circle-outline\";\n    }\n  };\n\n  const getActiveNestedParams = (route: any): Record<string, any> | undefined => {\n    const state = route.state ?? route.params?.state;\n    if (!state) return route.params;\n    const nestedRoute = state.routes?.[state.index ?? 0];\n    if (nestedRoute) return getActiveNestedParams(nestedRoute);\n    return route.params;\n  };\n\n  // Map tab route names to their initial stack route names\n  const TAB_INITIAL_ROUTES: Record<string, string> = {\n    HomeScreen: 'HomeMain',\n    SearchTab: 'SearchScreen',\n    DonationsTab: 'DonationsScreen',\n    ProfileScreen: 'ProfileMain',\n    AdminTab: 'AdminDashboard',\n  };\n\n  const handleTabPress = (e: any, navigation: any, routeName: string) => {\n    // Only act if the tab is already focused\n    if (navigation.isFocused()) {\n      const initialRoute = TAB_INITIAL_ROUTES[routeName];\n      if (initialRoute) {\n        logger.debug('BottomNavigator', `Tab ${routeName} pressed while focused - resetting stack to ${initialRoute}`);\n\n        e.preventDefault();\n\n        // Special handling for Home logic (refresh/reset via store)\n        if (routeName === 'HomeScreen') {\n          resetHomeScreen();\n        }\n\n        // Perform a deep reset of the tab's stack\n        // This resets the Tab Navigator history to just this tab, with the stack reset to initial route\n        navigation.dispatch(CommonActions.reset({\n          index: 0,\n          routes: [{\n            name: routeName,\n            state: {\n              routes: [{ name: initialRoute }]\n            }\n          }]\n        }));\n      }\n    }\n  };\n\n  return (\n    <Tab.Navigator\n      id={undefined}\n      initialRouteName=\"HomeScreen\"\n      screenOptions={({ route }): BottomTabNavigationOptions => {\n        const activeParams = getActiveNestedParams(route as any) || {};\n        const hideBottomBar = activeParams.hideBottomBar === true;\n        const hideDueToSiteMode = (typeof window !== 'undefined' && mode === 'site');\n        const shouldHideTabBar = hideBottomBar || hideDueToSiteMode;\n        const { isTablet, isDesktop } = getScreenInfo();\n        const landscape = isLandscape();\n        const horizontalInset = isDesktop ? vw(20) : isTablet ? vw(10) : LAYOUT_CONSTANTS.SPACING.MD;\n        const barHeight = landscape ? 40 : (isDesktop ? 56 : isTablet ? 54 : 46);\n        return ({\n          headerShown: false,\n          tabBarIcon: ({ focused, color, size }: { focused: boolean; color: string; size: number; }) => {\n            if (route.name === \"DonationsTab\") {\n              return focused ? (\n                <Ionicons name=\"heart\" size={size} color={color} />\n              ) : (\n                <DonationsPulseIcon size={size} color={color} />\n              );\n            }\n            const iconName = getTabBarIconName(route.name, focused);\n            return <Ionicons name={iconName} size={size} color={color} />;\n          },\n          tabBarActiveTintColor: colors.bottomNavActive,\n          tabBarInactiveTintColor: colors.bottomNavInactive,\n          tabBarShowLabel: false,\n          tabBarStyle: {\n            position: \"absolute\",\n            left: horizontalInset,\n            right: horizontalInset,\n            borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.XLARGE,\n            elevation: LAYOUT_CONSTANTS.SHADOW.MEDIUM.elevation,\n            height: barHeight,\n            backgroundColor: colors.cardBackground,\n            display: shouldHideTabBar ? 'none' as const : 'flex' as const,\n          },\n        });\n      }}\n    >\n      {!isGuestMode && (\n        <Tab.Screen\n          name=\"ProfileScreen\"\n          component={ProfileTabStack}\n          listeners={({ navigation, route }) => ({\n            tabPress: (e) => handleTabPress(e, navigation, route.name),\n          })}\n        />\n      )}\n      <Tab.Screen\n        name=\"DonationsTab\"\n        component={DonationsStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n      <Tab.Screen\n        name=\"SearchTab\"\n        component={SearchTabStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n      {isAdmin && (\n        <Tab.Screen\n          name=\"AdminTab\"\n          component={AdminStack}\n          listeners={({ navigation, route }) => ({\n            tabPress: (e) => handleTabPress(e, navigation, route.name),\n          })}\n        />\n      )}\n      <Tab.Screen\n        name=\"HomeScreen\"\n        component={HomeTabStack}\n        listeners={({ navigation, route }) => ({\n          tabPress: (e) => handleTabPress(e, navigation, route.name),\n        })}\n      />\n\n    </Tab.Navigator>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/DonationsStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4499,4502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4499,4502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4546,4549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4546,4549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Stack navigator for the Donations tab and all donation categories.\n// - Reached from: `BottomNavigator` -> Tab 'DonationsTab'.\n// - Provides: Entry 'DonationsScreen' plus many category screens (money, time, knowledge, items, etc.).\n// - Header: Uses `TopBarNavigator`; can be hidden per-screen with route param `hideTopBar`.\n// - Params: Category screens typically have no required params; navigation is by route name.\n// - External deps: react-navigation stack, TopBarNavigator, category screens in `donationScreens/`.\nimport React from \"react\";\nimport { Platform } from \"react-native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport DonationsScreen from \"../bottomBarScreens/DonationsScreen\";\nimport MoneyScreen from \"../donationScreens/MoneyScreen\";\nimport TimeScreen from \"../donationScreens/TimeScreen\";\nimport KnowledgeScreen from \"../donationScreens/KnowledgeScreen\";\nimport TrumpScreen from \"../donationScreens/TrumpScreen\";\nimport FoodScreen from \"../donationScreens/FoodScreen\";\nimport ClothesScreen from \"../donationScreens/ClothesScreen\";\nimport BooksScreen from \"../donationScreens/BooksScreen\";\nimport FurnitureScreen from \"../donationScreens/FurnitureScreen\";\nimport MedicalScreen from \"../donationScreens/MedicalScreen\";\nimport AnimalsScreen from \"../donationScreens/AnimalsScreen\";\nimport HousingScreen from \"../donationScreens/HousingScreen\";\nimport SupportScreen from \"../donationScreens/SupportScreen\";\nimport EducationScreen from \"../donationScreens/EducationScreen\";\nimport EnvironmentScreen from \"../donationScreens/EnvironmentScreen\";\nimport TechnologyScreen from \"../donationScreens/TechnologyScreen\";\nimport MusicScreen from \"../donationScreens/MusicScreen\";\nimport GamesScreen from \"../donationScreens/GamesScreen\";\nimport RiddlesScreen from \"../donationScreens/RiddlesScreen\";\nimport RecipesScreen from \"../donationScreens/RecipesScreen\";\nimport PlantsScreen from \"../donationScreens/PlantsScreen\";\nimport WasteScreen from \"../donationScreens/WasteScreen\";\nimport ArtScreen from \"../donationScreens/ArtScreen\";\nimport SportsScreen from \"../donationScreens/SportsScreen\";\nimport ItemsScreen from \"../donationScreens/ItemsScreen\";\nimport CategoryScreen from \"../donationScreens/CategoryScreen\";\nimport DreamsScreen from \"../donationScreens/DreamsScreen\";\nimport FertilityScreen from \"../donationScreens/FertilityScreen\";\nimport JobsScreen from \"../donationScreens/JobsScreen\";\nimport MatchmakingScreen from \"../donationScreens/MatchmakingScreen\";\nimport MentalHealthScreen from \"../donationScreens/MentalHealthScreen\";\nimport GoldenAgeScreen from \"../donationScreens/GoldenAgeScreen\";\nimport LanguagesScreen from \"../donationScreens/LanguagesScreen\";\nimport CommunityChallengesScreen from \"../donationScreens/CommunityChallengesScreen\";\nimport ChallengeDetailsScreen from \"../screens/ChallengeDetailsScreen\";\nimport ChallengeStatisticsScreen from \"../screens/ChallengeStatisticsScreen\";\nimport MyChallengesScreen from \"../screens/MyChallengesScreen\";\nimport MyCreatedChallengesScreen from \"../screens/MyCreatedChallengesScreen\";\nimport ChatListScreen from \"../topBarScreens/ChatListScreen\";\nimport ChatDetailScreen from \"../screens/ChatDetailScreen\";\nimport NewChatScreen from \"../screens/NewChatScreen\";\nimport NotificationsScreen from \"../screens/NotificationsScreen\";\nimport AboutKarmaCommunityScreen from \"../topBarScreens/AboutKarmaCommunityScreen\";\nimport SettingsScreen from \"../topBarScreens/SettingsScreen\";\nimport DiscoverPeopleScreen from \"../screens/DiscoverPeopleScreen\";\nimport LandingSiteScreen from \"../screens/Landing/LandingSiteScreen\";\nimport TopBarNavigator from \"./TopBarNavigator\";\nimport { DonationsStackParamList } from \"../globals/types\";\nimport { logger } from \"../utils/loggerService\";\n\nconst Stack = createStackNavigator<DonationsStackParamList>();\n\nexport default function DonationsStack() {\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('DonationsStack', 'Navigator focused');\n      // This will trigger re-renders of child screens when needed\n    }, [])\n  );\n\n  return (\n    <Stack.Navigator\n      id={undefined}\n      initialRouteName=\"DonationsScreen\"\n      detachInactiveScreens={true}\n      screenOptions={({ navigation, route }) => ({\n        headerShown: true,\n        header: () => (\n          <TopBarNavigator\n            navigation={navigation as any}\n            hideTopBar={(route?.params as any)?.hideTopBar === true}\n          />\n        ),\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        // detachInactiveScreens already handles this, but we keep cardStyle for web compatibility\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n          // This prevents elements in hidden screens from receiving focus\n        } : undefined,\n      })}\n    >\n      <Stack.Screen name=\"DonationsScreen\" component={DonationsScreen} />\n      <Stack.Screen name=\"MoneyScreen\" component={MoneyScreen} />\n      <Stack.Screen name=\"ItemsScreen\" component={ItemsScreen} />\n      <Stack.Screen name=\"TimeScreen\" component={TimeScreen} />\n      <Stack.Screen name=\"KnowledgeScreen\" component={KnowledgeScreen} />\n      <Stack.Screen name=\"TrumpScreen\" component={TrumpScreen} />\n      <Stack.Screen name=\"CategoryScreen\" component={CategoryScreen} />\n      <Stack.Screen name=\"DreamsScreen\" component={DreamsScreen} />\n      <Stack.Screen name=\"FertilityScreen\" component={FertilityScreen} />\n      <Stack.Screen name=\"JobsScreen\" component={JobsScreen} />\n      <Stack.Screen name=\"MatchmakingScreen\" component={MatchmakingScreen} />\n      <Stack.Screen name=\"MentalHealthScreen\" component={MentalHealthScreen} />\n      <Stack.Screen name=\"GoldenAgeScreen\" component={GoldenAgeScreen} />\n      <Stack.Screen name=\"LanguagesScreen\" component={LanguagesScreen} />\n      {/* Category screens */}\n      <Stack.Screen name=\"FoodScreen\" component={FoodScreen} />\n      <Stack.Screen name=\"ClothesScreen\" component={ClothesScreen} />\n      <Stack.Screen name=\"BooksScreen\" component={BooksScreen} />\n      <Stack.Screen name=\"FurnitureScreen\" component={FurnitureScreen} />\n      <Stack.Screen name=\"MedicalScreen\" component={MedicalScreen} />\n      <Stack.Screen name=\"AnimalsScreen\" component={AnimalsScreen} />\n      <Stack.Screen name=\"HousingScreen\" component={HousingScreen} />\n      <Stack.Screen name=\"SupportScreen\" component={SupportScreen} />\n      <Stack.Screen name=\"EducationScreen\" component={EducationScreen} />\n      <Stack.Screen name=\"EnvironmentScreen\" component={EnvironmentScreen} />\n      <Stack.Screen name=\"TechnologyScreen\" component={TechnologyScreen} />\n      <Stack.Screen name=\"MusicScreen\" component={MusicScreen} />\n      <Stack.Screen name=\"GamesScreen\" component={GamesScreen} />\n      <Stack.Screen name=\"RiddlesScreen\" component={RiddlesScreen} />\n      <Stack.Screen name=\"RecipesScreen\" component={RecipesScreen} />\n      <Stack.Screen name=\"PlantsScreen\" component={PlantsScreen} />\n      <Stack.Screen name=\"WasteScreen\" component={WasteScreen} />\n      <Stack.Screen name=\"ArtScreen\" component={ArtScreen} />\n      <Stack.Screen name=\"SportsScreen\" component={SportsScreen} />\n      <Stack.Screen name=\"CommunityChallengesScreen\" component={CommunityChallengesScreen} />\n      <Stack.Screen name=\"ChallengeDetailsScreen\" component={ChallengeDetailsScreen} />\n      <Stack.Screen name=\"ChallengeStatisticsScreen\" component={ChallengeStatisticsScreen} />\n      <Stack.Screen name=\"MyChallengesScreen\" component={MyChallengesScreen} />\n      <Stack.Screen name=\"MyCreatedChallengesScreen\" component={MyCreatedChallengesScreen} />\n      <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n      <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n      <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n      <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n      <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n      <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n      <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n      <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n    </Stack.Navigator>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/HomeStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":3,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[106,109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[106,109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Deprecated: HomeStack ×”×•×—×œ×£ ×¢×œ ×™×“×™ Tab stacks. \nexport default function HomeStack() {\n  return null as any;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/HomeTabStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useFocusEffect' is defined but never used.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useFocusEffect"},"fix":{"range":[742,757],"text":""},"desc":"Remove unused variable \"useFocusEffect\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2498,2501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2498,2501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4770,4773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4770,4773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4817,4820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4817,4820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4885,4888],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4885,4888],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Stack navigator for the Home tab.\n// - Reached from: `BottomNavigator` -> Tab 'HomeScreen'.\n// - Provides: Custom header via `TopBarNavigator` that can be hidden with route param `hideTopBar`; initial route 'HomeMain'.\n// - Screens: HomeMain (HomeScreen), ChatList, ChatDetail, Notifications, About, Settings, Bookmarks, UserProfile, Followers, PostsReels (modal), WebView.\n// - Params of interest: `hideTopBar`, `showPosts` passed by HomeScreen to control header and content.\n// - External deps: react-navigation stack, TopBarNavigator wrapper.\nimport React, { useEffect, useRef } from 'react';\nimport { Platform } from 'react-native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { useFocusEffect, useNavigation, CommonActions } from '@react-navigation/native';\n\nimport HomeScreen from '../bottomBarScreens/HomeScreen';\nimport ChatListScreen from '../topBarScreens/ChatListScreen';\nimport ChatDetailScreen from '../screens/ChatDetailScreen';\nimport NewChatScreen from '../screens/NewChatScreen';\nimport NotificationsScreen from '../screens/NotificationsScreen';\nimport AboutKarmaCommunityScreen from '../topBarScreens/AboutKarmaCommunityScreen';\nimport SettingsScreen from '../topBarScreens/SettingsScreen';\nimport BookmarksScreen from '../screens/BookmarksScreen';\nimport PostsReelsScreenWrapper from '../components/PostsReelsScreenWrapper';\nimport WebViewScreen from '../screens/WebViewScreen';\nimport UserProfileScreen from '../screens/UserProfileScreen';\nimport FollowersScreen from '../screens/FollowersScreen';\nimport DiscoverPeopleScreen from '../screens/DiscoverPeopleScreen';\nimport LandingSiteScreen from '../screens/Landing/LandingSiteScreen';\n\nimport TopBarNavigator from './TopBarNavigator';\nimport { useWebMode } from '../stores/webModeStore';\nimport { logger } from '../utils/loggerService';\nimport { useUser } from '../stores/userStore';\nimport CommunityStatsScreen from '../screens/CommunityStatsScreen';\n\ntype HomeTabStackParamList = {\n  HomeMain: undefined;\n  LandingSiteScreen: undefined;\n  ChatListScreen: undefined;\n  ChatDetailScreen: { chatId?: string } | undefined;\n  NewChatScreen: undefined;\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  SettingsScreen: undefined;\n  BookmarksScreen: undefined;\n  PostsReelsScreen: undefined;\n  CommunityStatsScreen: undefined;\n  WebViewScreen: { url?: string } | undefined;\n  UserProfileScreen: { userId: string; userName: string; characterData?: any } | undefined;\n  FollowersScreen: { userId?: string } | undefined;\n  DiscoverPeopleScreen: undefined;\n};\n\nconst Stack = createStackNavigator<HomeTabStackParamList>();\n\nexport default function HomeTabStack(): React.ReactElement {\n  const { mode } = useWebMode();\n  const { resetHomeScreenTrigger } = useUser();\n  const navigation = useNavigation();\n  const previousTriggerRef = useRef(resetHomeScreenTrigger);\n\n  // Determine initial route based on web mode\n  const initialRouteName = (typeof window !== 'undefined' && mode === 'site')\n    ? \"LandingSiteScreen\"\n    : \"HomeMain\";\n\n  logger.debug('HomeTabStack', 'Rendering with initial route', { initialRouteName, mode, resetHomeScreenTrigger });\n\n  // Listen to resetHomeScreenTrigger and reset navigation to HomeMain\n  useEffect(() => {\n    // Only act if trigger actually changed (not on initial mount)\n    if (previousTriggerRef.current !== resetHomeScreenTrigger && resetHomeScreenTrigger > 0) {\n      logger.debug('HomeTabStack', 'resetHomeScreenTrigger changed, resetting to HomeMain', {\n        previousTrigger: previousTriggerRef.current,\n        currentTrigger: resetHomeScreenTrigger,\n        platform: Platform.OS\n      });\n\n      try {\n        // Reset navigation stack to HomeMain\n        navigation.dispatch(\n          CommonActions.reset({\n            index: 0,\n            routes: [{ name: 'HomeMain' }],\n          })\n        );\n\n        logger.debug('HomeTabStack', 'Navigation reset to HomeMain completed', {\n          platform: Platform.OS,\n          trigger: resetHomeScreenTrigger\n        });\n      } catch (error) {\n        logger.error('HomeTabStack', 'Error resetting navigation to HomeMain', {\n          error,\n          platform: Platform.OS,\n          trigger: resetHomeScreenTrigger\n        });\n      }\n\n      // Update ref to current trigger value\n      previousTriggerRef.current = resetHomeScreenTrigger;\n    }\n  }, [resetHomeScreenTrigger, navigation]);\n\n  return (\n    <Stack.Navigator\n      id=\"HomeTabStack\"\n      initialRouteName={initialRouteName as keyof HomeTabStackParamList}\n      detachInactiveScreens={true}\n      screenOptions={({ navigation, route }) => ({\n        headerShown: true,\n        header: () => (\n          <TopBarNavigator\n            navigation={navigation as any}\n            hideTopBar={(route?.params as any)?.hideTopBar === true}\n            showPosts={(route?.params as any)?.showPosts === true}\n          />\n        ),\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        // detachInactiveScreens already handles this, but we keep cardStyle for web compatibility\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n          // This prevents elements in hidden screens from receiving focus\n        } : undefined,\n      })}\n    >\n      <Stack.Screen name=\"HomeMain\" component={HomeScreen} />\n      <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n      <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n      <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n      <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n      <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n      <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n      <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n      <Stack.Screen name=\"BookmarksScreen\" component={BookmarksScreen} />\n      <Stack.Screen name=\"UserProfileScreen\" component={UserProfileScreen} />\n      <Stack.Screen name=\"FollowersScreen\" component={FollowersScreen} />\n      <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n      <Stack.Screen name=\"CommunityStatsScreen\" component={CommunityStatsScreen} />\n      <Stack.Screen\n        name=\"PostsReelsScreen\"\n        component={PostsReelsScreenWrapper}\n        options={{\n          presentation: 'transparentModal',\n          cardStyle: { backgroundColor: 'transparent' },\n          headerShown: false,\n        }}\n      />\n      <Stack.Screen name=\"WebViewScreen\" component={WebViewScreen} options={{ headerShown: false }} />\n    </Stack.Navigator>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/MainNavigator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4036,4039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4036,4039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4148,4151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4148,4151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4560,4563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4560,4563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4607,4610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4607,4610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":144,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":144,"endColumn":68,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Root stack navigator controlling auth vs app flows, with web mode support.\n// - Reached from: `App.tsx` renders `<MainNavigator />` inside `NavigationContainer`.\n// - Provides: Stack with routes that depend on authentication and web mode:\n//   * Authenticated: Shows 'HomeStack' (BottomNavigator tabs) and other protected screens.\n//   * Unauthenticated (Site Mode): Shows 'LandingSiteScreen' as entry point.\n//   * Unauthenticated (App Mode): Shows 'LoginScreen' as entry point.\n// - Decides: conditionally renders screens based on `useUser()` state (`isAuthenticated`, `isGuestMode`).\n// - Downstream flows:\n//   - LandingSiteScreen -> toggle to app mode -> Login/Home\n//   - LoginScreen -> on success/guest: state updates -> re-render allows 'HomeStack'.\n// - External deps: react-navigation stack, i18n for titles, shared colors/styles.\n\nimport React, { useEffect, useMemo } from 'react';\nimport { View, ActivityIndicator, Text, Platform } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport BottomNavigator from \"./BottomNavigator\";\nimport WebViewScreen from \"../screens/WebViewScreen\";\nimport PostsReelsScreenWrapper from \"../components/PostsReelsScreenWrapper\";\nimport BookmarksScreen from \"../screens/BookmarksScreen\";\n// Removed UserProfileScreen import - it should only be accessed via HomeTabStack or SearchTabStack\nimport FollowersScreen from \"../screens/FollowersScreen\";\nimport DiscoverPeopleScreen from \"../screens/DiscoverPeopleScreen\";\nimport LoginScreen from \"../screens/LoginScreen\";\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport styles from '../globals/styles';\nimport NewChatScreen from '../screens/NewChatScreen';\nimport ChatDetailScreen from '../screens/ChatDetailScreen';\nimport SettingsScreen from '../topBarScreens/SettingsScreen';\nimport ChatListScreen from '../topBarScreens/ChatListScreen';\nimport NotificationsScreen from '../screens/NotificationsScreen';\nimport AboutKarmaCommunityScreen from '../topBarScreens/AboutKarmaCommunityScreen';\nimport OrgOnboardingScreen from '../screens/OrgOnboardingScreen';\nimport AdminOrgApprovalsScreen from '../screens/AdminOrgApprovalsScreen';\nimport OrgDashboardScreen from '../screens/OrgDashboardScreen';\nimport EditProfileScreen from '../screens/EditProfileScreen';\nimport LandingSiteScreen from '../screens/Landing/LandingSiteScreen';\nimport AdminDashboardScreen from '../screens/AdminDashboardScreen';\nimport { useWebMode } from '../stores/webModeStore';\nimport { logger } from '../utils/loggerService';\nimport TopBarNavigator from './TopBarNavigator';\n\nimport { RootStackParamList } from '../globals/types';\n\nconst Stack = createStackNavigator<RootStackParamList>();\n\nexport default function MainNavigator() {\n  const { selectedUser, isLoading, isGuestMode, isAuthenticated } = useUser();\n  const { t } = useTranslation(['common', 'profile']);\n  const { mode } = useWebMode();\n\n  // Log render state for debugging\n  useEffect(() => {\n    logger.debug('MainNavigator', 'Render state', {\n      selectedUser: selectedUser?.name || 'null',\n      isLoading,\n      isGuestMode,\n      isAuthenticated,\n      mode,\n    });\n  }, [selectedUser, isLoading, isGuestMode, isAuthenticated, mode]);\n\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('MainNavigator', 'Navigator focused');\n    }, [])\n  );\n\n  // Stack Navigator key - only change when mode changes, or authentication state toggles major branches\n  // This helps ensure clean transitions between Auth and Unauth states\n  const stackKey = useMemo(() => `stack-${mode}-${isAuthenticated || isGuestMode ? 'auth' : 'unauth'}`, [mode, isAuthenticated, isGuestMode]);\n\n  // Loading screen\n  if (isLoading) {\n    logger.debug('MainNavigator', 'Showing loading screen');\n    return (\n      <View style={styles.centeredScreen as any}>\n        <ActivityIndicator size=\"large\" color={colors.info} />\n        <Text style={styles.loadingText as any}>{t('common:loading')}</Text>\n      </View>\n    );\n  }\n\n  return (\n    <Stack.Navigator\n      key={stackKey}\n      id={undefined}\n      detachInactiveScreens={true}\n      screenOptions={({ navigation, route }) => ({\n        headerShown: route.name === 'AdminDashboard' ? true : false,\n        header: route.name === 'AdminDashboard' ? () => (\n          <TopBarNavigator\n            navigation={navigation as any}\n            hideTopBar={(route?.params as any)?.hideTopBar === true}\n          />\n        ) : undefined,\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n        } : undefined,\n      })}\n    >\n      {isAuthenticated || isGuestMode ? (\n        // ==================================================================\n        // AUTHENTICATED STACK\n        // Screens available only to logged-in users or guests\n        // ==================================================================\n        <Stack.Group>\n          <Stack.Screen name=\"HomeStack\" component={BottomNavigator} />\n\n          <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n          <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n\n          <Stack.Screen name=\"WebViewScreen\" component={WebViewScreen} />\n\n          <Stack.Screen\n            name=\"PostsReelsScreen\"\n            component={PostsReelsScreenWrapper}\n            options={{\n              cardStyle: { backgroundColor: 'transparent' },\n              presentation: 'transparentModal',\n            }}\n          />\n\n          <Stack.Screen\n            name=\"BookmarksScreen\"\n            component={BookmarksScreen}\n            options={{\n              title: t('profile:menu.bookmarks'),\n              headerTitleAlign: 'center',\n              headerShown: true,\n            }}\n          />\n\n          {/* Removed UserProfileScreen from MainNavigator - it should only be accessed via HomeTabStack or SearchTabStack \n              to ensure bottom bar and top bar remain visible */}\n          <Stack.Screen\n            name=\"UserProfileScreen\"\n            // eslint-disable-next-line @typescript-eslint/no-require-imports\n            component={require('../bottomBarScreens/ProfileScreen').default}\n          />\n          <Stack.Screen name=\"FollowersScreen\" component={FollowersScreen} />\n          <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n\n          {/* Top Bar Screens accessible from HomeTabStack headers */}\n          <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n          <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n          <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n          <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n\n          {/* Org & Admin Screens */}\n          <Stack.Screen name=\"AdminOrgApprovalsScreen\" component={AdminOrgApprovalsScreen} />\n          <Stack.Screen name=\"OrgDashboardScreen\" component={OrgDashboardScreen} />\n          <Stack.Screen name=\"EditProfileScreen\" component={EditProfileScreen} />\n          <Stack.Screen name=\"AdminDashboard\" component={AdminDashboardScreen} />\n        </Stack.Group>\n      ) : (\n        // ==================================================================\n        // UNAUTHENTICATED STACK\n        // Screens available to users who are NOT logged in\n        // ==================================================================\n        <Stack.Group>\n          {/* In site mode, LandingSiteScreen is the entry point */}\n          {Platform.OS === 'web' && mode === 'site' ? (\n            <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n          ) : null}\n\n          {/* In app mode (or if site mode landing navigates here), LoginScreen is main */}\n          <Stack.Screen name=\"LoginScreen\" component={LoginScreen} />\n\n          {/* Org Onboarding is part of the sign-up flow */}\n          <Stack.Screen name=\"OrgOnboardingScreen\" component={OrgOnboardingScreen} />\n\n          {/* Legacy mapping for removed screen */}\n          <Stack.Screen name=\"InactiveScreen\" component={LoginScreen} />\n        </Stack.Group>\n      )}\n    </Stack.Navigator>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/ProfileTabStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2427,2430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2427,2430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Stack navigator for the Profile tab.\n// - Reached from: `BottomNavigator` -> Tab 'ProfileScreen' (hidden when guest mode is active).\n// - Provides: Routes for Profile, Settings, ChatList, Notifications, About.\n// - Header: Uses `TopBarNavigator` for a consistent top bar across the app.\n// - Params: None for initial route; other screens use their own optional params.\n// - External deps: react-navigation stack, TopBarNavigator, common top-bar screens.\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { useFocusEffect } from '@react-navigation/native';\n\nimport ProfileScreen from '../bottomBarScreens/ProfileScreen';\nimport SettingsScreen from '../topBarScreens/SettingsScreen';\nimport ChatListScreen from '../topBarScreens/ChatListScreen';\nimport ChatDetailScreen from '../screens/ChatDetailScreen';\nimport NewChatScreen from '../screens/NewChatScreen';\nimport NotificationsScreen from '../screens/NotificationsScreen';\nimport AboutKarmaCommunityScreen from '../topBarScreens/AboutKarmaCommunityScreen';\nimport DiscoverPeopleScreen from '../screens/DiscoverPeopleScreen';\nimport EditProfileScreen from '../screens/EditProfileScreen';\nimport LandingSiteScreen from '../screens/Landing/LandingSiteScreen';\nimport TopBarNavigator from './TopBarNavigator';\nimport { logger } from '../utils/loggerService';\nimport { useUser } from '../stores/userStore';\n\ntype ProfileTabStackParamList = {\n  ProfileMain: { userId?: string } | undefined;\n  SettingsScreen: undefined;\n  ChatListScreen: undefined;\n  ChatDetailScreen: { chatId?: string } | undefined;\n  NewChatScreen: undefined;\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  LandingSiteScreen: undefined;\n  DiscoverPeopleScreen: undefined;\n  EditProfileScreen: undefined;\n};\n\nconst Stack = createStackNavigator<ProfileTabStackParamList>();\n\nexport default function ProfileTabStack(): React.ReactElement {\n  const { selectedUser } = useUser();\n\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('ProfileTabStack', 'Navigator focused');\n    }, [])\n  );\n\n  return (\n    <Stack.Navigator\n      id={undefined}\n      initialRouteName=\"ProfileMain\"\n      detachInactiveScreens={true}\n      screenOptions={({ navigation }) => ({\n        headerShown: true,\n        header: () => <TopBarNavigator navigation={navigation as any} />,\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        // detachInactiveScreens already handles this, but we keep cardStyle for web compatibility\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n          // This prevents elements in hidden screens from receiving focus\n        } : undefined,\n      })}\n    >\n      <Stack.Screen\n        name=\"ProfileMain\"\n        component={ProfileScreen}\n        initialParams={selectedUser?.id ? { userId: selectedUser.id } : undefined}\n      />\n      <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n      <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n      <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n      <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n      <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n      <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n      <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n      <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n      <Stack.Screen name=\"EditProfileScreen\" component={EditProfileScreen} />\n    </Stack.Navigator>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/SearchTabStack.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2453,2456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2453,2456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Stack navigator for the Search tab.\n// - Reached from: `BottomNavigator` -> Tab 'SearchTab'.\n// - Provides: Routes for Search, UserProfile, Followers, DiscoverPeople, ChatList, Notifications, About, Settings.\n// - Header: Replaces default header with `TopBarNavigator`.\n// - Params of interest: Optional `userId` for profile/followers; no initial params for Search.\n// - External deps: react-navigation stack, TopBarNavigator, shared screens.\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { useFocusEffect } from '@react-navigation/native';\n\nimport SearchScreen from '../bottomBarScreens/SearchScreen';\nimport UserProfileScreen from '../screens/UserProfileScreen';\nimport FollowersScreen from '../screens/FollowersScreen';\nimport DiscoverPeopleScreen from '../screens/DiscoverPeopleScreen';\nimport ChatListScreen from '../topBarScreens/ChatListScreen';\nimport ChatDetailScreen from '../screens/ChatDetailScreen';\nimport NewChatScreen from '../screens/NewChatScreen';\nimport NotificationsScreen from '../screens/NotificationsScreen';\nimport AboutKarmaCommunityScreen from '../topBarScreens/AboutKarmaCommunityScreen';\nimport SettingsScreen from '../topBarScreens/SettingsScreen';\nimport LandingSiteScreen from '../screens/Landing/LandingSiteScreen';\nimport TopBarNavigator from './TopBarNavigator';\nimport { logger } from '../utils/loggerService';\n\ntype SearchTabStackParamList = {\n  SearchScreen: { q?: string } | undefined;\n  UserProfileScreen: { userId?: string } | undefined;\n  FollowersScreen: { userId?: string } | undefined;\n  DiscoverPeopleScreen: undefined;\n  ChatListScreen: undefined;\n  ChatDetailScreen: { chatId?: string } | undefined;\n  NewChatScreen: undefined;\n  NotificationsScreen: undefined;\n  AboutKarmaCommunityScreen: undefined;\n  LandingSiteScreen: undefined;\n  SettingsScreen: undefined;\n};\n\nconst Stack = createStackNavigator<SearchTabStackParamList>();\n\nexport default function SearchTabStack(): React.ReactElement {\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('SearchTabStack', 'Navigator focused');\n    }, [])\n  );\n\n  return (\n    <Stack.Navigator\n      id={undefined}\n      initialRouteName=\"SearchScreen\"\n      detachInactiveScreens={true}\n      screenOptions={({ navigation }) => ({\n        headerShown: true,\n        header: () => <TopBarNavigator navigation={navigation as any} />,\n        // Fix for aria-hidden warning: prevent focus on inactive screens\n        // detachInactiveScreens already handles this, but we keep cardStyle for web compatibility\n        cardStyle: Platform.OS === 'web' ? {\n          // On web, ensure inactive screens don't interfere with focus\n          // This prevents elements in hidden screens from receiving focus\n        } : undefined,\n      })}\n    >\n      <Stack.Screen name=\"SearchScreen\" component={SearchScreen} />\n      <Stack.Screen name=\"UserProfileScreen\" component={UserProfileScreen} />\n      <Stack.Screen name=\"FollowersScreen\" component={FollowersScreen} />\n      <Stack.Screen name=\"DiscoverPeopleScreen\" component={DiscoverPeopleScreen} />\n      <Stack.Screen name=\"ChatListScreen\" component={ChatListScreen} />\n      <Stack.Screen name=\"ChatDetailScreen\" component={ChatDetailScreen} />\n      <Stack.Screen name=\"NewChatScreen\" component={NewChatScreen} />\n      <Stack.Screen name=\"NotificationsScreen\" component={NotificationsScreen} />\n      <Stack.Screen name=\"AboutKarmaCommunityScreen\" component={AboutKarmaCommunityScreen} />\n      <Stack.Screen name=\"LandingSiteScreen\" component={LandingSiteScreen} />\n      <Stack.Screen name=\"SettingsScreen\" component={SettingsScreen} />\n    </Stack.Navigator>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/navigations/TopBarNavigator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'rowDirection' is defined but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"rowDirection"},"fix":{"range":[1275,1329],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2269,2272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2269,2272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4441,4444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4441,4444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9435,9438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9435,9438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9526,9529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9526,9529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Shared top navigation bar component for stacks; shows title and quick actions (Settings, Notifications, Chat/About).\n// - Reached from: `HomeTabStack`, `SearchTabStack`, `ProfileTabStack`, `DonationsStack` as a custom header.\n// - Inputs: Props `hideTopBar` and `showPosts`; also reads `route.params.hideTopBar`. Title resolves by current route with i18n.\n// - Reads from context: `useUser()` for guest mode to toggle Chat/About icon.\n// - Side effects: Logs focus and state changes via `logger`; animates show/hide with Reanimated.\nimport React from 'react';\nimport styles from '../globals/styles'; // your styles file\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { View, Text, TouchableOpacity, StyleProp, ViewStyle, TextStyle } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { NavigationProp, ParamListBase, StackActions } from '@react-navigation/native';\nimport { useRoute, useFocusEffect, useNavigationState } from '@react-navigation/native';\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport colors from '../globals/colors';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { rowDirection } from '../globals/responsive';\nimport { useTranslation } from 'react-i18next';\nimport AboutButton from '../components/AboutButton';\nimport { useUnreadNotificationsCount } from '../hooks/useUnreadNotificationsCount';\n\n\ninterface TopBarNavigatorProps {\n  navigation: NavigationProp<ParamListBase>;\n  hideTopBar?: boolean;\n  showPosts?: boolean;\n}\n\nfunction TopBarNavigator({ navigation, hideTopBar = false, showPosts = false }: TopBarNavigatorProps) {\n  const { t } = useTranslation(['home', 'common', 'settings', 'donations', 'notifications', 'profile']);\n\n  const route = useRoute();\n  const { isGuestMode } = useUser();\n  const unreadCount = useUnreadNotificationsCount();\n  const translateY = useSharedValue(0);\n  const [measuredHeight, setMeasuredHeight] = React.useState(56);\n\n  // Get the current active route name from navigation state\n  const activeRouteName = useNavigationState(state => {\n    if (!state) return 'HomeMain';\n\n    const findActiveRoute = (routes: any[], index: number): string => {\n      const currentRoute = routes[index];\n      if (currentRoute?.state?.routes) {\n        // This route has nested navigation, go deeper\n        return findActiveRoute(currentRoute.state.routes, currentRoute.state.index || 0);\n      }\n      return currentRoute?.name || 'HomeMain';\n    };\n\n    return findActiveRoute(state.routes, state.index || 0);\n  });\n\n  // List of top bar screens that should be mutually exclusive\n  const topBarScreens = ['SettingsScreen', 'NotificationsScreen', 'ChatListScreen', 'LandingSiteScreen'];\n\n  // Handler for toggling screens (open if closed, close if open)\n  // Only one top bar screen can be open at a time\n  const handleScreenToggle = (screenName: string) => {\n    // Get current route name for comparison\n    const currentRoute = activeRouteName || route.name;\n\n    if (currentRoute === screenName) {\n      // Screen is open, close it by going back\n      if (navigation.canGoBack()) {\n        navigation.goBack();\n      }\n    } else {\n      // Check if any other top bar screen is currently open\n      const otherTopBarScreenOpen = topBarScreens.find(\n        screen => screen !== screenName && currentRoute === screen\n      );\n\n      if (otherTopBarScreenOpen) {\n        // Another top bar screen is open, replace it with the new screen\n        // This ensures only one top bar screen is open at a time\n        navigation.dispatch(\n          StackActions.replace(screenName, {})\n        );\n      } else {\n        // No other top bar screen is open, navigate to the new screen\n        navigation.navigate(screenName as never);\n      }\n    }\n  };\n\n  // Log render for debugging\n  React.useEffect(() => {\n    logger.debug('TopBarNavigator', 'Component rendered', {\n      routeName: route.name,\n      isGuestMode,\n    });\n  }, [route.name, isGuestMode]);\n\n  // Refresh data when navigator comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      logger.debug('TopBarNavigator', 'Navigator focused', { routeName: route.name });\n    }, [route.name])\n  );\n\n  ////console.log('ğŸ” TopBarNavigator - hideTopBar prop:', hideTopBar);\n\n  const shouldHideTopBar = hideTopBar || (route?.params as any)?.hideTopBar === true;\n\n  React.useEffect(() => {\n    translateY.value = withTiming(shouldHideTopBar ? -measuredHeight : 0, { duration: 200 });\n  }, [shouldHideTopBar, measuredHeight]);\n\n\n\n  const animatedStyle = useAnimatedStyle(() => {\n    //console.log('ğŸ” TopBarNavigator - translateY value:', translateY.value);\n    return {\n      transform: [{ translateY: translateY.value }],\n    };\n  });\n\n  // Debug logs\n  //console.log('ğŸ” TopBarNavigator - Current route name:', route.name);\n  //console.log('ğŸ” TopBarNavigator - Route params:', route.params);\n  //console.log('ğŸ” TopBarNavigator - Route key:', route.key);\n  //console.log('ğŸ” TopBarNavigator - Full route object:', JSON.stringify(route, null, 2));\n\n  // Map route names to titles using translations\n  const routeTitles: Record<string, string> = {\n    SearchTab: t('common:search'),\n    SearchScreen: t('common:search'),\n    DonationsTab: t('donations:title'),\n    DonationsScreen: t('donations:title'),\n    ProfileScreen: t('profile:title'),\n    LandingSiteScreen: '××•×“×•×ª ×”×§×”×™×œ×”',\n\n    MoneyScreen: t('donations:categories.money.title'),\n    TrumpScreen: t('donations:categories.trump.title'),\n    KnowledgeScreen: t('donations:categories.knowledge.title'),\n    TimeScreen: t('donations:categories.time.title'),\n    CategoryScreen: t('donations:categoriesTitle'),\n    ItemsScreen: t('donations:categories.items.title'),\n    FoodScreen: t('donations:categories.food.title'),\n    ClothesScreen: t('donations:categories.clothes.title'),\n    BooksScreen: t('donations:categories.books.title'),\n    FurnitureScreen: t('donations:categories.furniture.title'),\n    MedicalScreen: t('donations:categories.medical.title'),\n    AnimalsScreen: t('donations:categories.animals.title'),\n    HousingScreen: t('donations:categories.housing.title'),\n    SupportScreen: t('donations:categories.support.title'),\n    EducationScreen: t('donations:categories.education.title'),\n    EnvironmentScreen: t('donations:categories.environment.title'),\n    TechnologyScreen: t('donations:categories.technology.title'),\n    MusicScreen: t('donations:categories.music.title'),\n    GamesScreen: t('donations:categories.games.title'),\n    RiddlesScreen: t('donations:categories.riddles.title'),\n    RecipesScreen: t('donations:categories.recipes.title'),\n    PlantsScreen: t('donations:categories.plants.title'),\n    WasteScreen: t('donations:categories.waste.title'),\n    ArtScreen: t('donations:categories.art.title'),\n    SportsScreen: t('donations:categories.sports.title'),\n    DreamsScreen: t('donations:categories.dreams.title'),\n    FertilityScreen: t('donations:categories.fertility.title'),\n    JobsScreen: t('donations:categories.jobs.title'),\n    DiscoverPeopleScreen: t('profile:discover'),\n    NewChatScreen: t('common:newChat'),\n    SettingsScreen: t('settings:title'),\n    ChatListScreen: t('chat:title'),\n    NotificationsScreen: t('notifications:title'),\n    AboutKarmaCommunityScreen: t('settings:about'),\n\n    UserProfileScreen: t('profile:title'),\n    FollowersScreen: t('profile:followers'),\n    ChatDetailScreen: t('common:chat'),\n    BookmarksScreen: t('common:favorites'),\n    PostsReelsScreen: t('common:posts'),\n    InactiveScreen: t('common:inactive'),\n    WebViewScreen: t('common:web'),\n    LoginScreen: t('auth:login'),\n  };\n\n  // Get current route name\n  const currentRouteName = activeRouteName || route.name;\n\n  // Determine title based on current route\n  let title = 'KC';\n\n  if (currentRouteName === 'HomeScreen' || currentRouteName === 'HomeMain') {\n    title = showPosts ? t('home:newsTitle') : t('home:numbersTitle');\n  } else {\n    // Use the routeTitles mapping for all other screens\n    title = routeTitles[currentRouteName] ?? 'KC';\n  }\n\n  // Log important state changes\n  React.useEffect(() => {\n    logger.logUserAction('state-change', 'TopBarNavigator', {\n      currentRouteName,\n      activeRouteName,\n      title,\n      isGuestMode,\n      hideTopBar,\n      showPosts\n    });\n  }, [title, currentRouteName, activeRouteName, showPosts, hideTopBar, isGuestMode]);\n\n\n  return (\n    <SafeAreaView edges={['top']} style={{ backgroundColor: 'transparent' }}>\n      <Animated.View\n        style={[styles.container_top_bar as StyleProp<ViewStyle>, animatedStyle]}\n        onLayout={(e) => setMeasuredHeight(e.nativeEvent.layout.height)}\n      >\n\n        <View style={styles.topBarIconsRow as StyleProp<ViewStyle>}>\n          <TouchableOpacity onPress={() => handleScreenToggle('SettingsScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n            <Icon name=\"settings-outline\" size={24} color={colors.black} />\n          </TouchableOpacity>\n          <TouchableOpacity onPress={() => handleScreenToggle('NotificationsScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n            <View style={{ position: 'relative' }}>\n              <Icon name=\"notifications-circle-outline\" size={24} color={colors.black} />\n              {unreadCount > 0 && (\n                <View style={(styles as any).notificationBadge as StyleProp<ViewStyle>}>\n                  <Text style={(styles as any).notificationBadgeText as StyleProp<TextStyle>}>\n                    {unreadCount > 99 ? '99+' : unreadCount}\n                  </Text>\n                </View>\n              )}\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Title */}\n        <View style={styles.topBarTitleContainer as StyleProp<ViewStyle>}>\n          <Text style={styles.topBarTitle as StyleProp<TextStyle>}>{title}</Text>\n        </View>\n        {/* Left Icons Group: Notifications + Settings */}\n\n        {/* Right Icons Group: Chat + About (for authenticated users) OR About only (for guests) */}\n        {/* \n        About button is now available in both guest and authenticated modes:\n        - Guest mode: Shows only About button (replaces Chat button)\n        - Authenticated mode: Shows both Chat and About buttons\n        This provides consistent access to About information across all user states.\n      */}\n        <View style={styles.topBarIconsRow as StyleProp<ViewStyle>}>\n          {isGuestMode ? (\n            // Guest mode: Show only About button\n            <AboutButton\n              style={styles.topBarIconButton as StyleProp<ViewStyle>}\n              onPress={() => handleScreenToggle('LandingSiteScreen')}\n              iconColor={colors.black}\n            />\n          ) : (\n            // Authenticated mode: Show both Chat and About buttons\n            <>\n              <TouchableOpacity onPress={() => handleScreenToggle('ChatListScreen')} style={styles.topBarIconButton as StyleProp<ViewStyle>}>\n                <Icon name=\"chatbubbles-outline\" size={24} color={colors.black} />\n              </TouchableOpacity>\n              <AboutButton\n                style={styles.topBarIconButton as StyleProp<ViewStyle>}\n                onPress={() => handleScreenToggle('LandingSiteScreen')}\n                iconColor={colors.black}\n              />\n            </>\n          )}\n        </View>\n      </Animated.View>\n    </SafeAreaView>\n  );\n}\n\nexport default TopBarNavigator;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/polyfills/tslib-default.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[422,425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[422,425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[439,442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[439,442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Ensures that consumers expecting a default export from 'tslib'\n// (e.g., transpiled vendor ESM with default import) will work under Metro/Babel.\n// Some bundles access `_tslib.default.__extends` which would be undefined\n// if the environment returns the namespace object without a default.\n// We safely assign `default` to the namespace when missing.\nimport * as tslibNS from 'tslib';\nexport * from 'tslib';\n\nconst ns: any = tslibNS as any;\nif (ns && typeof ns === 'object' && (!('default' in ns) || !ns.default)) {\n  ns.default = ns;\n}\n\nexport default ns;\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminAdminsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":32,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1048,1051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1048,1051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1230,1233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1230,1233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1613,1616],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1613,1616],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1674,1677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1674,1677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1965,1968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1965,1968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2347,2350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2347,2350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3382,3385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3382,3385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3598,3601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3598,3601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5956,5959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5956,5959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7210,7213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7210,7213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8343,8346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8343,8346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":296,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12044,12047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12044,12047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'removeManager' is assigned a value but never used.","line":377,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":377,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":407,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":407,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16706,16709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16706,16709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":459,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":459,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19233,19236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19233,19236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":474,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19857,19860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19857,19860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":555,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":555,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24123,24126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24123,24126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":571,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":571,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24829,24832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24829,24832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":574,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":574,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24995,24998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24995,24998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isSameUser' is assigned a value but never used.","line":648,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":648,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":871,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":871,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[42872,42875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[42872,42875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":872,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":872,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[42908,42911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[42908,42911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":878,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":878,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43037,43040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43037,43040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":879,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":879,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43090,43093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43090,43093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    TouchableOpacity,\n    Alert,\n    RefreshControl,\n    ActivityIndicator,\n    TextInput,\n    Platform,\n    FlatList,\n    Modal,\n    SafeAreaView,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminAdminsScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\nconst LOG_SOURCE = 'AdminAdminsScreen';\n\nexport default function AdminAdminsScreen({ navigation }: AdminAdminsScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const [usersList, setUsersList] = useState<any[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [activeTab, setActiveTab] = useState<'admins' | 'volunteers' | 'users'>('admins');\n\n    // Manager Assignment State\n    const [showManagerModal, setShowManagerModal] = useState(false);\n    const [selectedForManager, setSelectedForManager] = useState<any>(null);\n    const [newManager, setNewManager] = useState<any>(null);\n    const [isRemovingManager, setIsRemovingManager] = useState(false);\n\n    // Store eligible users separately\n    const [eligibleUsers, setEligibleUsers] = useState<any[]>([]);\n\n    // Store all managers for manager assignment\n    const [allManagers, setAllManagers] = useState<any[]>([]);\n\n    useEffect(() => {\n        loadUsers();\n    }, [searchQuery, selectedUser?.id]);\n\n    const loadUsers = async (forceRefresh: boolean = false) => {\n        if (!selectedUser?.id) {\n            console.log('[AdminAdminsScreen] No selectedUser.id, skipping load');\n            return;\n        }\n\n        try {\n            setIsLoading(true);\n            const filters: any = { limit: 100 };\n            if (searchQuery.trim()) {\n                filters.search = searchQuery.trim();\n            }\n\n            // Force refresh after admin operations to ensure fresh data\n            if (forceRefresh) {\n                filters.forceRefresh = true;\n                console.log('[AdminAdminsScreen] ğŸ”„ FORCE REFRESH - Loading users with filters:', filters);\n            } else {\n                console.log('[AdminAdminsScreen] ğŸ”„ Loading users with filters:', filters);\n            }\n\n            // Load all users for display\n            const response = await apiService.getUsers(filters);\n\n            console.log('[AdminAdminsScreen] ğŸ“¡ Response from getUsers:', {\n                success: response.success,\n                dataLength: response.data?.length,\n                error: response.error\n            });\n\n            if (response.success && Array.isArray(response.data)) {\n                // Keep only other users (not current user)\n                const otherUsers = response.data.filter((u: any) => u.email !== selectedUser?.email);\n                setUsersList(otherUsers);\n\n                // Extract managers from the list (admins + super admin)\n                const managers = response.data.filter((u: any) => {\n                    const roles = u.roles || [];\n                    return roles.includes('admin') || roles.includes('super_admin') || u.email === 'navesarussi@gmail.com';\n                });\n                setAllManagers(managers);\n\n                console.log(`[AdminAdminsScreen] âœ… Loaded ${otherUsers.length} users, ${managers.length} managers`);\n                console.log(`[AdminAdminsScreen] ğŸ“Š Sample user data:`, otherUsers.slice(0, 2).map(u => ({\n                    id: u.id,\n                    name: u.name,\n                    email: u.email,\n                    roles: u.roles,\n                    parent_manager_id: u.parent_manager_id,\n                    manager_details: u.manager_details\n                })));\n            } else {\n                setUsersList([]);\n                setAllManagers([]);\n                console.log('[AdminAdminsScreen] âŒ Failed to load users:', response.error);\n            }\n\n            // Load eligible users for promotion (to know who can be promoted)\n            const eligibleResponse = await apiService.getEligibleForPromotion(selectedUser.id);\n            if (eligibleResponse.success && Array.isArray(eligibleResponse.data)) {\n                setEligibleUsers(eligibleResponse.data);\n                console.log(`[AdminAdminsScreen] Loaded ${eligibleResponse.data.length} eligible users for promotion`);\n            } else {\n                setEligibleUsers([]);\n                console.log('[AdminAdminsScreen] Failed to load eligible users:', eligibleResponse.error);\n            }\n        } catch (error) {\n            console.error('[AdminAdminsScreen] Error loading users:', error);\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×”××©×ª××©×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Check if current user is super admin - based on roles, not email\n    const currentUserRoles = selectedUser?.roles || [];\n    const isCurrentUserSuperAdmin = currentUserRoles.includes('super_admin') ||\n        currentUserRoles.includes('admin');\n\n    console.log('[AdminAdminsScreen] ğŸ” Current user check:', {\n        userId: selectedUser?.id,\n        email: selectedUser?.email,\n        roles: selectedUser?.roles,\n        isAdmin: isCurrentUserSuperAdmin\n    });\n\n    // Check if a user can be promoted by current admin\n    const canPromote = (user: any): boolean => {\n        // Admin/super_admin can promote users who are not already admins\n        if (isCurrentUserSuperAdmin) {\n            const targetRoles = user.roles || [];\n            const targetIsAlreadyAdmin = targetRoles.includes('admin') || targetRoles.includes('super_admin');\n            const canPromoteUser = !targetIsAlreadyAdmin;\n\n            console.log('[AdminAdminsScreen] ğŸ” canPromote check:', {\n                targetId: user.id,\n                targetEmail: user.email,\n                targetRoles: user.roles,\n                targetIsAlreadyAdmin,\n                canPromoteUser\n            });\n\n            return canPromoteUser;\n        }\n        // Regular admins - check eligible list from server\n        const isEligible = eligibleUsers.some(e => e.id === user.id);\n        console.log('[AdminAdminsScreen] ğŸ” canPromote (regular admin):', {\n            targetId: user.id,\n            targetEmail: user.email,\n            isEligible,\n            eligibleCount: eligibleUsers.length\n        });\n        return isEligible;\n    };\n\n    // Check if current admin can demote a user\n    // We simplify this - let the server do the full validation\n    // Just check basic conditions on client side\n    const canDemote = (user: any): boolean => {\n        const isSameUser = user.id === selectedUser?.id;\n\n        // Cannot demote yourself\n        if (isSameUser) {\n            console.log('[AdminAdminsScreen] ğŸ” canDemote: false (cannot demote yourself)');\n            return false;\n        }\n\n        // Admin/super_admin can demote admins\n        if (isCurrentUserSuperAdmin) {\n            console.log('[AdminAdminsScreen] ğŸ” canDemote (admin):', {\n                targetId: user.id,\n                targetEmail: user.email,\n                canDemote: true\n            });\n            return true;\n        }\n\n        // For regular admins - check if user is in their subordinate tree\n        // Let the server do the full tree validation\n        const isDirectSubordinate = user.parent_manager_id === selectedUser?.id;\n\n        console.log('[AdminAdminsScreen] ğŸ” canDemote (checking hierarchy):', {\n            targetId: user.id,\n            isDirectSubordinate,\n            allowForServerValidation: true\n        });\n\n        // Let server validate hierarchy - show button as enabled\n        return true;\n    };\n\n    const handleToggleAdmin = async (user: any) => {\n        console.log('[AdminAdminsScreen] ğŸ¯ handleToggleAdmin called with:', {\n            userId: user?.id,\n            userName: user?.name,\n            userEmail: user?.email,\n            userRoles: user?.roles,\n            selectedUserId: selectedUser?.id,\n            selectedUserEmail: selectedUser?.email\n        });\n\n        const currentRoles = Array.isArray(user.roles) ? user.roles : [];\n        const isAdmin = currentRoles.includes('admin') || currentRoles.includes('super_admin');\n        const superAdminEmails = ['navesarussi@gmail.com', 'karmacommunity2.0@gmail.com'];\n        const isSuperAdmin = superAdminEmails.includes(user.email?.toLowerCase() || '');\n\n        console.log('[AdminAdminsScreen] ğŸ” User check:', {\n            isAdmin,\n            isSuperAdmin,\n            currentRoles\n        });\n\n        if (isSuperAdmin) {\n            console.log('[AdminAdminsScreen] âŒ Blocked: Super admin');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×©× ×•×ª ×”×¨×©××•×ª ×œ×× ×”×œ ×”×¨××©×™');\n            return;\n        }\n\n        if (!selectedUser?.id) {\n            console.log('[AdminAdminsScreen] âŒ No selectedUser.id');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n\n        const title = isAdmin ? '×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ' : '×”×¤×™×›×” ×œ×× ×”×œ';\n        const message = isAdmin\n            ? `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ×”×¨×©××•×ª ×× ×”×œ ×-${user.name || user.email}?`\n            : `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××ª ${user.name || user.email} ×œ×× ×”×œ ×ª×—×ª×™×š?`;\n\n        console.log('[AdminAdminsScreen] ğŸ“¢ Showing Alert.alert:', { title, message });\n\n        Alert.alert(title, message, [\n            { \n                text: '×‘×™×˜×•×œ', \n                style: 'cancel',\n                onPress: () => {\n                    console.log('[AdminAdminsScreen] âŒ User cancelled');\n                }\n            },\n            {\n                text: '××™×©×•×¨',\n                style: isAdmin ? 'destructive' : 'default',\n                onPress: async () => {\n                    console.log('[AdminAdminsScreen] âœ… User confirmed');\n                    console.log(`[AdminAdminsScreen] ${isAdmin ? 'Demoting' : 'Promoting'} user:`, {\n                        userId: user.id,\n                        userName: user.name,\n                        currentRoles: user.roles,\n                        requestingAdminId: selectedUser.id\n                    });\n\n                    let res;\n                    if (isAdmin) {\n                        // Demote admin\n                        console.log('[AdminAdminsScreen] ğŸ“¡ Calling demoteAdmin');\n                        res = await apiService.demoteAdmin(user.id, selectedUser.id);\n                    } else {\n                        // Promote to admin (will also set as subordinate)\n                        console.log('[AdminAdminsScreen] ğŸ“¡ Calling promoteToAdmin');\n                        res = await apiService.promoteToAdmin(user.id, selectedUser.id);\n                    }\n\n                    console.log(`[AdminAdminsScreen] ğŸ“¡ ${isAdmin ? 'Demote' : 'Promote'} response:`, res);\n\n                    if (res.success) {\n                        Alert.alert('×”×¦×œ×—×”', res.message || '×”×¢×“×›×•×Ÿ ×‘×•×¦×¢ ×‘×”×¦×œ×—×”');\n                        console.log('[AdminAdminsScreen] âœ… Operation successful, reloading users with force refresh...');\n                        await loadUsers(true); // Force refresh to bypass cache\n                    } else {\n                        Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×¢×“×›×•×Ÿ');\n                        console.log('[AdminAdminsScreen] âŒ Operation failed:', res.error);\n                    }\n                }\n            }\n        ]);\n    };\n\n    const openManagerModal = (user: any) => {\n        setSelectedForManager(user);\n        // Pre-select current manager if exists\n        if (user.manager_details) {\n            setNewManager({\n                id: user.manager_details.id,\n                name: user.manager_details.name,\n                email: user.manager_details.email,\n                avatar_url: user.manager_details.avatar_url\n            });\n        } else {\n            setNewManager(null);\n        }\n        setShowManagerModal(true);\n    };\n\n    const saveManager = async () => {\n        if (!selectedForManager) return;\n\n        try {\n            const managerId = newManager ? newManager.id : null;\n            console.log(`[AdminAdminsScreen] ğŸ“ Setting manager:`, {\n                userId: selectedForManager.id,\n                userName: selectedForManager.name,\n                currentManagerId: selectedForManager.parent_manager_id,\n                newManagerId: managerId,\n                newManagerName: newManager?.name,\n                requestedBy: selectedUser?.id\n            });\n\n            const res = await apiService.setManager(selectedForManager.id, managerId, selectedUser?.id);\n\n            console.log('[AdminAdminsScreen] ğŸ“¡ setManager response:', res);\n\n            if (res.success) {\n                Alert.alert('×”×¦×œ×—×”', managerId ? '×× ×”×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”' : '×©×™×•×š ×× ×”×œ ×”×•×¡×¨ ×‘×”×¦×œ×—×”');\n                setShowManagerModal(false);\n                console.log('[AdminAdminsScreen] âœ… Manager updated successfully, reloading users with force refresh...');\n                await loadUsers(true); // Force refresh to bypass cache\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×¢×“×›×•×Ÿ ×× ×”×œ');\n                console.log('[AdminAdminsScreen] âŒ Failed to update manager:', res.error);\n            }\n        } catch (e) {\n            console.error('[AdminAdminsScreen] âŒ Error saving manager:', e);\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××”');\n        }\n    };\n\n    // Direct remove function (without confirmation - used from modal button)\n    const performRemoveManager = async () => {\n        if (!selectedForManager) {\n            console.log('[AdminAdminsScreen] performRemoveManager called but no selectedForManager');\n            return;\n        }\n\n        try {\n            console.log(`[AdminAdminsScreen] â³ Starting to remove manager for userId=${selectedForManager.id}, requestedBy=${selectedUser?.id}`);\n            setIsRemovingManager(true);\n\n            const res = await apiService.setManager(selectedForManager.id, null, selectedUser?.id);\n\n            console.log(`[AdminAdminsScreen] ğŸ“¡ Response from setManager:`, res);\n\n            if (res.success) {\n                Alert.alert('×”×¦×œ×—×”', '×©×™×•×š ×× ×”×œ ×”×•×¡×¨ ×‘×”×¦×œ×—×”');\n                setShowManagerModal(false);\n                console.log('[AdminAdminsScreen] âœ… Manager removed successfully, reloading users with force refresh...');\n                await loadUsers(true); // Force refresh to bypass cache\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×”×¡×¨×ª ×©×™×•×š ×× ×”×œ');\n            }\n        } catch (e) {\n            console.error('[AdminAdminsScreen] âŒ Error removing manager:', e);\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×”×¡×¨×ª ×©×™×•×š ×× ×”×œ');\n        } finally {\n            setIsRemovingManager(false);\n        }\n    };\n\n    // Remove manager with confirmation (used from outside modal)\n    const removeManager = async () => {\n        if (!selectedForManager) {\n            console.log('[AdminAdminsScreen] removeManager called but no selectedForManager');\n            return;\n        }\n\n        console.log('[AdminAdminsScreen] removeManager called for:', selectedForManager.name || selectedForManager.email);\n        console.log('[AdminAdminsScreen] selectedForManager.id:', selectedForManager.id);\n        console.log('[AdminAdminsScreen] selectedUser?.id:', selectedUser?.id);\n\n        if (Platform.OS === 'web') {\n            if (typeof window !== 'undefined' && window.confirm(`×”×× ×œ×”×¡×™×¨ ××ª ×©×™×•×š ×”×× ×”×œ ×-${selectedForManager.name || selectedForManager.email}?`)) {\n                await performRemoveManager();\n            }\n        } else {\n            Alert.alert(\n                '×”×¡×¨×ª ×©×™×•×š ×× ×”×œ',\n                `×”×× ×œ×”×¡×™×¨ ××ª ×©×™×•×š ×”×× ×”×œ ×-${selectedForManager.name || selectedForManager.email}?`,\n                [\n                    { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                    {\n                        text: '×”×¡×¨',\n                        style: 'destructive',\n                        onPress: performRemoveManager\n                    }\n                ]\n            );\n        }\n    };\n\n    const handlePromoteToVolunteer = async (targetUser: any) => {\n        logger.info(LOG_SOURCE, 'handlePromoteToVolunteer called', {\n            targetUserId: targetUser.id,\n            targetUserName: targetUser.name,\n            targetUserEmail: targetUser.email,\n            requestingAdminId: selectedUser?.id\n        });\n\n        if (!selectedUser?.id) {\n            logger.warn(LOG_SOURCE, 'handlePromoteToVolunteer: No selectedUser.id', {});\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n        \n        Alert.alert(\n            '×”×¤×•×š ×œ××ª× ×“×‘',\n            `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¤×•×š ××ª ${targetUser.name || targetUser.email} ×œ××ª× ×“×‘?`,\n            [\n                { text: '×‘×™×˜×•×œ', style: 'cancel' },\n                {\n                    text: '××™×©×•×¨',\n                    style: 'destructive',\n                    onPress: async () => {\n                        try {\n                            logger.info(LOG_SOURCE, 'Promoting user to volunteer - API call started', {\n                                targetUserId: targetUser.id,\n                                requestingAdminId: selectedUser.id\n                            });\n\n                            const res = await apiService.promoteToVolunteer(targetUser.id, selectedUser.id);\n                            \n                            logger.info(LOG_SOURCE, 'Promote to volunteer API response', {\n                                success: res.success,\n                                message: res.message,\n                                error: res.error,\n                                targetUserId: targetUser.id\n                            });\n\n                            if (res.success) {\n                                logger.info(LOG_SOURCE, 'User promoted to volunteer successfully', {\n                                    targetUserId: targetUser.id,\n                                    targetUserName: targetUser.name\n                                });\n                                Alert.alert('×”×¦×œ×—×”', res.message || '×”××©×ª××© ×”×¤×š ×œ××ª× ×“×‘');\n                                await loadUsers(true);\n                            } else {\n                                logger.error(LOG_SOURCE, 'Failed to promote user to volunteer', {\n                                    targetUserId: targetUser.id,\n                                    error: res.error\n                                });\n                                Alert.alert('×©×’×™××”', res.error || '× ×›×©×œ ×‘×”×¤×™×›×” ×œ××ª× ×“×‘');\n                            }\n                        } catch (e: any) {\n                            logger.error(LOG_SOURCE, 'Error promoting to volunteer', {\n                                targetUserId: targetUser.id,\n                                error: e?.message || String(e),\n                                stack: e?.stack\n                            });\n                            console.error('[AdminAdminsScreen] Error promoting to volunteer:', e);\n                            Alert.alert('×©×’×™××”', '× ×›×©×œ ×‘×”×¤×™×›×” ×œ××ª× ×“×‘');\n                        }\n                    }\n                }\n            ]\n        );\n    };\n\n    const handleDemoteToVolunteer = async (targetUser: any) => {\n        console.log('[AdminAdminsScreen] ğŸ¯ handleDemoteToVolunteer called with:', {\n            targetUserId: targetUser?.id,\n            targetUserName: targetUser?.name,\n            targetUserEmail: targetUser?.email,\n            targetUserRoles: targetUser?.roles,\n            requestingAdminId: selectedUser?.id,\n            selectedUserEmail: selectedUser?.email\n        });\n\n        logger.info(LOG_SOURCE, 'handleDemoteToVolunteer called', {\n            targetUserId: targetUser.id,\n            targetUserName: targetUser.name,\n            targetUserEmail: targetUser.email,\n            targetUserRoles: targetUser.roles,\n            requestingAdminId: selectedUser?.id\n        });\n\n        if (!selectedUser?.id) {\n            logger.warn(LOG_SOURCE, 'handleDemoteToVolunteer: No selectedUser.id', {});\n            console.error('[AdminAdminsScreen] âŒ No selectedUser.id');\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™');\n            return;\n        }\n\n        console.log('[AdminAdminsScreen] ğŸ“¢ Showing Alert.alert for demote to volunteer');\n        \n        Alert.alert(\n            '×”×¤×•×š ×œ××ª× ×“×‘',\n            `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨ ×”×¨×©××•×ª ×× ×”×œ ×-${targetUser.name || targetUser.email} ×•×œ×”×¤×•×š ××•×ª×• ×œ××ª× ×“×‘?`,\n            [\n                { \n                    text: '×‘×™×˜×•×œ', \n                    style: 'cancel',\n                    onPress: () => {\n                        console.log('[AdminAdminsScreen] âŒ User cancelled demote to volunteer');\n                    }\n                },\n                {\n                    text: '××™×©×•×¨',\n                    style: 'destructive',\n                    onPress: async () => {\n                        console.log('[AdminAdminsScreen] âœ… User confirmed demote to volunteer');\n                        try {\n                            logger.info(LOG_SOURCE, 'Demoting admin to volunteer - Starting process', {\n                                targetUserId: targetUser.id,\n                                requestingAdminId: selectedUser.id\n                            });\n\n                            console.log('[AdminAdminsScreen] ğŸ“¡ Calling apiService.demoteAdmin with convertToVolunteer=true');\n                            // Demote admin and convert to volunteer in one step\n                            logger.info(LOG_SOURCE, 'Demoting admin to volunteer', {\n                                targetUserId: targetUser.id,\n                                convertToVolunteer: true\n                            });\n                            const demoteRes = await apiService.demoteAdmin(targetUser.id, selectedUser.id, true);\n                            \n                            console.log('[AdminAdminsScreen] ğŸ“¡ API Response:', demoteRes);\n                            logger.info(LOG_SOURCE, 'Demote admin to volunteer API response', {\n                                success: demoteRes.success,\n                                message: demoteRes.message,\n                                error: demoteRes.error,\n                                targetUserId: targetUser.id\n                            });\n\n                            if (demoteRes.success) {\n                                logger.info(LOG_SOURCE, 'Admin demoted to volunteer successfully', {\n                                    targetUserId: targetUser.id,\n                                    targetUserName: targetUser.name\n                                });\n                                console.log('[AdminAdminsScreen] âœ… Success! Reloading users...');\n                                Alert.alert('×”×¦×œ×—×”', demoteRes.message || '×”××©×ª××© ×”×•×¡×¨ ××× ×”×œ×™× ×•×”×¤×š ×œ××ª× ×“×‘');\n                                await loadUsers(true);\n                            } else {\n                                logger.error(LOG_SOURCE, 'Failed to demote admin to volunteer', {\n                                    targetUserId: targetUser.id,\n                                    error: demoteRes.error\n                                });\n                                console.error('[AdminAdminsScreen] âŒ Failed:', demoteRes.error);\n                                Alert.alert('×©×’×™××”', demoteRes.error || '× ×›×©×œ ×‘×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ ×•×”×¤×™×›×” ×œ××ª× ×“×‘');\n                            }\n                        } catch (e: any) {\n                            logger.error(LOG_SOURCE, 'Error demoting admin to volunteer', {\n                                targetUserId: targetUser.id,\n                                error: e?.message || String(e),\n                                stack: e?.stack\n                            });\n                            console.error('[AdminAdminsScreen] âŒ Exception:', e);\n                            Alert.alert('×©×’×™××”', '× ×›×©×œ ×‘×”×¡×¨×ª ×”×¨×©××•×ª ×× ×”×œ');\n                        }\n                    }\n                }\n            ]\n        );\n    };\n\n    // Get managers that can be assigned (exclude the user themselves and create cycle prevention)\n    const getEligibleManagersForUser = (user: any) => {\n        if (!user) return allManagers;\n        // Filter out: the user themselves, and users who would create a cycle\n        return allManagers.filter((m: any) => m.id !== user.id);\n    };\n\n    const getFilteredUsers = () => {\n        return usersList.filter(user => {\n            const hasManager = !!user.parent_manager_id;\n            const currentRoles = Array.isArray(user.roles) ? user.roles : [];\n            const isAdminRole = currentRoles.includes('admin') || currentRoles.includes('super_admin');\n            const isVolunteerRole = currentRoles.includes('volunteer');\n\n            if (activeTab === 'admins') {\n                // ×× ×”×œ×™×: ××©×ª××©×™× ×¢× role admin/super_admin (×’× ×× ××™×Ÿ ×œ×”× manager)\n                return isAdminRole;\n            } else if (activeTab === 'volunteers') {\n                // ××ª× ×“×‘×™×: ××©×ª××©×™× ×¢× role volunteer (×œ×œ× admin)\n                return isVolunteerRole && !isAdminRole;\n            } else {\n                // ××©×ª××©×™× ×¨×’×™×œ×™×: ×œ×œ× manager ×•×œ×œ× roles ××™×•×—×“×™×\n                return !hasManager && !isAdminRole && !isVolunteerRole;\n            }\n        });\n    };\n\n    const filteredUsers = getFilteredUsers();\n\n    const renderHeader = () => (\n        <>\n            <View style={styles.header}>\n                <Text style={styles.title}>× ×™×”×•×œ ×× ×”×œ×™×</Text>\n            </View>\n            <View style={styles.tabsContainer}>\n                <TouchableOpacity style={[styles.tab, activeTab === 'admins' && styles.activeTab]} onPress={() => setActiveTab('admins')}>\n                    <Text style={[styles.tabText, activeTab === 'admins' && styles.activeTabText]}>×× ×”×œ×™×</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.tab, activeTab === 'volunteers' && styles.activeTab]} onPress={() => setActiveTab('volunteers')}>\n                    <Text style={[styles.tabText, activeTab === 'volunteers' && styles.activeTabText]}>××ª× ×“×‘×™×</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={[styles.tab, activeTab === 'users' && styles.activeTab]} onPress={() => setActiveTab('users')}>\n                    <Text style={[styles.tabText, activeTab === 'users' && styles.activeTabText]}>××©×ª××©×™×</Text>\n                </TouchableOpacity>\n            </View>\n            <View style={styles.searchContainer}>\n                <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                <TextInput\n                    style={styles.searchInput}\n                    value={searchQuery}\n                    onChangeText={setSearchQuery}\n                    placeholder=\"×—×¤×© ××©×ª××©...\"\n                    placeholderTextColor={colors.textTertiary}\n                />\n            </View>\n        </>\n    );\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <FlatList\n                data={filteredUsers}\n                keyExtractor={(item) => item.id}\n                contentContainerStyle={[\n                    styles.listContentContainer,\n                    Platform.OS === 'web' && { paddingBottom: 120 }\n                ]}\n                refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadUsers} />}\n                ListHeaderComponent={renderHeader}\n                scrollEnabled={true}\n                nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                showsVerticalScrollIndicator={true}\n                removeClippedSubviews={Platform.OS !== 'web'}\n                style={styles.flatList}\n                renderItem={({ item: user }) => {\n                    const userRoles = user.roles || [];\n                    const isAdmin = userRoles.includes('admin') || userRoles.includes('super_admin');\n                    const isVolunteer = userRoles.includes('volunteer');\n                    const isSameUser = user.id === selectedUser?.id;\n                    const isRootAdmin = user.email === 'karmacommunity2.0@gmail.com'; // ×”×× ×”×œ ×”×¨××©×™ - ××•×’×Ÿ ×œ×—×œ×•×˜×™×Ÿ\n                    const userCanBePromoted = canPromote(user);\n                    const userCanBeDemoted = canDemote(user);\n                    const hierarchyLevel = user.hierarchy_level;\n                    \n                    // Determine hierarchy level display\n                    let levelText = '';\n                    if (hierarchyLevel === 0) {\n                        levelText = '×“×¨×’×” 0 - ×× ×”×œ ×¨××©×™ ğŸ‘‘';\n                    } else if (hierarchyLevel === 1) {\n                        levelText = '×“×¨×’×” 1 - ×¡×•×¤×¨ ×× ×”×œ';\n                    } else if (hierarchyLevel !== null && hierarchyLevel !== undefined) {\n                        levelText = `×“×¨×’×” ${hierarchyLevel}`;\n                    }\n\n                    return (\n                        <View style={styles.userCard}>\n                            <View style={styles.userInfo}>\n                                <Text style={styles.userName}>{user.name || '×œ×œ× ×©×'}</Text>\n                                <Text style={styles.userEmail}>{user.email}</Text>\n                                \n                                {/* Display hierarchy level */}\n                                {levelText && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.primary + '20', marginTop: 4 }]}>\n                                        <Ionicons name=\"layers-outline\" size={12} color={colors.primary} />\n                                        <Text style={[styles.managerText, { color: colors.primary }]}>{levelText}</Text>\n                                    </View>\n                                )}\n                                \n                                {/* Show \"Reports to\" only if NOT root admin and has manager */}\n                                {!isRootAdmin && user.manager_details && (\n                                    <View style={styles.managerBadge}>\n                                        <Ionicons name=\"people-outline\" size={12} color={colors.primary} />\n                                        <Text style={styles.managerText}>××“×•×•×— ×œ- {user.manager_details.name}</Text>\n                                    </View>\n                                )}\n                                {isAdmin && user.parent_manager_id === selectedUser?.id && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.success + '20' }]}>\n                                        <Ionicons name=\"checkmark-circle\" size={12} color={colors.success} />\n                                        <Text style={[styles.managerText, { color: colors.success }]}>×× ×”×œ ×ª×—×ª×™×š</Text>\n                                    </View>\n                                )}\n                                {isVolunteer && !isAdmin && (\n                                    <View style={[styles.managerBadge, { backgroundColor: colors.warning + '20' }]}>\n                                        <Ionicons name=\"heart-outline\" size={12} color={colors.warning} />\n                                        <Text style={[styles.managerText, { color: colors.warning }]}>××ª× ×“×‘</Text>\n                                    </View>\n                                )}\n                            </View>\n\n                            {!viewOnly && !isRootAdmin && (\n                                <View style={styles.actionsColumn}>\n                                    <TouchableOpacity\n                                        style={[styles.actionButton, styles.managerBtn]}\n                                        onPress={() => openManagerModal(user)}\n                                    >\n                                        <Text style={styles.actionBtnText}>×©×™×•×š ×× ×”×œ</Text>\n                                    </TouchableOpacity>\n                                    \n                                    {/* In volunteers tab: Show \"×”×¤×•×š ×œ×× ×”×œ\" button for volunteers who can be promoted */}\n                                    {(() => {\n                                        const shouldShow = activeTab === 'volunteers' && isVolunteer && !isAdmin && userCanBePromoted;\n                                        console.log('[AdminAdminsScreen] ğŸ” Button visibility check:', {\n                                            userId: user.id,\n                                            userName: user.name,\n                                            activeTab,\n                                            isVolunteer,\n                                            isAdmin,\n                                            userCanBePromoted,\n                                            shouldShow\n                                        });\n                                        return shouldShow;\n                                    })() && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.primary, marginTop: 8 }]}\n                                            onPress={() => {\n                                                console.log('[AdminAdminsScreen] ğŸ¯ \"×”×¤×•×š ×œ×× ×”×œ\" button pressed for user:', user.id, user.name);\n                                                handleToggleAdmin(user);\n                                            }}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ×× ×”×œ</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                    \n                                    {/* In admins tab: Show \"×”×¤×•×š ×œ××ª× ×“×‘\" button for admins who can be demoted */}\n                                    {activeTab === 'admins' && isAdmin && userCanBeDemoted && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.warning, marginTop: 8 }]}\n                                            onPress={() => handleDemoteToVolunteer(user)}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ××ª× ×“×‘</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                    \n                                    {/* Show \"Promote to Volunteer\" button for non-volunteers in volunteers tab */}\n                                    {activeTab === 'volunteers' && !isVolunteer && (\n                                        <TouchableOpacity\n                                            style={[styles.actionButton, { backgroundColor: colors.warning, marginTop: 8 }]}\n                                            onPress={() => handlePromoteToVolunteer(user)}\n                                        >\n                                            <Text style={[styles.actionBtnText, { color: 'white' }]}>×”×¤×•×š ×œ××ª× ×“×‘</Text>\n                                        </TouchableOpacity>\n                                    )}\n                                </View>\n                            )}\n                            \n                            {/* Show protected message for root admin */}\n                            {isRootAdmin && (\n                                <View style={[styles.managerBadge, { backgroundColor: colors.error + '20', marginTop: 8 }]}>\n                                    <Ionicons name=\"shield-checkmark\" size={12} color={colors.error} />\n                                    <Text style={[styles.managerText, { color: colors.error }]}>×× ×”×œ ×¨××©×™</Text>\n                                </View>\n                            )}\n                        </View>\n                    );\n                }}\n            />\n\n            < Modal visible={showManagerModal && !viewOnly} animationType=\"fade\" transparent >\n                <View style={styles.modalBackdrop}>\n                    <View style={styles.modalCard}>\n                        <View style={styles.modalHeader}>\n                            <Text style={styles.modalTitle}>×”×’×“×¨×ª ×× ×”×œ ×¢×‘×•×¨ {selectedForManager?.name || '××©×ª××©'}</Text>\n                            <TouchableOpacity onPress={() => setShowManagerModal(false)}>\n                                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                            </TouchableOpacity>\n                        </View>\n\n                        {selectedForManager?.manager_details && (\n                            <View style={styles.currentManagerBox}>\n                                <Text style={styles.currentManagerLabel}>×× ×”×œ × ×•×›×—×™:</Text>\n                                <Text style={styles.currentManagerName}>{selectedForManager.manager_details.name}</Text>\n                                <TouchableOpacity\n                                    style={[styles.removeManagerBtn, isRemovingManager && { opacity: 0.5 }]}\n                                    onPress={viewOnly ? undefined : () => {\n                                        console.log('[AdminAdminsScreen] Remove manager button pressed in modal');\n                                        performRemoveManager();\n                                    }}\n                                    disabled={viewOnly || isRemovingManager}\n                                    activeOpacity={0.7}\n                                >\n                                    {isRemovingManager ? (\n                                        <ActivityIndicator size=\"small\" color={colors.error} />\n                                    ) : (\n                                        <>\n                                            <Ionicons name=\"trash-outline\" size={16} color={colors.error} />\n                                            <Text style={styles.removeManagerText}>×”×¡×¨ ×©×™×•×š</Text>\n                                        </>\n                                    )}\n                                </TouchableOpacity>\n                            </View>\n                        )}\n\n                        <Text style={styles.modalSubtitle}>\n                            {selectedForManager?.manager_details ? '×”×—×œ×£ ×œ×× ×”×œ ××—×¨:' : '×‘×—×¨ ×× ×”×œ:'}\n                        </Text>\n\n                        <View style={styles.managersList}>\n                            <FlatList\n                                data={getEligibleManagersForUser(selectedForManager)}\n                                keyExtractor={(item) => item.id}\n                                style={{ maxHeight: 200 }}\n                                renderItem={({ item: manager }) => {\n                                    const isSelected = newManager?.id === manager.id;\n                                    const isCurrentManager = selectedForManager?.manager_details?.id === manager.id;\n\n                                    return (\n                                        <TouchableOpacity\n                                            style={[\n                                                styles.managerItem,\n                                                isSelected && styles.managerItemSelected,\n                                                isCurrentManager && styles.managerItemCurrent\n                                            ]}\n                                            onPress={() => setNewManager(manager)}\n                                        >\n                                            <View style={styles.managerItemInfo}>\n                                                <Text style={styles.managerItemName}>{manager.name || '×œ×œ× ×©×'}</Text>\n                                                <Text style={styles.managerItemEmail}>{manager.email}</Text>\n                                            </View>\n                                            {isSelected && (\n                                                <Ionicons name=\"checkmark-circle\" size={24} color={colors.primary} />\n                                            )}\n                                            {isCurrentManager && !isSelected && (\n                                                <Text style={styles.currentBadge}>× ×•×›×—×™</Text>\n                                            )}\n                                        </TouchableOpacity>\n                                    );\n                                }}\n                                ListEmptyComponent={\n                                    <Text style={styles.emptyManagersText}>××™×Ÿ ×× ×”×œ×™× ×–××™× ×™×</Text>\n                                }\n                            />\n                        </View>\n\n                        <View style={styles.modalActions}>\n                            <TouchableOpacity style={[styles.modalBtn, styles.modalCancel]} onPress={() => setShowManagerModal(false)}>\n                                <Text style={[styles.modalBtnText, { color: colors.textPrimary }]}>×‘×™×˜×•×œ</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity\n                                style={[\n                                    styles.modalBtn,\n                                    styles.modalSave,\n                                    (!newManager || newManager.id === selectedForManager?.manager_details?.id) && styles.modalBtnDisabled\n                                ]}\n                                onPress={viewOnly ? undefined : saveManager}\n                                disabled={viewOnly || !newManager || newManager.id === selectedForManager?.manager_details?.id}\n                            >\n                                <Text style={styles.modalBtnText}>×©××•×¨</Text>\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                </View>\n            </Modal >\n        </SafeAreaView >\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: colors.backgroundSecondary,\n        ...(Platform.OS === 'web' && {\n            position: 'relative' as any,\n            height: '100vh' as any,\n        }),\n    },\n    flatList: {\n        flex: 1,\n        ...(Platform.OS === 'web' && {\n            overflowY: 'auto' as any,\n            WebkitOverflowScrolling: 'touch' as any,\n        }),\n    },\n    header: { padding: LAYOUT_CONSTANTS.SPACING.LG, backgroundColor: colors.background, alignItems: 'center' },\n    title: { fontSize: FontSizes.heading1, fontWeight: 'bold', color: colors.textPrimary },\n    tabsContainer: { flexDirection: 'row', padding: 8, margin: 16, backgroundColor: colors.background, borderRadius: 8 },\n    tab: { flex: 1, padding: 8, alignItems: 'center', borderRadius: 4 },\n    activeTab: { backgroundColor: colors.primary + '20' },\n    tabText: { color: colors.textSecondary },\n    activeTabText: { color: colors.primary, fontWeight: 'bold' },\n    searchContainer: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.background, marginHorizontal: 16, padding: 12, borderRadius: 8 },\n    searchIcon: { marginRight: 8 },\n    searchInput: { flex: 1, textAlign: 'right', fontSize: 16 },\n    listContentContainer: { paddingBottom: 100 },\n\n    userCard: { backgroundColor: colors.background, marginHorizontal: 16, marginBottom: 12, padding: 16, borderRadius: 12, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n    userInfo: { flex: 1 },\n    userName: { fontSize: 18, fontWeight: 'bold', color: colors.textPrimary, textAlign: 'left' },\n    userEmail: { fontSize: 14, color: colors.textSecondary, marginBottom: 4, textAlign: 'left' },\n    managerBadge: { flexDirection: 'row', alignItems: 'center', gap: 4, marginTop: 4 },\n    managerText: { fontSize: 12, color: colors.primary },\n\n    actionsColumn: { gap: 8 },\n    actionButton: { paddingHorizontal: 12, paddingVertical: 6, borderRadius: 8, alignItems: 'center', minWidth: 80 },\n    managerBtn: { backgroundColor: colors.info },\n    addButton: { backgroundColor: colors.primary },\n    removeButton: { backgroundColor: colors.error },\n    lockedButton: { backgroundColor: colors.textTertiary },\n    actionBtnText: { color: 'white', fontSize: 12, fontWeight: 'bold' },\n\n    modalBackdrop: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n    modalCard: { backgroundColor: colors.background, borderRadius: 16, padding: 20, maxHeight: '80%' },\n    modalHeader: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 },\n    modalTitle: { fontSize: 18, fontWeight: 'bold', flex: 1 },\n    modalSubtitle: { fontSize: 14, color: colors.textSecondary, marginBottom: 12, textAlign: 'right' },\n    modalActions: { flexDirection: 'row', gap: 12, marginTop: 16 },\n    modalBtn: { flex: 1, padding: 12, borderRadius: 8, alignItems: 'center' },\n    modalCancel: { backgroundColor: colors.backgroundSecondary },\n    modalSave: { backgroundColor: colors.primary },\n    modalBtnDisabled: { backgroundColor: colors.textTertiary },\n    modalBtnText: { color: 'white', fontWeight: 'bold' },\n\n    // Current manager box\n    currentManagerBox: {\n        backgroundColor: colors.backgroundSecondary,\n        padding: 12,\n        borderRadius: 8,\n        marginBottom: 16,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n    },\n    currentManagerLabel: { fontSize: 12, color: colors.textSecondary },\n    currentManagerName: { fontSize: 14, fontWeight: 'bold', color: colors.textPrimary, flex: 1, marginLeft: 8 },\n    removeManagerBtn: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: 4,\n        padding: 8,\n        borderRadius: 6,\n        backgroundColor: colors.error + '15'\n    },\n    removeManagerText: { fontSize: 12, color: colors.error, fontWeight: '600' },\n\n    // Managers list\n    managersList: { borderWidth: 1, borderColor: colors.border, borderRadius: 8, overflow: 'hidden' },\n    managerItem: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 12,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        backgroundColor: colors.background\n    },\n    managerItemSelected: { backgroundColor: colors.primary + '15' },\n    managerItemCurrent: { backgroundColor: colors.info + '10' },\n    managerItemInfo: { flex: 1 },\n    managerItemName: { fontSize: 14, fontWeight: '600', color: colors.textPrimary },\n    managerItemEmail: { fontSize: 12, color: colors.textSecondary },\n    currentBadge: {\n        fontSize: 10,\n        color: colors.info,\n        fontWeight: 'bold',\n        backgroundColor: colors.info + '20',\n        paddingHorizontal: 6,\n        paddingVertical: 2,\n        borderRadius: 4\n    },\n    emptyManagersText: { padding: 20, textAlign: 'center', color: colors.textSecondary },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminCRMScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":57,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1586,1589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1586,1589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":158,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":158,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":194,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":194,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":246,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8516,8519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8516,8519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":362,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16057,16060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16057,16060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    SafeAreaView,\n    TouchableOpacity,\n    Modal,\n    TextInput,\n    Alert,\n    ScrollView,\n    RefreshControl,\n    ActivityIndicator,\n    Platform,\n    Dimensions,\n    StatusBar,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminCRMScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface CrmContact {\n    id: string;\n    name: string;\n    capabilities?: string;\n    desire?: string;\n    time_availability?: string;\n    source?: string;\n    referrer?: string;\n    status: 'active' | 'inactive';\n    created_at: string;\n}\n\ninterface ContactFormData {\n    name: string;\n    capabilities: string;\n    desire: string;\n    time_availability: string;\n    source: string;\n    referrer: string;\n    status: 'active' | 'inactive';\n}\n\nconst LOG_SOURCE = 'AdminCRMScreen';\n\nexport default function AdminCRMScreen({ navigation }: AdminCRMScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const tabBarHeight = useBottomTabBarHeight() || 0;\n    const [contacts, setContacts] = useState<CrmContact[]>([]);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [isEditMode, setIsEditMode] = useState(false);\n    const [editingId, setEditingId] = useState<string | null>(null);\n    const [formData, setFormData] = useState<ContactFormData>({\n        name: '',\n        capabilities: '',\n        desire: '',\n        time_availability: '',\n        source: '',\n        referrer: '',\n        status: 'active',\n    });\n    const [isLoading, setIsLoading] = useState(false);\n    const [isMutating, setIsMutating] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\n    const [headerHeight, setHeaderHeight] = useState(0);\n    const [filtersHeight, setFiltersHeight] = useState(0);\n    const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n    const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n        ? screenHeight - tabBarHeight - headerHeight - filtersHeight\n        : undefined;\n\n    useEffect(() => {\n        loadContacts();\n    }, [statusFilter, searchQuery]);\n\n    const loadContacts = async () => {\n        try {\n            setIsLoading(true);\n            const res = await apiService.crm.getAll({\n                status: statusFilter !== 'all' ? statusFilter : undefined,\n                search: searchQuery || undefined,\n            });\n\n            if (res.success && Array.isArray(res.data)) {\n                setContacts(res.data);\n            } else {\n                setContacts([]);\n            }\n        } catch (error) {\n            logger.error(LOG_SOURCE, 'Error loading contacts', { error });\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ××ª ×¨×©×™××ª ×”×§×©×¨×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleAdd = () => {\n        setIsEditMode(false);\n        setEditingId(null);\n        setFormData({\n            name: '',\n            capabilities: '',\n            desire: '',\n            time_availability: '',\n            source: '',\n            referrer: '',\n            status: 'active',\n        });\n        setIsModalVisible(true);\n    };\n\n    const handleEdit = (contact: CrmContact) => {\n        setIsEditMode(true);\n        setEditingId(contact.id);\n        setFormData({\n            name: contact.name,\n            capabilities: contact.capabilities || '',\n            desire: contact.desire || '',\n            time_availability: contact.time_availability || '',\n            source: contact.source || '',\n            referrer: contact.referrer || '',\n            status: contact.status || 'active',\n        });\n        setIsModalVisible(true);\n    };\n\n    const handleDelete = (contact: CrmContact) => {\n        Alert.alert('××—×™×§×ª ××™×© ×§×©×¨', `×”×× ×œ××—×•×§ ××ª ${contact.name}?`, [\n            { text: '×‘×™×˜×•×œ', style: 'cancel' },\n            {\n                text: '××—×§',\n                style: 'destructive',\n                onPress: async () => {\n                    try {\n                        setIsMutating(true);\n                        const res = await apiService.crm.delete(contact.id);\n                        if (res.success) {\n                            loadContacts();\n                        } else {\n                            Alert.alert('×©×’×™××”', '××—×™×§×” × ×›×©×œ×”');\n                        }\n                    } catch (e) {\n                        Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘××—×™×§×”');\n                    } finally {\n                        setIsMutating(false);\n                    }\n                },\n            },\n        ]);\n    };\n\n    const handleSave = async () => {\n        if (!formData.name.trim()) {\n            Alert.alert('×©×’×™××”', '×©× ×”×•× ×©×“×” ×—×•×‘×”');\n            return;\n        }\n\n        try {\n            setIsMutating(true);\n            const payload = {\n                ...formData,\n                created_by: selectedUser?.id,\n            };\n\n            let res;\n            if (isEditMode && editingId) {\n                res = await apiService.crm.update(editingId, payload);\n            } else {\n                res = await apiService.crm.create(payload);\n            }\n\n            if (res.success) {\n                setIsModalVisible(false);\n                loadContacts();\n            } else {\n                Alert.alert('×©×’×™××”', res.error || '×©××™×¨×” × ×›×©×œ×”');\n            }\n        } catch (e) {\n            Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×©××™×¨×”');\n        } finally {\n            setIsMutating(false);\n        }\n    };\n\n    return (\n        <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n            <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n            <View \n                style={styles.header}\n                onLayout={(event) => {\n                    if (Platform.OS === 'web') {\n                        const { height } = event.nativeEvent.layout;\n                        setHeaderHeight(height);\n                    }\n                }}\n            >\n                <Text style={styles.title}>× ×™×”×•×œ ×§×©×¨×™×</Text>\n                {!viewOnly && (\n                    <TouchableOpacity style={styles.addButton} onPress={handleAdd}>\n                        <Ionicons name=\"add\" size={24} color=\"white\" />\n                        <Text style={styles.addButtonText}>×”×•×¡×£</Text>\n                    </TouchableOpacity>\n                )}\n            </View>\n\n            <View \n                style={styles.filtersContainer}\n                onLayout={(event) => {\n                    if (Platform.OS === 'web') {\n                        const { height } = event.nativeEvent.layout;\n                        setFiltersHeight(height);\n                    }\n                }}\n            >\n                <View style={styles.searchContainer}>\n                    <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n                    <TextInput\n                        style={styles.searchInput}\n                        value={searchQuery}\n                        onChangeText={setSearchQuery}\n                        placeholder=\"×—×¤×© ×©×, ×™×›×•×œ×•×ª...\"\n                        placeholderTextColor={colors.textTertiary}\n                    />\n                </View>\n                <View style={styles.statusFilterContainer}>\n                    {['all', 'active', 'inactive'].map((s) => (\n                        <TouchableOpacity\n                            key={s}\n                            style={[styles.filterButton, statusFilter === s && styles.filterButtonActive]}\n                            onPress={() => setStatusFilter(s as any)}\n                        >\n                            <Text style={[styles.filterButtonText, statusFilter === s && styles.filterButtonTextActive]}>\n                                {s === 'all' ? '×”×›×œ' : s === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                            </Text>\n                        </TouchableOpacity>\n                    ))}\n                </View>\n            </View>\n\n            {/* List container - limited height on web to ensure scrolling works */}\n            <View style={[\n                styles.listWrapper,\n                Platform.OS === 'web' && maxListHeight ? {\n                    maxHeight: maxListHeight,\n                } : undefined\n            ]}>\n                {isLoading ? (\n                    <View style={styles.loadingContainer}>\n                        <ActivityIndicator size=\"large\" color={colors.primary} />\n                    </View>\n                ) : (\n                    <ScrollView\n                        contentContainerStyle={styles.listContent}\n                        refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadContacts} />}\n                        scrollEnabled={true}\n                        nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                        scrollEventThrottle={16}\n                    >\n                    {contacts.map((c) => (\n                        <View key={c.id} style={styles.card}>\n                            <View style={styles.cardHeader}>\n                                <View>\n                                    <Text style={styles.cardTitle}>{c.name}</Text>\n                                    <Text style={styles.cardDate}>{new Date(c.created_at).toLocaleDateString('he-IL')}</Text>\n                                </View>\n                                <View style={styles.cardActions}>\n                                    {!viewOnly && (\n                                        <>\n                                            <TouchableOpacity onPress={() => handleEdit(c)} style={styles.actionButton}>\n                                                <Ionicons name=\"create-outline\" size={20} color={colors.primary} />\n                                            </TouchableOpacity>\n                                            <TouchableOpacity onPress={() => handleDelete(c)} style={styles.actionButton}>\n                                                <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                                            </TouchableOpacity>\n                                        </>\n                                    )}\n                                </View>\n                            </View>\n\n                            <View style={styles.cardDetails}>\n                                {c.capabilities ? <Text style={styles.detailText}><Text style={styles.bold}>×™×›×•×œ×•×ª:</Text> {c.capabilities}</Text> : null}\n                                {c.desire ? <Text style={styles.detailText}><Text style={styles.bold}>×¨×¦×•×Ÿ:</Text> {c.desire}</Text> : null}\n                                {c.time_availability ? <Text style={styles.detailText}><Text style={styles.bold}>×–××Ÿ:</Text> {c.time_availability}</Text> : null}\n                                {c.source ? <Text style={styles.detailText}><Text style={styles.bold}>××§×•×¨:</Text> {c.source}</Text> : null}\n                                {c.referrer ? <Text style={styles.detailText}><Text style={styles.bold}>××¤× ×”:</Text> {c.referrer}</Text> : null}\n                            </View>\n\n                            <View style={[styles.statusBadge, c.status === 'active' ? styles.statusActive : styles.statusInactive]}>\n                                <Text style={[styles.statusText, c.status === 'active' ? styles.statusTextActive : styles.statusTextInactive]}>\n                                    {c.status === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                                </Text>\n                            </View>\n                        </View>\n                    ))}\n                    {contacts.length === 0 && (\n                        <Text style={styles.emptyText}>×œ× × ××¦××• ×× ×©×™ ×§×©×¨</Text>\n                    )}\n                    </ScrollView>\n                )}\n            </View>\n\n            <Modal visible={isModalVisible && !viewOnly} animationType=\"slide\" transparent>\n                <View style={styles.modalOverlay}>\n                    <View style={styles.modalContent}>\n                        <View style={styles.modalHeader}>\n                            <Text style={styles.modalTitle}>{isEditMode ? '×¢×¨×•×š' : '×”×•×¡×£'}</Text>\n                            <TouchableOpacity onPress={() => setIsModalVisible(false)}>\n                                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n                            </TouchableOpacity>\n                        </View>\n                        <ScrollView style={styles.modalForm}>\n                            <FormInput label=\"×©× *\" value={formData.name} onChange={(v: string) => setFormData({ ...formData, name: v })} />\n                            <FormInput label=\"×™×›×•×œ×•×ª\" value={formData.capabilities} onChange={(v: string) => setFormData({ ...formData, capabilities: v })} multiline />\n                            <FormInput label=\"×¨×¦×•×Ÿ\" value={formData.desire} onChange={(v: string) => setFormData({ ...formData, desire: v })} multiline />\n                            <FormInput label=\"×–××Ÿ / ×–××™× ×•×ª\" value={formData.time_availability} onChange={(v: string) => setFormData({ ...formData, time_availability: v })} />\n                            <FormInput label=\"×××™×¤×” ×”×’×¢× ×• (××§×•×¨)\" value={formData.source} onChange={(v: string) => setFormData({ ...formData, source: v })} />\n                            <FormInput label=\"××™ ×”×¤×¢×™×œ/×”×‘×™× (××¤× ×”)\" value={formData.referrer} onChange={(v: string) => setFormData({ ...formData, referrer: v })} />\n\n                            <Text style={styles.label}>×¡×˜×˜×•×¡</Text>\n                            <View style={styles.statusSwitches}>\n                                <TouchableOpacity\n                                    style={[styles.statusSwitch, formData.status === 'active' && styles.statusSwitchActive]}\n                                    onPress={() => setFormData({ ...formData, status: 'active' })}\n                                >\n                                    <Text style={formData.status === 'active' ? styles.wt : styles.bt}>×¤×¢×™×œ</Text>\n                                </TouchableOpacity>\n                                <TouchableOpacity\n                                    style={[styles.statusSwitch, formData.status === 'inactive' && styles.statusSwitchActive]}\n                                    onPress={() => setFormData({ ...formData, status: 'inactive' })}\n                                >\n                                    <Text style={formData.status === 'inactive' ? styles.wt : styles.bt}>×œ× ×¤×¢×™×œ</Text>\n                                </TouchableOpacity>\n                            </View>\n\n                            <TouchableOpacity style={styles.saveButton} onPress={handleSave} disabled={isMutating}>\n                                {isMutating ? <ActivityIndicator color=\"white\" /> : <Text style={styles.saveButtonText}>×©××•×¨</Text>}\n                            </TouchableOpacity>\n                        </ScrollView>\n                    </View>\n                </View>\n            </Modal>\n        </SafeAreaView>\n    );\n}\n\nconst FormInput = ({ label, value, onChange, multiline = false }: any) => (\n    <View style={styles.formGroup}>\n        <Text style={styles.label}>{label}</Text>\n        <TextInput\n            style={[styles.input, multiline && styles.textArea]}\n            value={value}\n            onChangeText={onChange}\n            multiline={multiline}\n            textAlignVertical={multiline ? 'top' : 'center'}\n        />\n    </View>\n);\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.backgroundSecondary, position: 'relative' },\n    listWrapper: { flex: 1, backgroundColor: colors.backgroundSecondary },\n    header: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: LAYOUT_CONSTANTS.SPACING.LG, backgroundColor: colors.background, paddingVertical: 20 },\n    title: { fontSize: FontSizes.heading2, fontWeight: 'bold' },\n    addButton: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.primary, padding: 8, borderRadius: 8 },\n    addButtonText: { color: 'white', marginLeft: 5, fontWeight: '600' },\n    filtersContainer: { padding: 10, backgroundColor: colors.background },\n    searchContainer: { flexDirection: 'row', alignItems: 'center', backgroundColor: colors.backgroundSecondary, borderRadius: 8, padding: 8, marginBottom: 10 },\n    searchIcon: { marginRight: 8 },\n    searchInput: { flex: 1, textAlign: 'right' },\n    statusFilterContainer: { flexDirection: 'row', justifyContent: 'space-around' },\n    filterButton: { padding: 8, borderRadius: 15, width: '30%', alignItems: 'center', backgroundColor: '#eee' },\n    filterButtonActive: { backgroundColor: colors.primary },\n    filterButtonText: { color: '#666' },\n    filterButtonTextActive: { color: 'white', fontWeight: 'bold' },\n    loadingContainer: { flex: 1, justifyContent: 'center', alignItems: 'center' },\n    listContent: { padding: 15, paddingBottom: 100 },\n    card: { backgroundColor: 'white', padding: 15, borderRadius: 10, marginBottom: 15, shadowColor: '#000', shadowOpacity: 0.1, shadowRadius: 5, elevation: 2 },\n    cardHeader: { flexDirection: 'row', justifyContent: 'space-between', marginBottom: 10 },\n    cardTitle: { fontSize: 18, fontWeight: 'bold', textAlign: 'left' },\n    cardDate: { fontSize: 12, color: '#999', textAlign: 'left' },\n    cardActions: { flexDirection: 'row' },\n    actionButton: { padding: 5, marginLeft: 10 },\n    cardDetails: { marginBottom: 10 },\n    detailText: { fontSize: 14, marginBottom: 4, textAlign: 'left' },\n    bold: { fontWeight: 'bold' },\n    statusBadge: { alignSelf: 'flex-start', paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 },\n    statusActive: { backgroundColor: '#e6fffa' },\n    statusInactive: { backgroundColor: '#fff5f5' },\n    statusText: { fontSize: 12, fontWeight: 'bold' },\n    statusTextActive: { color: colors.success },\n    statusTextInactive: { color: colors.error },\n    emptyText: { textAlign: 'center', marginTop: 50, color: '#999' },\n    modalOverlay: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'flex-end' },\n    modalContent: { backgroundColor: 'white', borderTopLeftRadius: 20, borderTopRightRadius: 20, height: '80%' },\n    modalHeader: { padding: 20, borderBottomWidth: 1, borderBottomColor: '#eee', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n    modalTitle: { fontSize: 20, fontWeight: 'bold' },\n    modalForm: { padding: 20 },\n    formGroup: { marginBottom: 15 },\n    label: { marginBottom: 5, fontWeight: '600', textAlign: 'left' },\n    input: { borderWidth: 1, borderColor: '#ddd', borderRadius: 8, padding: 10, textAlign: 'right' },\n    textArea: { height: 80 },\n    saveButton: { backgroundColor: colors.primary, padding: 15, borderRadius: 8, alignItems: 'center', marginTop: 20 },\n    saveButtonText: { color: 'white', fontWeight: 'bold', fontSize: 16 },\n    statusSwitches: { flexDirection: 'row', marginTop: 5 },\n    statusSwitch: { flex: 1, padding: 10, alignItems: 'center', borderColor: colors.primary, borderWidth: 1 },\n    statusSwitchActive: { backgroundColor: colors.primary },\n    wt: { color: 'white' },\n    bt: { color: colors.primary },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminDashboardScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SafeAreaView' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"SafeAreaView"},"fix":{"range":[64,80],"text":""},"desc":"Remove unused variable \"SafeAreaView\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[114,123],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2428,2431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2428,2431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2764,2767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2764,2767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3039,3042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3039,3042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5243,5246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5243,5246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  ScrollView,\n  Alert\n} from 'react-native';\nimport { NavigationProp, useRoute, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport AdminHierarchyTree from '../components/AdminHierarchyTree';\n\ninterface AdminDashboardScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface AdminButton {\n  id: string;\n  title: string;\n  icon: keyof typeof Ionicons.glyphMap;\n  color: string;\n  bgColor: string;\n  route: keyof AdminStackParamList;\n}\n\nconst adminButtons: AdminButton[] = [\n  {\n    id: 'money',\n    title: '×›×¡×£',\n    icon: 'card-outline',\n    color: colors.success,\n    bgColor: colors.successLight,\n    route: 'AdminMoney',\n  },\n  {\n    id: 'tasks',\n    title: '××©×™××•×ª',\n    icon: 'checkmark-done-outline',\n    color: colors.primary,\n    bgColor: colors.successLight,\n    route: 'AdminTasks',\n  },\n  {\n    id: 'people',\n    title: '×× ×©×™×',\n    icon: 'people-outline',\n    color: colors.primary,\n    bgColor: colors.infoLight,\n    route: 'AdminPeople',\n  },\n  {\n    id: 'review',\n    title: '×‘×™×§×•×¨×ª',\n    icon: 'shield-checkmark-outline',\n    color: colors.secondary,\n    bgColor: colors.pinkLight,\n    route: 'AdminReview',\n  },\n  {\n    id: 'files',\n    title: '×§×‘×¦×™×',\n    icon: 'folder-open-outline',\n    color: colors.info,\n    bgColor: colors.infoLight,\n    route: 'AdminFiles',\n  },\n  {\n    id: 'crm',\n    title: '× ×™×”×•×œ ×§×©×¨×™×',\n    icon: 'people-circle-outline',\n    color: colors.warning,\n    bgColor: colors.warningLight,\n    route: 'AdminCRM',\n  },\n  {\n    id: 'time',\n    title: '× ×™×”×•×œ ×–××Ÿ ×¢×•×‘×“×™×',\n    icon: 'time-outline',\n    color: colors.accent,\n    bgColor: '#E8F5E9',\n    route: 'AdminTimeManagement',\n  },\n  {\n    id: 'tables',\n    title: '×˜×‘×œ××•×ª',\n    icon: 'grid-outline',\n    color: colors.info,\n    bgColor: colors.infoLight,\n    route: 'AdminTables',\n  }\n];\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminDashboardScreen({ navigation }: AdminDashboardScreenProps) {\n  const { selectedUser } = useUser();\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n\n  // Ensure top bar and bottom bar are visible in view-only mode\n  useFocusEffect(\n    React.useCallback(() => {\n      if (viewOnly) {\n        console.log('ğŸ” AdminDashboard - View-only mode: Ensuring bars are visible');\n        (navigation as any).setParams({\n          hideTopBar: false,\n          hideBottomBar: false,\n        });\n      }\n    }, [viewOnly, navigation])\n  );\n\n\n  const handleButtonPress = (button: AdminButton) => {\n    if (button.route === 'AdminDashboard') {\n      return;\n    }\n    (navigation as any).navigate(button.route, viewOnly ? { viewOnly: true, hideTopBar: false, hideBottomBar: false } : undefined);\n  };\n\n  return (\n    <View style={styles.container}>\n      <ScrollView\n        contentContainerStyle={styles.scrollContent}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={styles.header}>\n          <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n            <View>\n              <Text style={styles.welcomeText}>×œ×•×— ×‘×§×¨×”</Text>\n              <Text style={styles.subtitleText}>\n                {selectedUser?.name ? `×©×œ×•× ${selectedUser.name}` : '×× ×”×œ'}\n              </Text>\n            </View>\n            {viewOnly && (\n              <View style={[styles.viewOnlyBadge, { backgroundColor: colors.warningLight }]}>\n                <Ionicons name=\"eye-outline\" size={16} color={colors.warning} />\n                <Text style={[styles.viewOnlyText, { color: colors.warning }]}>××¦×‘ ×¦×¤×™×™×” ×‘×œ×‘×“</Text>\n              </View>\n            )}\n          </View>\n        </View>\n\n        <View style={styles.buttonsContainer}>\n          {adminButtons.map((button) => (\n            <TouchableOpacity\n              key={button.id}\n              style={[styles.button, { backgroundColor: button.bgColor }]}\n              onPress={() => handleButtonPress(button)}\n              activeOpacity={0.7}\n            >\n              <View style={[styles.iconContainer, { backgroundColor: button.color }]}>\n                <Ionicons name={button.icon} size={24} color=\"white\" />\n              </View>\n              <Text style={styles.buttonText}>{button.title}</Text>\n            </TouchableOpacity>\n          ))}\n\n          {/* Admin management - visible to all admins (admin or super_admin role) */}\n          {(selectedUser?.roles?.includes('admin') || selectedUser?.roles?.includes('super_admin') || selectedUser?.email?.toLowerCase() === 'navesarussi@gmail.com' || selectedUser?.email?.toLowerCase() === 'karmacommunity2.0@gmail.com') && (\n            <TouchableOpacity\n              key=\"admins\"\n              style={[styles.button, { backgroundColor: colors.errorLight }]}\n              onPress={() => (navigation as any).navigate('AdminAdmins')}\n              activeOpacity={0.7}\n            >\n              <View style={[styles.iconContainer, { backgroundColor: colors.error }]}>\n                <Ionicons name=\"shield-outline\" size={24} color=\"white\" />\n              </View>\n              <Text style={styles.buttonText}>× ×™×”×•×œ ×× ×”×œ×™×</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n\n        {/* Management Hierarchy Section */}\n        <View style={styles.hierarchySection}>\n          <View style={styles.sectionHeader}>\n            <Ionicons name=\"git-network-outline\" size={24} color={colors.primary} />\n            <Text style={styles.sectionTitle}>××‘× ×” ×”× ×™×”×•×œ</Text>\n          </View>\n          <Text style={styles.sectionSubtitle}>×¢×¥ ×”×™×¨×¨×›×™×™×ª ×”×× ×”×œ×™× ×‘×§×”×™×œ×”</Text>\n          <View style={styles.hierarchyCard}>\n            <AdminHierarchyTree />\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  scrollContent: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: 150,\n    flexGrow: 1,\n    minHeight: '150%', // Ensure content is always scrollable, especially on web\n  },\n  header: {\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  welcomeText: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  subtitleText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  buttonsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-start',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  button: {\n    width: '31%',\n    minHeight: 100,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  iconContainer: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 4,\n  },\n  buttonText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  hierarchySection: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XL,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n    borderTopWidth: 1,\n    borderTopColor: colors.borderSecondary,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  sectionSubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  hierarchyCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  viewOnlyBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XS,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  viewOnlyText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminFilesScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TextInput' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TextInput"},"fix":{"range":[146,161],"text":""},"desc":"Remove unused variable \"TextInput\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FontSizes' is defined but never used.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FontSizes"},"fix":{"range":[434,444],"text":""},"desc":"Remove unused variable \"FontSizes\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LAYOUT_CONSTANTS' is defined but never used.","line":19,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":37,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"LAYOUT_CONSTANTS"},"fix":{"range":[425,493],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":41,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1305,1308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1305,1308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setCurrentFolder' is assigned a value but never used.","line":48,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":68,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4836,4839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4836,4839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    StyleSheet,\n    SafeAreaView,\n    TouchableOpacity,\n    Modal,\n    TextInput,\n    Alert,\n    ScrollView,\n    RefreshControl,\n    Linking,\n    ActivityIndicator,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { apiService } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport { pickDocument, validateFile, FileData, formatFileSize } from '../utils/fileService';\nimport { uploadFileWithProgress, buildAdminFilePath } from '../utils/storageService';\n\ninterface AdminFilesScreenProps {\n    navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface GeneralFile {\n    id: string;\n    name: string;\n    url: string;\n    folder_path: string;\n    created_at: string;\n    mime_type?: string;\n    size?: number;\n}\n\nexport default function AdminFilesScreen({ navigation }: AdminFilesScreenProps) {\n    const route = useRoute();\n    const routeParams = (route.params as any) || {};\n    const viewOnly = routeParams?.viewOnly === true;\n    useAdminProtection(true);\n    const { selectedUser } = useUser();\n    const [files, setFiles] = useState<GeneralFile[]>([]);\n    const [currentFolder, setCurrentFolder] = useState('/');\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isMutating, setIsMutating] = useState(false);\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const [selectedFile, setSelectedFile] = useState<FileData | null>(null);\n\n    useEffect(() => {\n        loadFiles();\n    }, [currentFolder]);\n\n    const loadFiles = async () => {\n        try {\n            setIsLoading(true);\n            const res = await apiService.adminFiles.getAll({ folder: currentFolder });\n            if (res.success && Array.isArray(res.data)) {\n                setFiles(res.data);\n            } else {\n                setFiles([]);\n            }\n        } catch (e) {\n            Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×§×‘×¦×™×');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleOpen = (url: string) => {\n        Linking.openURL(url).catch(() => Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×§×™×©×•×¨'));\n    };\n\n    const handleDelete = (file: GeneralFile) => {\n        // Check hierarchy - simplified to checking if admin\n        Alert.alert('××—×™×§×”', `×œ××—×•×§ ××ª ${file.name}?`, [\n            { text: '×‘×™×˜×•×œ' },\n            {\n                text: '××—×§',\n                style: 'destructive',\n                onPress: async () => {\n                    setIsMutating(true);\n                    const res = await apiService.adminFiles.delete(file.id);\n                    setIsMutating(false);\n                    if (res.success) loadFiles();\n                    else Alert.alert('×©×’×™××”', '××—×™×§×” × ×›×©×œ×”');\n                }\n            }\n        ]);\n    };\n\n    const handlePickFile = async () => {\n        const result = await pickDocument();\n        if (result.success && result.fileData) {\n            setSelectedFile(result.fileData);\n        } else if (result.error) {\n            Alert.alert('×©×’×™××”', result.error);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (!selectedFile) {\n            Alert.alert('×©×’×™××”', '×× × ×‘×—×¨ ×§×•×‘×¥ ×œ×”×¢×œ××”');\n            return;\n        }\n\n        // Validate file size (max 10MB for admin files)\n        const maxSize = 10 * 1024 * 1024; // 10MB\n        const validation = validateFile(selectedFile, maxSize);\n        if (!validation.isValid) {\n            Alert.alert('×©×’×™××”', validation.error || '×”×§×•×‘×¥ ××™× ×• ×ª×§×™×Ÿ');\n            return;\n        }\n\n        setIsMutating(true);\n        setUploadProgress(0);\n\n        try {\n            // Generate file ID\n            const fileId = `file_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n            \n            // Build file path in Firebase Storage\n            const fullPath = buildAdminFilePath(currentFolder, fileId, selectedFile.name);\n            \n            // Upload file to Firebase Storage with progress tracking\n            let uploadedUrl: string;\n            try {\n                const uploadResult = await uploadFileWithProgress(\n                    fullPath,\n                    selectedFile.uri,\n                    selectedFile.mimeType,\n                    (progress) => {\n                        setUploadProgress(progress);\n                    }\n                );\n                uploadedUrl = uploadResult.url;\n            } catch (uploadError: any) {\n                console.error('âŒ Upload file error:', uploadError);\n                const errorMessage = uploadError?.message || uploadError?.code || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n                console.error('âŒ Upload error details:', {\n                    error: uploadError,\n                    fullPath,\n                    fileName: selectedFile.name,\n                    fileSize: selectedFile.size,\n                    mimeType: selectedFile.mimeType,\n                });\n                Alert.alert(\n                    '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥',\n                    `×œ× × ×™×ª×Ÿ ×œ×”×¢×œ×•×ª ××ª ×”×§×•×‘×¥. ${errorMessage.includes('CORS') ? '×‘×¢×™×™×ª CORS - ×‘×“×•×§ ××ª ×”×’×“×¨×•×ª Firebase Storage.' : errorMessage}`\n                );\n                setIsMutating(false);\n                setUploadProgress(0);\n                return;\n            }\n\n            // Save file metadata to database\n            const res = await apiService.adminFiles.create({\n                name: selectedFile.name,\n                url: uploadedUrl,\n                mime_type: selectedFile.mimeType,\n                size: selectedFile.size || 0,\n                folder_path: currentFolder,\n                uploaded_by: selectedUser?.id\n            });\n\n            if (res.success) {\n                setIsModalVisible(false);\n                setSelectedFile(null);\n                setUploadProgress(0);\n                loadFiles();\n            } else {\n                Alert.alert('×©×’×™××”', '×”×•×¡×¤×” × ×›×©×œ×”');\n            }\n        } catch (error) {\n            console.error('âŒ Upload error:', error);\n            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥. ×× × × ×¡×” ×©×•×‘.');\n        } finally {\n            setIsMutating(false);\n            setUploadProgress(0);\n        }\n    };\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <View style={styles.header}>\n                <Text style={styles.title}>×§×‘×¦×™× ××©×•×ª×¤×™×</Text>\n                {!viewOnly && (\n                    <TouchableOpacity style={styles.addButton} onPress={() => setIsModalVisible(true)}>\n                        <Ionicons name=\"add\" size={24} color=\"white\" />\n                        <Text style={styles.addText}>×”×•×¡×£ ×§×•×‘×¥</Text>\n                    </TouchableOpacity>\n                )}\n            </View>\n\n            <View style={styles.folderBar}>\n                <Ionicons name=\"folder-open\" size={20} color={colors.primary} />\n                <Text style={styles.folderName}>{currentFolder === '/' ? '×ª×™×§×™×™×” ×¨××©×™×ª' : currentFolder}</Text>\n            </View>\n\n            {isLoading ? (\n                <ActivityIndicator style={{ marginTop: 20 }} size=\"large\" color={colors.primary} />\n            ) : (\n                <ScrollView\n                    contentContainerStyle={styles.list}\n                    refreshControl={<RefreshControl refreshing={isLoading} onRefresh={loadFiles} />}\n                >\n                    {files.map((f) => (\n                        <View key={f.id} style={styles.fileItem}>\n                            <TouchableOpacity style={styles.fileInfo} onPress={() => handleOpen(f.url)}>\n                                <Ionicons name=\"document-text-outline\" size={30} color={colors.secondary} />\n                                <View style={styles.textContainer}>\n                                    <Text style={styles.fileName}>{f.name}</Text>\n                                    <View style={styles.fileMeta}>\n                                        <Text style={styles.fileDate}>{new Date(f.created_at).toLocaleDateString('he-IL')}</Text>\n                                        {f.size && f.size > 0 && (\n                                            <Text style={styles.fileSize}> â€¢ {formatFileSize(f.size)}</Text>\n                                        )}\n                                    </View>\n                                </View>\n                            </TouchableOpacity>\n                            {!viewOnly && (\n                                <TouchableOpacity onPress={() => handleDelete(f)} style={styles.deleteBtn}>\n                                    <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                                </TouchableOpacity>\n                            )}\n                        </View>\n                    ))}\n                    {files.length === 0 && (\n                        <Text style={styles.emptyText}>××™×Ÿ ×§×‘×¦×™× ×‘×ª×™×§×™×™×” ×–×•</Text>\n                    )}\n                </ScrollView>\n            )}\n\n            <Modal visible={isModalVisible && !viewOnly} transparent animationType=\"slide\">\n                <View style={styles.modalOverlay}>\n                    <View style={styles.modalContent}>\n                        <Text style={styles.modalTitle}>×”×•×¡×¤×ª ×§×•×‘×¥</Text>\n\n                        {!selectedFile ? (\n                            <>\n                                <Text style={styles.label}>×‘×—×¨ ×§×•×‘×¥ ××”×˜×œ×¤×•×Ÿ/××—×©×‘</Text>\n                                <TouchableOpacity style={styles.pickFileButton} onPress={handlePickFile}>\n                                    <Ionicons name=\"document-outline\" size={24} color={colors.primary} />\n                                    <Text style={styles.pickFileText}>×‘×—×¨ ×§×•×‘×¥</Text>\n                                </TouchableOpacity>\n                                <Text style={styles.hintText}>××§×¡×™××•× 10MB</Text>\n                            </>\n                        ) : (\n                            <>\n                                <View style={styles.selectedFileContainer}>\n                                    <Ionicons name=\"document\" size={24} color={colors.primary} />\n                                    <View style={styles.selectedFileInfo}>\n                                        <Text style={styles.selectedFileName}>{selectedFile.name}</Text>\n                                        {selectedFile.size && (\n                                            <Text style={styles.selectedFileSize}>{formatFileSize(selectedFile.size)}</Text>\n                                        )}\n                                    </View>\n                                    <TouchableOpacity onPress={() => setSelectedFile(null)}>\n                                        <Ionicons name=\"close-circle\" size={24} color={colors.error} />\n                                    </TouchableOpacity>\n                                </View>\n\n                                {isMutating && uploadProgress > 0 && (\n                                    <View style={styles.progressContainer}>\n                                        <View style={styles.progressBarContainer}>\n                                            <View style={[styles.progressBar, { width: `${uploadProgress}%` }]} />\n                                        </View>\n                                        <Text style={styles.progressText}>{Math.round(uploadProgress)}%</Text>\n                                    </View>\n                                )}\n                            </>\n                        )}\n\n                        <View style={styles.modalActions}>\n                            <TouchableOpacity \n                                onPress={() => {\n                                    setIsModalVisible(false);\n                                    setSelectedFile(null);\n                                    setUploadProgress(0);\n                                }} \n                                style={styles.cancelBtn}\n                                disabled={isMutating}\n                            >\n                                <Text>×‘×™×˜×•×œ</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity \n                                onPress={handleUpload} \n                                style={[styles.saveBtn, (!selectedFile || isMutating) && styles.saveBtnDisabled]} \n                                disabled={!selectedFile || isMutating}\n                            >\n                                {isMutating ? (\n                                    <ActivityIndicator color=\"white\" />\n                                ) : (\n                                    <Text style={{ color: 'white' }}>×”×¢×œ×”</Text>\n                                )}\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                </View>\n            </Modal>\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, backgroundColor: colors.backgroundSecondary },\n    header: { padding: 20, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', backgroundColor: colors.background },\n    title: { fontSize: 22, fontWeight: 'bold' },\n    addButton: { flexDirection: 'row', backgroundColor: colors.primary, padding: 8, borderRadius: 8 },\n    addText: { color: 'white', marginLeft: 5, fontWeight: 'bold' },\n    folderBar: { flexDirection: 'row', padding: 15, alignItems: 'center', backgroundColor: '#eef' },\n    folderName: { marginLeft: 10, fontWeight: 'bold', color: colors.primary },\n    list: { padding: 15 },\n    fileItem: { flexDirection: 'row', backgroundColor: 'white', padding: 15, borderRadius: 10, marginBottom: 10, alignItems: 'center', justifyContent: 'space-between' },\n    fileInfo: { flexDirection: 'row', alignItems: 'center', flex: 1 },\n    textContainer: { marginLeft: 15, flex: 1 },\n    fileName: { fontSize: 16, fontWeight: 'bold', textAlign: 'left' },\n    fileMeta: { flexDirection: 'row', alignItems: 'center' },\n    fileDate: { fontSize: 12, color: '#888', textAlign: 'left' },\n    fileSize: { fontSize: 12, color: '#888', textAlign: 'left' },\n    deleteBtn: { padding: 10 },\n    emptyText: { textAlign: 'center', marginTop: 30, color: '#999' },\n    modalOverlay: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n    modalContent: { backgroundColor: 'white', padding: 20, borderRadius: 10 },\n    modalTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },\n    label: { marginBottom: 5, fontWeight: 'bold', textAlign: 'right' },\n    hintText: { fontSize: 12, color: '#888', textAlign: 'center', marginTop: 8 },\n    pickFileButton: { \n        flexDirection: 'row', \n        alignItems: 'center', \n        justifyContent: 'center',\n        borderWidth: 2, \n        borderColor: colors.primary, \n        borderStyle: 'dashed',\n        padding: 20, \n        borderRadius: 10, \n        marginBottom: 15 \n    },\n    pickFileText: { marginLeft: 10, color: colors.primary, fontWeight: 'bold' },\n    selectedFileContainer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        padding: 15,\n        borderRadius: 10,\n        marginBottom: 15,\n    },\n    selectedFileInfo: { flex: 1, marginLeft: 10 },\n    selectedFileName: { fontSize: 14, fontWeight: 'bold', textAlign: 'right' },\n    selectedFileSize: { fontSize: 12, color: '#888', textAlign: 'right', marginTop: 4 },\n    progressContainer: { marginBottom: 15 },\n    progressBarContainer: {\n        width: '100%',\n        height: 8,\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 4,\n        overflow: 'hidden',\n        marginBottom: 8,\n    },\n    progressBar: {\n        height: '100%',\n        backgroundColor: colors.primary,\n        borderRadius: 4,\n    },\n    progressText: {\n        fontSize: 12,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    input: { borderWidth: 1, borderColor: '#ddd', padding: 10, borderRadius: 5, marginBottom: 15, textAlign: 'right' },\n    modalActions: { flexDirection: 'row', justifyContent: 'space-between', marginTop: 10 },\n    cancelBtn: { padding: 10 },\n    saveBtn: { backgroundColor: colors.primary, padding: 10, borderRadius: 5, width: 100, alignItems: 'center' },\n    saveBtnDisabled: { backgroundColor: colors.textSecondary, opacity: 0.5 },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminMoneyScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dimensions' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Dimensions"},"fix":{"range":[210,224],"text":""},"desc":"Remove unused variable \"Dimensions\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1939,1942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1939,1942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2222,2225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2222,2225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'pollingId' is assigned a value but never used.","line":111,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":19},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":664,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&quot;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&ldquo;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&#34;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›&rdquo;×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":664,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&quot; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&ldquo; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&#34; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[23384,23506],"text":"\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×&rdquo; ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":997,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":997,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32988,32991],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32988,32991],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  Platform,\n  Switch,\n  RefreshControl,\n  Dimensions,\n} from 'react-native';\nimport { NavigationProp, useRoute, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { enhancedDB, wipeAllDataAdmin, DonationData } from '../utils/enhancedDatabaseService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport ScrollContainer from '../components/ScrollContainer';\nimport DatePicker from '../components/DatePicker';\n\ninterface Donation {\n  id: string;\n  type: 'money' | 'time' | 'items' | 'rides';\n  title: string;\n  description?: string;\n  amount?: number;\n  category?: string;\n  createdBy: string;\n  createdAt: string;\n  status?: string;\n  metadata?: Record<string, unknown> | null;\n  is_recurring?: boolean;\n  isRecurring?: boolean;\n}\n\ninterface AdminMoneyScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface DonationFormData {\n  donorName: string;\n  amount: string;\n  category: string;\n  date: string;\n  notes: string;\n  isRecurring: boolean;\n}\n\nconst DONATION_CATEGORIES = [\n  '×›×¡×£',\n  '××•×›×œ',\n  '×‘×’×“×™×',\n  '×¡×¤×¨×™×',\n  '×¨×”×™×˜×™×',\n  '×¨×¤×•××™',\n  '×‘×¢×œ×™ ×—×™×™×',\n  '×“×™×•×¨',\n  '×ª××™×›×”',\n  '×—×™× ×•×š',\n  '×¡×‘×™×‘×”',\n  '×˜×›× ×•×œ×•×’×™×”',\n  '××•×–×™×§×”',\n  '××©×—×§×™×',\n  '××× ×•×ª',\n  '×¡×¤×•×¨×˜',\n  '×›×œ×œ×™',\n];\n\nconst LOG_SOURCE = 'AdminMoneyScreen';\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminMoneyScreen({ navigation }: AdminMoneyScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { isAdmin } = useUser();\n\n  // Ensure top bar and bottom bar are visible in view-only mode\n  useFocusEffect(\n    React.useCallback(() => {\n      if (viewOnly) {\n        (navigation as any).setParams({\n          hideTopBar: false,\n          hideBottomBar: false,\n        });\n      }\n    }, [viewOnly, navigation])\n  );\n  const [donationsList, setDonationsList] = useState<Donation[]>([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [formData, setFormData] = useState<DonationFormData>({\n    donorName: '',\n    amount: '',\n    category: '×›×¡×£',\n    date: new Date().toISOString().split('T')[0],\n    notes: '',\n    isRecurring: false,\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMutating, setIsMutating] = useState(false);\n  const [pollingId, setPollingId] = useState<ReturnType<typeof setInterval> | null>(null);\n  const [isWipeVisible, setIsWipeVisible] = useState(false);\n  const [confirmText, setConfirmText] = useState('');\n  const [isMounted, setIsMounted] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editingDonationId, setEditingDonationId] = useState<string | null>(null);\n\n  useEffect(() => {\n    logger.info(LOG_SOURCE, 'Initializing admin donations screen');\n    loadDonations();\n    // Lightweight polling to approximate real-time updates\n    const id = setInterval(() => {\n      logger.debug(LOG_SOURCE, 'Polling donations tick');\n      loadDonations();\n    }, 5000);\n    setPollingId(id);\n    setIsMounted(true);\n    return () => {\n      if (id) {\n        clearInterval(id);\n        logger.info(LOG_SOURCE, 'Stopped donations polling interval');\n      }\n    };\n  }, []);\n\n  const loadDonations = async (forceRefresh = false) => {\n    logger.info(LOG_SOURCE, 'Loading donations list', { useBackend: USE_BACKEND, forceRefresh });\n    try {\n      setIsLoading(true);\n      if (USE_BACKEND) {\n        const donationsData = await enhancedDB.getDonations({}, forceRefresh);\n        setDonationsList(donationsData as unknown as Donation[]);\n        logger.info(LOG_SOURCE, 'Donations loaded from backend', {\n          count: Array.isArray(donationsData) ? donationsData.length : 0,\n          forceRefresh,\n        });\n      } else {\n        // No backend - show empty state\n        setDonationsList([]);\n        logger.warn(LOG_SOURCE, 'Backend disabled - showing empty donations list');\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error loading donations', { error });\n      // Show empty state on error\n      setDonationsList([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleWipeAll = async () => {\n    logger.warn(LOG_SOURCE, 'Attempting to wipe all donations and data');\n    try {\n      if (!isAdmin) {\n        logger.warn(LOG_SOURCE, 'Wipe all blocked - missing admin permissions');\n        Alert.alert('×©×’×™××”', '×¤×¢×•×œ×” ×–×• ×“×•×¨×©×ª ×”×¨×©××ª ×× ×”×œ');\n        return;\n      }\n      if (confirmText.trim().toUpperCase() !== 'CONFIRM') {\n        logger.warn(LOG_SOURCE, 'Wipe all blocked - confirmation text invalid');\n        Alert.alert('××™××•×ª × ×“×¨×©', '× × ×œ×”×§×œ×™×“ CONFIRM ×‘×× ×’×œ×™×ª ×›×“×™ ×œ××©×¨ ××—×™×§×” ×›×•×œ×œ×ª');\n        return;\n      }\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, 'Sending wipe all request to backend');\n      const res = await wipeAllDataAdmin();\n      if (!res.success) {\n        throw new Error(res.error || 'wipe failed');\n      }\n      setIsWipeVisible(false);\n      setConfirmText('');\n      await loadDonations();\n      logger.info(LOG_SOURCE, 'Wipe all completed successfully');\n      Alert.alert('×‘×•×¦×¢', '×›×œ ×”× ×ª×•× ×™× × ××—×§×• ×‘×”×¦×œ×—×”');\n    } catch (e) {\n      logger.error(LOG_SOURCE, 'Admin wipe error', { error: e });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×›×œ ×”× ×ª×•× ×™×');\n    } finally {\n      setIsMutating(false);\n      logger.debug(LOG_SOURCE, 'Wipe all mutation finished');\n    }\n  };\n\n  const handleAddDonation = () => {\n    logger.info(LOG_SOURCE, 'Opening add donation modal');\n    setIsEditMode(false);\n    setEditingDonationId(null);\n    setFormData({\n      donorName: '',\n      amount: '',\n      category: '×›×¡×£',\n      date: new Date().toISOString().split('T')[0],\n      notes: '',\n      isRecurring: false,\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleEditDonation = (donation: Donation) => {\n    logger.info(LOG_SOURCE, 'Opening edit donation modal', { donationId: donation.id });\n    setIsEditMode(true);\n    setEditingDonationId(donation.id);\n    // × ×™×¡×™×•×Ÿ ×¤×©×•×˜ ×œ×—×œ×¥ ×©× ×ª×•×¨× ××”×›×•×ª×¨×ª \"×ª×¨×•××” ×-<×©×>\"\n    const donorFromTitle =\n      donation.title?.startsWith('×ª×¨×•××” ×-') ? donation.title.replace('×ª×¨×•××” ×-', '') : donation.title || '';\n    // × ×¨××•×œ ×ª××¨×™×š ×‘×˜×•×—: × ×¡×” ×œ×§×—×ª ××ª××¨×™×š ×©× ×‘×—×¨ ×¢×œ ×™×“×™ ×”××©×ª××© (metadata), ××—×¨×ª ×-createdAt\n    let normalizedDate = '';\n    let dateToUse: string | null = null;\n\n    // Try to get date from metadata first (user-selected date)\n    if (donation.metadata && typeof donation.metadata === 'object' && donation.metadata !== null) {\n      const metadata = donation.metadata as Record<string, unknown>;\n      if (metadata.selectedDate && typeof metadata.selectedDate === 'string') {\n        dateToUse = metadata.selectedDate;\n      }\n    }\n\n    // Fallback to createdAt if metadata not available\n    if (!dateToUse) {\n      dateToUse = donation.createdAt;\n    }\n\n    try {\n      const parsed = new Date(dateToUse);\n      normalizedDate = isNaN(parsed.getTime())\n        ? new Date().toISOString().split('T')[0]\n        : parsed.toISOString().split('T')[0];\n    } catch {\n      normalizedDate = new Date().toISOString().split('T')[0];\n    }\n    setFormData({\n      donorName: donorFromTitle,\n      amount: donation.amount ? String(donation.amount) : '',\n      category: donation.category || '×›×œ×œ×™',\n      date: normalizedDate,\n      notes: donation.description || '',\n      isRecurring: Boolean(donation.is_recurring ?? donation.isRecurring ?? false),\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleSaveDonation = async () => {\n    // Validation\n    if (!formData.donorName.trim()) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×©× ×ª×•×¨×');\n      return;\n    }\n    if (!formData.amount.trim() || isNaN(Number(formData.amount)) || Number(formData.amount) <= 0) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×¡×›×•× ×ª×§×™×Ÿ');\n      return;\n    }\n\n    // Validate date - must be in YYYY-MM-DD format and valid date\n    if (!formData.date || !formData.date.trim()) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×ª××¨×™×š');\n      return;\n    }\n\n    // Check if date is in correct format (YYYY-MM-DD)\n    const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!dateRegex.test(formData.date.trim())) {\n      Alert.alert('×©×’×™××”', '×× × ×”×–×Ÿ ×ª××¨×™×š ×‘×¤×•×¨××˜ YYYY-MM-DD (×œ××©×œ: 2024-01-15)');\n      return;\n    }\n\n    // Check if date is valid\n    const dateParts = formData.date.trim().split('-');\n    const year = parseInt(dateParts[0], 10);\n    const month = parseInt(dateParts[1], 10);\n    const day = parseInt(dateParts[2], 10);\n    const testDate = new Date(year, month - 1, day);\n\n    if (\n      testDate.getFullYear() !== year ||\n      testDate.getMonth() !== month - 1 ||\n      testDate.getDate() !== day\n    ) {\n      Alert.alert('×©×’×™××”', '×”×ª××¨×™×š ×©×”×•×–×Ÿ ×œ× ×ª×§×™×Ÿ. ×× × ×”×–×Ÿ ×ª××¨×™×š ×—×•×§×™');\n      return;\n    }\n\n    try {\n      setIsMutating(true);\n\n      // Convert date from YYYY-MM-DD to ISO string format\n      let createdAtISO: string;\n      try {\n        const dateParts = formData.date.trim().split('-');\n        const year = parseInt(dateParts[0], 10);\n        const month = parseInt(dateParts[1], 10);\n        const day = parseInt(dateParts[2], 10);\n        const donationDate = new Date(year, month - 1, day);\n        // Set time to midnight UTC to ensure consistent date\n        createdAtISO = donationDate.toISOString();\n      } catch (error) {\n        logger.warn(LOG_SOURCE, 'Error parsing date, using current date', { error, date: formData.date });\n        createdAtISO = new Date().toISOString();\n      }\n\n      const basePayload = {\n        title: `×ª×¨×•××” ×-${formData.donorName}`,\n        description: formData.notes || '',\n        amount: Number(formData.amount),\n        category: formData.category,\n        isRecurring: formData.isRecurring,\n        // Store the selected date in metadata so we can use it later\n        metadata: {\n          selectedDate: createdAtISO,\n        },\n      };\n\n      if (isEditMode && editingDonationId) {\n        logger.info(LOG_SOURCE, 'Updating donation', { editingDonationId, selectedDate: createdAtISO });\n        const res = await enhancedDB.updateDonation(editingDonationId, basePayload as Partial<DonationData>);\n        if (!res.success) {\n          throw new Error(res.error || 'update failed');\n        }\n        // × ×§×” ×§××© ×›×“×™ ×œ×× ×•×¢ × ×ª×•× ×™× ××™×•×©× ×™×\n        await enhancedDB.clearAllCache();\n      } else {\n        logger.info(LOG_SOURCE, 'Creating donation', {\n          donorName: formData.donorName.trim(),\n          amount: Number(formData.amount),\n          category: formData.category,\n          selectedDate: createdAtISO,\n        });\n        const res = await enhancedDB.createDonation({\n          type: 'money' as const,\n          ...basePayload,\n        });\n        if (!res.success) {\n          throw new Error(res.error || 'create failed');\n        }\n        await enhancedDB.clearAllCache();\n      }\n      // Always refetch from server to ensure canonical data and IDs\n      await loadDonations(true);\n      logger.info(LOG_SOURCE, 'Donation saved successfully');\n\n      // Reset form\n      setFormData({\n        donorName: '',\n        amount: '',\n        category: '×›×¡×£',\n        date: new Date().toISOString().split('T')[0],\n        notes: '',\n        isRecurring: false,\n      });\n\n      setIsModalVisible(false);\n      setIsEditMode(false);\n      setEditingDonationId(null);\n      Alert.alert('×”×¦×œ×—×”', isEditMode ? '×”×ª×¨×•××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”' : '×”×ª×¨×•××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error saving donation', { error });\n      Alert.alert('×©×’×™××”', isEditMode ? '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×¢×“×›×Ÿ ××ª ×”×ª×¨×•××”' : '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×©××•×¨ ××ª ×”×ª×¨×•××”');\n    } finally {\n      setIsMutating(false);\n    }\n  };\n\n  const handleDeleteDonation = async (donationId: string) => {\n    logger.info(LOG_SOURCE, 'Prompting delete donation', { donationId });\n\n    // Use confirm for web compatibility\n    const confirmed = Platform.OS === 'web'\n      ? (typeof window !== 'undefined' && window.confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×ª×¨×•××” ×–×•?'))\n      : await new Promise<boolean>((resolve) => {\n        Alert.alert(\n          '××—×™×§×ª ×ª×¨×•××”',\n          '×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×ª×¨×•××” ×–×•?',\n          [\n            {\n              text: '×‘×™×˜×•×œ',\n              style: 'cancel',\n              onPress: () => resolve(false)\n            },\n            {\n              text: '××—×§',\n              style: 'destructive',\n              onPress: () => resolve(true)\n            },\n          ]\n        );\n      });\n\n    if (!confirmed) {\n      logger.info(LOG_SOURCE, 'Delete cancelled by user', { donationId });\n      return;\n    }\n\n    logger.info(LOG_SOURCE, 'Delete confirmed, starting deletion', { donationId });\n    // Optimistic UI with rollback\n    const prev = donationsList;\n    setDonationsList((p) => p.filter((d) => d.id !== donationId));\n\n    try {\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, 'Calling deleteDonation API', { donationId });\n      const res = await enhancedDB.deleteDonation(donationId);\n\n      logger.info(LOG_SOURCE, 'deleteDonation API response', { donationId, success: res.success, error: res.error });\n\n      if (!res.success) {\n        throw new Error(res.error || 'delete failed');\n      }\n\n      // × ×§×” ×§××© ×›×“×™ ×œ×× ×•×¢ × ×ª×•× ×™× ××™×•×©× ×™×\n      logger.info(LOG_SOURCE, 'Clearing cache after deletion', { donationId });\n      await enhancedDB.clearAllCache();\n\n      // Force refresh from server, ignoring cache\n      logger.info(LOG_SOURCE, 'Loading donations with force refresh', { donationId });\n      await loadDonations(true);\n\n      logger.info(LOG_SOURCE, 'Donation deleted successfully', { donationId });\n      Alert.alert('×”×¦×œ×—×”', '×”×ª×¨×•××” × ××—×§×” ×‘×”×¦×œ×—×”');\n    } catch (e) {\n      logger.error(LOG_SOURCE, 'Error deleting donation', { donationId, error: e, errorMessage: e instanceof Error ? e.message : String(e) });\n      setDonationsList(prev); // rollback\n      Alert.alert('×©×’×™××”', `×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×”×ª×¨×•××”: ${e instanceof Error ? e.message : String(e)}`);\n    } finally {\n      setIsMutating(false);\n      logger.debug(LOG_SOURCE, 'Delete donation mutation finished', { donationId });\n    }\n  };\n\n  const formatDate = (donation: Donation) => {\n    try {\n      // Try to get date from metadata first (user-selected date)\n      let dateString: string | null | undefined = null;\n      if (donation.metadata && typeof donation.metadata === 'object' && donation.metadata !== null) {\n        const metadata = donation.metadata as Record<string, unknown>;\n        if (metadata.selectedDate && typeof metadata.selectedDate === 'string') {\n          dateString = metadata.selectedDate;\n        }\n      }\n\n      // Fallback to createdAt if metadata not available\n      if (!dateString) {\n        dateString = donation.createdAt;\n      }\n\n      if (!dateString || typeof dateString !== 'string' || dateString.trim() === '') {\n        return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n      }\n      const date = new Date(dateString);\n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n      }\n      return date.toLocaleDateString('he-IL');\n    } catch {\n      return '×ª××¨×™×š ×œ× ×–××™×Ÿ';\n    }\n  };\n\n  const formatAmount = (amount?: number) => {\n    if (!amount) return '×œ× ×¦×•×™×Ÿ';\n    return `â‚ª${amount.toLocaleString('he-IL')}`;\n  };\n\n  const renderDonationItem = ({ item }: { item: Donation }) => (\n    <View style={styles.donationCard}>\n      <View style={styles.donationHeader}>\n        <View style={styles.donationInfo}>\n          <Text style={styles.donationTitle}>{item.title}</Text>\n          <Text style={styles.donationCategory}>{item.category}</Text>\n        </View>\n        {!viewOnly && (\n          <View style={{ flexDirection: 'row', alignItems: 'center', gap: LAYOUT_CONSTANTS.SPACING.XS }}>\n            <TouchableOpacity\n              onPress={() => handleEditDonation(item)}\n              style={styles.iconButton}\n              hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}\n            >\n              <Ionicons name=\"create-outline\" size={20} color={colors.textPrimary} />\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => handleDeleteDonation(item.id)}\n              style={styles.deleteButton}\n              hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}\n            >\n              <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n      <View style={styles.donationDetails}>\n        <View style={styles.detailRow}>\n          <Ionicons name=\"cash-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.detailText}>{isMounted ? formatAmount(item.amount) : ''}</Text>\n        </View>\n        <View style={styles.detailRow}>\n          <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.detailText}>{isMounted ? formatDate(item) : ''}</Text>\n        </View>\n        {Boolean(item.description?.trim()) && (\n          <View style={styles.detailRow}>\n            <Ionicons name=\"document-text-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.detailText} numberOfLines={2}>\n              {item.description}\n            </Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <Text style={styles.title}>× ×™×”×•×œ ×ª×¨×•××•×ª</Text>\n        </View>\n\n        {isLoading && donationsList.length === 0 ? (\n          <View style={styles.loadingContainer}>\n            <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×ª×¨×•××•×ª...</Text>\n          </View>\n        ) : donationsList.length === 0 ? (\n          <View style={styles.emptyContainer}>\n            <Ionicons name=\"heart-outline\" size={64} color={colors.textSecondary} />\n            <Text style={styles.emptyText}>××™×Ÿ ×ª×¨×•××•×ª ×¢×“×™×™×Ÿ</Text>\n            <Text style={styles.emptySubtext}>×”×•×¡×£ ×ª×¨×•××” ×—×“×©×” ×›×“×™ ×œ×”×ª×—×™×œ</Text>\n          </View>\n        ) : (\n          <ScrollContainer\n            contentStyle={styles.listContent}\n            showsVerticalScrollIndicator={false}\n            refreshControl={\n              <RefreshControl\n                refreshing={isLoading || isMutating}\n                onRefresh={loadDonations}\n                tintColor={colors.secondary}\n              />\n            }\n          >\n            {donationsList.map((item) => (\n              <React.Fragment key={item.id}>\n                {renderDonationItem({ item })}\n              </React.Fragment>\n            ))}\n          </ScrollContainer>\n        )}\n      </View>\n\n      {/* Floating Add Donation Button - Always visible on top */}\n      {!viewOnly && (\n        <TouchableOpacity\n          style={styles.fabButton}\n          onPress={handleAddDonation}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"add\" size={28} color=\"white\" />\n          <Text style={styles.fabButtonText}>×”×•×¡×£ ×ª×¨×•××”</Text>\n        </TouchableOpacity>\n      )}\n\n\n      {/* Add Donation Modal */}\n      <Modal\n        visible={isModalVisible && !viewOnly}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsModalVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>{isEditMode ? '×¢×¨×•×š ×ª×¨×•××”' : '×”×•×¡×£ ×ª×¨×•××” ×—×“×©×”'}</Text>\n              <TouchableOpacity\n                onPress={() => setIsModalVisible(false)}\n                style={styles.closeButton}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×©× ×”×ª×•×¨× *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.donorName}\n                  onChangeText={(text) => setFormData({ ...formData, donorName: text })}\n                  placeholder=\"×”×–×Ÿ ×©× ×ª×•×¨×\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×¡×›×•× (â‚ª) *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.amount}\n                  onChangeText={(text) => setFormData({ ...formData, amount: text })}\n                  placeholder=\"×”×–×Ÿ ×¡×›×•×\"\n                  keyboardType=\"numeric\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×§×˜×’×•×¨×™×”</Text>\n                <View style={styles.categoryContainer}>\n                  {DONATION_CATEGORIES.map((category) => (\n                    <TouchableOpacity\n                      key={category}\n                      style={[\n                        styles.categoryChip,\n                        formData.category === category && styles.categoryChipSelected,\n                      ]}\n                      onPress={() => setFormData({ ...formData, category })}\n                    >\n                      <Text\n                        style={[\n                          styles.categoryChipText,\n                          formData.category === category && styles.categoryChipTextSelected,\n                        ]}\n                      >\n                        {category}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª××¨×™×š *</Text>\n                <DatePicker\n                  value={formData.date ? new Date(formData.date + 'T00:00:00') : new Date()}\n                  onChange={(date) => {\n                    if (date && date instanceof Date && !isNaN(date.getTime())) {\n                      const dateStr = date.toISOString().split('T')[0];\n                      setFormData({ ...formData, date: dateStr });\n                    }\n                  }}\n                  placeholder=\"×‘×—×¨ ×ª××¨×™×š\"\n                />\n              </View>\n\n              <View style={[styles.formGroup, styles.recurringGroup]}>\n                <View style={styles.recurringRow}>\n                  <Text style={styles.label}>×¡××Ÿ ×›×”×•×¨××ª ×§×‘×¢</Text>\n                  <Switch\n                    value={formData.isRecurring}\n                    onValueChange={(value) => setFormData({ ...formData, isRecurring: value })}\n                    thumbColor={colors.white}\n                    trackColor={{ false: colors.border, true: colors.info }}\n                  />\n                </View>\n                <Text style={styles.helperText}>\n                  ×ª×¨×•××•×ª ×‘×”×•×¨××ª ×§×‘×¢ × ×¡×¤×¨×•×ª ×›\"×ª×•×¨××™× ×¤×¢×™×œ×™×\" ×‘×“×£ ×”× ×—×™×ª×” ×•××ª×¢×“×›× ×•×ª ×‘×¨×’×¢ ×©× ×•×¡×¤×•×ª ××• × ××—×§×•×ª.\n                </Text>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×”×¢×¨×•×ª</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={formData.notes}\n                  onChangeText={(text) => setFormData({ ...formData, notes: text })}\n                  placeholder=\"×”×¢×¨×•×ª × ×•×¡×¤×•×ª (××•×¤×¦×™×•× ×œ×™)\"\n                  multiline\n                  numberOfLines={4}\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n            </ScrollView>\n\n            <View style={styles.modalFooter}>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setIsModalVisible(false)}\n              >\n                <Text style={styles.cancelButtonText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.saveButton]}\n                onPress={handleSaveDonation}\n                disabled={isMutating}\n              >\n                <Text style={styles.saveButtonText}>{isMutating ? (isEditMode ? '××¢×“×›×Ÿ...' : '×©×•××¨...') : (isEditMode ? '×¢×“×›×Ÿ' : '×©××•×¨')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Wipe All Confirmation Modal */}\n      <Modal\n        visible={isWipeVisible}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsWipeVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>××™×©×•×¨ ××—×™×§×ª ×›×œ ×”× ×ª×•× ×™×</Text>\n              <TouchableOpacity\n                onPress={() => setIsWipeVisible(false)}\n                style={styles.closeButton}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n            <View style={styles.modalBody}>\n              <Text style={{ color: colors.textPrimary, marginBottom: LAYOUT_CONSTANTS.SPACING.SM }}>\n                ×¤×¢×•×œ×” ××¡×•×›× ×ª! ××—×™×§×ª ×›×œ ×”× ×ª×•× ×™× ×ª×‘×•×¦×¢ ×‘××•×¤×Ÿ ×¡×•×¤×™ ×‘×¦×“ ×”×©×¨×ª. ×›×“×™ ×œ××©×¨, ×”×§×œ×“/×™ CONFIRM:\n              </Text>\n              <TextInput\n                style={styles.input}\n                value={confirmText}\n                onChangeText={setConfirmText}\n                placeholder=\"CONFIRM\"\n                autoCapitalize=\"characters\"\n                placeholderTextColor={colors.textTertiary}\n              />\n            </View>\n            <View style={styles.modalFooter}>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setIsWipeVisible(false)}\n              >\n                <Text style={styles.cancelButtonText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modalButton, styles.saveButton, { backgroundColor: colors.error }]}\n                onPress={handleWipeAll}\n                disabled={isMutating}\n              >\n                <Text style={styles.saveButtonText}>{isMutating ? '××•×—×§...' : '××—×§ ×”×›×œ'}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  content: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    alignSelf: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.secondary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  addButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  dangerButton: {\n    backgroundColor: colors.error,\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  listContent: {\n    paddingBottom: 120, // ××§×•× ×œ×›×¤×ª×•×¨ FAB + ××¨×•×•×— × ×•×¡×£\n  },\n  donationCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  donationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  donationInfo: {\n    flex: 1,\n  },\n  donationTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  donationCategory: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  deleteButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  iconButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  donationDetails: {\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderTopLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderTopRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modalBody: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    maxHeight: 500,\n  },\n  formGroup: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  recurringGroup: {\n    borderTopWidth: 1,\n    borderTopColor: colors.backgroundTertiary,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  recurringRow: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 6,\n  },\n  helperText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'right',\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  categoryContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  categoryChip: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  categoryChipSelected: {\n    backgroundColor: colors.secondary,\n    borderColor: colors.secondary,\n  },\n  categoryChipText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  categoryChipTextSelected: {\n    color: 'white',\n    fontWeight: '600',\n  },\n  modalFooter: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  modalButton: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  cancelButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  saveButton: {\n    backgroundColor: colors.secondary,\n  },\n  saveButtonText: {\n    fontSize: FontSizes.medium,\n    color: 'white',\n    fontWeight: '600',\n  },\n  fabButton: {\n    ...(Platform.OS === 'web' ? { position: 'fixed' as any } : { position: 'absolute' }),\n    right: LAYOUT_CONSTANTS.SPACING.XL,\n    bottom: 200, // ××¨×•×•×— ××”-bottom bar\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n    backgroundColor: colors.secondary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 6,\n    elevation: 10,\n    opacity: 0.8,\n    zIndex: 1000,\n    minWidth: 140,\n  },\n  fabButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminOrgApprovalsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1340,1343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1340,1343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":82,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":15}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useCallback } from 'react';\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, Alert, RefreshControl } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\n\ntype OrgApplication = {\n  id: string;\n  orgName: string;\n  orgType: string;\n  registrationNumber?: string;\n  contactName: string;\n  contactEmail: string;\n  contactPhone: string;\n  website?: string;\n  city?: string;\n  activityAreas: string[];\n  needs: string;\n  offering: string;\n  description: string;\n  status: 'pending' | 'approved' | 'rejected';\n  createdAt: string;\n  updatedAt: string;\n  _ownerPartition?: string; // for admin queue\n};\n\nexport default function AdminOrgApprovalsScreen() {\n  const { t } = useTranslation(['auth', 'common']);\n  const { selectedUser } = useUser();\n  const [items, setItems] = useState<OrgApplication[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const isAdmin = (selectedUser?.roles || []).includes('admin');\n\n  const load = useCallback(async () => {\n    try {\n      setRefreshing(true);\n      const data = await db.listOrgApplications('admin_org_queue');\n      setItems((data as any[]) as OrgApplication[]);\n    } catch (e) {\n       \n      console.error('admin load error', e);\n    } finally {\n      setRefreshing(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  const updateStatus = async (app: OrgApplication, status: 'approved' | 'rejected') => {\n    try {\n      const owner = app._ownerPartition || app.contactEmail.toLowerCase();\n      await db.updateOrgApplication(owner, app.id, { status, updatedAt: new Date().toISOString() });\n      await db.updateOrgApplication('admin_org_queue', app.id, { status, updatedAt: new Date().toISOString() });\n      if (status === 'approved') {\n        // create organization record keyed by owner partition\n        await db.createOrganization(owner, app.id, {\n          id: app.id,\n          name: app.orgName,\n          type: app.orgType,\n          registrationNumber: app.registrationNumber,\n          contactName: app.contactName,\n          contactEmail: app.contactEmail,\n          contactPhone: app.contactPhone,\n          website: app.website,\n          city: app.city,\n          activityAreas: app.activityAreas,\n          createdAt: app.createdAt,\n          updatedAt: new Date().toISOString(),\n          status: 'active',\n        });\n      }\n      Alert.alert(\n        status === 'approved' ? (t('common:confirm') || '××™×©×•×¨') : (t('common:done') || '×¡×™×•×'),\n        status === 'approved' ? '×”×‘×§×©×” ××•×©×¨×”' : '×”×‘×§×©×” × ×“×—×ª×”'\n      );\n      load();\n    } catch (e) {\n      Alert.alert('×©×’×™××”', '×¢×“×›×•×Ÿ ×”×¡×˜×˜×•×¡ × ×›×©×œ');\n    }\n  };\n\n  const renderItem = ({ item }: { item: OrgApplication }) => (\n    <View style={styles.card}>\n      <View style={styles.rowBetween}>\n        <Text style={styles.title}>{item.orgName}</Text>\n        <Text style={[styles.status, item.status === 'pending' ? styles.pending : item.status === 'approved' ? styles.approved : styles.rejected]}>\n          {item.status}\n        </Text>\n      </View>\n      <Text style={styles.sub}>{item.orgType}{item.city ? ` Â· ${item.city}` : ''}</Text>\n      <Text style={styles.body}>{item.description}</Text>\n      <View style={styles.actions}>\n        <TouchableOpacity style={[styles.btn, styles.reject]} onPress={() => updateStatus(item, 'rejected')}>\n          <Text style={styles.btnText}>×“×—×™×™×”</Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={[styles.btn, styles.approve]} onPress={() => updateStatus(item, 'approved')}>\n          <Text style={styles.btnText}>××™×©×•×¨</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  if (!isAdmin) {\n    return (\n      <View style={styles.center}>\n        <Text style={styles.body}>××™×Ÿ ×œ×š ×”×¨×©××•×ª ×œ×¦×¤×•×ª ×‘×“×£ ×–×”</Text>\n      </View>\n    );\n  }\n\n  return (\n    <FlatList\n      style={styles.container}\n      contentContainerStyle={{\n        padding: 16,\n        flexGrow: 1,\n        minHeight: '150%' // Ensure content is always scrollable\n      }}\n      data={items}\n      keyExtractor={(it) => it.id}\n      renderItem={renderItem}\n      refreshControl={<RefreshControl refreshing={refreshing} onRefresh={load} />}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: colors.background },\n  center: { flex: 1, alignItems: 'center', justifyContent: 'center' },\n  card: { backgroundColor: colors.backgroundSecondary, padding: 12, borderRadius: 12, marginBottom: 12, borderWidth: 1, borderColor: colors.border },\n  rowBetween: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n  title: { fontSize: FontSizes.medium, fontWeight: '700', color: colors.textPrimary },\n  sub: { fontSize: FontSizes.small, color: colors.textSecondary, marginBottom: 6 },\n  body: { fontSize: FontSizes.body, color: colors.textPrimary },\n  status: { fontSize: FontSizes.small, fontWeight: '700' },\n  pending: { color: colors.warning },\n  approved: { color: colors.success },\n  rejected: { color: colors.error },\n  actions: { flexDirection: 'row', gap: 8, marginTop: 10, justifyContent: 'flex-end' },\n  btn: { paddingVertical: 8, paddingHorizontal: 12, borderRadius: 10 },\n  approve: { backgroundColor: colors.primary },\n  reject: { backgroundColor: colors.error },\n  btnText: { color: colors.white, fontWeight: '700' },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminPeopleScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[954,957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[954,957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":57,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1478,1481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1478,1481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isAdmin' is assigned a value but never used.","line":62,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5828,5831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5828,5831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n} from 'react-native';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\n\ninterface AdminPeopleScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface CommunityMember {\n  id: string;\n  name: string;\n  role: string; // ×”×ª×¤×§×™×“/×”×ª×¨×•××” ×©×œ×• ×œ×§×”×™×œ×”\n  description?: string;\n  contact_info?: {\n    email?: string;\n    phone?: string;\n    [key: string]: any;\n  };\n  status: 'active' | 'inactive';\n  created_by?: string;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface MemberFormData {\n  name: string;\n  role: string;\n  description: string;\n  email: string;\n  phone: string;\n  status: 'active' | 'inactive';\n}\n\nconst LOG_SOURCE = 'AdminPeopleScreen';\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminPeopleScreen({ navigation }: AdminPeopleScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser, isAdmin } = useUser();\n  const [membersList, setMembersList] = useState<CommunityMember[]>([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editingMemberId, setEditingMemberId] = useState<string | null>(null);\n  const [formData, setFormData] = useState<MemberFormData>({\n    name: '',\n    role: '',\n    description: '',\n    email: '',\n    phone: '',\n    status: 'active',\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMutating, setIsMutating] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\n\n  useEffect(() => {\n    logger.info(LOG_SOURCE, 'Initializing admin people screen');\n    loadMembers();\n  }, [statusFilter, searchQuery]);\n\n  const loadMembers = async () => {\n    logger.info(LOG_SOURCE, 'Loading community members list');\n    try {\n      setIsLoading(true);\n      const filters: { status?: 'active' | 'inactive'; search?: string } = {};\n\n      if (statusFilter !== 'all') {\n        filters.status = statusFilter;\n      }\n\n      if (searchQuery.trim()) {\n        filters.search = searchQuery.trim();\n      }\n\n      const response = await apiService.getCommunityMembers(filters);\n\n      if (response.success && Array.isArray(response.data)) {\n        setMembersList(response.data);\n        logger.info(LOG_SOURCE, 'Members loaded successfully', {\n          count: response.data.length,\n        });\n      } else {\n        logger.warn(LOG_SOURCE, 'Failed to load members', { response });\n        setMembersList([]);\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error loading members', { error });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×˜×¢×•×Ÿ ××ª ×¨×©×™××ª ×”×× ×©×™×');\n      setMembersList([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddMember = () => {\n    logger.info(LOG_SOURCE, 'Opening add member modal');\n    setIsEditMode(false);\n    setEditingMemberId(null);\n    setFormData({\n      name: '',\n      role: '',\n      description: '',\n      email: '',\n      phone: '',\n      status: 'active',\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleEditMember = (member: CommunityMember) => {\n    logger.info(LOG_SOURCE, 'Opening edit member modal', { memberId: member.id });\n    setIsEditMode(true);\n    setEditingMemberId(member.id);\n    setFormData({\n      name: member.name || '',\n      role: member.role || '',\n      description: member.description || '',\n      email: member.contact_info?.email || '',\n      phone: member.contact_info?.phone || '',\n      status: member.status || 'active',\n    });\n    setIsModalVisible(true);\n  };\n\n  const handleDeleteMember = (member: CommunityMember) => {\n    Alert.alert(\n      '××—×™×§×ª ×¨×©×•××”',\n      `×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ${member.name}?`,\n      [\n        { text: '×‘×™×˜×•×œ', style: 'cancel' },\n        {\n          text: '××—×§',\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              setIsMutating(true);\n              logger.info(LOG_SOURCE, 'Deleting member', { memberId: member.id });\n              const response = await apiService.deleteCommunityMember(member.id);\n\n              if (response.success) {\n                logger.info(LOG_SOURCE, 'Member deleted successfully');\n                await loadMembers();\n                Alert.alert('×‘×•×¦×¢', '×”×¨×©×•××” × ××—×§×” ×‘×”×¦×œ×—×”');\n              } else {\n                throw new Error(response.error || 'Failed to delete member');\n              }\n            } catch (error) {\n              logger.error(LOG_SOURCE, 'Error deleting member', { error });\n              Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ××—×•×§ ××ª ×”×¨×©×•××”');\n            } finally {\n              setIsMutating(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const handleSaveMember = async () => {\n    if (!formData.name.trim() || !formData.role.trim()) {\n      Alert.alert('×©×’×™××”', '×©× ×•×ª×¤×§×™×“ ×”× ×©×“×•×ª ×—×•×‘×”');\n      return;\n    }\n\n    try {\n      setIsMutating(true);\n      logger.info(LOG_SOURCE, isEditMode ? 'Updating member' : 'Creating member', {\n        isEditMode,\n        memberId: editingMemberId,\n      });\n\n      const memberData: any = {\n        name: formData.name.trim(),\n        role: formData.role.trim(),\n        description: formData.description.trim() || undefined,\n        status: formData.status,\n        contact_info: {},\n      };\n\n      if (formData.email.trim()) {\n        memberData.contact_info.email = formData.email.trim();\n      }\n      if (formData.phone.trim()) {\n        memberData.contact_info.phone = formData.phone.trim();\n      }\n\n      if (Object.keys(memberData.contact_info).length === 0) {\n        memberData.contact_info = undefined;\n      }\n\n      if (selectedUser?.id) {\n        memberData.created_by = selectedUser.id;\n      }\n\n      let response;\n      if (isEditMode && editingMemberId) {\n        response = await apiService.updateCommunityMember(editingMemberId, memberData);\n      } else {\n        response = await apiService.createCommunityMember(memberData);\n      }\n\n      if (response.success) {\n        logger.info(LOG_SOURCE, 'Member saved successfully');\n        setIsModalVisible(false);\n        await loadMembers();\n        Alert.alert('×‘×•×¦×¢', isEditMode ? '×”×¨×©×•××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”' : '×”×¨×©×•××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');\n      } else {\n        throw new Error(response.error || 'Failed to save member');\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error saving member', { error });\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×”×™×” ×œ×©××•×¨ ××ª ×”×¨×©×•××”');\n    } finally {\n      setIsMutating(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('he-IL', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n      });\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>× ×™×”×•×œ ×× ×©×™×</Text>\n        <TouchableOpacity\n          style={styles.addButton}\n          onPress={viewOnly ? undefined : handleAddMember}\n          disabled={viewOnly || isMutating}\n        >\n          <Ionicons name=\"add\" size={24} color=\"white\" />\n          <Text style={styles.addButtonText}>×”×•×¡×£ ×¨×©×•××”</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Filters */}\n      <View style={styles.filtersContainer}>\n        <View style={styles.searchContainer}>\n          <Ionicons name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholder=\"×—×¤×© ×œ×¤×™ ×©×, ×ª×¤×§×™×“ ××• ×ª×™××•×¨...\"\n            placeholderTextColor={colors.textTertiary}\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity onPress={() => setSearchQuery('')} style={styles.clearButton}>\n              <Ionicons name=\"close-circle\" size={20} color={colors.textSecondary} />\n            </TouchableOpacity>\n          )}\n        </View>\n\n        <View style={styles.statusFilterContainer}>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'all' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('all')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'all' && styles.filterButtonTextActive]}>\n              ×”×›×œ\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'active' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('active')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'active' && styles.filterButtonTextActive]}>\n              ×¤×¢×™×œ\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.filterButton, statusFilter === 'inactive' && styles.filterButtonActive]}\n            onPress={() => setStatusFilter('inactive')}\n          >\n            <Text style={[styles.filterButtonText, statusFilter === 'inactive' && styles.filterButtonTextActive]}>\n              ×œ× ×¤×¢×™×œ\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Members List */}\n      {isLoading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n          <Text style={styles.loadingText}>×˜×•×¢×Ÿ...</Text>\n        </View>\n      ) : membersList.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"people-outline\" size={64} color={colors.textSecondary} />\n          <Text style={styles.emptyText}>××™×Ÿ ×¨×©×•××•×ª</Text>\n          <Text style={styles.emptySubtext}>\n            {searchQuery || statusFilter !== 'all'\n              ? '×œ× × ××¦××• ×¨×©×•××•×ª ×”×ª×•×××•×ª ×œ×—×™×¤×•×©'\n              : '×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¨×©×•××”\" ×›×“×™ ×œ×”×ª×—×™×œ'}\n          </Text>\n        </View>\n      ) : (\n        <ScrollView\n          style={styles.listContainer}\n          contentContainerStyle={{\n            flexGrow: 1,\n            minHeight: '150%' // Ensure content is always scrollable\n          }}\n          refreshControl={\n            <RefreshControl refreshing={isLoading} onRefresh={loadMembers} />\n          }\n        >\n          {membersList.map((member) => (\n            <View key={member.id} style={styles.memberCard}>\n              <View style={styles.memberHeader}>\n                <View style={styles.memberInfo}>\n                  <Text style={styles.memberName}>{member.name}</Text>\n                  <View style={styles.memberMeta}>\n                    <View style={[styles.statusBadge, member.status === 'active' ? styles.statusBadgeActive : styles.statusBadgeInactive]}>\n                      <Text style={[styles.statusText, member.status === 'active' ? styles.statusTextActive : styles.statusTextInactive]}>\n                        {member.status === 'active' ? '×¤×¢×™×œ' : '×œ× ×¤×¢×™×œ'}\n                      </Text>\n                    </View>\n                    <Text style={styles.memberDate}>{formatDate(member.created_at)}</Text>\n                  </View>\n                </View>\n                <View style={styles.memberActions}>\n                  {!viewOnly && (\n                    <>\n                      <TouchableOpacity\n                        style={styles.actionButton}\n                        onPress={() => handleEditMember(member)}\n                        disabled={isMutating}\n                      >\n                        <Ionicons name=\"create-outline\" size={20} color={colors.primary} />\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        style={styles.actionButton}\n                        onPress={() => handleDeleteMember(member)}\n                        disabled={isMutating}\n                      >\n                        <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n                      </TouchableOpacity>\n                    </>\n                  )}\n                </View>\n              </View>\n\n              <View style={styles.memberDetails}>\n                <View style={styles.detailRow}>\n                  <Ionicons name=\"briefcase-outline\" size={16} color={colors.textSecondary} />\n                  <Text style={styles.detailLabel}>×ª×¤×§×™×“/×ª×¨×•××”:</Text>\n                  <Text style={styles.detailValue}>{member.role}</Text>\n                </View>\n\n                {member.description && (\n                  <View style={styles.detailRow}>\n                    <Ionicons name=\"document-text-outline\" size={16} color={colors.textSecondary} />\n                    <Text style={styles.detailValue} numberOfLines={2}>{member.description}</Text>\n                  </View>\n                )}\n\n                {(member.contact_info?.email || member.contact_info?.phone) && (\n                  <View style={styles.contactInfo}>\n                    {member.contact_info?.email && (\n                      <View style={styles.detailRow}>\n                        <Ionicons name=\"mail-outline\" size={16} color={colors.textSecondary} />\n                        <Text style={styles.detailValue}>{member.contact_info.email}</Text>\n                      </View>\n                    )}\n                    {member.contact_info?.phone && (\n                      <View style={styles.detailRow}>\n                        <Ionicons name=\"call-outline\" size={16} color={colors.textSecondary} />\n                        <Text style={styles.detailValue}>{member.contact_info.phone}</Text>\n                      </View>\n                    )}\n                  </View>\n                )}\n              </View>\n            </View>\n          ))}\n        </ScrollView>\n      )}\n\n      {/* Add/Edit Modal */}\n      <Modal\n        visible={isModalVisible && !viewOnly}\n        animationType=\"slide\"\n        transparent={true}\n        onRequestClose={() => setIsModalVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>\n                {isEditMode ? '×¢×¨×•×š ×¨×©×•××”' : '×”×•×¡×£ ×¨×©×•××” ×—×“×©×”'}\n              </Text>\n              <TouchableOpacity\n                onPress={() => setIsModalVisible(false)}\n                style={styles.closeButton}\n                disabled={isMutating}\n              >\n                <Ionicons name=\"close\" size={24} color={colors.textPrimary} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView style={styles.modalBody} showsVerticalScrollIndicator={false}>\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×©× *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.name}\n                  onChangeText={(text) => setFormData({ ...formData, name: text })}\n                  placeholder=\"×”×–×Ÿ ×©×\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª×¤×§×™×“/×ª×¨×•××” ×œ×§×”×™×œ×” *</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.role}\n                  onChangeText={(text) => setFormData({ ...formData, role: text })}\n                  placeholder=\"×”×–×Ÿ ×ª×¤×§×™×“ ××• ×ª×¨×•××”\"\n                  placeholderTextColor={colors.textTertiary}\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×ª×™××•×¨</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={formData.description}\n                  onChangeText={(text) => setFormData({ ...formData, description: text })}\n                  placeholder=\"×ª×™××•×¨ × ×•×¡×£ ×¢×œ ×”×ª×¨×•××” (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  multiline\n                  numberOfLines={4}\n                  textAlignVertical=\"top\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>××™××™×™×œ</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.email}\n                  onChangeText={(text) => setFormData({ ...formData, email: text })}\n                  placeholder=\"××™××™×™×œ (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×˜×œ×¤×•×Ÿ</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.phone}\n                  onChangeText={(text) => setFormData({ ...formData, phone: text })}\n                  placeholder=\"×˜×œ×¤×•×Ÿ (××•×¤×¦×™×•× ×œ×™)\"\n                  placeholderTextColor={colors.textTertiary}\n                  keyboardType=\"phone-pad\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>×¡×˜×˜×•×¡</Text>\n                <View style={styles.statusSelector}>\n                  <TouchableOpacity\n                    style={[\n                      styles.statusOption,\n                      formData.status === 'active' && styles.statusOptionActive,\n                    ]}\n                    onPress={() => setFormData({ ...formData, status: 'active' })}\n                  >\n                    <Text\n                      style={[\n                        styles.statusOptionText,\n                        formData.status === 'active' && styles.statusOptionTextActive,\n                      ]}\n                    >\n                      ×¤×¢×™×œ\n                    </Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[\n                      styles.statusOption,\n                      formData.status === 'inactive' && styles.statusOptionActive,\n                    ]}\n                    onPress={() => setFormData({ ...formData, status: 'inactive' })}\n                  >\n                    <Text\n                      style={[\n                        styles.statusOptionText,\n                        formData.status === 'inactive' && styles.statusOptionTextActive,\n                      ]}\n                    >\n                      ×œ× ×¤×¢×™×œ\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              <TouchableOpacity\n                style={[styles.saveButton, isMutating && styles.saveButtonDisabled]}\n                onPress={handleSaveMember}\n                disabled={isMutating}\n              >\n                {isMutating ? (\n                  <ActivityIndicator size=\"small\" color=\"white\" />\n                ) : (\n                  <Text style={styles.saveButtonText}>\n                    {isEditMode ? '×¢×“×›×Ÿ' : '×©××•×¨'}\n                  </Text>\n                )}\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.primary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  addButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  filtersContainer: {\n    backgroundColor: colors.background,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  searchIcon: {\n    marginLeft: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  clearButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  statusFilterContainer: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  filterButton: {\n    flex: 1,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n  },\n  filterButtonActive: {\n    backgroundColor: colors.primary,\n  },\n  filterButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  filterButtonTextActive: {\n    color: 'white',\n    fontWeight: '600',\n  },\n  listContainer: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  memberCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  memberHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  memberInfo: {\n    flex: 1,\n  },\n  memberName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  memberMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statusBadge: {\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingVertical: 2,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  statusBadgeActive: {\n    backgroundColor: colors.successLight,\n  },\n  statusBadgeInactive: {\n    backgroundColor: colors.errorLight,\n  },\n  statusText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  statusTextActive: {\n    color: colors.success,\n  },\n  statusTextInactive: {\n    color: colors.error,\n  },\n  memberDate: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  memberActions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  actionButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  memberDetails: {\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  detailLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  detailValue: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  contactInfo: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.XS,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.XS,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    backgroundColor: colors.background,\n    borderTopLeftRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    borderTopRightRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  closeButton: {\n    padding: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  modalBody: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  formGroup: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  statusSelector: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  statusOption: {\n    flex: 1,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    borderWidth: 2,\n    borderColor: 'transparent',\n  },\n  statusOptionActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  statusOptionText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  statusOptionTextActive: {\n    color: 'white',\n  },\n  saveButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  saveButtonDisabled: {\n    opacity: 0.6,\n  },\n  saveButtonText: {\n    color: 'white',\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminReviewScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[375,378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[375,378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is defined but never used.","line":14,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":55}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { View, Text, StyleSheet, SafeAreaView } from 'react-native';\nimport { NavigationProp } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { Ionicons } from '@expo/vector-icons';\n\ninterface AdminReviewScreenProps {\n  navigation: NavigationProp<any>;\n}\n\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\nexport default function AdminReviewScreen({ navigation }: AdminReviewScreenProps) {\n  useAdminProtection();\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.content}>\n        <Ionicons name=\"shield-checkmark-outline\" size={64} color={colors.textSecondary} />\n        <Text style={styles.title}>×‘×™×§×•×¨×ª</Text>\n        <Text style={styles.subtitle}>××¡×š ×–×” ×™×”×™×” ×–××™×Ÿ ×‘×§×¨×•×‘</Text>\n        <Text style={styles.description}>\n          ×›××Ÿ ×ª×•×›×œ ×œ××©×¨ ×¤×¨×•×¤×™×œ×™× ×•×¤×•×¡×˜×™× ×—×•×©×“×™×\n        </Text>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  subtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XS,\n  },\n  description: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTableRowsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RefreshControl' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RefreshControl"},"fix":{"range":[183,201],"text":""},"desc":"Remove unused variable \"RefreshControl\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1158,1161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1158,1161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":58,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2149,2152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2149,2152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2934,2937],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2934,2937],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3870,3873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3870,3873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4369,4372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4369,4372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":241,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7033,7036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7033,7036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n  FlatList,\n  Platform,\n} from 'react-native';\nimport { RouteProp } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport DatePicker from '../components/DatePicker';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { apiService, ApiResponse } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminTableRowsScreenProps {\n  route: RouteProp<AdminStackParamList, 'AdminTableRows'>;\n}\n\ninterface TableColumn {\n  id: string;\n  name: string;\n  data_type: 'text' | 'number' | 'date';\n  is_required: boolean;\n  display_order: number;\n}\n\ninterface TableRow {\n  id: string;\n  table_id: string;\n  data: Record<string, any>;\n  created_by?: string;\n  created_at: string;\n  updated_at?: string;\n}\n\ninterface AdminTable {\n  id: string;\n  name: string;\n  description?: string;\n  columns: TableColumn[];\n}\n\nexport default function AdminTableRowsScreen({ route }: AdminTableRowsScreenProps) {\n  useAdminProtection();\n  const { selectedUser } = useUser();\n  const { tableId, tableName } = route.params;\n\n  const [table, setTable] = useState<AdminTable | null>(null);\n  const [rows, setRows] = useState<TableRow[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [updating, setUpdating] = useState<string | null>(null);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [showRowModal, setShowRowModal] = useState(false);\n  const [editingRowId, setEditingRowId] = useState<string | null>(null);\n  const [showDatePicker, setShowDatePicker] = useState<string | null>(null);\n\n  const [formData, setFormData] = useState<Record<string, any>>({});\n  const [dateValues, setDateValues] = useState<Record<string, Date>>({});\n\n  const fetchTable = useCallback(async () => {\n    setLoading(true);\n    try {\n      const res: ApiResponse<AdminTable> = await apiService.adminTables.getById(tableId, true);\n      if (res.success && res.data) {\n        setTable(res.data);\n        setRows(res.data.rows || []);\n      } else {\n        Alert.alert('×©×’×™××”', res.error || '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×˜×‘×œ×”');\n      }\n    } catch (error) {\n      console.error('Error fetching table:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×˜×‘×œ×”');\n    } finally {\n      setLoading(false);\n    }\n  }, [tableId]);\n\n  useEffect(() => {\n    fetchTable();\n  }, [fetchTable]);\n\n  const resetForm = () => {\n    if (table) {\n      const initialData: Record<string, any> = {};\n      const initialDates: Record<string, Date> = {};\n      table.columns.forEach((col) => {\n        initialData[col.name] = '';\n        if (col.data_type === 'date') {\n          initialDates[col.name] = new Date();\n        }\n      });\n      setFormData(initialData);\n      setDateValues(initialDates);\n    }\n    setEditingRowId(null);\n  };\n\n  const openCreateModal = () => {\n    resetForm();\n    setShowRowModal(true);\n  };\n\n  const openEditModal = (row: TableRow) => {\n    const rowData = { ...row.data };\n    const dates: Record<string, Date> = {};\n    \n    if (table) {\n      table.columns.forEach((col) => {\n        if (col.data_type === 'date' && rowData[col.name]) {\n          dates[col.name] = new Date(rowData[col.name]);\n        }\n      });\n    }\n\n    setFormData(rowData);\n    setDateValues(dates);\n    setEditingRowId(row.id);\n    setShowRowModal(true);\n  };\n\n  const updateFormField = (columnName: string, value: any) => {\n    setFormData({ ...formData, [columnName]: value });\n  };\n\n  const handleSaveRow = async () => {\n    if (!table) return;\n\n    // Validate required fields\n    for (const col of table.columns) {\n      if (col.is_required) {\n        const value = formData[col.name];\n        if (value === undefined || value === null || value === '') {\n          Alert.alert('×©×’×™××”', `×©×“×” ×—×•×‘×”: ${col.name}`);\n          return;\n        }\n      }\n    }\n\n    // Prepare data\n    const rowData: Record<string, any> = {};\n    table.columns.forEach((col) => {\n      const value = formData[col.name];\n      if (value !== undefined && value !== null && value !== '') {\n        if (col.data_type === 'number') {\n          rowData[col.name] = Number(value);\n        } else if (col.data_type === 'date') {\n          const dateValue = dateValues[col.name] || new Date(value);\n          rowData[col.name] = dateValue.toISOString();\n        } else {\n          rowData[col.name] = String(value);\n        }\n      } else if (!col.is_required) {\n        rowData[col.name] = null;\n      }\n    });\n\n    try {\n      if (editingRowId) {\n        setUpdating(editingRowId);\n        const res: ApiResponse<TableRow> = await apiService.adminTables.updateRow(\n          tableId,\n          editingRowId,\n          { data: rowData }\n        );\n        if (res.success) {\n          Alert.alert('×”×¦×œ×—×”', '×¨×©×•××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”');\n          setShowRowModal(false);\n          resetForm();\n          await fetchTable();\n        } else {\n          Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¨×©×•××”');\n        }\n        setUpdating(null);\n      } else {\n        setCreating(true);\n        const res: ApiResponse<TableRow> = await apiService.adminTables.createRow(tableId, {\n          data: rowData,\n        });\n        if (res.success) {\n          Alert.alert('×”×¦×œ×—×”', '×¨×©×•××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');\n          setShowRowModal(false);\n          resetForm();\n          await fetchTable();\n        } else {\n          Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘×™×¦×™×¨×ª ×¨×©×•××”');\n        }\n        setCreating(false);\n      }\n    } catch (error) {\n      console.error('Error saving row:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×©××™×¨×ª ×¨×©×•××”');\n      if (editingRowId) {\n        setUpdating(null);\n      } else {\n        setCreating(false);\n      }\n    }\n  };\n\n  const handleDeleteRow = (row: TableRow) => {\n    Alert.alert('××—×™×§×ª ×¨×©×•××”', '×œ××—×•×§ ××ª ×”×¨×©×•××”?', [\n      { text: '×‘×™×˜×•×œ', style: 'cancel' },\n      {\n        text: '××—×§',\n        style: 'destructive',\n        onPress: async () => {\n          setDeleting(row.id);\n          try {\n            const res = await apiService.adminTables.deleteRow(tableId, row.id);\n            if (res.success) {\n              Alert.alert('×”×¦×œ×—×”', '×¨×©×•××” × ××—×§×” ×‘×”×¦×œ×—×”');\n              await fetchTable();\n            } else {\n              Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘××—×™×§×ª ×¨×©×•××”');\n            }\n          } catch (error) {\n            console.error('Error deleting row:', error);\n            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘××—×™×§×ª ×¨×©×•××”');\n          } finally {\n            setDeleting(null);\n          }\n        },\n      },\n    ]);\n  };\n\n  const renderCell = (value: any, dataType: string) => {\n    if (value === null || value === undefined || value === '') {\n      return <Text style={styles.cellEmpty}>-</Text>;\n    }\n\n    if (dataType === 'date') {\n      try {\n        const date = new Date(value);\n        return <Text style={styles.cellText}>{date.toLocaleDateString('he-IL')}</Text>;\n      } catch {\n        return <Text style={styles.cellText}>{String(value)}</Text>;\n      }\n    }\n\n    return <Text style={styles.cellText} numberOfLines={1}>{String(value)}</Text>;\n  };\n\n  const renderRow = ({ item: row }: { item: TableRow }) => (\n    <TouchableOpacity\n      style={styles.tableRow}\n      onPress={() => openEditModal(row)}\n      disabled={deleting === row.id}\n    >\n      {table?.columns.map((col) => (\n        <View key={col.id} style={styles.cell}>\n          {renderCell(row.data[col.name], col.data_type)}\n        </View>\n      ))}\n      <TouchableOpacity\n        style={styles.deleteBtn}\n        onPress={() => handleDeleteRow(row)}\n        disabled={deleting === row.id}\n      >\n        {deleting === row.id ? (\n          <ActivityIndicator size=\"small\" color={colors.error} />\n        ) : (\n          <Ionicons name=\"trash-outline\" size={18} color={colors.error} />\n        )}\n      </TouchableOpacity>\n    </TouchableOpacity>\n  );\n\n  const renderHeader = () => {\n    if (!table) return null;\n\n    return (\n      <View style={styles.tableHeader}>\n        {table.columns.map((col) => (\n          <View key={col.id} style={styles.headerCell}>\n            <Text style={styles.headerText}>\n              {col.name}\n              {col.is_required && <Text style={styles.required}> *</Text>}\n            </Text>\n          </View>\n        ))}\n        <View style={styles.headerCell} />\n      </View>\n    );\n  };\n\n  if (loading && !table) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  if (!table) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.emptyContainer}>\n          <Text style={styles.emptyText}>×˜×‘×œ×” ×œ× × ××¦××”</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>{tableName || table.name}</Text>\n        {table.description && (\n          <Text style={styles.description}>{table.description}</Text>\n        )}\n        <TouchableOpacity style={styles.addButton} onPress={openCreateModal}>\n          <Ionicons name=\"add\" size={20} color={colors.white} />\n          <Text style={styles.addText}>×¨×©×•××” ×—×“×©×”</Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollView horizontal showsHorizontalScrollIndicator={true}>\n        <View>\n          {renderHeader()}\n          {loading ? (\n            <View style={styles.loadingRow}>\n              <ActivityIndicator size=\"small\" color={colors.primary} />\n            </View>\n          ) : rows.length === 0 ? (\n            <View style={styles.emptyRow}>\n              <Text style={styles.emptyText}>××™×Ÿ ×¨×©×•××•×ª</Text>\n            </View>\n          ) : (\n            <FlatList\n              data={rows}\n              keyExtractor={(item) => item.id}\n              renderItem={renderRow}\n              scrollEnabled={false}\n            />\n          )}\n        </View>\n      </ScrollView>\n\n      {/* Row Modal */}\n      <Modal\n        visible={showRowModal}\n        animationType=\"slide\"\n        transparent\n        onRequestClose={() => {\n          setShowRowModal(false);\n          resetForm();\n        }}\n      >\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <ScrollView>\n              <Text style={styles.modalTitle}>\n                {editingRowId ? '×¢×¨×™×›×ª ×¨×©×•××”' : '×¨×©×•××” ×—×“×©×”'}\n              </Text>\n\n              {table.columns.map((col) => (\n                <View key={col.id} style={styles.formField}>\n                  <Text style={styles.label}>\n                    {col.name}\n                    {col.is_required && <Text style={styles.required}> *</Text>}\n                  </Text>\n\n                  {col.data_type === 'date' ? (\n                    Platform.OS === 'web' ? (\n                      <DatePicker\n                        value={dateValues[col.name] || (formData[col.name] ? new Date(formData[col.name]) : null)}\n                        onChange={(date) => {\n                          if (date) {\n                            setDateValues({ ...dateValues, [col.name]: date });\n                            updateFormField(col.name, date.toISOString());\n                          }\n                        }}\n                        placeholder=\"×‘×—×¨ ×ª××¨×™×š\"\n                      />\n                    ) : (\n                      <TouchableOpacity\n                        style={styles.dateInput}\n                        onPress={() => setShowDatePicker(col.name)}\n                      >\n                        <Text style={styles.dateText}>\n                          {dateValues[col.name]\n                            ? dateValues[col.name].toLocaleDateString('he-IL')\n                            : formData[col.name]\n                            ? new Date(formData[col.name]).toLocaleDateString('he-IL')\n                            : '×‘×—×¨ ×ª××¨×™×š'}\n                        </Text>\n                        <Ionicons name=\"calendar-outline\" size={20} color={colors.primary} />\n                      </TouchableOpacity>\n                    )\n                  ) : col.data_type === 'number' ? (\n                    <TextInput\n                      style={styles.input}\n                      placeholder={`×”×›× ×¡ ${col.name}`}\n                      placeholderTextColor={colors.textSecondary}\n                      value={formData[col.name]?.toString() || ''}\n                      onChangeText={(text) => updateFormField(col.name, text)}\n                      keyboardType=\"numeric\"\n                    />\n                  ) : (\n                    <TextInput\n                      style={[styles.input, styles.textArea]}\n                      placeholder={`×”×›× ×¡ ${col.name}`}\n                      placeholderTextColor={colors.textSecondary}\n                      value={formData[col.name]?.toString() || ''}\n                      onChangeText={(text) => updateFormField(col.name, text)}\n                      multiline\n                      numberOfLines={col.data_type === 'text' ? 3 : 1}\n                    />\n                  )}\n                </View>\n              ))}\n\n              <View style={styles.modalActions}>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalCancel]}\n                  onPress={() => {\n                    setShowRowModal(false);\n                    resetForm();\n                  }}\n                >\n                  <Text style={[styles.modalBtnText, { color: colors.textPrimary }]}>×‘×™×˜×•×œ</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalSave]}\n                  onPress={handleSaveRow}\n                  disabled={creating || updating !== null}\n                >\n                  {creating || updating !== null ? (\n                    <ActivityIndicator size=\"small\" color={colors.white} />\n                  ) : (\n                    <Text style={styles.modalBtnText}>×©××•×¨</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Date Picker */}\n      {showDatePicker && Platform.OS !== 'web' && (\n        <DateTimePicker\n          value={dateValues[showDatePicker] || new Date()}\n          mode=\"date\"\n          display=\"default\"\n          onChange={(event, selectedDate) => {\n            if (selectedDate && showDatePicker) {\n              setDateValues({ ...dateValues, [showDatePicker]: selectedDate });\n              updateFormField(showDatePicker, selectedDate.toISOString());\n            }\n            setShowDatePicker(null);\n          }}\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  title: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  description: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.primary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignSelf: 'flex-start',\n    gap: 8,\n  },\n  addText: {\n    color: colors.white,\n    fontWeight: '600',\n    fontSize: FontSizes.medium,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tableHeader: {\n    flexDirection: 'row',\n    backgroundColor: colors.primary,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  headerCell: {\n    minWidth: 120,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRightWidth: 1,\n    borderRightColor: colors.white + '40',\n  },\n  headerText: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.white,\n    textAlign: 'right',\n  },\n  required: {\n    color: colors.error,\n  },\n  tableRow: {\n    flexDirection: 'row',\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  cell: {\n    minWidth: 120,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.SM,\n    justifyContent: 'center',\n  },\n  cellText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  cellEmpty: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    fontStyle: 'italic',\n    textAlign: 'right',\n  },\n  deleteBtn: {\n    padding: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minWidth: 40,\n  },\n  loadingRow: {\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n    alignItems: 'center',\n  },\n  emptyRow: {\n    padding: LAYOUT_CONSTANTS.SPACING.XL,\n    alignItems: 'center',\n    backgroundColor: colors.background,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  emptyText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  modalBackdrop: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    maxHeight: '90%',\n    ...(Platform.OS === 'web' && {\n      maxWidth: 600,\n      alignSelf: 'center',\n    }),\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    textAlign: 'right',\n  },\n  formField: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n    textAlign: 'right',\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    minHeight: 80,\n    textAlignVertical: 'top',\n  },\n  dateInput: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  dateText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  modalActions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginTop: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalBtn: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n  },\n  modalCancel: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  modalSave: {\n    backgroundColor: colors.primary,\n  },\n  modalBtnText: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.white,\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTablesScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedUser' is assigned a value but never used.","line":56,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2914,2917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2914,2917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5599,5602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5599,5602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":289,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &quot;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &ldquo;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &#34;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ &rdquo;×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":289,"column":66,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&quot; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&ldquo; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&#34; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8644,8673],"text":"×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”&rdquo; ×›×“×™ ×œ×”×ª×—×™×œ"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":396,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &quot;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &ldquo;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &#34;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ &rdquo;×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":396,"column":87,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&quot; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&ldquo; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&#34; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13319,13362],"text":"××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”&rdquo; ×›×“×™ ×œ×”×ª×—×™×œ."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  Modal,\n  TextInput,\n  Alert,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n  FlatList,\n  Platform,\n} from 'react-native';\nimport { NavigationProp } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { apiService, ApiResponse } from '../utils/apiService';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\n\ninterface AdminTablesScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface TableColumn {\n  id: string;\n  name: string;\n  data_type: 'text' | 'number' | 'date';\n  is_required: boolean;\n  display_order: number;\n}\n\ninterface AdminTable {\n  id: string;\n  name: string;\n  description?: string;\n  created_by?: string;\n  created_at: string;\n  columns?: TableColumn[];\n  row_count?: number;\n}\n\ninterface ColumnForm {\n  name: string;\n  data_type: 'text' | 'number' | 'date';\n  is_required: boolean;\n}\n\nexport default function AdminTablesScreen({ navigation }: AdminTablesScreenProps) {\n  useAdminProtection();\n  const { selectedUser } = useUser();\n  const [tables, setTables] = useState<AdminTable[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n\n  // Form state\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    columns: [] as ColumnForm[],\n  });\n\n  const fetchTables = useCallback(async () => {\n    setLoading(true);\n    try {\n      const res: ApiResponse<AdminTable[]> = await apiService.adminTables.getAll();\n      if (res.success && res.data) {\n        setTables(res.data);\n      } else {\n        Alert.alert('×©×’×™××”', res.error || '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×˜×‘×œ××•×ª');\n      }\n    } catch (error) {\n      console.error('Error fetching tables:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×˜×‘×œ××•×ª');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchTables();\n  }, [fetchTables]);\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      columns: [],\n    });\n  };\n\n  const addColumn = () => {\n    setFormData({\n      ...formData,\n      columns: [\n        ...formData.columns,\n        { name: '', data_type: 'text', is_required: false },\n      ],\n    });\n  };\n\n  const removeColumn = (index: number) => {\n    setFormData({\n      ...formData,\n      columns: formData.columns.filter((_, i) => i !== index),\n    });\n  };\n\n  const updateColumn = (index: number, field: keyof ColumnForm, value: any) => {\n    const newColumns = [...formData.columns];\n    newColumns[index] = { ...newColumns[index], [field]: value };\n    setFormData({ ...formData, columns: newColumns });\n  };\n\n  const handleCreateTable = async () => {\n    if (!formData.name.trim()) {\n      Alert.alert('×©×’×™××”', '×©× ×”×˜×‘×œ×” ×”×•× ×—×•×‘×”');\n      return;\n    }\n\n    if (formData.columns.length === 0) {\n      Alert.alert('×©×’×™××”', '×—×™×™×‘ ×œ×”×’×“×™×¨ ×œ×¤×—×•×ª ×¢××•×“×” ××—×ª');\n      return;\n    }\n\n    // Validate columns\n    for (const col of formData.columns) {\n      if (!col.name.trim()) {\n        Alert.alert('×©×’×™××”', '×›×œ ×”×¢××•×“×•×ª ×¦×¨×™×›×•×ª ×©×');\n        return;\n      }\n    }\n\n    // Check for duplicate column names\n    const columnNames = formData.columns.map(c => c.name.trim());\n    if (new Set(columnNames).size !== columnNames.length) {\n      Alert.alert('×©×’×™××”', '×œ× × ×™×ª×Ÿ ×œ×”×’×“×™×¨ ×¢××•×“×•×ª ×¢× ××•×ª×• ×©×');\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const res: ApiResponse<AdminTable> = await apiService.adminTables.create({\n        name: formData.name.trim(),\n        description: formData.description.trim() || undefined,\n        columns: formData.columns.map((col, index) => ({\n          name: col.name.trim(),\n          data_type: col.data_type,\n          is_required: col.is_required,\n          display_order: index,\n        })),\n      });\n\n      if (res.success && res.data) {\n        setShowCreateModal(false);\n        resetForm();\n        // Refresh tables list\n        await fetchTables();\n      } else {\n        Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘×™×¦×™×¨×ª ×˜×‘×œ×”');\n      }\n    } catch (error) {\n      console.error('Error creating table:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×˜×‘×œ×”');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const handleDeleteTable = (table: AdminTable) => {\n    Alert.alert('××—×™×§×ª ×˜×‘×œ×”', `×œ××—×•×§ ××ª ×”×˜×‘×œ×” \"${table.name}\"?\\n×¤×¢×•×œ×” ×–×• ×ª××—×§ ×’× ××ª ×›×œ ×”×¨×©×•××•×ª ×‘×˜×‘×œ×”.`, [\n      { text: '×‘×™×˜×•×œ', style: 'cancel' },\n      {\n        text: '××—×§',\n        style: 'destructive',\n        onPress: async () => {\n          setDeleting(table.id);\n          try {\n            const res = await apiService.adminTables.delete(table.id);\n            if (res.success) {\n              Alert.alert('×”×¦×œ×—×”', '×˜×‘×œ×” × ××—×§×” ×‘×”×¦×œ×—×”');\n              await fetchTables();\n            } else {\n              Alert.alert('×©×’×™××”', res.error || '×©×’×™××” ×‘××—×™×§×ª ×˜×‘×œ×”');\n            }\n          } catch (error) {\n            console.error('Error deleting table:', error);\n            Alert.alert('×©×’×™××”', '×©×’×™××” ×‘××—×™×§×ª ×˜×‘×œ×”');\n          } finally {\n            setDeleting(null);\n          }\n        },\n      },\n    ]);\n  };\n\n  const handleTablePress = (table: AdminTable) => {\n    (navigation as any).navigate('AdminTableRows', { tableId: table.id, tableName: table.name });\n  };\n\n  const renderTableItem = ({ item }: { item: AdminTable }) => (\n    <TouchableOpacity\n      style={styles.tableCard}\n      onPress={() => handleTablePress(item)}\n      disabled={deleting === item.id}\n    >\n      <View style={styles.tableHeader}>\n        <View style={styles.tableInfo}>\n          <Text style={styles.tableName}>{item.name}</Text>\n          {item.description && (\n            <Text style={styles.tableDescription} numberOfLines={2}>\n              {item.description}\n            </Text>\n          )}\n        </View>\n        <TouchableOpacity\n          style={styles.deleteBtn}\n          onPress={() => handleDeleteTable(item)}\n          disabled={deleting === item.id}\n        >\n          {deleting === item.id ? (\n            <ActivityIndicator size=\"small\" color={colors.error} />\n          ) : (\n            <Ionicons name=\"trash-outline\" size={20} color={colors.error} />\n          )}\n        </TouchableOpacity>\n      </View>\n      <View style={styles.tableMeta}>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"grid-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {item.columns?.length || 0} ×¢××•×“×•×ª\n          </Text>\n        </View>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"list-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {item.row_count || 0} ×¨×©×•××•×ª\n          </Text>\n        </View>\n        <View style={styles.metaItem}>\n          <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n          <Text style={styles.metaText}>\n            {new Date(item.created_at).toLocaleDateString('he-IL')}\n          </Text>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>×˜×‘×œ××•×ª ×“×™× ××™×•×ª</Text>\n        <TouchableOpacity\n          style={styles.addButton}\n          onPress={() => {\n            resetForm();\n            setShowCreateModal(true);\n          }}\n        >\n          <Ionicons name=\"add\" size={24} color={colors.white} />\n          <Text style={styles.addText}>×˜×‘×œ×” ×—×“×©×”</Text>\n        </TouchableOpacity>\n      </View>\n\n      {loading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      ) : (\n        <FlatList\n          data={tables}\n          keyExtractor={(item) => item.id}\n          renderItem={renderTableItem}\n          contentContainerStyle={styles.list}\n          refreshControl={<RefreshControl refreshing={loading} onRefresh={fetchTables} />}\n          ListEmptyComponent={\n            <View style={styles.emptyContainer}>\n              <Ionicons name=\"grid-outline\" size={64} color={colors.textSecondary} />\n              <Text style={styles.emptyText}>××™×Ÿ ×˜×‘×œ××•×ª</Text>\n              <Text style={styles.emptySubtext}>×œ×—×¥ ×¢×œ \"×˜×‘×œ×” ×—×“×©×”\" ×›×“×™ ×œ×”×ª×—×™×œ</Text>\n            </View>\n          }\n        />\n      )}\n\n      {/* Create Table Modal */}\n      <Modal\n        visible={showCreateModal}\n        animationType=\"slide\"\n        transparent\n        onRequestClose={() => setShowCreateModal(false)}\n      >\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <ScrollView>\n              <Text style={styles.modalTitle}>×˜×‘×œ×” ×—×“×©×”</Text>\n\n              <TextInput\n                style={styles.input}\n                placeholder=\"×©× ×”×˜×‘×œ×” *\"\n                placeholderTextColor={colors.textSecondary}\n                value={formData.name}\n                onChangeText={(text) => setFormData({ ...formData, name: text })}\n              />\n\n              <TextInput\n                style={[styles.input, styles.textArea]}\n                placeholder=\"×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)\"\n                placeholderTextColor={colors.textSecondary}\n                value={formData.description}\n                onChangeText={(text) => setFormData({ ...formData, description: text })}\n                multiline\n                numberOfLines={3}\n              />\n\n              <View style={styles.columnsSection}>\n                <View style={styles.sectionHeader}>\n                  <Text style={styles.sectionTitle}>×¢××•×“×•×ª</Text>\n                  <TouchableOpacity style={styles.addColumnBtn} onPress={addColumn}>\n                    <Ionicons name=\"add-circle-outline\" size={20} color={colors.primary} />\n                    <Text style={styles.addColumnText}>×”×•×¡×£ ×¢××•×“×”</Text>\n                  </TouchableOpacity>\n                </View>\n\n                {formData.columns.map((column, index) => (\n                  <View key={index} style={styles.columnCard}>\n                    <View style={styles.columnHeader}>\n                      <Text style={styles.columnNumber}>×¢××•×“×” {index + 1}</Text>\n                      <TouchableOpacity onPress={() => removeColumn(index)}>\n                        <Ionicons name=\"close-circle\" size={24} color={colors.error} />\n                      </TouchableOpacity>\n                    </View>\n\n                    <TextInput\n                      style={styles.input}\n                      placeholder=\"×©× ×¢××•×“×” *\"\n                      placeholderTextColor={colors.textSecondary}\n                      value={column.name}\n                      onChangeText={(text) => updateColumn(index, 'name', text)}\n                    />\n\n                    <View style={styles.row}>\n                      <View style={styles.pickerContainer}>\n                        <Text style={styles.label}>×¡×•×’ × ×ª×•×Ÿ</Text>\n                        <View style={styles.pickerRow}>\n                          {(['text', 'number', 'date'] as const).map((type) => (\n                            <TouchableOpacity\n                              key={type}\n                              style={[\n                                styles.pickerOption,\n                                column.data_type === type && styles.pickerOptionActive,\n                              ]}\n                              onPress={() => updateColumn(index, 'data_type', type)}\n                            >\n                              <Text\n                                style={[\n                                  styles.pickerOptionText,\n                                  column.data_type === type && styles.pickerOptionTextActive,\n                                ]}\n                              >\n                                {type === 'text' ? '×˜×§×¡×˜' : type === 'number' ? '××¡×¤×¨' : '×ª××¨×™×š'}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      </View>\n\n                      <TouchableOpacity\n                        style={[\n                          styles.checkbox,\n                          column.is_required && styles.checkboxActive,\n                        ]}\n                        onPress={() => updateColumn(index, 'is_required', !column.is_required)}\n                      >\n                        <Ionicons\n                          name={column.is_required ? 'checkbox' : 'square-outline'}\n                          size={24}\n                          color={column.is_required ? colors.primary : colors.textSecondary}\n                        />\n                        <Text style={styles.checkboxLabel}>×—×•×‘×”</Text>\n                      </TouchableOpacity>\n                    </View>\n                  </View>\n                ))}\n\n                {formData.columns.length === 0 && (\n                  <Text style={styles.emptyColumnsText}>××™×Ÿ ×¢××•×“×•×ª. ×œ×—×¥ ×¢×œ \"×”×•×¡×£ ×¢××•×“×”\" ×›×“×™ ×œ×”×ª×—×™×œ.</Text>\n                )}\n              </View>\n\n              <View style={styles.modalActions}>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalCancel]}\n                  onPress={() => {\n                    setShowCreateModal(false);\n                    resetForm();\n                  }}\n                >\n                  <Text style={styles.modalBtnText}>×‘×™×˜×•×œ</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.modalBtn, styles.modalSave]}\n                  onPress={handleCreateTable}\n                  disabled={creating}\n                >\n                  {creating ? (\n                    <ActivityIndicator size=\"small\" color={colors.white} />\n                  ) : (\n                    <Text style={styles.modalBtnText}>×¦×•×¨</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  title: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.primary,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.MD,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    gap: 8,\n  },\n  addText: {\n    color: colors.white,\n    fontWeight: '600',\n    fontSize: FontSizes.medium,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  list: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: 100,\n  },\n  tableCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  tableHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  tableInfo: {\n    flex: 1,\n    marginRight: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  tableName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  tableDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  deleteBtn: {\n    padding: 4,\n  },\n  tableMeta: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingTop: LAYOUT_CONSTANTS.SPACING.SM,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  emptyText: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptySubtext: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  modalBackdrop: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalCard: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    maxHeight: '90%',\n    ...(Platform.OS === 'web' && {\n      maxWidth: 600,\n      alignSelf: 'center',\n    }),\n  },\n  modalTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n    textAlign: 'right',\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'right',\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top',\n  },\n  columnsSection: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  addColumnBtn: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  addColumnText: {\n    color: colors.primary,\n    fontWeight: '600',\n  },\n  columnCard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  columnHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  columnNumber: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  row: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  pickerContainer: {\n    flex: 1,\n  },\n  label: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 4,\n    textAlign: 'right',\n  },\n  pickerRow: {\n    flexDirection: 'row',\n    gap: 8,\n    flexWrap: 'wrap',\n  },\n  pickerOption: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n    borderWidth: 1,\n    borderColor: colors.border,\n    backgroundColor: colors.background,\n  },\n  pickerOptionActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  pickerOptionText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  pickerOptionTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  checkbox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingVertical: 8,\n  },\n  checkboxActive: {},\n  checkboxLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n  },\n  emptyColumnsText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    fontStyle: 'italic',\n  },\n  modalActions: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginTop: LAYOUT_CONSTANTS.SPACING.LG,\n  },\n  modalBtn: {\n    flex: 1,\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n  },\n  modalCancel: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  modalSave: {\n    backgroundColor: colors.primary,\n  },\n  modalBtnText: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.white,\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTasksScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1891,1894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1891,1894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1938,1941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1938,1941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":68,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'creating' is assigned a value but never used.","line":70,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setFilterCategory' is assigned a value but never used.","line":97,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":43},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":515,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&quot;×™ "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&ldquo;×™ "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&#34;×™ "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19795,19804],"text":"× ×•×¦×¨ ×¢&rdquo;×™ "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":603,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":603,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23006,23009],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23006,23009],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":819,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":819,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31270,31273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31270,31273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":824,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":824,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31442,31445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31442,31445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":834,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":834,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31839,31842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31839,31842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":839,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":839,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32098,32101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32098,32101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":855,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":855,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32654,32657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32654,32657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":856,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":856,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32684,32687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32684,32687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":988,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":988,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37678,37681],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37678,37681],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":989,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":989,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37725,37728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37725,37728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":993,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":993,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37814,37817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37814,37817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, TextInput, ActivityIndicator, Modal, Image, SafeAreaView, Platform, StatusBar, Dimensions } from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useRoute, useFocusEffect, useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { Ionicons } from '@expo/vector-icons';\nimport apiService, { ApiResponse } from '../utils/apiService';\nimport { useUser } from '../stores/userStore';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport UserSelector from '../components/UserSelector';\nimport TaskHoursModal from '../components/TaskHoursModal';\n\ntype TaskStatus = 'open' | 'in_progress' | 'done' | 'archived' | 'stuck' | 'testing';\ntype TaskPriority = 'low' | 'medium' | 'high';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  avatar_url?: string;\n}\n\ntype AdminTask = {\n  id: string;\n  title: string;\n  description?: string;\n  status: TaskStatus;\n  priority: TaskPriority;\n  category?: string | null;\n  due_date?: string | null;\n  assignees: string[]; // UUIDs\n  assignees_details?: User[]; // Full objects\n  creator_details?: User;\n  tags: string[];\n  checklist?: { id: string; text: string; done: boolean }[];\n  created_by?: string | null;\n  parent_task_id?: string | null;\n  parent_task_details?: { id: string; title: string } | null;\n  subtask_count?: number;\n  level?: number; // Depth level (0 = root, 1 = subtask, 2 = sub-subtask, etc.)\n  estimated_hours?: number | null;\n  actual_hours?: number | null;\n  created_at?: string;\n  updated_at?: string;\n};\n\nexport default function AdminTasksScreen() {\n  const route = useRoute();\n  const navigation = useNavigation<any>();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser } = useUser();\n\n  // Ensure top bar and bottom bar are visible in view-only mode\n  useFocusEffect(\n    React.useCallback(() => {\n      if (viewOnly) {\n        navigation.setParams({\n          hideTopBar: false,\n          hideBottomBar: false,\n        });\n      }\n    }, [viewOnly, navigation])\n  );\n  const [tasks, setTasks] = useState<AdminTask[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [creating, setCreating] = useState<boolean>(false);\n  const [updating, setUpdating] = useState<string | null>(null);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [showForm, setShowForm] = useState<boolean>(false);\n\n  // Form State\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    priority: 'medium' as TaskPriority,\n    status: 'open' as TaskStatus,\n    category: 'development',\n    due_date: '',\n    assignees: [] as User[],\n    tagsText: '' as string,\n    parent_task_id: '' as string,\n    estimated_hours: '' as string,\n  });\n\n  // Task Hours Modal State\n  const [showHoursModal, setShowHoursModal] = useState(false);\n  const [pendingTaskId, setPendingTaskId] = useState<string | null>(null);\n  const [pendingTask, setPendingTask] = useState<AdminTask | null>(null);\n\n  const [query, setQuery] = useState('');\n  const [filterStatus, setFilterStatus] = useState<TaskStatus | ''>('');\n  const [filterPriority, setFilterPriority] = useState<TaskPriority | ''>('');\n  const [filterCategory, setFilterCategory] = useState<string | ''>('');\n  const [filterAssignee, setFilterAssignee] = useState<'all' | 'me'>('all');\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [expandedTasks, setExpandedTasks] = useState<Set<string>>(new Set());\n  const [subtasks, setSubtasks] = useState<Record<string, AdminTask[]>>({});\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n  const [loadingSubtasks, setLoadingSubtasks] = useState<string | null>(null);\n\n  useEffect(() => {\n    console.log('ğŸ“‹ Tasks List Updated in Component:', tasks.map(t => `${t.id.substring(0, 8)}:${t.title}`).join(', '));\n  }, [tasks]);\n\n  const sortedTasks = useMemo(() => {\n    const priorityOrder: Record<TaskPriority, number> = { high: 0, medium: 1, low: 2 };\n    // Filter out subtasks - only show root level tasks (those without parent_task_id)\n    const rootTasks = tasks.filter(t => !t.parent_task_id);\n    return [...rootTasks].sort((a, b) => {\n      // First sort by ownership if \"My Tasks\" is NOT active (to bring mine to top implicitly? No, sticking to date/priority)\n      if (a.status === b.status) {\n        return priorityOrder[a.priority] - priorityOrder[b.priority];\n      }\n      const statusRank: Record<TaskStatus, number> = { open: 0, in_progress: 1, stuck: 1.5, testing: 1.7, done: 2, archived: 3 };\n      return statusRank[a.status] - statusRank[b.status];\n    });\n  }, [tasks]);\n\n  const fetchTasks = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    console.log('ğŸ”„ Fetching tasks...', { query, filterStatus, filterPriority, filterCategory, filterAssignee, selectedUserId: selectedUser?.id });\n    try {\n      const res: ApiResponse<AdminTask[]> = await apiService.getTasks({\n        q: query || undefined,\n        status: filterStatus || undefined,\n        priority: filterPriority || undefined,\n        category: filterCategory || undefined,\n        assignee: filterAssignee === 'me' ? selectedUser?.id : undefined,\n      });\n      console.log('âœ… Fetch tasks response:', res.success, res.data?.length);\n      if (!res.success) {\n        setError(res.error || '×©×’×™××” ×‘×˜×¢×™× ×ª ××©×™××•×ª');\n      } else {\n        setTasks(res.data || []);\n      }\n    } catch (err) {\n      console.error('Error fetching tasks:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª ××©×™××•×ª - × ×¡×” ×©×•×‘');\n    } finally {\n      setLoading(false);\n    }\n  }, [query, filterStatus, filterPriority, filterCategory, filterAssignee, selectedUser]);\n\n  useEffect(() => {\n    let timeout: ReturnType<typeof setTimeout> | undefined;\n    if (query) {\n      timeout = setTimeout(() => fetchTasks(), 500);\n    } else {\n      fetchTasks();\n    }\n    return () => { if (timeout) clearTimeout(timeout); };\n  }, [query, filterStatus, filterPriority, filterCategory, filterAssignee, fetchTasks]);\n\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      priority: 'medium',\n      status: 'open',\n      category: 'development',\n      due_date: '',\n      assignees: [],\n      tagsText: '',\n      parent_task_id: '',\n      estimated_hours: '',\n    });\n    setEditingId(null);\n  };\n\n  const checkAndUpdateParentStatus = async (taskId: string) => {\n    // Check if task has incomplete subtasks, if so, set to 'stuck'\n    try {\n      const res = await apiService.getSubtasks(taskId);\n      if (res.success && res.data && res.data.length > 0) {\n        // If there are any subtasks, automatically set parent to 'stuck'\n        const hasIncompleteSubtasks = res.data.some((st: AdminTask) => st.status !== 'done');\n        if (hasIncompleteSubtasks) {\n          console.log(`âš ï¸ Setting task ${taskId} to 'stuck' - has incomplete subtasks`);\n          await apiService.updateTask(taskId, { status: 'stuck' as TaskStatus });\n          return true;\n        }\n      }\n    } catch (err) {\n      console.error('Failed to check parent status:', err);\n    }\n    return false;\n  };\n\n  const toggleSubtasks = async (taskId: string) => {\n    if (expandedTasks.has(taskId)) {\n      // Collapse\n      const newExpanded = new Set(expandedTasks);\n      newExpanded.delete(taskId);\n      setExpandedTasks(newExpanded);\n    } else {\n      // Expand and load subtasks\n      setLoadingSubtasks(taskId);\n      try {\n        const res = await apiService.getSubtasks(taskId);\n        if (res.success && res.data) {\n          setSubtasks(prev => ({ ...prev, [taskId]: res.data }));\n          // Check if parent should be marked as stuck\n          const updated = await checkAndUpdateParentStatus(taskId);\n          if (updated) {\n            // Refresh tasks if status was updated\n            await fetchTasks();\n          }\n        }\n        const newExpanded = new Set(expandedTasks);\n        newExpanded.add(taskId);\n        setExpandedTasks(newExpanded);\n      } catch (err) {\n        console.error('Failed to load subtasks:', err);\n      } finally {\n        setLoadingSubtasks(null);\n      }\n    }\n  };\n\n  const createSubtask = (parentTask: AdminTask) => {\n    setFormData({\n      title: '',\n      description: '',\n      priority: parentTask.priority,\n      status: 'open',\n      category: parentTask.category || 'development',\n      due_date: '',\n      assignees: parentTask.assignees_details || [],\n      tagsText: '',\n      parent_task_id: parentTask.id,\n      estimated_hours: '',\n    });\n    setEditingId(null);\n    setShowForm(true);\n  };\n\n  const createTask = async () => {\n    if (!formData.title.trim()) return;\n    \n    // Validate created_by is available\n    if (!selectedUser?.id) {\n      setError('×©×’×™××”: ×œ× × ×™×ª×Ÿ ×œ×–×”×•×ª ××ª ×”××©×ª××© ×”× ×•×›×—×™. × ×¡×” ×œ×”×ª×—×‘×¨ ××—×“×©.');\n      return;\n    }\n    \n    setCreating(true);\n    setError(null);\n    try {\n      let parsedDueDate = null;\n      if (formData.due_date.trim()) {\n        const date = new Date(formData.due_date);\n        if (isNaN(date.getTime())) {\n          setError('×ª××¨×™×š ×œ× ×ª×§×™×Ÿ - ×× × ×”×©×ª××© ×‘×¤×•×¨××˜ YYYY-MM-DD');\n          setCreating(false);\n          return;\n        }\n        parsedDueDate = date.toISOString();\n      }\n\n      // Parse estimated_hours\n      let parsedEstimatedHours = null;\n      if (formData.estimated_hours && formData.estimated_hours.trim()) {\n        const hours = parseFloat(formData.estimated_hours.trim());\n        if (!isNaN(hours) && hours > 0) {\n          parsedEstimatedHours = hours;\n        }\n      }\n\n      const body = {\n        title: formData.title.trim(),\n        description: formData.description.trim() || null,\n        priority: formData.priority,\n        status: formData.status,\n        category: formData.category || null,\n        due_date: parsedDueDate,\n        assignees: formData.assignees.map(u => u.id), // UUIDs - server will set defaults if empty\n        tags: formData.tagsText.trim()\n          ? formData.tagsText.split(',').map((t) => t.trim()).filter(Boolean)\n          : [],\n        created_by: selectedUser.id, // Always required\n        parent_task_id: formData.parent_task_id || null,\n        estimated_hours: parsedEstimatedHours,\n      };\n\n      console.log('ğŸ“¤ Creating task with payload:', body);\n\n      const res: ApiResponse<AdminTask> = await apiService.createTask(body);\n      if (!res.success) {\n        // Handle specific permission error\n        if (res.error?.includes('×”×¨×©××”')) {\n          setError('××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×§×¦×•×ª ××©×™××” ×œ××©×ª××©×™× ××œ×”. × ×™×ª×Ÿ ×œ×”×§×¦×•×ª ××©×™××•×ª ×¨×§ ×œ×¢×•×‘×“×™× ×©×œ×š.');\n        } else {\n          setError(res.error || '×©×’×™××” ×‘×™×¦×™×¨×ª ××©×™××”');\n        }\n      } else if (res.data) {\n        // If this is a subtask, update parent status to 'stuck' FIRST\n        if (formData.parent_task_id) {\n          await checkAndUpdateParentStatus(formData.parent_task_id);\n        }\n        // Then refresh tasks\n        await fetchTasks();\n        resetForm();\n        setShowForm(false);\n      }\n    } catch (err) {\n      console.error('Error creating task:', err);\n      setError('×©×’×™××” ×‘×™×¦×™×¨×ª ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const toggleDone = async (task: AdminTask) => {\n    // If trying to mark as done, check if hours are logged first\n    if (task.status !== 'done') {\n      // Open hours modal first\n      setPendingTaskId(task.id);\n      setPendingTask(task);\n      setShowHoursModal(true);\n      return;\n    }\n\n    // If unmarking as done, just update status\n    setUpdating(task.id);\n    setError(null);\n    try {\n      const res: ApiResponse<AdminTask> = await apiService.updateTask(task.id, { status: 'open' });\n      if (res.success && res.data) {\n        await fetchTasks();\n      } else {\n        setError(res.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××”');\n      }\n    } catch (err) {\n      console.error('Error toggling task status:', err);\n      setError('×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setUpdating(null);\n    }\n  };\n\n  const handleSaveHours = async (hours: number) => {\n    if (!pendingTaskId || !selectedUser?.id) {\n      throw new Error('××©×ª××© ×œ× ×–×•×”×”');\n    }\n\n    // Log hours first\n    const logRes = await apiService.logTaskHours(pendingTaskId, hours, selectedUser.id);\n    if (!logRes.success) {\n      throw new Error(logRes.error || '×©×’×™××” ×‘×¨×™×©×•× ×©×¢×•×ª');\n    }\n\n    // Then update status to done\n    const updateRes = await apiService.updateTask(pendingTaskId, { status: 'done' });\n    if (!updateRes.success) {\n      throw new Error(updateRes.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”××©×™××”');\n    }\n\n    // Refresh tasks\n    await fetchTasks();\n\n    // Close modal and reset state\n    setShowHoursModal(false);\n    setPendingTaskId(null);\n    setPendingTask(null);\n  };\n\n  const renderItem = ({ item, isSubtask = false, level = 0 }: { item: AdminTask; isSubtask?: boolean; level?: number }) => {\n    const isDone = item.status === 'done';\n    const hasSubtasks = (item.subtask_count || 0) > 0;\n    const isExpanded = expandedTasks.has(item.id);\n    const taskSubtasks = subtasks[item.id] || [];\n    const taskLevel = item.level ?? level;\n\n    return (\n      <View>\n        <View style={[\n          styles.taskItem, \n          isDone && styles.taskItemDone, \n          isSubtask && styles.subtaskItem,\n          isSubtask && { marginRight: taskLevel * 16 }\n        ]}>\n          {/* Subtask Indicator */}\n          {isSubtask && (\n            <View style={styles.subtaskIndicator}>\n              <Ionicons name=\"return-down-forward\" size={16} color={colors.info} />\n              <Text style={styles.levelText}>×“×¨×’×” {taskLevel}</Text>\n            </View>\n          )}\n\n          <TouchableOpacity\n            style={styles.checkbox}\n            onPress={() => toggleDone(item)}\n            disabled={updating === item.id}\n          >\n            {updating === item.id ? (\n              <ActivityIndicator size=\"small\" color={colors.textSecondary} />\n            ) : (\n              <Ionicons name={isDone ? 'checkbox' : 'square-outline'} size={24} color={isDone ? colors.success : colors.textSecondary} />\n            )}\n          </TouchableOpacity>\n          <View style={styles.taskContent}>\n            {/* Parent Task Reference */}\n            {item.parent_task_details && (\n              <View style={styles.parentBadge}>\n                <Ionicons name=\"git-branch-outline\" size={12} color={colors.info} />\n                <Text style={styles.parentText}>×ª×ª-××©×™××” ×©×œ: {item.parent_task_details.title}</Text>\n              </View>\n            )}\n\n            <Text style={[styles.taskTitle, isDone && styles.taskTitleDone]} numberOfLines={2}>\n              {item.title}\n            </Text>\n            {item.description ? (\n              <Text style={styles.description} numberOfLines={2}>{item.description}</Text>\n            ) : null}\n\n            <View style={styles.metaRow}>\n              {/* Priority Badge */}\n              <View style={[styles.badge, styles[`priority_${item.priority}` as const]]}>\n                <Text style={styles.badgeText}>\n                  {item.priority === 'high' ? '×’×‘×•×”×”' : item.priority === 'medium' ? '×‘×™× ×•× ×™×ª' : '× ××•×›×”'}\n                </Text>\n              </View>\n\n              {/* Status Badge */}\n              <View style={[styles.badge, styles[`status_${item.status}` as const]]}>\n                <Text style={styles.badgeText}>\n                  {item.status === 'open' ? '×¤×ª×•×—×”' : \n                   item.status === 'in_progress' ? '×‘×ª×”×œ×™×š' : \n                   item.status === 'stuck' ? '×ª×§×•×¢' :\n                   item.status === 'testing' ? '×‘×‘×“×™×§×”' :\n                   item.status === 'done' ? '×‘×•×¦×¢×”' : '×‘××¨×›×™×•×Ÿ'}\n                </Text>\n              </View>\n\n              {/* Subtasks Count Badge */}\n              {hasSubtasks && (\n                <TouchableOpacity \n                  style={[styles.badge, styles.subtaskBadge]}\n                  onPress={() => toggleSubtasks(item.id)}\n                >\n                  {loadingSubtasks === item.id ? (\n                    <ActivityIndicator size=\"small\" color={colors.info} />\n                  ) : (\n                    <>\n                      <Ionicons \n                        name={isExpanded ? 'chevron-up' : 'chevron-down'} \n                        size={12} \n                        color={colors.info} \n                      />\n                      <Text style={styles.subtaskBadgeText}>{item.subtask_count} ×ª×ª-××©×™××•×ª</Text>\n                    </>\n                  )}\n                </TouchableOpacity>\n              )}\n\n              {/* Assignees */}\n              <View style={styles.assigneesContainer}>\n                {item.assignees_details && item.assignees_details.length > 0 ? (\n                  <View style={styles.assigneesContent}>\n                    <Text style={styles.assigneeText} numberOfLines={1}>\n                      ××©×•×™×™×š ×œ: {item.assignees_details.map(u => u.name).join(', ')}\n                    </Text>\n                    <View style={styles.avatarsRow}>\n                      {item.assignees_details.slice(0, 3).map((u, i) => (\n                        <Image\n                          key={u.id}\n                          source={{ uri: u.avatar_url || `https://ui-avatars.com/api/?name=${u.name}` }}\n                          style={[styles.avatarSmall, { marginRight: i > 0 ? -10 : 0, zIndex: 3 - i }]}\n                        />\n                      ))}\n                      {item.assignees_details.length > 3 && (\n                        <View style={[styles.avatarSmall, styles.moreAvatar]}>\n                          <Text style={styles.moreAvatarText}>+{item.assignees_details.length - 3}</Text>\n                        </View>\n                      )}\n                    </View>\n                  </View>\n                ) : (\n                  <Text style={styles.unassignedText}>âš ï¸ ×”××©×™××” ×œ× ×©×•×™×™×›×” ×œ××£ ××—×“</Text>\n                )}\n              </View>\n            </View>\n\n            {/* Hours Display */}\n            {((item.estimated_hours && parseFloat(String(item.estimated_hours)) > 0) || \n              (item.actual_hours && parseFloat(String(item.actual_hours)) > 0)) && (\n              <View style={styles.hoursRow}>\n                {item.estimated_hours && parseFloat(String(item.estimated_hours)) > 0 && (\n                  <View style={[styles.badge, styles.hoursBadge]}>\n                    <Ionicons name=\"time-outline\" size={12} color={colors.info} />\n                    <Text style={styles.hoursText}>××•×¢×¨×š: {parseFloat(String(item.estimated_hours)).toFixed(1)} ×©×¢×•×ª</Text>\n                  </View>\n                )}\n                {item.actual_hours && parseFloat(String(item.actual_hours)) > 0 && (\n                  <View style={[styles.badge, styles.hoursBadge, styles.actualHoursBadge]}>\n                    <Ionicons name=\"checkmark-circle-outline\" size={12} color={colors.success} />\n                    <Text style={[styles.hoursText, { color: colors.success }]}>×‘×•×¦×¢: {parseFloat(String(item.actual_hours)).toFixed(1)} ×©×¢×•×ª</Text>\n                  </View>\n                )}\n              </View>\n            )}\n\n            {item.creator_details && (\n              <Text style={styles.creatorText}>× ×•×¦×¨ ×¢\"×™ {item.creator_details.name}</Text>\n            )}\n\n          {!viewOnly && (\n            <View style={styles.actionsRow}>\n              <TouchableOpacity style={styles.actionBtn} onPress={() => openEdit(item)}>\n                <Ionicons name=\"create-outline\" size={18} color={colors.textPrimary} />\n                <Text style={styles.actionText}>×¢×¨×•×š</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={styles.actionBtn} onPress={() => createSubtask(item)}>\n                <Ionicons name=\"add-circle-outline\" size={18} color={colors.info} />\n                <Text style={[styles.actionText, { color: colors.info }]}>×ª×ª-××©×™××”</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={styles.actionBtn}\n                onPress={() => deleteTask(item.id)}\n                disabled={deleting === item.id}\n              >\n                {deleting === item.id ? (\n                  <ActivityIndicator size=\"small\" color={colors.error} />\n                ) : (\n                  <>\n                    <Ionicons name=\"trash-outline\" size={18} color={colors.error} />\n                    <Text style={[styles.actionText, { color: colors.error }]}>××—×§</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n            </View>\n          )}\n        </View>\n      </View>\n\n      {/* Subtasks List */}\n      {isExpanded && taskSubtasks.length > 0 && (\n        <View style={styles.subtasksList}>\n          {taskSubtasks.map((subtask) => (\n            <View key={subtask.id}>\n              {renderItem({ item: subtask, isSubtask: true, level: taskLevel + 1 })}\n            </View>\n          ))}\n        </View>\n      )}\n    </View>\n    );\n  };\n\n  const openEdit = (task: AdminTask) => {\n    setFormData({\n      title: task.title || '',\n      description: task.description || '',\n      priority: task.priority,\n      status: task.status,\n      category: task.category || 'development',\n      due_date: task.due_date ? new Date(task.due_date).toISOString().slice(0, 10) : '',\n      assignees: task.assignees_details || [],\n      tagsText: (task.tags || []).join(', '),\n      parent_task_id: task.parent_task_id || '',\n      estimated_hours: (task.estimated_hours !== null && task.estimated_hours !== undefined && task.estimated_hours > 0) ? String(task.estimated_hours) : '',\n    });\n    setEditingId(task.id);\n    setShowForm(true);\n  };\n\n  const saveEdit = async () => {\n    if (!editingId) return;\n    setUpdating(editingId);\n    setError(null);\n    try {\n      let parsedDueDate = null;\n      if (formData.due_date.trim()) {\n        const date = new Date(formData.due_date);\n        if (isNaN(date.getTime())) {\n          setError('×ª××¨×™×š ×œ× ×ª×§×™×Ÿ - ×× × ×”×©×ª××© ×‘×¤×•×¨××˜ YYYY-MM-DD');\n          setUpdating(null);\n          return;\n        }\n        parsedDueDate = date.toISOString();\n      }\n\n      // Parse estimated_hours\n      let parsedEstimatedHours = null;\n      if (formData.estimated_hours && formData.estimated_hours.trim()) {\n        const hours = parseFloat(formData.estimated_hours.trim());\n        if (!isNaN(hours) && hours > 0) {\n          parsedEstimatedHours = hours;\n        }\n      }\n\n      const body: any = {\n        title: formData.title.trim(),\n        description: formData.description.trim() || null,\n        priority: formData.priority,\n        status: formData.status,\n        category: formData.category || null,\n        due_date: parsedDueDate,\n        tags: formData.tagsText ? formData.tagsText.split(',').map((t) => t.trim()).filter(Boolean) : [],\n        assignees: formData.assignees.map(u => u.id),\n        estimated_hours: parsedEstimatedHours,\n      };\n\n      const res = await apiService.updateTask(editingId, body);\n      if (res.success && res.data) {\n        await fetchTasks();\n        setShowForm(false);\n        resetForm();\n        setEditingId(null);\n      } else {\n        // Handle specific permission error\n        if (res.error?.includes('×”×¨×©××”')) {\n          setError('××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×§×¦×•×ª ××©×™××” ×œ××©×ª××©×™× ××œ×”. × ×™×ª×Ÿ ×œ×”×§×¦×•×ª ××©×™××•×ª ×¨×§ ×œ×¢×•×‘×“×™× ×©×œ×š.');\n        } else {\n          setError(res.error || '×©×’×™××” ×‘×¢×“×›×•×Ÿ ××©×™××”');\n        }\n      }\n    } catch (err) {\n      console.error('Error updating task:', err);\n      setError('×©×’×™××” ×‘×¢×“×›×•×Ÿ ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setUpdating(null);\n    }\n  };\n\n  const deleteTask = async (taskId: string) => {\n    setDeleting(taskId);\n    setError(null);\n    try {\n      const res = await apiService.deleteTask(taskId);\n      if (res.success) {\n        await fetchTasks();\n      } else {\n        setError(res.error || '×©×’×™××” ×‘××—×™×§×ª ××©×™××”');\n      }\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setError('×©×’×™××” ×‘××—×™×§×ª ××©×™××” - × ×¡×” ×©×•×‘');\n    } finally {\n      setDeleting(null);\n    }\n  };\n\n  const renderHeader = () => (\n    <View\n      onLayout={(event) => {\n        if (Platform.OS === 'web') {\n          const { height } = event.nativeEvent.layout;\n          setHeaderHeight(height);\n        }\n      }}\n    >\n      <Text style={styles.header}>× ×™×”×•×œ ××©×™××•×ª ×•×¦×•×•×ª</Text>\n\n      <View style={styles.filtersRow}>\n        <TextInput\n          style={styles.input}\n          placeholder=\"×—×™×¤×•×© ××©×™××•×ª...\"\n          placeholderTextColor={colors.textSecondary}\n          value={query}\n          onChangeText={setQuery}\n        />\n        <TouchableOpacity style={styles.refreshBtn} onPress={fetchTasks}>\n          <Ionicons name=\"search-outline\" size={22} color={colors.white} />\n        </TouchableOpacity>\n      </View>\n\n      {error && (\n        <Text style={{ color: colors.error, textAlign: 'right', marginBottom: 8, fontWeight: 'bold' }}>{error}</Text>\n      )}\n\n\n      <View style={styles.chipsRow}>\n        <FilterChip label=\"×œ××™ ××•×§×¦×”\" value={filterAssignee} setValue={setFilterAssignee} options={[\n          { value: 'all', label: '×›×•×œ×' },\n          { value: 'me', label: '×¨×§ ×©×œ×™' },\n        ]} />\n        <FilterChip label=\"×¡×˜×˜×•×¡\" value={filterStatus} setValue={setFilterStatus} options={[\n          { value: '', label: '×”×›×œ' },\n          { value: 'open', label: '×¤×ª×•×—×”' },\n          { value: 'in_progress', label: '×‘×ª×”×œ×™×š' },\n          { value: 'stuck', label: '×ª×§×•×¢' },\n          { value: 'testing', label: '×‘×‘×“×™×§×”' },\n          { value: 'done', label: '×‘×•×¦×¢×”' },\n        ]} />\n        <FilterChip label=\"×¢×“×™×¤×•×ª\" value={filterPriority} setValue={setFilterPriority} options={[\n          { value: '', label: '×”×›×œ' },\n          { value: 'high', label: '×’×‘×•×”×”' },\n          { value: 'medium', label: '×‘×™× ×•× ×™×ª' },\n        ]} />\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={sortedTasks}\n          keyExtractor={(item) => item.id}\n          renderItem={renderItem}\n          contentContainerStyle={[\n            stylesWithListContent.listContent,\n            Platform.OS === 'web' && { paddingBottom: 120 }\n          ]}\n          ListHeaderComponent={renderHeader}\n          ListEmptyComponent={<Text style={styles.emptyText}>××™×Ÿ ××©×™××•×ª ×›×¨×’×¢</Text>}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n          showsVerticalScrollIndicator={true}\n          removeClippedSubviews={Platform.OS !== 'web'}\n          style={styles.flatList}\n        />\n      </View>\n\n      <Modal visible={showForm} animationType=\"slide\" transparent>\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <Text style={styles.modalTitle}>{editingId ? '×¢×¨×™×›×ª ××©×™××”' : '××©×™××” ×—×“×©×”'}</Text>\n\n            <TextInput style={styles.modalInput} placeholder=\"×›×•×ª×¨×ª\" value={formData.title} onChangeText={(v) => setFormData({ ...formData, title: v })} />\n            <TextInput style={[styles.modalInput, { height: 60 }]} placeholder=\"×ª×™××•×¨\" multiline value={formData.description} onChangeText={(v) => setFormData({ ...formData, description: v })} />\n\n            <View style={styles.row2}>\n              <PickerField\n                label=\"×¢×“×™×¤×•×ª\"\n                value={formData.priority}\n                onChange={(v: string) => setFormData({ ...formData, priority: v as TaskPriority })}\n                options={[\n                  { value: 'high', label: '×’×‘×•×”×”' },\n                  { value: 'medium', label: '×‘×™× ×•× ×™×ª' },\n                  { value: 'low', label: '× ××•×›×”' },\n                ]}\n              />\n              <PickerField\n                label=\"×¡×˜×˜×•×¡\"\n                value={formData.status}\n                onChange={(v: string) => setFormData({ ...formData, status: v as TaskStatus })}\n                options={[\n                  { value: 'open', label: '×¤×ª×•×—×”' },\n                  { value: 'in_progress', label: '×‘×ª×”×œ×™×š' },\n                  { value: 'stuck', label: '×ª×§×•×¢' },\n                  { value: 'testing', label: '×‘×‘×“×™×§×”' },\n                  { value: 'done', label: '×‘×•×¦×¢×”' },\n                ]}\n              />\n            </View>\n\n            {/* User Selector for Assignees */}\n            <UserSelector\n              selectedUsers={formData.assignees}\n              onSelect={(u) => setFormData({ ...formData, assignees: [...formData.assignees, u] })}\n              onRemove={(id) => setFormData({ ...formData, assignees: formData.assignees.filter(u => u.id !== id) })}\n            />\n\n            <TextInput style={styles.modalInput} placeholder=\"×ª×’×™×•×ª (××•×¤×¨×“×•×ª ××•×ª)\" value={formData.tagsText} onChangeText={(v) => setFormData({ ...formData, tagsText: v })} />\n            \n            <TextInput \n              style={styles.modalInput} \n              placeholder=\"×–××Ÿ ×¢×‘×•×“×” ××•×¢×¨×š ×‘×©×¢×•×ª (××•×¤×¦×™×•× ×œ×™)\" \n              value={formData.estimated_hours} \n              onChangeText={(v) => setFormData({ ...formData, estimated_hours: v })} \n              keyboardType=\"decimal-pad\"\n            />\n\n            <View style={styles.modalActions}>\n              <TouchableOpacity style={[styles.modalBtn, styles.modalCancel]} onPress={() => { setShowForm(false); resetForm(); }}>\n                <Text style={styles.modalBtnText}>×‘×™×˜×•×œ</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={[styles.modalBtn, styles.modalSave]} onPress={editingId ? saveEdit : createTask}>\n                <Text style={styles.modalBtnText}>{editingId ? '×©××•×¨' : '×¦×•×¨'}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      <TaskHoursModal\n        visible={showHoursModal}\n        onClose={() => {\n          setShowHoursModal(false);\n          setPendingTaskId(null);\n          setPendingTask(null);\n        }}\n        onSave={handleSaveHours}\n        estimatedHours={pendingTask?.estimated_hours || null}\n        taskTitle={pendingTask?.title}\n      />\n\n      {!viewOnly && (\n        <TouchableOpacity style={styles.addButton} onPress={() => { resetForm(); setShowForm(true); }}>\n          <Ionicons name=\"add\" size={24} color={colors.white} />\n        </TouchableOpacity>\n      )}\n    </SafeAreaView>\n  );\n}\n\n// Sub-components\nfunction PickerField({ label, value, onChange, options }: any) {\n  return (\n    <View style={{ flex: 1 }}>\n      <Text style={styles.pickerLabel}>{label}</Text>\n      <View style={styles.pickerOptions}>\n        {options.map((opt: any) => (\n          <TouchableOpacity key={opt.value} onPress={() => onChange(opt.value)} style={[styles.chip, value === opt.value && styles.chipActive]}>\n            <Text style={[styles.chipText, value === opt.value && styles.chipTextActive]}>{opt.label}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nfunction FilterChip({ label, value, setValue, options }: any) {\n  return (\n    <View style={{ flexDirection: 'row', alignItems: 'center', gap: 8 }}>\n      <Text style={{ color: colors.textSecondary }}>{label}:</Text>\n      <View style={{ flexDirection: 'row', gap: 6, flexWrap: 'wrap' }}>\n        {options.map((opt: any) => (\n          <TouchableOpacity key={`${label}-${opt.value}`} onPress={() => setValue(opt.value)} style={[styles.chip, value === opt.value && styles.chipActive]}>\n            <Text style={[styles.chipText, value === opt.value && styles.chipTextActive]}>{opt.label}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n    ...(Platform.OS === 'web' ? {\n      position: 'relative' as any,\n      height: '100vh' as any,\n    } : {\n      padding: LAYOUT_CONSTANTS.SPACING.LG,\n    }),\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'right',\n  },\n  filtersRow: { flexDirection: 'row', gap: 8, marginBottom: 8 },\n  input: { flex: 1, height: 44, backgroundColor: colors.background, borderRadius: 8, paddingHorizontal: 10, textAlign: 'right', color: colors.textPrimary },\n  refreshBtn: { width: 44, height: 44, backgroundColor: colors.primary, borderRadius: 8, alignItems: 'center', justifyContent: 'center' },\n  chipsRow: { flexDirection: 'row', flexWrap: 'wrap', gap: 12, marginBottom: 16 },\n  emptyText: { textAlign: 'center', color: colors.textSecondary, marginTop: 40 },\n\n  taskItem: { flexDirection: 'row', padding: 12, backgroundColor: colors.background, borderRadius: 12, borderWidth: 1, borderColor: colors.border },\n  taskItemDone: { opacity: 0.6 },\n  checkbox: { marginRight: 12, paddingTop: 4 },\n  taskContent: { flex: 1 },\n  taskTitle: { fontSize: 16, fontWeight: 'bold', color: colors.textPrimary, textAlign: 'right' },\n  taskTitleDone: { textDecorationLine: 'line-through', color: colors.textSecondary },\n  description: { fontSize: 14, color: colors.textSecondary, textAlign: 'right', marginBottom: 6 },\n\n  metaRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: 8, marginTop: 6, flexWrap: 'wrap' },\n  badge: { paddingHorizontal: 8, paddingVertical: 2, borderRadius: 12, backgroundColor: colors.backgroundSecondary, borderWidth: 1, borderColor: colors.border },\n  badgeText: { fontSize: 12, color: colors.textSecondary },\n  priority_high: { backgroundColor: colors.pinkLight, borderColor: colors.pinkLight },\n  priority_medium: { backgroundColor: colors.warningLight, borderColor: colors.warningLight },\n  priority_low: { backgroundColor: colors.successLight, borderColor: colors.successLight },\n  \n  status_open: { backgroundColor: colors.infoLight, borderColor: colors.info },\n  status_in_progress: { backgroundColor: colors.warningLight, borderColor: colors.warning },\n  status_stuck: { backgroundColor: colors.errorLight, borderColor: colors.error },\n  status_testing: { backgroundColor: '#E8F5E9', borderColor: '#4CAF50' },\n  status_done: { backgroundColor: colors.successLight, borderColor: colors.success },\n  status_archived: { backgroundColor: colors.backgroundSecondary, borderColor: colors.border },\n\n  avatarsRow: { flexDirection: 'row-reverse', alignItems: 'center' },\n  avatarSmall: { width: 24, height: 24, borderRadius: 12, borderWidth: 1, borderColor: colors.white },\n  moreAvatar: { backgroundColor: colors.textSecondary, alignItems: 'center', justifyContent: 'center' },\n  moreAvatarText: { color: colors.white, fontSize: 10, fontWeight: 'bold' },\n\n  creatorText: { fontSize: 11, color: colors.textSecondary, textAlign: 'right', marginTop: 4 },\n\n  hoursRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: 8, marginTop: 6, flexWrap: 'wrap' },\n  hoursBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    backgroundColor: colors.infoLight,\n    borderColor: colors.info,\n  },\n  actualHoursBadge: {\n    backgroundColor: colors.successLight,\n    borderColor: colors.success,\n  },\n  hoursText: { \n    fontSize: 11, \n    color: colors.info, \n    fontWeight: '600',\n  },\n\n  actionsRow: { flexDirection: 'row-reverse', gap: 16, marginTop: 8 },\n  actionBtn: { flexDirection: 'row', alignItems: 'center', gap: 4 },\n  actionText: { fontSize: 12, color: colors.textPrimary },\n\n  assigneesContainer: { marginTop: 4 },\n  assigneesContent: { flexDirection: 'row-reverse', alignItems: 'center', gap: 6 },\n  assigneeText: { fontSize: 12, color: colors.textSecondary },\n  unassignedText: { fontSize: 12, color: colors.error, fontWeight: 'bold' },\n\n  // Subtask styles\n  subtaskItem: { \n    marginLeft: 24, \n    borderLeftWidth: 3, \n    borderLeftColor: colors.info,\n    backgroundColor: '#F0F8FF',\n  },\n  subtaskIndicator: { \n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingRight: 8, \n    justifyContent: 'center',\n  },\n  levelText: {\n    fontSize: 10,\n    color: colors.info,\n    fontWeight: '600',\n  },\n  subtasksList: { \n    marginTop: 8, \n    gap: 8,\n  },\n  subtaskBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    backgroundColor: colors.infoLight,\n    borderColor: colors.info,\n  },\n  subtaskBadgeText: { \n    fontSize: 11, \n    color: colors.info, \n    fontWeight: '600',\n  },\n  parentBadge: { \n    flexDirection: 'row', \n    alignItems: 'center', \n    gap: 4, \n    marginBottom: 4,\n    backgroundColor: colors.infoLight,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 8,\n    alignSelf: 'flex-end',\n  },\n  parentText: { \n    fontSize: 10, \n    color: colors.info,\n  },\n\n  flatList: {\n    flex: 1,\n    ...(Platform.OS === 'web' && {\n      overflowY: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n    }),\n  },\n  addButton: { \n    ...(Platform.OS === 'web' ? { position: 'fixed' as any } : { position: 'absolute' }),\n    left: 20, \n    bottom: 20, \n    width: 56, \n    height: 56, \n    borderRadius: 28, \n    backgroundColor: colors.success, \n    alignItems: 'center', \n    justifyContent: 'center', \n    shadowColor: '#000', \n    shadowOpacity: 0.3, \n    shadowRadius: 4, \n    shadowOffset: { width: 0, height: 2 },\n    elevation: 5,\n    zIndex: 1000\n  },\n\n  modalBackdrop: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center', padding: 20 },\n  modalCard: { backgroundColor: colors.background, borderRadius: 16, padding: 20 },\n  modalTitle: { fontSize: 20, fontWeight: 'bold', textAlign: 'right', marginBottom: 16, color: colors.textPrimary },\n  modalInput: { height: 44, backgroundColor: colors.backgroundSecondary, borderRadius: 8, paddingHorizontal: 12, textAlign: 'right', marginBottom: 12, color: colors.textPrimary, borderWidth: 1, borderColor: colors.border },\n  row2: { flexDirection: 'row', gap: 12, marginBottom: 12 },\n  pickerLabel: { textAlign: 'right', marginBottom: 4, color: colors.textSecondary },\n  pickerOptions: { flexDirection: 'row', flexWrap: 'wrap', gap: 8 },\n  chip: { paddingHorizontal: 10, paddingVertical: 6, borderRadius: 16, borderWidth: 1, borderColor: colors.border, backgroundColor: colors.background },\n  chipActive: { backgroundColor: colors.infoLight, borderColor: colors.info },\n  chipText: { fontSize: 12, color: colors.textSecondary },\n  chipTextActive: { color: colors.textPrimary, fontWeight: 'bold' },\n\n  modalActions: { flexDirection: 'row', gap: 12, marginTop: 16 },\n  modalBtn: { flex: 1, height: 44, borderRadius: 8, alignItems: 'center', justifyContent: 'center' },\n  modalCancel: { backgroundColor: colors.backgroundSecondary, borderWidth: 1, borderColor: colors.border },\n  modalSave: { backgroundColor: colors.primary },\n  modalBtnText: { color: colors.white, fontWeight: 'bold' },\n});\n\n// Define listContent outside StyleSheet.create() because it needs dynamic Platform check\nconst listContentStyle = Platform.OS === 'web' ? {\n  paddingBottom: 100,\n  gap: 12,\n  paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n  paddingTop: LAYOUT_CONSTANTS.SPACING.LG,\n} : {\n  paddingBottom: 100,\n  gap: 12,\n};\n\n// Merge with base styles\nconst stylesWithListContent = {\n  ...styles,\n  listContent: listContentStyle,\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/AdminTimeManagementScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1344,1347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1344,1347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'viewOnly' is assigned a value but never used.","line":51,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2470,2473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2470,2473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":176,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5867,5882],"text":"×¡×”&quot;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5867,5882],"text":"×¡×”&ldquo;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5867,5882],"text":"×¡×”&#34;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5867,5882],"text":"×¡×”&rdquo;×› ×©×¢×•×ª ×”×¦×•×•×ª"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  RefreshControl,\n  ActivityIndicator,\n  TouchableOpacity,\n  Platform,\n  Dimensions,\n  StatusBar,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { NavigationProp, useRoute } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { AdminStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { useAdminProtection } from '../hooks/useAdminProtection';\nimport { apiService } from '../utils/apiService';\n\ninterface AdminTimeManagementScreenProps {\n  navigation: NavigationProp<AdminStackParamList>;\n}\n\ninterface HoursReport {\n  manager_hours: number;\n  team_total_hours: number;\n  by_task: Array<{\n    task_id: string;\n    task_title: string;\n    hours: number;\n  }>;\n  by_period: Array<{\n    period: string;\n    hours: number;\n  }>;\n  by_user: Array<{\n    user_id: string;\n    user_name: string;\n    hours: number;\n  }>;\n}\n\nexport default function AdminTimeManagementScreen({ navigation }: AdminTimeManagementScreenProps) {\n  const route = useRoute();\n  const routeParams = (route.params as any) || {};\n  const viewOnly = routeParams?.viewOnly === true;\n  useAdminProtection(true);\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [report, setReport] = useState<HoursReport | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n\n  useEffect(() => {\n    loadReport();\n  }, [selectedUser?.id]);\n\n  const loadReport = async () => {\n    if (!selectedUser?.id) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await apiService.getHoursReport(selectedUser.id);\n      if (res.success && res.data) {\n        setReport(res.data);\n      } else {\n        setError(res.error || '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×“×•×—');\n      }\n    } catch (err: any) {\n      console.error('Error loading hours report:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×“×•×—');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadReport();\n    setRefreshing(false);\n  };\n\n  const formatHours = (hours: number) => {\n    return hours.toFixed(1);\n  };\n\n  const formatPeriod = (period: string) => {\n    // period format: \"YYYY-MM\"\n    const [year, month] = period.split('-');\n    const months = [\n      '×™× ×•××¨', '×¤×‘×¨×•××¨', '××¨×¥', '××¤×¨×™×œ', '×××™', '×™×•× ×™',\n      '×™×•×œ×™', '××•×’×•×¡×˜', '×¡×¤×˜××‘×¨', '××•×§×˜×•×‘×¨', '× ×•×‘××‘×¨', '×“×¦××‘×¨'\n    ];\n    return `${months[parseInt(month) - 1]} ${year}`;\n  };\n\n  return (\n    <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View \n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.title}>× ×™×”×•×œ ×–××Ÿ ×¢×•×‘×“×™×</Text>\n      </View>\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <ScrollView\n          contentContainerStyle={styles.scrollContent}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} />\n          }\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n        >\n\n        {loading && !report && (\n          <View style={styles.centerContainer}>\n            <ActivityIndicator size=\"large\" color={colors.primary} />\n            <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×“×•×—×•×ª...</Text>\n          </View>\n        )}\n\n        {error && (\n          <View style={styles.errorContainer}>\n            <Ionicons name=\"alert-circle-outline\" size={24} color={colors.error} />\n            <Text style={styles.errorText}>{error}</Text>\n            <TouchableOpacity style={styles.retryButton} onPress={loadReport}>\n              <Text style={styles.retryButtonText}>× ×¡×” ×©×•×‘</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {report && (\n          <>\n            {/* Summary Cards */}\n            <View style={styles.summaryContainer}>\n              <View style={styles.summaryCard}>\n                <Ionicons name=\"person-outline\" size={32} color={colors.primary} />\n                <Text style={styles.summaryValue}>{formatHours(report.manager_hours)}</Text>\n                <Text style={styles.summaryLabel}>×©×¢×•×ª ×”×× ×”×œ</Text>\n              </View>\n              <View style={styles.summaryCard}>\n                <Ionicons name=\"people-outline\" size={32} color={colors.success} />\n                <Text style={styles.summaryValue}>{formatHours(report.team_total_hours)}</Text>\n                <Text style={styles.summaryLabel}>×¡×”\"×› ×©×¢×•×ª ×”×¦×•×•×ª</Text>\n              </View>\n            </View>\n\n            {/* Hours by User */}\n            {report.by_user && report.by_user.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"people-outline\" size={20} color={colors.primary} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ××©×ª××©</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_user.map((item, index) => (\n                    <View key={item.user_id} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle}>{item.user_name}</Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < report.by_user.length - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {/* Hours by Task */}\n            {report.by_task && report.by_task.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"checkmark-done-outline\" size={20} color={colors.info} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ××©×™××”</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_task.slice(0, 10).map((item, index) => (\n                    <View key={item.task_id} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle} numberOfLines={2}>\n                          {item.task_title}\n                        </Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < Math.min(report.by_task.length, 10) - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {/* Hours by Period */}\n            {report.by_period && report.by_period.length > 0 && (\n              <View style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"calendar-outline\" size={20} color={colors.warning} />\n                  <Text style={styles.sectionTitle}>×©×¢×•×ª ×¢×‘×•×“×” ×œ×¤×™ ×ª×§×•×¤×”</Text>\n                </View>\n                <View style={styles.list}>\n                  {report.by_period.map((item, index) => (\n                    <View key={item.period} style={styles.listItem}>\n                      <View style={styles.listItemContent}>\n                        <Text style={styles.listItemTitle}>{formatPeriod(item.period)}</Text>\n                        <Text style={styles.listItemValue}>{formatHours(item.hours)} ×©×¢×•×ª</Text>\n                      </View>\n                      {index < report.by_period.length - 1 && <View style={styles.separator} />}\n                    </View>\n                  ))}\n                </View>\n              </View>\n            )}\n\n            {(!report.by_user || report.by_user.length === 0) &&\n              (!report.by_task || report.by_task.length === 0) &&\n              (!report.by_period || report.by_period.length === 0) && (\n                <View style={styles.emptyContainer}>\n                  <Ionicons name=\"time-outline\" size={48} color={colors.textSecondary} />\n                  <Text style={styles.emptyText}>××™×Ÿ × ×ª×•× ×™ ×©×¢×•×ª ×¢×‘×•×“×” ×œ×”×¦×’×”</Text>\n                </View>\n              )}\n          </>\n        )}\n        </ScrollView>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  scrollContent: {\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingBottom: 100,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  backButton: {\n    padding: 8,\n  },\n  title: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: 'right',\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  loadingText: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n  },\n  errorContainer: {\n    backgroundColor: colors.errorLight,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.error,\n    textAlign: 'center',\n  },\n  retryButton: {\n    marginTop: LAYOUT_CONSTANTS.SPACING.SM,\n    paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG,\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.SM,\n    backgroundColor: colors.error,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.SMALL,\n  },\n  retryButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n  },\n  summaryContainer: {\n    flexDirection: 'row',\n    gap: LAYOUT_CONSTANTS.SPACING.MD,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  summaryCard: {\n    flex: 1,\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.LARGE,\n    padding: LAYOUT_CONSTANTS.SPACING.LG,\n    alignItems: 'center',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  summaryValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginVertical: LAYOUT_CONSTANTS.SPACING.SM,\n  },\n  summaryLabel: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  section: {\n    marginBottom: LAYOUT_CONSTANTS.SPACING.XL,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: LAYOUT_CONSTANTS.SPACING.SM,\n    marginBottom: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  list: {\n    backgroundColor: colors.background,\n    borderRadius: LAYOUT_CONSTANTS.BORDER_RADIUS.MEDIUM,\n    overflow: 'hidden',\n    shadowColor: colors.shadow,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  listItem: {\n    padding: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  listItemContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  listItemTitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    flex: 1,\n    textAlign: 'right',\n    marginRight: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  listItemValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  separator: {\n    height: 1,\n    backgroundColor: colors.border,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n  },\n  emptyContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: LAYOUT_CONSTANTS.SPACING.XL * 2,\n  },\n  emptyText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: LAYOUT_CONSTANTS.SPACING.MD,\n    textAlign: 'center',\n  },\n});\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/BookmarksScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigation' is assigned a value but never used.","line":43,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":47,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Shows user's bookmarked posts with remove and clear-all actions.\n// - Reached from: Home/Profile menus and routes as 'BookmarksScreen'.\n// - Provides: Loads bookmarks by user, pull-to-refresh, remove single bookmark, clear all (client-side for now).\n// - Reads from context: `useUser()` -> `selectedUser`.\n// - External deps/services: `bookmarksService` (get/remove), i18n translations.\n\n// TODO: Add comprehensive error handling with user-friendly messages\n// TODO: Implement proper loading states and skeleton screens\n// TODO: Add bookmark synchronization with backend when available\n// TODO: Implement proper pagination for large bookmark lists\n// TODO: Add bookmark categories and filtering functionality\n// TODO: Implement proper offline support with cache management\n// TODO: Add comprehensive accessibility support\n// TODO: Replace console.log with proper logging service\n// TODO: Add unit tests for all bookmark operations\n// TODO: Implement proper image loading and caching for bookmark thumbnails\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  FlatList,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  SafeAreaView,\n  Alert,\n  RefreshControl,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { getBookmarks, removeBookmark, Bookmark } from '../utils/bookmarksService';\nimport colors from '../globals/colors';\nimport { FontSizes, IconSizes } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\n\nexport default function BookmarksScreen() {\n  // TODO: Extract state management to custom hook (useBookmarksState)\n  // TODO: Add proper TypeScript interfaces for all props and state\n  // TODO: Implement proper error boundaries for crash prevention\n  // TODO: Add comprehensive analytics tracking for bookmark actions\n  const navigation = useNavigation();\n  const { selectedUser } = useUser();\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n  const { t } = useTranslation(['bookmarks','common']);\n\n  const loadBookmarks = async () => {\n    // TODO: Add proper loading state management\n    // TODO: Implement retry logic for failed requests\n    // TODO: Add proper error classification and handling\n    // TODO: Implement caching mechanism to reduce API calls\n    if (!selectedUser) {\n      Alert.alert(t('common:errorTitle'), t('bookmarks:selectUserFirst'));\n      return;\n    }\n\n    try {\n      const userBookmarks = await getBookmarks(selectedUser.id);\n      setBookmarks(userBookmarks);\n    } catch (error) {\n      console.error('âŒ Load bookmarks error:', error);\n      // TODO: Replace Alert.alert with proper toast/snackbar notification\n      // TODO: Add error tracking and monitoring\n      Alert.alert(t('common:errorTitle'), t('bookmarks:loadError'));\n    }\n  };\n\n  useEffect(() => {\n    loadBookmarks();\n  }, [selectedUser]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”– BookmarksScreen - Screen focused, refreshing bookmarks...');\n      loadBookmarks();\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [selectedUser])\n  );\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadBookmarks();\n    setRefreshing(false);\n  };\n\n  const handleRemoveBookmark = async (bookmark: Bookmark) => {\n    if (!selectedUser) return;\n\n    Alert.alert(\n      t('bookmarks:removeTitle'),\n      t('bookmarks:removeMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('bookmarks:removeConfirm'),\n          style: 'destructive',\n          onPress: async () => {\n            try {\n              await removeBookmark(selectedUser.id, bookmark.postId);\n              setBookmarks(prev => prev.filter(b => b.id !== bookmark.id));\n              console.log('âœ… Bookmark removed');\n            } catch (error) {\n              console.error('âŒ Remove bookmark error:', error);\n              Alert.alert(t('common:errorTitle'), t('bookmarks:removeError'));\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  const handleClearAll = () => {\n    if (!selectedUser) return;\n\n    Alert.alert(\n      t('bookmarks:clearTitle'),\n      t('bookmarks:clearMessage'),\n      [\n        { text: t('common:cancel'), style: 'cancel' },\n        {\n          text: t('bookmarks:clearConfirm'),\n          style: 'destructive',\n          onPress: () => {\n            setBookmarks([]);\n            console.log('âœ… All bookmarks cleared');\n          }\n        }\n      ]\n    );\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));\n    \n    if (diffInHours < 1) return t('common:time.now');\n    if (diffInHours < 24) return t('common:time.hoursAgo', { count: diffInHours });\n    return date.toLocaleDateString();\n  };\n\n  const renderBookmark = ({ item }: { item: Bookmark }) => (\n    <View style={styles.bookmarkContainer}>\n      <Image source={{ uri: item.postData.thumbnail }} style={styles.thumbnail} />\n      \n      <View style={styles.contentContainer}>\n        <View style={styles.bookmarkHeader}>\n          <View style={styles.userInfo}>\n            <Image source={{ uri: item.postData.user.avatar }} style={styles.userAvatar} />\n            <View style={styles.userDetails}>\n              <Text style={styles.userName}>{item.postData.user.name}</Text>\n              <Text style={styles.timestamp}>{formatTimestamp(item.timestamp)}</Text>\n            </View>\n          </View>\n          \n          <TouchableOpacity \n            style={styles.removeButton}\n            onPress={() => handleRemoveBookmark(item)}\n          >\n            <Ionicons name=\"close-circle\" size={IconSizes.small} color={colors.error} />\n          </TouchableOpacity>\n        </View>\n        \n        <Text style={styles.title}>{item.postData.title}</Text>\n        <Text style={styles.description} numberOfLines={2}>\n          {item.postData.description}\n        </Text>\n      </View>\n    </View>\n  );\n\n  if (!selectedUser) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"person-outline\" size={IconSizes.xxlarge} color={colors.textSecondary} />\n          <Text style={styles.emptyTitle}>{t('bookmarks:selectUserTitle')}</Text>\n          <Text style={styles.emptySubtitle}>{t('bookmarks:selectUserSubtitle')}</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>{t('bookmarks:title')}</Text>\n        {bookmarks.length > 0 && (\n          <TouchableOpacity onPress={handleClearAll} style={styles.clearButton}>\n            <Ionicons name=\"trash-outline\" size={IconSizes.xsmall} color={colors.error} />\n            <Text style={styles.clearButtonText}>{t('bookmarks:clearConfirm')}</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n\n      {bookmarks.length === 0 ? (\n        <View style={styles.emptyContainer}>\n          <Ionicons name=\"bookmark-outline\" size={IconSizes.xxlarge} color={colors.textSecondary} />\n          <Text style={styles.emptyTitle}>{t('bookmarks:emptyTitle')}</Text>\n          <Text style={styles.emptySubtitle}>{t('bookmarks:emptySubtitle')}</Text>\n        </View>\n      ) : (\n        <FlatList\n          data={bookmarks}\n          renderItem={renderBookmark}\n          keyExtractor={(item) => item.id}\n          contentContainerStyle={styles.listContainer}\n          showsVerticalScrollIndicator={false}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n          }\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.large,\n    //TODO: change font size to be relative to the screen size\n    //TODO: move font to globals\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  clearButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 8,\n  },\n  clearButtonText: {\n    fontSize: FontSizes.small,\n    color: colors.error,\n    //TODO: change margin to be relative to the screen size\n    marginLeft: 4,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    //TODO: change padding to be relative to the screen size\n    padding: 32,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    //TODO: change margin to be relative to the screen size\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  listContainer: {\n    //TODO: change padding to be relative to the screen size\n    padding: 16,\n  },\n  bookmarkContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    overflow: 'hidden',\n    elevation: 2,\n    boxShadow: '0 1px 4px rgba(0, 0, 0, 0.1)',\n  },\n  thumbnail: {\n    width: 80,\n    height: 80,\n  },\n  contentContainer: {\n    flex: 1,\n    padding: 12,\n  },\n  bookmarkHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  userAvatar: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    marginRight: 8,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  timestamp: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  removeButton: {\n    padding: 4,\n  },\n  title: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  description: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    lineHeight: 16,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChallengeDetailsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[124,135],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Image' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Image"},"fix":{"range":[301,310],"text":""},"desc":"Remove unused variable \"Image\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userParticipation' is assigned a value but never used.","line":49,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4475,4478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4475,4478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6057,6060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6057,6060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":348,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11690,11693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11690,11693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Challenge Details Screen\n// Shows full challenge information, join button, and entry tracking\nimport React, { useCallback, useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  ScrollView,\n  ActivityIndicator,\n  Alert,\n  TextInput,\n  Modal,\n  Image,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect, useRoute, RouteProp } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport {\n  CommunityChallenge,\n  ChallengeParticipant,\n  ChallengeEntry,\n  DonationsStackParamList,\n} from '../globals/types';\nimport CommentsModal from '../components/CommentsModal';\n\ntype ChallengeDetailsScreenRouteProp = RouteProp<DonationsStackParamList, 'ChallengeDetailsScreen'>;\n\ninterface ChallengeDetailsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n}\n\nexport default function ChallengeDetailsScreen({ navigation }: ChallengeDetailsScreenProps) {\n  const route = useRoute<ChallengeDetailsScreenRouteProp>();\n  const { challengeId } = route.params;\n  const { selectedUser: user } = useUser();\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n\n  const [loading, setLoading] = useState(true);\n  const [challenge, setChallenge] = useState<CommunityChallenge | null>(null);\n  const [participants, setParticipants] = useState<ChallengeParticipant[]>([]);\n  const [userParticipation, setUserParticipation] = useState<ChallengeParticipant | null>(null);\n  const [recentEntries, setRecentEntries] = useState<ChallengeEntry[]>([]);\n  const [isJoined, setIsJoined] = useState(false);\n\n  // Entry form state\n  const [entryValue, setEntryValue] = useState('');\n  const [entryNotes, setEntryNotes] = useState('');\n  const [submittingEntry, setSubmittingEntry] = useState(false);\n  const [showEntryModal, setShowEntryModal] = useState(false);\n  \n  // Comments state\n  const [showCommentsModal, setShowCommentsModal] = useState(false);\n  const [challengePostId, setChallengePostId] = useState<string | null>(null);\n\n  useFocusEffect(\n    useCallback(() => {\n      loadChallengeDetails();\n    }, [challengeId])\n  );\n\n  const loadChallengeDetails = async () => {\n    try {\n      setLoading(true);\n      const response = await db.getChallengeDetails(challengeId);\n\n      if (response.success && response.data) {\n        setChallenge(response.data);\n        setParticipants(response.data.participants || []);\n\n        // Get the post_id for comments (challenges auto-create posts)\n        console.log('ğŸ“ Challenge post_id:', response.data.post_id);\n        if (response.data.post_id) {\n          setChallengePostId(response.data.post_id);\n        } else {\n          console.warn('âš ï¸ Challenge has no post_id - comments will not be available');\n        }\n\n        // Check if user is participating\n        if (user?.id) {\n          const userPart = response.data.participants?.find(\n            (p: ChallengeParticipant) => p.user_id === user.id\n          );\n          setUserParticipation(userPart || null);\n          setIsJoined(!!userPart);\n\n          // Load user's entries if joined\n          if (userPart) {\n            await loadUserEntries();\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading challenge details:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserEntries = async () => {\n    if (!user?.id) return;\n    try {\n      const response = await db.getChallengeEntries(challengeId, user.id, 10, 0);\n      if (response.success && response.data) {\n        setRecentEntries(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading entries:', error);\n    }\n  };\n\n  const handleJoinChallenge = async () => {\n    if (!user?.id) {\n      Alert.alert(t('common:error'), t('challenges:messages.loginToJoin'));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await db.joinChallenge(challengeId, user.id);\n\n      if (response.success) {\n        showToast(t('challenges:challengeJoined'), 'success');\n        await loadChallengeDetails();\n      }\n    } catch (error: any) {\n      console.error('Error joining challenge:', error);\n      if (error.message?.includes('Already joined')) {\n        showToast(t('challenges:alreadyJoined'), 'info');\n      } else {\n        showToast(t('challenges:messages.errorJoining'), 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddEntry = async () => {\n    if (!user?.id) {\n      Alert.alert(t('common:error'), t('challenges:messages.loginRequired'));\n      return;\n    }\n\n    if (!isJoined) {\n      Alert.alert(t('common:error'), '× × ×œ×”×¦×˜×¨×£ ×œ××ª×’×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    // Validate entry value\n    let value = 0;\n    if (challenge?.type === 'BOOLEAN') {\n      value = 1; // Always 1 for boolean (completed)\n    } else {\n      const parsedValue = parseFloat(entryValue);\n      if (isNaN(parsedValue) || parsedValue < 0) {\n        Alert.alert(t('common:error'), '× × ×œ×”×–×™×Ÿ ×¢×¨×š ×—×•×§×™');\n        return;\n      }\n      value = parsedValue;\n    }\n\n    try {\n      setSubmittingEntry(true);\n      const response = await db.addChallengeEntry(challengeId, {\n        user_id: user.id,\n        value,\n        notes: entryNotes.trim() || undefined,\n      });\n\n      if (response.success) {\n        const streak = response.data?.current_streak || 0;\n        showToast(`${t('challenges:entryAdded')} ${t('challenges:stats.streakDays', { count: streak })}`, 'success');\n        \n        // Reset form\n        setEntryValue('');\n        setEntryNotes('');\n        setShowEntryModal(false);\n\n        // Reload details\n        await loadChallengeDetails();\n      }\n    } catch (error: any) {\n      console.error('Error adding entry:', error);\n      if (error.message?.includes('already exists')) {\n        showToast(t('challenges:messages.alreadyCompletedToday'), 'info');\n      } else {\n        showToast(t('challenges:messages.errorAddingEntry'), 'error');\n      }\n    } finally {\n      setSubmittingEntry(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return t('challenges:details.today');\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return t('challenges:details.yesterday');\n    } else {\n      const daysAgo = Math.floor((today.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n      return t('challenges:details.daysAgo', { count: daysAgo });\n    }\n  };\n\n  const getDifficultyColor = (difficulty?: string) => {\n    switch (difficulty) {\n      case 'easy':\n        return colors.success;\n      case 'medium':\n        return colors.warning;\n      case 'hard':\n        return colors.error;\n      case 'expert':\n        return colors.primary;\n      default:\n        return colors.textSecondary;\n    }\n  };\n\n  if (loading && !challenge) {\n    return (\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  if (!challenge) {\n    return (\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.errorContainer}>\n          <Ionicons name=\"alert-circle-outline\" size={64} color={colors.error} />\n          <Text style={styles.errorText}>{t('challenges:messages.challengeNotFound')}</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => navigation.goBack()}\n          >\n            <Text style={styles.backButtonText}>{t('common:back')}</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity\n            style={styles.backIcon}\n            onPress={() => navigation.goBack()}\n          >\n            <Ionicons name=\"arrow-back\" size={24} color={colors.text} />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>{t('challenges:details.title')}</Text>\n          <View style={{ width: 24 }} />\n        </View>\n\n        {/* Challenge Info */}\n        <View style={styles.challengeCard}>\n          <View style={styles.challengeHeader}>\n            <Text style={styles.challengeTitle}>{challenge.title}</Text>\n            {challenge.difficulty && (\n              <View\n                style={[\n                  styles.difficultyBadge,\n                  { backgroundColor: getDifficultyColor(challenge.difficulty) },\n                ]}\n              >\n                <Text style={styles.difficultyText}>\n                  {t(`challenges:difficulty.${challenge.difficulty}`)}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {challenge.description && (\n            <Text style={styles.challengeDescription}>{challenge.description}</Text>\n          )}\n\n          <View style={styles.challengeMeta}>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"person-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t('challenges:stats.createdBy')}: {challenge.creator_name || t('common:unknownUser')}\n              </Text>\n            </View>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t('challenges:stats.participantsCount', { count: challenge.participants_count })}\n              </Text>\n            </View>\n            <View style={styles.metaItem}>\n              <Ionicons name=\"calendar-outline\" size={16} color={colors.textSecondary} />\n              <Text style={styles.metaText}>\n                {t(`challenges:frequency.${challenge.frequency}`)}\n              </Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Join Button (if not joined) */}\n        {!isJoined && (\n          <TouchableOpacity\n            style={styles.joinButton}\n            onPress={handleJoinChallenge}\n            disabled={loading}\n          >\n            {loading ? (\n              <ActivityIndicator color={colors.white} />\n            ) : (\n              <>\n                <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n                <Text style={styles.joinButtonText}>{t('challenges:joinChallenge')}</Text>\n              </>\n            )}\n          </TouchableOpacity>\n        )}\n\n        {/* Participation Status (if joined) */}\n        {isJoined && (\n          <View style={styles.participationCard}>\n            <View style={styles.participationHeader}>\n              <Ionicons name=\"checkmark-circle\" size={24} color={colors.success} />\n              <Text style={styles.participationText}>\n                {t('challenges:messages.youAreParticipating', '××ª×” ××©×ª×ª×£ ×‘××ª×’×¨ ×–×”')}\n              </Text>\n            </View>\n            <TouchableOpacity\n              style={styles.viewStatsButton}\n              onPress={() => (navigation as any).navigate('ChallengeStatisticsScreen')}\n            >\n              <Ionicons name=\"stats-chart-outline\" size={20} color={colors.primary} />\n              <Text style={styles.viewStatsText}>{t('challenges:viewStatistics')}</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {/* Entry Modal */}\n        <Modal\n          visible={showEntryModal}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setShowEntryModal(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>{t('challenges:addEntryButton')}</Text>\n                <TouchableOpacity onPress={() => setShowEntryModal(false)}>\n                  <Ionicons name=\"close\" size={28} color={colors.textPrimary} />\n                </TouchableOpacity>\n              </View>\n\n              {challenge.type !== 'BOOLEAN' && (\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>{t('challenges:fields.value')} *</Text>\n                  <TextInput\n                    style={styles.input}\n                    placeholder={\n                      challenge.type === 'DURATION'\n                        ? t('challenges:fields.goalValueMinutes')\n                        : t('challenges:fields.goalValuePlaceholder')\n                    }\n                    value={entryValue}\n                    onChangeText={setEntryValue}\n                    keyboardType=\"numeric\"\n                  />\n                </View>\n              )}\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>{t('challenges:fields.notes')}</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  placeholder={t('challenges:fields.notesPlaceholder')}\n                  value={entryNotes}\n                  onChangeText={setEntryNotes}\n                  multiline\n                  numberOfLines={3}\n                />\n              </View>\n\n              <TouchableOpacity\n                style={[styles.addEntryButton, submittingEntry && styles.addEntryButtonDisabled]}\n                onPress={handleAddEntry}\n                disabled={submittingEntry}\n              >\n                {submittingEntry ? (\n                  <ActivityIndicator color={colors.white} />\n                ) : (\n                  <>\n                    <Ionicons name=\"checkmark-circle-outline\" size={24} color={colors.white} />\n                    <Text style={styles.addEntryButtonText}>{t('challenges:addEntry')}</Text>\n                  </>\n                )}\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Recent Activity (Anonymous - shows activity without personal data) */}\n        {isJoined && (\n          <View style={styles.activityCard}>\n            <Text style={styles.sectionTitle}>{t('challenges:details.recentActivity', '×¤×¢×™×œ×•×ª ××—×¨×•× ×”')}</Text>\n            <Text style={styles.activitySubtitle}>\n              {t('challenges:messages.anonymousActivity', '×”×‘×™×¦×•×¢×™× ×©×œ×š ×¤×¨×˜×™×™× ×•×× ×•× ×™××™×™×')}\n            </Text>\n            {recentEntries.length > 0 ? (\n              recentEntries.slice(0, 5).map((entry) => (\n                <View key={entry.id} style={styles.activityItem}>\n                  <Ionicons name=\"checkmark-circle\" size={20} color={colors.success} />\n                  <Text style={styles.activityDate}>{formatDate(entry.entry_date)}</Text>\n                  {entry.notes && (\n                    <Text style={styles.activityNote} numberOfLines={1}>\n                      - {entry.notes}\n                    </Text>\n                  )}\n                </View>\n              ))\n            ) : (\n              <Text style={styles.noActivityText}>\n                {t('challenges:messages.noEntries')}\n              </Text>\n            )}\n          </View>\n        )}\n\n        {/* Top Participants */}\n        {participants.length > 0 && (\n          <View style={styles.participantsCard}>\n            <Text style={styles.sectionTitle}>{t('challenges:details.topParticipants')}</Text>\n            {participants.slice(0, 5).map((participant, index) => (\n              <View key={participant.id} style={styles.participantItem}>\n                <View style={styles.participantRank}>\n                  <Text style={styles.rankNumber}>#{index + 1}</Text>\n                </View>\n                <Text style={styles.participantName}>{participant.user_name || t('common:unknownUser')}</Text>\n                <View style={styles.participantStats}>\n                  <Ionicons name=\"flame\" size={16} color={colors.error} />\n                  <Text style={styles.participantStreak}>{participant.best_streak}</Text>\n                </View>\n              </View>\n            ))}\n          </View>\n        )}\n\n        {/* Comments Section */}\n        <View style={styles.commentsSection}>\n          <TouchableOpacity\n            style={styles.commentsButton}\n            onPress={() => setShowCommentsModal(true)}\n            disabled={!challengePostId}\n          >\n            <Ionicons name=\"chatbubbles-outline\" size={24} color={colors.primary} />\n            <Text style={styles.commentsButtonText}>{t('challenges:viewComments')}</Text>\n            <Ionicons name=\"chevron-forward\" size={20} color={colors.textSecondary} />\n          </TouchableOpacity>\n          <Text style={styles.commentsHint}>{t('challenges:commentsHint')}</Text>\n        </View>\n      </ScrollView>\n\n      {/* Floating Action Button (if joined) */}\n      {isJoined && (\n        <TouchableOpacity\n          style={styles.fab}\n          onPress={() => setShowEntryModal(true)}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"add\" size={28} color={colors.white} />\n        </TouchableOpacity>\n      )}\n\n      {/* Comments Modal */}\n      {challengePostId && challenge && (\n        <CommentsModal\n          visible={showCommentsModal}\n          postId={challengePostId}\n          postTitle={challenge.title || '××ª×’×¨'}\n          postUser={{\n            id: challenge.creator_id || '',\n            name: challenge.creator_name || '××©×ª××©',\n            avatar: 'https://picsum.photos/seed/user/100/100',\n          }}\n          onClose={() => setShowCommentsModal(false)}\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  errorText: {\n    fontSize: FontSizes.large,\n    color: colors.error,\n    marginTop: 16,\n    marginBottom: 24,\n    textAlign: 'center' as const,\n  },\n  backButton: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    backgroundColor: colors.primary,\n    borderRadius: 8,\n  },\n  backButtonText: {\n    fontSize: FontSizes.medium,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  backIcon: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  challengeHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 12,\n  },\n  challengeTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    flex: 1,\n    marginRight: 8,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  challengeDescription: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    lineHeight: 22,\n    marginBottom: 16,\n  },\n  challengeMeta: {\n    gap: 8,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  metaText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  joinButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n  },\n  joinButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  participationCard: {\n    backgroundColor: colors.successLight,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.success,\n  },\n  participationHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 12,\n  },\n  participationText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.success,\n  },\n  viewStatsButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    backgroundColor: colors.white,\n    borderRadius: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: colors.primary,\n  },\n  viewStatsText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.primary,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n  },\n  formGroup: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 8,\n  },\n  input: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top' as const,\n  },\n  addEntryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    backgroundColor: colors.success,\n    borderRadius: 8,\n    padding: 14,\n    marginTop: 8,\n  },\n  addEntryButtonDisabled: {\n    opacity: 0.6,\n  },\n  addEntryButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  activityCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  activitySubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    fontStyle: 'italic' as const,\n  },\n  activityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  activityDate: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  activityNote: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    flex: 1,\n  },\n  noActivityText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n    paddingVertical: 20,\n  },\n  participantsCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  participantItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  participantRank: {\n    width: 40,\n    alignItems: 'center',\n  },\n  rankNumber: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.primary,\n  },\n  participantName: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n  },\n  participantStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  participantStreak: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.error,\n  },\n  fab: {\n    position: 'absolute' as const,\n    bottom: 24,\n    right: 24,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: colors.success,\n    justifyContent: 'center' as const,\n    alignItems: 'center' as const,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 8,\n  },\n  commentsSection: {\n    marginTop: 24,\n    paddingTop: 24,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  commentsButton: {\n    flexDirection: 'row' as const,\n    alignItems: 'center' as const,\n    justifyContent: 'space-between' as const,\n    backgroundColor: colors.white,\n    padding: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    marginBottom: 8,\n  },\n  commentsButtonText: {\n    flex: 1,\n    fontSize: FontSizes.medium,\n    fontWeight: '600' as const,\n    color: colors.textPrimary,\n    marginLeft: 12,\n  },\n  commentsHint: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n    marginBottom: 24,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end' as const,\n  },\n  modalContent: {\n    backgroundColor: colors.white,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChallengeStatisticsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[293,313],"text":""},"desc":"Remove unused variable \"TouchableOpacity\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LineChart' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"LineChart"},"fix":{"range":[510,520],"text":""},"desc":"Remove unused variable \"LineChart\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6992,6995],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6992,6995],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7140,7143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7140,7143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7320,7323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7320,7323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":408,"column":93,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[14971,15013],"text":" ×¡×”&quot;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[14971,15013],"text":" ×¡×”&ldquo;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[14971,15013],"text":" ×¡×”&#34;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[14971,15013],"text":" ×¡×”&rdquo;×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Challenge Statistics Screen\n// Shows user's personal statistics across all community challenges with interactive charts\nimport React, { useCallback, useState, useMemo, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  ScrollView,\n  ActivityIndicator,\n  TouchableOpacity,\n  Dimensions,\n  Animated,\n} from 'react-native';\nimport { NavigationProp, ParamListBase, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { LineChart, BarChart, ProgressChart, PieChart } from 'react-native-chart-kit';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { ChallengeStatistics } from '../globals/types';\n\nconst screenWidth = Dimensions.get('window').width;\n\n// Animated Card Component\nconst AnimatedCard: React.FC<{ children: React.ReactNode; delay?: number }> = ({ children, delay = 0 }) => {\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const slideAnim = useRef(new Animated.Value(30)).current;\n\n  useEffect(() => {\n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 1,\n        duration: 500,\n        delay,\n        useNativeDriver: true,\n      }),\n      Animated.timing(slideAnim, {\n        toValue: 0,\n        duration: 500,\n        delay,\n        useNativeDriver: true,\n      }),\n    ]).start();\n  }, []);\n\n  return (\n    <Animated.View\n      style={{\n        opacity: fadeAnim,\n        transform: [{ translateY: slideAnim }],\n      }}\n    >\n      {children}\n    </Animated.View>\n  );\n};\n\ninterface ChallengeStatisticsScreenProps {\n  navigation: NavigationProp<ParamListBase>;\n}\n\nexport default function ChallengeStatisticsScreen({ navigation }: ChallengeStatisticsScreenProps) {\n  const { selectedUser: user } = useUser();\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n\n  const [loading, setLoading] = useState(true);\n  const [statistics, setStatistics] = useState<ChallengeStatistics | null>(null);\n\n  useFocusEffect(\n    useCallback(() => {\n      loadStatistics();\n    }, [])\n  );\n\n  const loadStatistics = async () => {\n    if (!user?.id) {\n      showToast(t('challenges:messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await db.getChallengeStatistics(user.id);\n\n      if (response.success && response.data) {\n        setStatistics(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading statistics:', error);\n      showToast(t('challenges:messages.errorLoading'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const overall = statistics?.overall;\n  const challenges = statistics?.challenges || [];\n\n  // Chart configuration\n  const chartConfig = {\n    backgroundColor: colors.white,\n    backgroundGradientFrom: colors.white,\n    backgroundGradientTo: colors.white,\n    decimalPlaces: 0,\n    color: (opacity = 1) => `rgba(74, 144, 226, ${opacity})`,\n    labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\n    style: {\n      borderRadius: 16,\n    },\n    propsForDots: {\n      r: '6',\n      strokeWidth: '2',\n      stroke: colors.primary,\n    },\n  };\n\n  // Prepare data for charts\n  const streakData = useMemo(() => {\n    const sorted = [...challenges].sort((a, b) => b.best_streak - a.best_streak).slice(0, 5);\n    return {\n      labels: sorted.map((c) => c.title.substring(0, 10) + '...'),\n      datasets: [\n        {\n          data: sorted.map((c) => c.best_streak || 0),\n        },\n      ],\n    };\n  }, [challenges]);\n\n  const entriesData = useMemo(() => {\n    const sorted = [...challenges].sort((a, b) => b.total_entries - a.total_entries).slice(0, 5);\n    return {\n      labels: sorted.map((c) => c.title.substring(0, 10) + '...'),\n      datasets: [\n        {\n          data: sorted.map((c) => c.total_entries || 0),\n        },\n      ],\n    };\n  }, [challenges]);\n\n  const difficultyDistribution = useMemo(() => {\n    const distribution = challenges.reduce(\n      (acc, c) => {\n        acc[c.difficulty || 'easy'] = (acc[c.difficulty || 'easy'] || 0) + 1;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    return [\n      {\n        name: '×§×œ',\n        population: distribution.easy || 0,\n        color: colors.success,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '×‘×™× ×•× ×™',\n        population: distribution.medium || 0,\n        color: colors.warning,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '×§×©×”',\n        population: distribution.hard || 0,\n        color: colors.error,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n      {\n        name: '××•××—×”',\n        population: distribution.expert || 0,\n        color: colors.primary,\n        legendFontColor: colors.textPrimary,\n        legendFontSize: 12,\n      },\n    ].filter((item) => item.population > 0);\n  }, [challenges]);\n\n  const progressData = useMemo(() => {\n    const avgProgress = challenges.length > 0\n      ? challenges.reduce((sum, c) => {\n          const progress = c.goal_value ? Math.min(1, c.total_entries / c.goal_value) : 0.5;\n          return sum + progress;\n        }, 0) / challenges.length\n      : 0;\n\n    return {\n      labels: ['×××•×¦×¢ ×”×©×œ××ª ×™×¢×“×™×'],\n      data: [avgProgress],\n    };\n  }, [challenges]);\n\n  // Calculate insights\n  const insights = useMemo(() => {\n    if (challenges.length === 0) return null;\n\n    const totalStreaks = challenges.reduce((sum, c) => sum + (c.current_streak || 0), 0);\n    const avgStreak = (totalStreaks / challenges.length).toFixed(1);\n    \n    const mostActiveChallenge = challenges.reduce((max, c) => \n      (c.total_entries > max.total_entries ? c : max), challenges[0]);\n    \n    const longestStreak = challenges.reduce((max, c) => \n      (c.best_streak > max.best_streak ? c : max), challenges[0]);\n\n    const completionRate = challenges.filter(c => \n      c.goal_value && c.total_entries >= c.goal_value\n    ).length;\n\n    return {\n      avgStreak,\n      mostActiveChallenge: mostActiveChallenge?.title || '',\n      longestStreak: longestStreak?.best_streak || 0,\n      completionRate,\n    };\n  }, [challenges]);\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => navigation.goBack()}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('challenges:statistics')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={[]}\n        onSearch={() => {}}\n        hideSortButton={true}\n      />\n\n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:statistics')}</Text>\n      </View>\n\n      {loading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.primary} />\n        </View>\n      ) : (\n        <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n          {challenges.length === 0 ? (\n            <View style={styles.emptyState}>\n              <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n              <Text style={styles.emptyText}>{t('challenges:messages.noChallenges')}</Text>\n            </View>\n          ) : (\n            <>\n              {/* Overall Statistics */}\n              <AnimatedCard delay={0}>\n                <View style={styles.overallCard}>\n                  <Text style={styles.cardTitle}>{t('challenges:stats.overallSuccess')}</Text>\n                  <View style={styles.statsGrid}>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"trophy-outline\" size={32} color={colors.warning} />\n                      <Text style={styles.statValue}>{overall?.active_challenges || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.activeChallenges')}</Text>\n                    </View>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"flame-outline\" size={32} color={colors.error} />\n                      <Text style={styles.statValue}>{overall?.best_streak_overall || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.bestStreak')}</Text>\n                    </View>\n                    <View style={styles.statBox}>\n                      <Ionicons name=\"checkmark-done-outline\" size={32} color={colors.success} />\n                      <Text style={styles.statValue}>{overall?.total_entries || 0}</Text>\n                      <Text style={styles.statLabel}>{t('challenges:stats.totalEntries')}</Text>\n                    </View>\n                  </View>\n                </View>\n              </AnimatedCard>\n\n              {/* Insights Card */}\n              {insights && (\n                <AnimatedCard delay={100}>\n                  <View style={styles.insightsCard}>\n                    <Text style={styles.cardTitle}>\n                      <Ionicons name=\"bulb\" size={20} color={colors.warning} /> ×ª×•×‘× ×•×ª\n                    </Text>\n                    <View style={styles.insightsGrid}>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"analytics\" size={24} color={colors.primary} />\n                        <Text style={styles.insightLabel}>×××•×¦×¢ ×¨×¦×£</Text>\n                        <Text style={styles.insightValue}>{insights.avgStreak} ×™××™×</Text>\n                      </View>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"trophy\" size={24} color={colors.warning} />\n                        <Text style={styles.insightLabel}>×¨×¦×£ ×”×›×™ ××¨×•×š</Text>\n                        <Text style={styles.insightValue}>{insights.longestStreak} ×™××™×</Text>\n                      </View>\n                      <View style={styles.insightItem}>\n                        <Ionicons name=\"checkmark-circle\" size={24} color={colors.success} />\n                        <Text style={styles.insightLabel}>××ª×’×¨×™× ×©×”×•×©×œ××•</Text>\n                        <Text style={styles.insightValue}>{insights.completionRate}</Text>\n                      </View>\n                    </View>\n                    {insights.mostActiveChallenge && (\n                      <View style={styles.highlightBox}>\n                        <Ionicons name=\"star\" size={20} color={colors.warning} />\n                        <Text style={styles.highlightText}>\n                          ×”××ª×’×¨ ×”×›×™ ×¤×¢×™×œ ×©×œ×š: <Text style={styles.highlightBold}>{insights.mostActiveChallenge}</Text>\n                        </Text>\n                      </View>\n                    )}\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Progress Chart */}\n              {progressData.data[0] > 0 && (\n                <AnimatedCard delay={200}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"trending-up\" size={20} color={colors.primary} /> ×”×©×œ××ª ×™×¢×“×™×\n                    </Text>\n                    <ProgressChart\n                      data={progressData}\n                      width={screenWidth - 64}\n                      height={180}\n                      strokeWidth={16}\n                      radius={50}\n                      chartConfig={chartConfig}\n                      hideLegend={false}\n                      style={styles.chart}\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Difficulty Distribution Pie Chart */}\n              {difficultyDistribution.length > 0 && (\n                <AnimatedCard delay={300}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"pie-chart\" size={20} color={colors.primary} /> ×”×ª×¤×œ×’×•×ª ×œ×¤×™ ×¨××ª ×§×•×©×™\n                    </Text>\n                    <PieChart\n                      data={difficultyDistribution}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={chartConfig}\n                      accessor=\"population\"\n                      backgroundColor=\"transparent\"\n                      paddingLeft=\"15\"\n                      center={[10, 0]}\n                      absolute\n                      style={styles.chart}\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Best Streaks Bar Chart */}\n              {streakData.datasets[0].data.length > 0 && streakData.datasets[0].data.some(d => d > 0) && (\n                <AnimatedCard delay={400}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"flame\" size={20} color={colors.error} /> ×”×¨×¦×¤×™× ×”×˜×•×‘×™× ×‘×™×•×ª×¨\n                    </Text>\n                    <BarChart\n                      data={streakData}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={{\n                        ...chartConfig,\n                        color: (opacity = 1) => `rgba(239, 68, 68, ${opacity})`,\n                      }}\n                      yAxisLabel=\"\"\n                      yAxisSuffix=\"\"\n                      style={styles.chart}\n                      showValuesOnTopOfBars\n                      fromZero\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Total Entries Bar Chart */}\n              {entriesData.datasets[0].data.length > 0 && entriesData.datasets[0].data.some(d => d > 0) && (\n                <AnimatedCard delay={500}>\n                  <View style={styles.chartCard}>\n                    <Text style={styles.chartTitle}>\n                      <Ionicons name=\"checkmark-done\" size={20} color={colors.success} /> ×¡×”\"×› ×¨×©×•××•×ª ×œ×¤×™ ××ª×’×¨\n                    </Text>\n                    <BarChart\n                      data={entriesData}\n                      width={screenWidth - 64}\n                      height={220}\n                      chartConfig={{\n                        ...chartConfig,\n                        color: (opacity = 1) => `rgba(34, 197, 94, ${opacity})`,\n                      }}\n                      yAxisLabel=\"\"\n                      yAxisSuffix=\"\"\n                      style={styles.chart}\n                      showValuesOnTopOfBars\n                      fromZero\n                    />\n                  </View>\n                </AnimatedCard>\n              )}\n\n              {/* Individual Challenges List */}\n              <Text style={styles.sectionTitle}>\n                <Ionicons name=\"list\" size={24} color={colors.primary} /> {t('challenges:filters.joined')}\n              </Text>\n              {challenges.map((challenge) => (\n                <View key={challenge.challenge_id} style={styles.challengeCard}>\n                  <View style={styles.challengeHeader}>\n                    <Text style={styles.challengeTitle}>{challenge.title}</Text>\n                    <View\n                      style={[\n                        styles.difficultyBadge,\n                        {\n                          backgroundColor:\n                            challenge.difficulty === 'easy'\n                              ? colors.success\n                              : challenge.difficulty === 'medium'\n                              ? colors.warning\n                              : challenge.difficulty === 'hard'\n                              ? colors.error\n                              : colors.primary,\n                        },\n                      ]}\n                    >\n                      <Text style={styles.difficultyText}>\n                        {t(`challenges:difficulty.${challenge.difficulty || 'easy'}`)}\n                      </Text>\n                    </View>\n                  </View>\n\n                  <View style={styles.progressSection}>\n                    <View style={styles.progressBar}>\n                      <View\n                        style={[\n                          styles.progressFill,\n                          {\n                            width: `${Math.min(\n                              100,\n                              challenge.goal_value\n                                ? (challenge.total_entries / challenge.goal_value) * 100\n                                : 50\n                            )}%`,\n                          },\n                        ]}\n                      />\n                    </View>\n                  </View>\n\n                  <View style={styles.challengeStats}>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"flame\" size={16} color={colors.error} />\n                      <Text style={styles.miniStatValue}>{challenge.current_streak}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.currentStreak')}</Text>\n                    </View>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"trophy\" size={16} color={colors.warning} />\n                      <Text style={styles.miniStatValue}>{challenge.best_streak}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.bestStreak')}</Text>\n                    </View>\n                    <View style={styles.miniStat}>\n                      <Ionicons name=\"checkmark-done\" size={16} color={colors.success} />\n                      <Text style={styles.miniStatValue}>{challenge.total_entries}</Text>\n                      <Text style={styles.miniStatLabel}>{t('challenges:stats.entries')}</Text>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </>\n          )}\n        </ScrollView>\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  overallCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: 24,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  insightsCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: 24,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  insightsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 16,\n  },\n  insightItem: {\n    alignItems: 'center',\n    gap: 6,\n    flex: 1,\n  },\n  insightLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  insightValue: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  highlightBox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.backgroundSecondary,\n    padding: 12,\n    borderRadius: 8,\n    borderLeftWidth: 3,\n    borderLeftColor: colors.warning,\n  },\n  highlightText: {\n    fontSize: FontSizes.small,\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  highlightBold: {\n    fontWeight: '700',\n    color: colors.primary,\n  },\n  cardTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    textAlign: 'center' as const,\n  },\n  statsGrid: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  statBox: {\n    alignItems: 'center',\n    gap: 8,\n  },\n  statValue: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  statLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center' as const,\n  },\n  chartCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 20,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  chartTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    textAlign: 'center',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  chart: {\n    marginVertical: 8,\n    borderRadius: 16,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    marginBottom: 16,\n    marginTop: 8,\n  },\n  emptyState: {\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyText: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    marginTop: 16,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  challengeHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  challengeTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  progressSection: {\n    marginBottom: 12,\n  },\n  progressBar: {\n    height: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 4,\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: colors.success,\n    borderRadius: 4,\n  },\n  challengeStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  miniStat: {\n    alignItems: 'center',\n    gap: 4,\n  },\n  miniStatValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  miniStatLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/ChatDetailScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'generateFakeResponse' is assigned a value but never used.","line":183,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":183,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":312,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11523,11526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11523,11526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'contentWidth' is defined but never used.","line":529,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":529,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'contentHeight' is defined but never used.","line":529,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":529,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'event' is defined but never used.","line":535,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":535,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":577,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":577,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20606,20609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20606,20609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Conversation detail screen showing messages, input box, and media attachments.\n// - Reached from: 'ChatListScreen' and notifications deep links; route name 'ChatDetailScreen'.\n// - Expects route params: `{ conversationId: string, userName: string, userAvatar: string, otherUserId: string }`.\n// - Provides: Loads messages, subscribes to updates, marks as read, sends text/files, optional fake auto-replies for demo.\n// - Reads from context: `useUser()` -> selectedUser.\n// - External deps/services: `chatService` (get/subscribe/send/mark), `fileService` (pick/validate), i18n.\n// screens/ChatDetailScreen.tsx\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  KeyboardAvoidingView,\n  Platform,\n  Image,\n  Alert,\n  SafeAreaView,\n  StatusBar,\n  ActivityIndicator,\n  Dimensions,\n  Modal,\n} from 'react-native';\nimport { useNavigation, useRoute, RouteProp, useFocusEffect, NavigationProp } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport ChatMessageBubble from '../components/ChatMessageBubble';\nimport { RootStackParamList } from '../globals/types';\nimport { useUser } from '../stores/userStore';\nimport { getMessages, sendMessage, markMessagesAsRead, Message, subscribeToMessages } from '../utils/chatService';\nimport { pickImage, pickVideo, takePhoto, pickDocument, validateFile, FileData } from '../utils/fileService';\nimport { uploadFileWithProgress, buildChatFilePath } from '../utils/storageService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/config.constants';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\n\ntype ChatDetailRouteParams = {\n  conversationId: string;\n  userName: string;\n  userAvatar: string;\n  otherUserId: string;\n};\n\nexport default function ChatDetailScreen() {\n  const navigation = useNavigation<NavigationProp<RootStackParamList>>();\n  const route = useRoute<RouteProp<Record<string, ChatDetailRouteParams>, string>>();\n  const routeParams = route.params || {};\n  const { conversationId: initialConversationId, userName: initialUserName, userAvatar: initialUserAvatar, otherUserId } = routeParams;\n  const { selectedUser } = useUser();\n  const { t } = useTranslation(['chat']);\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const [inputHeight, setInputHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxMessagesHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0 && inputHeight > 0\n    ? screenHeight - tabBarHeight - inputHeight - headerHeight\n    : undefined;\n\n  const [conversationId, setConversationId] = useState(initialConversationId);\n  const [inputText, setInputText] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSending, setIsSending] = useState(false);\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\n  const [userName, setUserName] = useState(initialUserName);\n  const [userAvatar, setUserAvatar] = useState(initialUserAvatar);\n  const [isLoadingProfile, setIsLoadingProfile] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadingFile, setUploadingFile] = useState<FileData | null>(null);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const flatListRef = useRef<FlatList>(null);\n\n  // Load user profile for the other user\n  const loadUserProfile = useCallback(async () => {\n    if (!USE_BACKEND || !otherUserId || isLoadingProfile) return;\n\n    setIsLoadingProfile(true);\n    try {\n      const response = await apiService.getUserById(otherUserId);\n      if (response.success && response.data) {\n        const userData = response.data;\n        // Only update if we got valid data and the initial name was \"unknown user\"\n        const newName = userData.name || initialUserName || t('chat:unknownUser');\n        const newAvatar = userData.avatar_url || userData.avatar || initialUserAvatar || '';\n\n        // Always update, but prioritize loaded data\n        setUserName(newName);\n        setUserAvatar(newAvatar);\n      } else {\n        // If user not found, keep initial values but log warning\n        console.warn('User not found:', otherUserId);\n        if (initialUserName && initialUserName !== t('chat:unknownUser')) {\n          // Keep the initial name if it's not \"unknown user\"\n          setUserName(initialUserName);\n          setUserAvatar(initialUserAvatar);\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to load user profile:', error);\n      // Keep the initial values if loading fails, but only if they're not \"unknown user\"\n      if (initialUserName && initialUserName !== t('chat:unknownUser')) {\n        setUserName(initialUserName);\n        setUserAvatar(initialUserAvatar);\n      }\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  }, [otherUserId, initialUserName, initialUserAvatar, t]);\n\n  const loadMessages = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      if (selectedUser) {\n        const conversationMessages = await getMessages(conversationId, selectedUser.id);\n        setMessages(conversationMessages);\n\n        await markMessagesAsRead(conversationId, selectedUser.id);\n      }\n    } catch (error) {\n      console.error('âŒ Load messages error:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×”×”×•×“×¢×•×ª');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [conversationId, selectedUser]);\n\n  // Update state when screen comes into focus (e.g., when returning from profile)\n  useFocusEffect(\n    React.useCallback(() => {\n      const params = route.params;\n      if (params) {\n        // Update userName if provided and different\n        if (params.userName) {\n          setUserName(prev => params.userName !== prev ? params.userName : prev);\n        }\n        // Update userAvatar if provided and different\n        if (params.userAvatar) {\n          setUserAvatar(prev => params.userAvatar !== prev ? params.userAvatar : prev);\n        }\n        // Update conversationId if provided and different\n        if (params.conversationId) {\n          setConversationId(prev => params.conversationId !== prev ? params.conversationId : prev);\n        }\n      }\n    }, [route.params])\n  );\n\n  // Load user profile on mount - prioritize loading if initial name is \"unknown user\"\n  useEffect(() => {\n    // If initial name is \"unknown user\", load immediately\n    // Load user profile on mount\n    loadUserProfile();\n  }, [loadUserProfile, initialUserName, t]);\n\n  // Real-time subscription\n  useEffect(() => {\n    loadMessages();\n\n    let unsubscribe: (() => void) | undefined;\n\n    // Subscribe to real-time updates\n    if (selectedUser) {\n      unsubscribe = subscribeToMessages(conversationId, selectedUser.id, (newMessages) => {\n        setMessages(newMessages);\n\n        // Mark messages as read when they arrive\n        markMessagesAsRead(conversationId, selectedUser.id).catch(console.error);\n      });\n    }\n\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, [conversationId, selectedUser, loadMessages]);\n\n  const generateFakeResponse = async () => {\n    const responses = [\n      '×ª×•×“×” ×¢×œ ×”××™×“×¢! ××ª×™ ××¤×©×¨ ×œ×‘×•× ×œ×§×—×ª?',\n      '×”×× ××¤×©×¨ ×œ×§×‘×œ ×ª××•× ×” ×©×œ ×”×¡×¤×”?',\n      '××” ×”××™×“×•×ª ×©×œ ×”×¡×¤×”?',\n      '×”×× ×™×© ××¤×©×¨×•×ª ×œ××©×œ×•×—?',\n    ];\n\n    const responseText = responses[Math.floor(Math.random() * responses.length)];\n\n    try {\n      await sendMessage({\n        conversationId,\n        senderId: otherUserId,\n        text: responseText,\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: 'text',\n        status: 'sent',\n      });\n    } catch (error) {\n      console.error('âŒ Send fake response error:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (inputText.trim() === '' || !selectedUser || isSending) return;\n\n    const messageText = inputText.trim();\n    const tempMessageId = `temp_${Date.now()}`;\n\n    // Add message to local state immediately with \"sending\" status\n    const tempMessage: Message = {\n      id: tempMessageId,\n      conversationId,\n      senderId: selectedUser.id,\n      text: messageText,\n      timestamp: new Date().toISOString(),\n      read: false,\n      type: 'text',\n      status: 'sending',\n    };\n\n    setMessages(prev => [...prev, tempMessage]);\n    setInputText('');\n    setIsSending(true);\n\n    try {\n      // Send the message with fallback participants in case conversation not found\n      // Note: sendMessage may update conversationId if backend creates new conversation\n      const currentConversationId = conversationId;\n      const messageId = await sendMessage({\n        conversationId: currentConversationId,\n        senderId: selectedUser.id,\n        text: messageText,\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: 'text',\n        status: 'sent',\n      }, [selectedUser.id, otherUserId]); // Provide fallback participants\n\n      // Check if conversation was updated (backend may have created new UUID)\n      // We'll reload messages to get the updated conversation\n      await loadMessages();\n\n      // Extract the actual message ID (handle both string and object return types)\n      const actualMessageId = typeof messageId === 'string' ? messageId : messageId.messageId;\n\n      // Update the temp message with the real message ID and status\n      setMessages(prev => prev.map(msg =>\n        msg.id === tempMessageId\n          ? { ...msg, id: actualMessageId, status: 'sent' as const }\n          : msg\n      ));\n\n    } catch (error) {\n      console.error('âŒ Send message error:', error);\n\n      // Remove the temp message and restore the text\n      setMessages(prev => prev.filter(msg => msg.id !== tempMessageId));\n      setInputText(messageText);\n\n      Alert.alert(\n        '×©×’×™××”',\n        '×©×’×™××” ×‘×©×œ×™×—×ª ×”×”×•×“×¢×”. ×× × × ×¡×” ×©×•×‘.',\n        [{ text: '××™×©×•×¨', style: 'default' }]\n      );\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handleSendFile = async (fileData: FileData) => {\n    if (!selectedUser) return;\n\n    try {\n      setIsSending(true);\n      setUploadProgress(0);\n      setUploadingFile(fileData);\n      setShowUploadModal(true);\n\n      // Validate file\n      const validation = validateFile(fileData);\n      if (!validation.isValid) {\n        setShowUploadModal(false);\n        setUploadingFile(null);\n        setIsSending(false);\n        Alert.alert('×©×’×™××”', validation.error || '×”×§×•×‘×¥ ××™× ×• ×ª×§×™×Ÿ');\n        return;\n      }\n\n      // Generate temp messageId for file path\n      const tempMessageId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n      // Build file path in Firebase Storage\n      const fullPath = buildChatFilePath(conversationId, tempMessageId, fileData.name);\n\n      // Upload file to Firebase Storage with progress tracking\n      let uploadedUrl: string;\n      try {\n        const uploadResult = await uploadFileWithProgress(\n          fullPath,\n          fileData.uri,\n          fileData.mimeType,\n          (progress) => {\n            setUploadProgress(progress);\n          }\n        );\n        uploadedUrl = uploadResult.url;\n      } catch (uploadError: any) {\n        console.error('âŒ Upload file error:', uploadError);\n        const errorMessage = uploadError?.message || uploadError?.code || '×©×’×™××” ×œ× ×™×“×•×¢×”';\n        console.error('âŒ Upload error details:', {\n          error: uploadError,\n          fullPath,\n          fileName: fileData.name,\n          fileSize: fileData.size,\n          mimeType: fileData.mimeType,\n        });\n        setShowUploadModal(false);\n        setUploadingFile(null);\n        setIsSending(false);\n        Alert.alert(\n          '×©×’×™××” ×‘×”×¢×œ××ª ×”×§×•×‘×¥',\n          `×œ× × ×™×ª×Ÿ ×œ×”×¢×œ×•×ª ××ª ×”×§×•×‘×¥. ${errorMessage.includes('CORS') ? '×‘×¢×™×™×ª CORS - ×‘×“×•×§ ××ª ×”×’×“×¨×•×ª Firebase Storage.' : errorMessage}`\n        );\n        return;\n      }\n\n      // Update fileData with Firebase Storage URL\n      const updatedFileData: FileData = {\n        ...fileData,\n        uri: uploadedUrl,\n      };\n\n      // Hide upload modal\n      setShowUploadModal(false);\n      setUploadingFile(null);\n      setUploadProgress(0);\n\n      // Send message with uploaded file URL\n      await sendMessage({\n        conversationId,\n        senderId: selectedUser.id,\n        text: '',\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: fileData.type,\n        status: 'sent',\n        fileData: updatedFileData,\n      }, [selectedUser.id, otherUserId]);\n\n      console.log('âœ… File message sent');\n\n      // Reload messages to show the new message\n      await loadMessages();\n\n    } catch (error) {\n      console.error('âŒ Send file error:', error);\n      setShowUploadModal(false);\n      setUploadingFile(null);\n      setUploadProgress(0);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×©×œ×™×—×ª ×”×§×•×‘×¥. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handlePickImage = async () => {\n    setShowMediaOptions(false);\n    const result = await pickImage();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handleTakePhoto = async () => {\n    setShowMediaOptions(false);\n    const result = await takePhoto();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handlePickVideo = async () => {\n    setShowMediaOptions(false);\n    const result = await pickVideo();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const handlePickDocument = async () => {\n    setShowMediaOptions(false);\n    const result = await pickDocument();\n\n    if (result.success && result.fileData) {\n      await handleSendFile(result.fileData);\n    } else if (result.error) {\n      Alert.alert('×©×’×™××”', result.error);\n    }\n  };\n\n  const renderMessage = ({ item }: { item: Message }) => (\n    <ChatMessageBubble\n      message={item}\n      isMyMessage={item.senderId === selectedUser?.id}\n      userAvatar={userAvatar}\n    />\n  );\n\n  const renderLoadingIndicator = () => (\n    <View style={styles.loadingContainer}>\n      <ActivityIndicator size=\"large\" color={colors.secondary} />\n      <Text style={styles.loadingText}>×˜×•×¢×Ÿ ×”×•×“×¢×•×ª...</Text>\n    </View>\n  );\n\n  const InputChildren = () => (\n    <>\n      <TouchableOpacity onPress={() => setShowMediaOptions(!showMediaOptions)}>\n        <Icon name=\"add-circle-outline\" size={24} color={colors.primary} style={styles.icon} />\n      </TouchableOpacity>\n      <TextInput\n        style={styles.textInput}\n        value={inputText}\n        onChangeText={setInputText}\n        placeholder={t('chat:placeholder')}\n        placeholderTextColor={colors.textSecondary}\n        multiline\n        textAlignVertical=\"center\"\n        editable={!isSending}\n      />\n      <TouchableOpacity\n        onPress={handleSendMessage}\n        style={[styles.sendButton, isSending && styles.sendButtonDisabled]}\n        disabled={isSending}\n      >\n        {isSending ? (\n          <ActivityIndicator size=\"small\" color={colors.background} />\n        ) : (\n          <Text style={styles.sendButtonText}>×©×œ×—</Text>\n        )}\n      </TouchableOpacity>\n    </>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View\n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.headerButton}>\n          <Icon name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => {\n            navigation.navigate('UserProfileScreen', {\n              userId: otherUserId,\n              userName: userName,\n              userAvatar: userAvatar,\n            });\n          }}\n          style={styles.headerUserInfo}\n          activeOpacity={0.7}\n        >\n          <Image source={{ uri: userAvatar || 'https://i.pravatar.cc/150?img=1' }} style={styles.headerAvatar} />\n          <Text style={styles.headerTitle}>{userName}</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => {\n            navigation.navigate('UserProfileScreen', {\n              userId: otherUserId,\n              userName: userName,\n              userAvatar: userAvatar,\n            });\n          }}\n          style={styles.headerButton}\n        >\n          <Icon name=\"person-circle-outline\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n      </View>\n\n      {/* Messages container - limited height on web to leave space for input */}\n      <View style={[\n        styles.messagesWrapper,\n        Platform.OS === 'web' && maxMessagesHeight ? {\n          maxHeight: maxMessagesHeight,\n        } : undefined\n      ]}>\n        {isLoading ? (\n          renderLoadingIndicator()\n        ) : (\n          <FlatList\n            ref={flatListRef}\n            data={messages}\n            keyExtractor={(item) => item.id}\n            renderItem={renderMessage}\n            contentContainerStyle={[\n              styles.messagesContainer,\n              (() => {\n                // For web with fixed position input, we need extra padding since fixed elements don't take space in flow\n                // Input height is approximately 70px, but we need more padding to ensure scrolling works\n                const inputHeight = 70;\n                const paddingBottom = Platform.OS === 'web'\n                  ? tabBarHeight + inputHeight + 40  // Extra 40px for web to ensure scrolling works\n                  : tabBarHeight + (showMediaOptions ? 150 : 70);\n                return { paddingBottom };\n              })()\n            ]}\n            onContentSizeChange={(contentWidth, contentHeight) => {\n              // Use setTimeout to ensure scroll happens after layout\n              setTimeout(() => {\n                flatListRef.current?.scrollToEnd({ animated: true });\n              }, 100);\n            }}\n            onLayout={(event) => {\n              flatListRef.current?.scrollToEnd({ animated: true });\n            }}\n            showsVerticalScrollIndicator={false}\n            style={styles.messagesList}\n            scrollEnabled={true}\n            nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n            scrollEventThrottle={16}\n          />\n        )}\n      </View>\n\n      {/* Media Options - Absolutely positioned above input */}\n      {showMediaOptions && (\n        <View style={[\n          styles.mediaOptionsContainer,\n          { bottom: tabBarHeight + 70, zIndex: 1000 }\n        ]}>\n          <TouchableOpacity style={styles.mediaOption} onPress={handleTakePhoto}>\n            <Icon name=\"camera\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×¦×œ× ×ª××•× ×”</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickImage}>\n            <Icon name=\"image\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×ª××•× ×”</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickVideo}>\n            <Icon name=\"videocam\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×¡×¨×˜×•×Ÿ</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.mediaOption} onPress={handlePickDocument}>\n            <Icon name=\"document\" size={24} color={colors.primary} />\n            <Text style={styles.mediaOptionText}>×‘×—×¨ ×§×•×‘×¥</Text>\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* Input Container - Fixed positioned at bottom for web */}\n      {Platform.OS === 'web' ? (\n        <View\n          style={(() => {\n            const inputStyle = {\n              position: 'fixed' as any,\n              left: 0,\n              right: 0,\n              bottom: tabBarHeight,\n              zIndex: 999,\n              backgroundColor: 'transparent'\n            };\n            return inputStyle;\n          })()}\n        >\n          <View\n            style={styles.inputContainer}\n            onLayout={(event) => {\n              if (Platform.OS === 'web') {\n                const { height } = event.nativeEvent.layout;\n                setInputHeight(height);\n              }\n            }}\n          >\n            <InputChildren />\n          </View>\n        </View>\n      ) : (\n        <KeyboardAvoidingView\n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n          keyboardVerticalOffset={Platform.OS === 'ios' ? 0 : 0}\n          style={{\n            position: 'absolute',\n            left: 0,\n            right: 0,\n            bottom: tabBarHeight,\n            zIndex: 999,\n            backgroundColor: 'transparent'\n          }}\n          pointerEvents=\"box-none\"\n        >\n          <View style={styles.inputContainer}>\n            <InputChildren />\n          </View>\n        </KeyboardAvoidingView>\n      )}\n\n      {/* Upload Progress Modal */}\n      <Modal\n        visible={showUploadModal}\n        transparent\n        animationType=\"fade\"\n      >\n        <View style={styles.uploadModalOverlay}>\n          <View style={styles.uploadModalContent}>\n            <ActivityIndicator size=\"large\" color={colors.primary} style={styles.uploadSpinner} />\n            <Text style={styles.uploadText}>\n              {uploadingFile ? `××¢×œ×” ${uploadingFile.name}...` : '××¢×œ×” ×§×•×‘×¥...'}\n            </Text>\n            <View style={styles.progressBarContainer}>\n              <View style={[styles.progressBar, { width: `${uploadProgress}%` }]} />\n            </View>\n            <Text style={styles.progressText}>{Math.round(uploadProgress)}%</Text>\n          </View>\n        </View>\n      </Modal>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative', // Ensure absolute children are positioned relative to this\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center',\n  },\n  headerAvatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 10,\n    borderWidth: 2,\n    borderColor: colors.primary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  backButton: {\n    marginRight: 15,\n  },\n  // Content container for messages\n  contentContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Messages wrapper - takes all available space\n  messagesWrapper: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Messages list\n  messagesList: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  // Loading indicator\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n  // Chat messages container\n  messagesContainer: {\n    backgroundColor: colors.background,\n    paddingHorizontal: 10,\n    paddingTop: 10,\n  },\n  // Input container wrapper - ABSOLUTE POSITION\n  inputContainerWrapper: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    backgroundColor: 'transparent',\n    zIndex: 99, // Ensure it sits on top of messages\n    elevation: 5, // For Android shadow\n  },\n  // Input container at bottom\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    paddingBottom: Platform.OS === 'android' ? 15 : 10,\n    backgroundColor: colors.background,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n  },\n  icon: {\n    paddingHorizontal: 5,\n  },\n  textInput: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: colors.border,\n    borderRadius: 20,\n    paddingHorizontal: 15,\n    paddingVertical: Platform.OS === 'ios' ? 10 : 8,\n    marginHorizontal: 8,\n    fontSize: FontSizes.body,\n    maxHeight: 80,\n    textAlign: 'right',\n    color: colors.textPrimary,\n    backgroundColor: colors.background,\n  },\n  sendButton: {\n    backgroundColor: colors.secondary,\n    borderRadius: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 60,\n  },\n  sendButtonDisabled: {\n    backgroundColor: colors.textSecondary,\n  },\n  sendButtonText: {\n    color: colors.background,\n    fontWeight: 'bold',\n    fontSize: FontSizes.body,\n  },\n  androidBottomSpacer: {\n    height: 20,\n    backgroundColor: colors.background,\n  },\n  // Media options container - ABSOLUTE POSITION\n  mediaOptionsContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.background,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n    zIndex: 100, // Above input container\n    elevation: 6,\n  },\n  mediaOption: {\n    alignItems: 'center',\n    padding: 8,\n  },\n  mediaOptionText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginTop: 4,\n    textAlign: 'center',\n  },\n  // Upload progress modal\n  uploadModalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  uploadModalContent: {\n    backgroundColor: colors.background,\n    borderRadius: 16,\n    padding: 24,\n    alignItems: 'center',\n    minWidth: 250,\n    maxWidth: '80%',\n  },\n  uploadSpinner: {\n    marginBottom: 16,\n  },\n  uploadText: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  progressBarContainer: {\n    width: '100%',\n    height: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 4,\n    overflow: 'hidden',\n    marginBottom: 8,\n  },\n  progressBar: {\n    height: '100%',\n    backgroundColor: colors.primary,\n    borderRadius: 4,\n  },\n  progressText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/CommunityStatsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LAYOUT_CONSTANTS' is defined but never used.","line":7,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"LAYOUT_CONSTANTS"},"fix":{"range":[413,431],"text":""},"desc":"Remove unused variable \"LAYOUT_CONSTANTS\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'height' is assigned a value but never used.","line":15,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1838,1841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1838,1841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5059,5062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5059,5062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5843,5846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5843,5846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6120,6123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6120,6123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// screens/CommunityStatsScreen.tsx\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, SafeAreaView, Dimensions, ActivityIndicator, Platform, RefreshControl, StatusBar } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useUser } from '../stores/userStore';\nimport { logger } from '../utils/loggerService';\nimport { db } from '../utils/databaseService';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { apiService } from '../utils/apiService';\n\nconst { width, height } = Dimensions.get('window');\n\n// Responsive breakpoints\nconst isSmallScreen = width < 375;\nconst isMediumScreen = width >= 375 && width < 768;\nconst isLargeScreen = width >= 768;\n\n// Calculate responsive sizes\nconst getResponsiveCardWidth = () => {\n    if (isLargeScreen) return (width - 64 - 24) / 3; // 3 cards per row on large screens\n    if (isMediumScreen) return (width - 48 - 16) / 2; // 2 cards per row on medium screens\n    return (width - 32 - 12) / 2; // 2 cards per row on small screens\n};\n\nconst getResponsivePadding = () => {\n    if (isLargeScreen) return 24;\n    if (isMediumScreen) return 20;\n    return 16;\n};\n\nconst getResponsiveFontSize = (base: number) => {\n    if (isSmallScreen) return base * 0.9;\n    if (isLargeScreen) return base * 1.1;\n    return base;\n};\n\ninterface StatItemProps {\n    icon: string;\n    value: string;\n    label: string;\n    color?: string;\n}\n\nconst StatItem: React.FC<StatItemProps> = ({ icon, value, label, color = colors.info }) => (\n    <View style={styles.statItem}>\n        <Ionicons name={icon as any} size={isSmallScreen ? 28 : 32} color={color} />\n        <Text style={styles.statValue}>{value}</Text>\n        <Text style={styles.statLabel} numberOfLines={2}>{label}</Text>\n    </View>\n);\n\ninterface CommunityStats {\n    // Community stats from landing page\n    siteVisits: number;\n    totalMoneyDonated: number;\n    totalUsers: number;\n    itemDonations: number;\n    completedRides: number;\n    recurringDonationsAmount: number;\n    uniqueDonors: number;\n    completedTasks: number;\n    \n    // Dashboard stats (tasks)\n    tasks_open: number;\n    tasks_in_progress: number;\n    tasks_done: number;\n    tasks_total: number;\n    \n    // Dashboard stats (users)\n    admins_count: number;\n    regular_users_count: number;\n    total_users: number;\n    \n    // Dashboard stats (volunteer hours)\n    total_volunteer_hours: number;\n    avg_hours_per_user: number;\n    current_month_hours: number;\n    \n    // Legacy stats\n    totalRides: number;\n    totalItems: number;\n    totalDonations: number;\n    activeCities: number;\n    monthlyGrowth: number;\n}\n\nexport default function CommunityStatsScreen() {\n    const { t } = useTranslation();\n    const { selectedUser } = useUser();\n    const tabBarHeight = useBottomTabBarHeight() || 0;\n    const [stats, setStats] = useState<CommunityStats>({\n        // Community stats from landing page\n        siteVisits: 0,\n        totalMoneyDonated: 0,\n        totalUsers: 0,\n        itemDonations: 0,\n        completedRides: 0,\n        recurringDonationsAmount: 0,\n        uniqueDonors: 0,\n        completedTasks: 0,\n        \n        // Dashboard stats (tasks)\n        tasks_open: 0,\n        tasks_in_progress: 0,\n        tasks_done: 0,\n        tasks_total: 0,\n        \n        // Dashboard stats (users)\n        admins_count: 0,\n        regular_users_count: 0,\n        total_users: 0,\n        \n        // Dashboard stats (volunteer hours)\n        total_volunteer_hours: 0,\n        avg_hours_per_user: 0,\n        current_month_hours: 0,\n        \n        // Legacy stats\n        totalRides: 0,\n        totalItems: 0,\n        totalDonations: 0,\n        activeCities: 0,\n        monthlyGrowth: 0,\n    });\n    const [loading, setLoading] = useState(true);\n    const [refreshing, setRefreshing] = useState(false);\n    const [headerHeight, setHeaderHeight] = useState(0);\n    const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n    const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n        ? screenHeight - tabBarHeight - headerHeight\n        : undefined;\n\n    useEffect(() => {\n        logger.debug('CommunityStatsScreen', 'Screen viewed', { userId: selectedUser?.id });\n        loadStats();\n    }, []);\n\n    const loadStats = async (forceRefresh = false) => {\n        try {\n            if (!forceRefresh) {\n                setLoading(true);\n            } else {\n                setRefreshing(true);\n            }\n\n            // Load community stats from landing page (EnhancedStatsService)\n            const communityStats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n            \n            // Extract values - handle both direct values and nested value objects\n            const getValue = (stat: any): number => {\n                if (typeof stat === 'number') return stat;\n                if (stat && typeof stat === 'object' && 'value' in stat) return stat.value || 0;\n                return 0;\n            };\n\n            // Load dashboard stats (tasks, users, volunteer hours)\n            const dashboardRes = await apiService.getDashboardStats();\n            const dashboardStats = dashboardRes.success && dashboardRes.data ? dashboardRes.data : null;\n\n            // Load legacy rides stats\n            const rides = await db.listRides(selectedUser?.id || '', { includePast: true }).catch(() => []);\n            const totalRides = rides.length;\n\n            // Calculate active cities from rides\n            const cities = new Set<string>();\n            rides.forEach((ride: any) => {\n                if (ride.from) cities.add(ride.from);\n                if (ride.to) cities.add(ride.to);\n            });\n\n            // Get unique drivers from rides as a proxy for users\n            const drivers = new Set<string>();\n            rides.forEach((ride: any) => {\n                if (ride.driverId) drivers.add(ride.driverId);\n            });\n\n            // Calculate monthly growth (mock for now - would need historical data)\n            const monthlyGrowth = Math.floor(Math.random() * 30) + 10;\n\n            // For now, use rides count as a proxy for items until we have a proper API\n            const estimatedItems = Math.floor(totalRides * 1.5);\n\n            setStats({\n                // Community stats from landing page\n                siteVisits: getValue(communityStats.siteVisits) || 0,\n                totalMoneyDonated: getValue(communityStats.totalMoneyDonated) || 0,\n                totalUsers: getValue(communityStats.totalUsers) || Math.max(drivers.size, 1),\n                itemDonations: getValue(communityStats.itemDonations) || estimatedItems,\n                completedRides: getValue(communityStats.completedRides) || totalRides,\n                recurringDonationsAmount: getValue(communityStats.recurringDonationsAmount) || 0,\n                uniqueDonors: getValue(communityStats.uniqueDonors) || 0,\n                completedTasks: getValue(communityStats.completed_tasks) || 0,\n                \n                // Dashboard stats (tasks)\n                tasks_open: dashboardStats?.metrics?.tasks_open ? Number(dashboardStats.metrics.tasks_open) : 0,\n                tasks_in_progress: dashboardStats?.metrics?.tasks_in_progress ? Number(dashboardStats.metrics.tasks_in_progress) : 0,\n                tasks_done: dashboardStats?.metrics?.tasks_done ? Number(dashboardStats.metrics.tasks_done) : 0,\n                tasks_total: dashboardStats?.metrics?.tasks_total ? Number(dashboardStats.metrics.tasks_total) : 0,\n                \n                // Dashboard stats (users)\n                admins_count: dashboardStats?.metrics?.admins_count ? Number(dashboardStats.metrics.admins_count) : 0,\n                regular_users_count: dashboardStats?.metrics?.regular_users_count ? Number(dashboardStats.metrics.regular_users_count) : 0,\n                total_users: dashboardStats?.metrics?.total_users ? Number(dashboardStats.metrics.total_users) : 0,\n                \n                // Dashboard stats (volunteer hours)\n                total_volunteer_hours: dashboardStats?.metrics?.total_volunteer_hours ? Number(dashboardStats.metrics.total_volunteer_hours) : 0,\n                avg_hours_per_user: dashboardStats?.metrics?.avg_hours_per_user ? Number(dashboardStats.metrics.avg_hours_per_user) : 0,\n                current_month_hours: dashboardStats?.metrics?.current_month_hours ? Number(dashboardStats.metrics.current_month_hours) : 0,\n                \n                // Legacy stats\n                totalRides,\n                totalItems: estimatedItems,\n                totalDonations: estimatedItems + totalRides,\n                activeCities: cities.size,\n                monthlyGrowth,\n            });\n\n            logger.debug('CommunityStatsScreen', 'Stats loaded', {\n                communityStats,\n                dashboardStats,\n                totalRides,\n                activeCities: cities.size,\n            });\n        } catch (error) {\n            logger.error('CommunityStatsScreen', 'Failed to load stats', { error });\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    };\n\n    const onRefresh = React.useCallback(async () => {\n        await loadStats(true);\n    }, []);\n\n    if (loading) {\n        return (\n            <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n                <StatusBar backgroundColor={colors.background} barStyle=\"dark-content\" />\n                <View style={styles.loadingContainer}>\n                    <ActivityIndicator size=\"large\" color={colors.primary} />\n                    <Text style={styles.loadingText}>{t('common:loading')}</Text>\n                </View>\n            </SafeAreaView>\n        );\n    }\n\n    return (\n        <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n            <StatusBar backgroundColor={colors.background} barStyle=\"dark-content\" />\n            {/* List container - limited height on web to ensure scrolling works */}\n            <View style={[\n                styles.listWrapper,\n                Platform.OS === 'web' && maxListHeight ? {\n                    maxHeight: maxListHeight,\n                } : undefined\n            ]}>\n                <ScrollView\n                    style={styles.scrollView}\n                    contentContainerStyle={styles.scrollContent}\n                    showsVerticalScrollIndicator={true}\n                    bounces={true}\n                    scrollEnabled={true}\n                    nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n                    scrollEventThrottle={16}\n                    refreshControl={\n                        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} />\n                    }\n                >\n                    <View \n                        style={styles.header}\n                        onLayout={(event) => {\n                            if (Platform.OS === 'web') {\n                                const { height } = event.nativeEvent.layout;\n                                setHeaderHeight(height);\n                            }\n                        }}\n                    >\n                    <Text style={styles.title}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×§×”×™×œ×”</Text>\n                    <Text style={styles.subtitle}>×”×©×¤×¢×” ×××™×ª×™×ª, ×‘××¡×¤×¨×™×</Text>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ×§×”×™×œ×” ×›×œ×œ×™×•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×§×”×™×œ×”</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"eye-outline\"\n                            value={stats.siteVisits.toLocaleString('he-IL')}\n                            label=\"×‘×™×§×•×¨×™× ×‘××ª×¨\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"cash-outline\"\n                            value={`${stats.totalMoneyDonated.toLocaleString('he-IL')} â‚ª`}\n                            label={'×©\"×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª'}\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"heart-outline\"\n                            value={stats.totalUsers.toLocaleString('he-IL')}\n                            label=\"×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×\"\n                            color={colors.secondary}\n                        />\n                        <StatItem\n                            icon=\"cube-outline\"\n                            value={stats.itemDonations.toLocaleString('he-IL')}\n                            label=\"×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•\"\n                            color={colors.accent}\n                        />\n                        <StatItem\n                            icon=\"car-outline\"\n                            value={stats.completedRides.toLocaleString('he-IL')}\n                            label=\"× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª\"\n                            color={colors.greenBright || colors.success}\n                        />\n                        <StatItem\n                            icon=\"repeat-outline\"\n                            value={`${stats.recurringDonationsAmount.toLocaleString('he-IL')} â‚ª`}\n                            label=\"×ª×¨×•××•×ª ×§×‘×•×¢×•×ª ×¤×¢×™×œ×•×ª\"\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"people-outline\"\n                            value={stats.uniqueDonors.toLocaleString('he-IL')}\n                            label=\"×ª×•×¨××™× ×¤×¢×™×œ×™×\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"checkmark-done-outline\"\n                            value={stats.completedTasks.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×©×‘×•×¦×¢×•\"\n                            color={colors.success}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×™××•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×™××•×ª</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"list-outline\"\n                            value={stats.tasks_open.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×¤×ª×•×—×•×ª\"\n                            color={colors.primary}\n                        />\n                        <StatItem\n                            icon=\"hourglass-outline\"\n                            value={stats.tasks_in_progress.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×‘×ª×”×œ×™×š\"\n                            color={colors.warning}\n                        />\n                        <StatItem\n                            icon=\"checkmark-done-outline\"\n                            value={stats.tasks_done.toLocaleString('he-IL')}\n                            label=\"××©×™××•×ª ×©×”×•×©×œ××•\"\n                            color={colors.success}\n                        />\n                        <StatItem\n                            icon=\"stats-chart-outline\"\n                            value={stats.tasks_total.toLocaleString('he-IL')}\n                            label={'×¡×”\"×› ××©×™××•×ª'}\n                            color={colors.info}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×ª××©×™× */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ××©×ª××©×™×</Text>\n                    <View style={styles.statsGrid}>\n                        <StatItem\n                            icon=\"shield-outline\"\n                            value={stats.admins_count.toLocaleString('he-IL')}\n                            label=\"×× ×”×œ×™× ×‘××¢×¨×›×ª\"\n                            color={colors.secondary}\n                        />\n                        <StatItem\n                            icon=\"people-outline\"\n                            value={stats.regular_users_count.toLocaleString('he-IL')}\n                            label=\"××©×ª××©×™× ×¨×’×™×œ×™×\"\n                            color={colors.info}\n                        />\n                        <StatItem\n                            icon=\"person-outline\"\n                            value={stats.total_users.toLocaleString('he-IL')}\n                            label={'×¡×”\"×› ××©×ª××©×™×'}\n                            color={colors.textSecondary}\n                        />\n                    </View>\n                </View>\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×ª× ×“×‘×•×ª */}\n                {stats.total_volunteer_hours > 0 && (\n                    <View style={styles.section}>\n                        <Text style={styles.sectionTitle}>×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×ª× ×“×‘×•×ª</Text>\n                        <View style={styles.statsGrid}>\n                            <StatItem\n                                icon=\"time-outline\"\n                                value={stats.total_volunteer_hours.toFixed(1)}\n                                label={'×¡×”\"×› ×©×¢×•×ª ×”×ª× ×“×‘×•×ª'}\n                                color={colors.accent}\n                            />\n                            {stats.avg_hours_per_user > 0 && (\n                                <StatItem\n                                    icon=\"stats-chart-outline\"\n                                    value={stats.avg_hours_per_user.toFixed(1)}\n                                    label=\"×××•×¦×¢ ×©×¢×•×ª ×œ××©×ª××©\"\n                                    color={colors.info}\n                                />\n                            )}\n                            {stats.current_month_hours > 0 && (\n                                <StatItem\n                                    icon=\"calendar-outline\"\n                                    value={stats.current_month_hours.toFixed(1)}\n                                    label=\"×©×¢×•×ª ×”×—×•×“×© ×”× ×•×›×—×™\"\n                                    color={colors.warning}\n                                />\n                            )}\n                        </View>\n                    </View>\n                )}\n\n                {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª × ×¡×™×¢×•×ª ×•×¤×¢×™×œ×•×ª */}\n                <View style={styles.section}>\n                    <Text style={styles.sectionTitle}>×¤×¢×™×œ×•×ª ×§×”×™×œ×ª×™×ª</Text>\n                    <View style={styles.impactCard}>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"car\" size={24} color={colors.info} />\n                            <Text style={styles.impactText}>\n                                {stats.totalRides.toLocaleString('he-IL')} × ×¡×™×¢×•×ª\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"gift\" size={24} color={colors.secondary} />\n                            <Text style={styles.impactText}>\n                                {stats.totalItems.toLocaleString('he-IL')} ×¤×¨×™×˜×™× ×©× ×ª×¨××•\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"globe\" size={24} color={colors.primary} />\n                            <Text style={styles.impactText}>\n                                {stats.activeCities.toLocaleString('he-IL')} ×¢×¨×™× ×¤×¢×™×œ×•×ª\n                            </Text>\n                        </View>\n                        <View style={styles.impactRow}>\n                            <Ionicons name=\"trending-up\" size={24} color={colors.success} />\n                            <Text style={styles.impactText}>\n                                +{stats.monthlyGrowth}% ×¦××™×—×” ×—×•×“×©×™×ª\n                            </Text>\n                        </View>\n                    </View>\n                </View>\n\n                {/* Bottom padding for safe area */}\n                <View style={{ height: Platform.OS === 'ios' ? 100 : 80 }} />\n                </ScrollView>\n            </View>\n        </SafeAreaView>\n    );\n}\n\nconst responsivePadding = getResponsivePadding();\nconst cardWidth = getResponsiveCardWidth();\n\nconst styles = StyleSheet.create({\n    safeArea: {\n        flex: 1,\n        backgroundColor: colors.background,\n        position: 'relative',\n    },\n    listWrapper: {\n        flex: 1,\n        backgroundColor: colors.background,\n    },\n    loadingContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: 20,\n    },\n    loadingText: {\n        marginTop: 16,\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    scrollView: {\n        flex: 1,\n    },\n    scrollContent: {\n        flexGrow: 1,\n        paddingBottom: Platform.OS === 'ios' ? 20 : 40,\n    },\n    header: {\n        padding: responsivePadding,\n        paddingTop: 16,\n        borderBottomWidth: 1,\n        borderBottomColor: colors.border,\n        backgroundColor: colors.background,\n    },\n    title: {\n        fontSize: getResponsiveFontSize(FontSizes.heading2),\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        textAlign: 'right',\n    },\n    subtitle: {\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textSecondary,\n        marginTop: 4,\n        textAlign: 'right',\n    },\n    section: {\n        marginBottom: 24,\n        paddingHorizontal: responsivePadding,\n    },\n    sectionTitle: {\n        fontSize: getResponsiveFontSize(FontSizes.heading3),\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 16,\n        textAlign: 'right',\n    },\n    statsGrid: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        gap: isSmallScreen ? 8 : 12,\n    },\n    statItem: {\n        width: cardWidth,\n        backgroundColor: colors.white,\n        padding: isSmallScreen ? 12 : 16,\n        borderRadius: 16,\n        alignItems: 'center',\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 4,\n        elevation: 2,\n        borderWidth: 1,\n        borderColor: colors.border,\n        minHeight: isSmallScreen ? 100 : 120,\n        justifyContent: 'center',\n    },\n    statValue: {\n        fontSize: getResponsiveFontSize(FontSizes.heading2),\n        fontWeight: 'bold',\n        color: colors.textPrimary,\n        marginTop: 8,\n        textAlign: 'center',\n    },\n    statLabel: {\n        fontSize: getResponsiveFontSize(FontSizes.small),\n        color: colors.textSecondary,\n        marginTop: 4,\n        textAlign: 'center',\n    },\n    impactCard: {\n        backgroundColor: colors.white,\n        padding: responsivePadding,\n        borderRadius: 16,\n        shadowColor: colors.black,\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.05,\n        shadowRadius: 4,\n        elevation: 2,\n        borderWidth: 1,\n        borderColor: colors.border,\n    },\n    impactRow: {\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        marginBottom: 16,\n        paddingVertical: 4,\n    },\n    impactText: {\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        color: colors.textPrimary,\n        marginRight: 16,\n        flex: 1,\n        textAlign: 'right',\n    },\n    graphPlaceholder: {\n        height: isSmallScreen ? 150 : 200,\n        backgroundColor: colors.backgroundSecondary,\n        borderRadius: 16,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 2,\n        borderColor: colors.border,\n        borderStyle: 'dashed',\n    },\n    graphText: {\n        color: colors.textSecondary,\n        fontSize: getResponsiveFontSize(FontSizes.body),\n        marginTop: 12,\n        textAlign: 'center',\n        paddingHorizontal: 20,\n    },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/DiscoverPeopleScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6305,6308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6305,6308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6620,6623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6620,6623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7785,7788],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7785,7788],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9380,9383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9380,9383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Discover/suggest people to follow and view popular users; follow/unfollow inline.\n// - Reached from: Profile actions and navigation routes as 'DiscoverPeopleScreen'.\n// - Provides: Two tabs (suggestions/popular), list items navigate to 'UserProfileScreen'.\n// - Reads from context: `useUser()` -> `selectedUser`.\n// - External deps/services: `followService` (suggestions/popular/follow/unfollow/stats).\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  Image,\n  TouchableOpacity,\n  Alert,\n  Platform,\n  Dimensions,\n  RefreshControl,\n  SafeAreaView,\n  StatusBar,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation, useFocusEffect, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport {\n  getFollowSuggestions,\n  getPopularUsers,\n  followUser,\n  unfollowUser,\n  getFollowStats\n} from '../utils/followService';\nimport { createConversation, conversationExists } from '../utils/chatService';\nimport { useUser } from '../stores/userStore';\nimport apiService from '../utils/apiService';\n\nimport { getScreenInfo, isLandscape } from '../globals/responsive';\nimport { IS_DEVELOPMENT } from '../utils/dbConfig';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\n\n// Helper function to generate mock users for testing scroll in development\nconst generateMockUsers = (count: number, excludeId?: string): CharacterType[] => {\n  const names = [\n    '×©×¨×” ×›×”×Ÿ', '×“×•×“ ×œ×•×™', '×¨×—×œ ××‘×¨×”×', '×™×•×¡×£ ×™×¦×—×§', '××¨×™× ××©×”',\n    '××‘×¨×”× ×™×¢×§×‘', '×—×™×” ×“×•×“', '×™×©×¨××œ × ×—×•×', '×“×™× ×” ×©××¢×•×Ÿ', '×‘× ×™××™×Ÿ ×¨××•×‘×Ÿ',\n    '×œ××” ×¨×—×œ', '×’×“ ××©×¨', '×“×Ÿ × ×¤×ª×œ×™', '×–×‘×•×œ×•×Ÿ ×™×©×©×›×¨', '×™×•×¡×£ ×‘× ×™××™×Ÿ',\n    '××©×” ××”×¨×Ÿ', '×©×œ××” ×“×•×“', '×™×”×•×“×” ×™×•×¡×£', '××¤×¨×™× ×× ×©×”', '×¨×•× ×Ÿ ×××™×¨',\n    '×™×¢×œ ×˜×œ', '× ×•×¢×” ××•×¨', '×¨×•××™ ×’×™×œ', '×ª××¨ ×“× ×™××œ', '××™×›×œ ×××™×¨',\n    '×¢×“×™ ×™×”×œ', '×œ×™×” ×’×™×', '×©×™×¨×” ××“×', '××•×¨ ××•×¨×™', '×™×¢×¨×” ×¨×•×Ÿ'\n  ];\n\n  const bios = [\n    '××•×”×‘ ×œ×¢×–×•×¨ ×œ××—×¨×™× ×•×œ×”×ª× ×“×‘ ×‘×§×”×™×œ×”',\n    '×¤×¢×™×œ ×—×‘×¨×ª×™ ×•××•×‘×™×œ ×©×™× ×•×™ ×‘×—×‘×¨×”',\n    '××ª× ×“×‘ ×‘××¡×¤×¨ ××¨×’×•× ×™× ×•×ª×•××š ×‘×¤×¨×•×™×§×˜×™× ×§×”×™×œ×ª×™×™×',\n    '××—×•×™×‘ ×œ×©×™×¤×•×¨ ×”×—×‘×¨×” ×•×”×¡×‘×™×‘×”',\n    '××××™×Ÿ ×‘× ×ª×™× ×” ×•×‘×¢×©×™×™×” ×œ××¢×Ÿ ×”×›×œ×œ',\n    '×¤×¢×™×œ ×¡×‘×™×‘×ª×™ ×•××ª× ×“×‘ ×‘×§×”×™×œ×”',\n    '×¢×•×‘×“ ×œ××¢×Ÿ ×©×•×•×™×•×Ÿ ×•×¦×“×§ ×—×‘×¨×ª×™',\n    '×ª×•××š ×‘×¤×¨×•×™×§×˜×™× ×§×”×™×œ×ª×™×™× ×•×—×‘×¨×ª×™×™×'\n  ];\n\n  const rolesOptions = [\n    ['user'],\n    ['user', 'volunteer'],\n    ['user', 'donor'],\n    ['user', 'organizer'],\n  ];\n\n  const mockUsers: CharacterType[] = [];\n  let userIdCounter = 1;\n\n  for (let i = 0; i < count; i++) {\n    const baseId = `mock-user-${userIdCounter}`;\n    // Skip if this is the excluded user\n    if (excludeId && baseId === excludeId) {\n      userIdCounter++;\n      continue;\n    }\n\n    const name = names[i % names.length] + ` ${Math.floor(i / names.length) + 1}`;\n    const bio = bios[i % bios.length];\n    const roles = rolesOptions[i % rolesOptions.length];\n    const karmaPoints = Math.floor(Math.random() * 1000) + 50;\n    const completedTasks = Math.floor(Math.random() * 50);\n\n    mockUsers.push({\n      id: baseId,\n      name,\n      avatar: `https://i.pravatar.cc/150?img=${(i % 70) + 1}`,\n      bio,\n      email: `mock${userIdCounter}@test.local`,\n      karmaPoints,\n      completedTasks,\n      followersCount: Math.floor(Math.random() * 100),\n      roles,\n      isVerified: Math.random() > 0.9,\n      isActive: true,\n    });\n\n    userIdCounter++;\n  }\n\n  return mockUsers;\n};\n\nexport default function DiscoverPeopleScreen() {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n  const { isTablet, isDesktop } = getScreenInfo();\n  const landscape = isLandscape();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const estimatedTabBarHeight = landscape ? 40 : (isDesktop ? 56 : isTablet ? 54 : 46);\n  const bottomPadding = (Platform.OS === 'web' ? estimatedTabBarHeight : tabBarHeight) + 24;\n  const { selectedUser } = useUser();\n  const [suggestions, setSuggestions] = useState<CharacterType[]>([]);\n  const [popularUsers, setPopularUsers] = useState<CharacterType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [activeTab, setActiveTab] = useState<'suggestions' | 'popular'>('suggestions');\n  const [followStats, setFollowStats] = useState<Record<string, { isFollowing: boolean }>>({});\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n\n  // Helper function to check if a user is the current user\n  const isCurrentUserCheck = useCallback((\n    userId: string,\n    userEmail: string | undefined,\n    currentUserId: string,\n    currentUserEmail: string\n  ): boolean => {\n    const normalizedUserId = String(userId || '').trim().toLowerCase();\n    const normalizedUserEmail = userEmail ? String(userEmail).trim().toLowerCase() : '';\n\n    return normalizedUserId === currentUserId ||\n      (currentUserEmail && normalizedUserEmail === currentUserEmail) ||\n      normalizedUserId === '';\n  }, []);\n\n  const loadUsers = useCallback(async (isRefresh = false) => {\n    console.log('ğŸ“‹ DiscoverPeopleScreen - loadUsers called', {\n      isRefresh,\n      platform: Platform.OS,\n      hasSelectedUser: !!selectedUser,\n      userId: selectedUser?.id,\n      environment: IS_DEVELOPMENT ? 'development' : 'production'\n    });\n\n    if (isRefresh) {\n      setRefreshing(true);\n    } else {\n      setLoading(true);\n    }\n    try {\n      if (!selectedUser) {\n        console.log('âš ï¸ DiscoverPeopleScreen - No selectedUser, clearing data');\n        setSuggestions([]);\n        setPopularUsers([]);\n        setFollowStats({});\n        setLoading(false);\n        setRefreshing(false);\n        return;\n      }\n\n      const currentUserId = String(selectedUser.id).trim().toLowerCase();\n      const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n\n      console.log('ğŸ” DiscoverPeopleScreen - Filtering users. Current user ID:', currentUserId, 'Email:', currentUserEmail);\n\n      let filteredSuggestions: any[] = [];\n      // Get ALL users (no limit) - use high limit to get all users from database\n      const userSuggestions = await getFollowSuggestions(currentUserId, 1000, currentUserEmail);\n      // Filter out current user from suggestions - check both ID and email\n      filteredSuggestions = (userSuggestions as any[]).filter((user) => {\n        const isCurrentUser = isCurrentUserCheck(user.id, user.email, currentUserId, currentUserEmail);\n\n        if (isCurrentUser) {\n          console.log('ğŸš« Filtered out current user from suggestions:', {\n            userId: user.id,\n            userEmail: user.email,\n            name: user.name\n          });\n        }\n\n        return !isCurrentUser;\n      });\n      // In development, add mock users if we have less than 30 users to test scrolling\n      if (IS_DEVELOPMENT && filteredSuggestions.length < 30) {\n        const mockCount = 30 - filteredSuggestions.length;\n        const mockUsers = generateMockUsers(mockCount, currentUserId);\n        console.log(`ğŸ§ª Development mode: Adding ${mockCount} mock users for scroll testing`);\n        filteredSuggestions = [...filteredSuggestions, ...mockUsers];\n      }\n\n      setSuggestions(filteredSuggestions);\n\n      // Get popular users excluding current user - get ALL users (no limit)\n      const popular = await getPopularUsers(1000, currentUserId, currentUserEmail);\n      // Additional filter as safety measure - check both ID and email\n      const filteredPopular = (popular as any[]).filter((user) => {\n        const isCurrentUser = isCurrentUserCheck(user.id, user.email, currentUserId, currentUserEmail);\n\n        if (isCurrentUser) {\n          console.log('ğŸš« Filtered out current user from popular:', {\n            userId: user.id,\n            userEmail: user.email,\n            name: user.name\n          });\n        }\n\n        return !isCurrentUser;\n      });\n\n      // In development, add mock users if we have less than 30 users to test scrolling\n      if (IS_DEVELOPMENT && filteredPopular.length < 30) {\n        const mockCount = 30 - filteredPopular.length;\n        const mockUsers = generateMockUsers(mockCount, currentUserId);\n        console.log(`ğŸ§ª Development mode: Adding ${mockCount} mock users to popular for scroll testing`);\n        filteredPopular.push(...mockUsers);\n      }\n\n      setPopularUsers(filteredPopular);\n\n      // Get total users count from server\n      let totalUsersInDatabase = 0;\n      try {\n        const summaryResponse = await apiService.getUsersSummary();\n        if (summaryResponse && summaryResponse.success && summaryResponse.data) {\n          totalUsersInDatabase = parseInt(summaryResponse.data.total_users || '0', 10);\n        }\n      } catch (error) {\n        console.error('âŒ Error fetching users summary:', error);\n        // Try to get count from the actual response\n        try {\n          const allUsersResponse = await apiService.getUsers({ limit: 1000, offset: 0 });\n          if (allUsersResponse && allUsersResponse.success && allUsersResponse.data) {\n            totalUsersInDatabase = (allUsersResponse.data as any[]).length;\n          }\n        } catch (fallbackError) {\n          console.error('âŒ Error fetching all users as fallback:', fallbackError);\n        }\n      }\n\n      // Log total users found - ALWAYS log this, even if summary failed\n      const totalUsersFound = filteredSuggestions.length + filteredPopular.length;\n      const uniqueUsersCount = new Set([...filteredSuggestions.map(u => u.id), ...filteredPopular.map(u => u.id)]).size;\n      console.log('ğŸ‘¥ DiscoverPeopleScreen - ×¡×¤×™×¨×ª ××©×ª××©×™×:', {\n        ×¡×š_×›×•×œ_×™×•×–×¨×™×_×‘××¡×“_× ×ª×•× ×™×: totalUsersInDatabase || '×œ× ×–××™×Ÿ',\n        ×”××œ×¦×•×ª: filteredSuggestions.length,\n        ×¤×•×¤×•×œ×¨×™×™×: filteredPopular.length,\n        ×¡×š_×›×•×œ_× ×˜×¢× ×•: totalUsersFound,\n        ××©×ª××©×™×_×™×™×—×•×“×™×™×: uniqueUsersCount\n      });\n\n      // Load follow stats for all users (use filtered lists)\n      // Mock users always have isFollowing: false by default (no need to check backend)\n      const allUsersToCheck = [...filteredSuggestions, ...filteredPopular];\n      const stats: Record<string, { isFollowing: boolean }> = {};\n\n      for (const user of allUsersToCheck) {\n        // Mock users have IDs starting with \"mock-user-\", skip backend check for them\n        if (IS_DEVELOPMENT && user.id.startsWith('mock-user-')) {\n          stats[user.id] = { isFollowing: false };\n        } else {\n          try {\n            const userStats = await getFollowStats(user.id, currentUserId);\n            stats[user.id] = { isFollowing: userStats.isFollowing };\n          } catch (error) {\n            console.warn(`Failed to get follow stats for user ${user.id}:`, error);\n            stats[user.id] = { isFollowing: false };\n          }\n        }\n      }\n\n      setFollowStats(stats);\n      \n      console.log('âœ… DiscoverPeopleScreen - loadUsers completed', {\n        suggestionsCount: filteredSuggestions.length,\n        popularCount: filteredPopular.length,\n        totalUsers: filteredSuggestions.length + filteredPopular.length,\n        followStatsCount: Object.keys(stats).length\n      });\n    } catch (error) {\n      console.error('âŒ DiscoverPeopleScreen - Error loading users:', error);\n      if (!isRefresh) {\n        Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×”××©×ª××©×™×');\n      }\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, [selectedUser, isCurrentUserCheck]);\n\n  useEffect(() => {\n    loadUsers(false);\n  }, [loadUsers]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      console.log('ğŸ‘ï¸ DiscoverPeopleScreen - Screen focused, refreshing data...', {\n        platform: Platform.OS,\n        activeTab,\n        suggestionsCount: suggestions.length,\n        popularCount: popularUsers.length\n      });\n      loadUsers(false);\n    }, [loadUsers, activeTab, suggestions.length, popularUsers.length])\n  );\n\n  const onRefresh = useCallback(() => {\n    console.log('ğŸ”„ DiscoverPeopleScreen - onRefresh called', {\n      platform: Platform.OS,\n      activeTab,\n      currentSuggestionsCount: suggestions.length,\n      currentPopularCount: popularUsers.length\n    });\n    loadUsers(true);\n  }, [loadUsers, activeTab, suggestions.length, popularUsers.length]);\n\n  const handleFollowToggle = async (targetUserId: string) => {\n    console.log('ğŸ‘† DiscoverPeopleScreen - handleFollowToggle called', {\n      targetUserId,\n      platform: Platform.OS,\n      hasSelectedUser: !!selectedUser,\n      currentIsFollowing: followStats[targetUserId]?.isFollowing || false\n    });\n\n    if (!selectedUser) {\n      Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    // Handle mock users in development (just update UI state, don't call backend)\n    if (IS_DEVELOPMENT && targetUserId.startsWith('mock-user-')) {\n      const currentStats = followStats[targetUserId] || { isFollowing: false };\n      const willBeFollowing = !currentStats.isFollowing;\n\n      if (willBeFollowing) {\n        // Create updated follow stats that includes the newly followed mock user\n        const updatedFollowStats = {\n          ...followStats,\n          [targetUserId]: { isFollowing: true }\n        };\n\n        // Update follow stats state\n        setFollowStats(updatedFollowStats);\n\n        // Remove mock users we're following from both lists (same as real users)\n        const filterUsersWeFollow = (users: CharacterType[]) => {\n          return users.filter(user => {\n            // Remove users we're already following (including mock users)\n            const userStats = updatedFollowStats[user.id] || { isFollowing: false };\n            return !userStats.isFollowing;\n          });\n        };\n\n        setSuggestions(prev => filterUsersWeFollow(prev));\n        setPopularUsers(prev => filterUsersWeFollow(prev));\n        console.log(`ğŸ§ª Development: Mock follow toggle for ${targetUserId} - user removed from list`);\n      } else {\n        // Unfollow - just update stats\n        setFollowStats(prev => ({\n          ...prev,\n          [targetUserId]: { isFollowing: false }\n        }));\n        console.log(`ğŸ§ª Development: Mock unfollow toggle for ${targetUserId}`);\n      }\n      return;\n    }\n\n    try {\n      const currentStats = followStats[targetUserId] || { isFollowing: false };\n\n      if (currentStats.isFollowing) {\n        console.log('ğŸ‘‹ DiscoverPeopleScreen - Unfollowing user', { targetUserId });\n        const success = await unfollowUser(selectedUser.id, targetUserId);\n        if (success) {\n          setFollowStats(prev => ({\n            ...prev,\n            [targetUserId]: { isFollowing: false }\n          }));\n          console.log('âœ… DiscoverPeopleScreen - Unfollowed successfully', { targetUserId });\n          Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n        }\n      } else {\n        console.log('â• DiscoverPeopleScreen - Following user', { targetUserId });\n        const success = await followUser(selectedUser.id, targetUserId);\n        if (success) {\n          // Create updated follow stats that includes the newly followed user\n          const updatedFollowStats = {\n            ...followStats,\n            [targetUserId]: { isFollowing: true }\n          };\n\n          // Update follow stats state\n          setFollowStats(updatedFollowStats);\n\n          // Remove the followed user and all users we're already following from both lists\n          // (because we don't need to show users we're already following)\n          const filterUsersWeFollow = (users: CharacterType[]) => {\n            return users.filter(user => {\n              // Remove users we're already following (including the one we just followed)\n              // This applies to both real users and mock users\n              const userStats = updatedFollowStats[user.id] || { isFollowing: false };\n              return !userStats.isFollowing;\n            });\n          };\n\n          setSuggestions(prev => filterUsersWeFollow(prev));\n          setPopularUsers(prev => filterUsersWeFollow(prev));\n\n          console.log('âœ… DiscoverPeopleScreen - Followed successfully', { targetUserId });\n          Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n        }\n      }\n    } catch (error) {\n      console.error('âŒ DiscoverPeopleScreen - Follow toggle error:', error, {\n        targetUserId,\n        platform: Platform.OS\n      });\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n    }\n  };\n\n  const handleMessage = async (targetUser: CharacterType) => {\n    if (!selectedUser) {\n      Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    // Mock users can't receive messages in development\n    if (IS_DEVELOPMENT && targetUser.id.startsWith('mock-user-')) {\n      Alert.alert('××™×“×¢', '×–×”×• ××©×ª××© ×‘×“×™×§×”. ×œ× × ×™×ª×Ÿ ×œ×©×œ×•×— ×”×•×“×¢×” ×œ××©×ª××© ×‘×“×™×§×”.');\n      return;\n    }\n\n    try {\n      const existingConvId = await conversationExists(selectedUser.id, targetUser.id);\n      let conversationId: string;\n\n      if (existingConvId) {\n        console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n        conversationId = existingConvId;\n      } else {\n        console.log('ğŸ’¬ Creating new conversation...');\n        conversationId = await createConversation([selectedUser.id, targetUser.id]);\n      }\n\n      navigation.navigate('ChatDetailScreen', {\n        conversationId,\n        otherUserId: targetUser.id,\n        userName: targetUser.name || '×œ×œ× ×©×',\n        userAvatar: targetUser.avatar || 'https://i.pravatar.cc/150?img=1',\n      });\n    } catch (error) {\n      console.error('âŒ Create chat error:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×™×¦×™×¨×ª ×”×©×™×—×”');\n    }\n  };\n\n  const renderUserItem = ({ item }: { item: CharacterType }) => {\n    const currentStats = followStats[item.id] || { isFollowing: false };\n    const isCurrentUser = selectedUser?.id === item.id;\n    \n    // Log only occasionally to avoid spam (every 10th item)\n    if (Math.random() < 0.1) {\n      console.log('ğŸ¨ DiscoverPeopleScreen - renderUserItem', {\n        userId: item.id,\n        isCurrentUser,\n        isFollowing: currentStats.isFollowing,\n        platform: Platform.OS\n      });\n    }\n\n    return (\n      <View style={styles.userItem}>\n        <TouchableOpacity\n          style={styles.userInfo}\n          onPress={() => {\n            navigation.navigate('UserProfileScreen', {\n              userId: item.id,\n              userName: item.name,\n              characterData: item\n            });\n          }}\n        >\n          <Image source={{ uri: item.avatar }} style={styles.avatar} />\n          <View style={styles.userDetails}>\n            <View style={styles.userHeader}>\n              <Text style={styles.userName}>{item.name}</Text>\n              {item.isVerified && (\n                <Ionicons name=\"checkmark-circle\" size={16} color={colors.info} />\n              )}\n            </View>\n            <Text style={styles.userBio} numberOfLines={2}>\n              {item.bio}\n            </Text>\n            <View style={styles.userStats}>\n              <Text style={styles.statText}>\n                {item.karmaPoints} × ×§×•×“×•×ª ×§××¨××”\n              </Text>\n              <Text style={styles.statText}>\n                {item.completedTasks} ××©×™××•×ª ×”×•×©×œ××•\n              </Text>\n            </View>\n            <View style={styles.rolesContainer}>\n              {(item.roles ?? []).slice(0, 2).map((role, index) => (\n                <View key={index} style={styles.roleTag}>\n                  <Text style={styles.roleText}>{role}</Text>\n                </View>\n              ))}\n            </View>\n          </View>\n        </TouchableOpacity>\n\n        {!isCurrentUser && (\n          <View style={styles.actionsContainer}>\n            <TouchableOpacity\n              style={[\n                styles.followButton,\n                currentStats.isFollowing && styles.followingButton\n              ]}\n              onPress={() => handleFollowToggle(item.id)}\n            >\n              <Text style={[\n                styles.followButtonText,\n                currentStats.isFollowing && styles.followingButtonText\n              ]}>\n                {currentStats.isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n              </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.messageButton}\n              onPress={() => handleMessage(item)}\n            >\n              <Ionicons name=\"chatbubble-outline\" size={16} color={colors.textPrimary} />\n              <Text style={styles.messageButtonText}>×”×•×“×¢×”</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const renderTabBar = () => (\n    <View style={styles.tabBar}>\n      <TouchableOpacity\n        style={[\n          styles.tabButton,\n          activeTab === 'suggestions' && styles.activeTabButton\n        ]}\n        onPress={() => setActiveTab('suggestions')}\n      >\n        <Text style={[\n          styles.tabButtonText,\n          activeTab === 'suggestions' && styles.activeTabButtonText\n        ]}>\n          ×”××œ×¦×•×ª\n        </Text>\n      </TouchableOpacity>\n      <TouchableOpacity\n        style={[\n          styles.tabButton,\n          activeTab === 'popular' && styles.activeTabButton\n        ]}\n        onPress={() => setActiveTab('popular')}\n      >\n        <Text style={[\n          styles.tabButtonText,\n          activeTab === 'popular' && styles.activeTabButtonText\n        ]}>\n          ×¤×•×¤×•×œ×¨×™×™×\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  const renderListHeader = () => (\n    <>\n      <View \n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n            console.log('ğŸ“ DiscoverPeopleScreen - Header height measured', { height, platform: Platform.OS });\n          }\n        }}\n      >\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => {\n            console.log('â¬…ï¸ DiscoverPeopleScreen - Back button pressed');\n            navigation.goBack();\n          }}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <View style={styles.headerSpacer} />\n      </View>\n      {renderTabBar()}\n    </>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"people-outline\" size={60} color={colors.textSecondary} />\n      <Text style={styles.emptyStateTitle}>××™×Ÿ ×”××œ×¦×•×ª ×›×¨×’×¢</Text>\n      <Text style={styles.emptyStateSubtitle}>\n        × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨ ××• ×—×¤×© ××©×ª××©×™× ×¡×¤×¦×™×¤×™×™×\n      </Text>\n    </View>\n  );\n\n  // Data is already filtered in loadUsers, no need to filter again\n  const currentData = activeTab === 'suggestions' ? suggestions : popularUsers;\n\n  console.log('ğŸ–¼ï¸ DiscoverPeopleScreen - Rendering', {\n    platform: Platform.OS,\n    activeTab,\n    dataCount: currentData.length,\n    loading,\n    refreshing,\n    maxListHeight,\n    headerHeight,\n    tabBarHeight\n  });\n\n  return (\n    <SafeAreaView style={[styles.container, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundPrimary} barStyle=\"dark-content\" />\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={currentData}\n          renderItem={renderUserItem}\n          keyExtractor={(item) => item.id}\n          contentContainerStyle={[\n            styles.listContentContainer,\n            { paddingBottom: bottomPadding },\n            currentData.length === 0 && styles.emptyListContainer\n          ]}\n          showsVerticalScrollIndicator={true}\n          ListHeaderComponent={renderListHeader}\n          ListEmptyComponent={renderEmptyState}\n          refreshControl={\n            <RefreshControl\n              refreshing={refreshing}\n              onRefresh={onRefresh}\n              tintColor={colors.primary}\n              colors={[colors.primary]}\n            />\n          }\n          style={styles.flatList}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n          initialNumToRender={20}\n          maxToRenderPerBatch={10}\n          windowSize={21}\n          keyboardShouldPersistTaps=\"handled\"\n          onScroll={(event) => {\n            // Log scroll events occasionally to avoid spam\n            if (Math.random() < 0.05) {\n              console.log('ğŸ“œ DiscoverPeopleScreen - onScroll', {\n                platform: Platform.OS,\n                contentOffset: event.nativeEvent.contentOffset.y,\n                contentSize: event.nativeEvent.contentSize.height,\n                layoutSize: event.nativeEvent.layoutMeasurement.height\n              });\n            }\n          }}\n          onContentSizeChange={(contentWidth, contentHeight) => {\n            console.log('ğŸ“ DiscoverPeopleScreen - onContentSizeChange', {\n              platform: Platform.OS,\n              contentWidth,\n              contentHeight,\n              dataCount: currentData.length\n            });\n          }}\n          onLayout={(event) => {\n            console.log('ğŸ“ DiscoverPeopleScreen - FlatList onLayout', {\n              platform: Platform.OS,\n              width: event.nativeEvent.layout.width,\n              height: event.nativeEvent.layout.height\n            });\n          }}\n        />\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundPrimary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundPrimary,\n  },\n  flatList: {\n    flex: 1,\n    backgroundColor: colors.backgroundPrimary,\n  },\n  listContentContainer: {\n    flexGrow: 1,\n  },\n  emptyListContainer: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  backButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  headerSpacer: {\n    width: 40,\n  },\n  tabBar: {\n    flexDirection: 'row',\n    backgroundColor: colors.backgroundSecondary,\n    marginHorizontal: 16,\n    marginVertical: 12,\n    minWidth: 200,\n    borderRadius: 8,\n    padding: 4,\n  },\n  tabButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 6,\n  },\n  activeTabButton: {\n    backgroundColor: colors.pink,\n  },\n  tabButtonText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  activeTabButtonText: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  userItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  userInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  userHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  userName: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginRight: 4,\n  },\n  userBio: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 6,\n    lineHeight: 16,\n  },\n  userStats: {\n    flexDirection: 'row',\n    gap: 12,\n    marginBottom: 6,\n  },\n  statText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  rolesContainer: {\n    flexDirection: 'row',\n    gap: 6,\n  },\n  roleTag: {\n    backgroundColor: colors.primary + '20',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 8,\n  },\n  roleText: {\n    fontSize: FontSizes.small,\n    color: colors.primary,\n    fontWeight: '500',\n  },\n  actionsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  followButton: {\n    backgroundColor: colors.pink,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    minWidth: 60,\n    alignItems: 'center',\n  },\n  followingButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  followButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  followingButtonText: {\n    color: colors.textPrimary,\n  },\n  messageButton: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  messageButtonText: {\n    color: colors.textPrimary,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 60,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/EditProfileScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[792,795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[792,795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2190,2193],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2190,2193],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3162,3165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3162,3165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5507,5510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5507,5510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5854,5857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5854,5857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14434,14437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14434,14437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":331,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":331,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16544,16547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16544,16547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { View, Text, TextInput, StyleSheet, TouchableOpacity, Alert, Platform, Image, ActivityIndicator } from 'react-native';\nimport { logger } from '../utils/loggerService';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { useNavigation } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { FontSizes, LAYOUT_CONSTANTS } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport { useTranslation } from 'react-i18next';\nimport { pickImage, takePhoto } from '../utils/fileService';\nimport { enhancedDB } from '../utils/enhancedDatabaseService';\n\nexport default function EditProfileScreen() {\n  const navigation = useNavigation<any>();\n  const { selectedUser, setSelectedUserWithMode } = useUser();\n  const { t } = useTranslation(['profile', 'common']);\n\n  // Core fields\n  const [firstName, setFirstName] = useState((selectedUser?.name || '').split(' ')[0] || '');\n  const [lastName, setLastName] = useState((selectedUser?.name || '').split(' ').slice(1).join(' ') || '');\n  const [email, setEmail] = useState(selectedUser?.email || '');\n  const [phone, setPhone] = useState(selectedUser?.phone || '');\n  const [gender, setGender] = useState<'male'|'female'|'other'|''>('');\n  const [birthDate, setBirthDate] = useState('');\n  const [avatar, setAvatar] = useState(selectedUser?.avatar || '');\n  const [city, setCity] = useState(selectedUser?.location?.city || '');\n  const [country, setCountry] = useState(selectedUser?.location?.country || '');\n  const [street, setStreet] = useState('');\n  const [houseNumber, setHouseNumber] = useState('');\n  const [zipcode, setZipcode] = useState('');\n  const [bio, setBio] = useState(selectedUser?.bio || '');\n  const [interests, setInterests] = useState((selectedUser?.interests || []).join(', '));\n  const [website, setWebsite] = useState('');\n  const [linkedin, setLinkedin] = useState('');\n  const [facebook, setFacebook] = useState('');\n  const [instagram, setInstagram] = useState('');\n  const [language, setLanguage] = useState<'he'|'en'|''>((selectedUser?.settings?.language as any) || '');\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSave = async () => {\n    const fullName = `${firstName} ${lastName}`.trim();\n    if (!fullName || !email.trim() || !avatar.trim() || !city.trim() || !country.trim()) {\n      Alert.alert(t('common:errorTitle'), t('common:genericTryAgain'));\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      // Prepare data for API (convert interests string to array)\n      const interestsArray = interests.trim() \n        ? interests.split(',').map(i => i.trim()).filter(i => i.length > 0)\n        : [];\n\n      const updateData = {\n        name: fullName,\n        avatar_url: avatar.trim(), // API expects avatar_url\n        bio: bio.trim(),\n        phone: phone.trim(),\n        city: city.trim(),\n        country: country.trim(),\n        interests: interestsArray,\n        settings: {\n          ...(selectedUser?.settings || {}),\n          language: language || (selectedUser?.settings?.language as any) || 'he',\n        },\n      };\n\n      // Save to database via API\n      if (selectedUser?.id) {\n        logger.info('EditProfileScreen', 'Saving profile', { userId: selectedUser.id, updateData });\n        const response = await enhancedDB.updateUserProfile(selectedUser.id, updateData);\n        logger.info('EditProfileScreen', 'Save response', { success: response.success, hasData: !!response.data, error: response.error });\n        \n        if (response.success && response.data) {\n          // Update local state with the response from server (includes all computed fields)\n          // Map server response fields to client User interface\n          const updatedUser = {\n            id: response.data.id,\n            name: response.data.name || fullName,\n            email: email.trim(), // Keep the email from form (not updated via API)\n            phone: response.data.phone || phone.trim(),\n            avatar: response.data.avatar_url || response.data.avatar || avatar.trim(),\n            bio: response.data.bio || bio.trim(),\n            karmaPoints: response.data.karma_points || response.data.karmaPoints || selectedUser?.karmaPoints || 0,\n            joinDate: response.data.join_date || response.data.joinDate || selectedUser?.joinDate || new Date().toISOString(),\n            isActive: response.data.is_active !== false,\n            lastActive: response.data.last_active || response.data.lastActive || new Date().toISOString(),\n            location: {\n              city: response.data.city || city.trim(),\n              country: response.data.country || country.trim(),\n            },\n            interests: response.data.interests || interestsArray,\n            roles: response.data.roles || selectedUser?.roles || ['user'],\n            postsCount: response.data.posts_count || response.data.postsCount || selectedUser?.postsCount || 0,\n            followersCount: response.data.followers_count || response.data.followersCount || selectedUser?.followersCount || 0,\n            followingCount: response.data.following_count || response.data.followingCount || selectedUser?.followingCount || 0,\n            notifications: selectedUser?.notifications || [],\n            settings: response.data.settings || {\n              ...(selectedUser?.settings || {}),\n              language: language || (selectedUser?.settings?.language as any) || 'he',\n            },\n          };\n          logger.info('EditProfileScreen', 'Updating user state', { \n            userId: updatedUser.id, \n            bio: updatedUser.bio,\n            city: updatedUser.location.city,\n            country: updatedUser.location.country \n          });\n          await setSelectedUserWithMode(updatedUser as any, 'real');\n          \n          // Also save to AsyncStorage with 'current_user' key (used by login flow)\n          try {\n            const { default: AsyncStorage } = await import('@react-native-async-storage/async-storage');\n            await AsyncStorage.setItem('current_user', JSON.stringify(updatedUser));\n            logger.info('EditProfileScreen', 'Saved user to AsyncStorage', { userId: updatedUser.id });\n          } catch (storageError) {\n            logger.error('EditProfileScreen', 'Failed to save to AsyncStorage', { error: storageError });\n          }\n          \n          // Show success message - use alert() for web, Alert.alert() for native\n          const successMessage = t('profile:edit.saveSuccess', '×”×¤×¨×•×¤×™×œ × ×©××¨ ×‘×”×¦×œ×—×”');\n          if (Platform.OS === 'web') {\n            alert(successMessage);\n          } else {\n            Alert.alert(t('common:success', '×”×¦×œ×—×”'), successMessage);\n          }\n          navigation.goBack();\n        } else {\n          const errorMessage = response.error || t('common:genericTryAgain', '××™×¨×¢×” ×©×’×™××”, × ×¡×” ×©×•×‘');\n          logger.error('EditProfileScreen', 'Save failed', { error: response.error, response });\n          if (Platform.OS === 'web') {\n            alert(t('common:errorTitle', '×©×’×™××”') + ': ' + errorMessage);\n          } else {\n            Alert.alert(\n              t('common:errorTitle', '×©×’×™××”'),\n              errorMessage\n            );\n          }\n        }\n      } else {\n        const errorMsg = '××©×ª××© ×œ× ××–×•×”×”';\n        logger.error('EditProfileScreen', 'No user ID', { selectedUser });\n        if (Platform.OS === 'web') {\n          alert(t('common:errorTitle', '×©×’×™××”') + ': ' + errorMsg);\n        } else {\n          Alert.alert(t('common:errorTitle', '×©×’×™××”'), errorMsg);\n        }\n      }\n    } catch (error) {\n      logger.error('EditProfileScreen', 'Save exception', { error });\n      console.error('Error saving profile:', error);\n      const errorMsg = t('common:genericTryAgain', '××™×¨×¢×” ×©×’×™××” ×‘×©××™×¨×ª ×”×¤×¨×•×¤×™×œ, × ×¡×” ×©×•×‘');\n      if (Platform.OS === 'web') {\n        alert(t('common:errorTitle', '×©×’×™××”') + ': ' + errorMsg);\n      } else {\n        Alert.alert(\n          t('common:errorTitle', '×©×’×™××”'),\n          errorMsg\n        );\n      }\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handlePickImage = async () => {\n    const result = await pickImage();\n    if (result.success && result.fileData) {\n      setAvatar(result.fileData.uri);\n    } else if (result.error) {\n      Alert.alert(t('common:errorTitle'), result.error);\n    }\n  };\n\n  const handleTakePhoto = async () => {\n    const result = await takePhoto();\n    if (result.success && result.fileData) {\n      setAvatar(result.fileData.uri);\n    } else if (result.error) {\n      Alert.alert(t('common:errorTitle'), result.error);\n    }\n  };\n\n  return (\n    <View style={styles.pageWrapper}>\n      {/* Top bar back button */}\n      <View style={styles.topBar}>\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.backBtn}>\n          <Ionicons name=\"chevron-back\" size={20} color={colors.textPrimary} />\n          <Text style={styles.backText}>{t('common:back')}</Text>\n        </TouchableOpacity>\n      </View>\n\n      <ScrollContainer\n        style={styles.container}\n        contentStyle={styles.content}\n        keyboardShouldPersistTaps=\"handled\"\n        showsVerticalScrollIndicator={true}\n        bounces={Platform.OS === 'ios'}\n      >\n      <Text style={styles.header}>{t('profile:banner.editTitle')}</Text>\n\n      {/* Profile image picker */}\n      <View style={styles.avatarRow}>\n        {avatar ? (\n          <Image source={{ uri: avatar }} style={styles.avatar} />\n        ) : (\n          <View style={[styles.avatar, styles.avatarPlaceholder]}>\n            <Ionicons name=\"person-outline\" size={28} color={colors.textSecondary} />\n          </View>\n        )}\n        <View style={styles.avatarButtons}>\n          <TouchableOpacity style={styles.smallButton} onPress={handlePickImage}>\n            <Ionicons name=\"image-outline\" size={16} color={colors.white} />\n            <Text style={styles.smallButtonText}>{t('profile:edit.gallery')}</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={[styles.smallButton, { backgroundColor: colors.primary }]} onPress={handleTakePhoto}>\n            <Ionicons name=\"camera-outline\" size={16} color={colors.white} />\n            <Text style={styles.smallButtonText}>{t('profile:edit.camera')}</Text>\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={[styles.saveButtonFixed, isSaving && styles.saveButtonDisabled]} \n            onPress={handleSave}\n            disabled={isSaving}\n          >\n            {isSaving ? (\n              <ActivityIndicator size=\"small\" color={colors.white} />\n            ) : (\n              <>\n                <Ionicons name=\"save-outline\" size={18} color={colors.white} />\n                <Text style={styles.saveText}>{t('common:done')}</Text>\n              </>\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Name */}\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.firstName')}</Text>\n          <TextInput style={styles.input} value={firstName} onChangeText={setFirstName} placeholder={t('profile:edit.firstName')} />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.lastName')}</Text>\n          <TextInput style={styles.input} value={lastName} onChangeText={setLastName} placeholder={t('profile:edit.lastName')} />\n        </View>\n      </View>\n\n      {/* Contact */}\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.email')}</Text>\n          <TextInput style={styles.input} value={email} onChangeText={setEmail} placeholder={'email@example.com'} keyboardType=\"email-address\" autoCapitalize=\"none\" />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.phone')}</Text>\n          <TextInput style={styles.input} value={phone} onChangeText={setPhone} placeholder={'+9725XXXXXXXX'} keyboardType=\"phone-pad\" />\n        </View>\n      </View>\n\n      {/* Location */}\n      <View style={styles.fieldGroup}>\n        <Text style={styles.label}>{t('profile:banner.fields.avatar')}</Text>\n        <TextInput style={styles.input} value={avatar} onChangeText={setAvatar} placeholder={t('profile:banner.fields.avatar')} />\n      </View>\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.city')}</Text>\n          <TextInput style={styles.input} value={city} onChangeText={setCity} placeholder={t('profile:edit.city')} />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.country')}</Text>\n          <TextInput style={styles.input} value={country} onChangeText={setCountry} placeholder={t('profile:edit.country')} />\n        </View>\n      </View>\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.street')}</Text>\n          <TextInput style={styles.input} value={street} onChangeText={setStreet} placeholder={t('profile:edit.street')} />\n        </View>\n        <View style={[styles.fieldGroup, { width: 120, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.houseNumber')}</Text>\n          <TextInput style={styles.input} value={houseNumber} onChangeText={setHouseNumber} placeholder={t('profile:edit.houseNumber')} />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.zipcode')}</Text>\n          <TextInput style={styles.input} value={zipcode} onChangeText={setZipcode} placeholder={t('profile:edit.zipcode')} />\n        </View>\n      </View>\n\n      {/* Personal */}\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.gender')}</Text>\n          <TextInput style={styles.input} value={gender} onChangeText={(v)=>setGender(v as any)} placeholder={t('profile:edit.genderPlaceholder')} />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.birthDate')}</Text>\n          <TextInput style={styles.input} value={birthDate} onChangeText={setBirthDate} placeholder={t('profile:edit.birthDatePlaceholder')} />\n        </View>\n      </View>\n\n      {/* Social */}\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.website')}</Text>\n          <TextInput style={styles.input} value={website} onChangeText={setWebsite} placeholder={'https://example.com'} autoCapitalize=\"none\" />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.linkedin')}</Text>\n          <TextInput style={styles.input} value={linkedin} onChangeText={setLinkedin} placeholder={'https://linkedin.com/in/...'} autoCapitalize=\"none\" />\n        </View>\n      </View>\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.facebook')}</Text>\n          <TextInput style={styles.input} value={facebook} onChangeText={setFacebook} placeholder={'https://facebook.com/...'} autoCapitalize=\"none\" />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.instagram')}</Text>\n          <TextInput style={styles.input} value={instagram} onChangeText={setInstagram} placeholder={'https://instagram.com/...'} autoCapitalize=\"none\" />\n        </View>\n      </View>\n\n      {/* Preferences */}\n      <View style={styles.fieldRow}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n          <Text style={styles.label}>{t('profile:edit.preferredLanguage')}</Text>\n          <TextInput style={styles.input} value={language} onChangeText={(v)=>setLanguage(v as any)} placeholder={t('profile:edit.preferredLanguagePlaceholder')} autoCapitalize=\"none\" />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n          <Text style={styles.label}>{t('profile:edit.interests')}</Text>\n          <TextInput style={styles.input} value={interests} onChangeText={setInterests} placeholder={t('profile:edit.interestsPlaceholder')} />\n        </View>\n      </View>\n\n      <View style={[styles.fieldRow]}>\n        <View style={[styles.fieldGroup, { flex: 1 }]}>\n        <Text style={styles.label}>{t('profile:banner.fields.city')}</Text>\n        <TextInput style={styles.input} value={city} onChangeText={setCity} placeholder={t('profile:banner.fields.city')} />\n        </View>\n        <View style={[styles.fieldGroup, { flex: 1, marginLeft: LAYOUT_CONSTANTS.SPACING.SM }]}>\n        <Text style={styles.label}>{t('profile:banner.fields.country')}</Text>\n        <TextInput style={styles.input} value={country} onChangeText={setCountry} placeholder={t('profile:banner.fields.country')} />\n        </View>\n      </View>\n\n      <View style={styles.fieldGroup}>\n        <Text style={styles.label}>{t('profile:banner.fields.bio')}</Text>\n        <TextInput style={[styles.input, { height: 100, textAlignVertical: 'top' }]} value={bio} onChangeText={setBio} placeholder={t('profile:banner.fields.bio')} multiline />\n      </View>\n      </ScrollContainer>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  pageWrapper: { flex: 1, backgroundColor: colors.background },\n  topBar: { height: 48, flexDirection: 'row', alignItems: 'center', paddingHorizontal: LAYOUT_CONSTANTS.SPACING.LG, borderBottomWidth: 1, borderBottomColor: colors.border },\n  backBtn: { flexDirection: 'row', alignItems: 'center', gap: 6, paddingVertical: 8 },\n  backText: { color: colors.textPrimary, fontSize: FontSizes.body },\n  container: { flex: 1 },\n  content: { padding: LAYOUT_CONSTANTS.SPACING.LG },\n  header: { fontSize: FontSizes.heading3, fontWeight: '700', color: colors.textPrimary, textAlign: 'right', marginBottom: LAYOUT_CONSTANTS.SPACING.LG },\n  fieldGroup: { marginBottom: LAYOUT_CONSTANTS.SPACING.MD },\n  fieldRow: { flexDirection: 'row-reverse', gap: LAYOUT_CONSTANTS.SPACING.SM },\n  label: { fontSize: FontSizes.small, color: colors.textSecondary, marginBottom: 6, textAlign: 'right' },\n  input: { backgroundColor: colors.surface, borderWidth: 1, borderColor: colors.inputBorder, borderRadius: 12, paddingHorizontal: 12, paddingVertical: Platform.OS === 'ios' ? 12 : 8, textAlign: 'right' },\n  avatarRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: LAYOUT_CONSTANTS.SPACING.MD, marginBottom: LAYOUT_CONSTANTS.SPACING.LG },\n  avatar: { width: 72, height: 72, borderRadius: 36, backgroundColor: colors.backgroundSecondary },\n  avatarPlaceholder: { alignItems: 'center', justifyContent: 'center' },\n  avatarButtons: { flexDirection: 'row-reverse', gap: LAYOUT_CONSTANTS.SPACING.SM, flexWrap: 'wrap', alignItems: 'center' },\n  smallButton: { backgroundColor: colors.secondary, borderRadius: 20, paddingHorizontal: 12, paddingVertical: 8, flexDirection: 'row-reverse', alignItems: 'center', gap: 6 },\n  smallButtonText: { color: colors.white, fontSize: FontSizes.small, fontWeight: '600' },\n  saveButtonFixed: { backgroundColor: colors.secondary, borderRadius: 24, paddingHorizontal: 16, paddingVertical: 10, flexDirection: 'row-reverse', alignItems: 'center', gap: 8 },\n  saveButtonDisabled: { opacity: 0.6 },\n  saveText: { color: colors.white, fontSize: FontSizes.body, fontWeight: '600' },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/FollowersScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCallback' is defined but never used.","line":8,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useCallback"},"fix":{"range":[603,616],"text":""},"desc":"Remove unused variable \"useCallback\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":47,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4606,4609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4606,4609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: List of followers or following for a given user, with ability to follow/unfollow from the list.\n// - Reached from: Profile/UserProfile screens via 'FollowersScreen'.\n// - Expects route params: `{ userId: string, type: 'followers' | 'following', title: string }`.\n// - Provides: Fetches users list and per-user follow state; navigates to 'UserProfileScreen' on item press.\n// - Reads from context: `useUser()` -> `selectedUser` to perform follow toggles.\n// - External deps/services: `followService` (get lists, follow/unfollow, stats).\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  FlatList,\n  Image,\n  TouchableOpacity,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useRoute, useNavigation, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport { \n  getFollowers, \n  getFollowing, \n  followUser, \n  unfollowUser,\n  getFollowStats \n} from '../utils/followService';\nimport { useUser } from '../stores/userStore';\n\ntype FollowersScreenRouteParams = {\n  userId: string;\n  type: 'followers' | 'following';\n  title: string;\n};\n\nexport default function FollowersScreen() {\n  const route = useRoute();\n  const navigation = useNavigation();\n  const { userId, type, title } = route.params as FollowersScreenRouteParams;\n  const { selectedUser } = useUser();\n  const [users, setUsers] = useState<CharacterType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [followStats, setFollowStats] = useState<Record<string, { isFollowing: boolean }>>({});\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    const loadUsersEffect = async () => {\n      await loadUsers();\n    };\n    loadUsersEffect();\n  }, [userId, type]);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    React.useCallback(() => {\n      const refreshUsers = async () => {\n        console.log('ğŸ‘¥ FollowersScreen - Screen focused, refreshing data...');\n        await loadUsers();\n        // Force re-render by updating refresh key\n        setRefreshKey(prev => prev + 1);\n      };\n      refreshUsers();\n    }, [userId, type])\n  );\n\n  const loadUsers = async () => {\n    setLoading(true);\n    try {\n      let userList: CharacterType[] = [];\n      \n      if (type === 'followers') {\n        userList = await getFollowers(userId);\n      } else {\n        userList = await getFollowing(userId);\n      }\n      \n      setUsers(userList);\n      \n      // Load follow stats for all users\n      const stats: Record<string, { isFollowing: boolean }> = {};\n      \n      for (const user of userList) {\n        if (selectedUser) {\n          const userStats = await getFollowStats(user.id, selectedUser.id);\n          stats[user.id] = { isFollowing: userStats.isFollowing };\n        }\n      }\n      \n      setFollowStats(stats);\n    } catch (error) {\n      console.error('Error loading users:', error);\n      Alert.alert('×©×’×™××”', '×©×’×™××” ×‘×˜×¢×™× ×ª ×”××©×ª××©×™×');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFollowToggle = async (targetUserId: string) => {\n    if (!selectedUser) {\n      Alert.alert('×©×’×™××”', '×™×© ×œ×”×ª×—×‘×¨ ×ª×—×™×œ×”');\n      return;\n    }\n\n    try {\n      const currentStats = followStats[targetUserId] || { isFollowing: false };\n      \n      if (currentStats.isFollowing) {\n        const success = await unfollowUser(selectedUser.id, targetUserId);\n        if (success) {\n          setFollowStats(prev => ({\n            ...prev,\n            [targetUserId]: { isFollowing: false }\n          }));\n          Alert.alert('×‘×™×˜×•×œ ×¢×§×™×‘×”', '×‘×™×˜×œ×ª ××ª ×”×¢×§×™×‘×” ×‘×”×¦×œ×—×”');\n        }\n      } else {\n        const success = await followUser(selectedUser.id, targetUserId);\n        if (success) {\n          setFollowStats(prev => ({\n            ...prev,\n            [targetUserId]: { isFollowing: true }\n          }));\n          Alert.alert('×¢×§×™×‘×”', '×”×ª×—×œ×ª ×œ×¢×§×•×‘ ×‘×”×¦×œ×—×”');\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Follow toggle error:', error);\n      Alert.alert('×©×’×™××”', '××™×¨×¢×” ×©×’×™××” ×‘×‘×™×¦×•×¢ ×”×¤×¢×•×œ×”');\n    }\n  };\n\n  const renderUserItem = ({ item }: { item: CharacterType }) => {\n    const currentStats = followStats[item.id] || { isFollowing: false };\n    const isCurrentUser = selectedUser?.id === item.id;\n\n    return (\n      <View style={styles.userItem}>\n        <TouchableOpacity \n          style={styles.userInfo}\n          onPress={() => {\n            (navigation as any).navigate('UserProfileScreen', {\n              userId: item.id,\n              userName: item.name,\n              characterData: item\n            });\n          }}\n        >\n          <Image source={{ uri: item.avatar }} style={styles.avatar} />\n          <View style={styles.userDetails}>\n            <Text style={styles.userName}>{item.name}</Text>\n            <Text style={styles.userBio} numberOfLines={2}>\n              {item.bio}\n            </Text>\n            <View style={styles.userStats}>\n              <Text style={styles.statText}>\n                {item.karmaPoints} × ×§×•×“×•×ª ×§××¨××”\n              </Text>\n              <Text style={styles.statText}>\n                {item.completedTasks} ××©×™××•×ª ×”×•×©×œ××•\n              </Text>\n            </View>\n          </View>\n        </TouchableOpacity>\n\n        {!isCurrentUser && (\n          <TouchableOpacity\n            style={[\n              styles.followButton,\n              currentStats.isFollowing && styles.followingButton\n            ]}\n            onPress={() => handleFollowToggle(item.id)}\n          >\n            <Text style={[\n              styles.followButtonText,\n              currentStats.isFollowing && styles.followingButtonText\n            ]}>\n              {currentStats.isFollowing ? '×¢×•×§×‘' : '×¢×§×•×‘'}\n            </Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons \n        name={type === 'followers' ? 'people-outline' : 'person-add-outline'} \n        size={60} \n        color={colors.textSecondary} \n      />\n      <Text style={styles.emptyStateTitle}>\n        {type === 'followers' ? '××™×Ÿ ×¢×•×§×‘×™× ×¢×“×™×™×Ÿ' : '×œ× ×¢×•×§×‘ ××—×¨×™ ××£ ××—×“ ×¢×“×™×™×Ÿ'}\n      </Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {type === 'followers' \n          ? '×›××©×¨ ×× ×©×™× ×™×ª×—×™×œ×• ×œ×¢×§×•×‘ ××—×¨×™×š, ×”× ×™×•×¤×™×¢×• ×›××Ÿ'\n          : '×”×ª×—×œ ×œ×¢×§×•×‘ ××—×¨×™ ×× ×©×™× ×›×“×™ ×œ×¨××•×ª ××ª ×”×¤×¢×™×œ×•×ª ×©×œ×”×'\n        }\n      </Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <TouchableOpacity \n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Ionicons name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>{title}</Text>\n        <View style={styles.headerSpacer} />\n      </View>\n\n      {/* Users List */}\n      <FlatList\n        data={users}\n        renderItem={renderUserItem}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContainer}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={renderEmptyState}\n        refreshing={loading}\n        onRefresh={loadUsers}\n      />\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  backButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  headerSpacer: {\n    width: 40,\n  },\n  listContainer: {\n    flexGrow: 1,\n  },\n  userItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  userInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  userDetails: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  userBio: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 6,\n    lineHeight: 16,\n  },\n  userStats: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  statText: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n  },\n  followButton: {\n    backgroundColor: colors.secondary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    minWidth: 60,\n    alignItems: 'center',\n  },\n  followingButton: {\n    backgroundColor: colors.backgroundSecondary,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  followButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n  },\n  followingButtonText: {\n    color: colors.textPrimary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 60,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/LandingSiteScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/Feature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/FloatingMenu.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3749,3752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3749,3752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file FloatingMenu Component\n * @description Floating navigation menu for quick section access\n * @module Landing/Components\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, ScrollView } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { logger } from '../../../utils/loggerService';\nimport type { FloatingMenuProps } from '../types';\nimport { MENU_ITEMS } from '../constants';\nimport { getMenuSizes } from '../utils';\nimport { styles } from '../styles';\n\n/**\n * FloatingMenu Component\n * Collapsible floating navigation menu with section links\n * Features minimized/expanded states and active section highlighting\n * \n * @component\n * @example\n * ```tsx\n * <FloatingMenu \n *   onNavigate={(section) => scrollToSection(section)} \n *   activeSection=\"hero\" \n * />\n * ```\n */\nexport const FloatingMenu: React.FC<FloatingMenuProps> = ({ \n  onNavigate, \n  activeSection \n}) => {\n  const { t } = useTranslation('landing');\n  const [isMinimized, setIsMinimized] = useState(false);\n  const menuSizes = getMenuSizes();\n\n  // Minimized state - Show only menu icon button\n  if (isMinimized) {\n    return (\n      <View style={styles.floatingMenuMinimized}>\n        <TouchableOpacity\n          onPress={() => setIsMinimized(false)}\n          style={styles.menuToggleButton}\n          accessibilityLabel={t('menu.accessibility.open')}\n          accessibilityRole=\"button\"\n        >\n          <Ionicons \n            name=\"menu-outline\" \n            size={menuSizes.iconSize * 1.2} \n            color={colors.info} \n          />\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  // Expanded state - Show full menu\n  return (\n    <>\n      {/* Transparent overlay to close menu when clicked */}\n      <TouchableOpacity\n        style={styles.menuOverlay}\n        activeOpacity={1}\n        onPress={() => setIsMinimized(true)}\n        accessibilityLabel={t('menu.accessibility.close')}\n        accessibilityRole=\"button\"\n      />\n      \n      {/* Floating menu container */}\n      <View style={styles.floatingMenu}>\n        {/* Menu header with title and close button */}\n        <TouchableOpacity\n          onPress={() => setIsMinimized(true)}\n          style={styles.menuHeader}\n          activeOpacity={0.7}\n          accessibilityLabel={t('menu.accessibility.close')}\n          accessibilityRole=\"button\"\n        >\n          <Text style={[styles.menuTitle, { fontSize: menuSizes.titleSize }]}>\n            {t('menu.title')}\n          </Text>\n          <Ionicons \n            name=\"chevron-forward-outline\" \n            size={menuSizes.iconSize * 0.9} \n            color={colors.textSecondary} \n          />\n        </TouchableOpacity>\n        \n        {/* Scrollable menu items */}\n        <ScrollView \n          style={styles.menuItems} \n          showsVerticalScrollIndicator={false}\n        >\n          {MENU_ITEMS.map((item) => (\n            <TouchableOpacity\n              key={item.id}\n              style={[\n                styles.menuItem,\n                { \n                  paddingVertical: menuSizes.padding, \n                  paddingHorizontal: menuSizes.padding * 1.5 \n                },\n                activeSection === item.id && styles.menuItemActive,\n              ]}\n              onPress={() => {\n                onNavigate(item.id);\n                logger.info('FloatingMenu', `Navigate to ${item.id}`);\n              }}\n              activeOpacity={0.7}\n              accessibilityLabel={t('menu.accessibility.navigateTo', { label: t(`menu.${item.id}`) })}\n              accessibilityRole=\"button\"\n            >\n              <Ionicons\n                name={item.icon as any}\n                size={menuSizes.iconSize}\n                color={activeSection === item.id ? colors.info : colors.textSecondary}\n                style={styles.menuItemIcon}\n              />\n              <Text \n                style={[\n                  styles.menuItemText,\n                  { fontSize: menuSizes.fontSize },\n                  activeSection === item.id && styles.menuItemTextActive,\n                ]}\n              >\n                {t(`menu.${item.id}`)}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n    </>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/HeroSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":86,"column":25,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":86,"endColumn":77}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file HeroSection Component\n * @description Hero section with animated welcome message and CTAs\n * @module Landing/Components\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport { View, Text, TouchableOpacity, Image, Animated, Linking } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../../../globals/colors';\nimport { logger } from '../../../utils/loggerService';\nimport type { HeroSectionProps } from '../types';\nimport { IS_MOBILE_WEB, ANIMATION_DURATION, WHATSAPP_URL } from '../constants';\nimport { styles } from '../styles';\n\n/**\n * HeroSection Component\n * Landing page hero with animated entrance, logo, tagline, and CTAs\n * Features decorative circles and gradient background\n * \n * @component\n * @example\n * ```tsx\n * <HeroSection onDonate={() => setDonationModalVisible(true)} />\n * ```\n */\nexport const HeroSection: React.FC<HeroSectionProps> = ({ onDonate }) => {\n  const { t } = useTranslation('landing');\n  // Animation setup for fade-in and slide-up effect\n  const heroAnimation = useRef(new Animated.Value(0)).current;\n  \n  useEffect(() => {\n    Animated.timing(heroAnimation, {\n      toValue: 1,\n      duration: ANIMATION_DURATION.HERO,\n      delay: ANIMATION_DURATION.HERO_DELAY,\n      useNativeDriver: false,\n    }).start();\n  }, [heroAnimation]);\n\n  /**\n   * Handle WhatsApp button click\n   * Logs analytics and opens WhatsApp with predefined number\n   */\n  const handleWhatsAppClick = () => {\n    logger.info('LandingSite', 'Click - whatsapp direct');\n    Linking.openURL(WHATSAPP_URL);\n  };\n\n  return (\n    <View style={styles.hero}>\n      <View style={styles.heroGradient}>\n        {/* Decorative background circles */}\n        <View style={styles.decoCircle1} />\n        <View style={styles.decoCircle2} />\n        <View style={styles.decoCircle3} />\n        \n        {/* Animated hero content */}\n        <Animated.View \n          style={[\n            styles.heroContent,\n            {\n              opacity: heroAnimation,\n              transform: [{\n                translateY: heroAnimation.interpolate({\n                  inputRange: [0, 1],\n                  outputRange: [20, 0]\n                })\n              }]\n            }\n          ]}\n        >\n          {/* Welcome tagline with mixed font sizes */}\n          <Text style={styles.welcomeTitle}>\n            <Text style={styles.welcomeTitleLarge}>{t('hero.welcomeTitle.large1')} </Text>\n            <Text style={styles.welcomeTitleSmall}> {t('hero.welcomeTitle.small1')}  </Text>\n            <Text style={styles.welcomeTitleLarge}>{t('hero.welcomeTitle.large2')} </Text>\n            <Text style={styles.welcomeTitleSmall}> {t('hero.welcomeTitle.small2')} </Text>\n          </Text>\n          \n          {/* Logo container */}\n          <View style={styles.logoContainer}>\n            <View style={styles.logoBackground}>\n              <Image \n                source={require('../../../assets/images/new_logo_black.png')} \n                style={styles.logo} \n                resizeMode=\"contain\"\n                accessible={true}\n                accessibilityLabel=\"Karma Community Logo\"\n              />\n            </View>\n          </View>\n          \n          {/* App title */}\n          <Text style={styles.title}>Karma Community</Text>\n          \n          {/* Core values row */}\n          <View style={styles.subtitlesRow}>\n            <View style={styles.subtitleItem}>\n              <Ionicons \n                name=\"people-circle-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.info} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.unity')}</Text>\n            </View>\n            <View style={[styles.subtitleItem, styles.subtitleItemGreen]}>\n              <Ionicons \n                name=\"eye-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.greenBright} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.transparency')}</Text>\n            </View>\n            <View style={styles.subtitleItem}>\n              <Ionicons \n                name=\"checkmark-circle-outline\" \n                size={IS_MOBILE_WEB ? 18 : 24} \n                color={colors.info} \n                style={styles.subtitleIcon} \n              />\n              <Text style={styles.subtitleText}>{t('hero.values.order')}</Text>\n            </View>\n          </View>\n          \n          {/* Description */}\n          <Text style={styles.subtitle}>\n            {t('hero.subtitle')}\n          </Text>\n\n          {/* WhatsApp CTA button */}\n          <View style={styles.ctaRow}>\n            <TouchableOpacity \n              style={[styles.contactButton, { backgroundColor: colors.success }]} \n              onPress={handleWhatsAppClick}\n              activeOpacity={0.8}\n              accessibilityLabel={t('hero.accessibility.whatsapp')}\n              accessibilityRole=\"button\"\n            >\n              <Ionicons \n                name=\"logo-whatsapp\" \n                color={colors.white} \n                size={IS_MOBILE_WEB ? 14 : 18} \n              />\n              <Text style={styles.contactButtonText}>{t('hero.whatsappButton')} </Text>\n            </TouchableOpacity>\n          </View>\n          \n          {/* Donation CTA button */}\n          <TouchableOpacity\n            style={[styles.donationCtaButton, { backgroundColor: colors.greenBright }]}\n            onPress={onDonate}\n            activeOpacity={0.8}\n            accessibilityLabel={t('hero.accessibility.donate')}\n            accessibilityRole=\"button\"\n          >\n            <Ionicons \n              name=\"heart\" \n              size={IS_MOBILE_WEB ? 18 : 24} \n              color={colors.white} \n            />\n            <Text style={styles.donationCtaButtonText}>{t('hero.donateButton')}</Text>\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    </View>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/LazySection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1588,1591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1588,1591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1687,1690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1687,1690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file LazySection Component\n * @description Lazy loading wrapper for sections with intersection observer\n * @module Landing/Components\n */\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { View, ActivityIndicator } from 'react-native';\nimport colors from '../../../globals/colors';\nimport type { LazySectionProps } from '../types';\nimport { IS_WEB, LAZY_LOADING } from '../constants';\n\n/**\n * LazySection Component\n * Wrapper that implements lazy loading for section components\n * On web, sections load immediately to ensure DOM elements exist for navigation\n * On native, uses IntersectionObserver for performance optimization\n * \n * @component\n * @example\n * ```tsx\n * <LazySection section={ProblemsSection} />\n * ```\n */\nexport const LazySection: React.FC<LazySectionProps> = ({ \n  section: SectionComponent, \n  ...props \n}) => {\n  // On web, load immediately to ensure DOM elements exist for navigation\n  const [isVisible, setIsVisible] = useState(IS_WEB);\n  const ref = useRef<View>(null);\n\n  useEffect(() => {\n    // On web, sections are loaded immediately\n    if (IS_WEB) {\n      return;\n    }\n\n    // For native platforms, use lazy loading with IntersectionObserver\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        // Start loading when the section is 100px away from viewport\n        rootMargin: LAZY_LOADING.ROOT_MARGIN,\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current as any);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current as any);\n      }\n    };\n  }, []);\n\n  return (\n    <View ref={ref} style={{ minHeight: LAZY_LOADING.MIN_HEIGHT }}>\n      {isVisible ? (\n        <SectionComponent {...props} />\n      ) : (\n        <ActivityIndicator \n          size=\"large\" \n          color={colors.info} \n          style={{ marginVertical: 50 }} \n        />\n      )}\n    </View>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/Section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/styles/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2794,2797],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2794,2797],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file Landing styles\n * @description Shared StyleSheet for Landing page components\n * @module Landing/Styles\n */\n\nimport { StyleSheet } from 'react-native';\nimport colors from '../../../globals/colors';\nimport { IS_WEB, IS_MOBILE_WEB, IS_TABLET, SCREEN_WIDTH } from '../constants';\n\nconst styles = StyleSheet.create({\n  // Section\n  section: {\n    paddingHorizontal: IS_MOBILE_WEB ? 16 : (IS_WEB ? (IS_TABLET ? 40 : 24) : 40),\n    paddingVertical: IS_MOBILE_WEB ? 24 : (IS_WEB ? (IS_TABLET ? 60 : 40) : 50),\n    width: '100%',\n    alignSelf: 'center',\n    maxWidth: IS_TABLET ? 1200 : '100%',\n  },\n  sectionTitle: {\n    fontSize: IS_MOBILE_WEB ? 20 : (IS_WEB ? (IS_TABLET ? 36 : 28) : 42),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: IS_MOBILE_WEB ? 6 : 8,\n    letterSpacing: -0.5,\n  },\n  titleDecorator: {\n    width: IS_MOBILE_WEB ? 40 : 60,\n    height: IS_MOBILE_WEB ? 3 : 4,\n    backgroundColor: colors.info,\n    borderRadius: 2,\n    alignSelf: 'center',\n    marginBottom: IS_MOBILE_WEB ? 16 : 24,\n  },\n  sectionSubtitle: {\n    fontSize: IS_MOBILE_WEB ? 13 : (IS_WEB ? (IS_TABLET ? 18 : 16) : 22),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: IS_MOBILE_WEB ? 12 : (IS_WEB ? 20 : 24),\n    lineHeight: IS_MOBILE_WEB ? 18 : (IS_WEB ? 26 : 30),\n    fontWeight: '500',\n  },\n\n  // Feature\n  feature: {\n    flex: 1,\n    minWidth: IS_MOBILE_WEB ? 140 : 280,\n    maxWidth: IS_MOBILE_WEB ? '100%' : 350,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    borderRadius: IS_MOBILE_WEB ? 12 : 20,\n    padding: IS_MOBILE_WEB ? 16 : 28,\n    alignItems: 'center',\n    margin: IS_MOBILE_WEB ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  featureEmoji: {\n    fontSize: IS_MOBILE_WEB ? 32 : 48,\n    marginBottom: IS_MOBILE_WEB ? 10 : 16,\n  },\n  featureTitle: {\n    fontSize: IS_MOBILE_WEB ? 16 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: IS_MOBILE_WEB ? 8 : 12,\n    letterSpacing: -0.3,\n  },\n  featureText: {\n    fontSize: IS_MOBILE_WEB ? 13 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: IS_MOBILE_WEB ? 18 : 28,\n    fontWeight: '400',\n  },\n\n  // Floating menu\n  menuOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    zIndex: 999,\n  },\n  floatingMenu: {\n    position: 'absolute',\n    right: IS_MOBILE_WEB ? 8 : 20,\n    top: IS_MOBILE_WEB ? 60 : 100,\n    minWidth: 150,\n    width: IS_MOBILE_WEB ? '14%' : '10%',\n    maxHeight: (IS_MOBILE_WEB ? '70vh' : (IS_WEB ? '80vh' : 600)) as any,\n    backgroundColor: colors.white,\n    borderRadius: IS_MOBILE_WEB ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 20,\n    elevation: 10,\n    zIndex: 1000,\n    overflow: 'hidden',\n  },\n  floatingMenuMinimized: {\n    position: 'absolute',\n    right: IS_MOBILE_WEB ? 8 : 20,\n    top: IS_MOBILE_WEB ? 60 : 100,\n    width: IS_MOBILE_WEB ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03,\n    height: IS_MOBILE_WEB ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03,\n    borderRadius: IS_MOBILE_WEB ? SCREEN_WIDTH * 0.025 : SCREEN_WIDTH * 0.015,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    elevation: 8,\n    zIndex: 1000,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuToggleButton: {\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: SCREEN_WIDTH * 0.01,\n    paddingVertical: SCREEN_WIDTH * 0.008,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  menuTitle: {\n    fontWeight: '800',\n    color: colors.textPrimary,\n    letterSpacing: -0.3,\n  },\n  menuItems: {\n    flex: 1,\n    paddingVertical: SCREEN_WIDTH * 0.006,\n  },\n  menuItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: SCREEN_WIDTH * 0.006,\n    borderRightWidth: 3,\n    borderRightColor: 'transparent',\n  },\n  menuItemActive: {\n    backgroundColor: colors.backgroundTertiary,\n    borderRightColor: colors.info,\n  },\n  menuItemIcon: {\n    marginLeft: SCREEN_WIDTH * 0.002,\n  },\n  menuItemText: {\n    fontWeight: '600',\n    color: colors.textSecondary,\n    flex: 1,\n    textAlign: 'right',\n  },\n  menuItemTextActive: {\n    color: colors.info,\n    fontWeight: '700',\n  },\n\n  // Hero\n  hero: {\n    width: '100%',\n    overflow: 'hidden',\n  },\n  heroGradient: {\n    backgroundColor: colors.backgroundTertiary,\n    paddingTop: IS_MOBILE_WEB ? 40 : (IS_WEB ? 60 : 80),\n    paddingBottom: IS_MOBILE_WEB ? 30 : (IS_WEB ? 50 : 70),\n    paddingHorizontal: IS_MOBILE_WEB ? 16 : (IS_WEB ? 20 : 40),\n    position: 'relative',\n  },\n  heroContent: {\n    alignItems: 'center',\n    zIndex: 2,\n  },\n  welcomeTitle: {\n    fontSize: IS_MOBILE_WEB ? 28 : (IS_WEB ? (IS_TABLET ? 56 : 42) : 64),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: IS_MOBILE_WEB ? 16 : (IS_WEB ? 24 : 32),\n    letterSpacing: -1,\n    lineHeight: IS_MOBILE_WEB ? 34 : (IS_WEB ? (IS_TABLET ? 64 : 50) : 72),\n  },\n  welcomeTitleLarge: {\n    fontSize: IS_MOBILE_WEB ? 32 : (IS_WEB ? (IS_TABLET ? 64 : 48) : 72),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  welcomeTitleSmall: {\n    fontSize: IS_MOBILE_WEB ? 24 : (IS_WEB ? (IS_TABLET ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  logoContainer: {\n    position: 'relative',\n    marginBottom: IS_MOBILE_WEB ? 12 : (IS_WEB ? 20 : 28),\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: IS_MOBILE_WEB ? 140 : (IS_WEB ? (IS_TABLET ? 240 : 220) : 260),\n    overflow: 'hidden',\n  },\n  logoBackground: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  logo: {\n    width: IS_MOBILE_WEB ? 180 : (IS_WEB ? (IS_TABLET ? 320 : 280) : 360),\n    height: IS_MOBILE_WEB ? 180 : (IS_WEB ? (IS_TABLET ? 320 : 280) : 360),\n    opacity: 0.35,\n  },\n  title: {\n    fontSize: IS_MOBILE_WEB ? 24 : (IS_WEB ? (IS_TABLET ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: IS_MOBILE_WEB ? 12 : (IS_WEB ? 16 : 20),\n    letterSpacing: -0.5,\n  },\n  subtitlesRow: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: IS_MOBILE_WEB ? 12 : (IS_WEB ? (IS_TABLET ? 28 : 20) : 32),\n    marginBottom: IS_MOBILE_WEB ? 8 : (IS_WEB ? 12 : 16),\n    flexWrap: 'wrap',\n  },\n  subtitleItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: IS_MOBILE_WEB ? 6 : (IS_WEB ? (IS_TABLET ? 12 : 10) : 14),\n    paddingHorizontal: IS_MOBILE_WEB ? 8 : (IS_WEB ? (IS_TABLET ? 16 : 12) : 20),\n    paddingVertical: IS_MOBILE_WEB ? 6 : (IS_WEB ? (IS_TABLET ? 10 : 8) : 12),\n    borderRadius: IS_MOBILE_WEB ? 12 : (IS_WEB ? (IS_TABLET ? 20 : 16) : 24),\n    backgroundColor: colors.backgroundTertiary,\n    borderWidth: 1,\n    borderColor: colors.info + '30',\n  },\n  subtitleItemGreen: {\n    backgroundColor: colors.greenBright + '18',\n    borderColor: colors.greenBright + '50',\n  },\n  subtitleIcon: {\n    marginTop: IS_MOBILE_WEB ? 1 : 2,\n  },\n  subtitleText: {\n    fontSize: IS_MOBILE_WEB ? 12 : (IS_WEB ? (IS_TABLET ? 24 : 18) : 28),\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    letterSpacing: -0.3,\n  },\n  subtitle: {\n    fontSize: IS_MOBILE_WEB ? 14 : (IS_WEB ? (IS_TABLET ? 20 : 18) : 24),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: IS_MOBILE_WEB ? 6 : (IS_WEB ? 8 : 12),\n    maxWidth: IS_MOBILE_WEB ? '95%' : (IS_TABLET ? '70%' : '90%'),\n    lineHeight: IS_MOBILE_WEB ? 20 : (IS_WEB ? 28 : 32),\n    fontWeight: '500',\n  },\n  ctaRow: {\n    flexDirection: 'row',\n    gap: IS_MOBILE_WEB ? 10 : 16,\n    marginTop: IS_MOBILE_WEB ? 24 : 40,\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n  },\n  contactButton: {\n    flexDirection: 'row',\n    gap: IS_MOBILE_WEB ? 8 : 12,\n    alignItems: 'center',\n    paddingHorizontal: IS_MOBILE_WEB ? 16 : 28,\n    paddingVertical: IS_MOBILE_WEB ? 12 : 18,\n    borderRadius: IS_MOBILE_WEB ? 12 : 16,\n    minWidth: IS_MOBILE_WEB ? 140 : 200,\n    justifyContent: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    elevation: 6,\n  },\n  contactButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: IS_MOBILE_WEB ? 13 : 18,\n    letterSpacing: 0.3,\n  },\n  donationCtaButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: IS_MOBILE_WEB ? 8 : 12,\n    backgroundColor: colors.secondary,\n    paddingVertical: IS_MOBILE_WEB ? 14 : 18,\n    paddingHorizontal: IS_MOBILE_WEB ? 24 : 32,\n    borderRadius: IS_MOBILE_WEB ? 12 : 16,\n    marginTop: IS_MOBILE_WEB ? 20 : 28,\n    shadowColor: colors.secondary,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 6,\n  },\n  donationCtaButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: IS_MOBILE_WEB ? 16 : 20,\n    letterSpacing: 0.3,\n  },\n});\n\nexport { styles };\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1523,1526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1523,1526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2314,2317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2314,2317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2397,2400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2397,2400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @file Landing Page Type Definitions\n * @description TypeScript interfaces and types for the Karma Community landing page\n * @module Landing/Types\n */\n\n/**\n * Statistics data displayed on the landing page\n * @interface LandingStats\n */\nexport interface LandingStats {\n  /** Total number of visits to the site */\n  siteVisits: number;\n\n  /** Total amount of money donated through the platform */\n  totalMoneyDonated: number;\n\n  /** Total number of registered users */\n  totalUsers: number;\n\n  /** Number of physical items donated */\n  itemDonations: number;\n\n  /** Number of completed ride-sharing trips */\n  completedRides: number;\n\n  /** Total amount from recurring donation subscriptions */\n  recurringDonationsAmount: number;\n\n  /** Number of unique donors who contributed */\n  uniqueDonors: number;\n\n  /** Number of completed volunteer tasks */\n  completedTasks: number;\n}\n\n/**\n * Navigation menu item configuration\n * @interface MenuItem\n */\nexport interface MenuItem {\n  /** Unique identifier for the menu item (used as translation key) */\n  id: string;\n\n  /** Ionicons icon name */\n  icon: string;\n}\n\n/**\n * Props for section components\n * @interface SectionProps\n */\nexport interface SectionProps {\n  /** Optional unique section identifier for navigation */\n  id?: string;\n\n  /** Section heading title */\n  title: string;\n\n  /** Optional subtitle text */\n  subtitle?: string;\n\n  /** Child components to render within the section */\n  children?: React.ReactNode;\n\n  /** Additional style overrides */\n  style?: any;\n}\n\n/**\n * Props for feature card component\n * @interface FeatureProps\n */\nexport interface FeatureProps {\n  /** Emoji icon for visual representation */\n  emoji: string;\n\n  /** Feature title */\n  title: string;\n\n  /** Feature description text */\n  text: string;\n\n  /** Apply green accent styling */\n  greenAccent?: boolean;\n}\n\n/**\n * Props for floating navigation menu\n * @interface FloatingMenuProps\n */\nexport interface FloatingMenuProps {\n  /** Callback when navigating to a section */\n  onNavigate: (section: string) => void;\n\n  /** Currently active section ID */\n  activeSection: string | null;\n}\n\n/**\n * Props for lazy-loaded section wrapper\n * @interface LazySectionProps\n */\nexport interface LazySectionProps {\n  /** Section component to render */\n  section: React.ComponentType<any>;\n\n  /** Additional props to pass to the section component */\n  [key: string]: any;\n}\n\n/**\n * Props for hero section\n * @interface HeroSectionProps\n */\nexport interface HeroSectionProps {\n  /** Callback when donate button is clicked */\n  onDonate: () => void;\n}\n\n/**\n * Props for stats section\n * @interface StatsSectionProps\n */\nexport interface StatsSectionProps {\n  /** Statistics data to display */\n  stats: LandingStats;\n\n  /** Loading state indicator */\n  isLoadingStats: boolean;\n\n  /** Callback to navigate to app */\n  onGoToApp: () => void;\n}\n\n/**\n * Props for donation modal\n * @interface DonationModalProps\n */\nexport interface DonationModalProps {\n  /** Modal visibility state */\n  visible: boolean;\n\n  /** Callback to close the modal */\n  onClose: () => void;\n}\n\n/**\n * Props for stats detail modal\n * @interface StatsDetailModalProps\n */\nexport interface StatsDetailModalProps {\n  /** Modal visibility state */\n  visible: boolean;\n\n  /** Callback to close the modal */\n  onClose: () => void;\n\n  /** Statistics data to display */\n  stats: LandingStats;\n}\n\n/**\n * Props for FAQ item component\n * @interface FAQItemProps\n */\nexport interface FAQItemProps {\n  /** Question text */\n  question: string;\n\n  /** Answer text */\n  answer: string;\n\n  /** Optional icon name */\n  icon?: string;\n}\n\n/**\n * Props for \"Who Is It For\" section\n * @interface WhoIsItForSectionProps\n */\nexport interface WhoIsItForSectionProps {\n  /** Callback when donate button is clicked */\n  onDonate: () => void;\n}\n\n/**\n * Props for Vision section\n * @interface VisionSectionProps\n */\nexport interface VisionSectionProps {\n  /** Callback to navigate to app */\n  onGoToApp: () => void;\n}\n\n/**\n * Responsive menu size configuration\n * @interface MenuSizes\n */\nexport interface MenuSizes {\n  /** Font size for menu items */\n  fontSize: number;\n\n  /** Icon size for menu items */\n  iconSize: number;\n\n  /** Title font size */\n  titleSize: number;\n\n  /** Padding for menu items */\n  padding: number;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/Landing/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/LandingSiteScreen.legacy.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Suspense' is defined but never used.","line":3,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Suspense"},"fix":{"range":[135,145],"text":""},"desc":"Remove unused variable \"Suspense\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lazy' is defined but never used.","line":3,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":73,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"lazy"},"fix":{"range":[145,151],"text":""},"desc":"Remove unused variable \"lazy\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":4,"column":148,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":153,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[313,320],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FontSizes' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"FontSizes"},"fix":{"range":[432,482],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":110,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":113,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3081,3084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3081,3084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6737,6740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6737,6740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7345,7348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7345,7348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7368,7371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7368,7371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":214,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8305,8308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8305,8308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":219,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8404,8407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8404,8407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":272,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":272,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onGoToApp' is defined but never used.","line":313,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":313,"endColumn":72},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":326,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13154,13170],"text":"&quot;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13154,13170],"text":"&ldquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13154,13170],"text":"&#34;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13154,13170],"text":"&rdquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":326,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13154,13170],"text":"\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":330,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13481,13528],"text":"&quot;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13481,13528],"text":"&ldquo;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13481,13528],"text":"&#34;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13481,13528],"text":"&rdquo;×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":330,"column":86,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[13481,13528],"text":"\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":379,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":379,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15476,15479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15476,15479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":404,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":404,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16315,16318],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16315,16318],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":557,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":557,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22033,22036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22033,22036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onGoToApp' is defined but never used.","line":660,"column":131,"nodeType":"Identifier","messageId":"unusedVar","endLine":660,"endColumn":140},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":713,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[28508,28525],"text":"×©&quot;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[28508,28525],"text":"×©&ldquo;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[28508,28525],"text":"×©&#34;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[28508,28525],"text":"×©&rdquo;×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":826,"column":132,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&quot;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&ldquo;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&#34;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&rdquo;×¨×©×ª×•×ª\" ×”××œ×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":826,"column":138,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&quot; ×”××œ×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&ldquo; ×”××œ×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&#34; ×”××œ×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[35137,35293],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&rdquo; ×”××œ×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":984,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":984,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[44026,44029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[44026,44029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1016,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1016,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[45451,45454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[45451,45454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isAuthenticated' is assigned a value but never used.","line":1017,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":1017,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isGuestMode' is assigned a value but never used.","line":1017,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":1017,"endColumn":39},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1070,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1070,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1071,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1071,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1072,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1072,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1073,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1073,"endColumn":78},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1074,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1074,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1085,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1085,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[48058,48061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[48058,48061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1178,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1178,"endColumn":79},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1179,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1179,"endColumn":76},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1180,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1180,"endColumn":80},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1189,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1189,"endColumn":80},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InstagramSection' is assigned a value but never used.","line":1195,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1195,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1289,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1289,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[56693,56696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[56693,56696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1407,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1407,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[62937,62940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[62937,62940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1595,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1595,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[70489,70492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[70489,70492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2690,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2690,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[106345,106348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[106345,106348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2690,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2690,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[106370,106373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[106370,106373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":43,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// LandingSiteScreen.tsx\n// Web-only marketing landing page for KarmaCommunity\nimport React, { useEffect, useState, useRef, useCallback, Suspense, lazy } from 'react';\nimport { Platform, View, Text, StyleSheet, Image, TouchableOpacity, Linking, Dimensions, ActivityIndicator, ScrollView, Animated, Modal, FlatList, Alert } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons } from '@expo/vector-icons';\nimport { logger } from '../utils/loggerService';\nimport ScrollContainer from '../components/ScrollContainer';\nimport ScreenWrapper from '../components/ScreenWrapper';\nimport { EnhancedStatsService } from '../utils/statsService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/dbConfig';\nimport { useWebMode } from '../stores/webModeStore';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport AdminHierarchyTree from '../components/AdminHierarchyTree';\n\ninterface LandingStats {\n  siteVisits: number;\n  totalMoneyDonated: number;\n  totalUsers: number;\n  itemDonations: number;\n  completedRides: number;\n  recurringDonationsAmount: number;\n  uniqueDonors: number;\n  completedTasks: number;\n}\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst isWeb = Platform.OS === 'web';\nconst isTablet = SCREEN_WIDTH > 768;\nconst isMobileWeb = isWeb && SCREEN_WIDTH <= 768;\n\nconst getSectionElement = (sectionId: string): HTMLElement | null => {\n  if (!isWeb || typeof document === 'undefined') {\n    return null;\n  }\n  const domId = sectionId.startsWith('section-') ? sectionId : `section-${sectionId}`;\n  return (\n    document.getElementById(domId) ??\n    (document.querySelector(`[data-nativeid=\"${domId}\"]`) as HTMLElement | null)\n  );\n};\n\n// Calculate responsive sizes for floating menu based on screen width\nconst getMenuSizes = () => {\n  if (isMobileWeb) {\n    // Mobile web - smaller menu\n    const menuWidth = SCREEN_WIDTH * 0.12; // 12% of screen width for mobile\n    return {\n      fontSize: Math.max(9, menuWidth * 0.12), // Smaller font for mobile\n      iconSize: Math.max(12, menuWidth * 0.15), // Smaller icons\n      titleSize: Math.max(10, menuWidth * 0.13), // Smaller title\n      padding: Math.max(6, menuWidth * 0.08), // Smaller padding\n    };\n  }\n  // Desktop/Tablet - original sizes\n  const menuWidth = SCREEN_WIDTH * 0.1; // 10% of screen width\n  return {\n    fontSize: Math.max(10, menuWidth * 0.065), // ~6.5% of menu width, min 10px\n    iconSize: Math.max(14, menuWidth * 0.08), // ~8% of menu width, min 14px\n    titleSize: Math.max(12, menuWidth * 0.075), // ~7.5% of menu width, min 12px\n    padding: Math.max(8, menuWidth * 0.05), // ~5% of menu width, min 8px\n  };\n};\n\nconst Section: React.FC<{ id?: string; title: string; subtitle?: string; children?: React.ReactNode, style?: any }> = ({ id, title, subtitle, children, style }) => (\n  <View\n    style={[styles.section, style]}\n    nativeID={id}\n    {...(isWeb && id ? { id } : {})}\n  >\n    <Text style={styles.sectionTitle}>{title}</Text>\n    <View style={styles.titleDecorator} />\n    {subtitle ? <Text style={styles.sectionSubtitle}>{subtitle}</Text> : null}\n    {children || null}\n  </View>\n);\n\nconst Feature: React.FC<{ emoji: string; title: string; text: string; greenAccent?: boolean }> = ({ emoji, title, text, greenAccent }) => (\n  <View style={[styles.feature, greenAccent && { backgroundColor: colors.greenBright + '12', borderColor: colors.greenBright + '30' }]}>\n    <Text style={styles.featureEmoji}>{emoji}</Text>\n    <Text style={styles.featureTitle}>{title}</Text>\n    <Text style={styles.featureText}>{text}</Text>\n  </View>\n);\n\n// Floating Navigation Menu Component\nconst FloatingMenu: React.FC<{\n  onNavigate: (section: string) => void;\n  activeSection: string | null;\n}> = ({ onNavigate, activeSection }) => {\n  const [isMinimized, setIsMinimized] = useState(false);\n  const menuSizes = getMenuSizes();\n\n  const menuItems = [\n    { id: 'stats', label: '×‘××¡×¤×¨×™×', icon: 'stats-chart-outline' },\n    { id: 'vision', label: '×”×—×–×•×Ÿ', icon: 'bulb-outline' },\n    { id: 'problems', label: '×”×‘×¢×™×•×ª', icon: 'alert-circle-outline' },\n    { id: 'features', label: '×ª×›×•× ×•×ª', icon: 'apps-outline' },\n    { id: 'about', label: '××•×“×•×ª', icon: 'information-circle-outline' },\n    { id: 'how', label: '××™×š ×–×” ×¢×•×‘×“', icon: 'help-circle-outline' },\n    { id: 'who', label: '×œ××™ ×–×” ××ª××™×', icon: 'people-outline' },\n    { id: 'values', label: '×¢×¨×›×™×', icon: 'heart-outline' },\n    { id: 'hierarchy', label: '××‘× ×” × ×™×”×•×œ', icon: 'git-network-outline' },\n    { id: 'roadmap', label: '××¤×ª ×“×¨×›×™×', icon: 'map-outline' },\n    { id: 'contact', label: '×™×¦×™×¨×ª ×§×©×¨', icon: 'mail-outline' },\n    { id: 'faq', label: '×©××œ×•×ª × ×¤×•×¦×•×ª', icon: 'chatbubble-ellipses-outline' },\n  ];\n\n  if (isMinimized) {\n    return (\n      <View style={styles.floatingMenuMinimized}>\n        <TouchableOpacity\n          onPress={() => setIsMinimized(false)}\n          style={styles.menuToggleButton}\n        >\n          <Ionicons name=\"menu-outline\" size={menuSizes.iconSize * 1.2} color={colors.info} />\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <>\n      {/* Overlay ×©×§×•×£ ×©×¡×•×’×¨ ××ª ×”×ª×¤×¨×™×˜ ×›××©×¨ ×œ×•×—×¦×™× ×¢×œ×™×• */}\n      <TouchableOpacity\n        style={styles.menuOverlay}\n        activeOpacity={1}\n        onPress={() => setIsMinimized(true)}\n      />\n      {/* ×”×ª×¤×¨×™×˜ ×”×¤×ª×•×— */}\n      <View style={styles.floatingMenu}>\n        <TouchableOpacity\n          onPress={() => setIsMinimized(true)}\n          style={styles.menuHeader}\n          activeOpacity={0.7}\n        >\n          <Text style={[styles.menuTitle, { fontSize: menuSizes.titleSize }]}>×ª×¤×¨×™×˜ × ×™×•×•×˜</Text>\n          <Ionicons name=\"chevron-forward-outline\" size={menuSizes.iconSize * 0.9} color={colors.textSecondary} />\n        </TouchableOpacity>\n        <ScrollView style={styles.menuItems} showsVerticalScrollIndicator={false}>\n          {menuItems.map((item) => (\n            <TouchableOpacity\n              key={item.id}\n              style={[\n                styles.menuItem,\n                { paddingVertical: menuSizes.padding, paddingHorizontal: menuSizes.padding * 1.5 },\n                activeSection === item.id && styles.menuItemActive,\n              ]}\n              onPress={() => {\n                onNavigate(item.id);\n                logger.info('FloatingMenu', `Navigate to ${item.id}`);\n              }}\n              activeOpacity={0.7}\n            >\n              <Ionicons\n                name={item.icon as any}\n                size={menuSizes.iconSize}\n                color={activeSection === item.id ? colors.info : colors.textSecondary}\n                style={styles.menuItemIcon}\n              />\n              <Text style={[\n                styles.menuItemText,\n                { fontSize: menuSizes.fontSize },\n                activeSection === item.id && styles.menuItemTextActive,\n              ]}>\n                {item.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n    </>\n  );\n};\n\ntype LazySectionProps = {\n  section: React.ComponentType<any>;\n  [key: string]: any;\n};\n\nconst LazySection: React.FC<LazySectionProps> = ({ section: SectionComponent, ...props }) => {\n  // On web, load immediately to ensure DOM elements exist for navigation\n  // ×‘-web, ×˜×¢×™× ×” ××™×™×“×™×ª ×›×“×™ ×œ×”×‘×˜×™×— ×©××œ×× ×˜×™ DOM ×§×™×™××™× ×œ× ×™×•×•×˜\n  const [isVisible, setIsVisible] = useState(isWeb);\n  const ref = useRef<View>(null);\n\n  useEffect(() => {\n    // On web, sections are loaded immediately, so no need for lazy loading\n    // ×‘-web, ×”×¡×¢×™×¤×™× × ×˜×¢× ×™× ××™×“, ××– ××™×Ÿ ×¦×•×¨×š ×‘-lazy loading\n    if (isWeb) {\n      return;\n    }\n\n    // For native, use lazy loading\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      {\n        rootMargin: '0px 0px 100px 0px', // Start loading when the section is 100px away from the viewport\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current as any);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current as any);\n      }\n    };\n  }, []);\n\n  return (\n    <View ref={ref} style={{ minHeight: 200 }}>\n      {isVisible ? (\n        <SectionComponent {...props} />\n      ) : <ActivityIndicator size=\"large\" color={colors.info} style={{ marginVertical: 50 }} />}\n    </View>\n  );\n};\n\n\nconst HeroSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => {\n  const heroAnimation = useRef(new Animated.Value(0)).current;\n  useEffect(() => {\n    Animated.timing(heroAnimation, {\n      toValue: 1,\n      duration: 800,\n      delay: 200,\n      useNativeDriver: false,\n    }).start();\n  }, [heroAnimation]);\n\n  return (\n    <View style={styles.hero}>\n      <View style={styles.heroGradient}>\n        <View style={styles.decoCircle1} />\n        <View style={styles.decoCircle2} />\n        <View style={styles.decoCircle3} />\n        <Animated.View style={[\n          styles.heroContent,\n          {\n            opacity: heroAnimation,\n            transform: [{\n              translateY: heroAnimation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [20, 0]\n              })\n            }]\n          }\n        ]}>\n\n          <Text style={styles.welcomeTitle}>\n            <Text style={styles.welcomeTitleLarge}>×”××§×•× </Text>\n            <Text style={styles.welcomeTitleSmall}> ×‘×•  </Text>\n            <Text style={styles.welcomeTitleLarge}>×”×˜×•×‘ </Text>\n            <Text style={styles.welcomeTitleSmall}> ×§×•×¨×” </Text>\n          </Text>\n          <View style={styles.logoContainer}>\n            <View style={styles.logoBackground}>\n              <Image source={require('../assets/images/new_logo_black.png')} style={styles.logo} resizeMode=\"contain\" />\n            </View>\n          </View>\n          <Text style={styles.title}>Karma Community</Text>\n          <View style={styles.subtitlesRow}>\n            <View style={styles.subtitleItem}>\n              <Ionicons name=\"people-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>××—×“×•×ª</Text>\n            </View>\n            <View style={[styles.subtitleItem, styles.subtitleItemGreen]}>\n              <Ionicons name=\"eye-outline\" size={isMobileWeb ? 18 : 24} color={colors.greenBright} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>×©×§×™×¤×•×ª</Text>\n            </View>\n            <View style={styles.subtitleItem}>\n              <Ionicons name=\"checkmark-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} style={styles.subtitleIcon} />\n              <Text style={styles.subtitleText}>×¡×“×¨</Text>\n            </View>\n          </View>\n          <Text style={styles.subtitle}>×¨×©×ª ×—×‘×¨×ª×™×ª ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¦×¨×™×›×™× ×¢×–×¨×”, ×œ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×–×•×¨. ×¤×©×•×˜, ×©×§×•×£ ×•××”×œ×‘.</Text>\n\n\n          <View style={styles.ctaRow}>\n            <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp direct'); Linking.openURL('https://wa.me/972528616878'); }}>\n              <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤ </Text>\n            </TouchableOpacity>\n          </View>\n          {/* Donation Button */}\n          <TouchableOpacity\n            style={[styles.donationCtaButton, { backgroundColor: colors.greenBright }]}\n            onPress={onDonate}\n            activeOpacity={0.8}\n          >\n            <Ionicons name=\"heart\" size={isMobileWeb ? 18 : 24} color={colors.white} />\n            <Text style={styles.donationCtaButtonText}>×ª×¨××• ×œ× ×•</Text>\n          </TouchableOpacity>\n        </Animated.View>\n      </View>\n    </View>\n  );\n}\n\nconst VisionSection: React.FC<{ onGoToApp: () => void }> = ({ onGoToApp }) => (\n  <Section id=\"section-vision\" title=\"×”×—×–×•×Ÿ ×©×œ× ×•\" subtitle=\"×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™\" style={styles.sectionAltBackground}>\n    <Text style={styles.paragraph}>\n      <Text style={styles.emphasis}>×§×™×‘×•×¥ ×“×’×™×˜×œ×™ ×‘×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™. </Text>×¨×©×ª ×—×‘×¨×ª×™×ª ×œ××™×—×•×“, ×¨×™×›×•×–, ×”× ×’×©×”, ×•×”×¤×¦×ª ×¤×™×œ× ×ª×¨×•×¤×™×” ×•×¢×©×™×™×” ×—×‘×¨×ª×™×ª ××›×œ ×”×¡×•×’×™× ×•×œ×›×œ ×”×× ×©×™×.\n      {\"\\n\\n\"}\n      <Text style={styles.emphasis}>×›×¨×’×¢ ×× ×—× ×• ×‘×ª×”×œ×™×š ×”×§××”.</Text> ×›×œ ××” ×©×¨×©×•× ×‘×”××©×š ×”×•× ×—×œ×§ ××”×—×–×•×Ÿ ×©×× ×—× ×• ×¨×•×¦×™× ×œ×‘× ×•×ª, ×•×›×¨×’×¢ ×× ×—× ×• ××–××™× ×™× ××ª×›× ×œ×¢×–×•×¨ ×œ× ×• ×œ×‘× ×•×ª ××ª ×–×”.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×× ×—× ×• ××–××™× ×™× ××ª×›× ×œ×”×¦×˜×¨×£ ××œ×™× ×• ×œ×©× ×•×ª ××ª ×”×¢×•×œ× ×•×œ×™×¦×•×¨ ×©×™× ×•×™ ×—×‘×¨×ª×™ ×××™×ª×™. ×œ×”×™×•×ª ×—×œ×§ ×××©×”×• ×’×“×•×œ, ××•×¡×¨×™ ×‘×¨××” ×”×›×™ ×’×‘×•×”×”, ×˜×›× ×•×œ×•×’×™, ×—×‘×¨×ª×™ ×•×¢×•×“ ××œ× ×“×‘×¨×™× ×˜×•×‘×™×.\n    </Text>\n    <View style={styles.mottoContainer}>\n      <View style={styles.mottoCard}>\n        <Ionicons name=\"swap-horizontal-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.mottoIcon} />\n        <Text style={styles.mottoText}>\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\"</Text>\n      </View>\n      <View style={[styles.mottoCard, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '40' }]}>\n        <Ionicons name=\"gift-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.mottoIcon} />\n        <Text style={styles.mottoText}>\"×œ×›×œ ××—×“ ×™×© ××©×”×• ×©×”×•× ×¦×¨×™×š ×•××©×”×• ×©×”×•× ×™×©××— ×œ×ª×ª\"</Text>\n      </View>\n    </View>\n    <Text style={styles.paragraph}>\n      KarmaCommunity ×”×™× ×™×•×ª×¨ ××¨×©×ª ×—×‘×¨×ª×™×ª - ×”×™× ×ª× ×•×¢×” ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×©×•×ª ×˜×•×‘, ×œ×œ× ××™× ×˜×¨×¡×™× ××¡×—×¨×™×™×, ×œ×œ× ×¤×¨×¡×•××•×ª, ×¨×§ ×× ×•×©×™×•×ª ×•×§×”×™×œ×ª×™×•×ª ×××™×ª×™×ª.\n    </Text>\n    <View style={styles.visionHighlights}>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"heart\" size={isMobileWeb ? 20 : 28} color={colors.secondary} />\n        <Text style={styles.visionHighlightText}>××•×¡×¨×™ ×‘×¨××” ×”×’×‘×•×”×” ×‘×™×•×ª×¨</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"code-working\" size={isMobileWeb ? 20 : 28} color={colors.info} />\n        <Text style={styles.visionHighlightText}>×˜×›× ×•×œ×•×’×™ ×•×—×“×©× ×™</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"people\" size={isMobileWeb ? 20 : 28} color={colors.accent} />\n        <Text style={styles.visionHighlightText}>×—×‘×¨×ª×™ ×•××—×‘×¨</Text>\n      </View>\n      <View style={styles.visionHighlight}>\n        <Ionicons name=\"globe\" size={isMobileWeb ? 20 : 28} color={colors.greenBright} />\n        <Text style={styles.visionHighlightText}>×©×™× ×•×™ ×¢×•×œ××™ ×××™×ª×™</Text>\n      </View>\n    </View>\n\n    {/* CTA Button - Join Us */}\n    {/* <View style={styles.ctaRow}>\n      <TouchableOpacity\n        style={styles.primaryCta}\n        onPress={onGoToApp}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"people-outline\" size={isMobileWeb ? 16 : 22} color={colors.white} style={styles.ctaIcon} />\n        <Text style={styles.primaryCtaText}>×”×¦×˜×¨×¤×• ××œ×™× ×•</Text>\n      </TouchableOpacity>\n    </View> */}\n  </Section>\n);\n\n// Stats Detail Modal Component\nconst StatsDetailModal: React.FC<{\n  visible: boolean;\n  onClose: () => void;\n  statType: string;\n  statTitle: string;\n  statValue: number;\n  iconName: string;\n  iconColor: string;\n}> = ({ visible, onClose, statType, statTitle, statValue, iconName, iconColor }) => {\n  const [detailData, setDetailData] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const loadDetailData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      logger.info('StatsDetailModal', `Loading detail data for ${statType}`);\n      const response = await apiService.getStatDetails(statType);\n      if (response.success && response.data) {\n        setDetailData(response.data);\n        logger.info('StatsDetailModal', `Loaded ${response.data.length} items for ${statType}`);\n      }\n    } catch (error) {\n      logger.error('StatsDetailModal', 'Failed to load detail data', { error, statType });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [statType]);\n\n  useEffect(() => {\n    if (visible && USE_BACKEND) {\n      loadDetailData();\n    }\n  }, [visible, loadDetailData]);\n\n  const renderDetailItem = ({ item, index }: { item: any; index: number }) => {\n    // Different rendering based on stat type\n    switch (statType) {\n      case 'siteVisits':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {new Date(item.timestamp || item.created_at).toLocaleString('he-IL')}\n              </Text>\n              {item.user_agent && (\n                <Text style={styles.detailItemSubtext}>{item.user_agent.substring(0, 50)}...</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'totalUsers':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.name || item.email || '××©×ª××©'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                ×”×¦×˜×¨×£: {new Date(item.join_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.city && <Text style={styles.detailItemSubtext}>×¢×™×¨: {item.city}</Text>}\n            </View>\n          </View>\n        );\n\n      case 'totalMoneyDonated':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.donor_name || '×ª×•×¨× ×× ×•× ×™××™'} â€¢ {item.amount?.toLocaleString('he-IL')} â‚ª\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.donation_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.category_name && (\n                <Text style={styles.detailItemSubtext}>×§×˜×’×•×¨×™×”: {item.category_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'itemDonations':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.title || item.item_name || '×¤×¨×™×˜'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.donor_name && (\n                <Text style={styles.detailItemSubtext}>×ª×•×¨×: {item.donor_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'completedRides':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.from_city || '××•×¦×'} â†’ {item.to_city || '×™×¢×“'}\n              </Text>\n              <Text style={styles.detailItemSubtext}>\n                {new Date(item.ride_date || item.created_at).toLocaleDateString('he-IL')}\n              </Text>\n              {item.driver_name && (\n                <Text style={styles.detailItemSubtext}>× ×”×’: {item.driver_name}</Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'uniqueDonors':\n      case 'recurringDonationsAmount':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.donor_name || '×ª×•×¨×'}\n                {item.amount && ` â€¢ ${item.amount.toLocaleString('he-IL')} â‚ª`}\n              </Text>\n              {item.frequency && (\n                <Text style={styles.detailItemSubtext}>×ª×“×™×¨×•×ª: {item.frequency}</Text>\n              )}\n              {item.start_date && (\n                <Text style={styles.detailItemSubtext}>\n                  ×”×—×œ ×: {new Date(item.start_date).toLocaleDateString('he-IL')}\n                </Text>\n              )}\n            </View>\n          </View>\n        );\n\n      case 'completedTasks':\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>\n                {item.title || '××©×™××”'}\n              </Text>\n              {item.category && (\n                <Text style={styles.detailItemSubtext}>×§×˜×’×•×¨×™×”: {item.category}</Text>\n              )}\n              {item.updated_at && (\n                <Text style={styles.detailItemSubtext}>\n                  ×”×•×©×œ××”: {new Date(item.updated_at).toLocaleDateString('he-IL')}\n                </Text>\n              )}\n            </View>\n          </View>\n        );\n\n      default:\n        return (\n          <View style={styles.detailItem}>\n            <Text style={styles.detailItemNumber}>{index + 1}.</Text>\n            <View style={styles.detailItemContent}>\n              <Text style={styles.detailItemText}>{JSON.stringify(item)}</Text>\n            </View>\n          </View>\n        );\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContainer}>\n          <View style={styles.modalHeader}>\n            <View style={styles.modalTitleRow}>\n              <Ionicons name={iconName as any} size={isMobileWeb ? 28 : 36} color={iconColor} />\n              <View style={styles.modalTitleContainer}>\n                <Text style={styles.modalTitle}>{statTitle}</Text>\n                <Text style={styles.modalSubtitle}>\n                  {statValue.toLocaleString('he-IL')} {statType === 'totalMoneyDonated' || statType === 'recurringDonationsAmount' ? 'â‚ª' : '×¤×¨×™×˜×™×'}\n                </Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={onClose} style={styles.modalCloseButton}>\n              <Ionicons name=\"close\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.modalContent}>\n            {isLoading ? (\n              <View style={styles.modalLoadingContainer}>\n                <ActivityIndicator size=\"large\" color={colors.info} />\n                <Text style={styles.modalLoadingText}>×˜×•×¢×Ÿ ×¤×¨×˜×™×...</Text>\n              </View>\n            ) : detailData.length === 0 ? (\n              <View style={styles.modalEmptyContainer}>\n                <Ionicons name=\"information-circle-outline\" size={isMobileWeb ? 48 : 64} color={colors.textSecondary} />\n                <Text style={styles.modalEmptyText}>××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”</Text>\n              </View>\n            ) : (\n              <FlatList\n                data={detailData}\n                renderItem={renderDetailItem}\n                keyExtractor={(item, index) => `${statType}-${index}`}\n                showsVerticalScrollIndicator={true}\n                contentContainerStyle={styles.detailList}\n              />\n            )}\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\n// Donation Modal Component\nconst DonationModal: React.FC<{\n  visible: boolean;\n  onClose: () => void;\n}> = ({ visible, onClose }) => {\n  const handleWhatsApp = () => {\n    logger.info('DonationModal', 'Click - whatsapp');\n    Linking.openURL('https://wa.me/972528616878');\n  };\n\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"fade\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.donationModalContainer}>\n          <View style={styles.donationModalHeader}>\n            <View style={styles.donationModalTitleRow}>\n              <Ionicons name=\"heart\" size={isMobileWeb ? 32 : 40} color={colors.secondary} />\n              <View style={styles.donationModalTitleContainer}>\n                <Text style={styles.donationModalTitle}>×ª×¨××• ×œ× ×•</Text>\n                <Text style={styles.donationModalSubtitle}>×›×œ ×ª×¨×•××” ×¢×•×–×¨×ª ×œ× ×• ×œ×’×“×•×œ</Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={onClose} style={styles.modalCloseButton}>\n              <Ionicons name=\"close\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.donationModalContent}>\n            <View style={styles.donationMessageContainer}>\n              <Ionicons name=\"information-circle\" size={isMobileWeb ? 24 : 32} color={colors.info} />\n              <Text style={styles.donationMessageText}>\n                ××•×–×× ×™× ×œ×”×¢×‘×™×¨ ×œ××¡×¤×¨ 0528616878 ×œ× ×•×” ×”××™×™×¡×“ ×‘×‘×™×˜/×¤×™×™×‘×•×§×¡\n              </Text>\n            </View>\n\n            <View style={styles.donationButtonsContainer}>\n              <TouchableOpacity\n                style={[styles.donationButton, styles.donationButtonWhatsApp]}\n                onPress={handleWhatsApp}\n                activeOpacity={0.8}\n              >\n                <Ionicons name=\"logo-whatsapp\" size={isMobileWeb ? 20 : 28} color={colors.white} />\n                <Text style={styles.donationButtonText}>×•×•×˜×¡××¤</Text>\n              </TouchableOpacity>\n\n            </View>\n\n            <Text style={styles.donationNoteText}>\n              ×ª×•×“×” ×¢×œ ×”×ª××™×›×” ×©×œ×›×! ×›×œ ×ª×¨×•××” ×¢×•×–×¨×ª ×œ× ×• ×œ×”××©×™×š ×•×œ×¤×ª×— ××ª ×”×§×”×™×œ×”.\n            </Text>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst StatsSection: React.FC<{ stats: LandingStats; isLoadingStats: boolean; onGoToApp: () => void }> = ({ stats, isLoadingStats, onGoToApp }) => {\n  const [selectedStat, setSelectedStat] = useState<{\n    type: string;\n    title: string;\n    value: number;\n    icon: string;\n    color: string;\n  } | null>(null);\n\n  const handleStatPress = (type: string, title: string, value: number, icon: string, color: string) => {\n    logger.info('StatsSection', `Stat card pressed: ${type}`);\n    setSelectedStat({ type, title, value, icon, color });\n  };\n\n  return (\n    <Section id=\"section-stats\" title=\"×”×›×•×— ×©×œ ×”×§×”×™×œ×” ×©×œ× ×•\" subtitle=\"×”×©×¤×¢×” ×××™×ª×™×ª, ×‘××¡×¤×¨×™×\">\n      {selectedStat && (\n        <StatsDetailModal\n          visible={!!selectedStat}\n          onClose={() => setSelectedStat(null)}\n          statType={selectedStat.type}\n          statTitle={selectedStat.title}\n          statValue={selectedStat.value}\n          iconName={selectedStat.icon}\n          iconColor={selectedStat.color}\n        />\n      )}\n\n      {isLoadingStats ? (\n        <View style={styles.statsLoadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.info} />\n          <Text style={styles.statsLoadingText}>×˜×•×¢×Ÿ × ×ª×•× ×™×...</Text>\n        </View>\n      ) : (\n        <View style={styles.statsGrid}>\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('siteVisits', '×‘×™×§×•×¨×™× ×‘××ª×¨', stats.siteVisits, 'eye-outline', colors.info)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"eye-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.siteVisits.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×‘×™×§×•×¨×™× ×‘××ª×¨</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('totalMoneyDonated', '×ª×¨×•××•×ª ×›×¡×¤×™×•×ª', stats.totalMoneyDonated, 'cash-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"cash-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.totalMoneyDonated.toLocaleString('he-IL')} â‚ª</Text>\n            <Text style={styles.statLabel}>×©\"×— ×©× ×ª×¨××• ×™×©×™×¨×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('totalUsers', '×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×', stats.totalUsers, 'heart-outline', colors.secondary)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"heart-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.totalUsers.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×—×‘×¨×™ ×§×”×™×œ×” ×¨×©×•××™×</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('itemDonations', '×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•', stats.itemDonations, 'cube-outline', colors.accent)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"cube-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.itemDonations.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×¤×¨×™×˜×™× ×©×¤×•×¨×¡××•</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.statCard, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '40' }]}\n            onPress={() => handleStatPress('completedRides', '× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª', stats.completedRides, 'car-outline', colors.greenBright)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"car-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.completedRides.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>× ×¡×™×¢×•×ª ×§×”×™×œ×ª×™×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('recurringDonationsAmount', '×ª×¨×•××•×ª ×§×‘×•×¢×•×ª', stats.recurringDonationsAmount, 'repeat-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"repeat-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.recurringDonationsAmount.toLocaleString('he-IL')} â‚ª</Text>\n            <Text style={styles.statLabel}>×ª×¨×•××•×ª ×§×‘×•×¢×•×ª ×¤×¢×™×œ×•×ª</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.statCard}\n            onPress={() => handleStatPress('uniqueDonors', '×ª×•×¨××™× ×¤×¢×™×œ×™×', stats.uniqueDonors, 'people-outline', colors.info)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"people-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.uniqueDonors.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>×ª×•×¨××™× ×¤×¢×™×œ×™×</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.statCard, { backgroundColor: colors.success + '15', borderColor: colors.success + '40' }]}\n            onPress={() => handleStatPress('completedTasks', '××©×™××•×ª ×©×‘×•×¦×¢×•', stats.completedTasks, 'checkmark-done-outline', colors.success)}\n            activeOpacity={0.7}\n          >\n            <Ionicons name=\"checkmark-done-outline\" size={isMobileWeb ? 24 : 32} color={colors.success} style={styles.statIcon} />\n            <Text style={styles.statNumber}>{stats.completedTasks.toLocaleString('he-IL')}</Text>\n            <Text style={styles.statLabel}>××©×™××•×ª ×©×‘×•×¦×¢×•</Text>\n            <Ionicons name=\"chevron-back-outline\" size={isMobileWeb ? 16 : 20} color={colors.textSecondary} style={styles.statChevron} />\n          </TouchableOpacity>\n        </View>\n      )}\n\n      {/* CTA Button - Go to App */}\n      {/* <View style={styles.ctaRow}>\n        <TouchableOpacity\n          style={styles.primaryCta}\n          onPress={onGoToApp}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"phone-portrait-outline\" size={isMobileWeb ? 16 : 22} color={colors.white} style={styles.ctaIcon} />\n          <Text style={styles.primaryCtaText}>×¢×‘×•×¨ ×œ××¤×œ×™×§×¦×™×”</Text>\n        </TouchableOpacity>\n      </View> */}\n    </Section>\n  );\n};\n\nconst ProblemsSection = () => (\n  <Section id=\"section-problems\" title=\"×”×‘×¢×™×•×ª ×©×× ×—× ×• ×‘××™× ×œ×¤×ª×•×¨\" subtitle=\"×œ××” ×¦×¨×™×š ×‘×›×œ×œ ××ª KC?\">\n    <View style={styles.problemsContent}>\n      <View style={styles.problemCard}>\n        <Ionicons name=\"copy-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×›×¤×™×œ×•×ª, ×¤×™×–×•×¨ ×•×—×•×¡×¨ ×××™× ×•×ª</Text>\n        <Text style={styles.problemText}>\n          ×”×™×•× ×™×© ×›×œ ×›×š ×”×¨×‘×” ×¤×œ×˜×¤×•×¨××•×ª, ×§×‘×•×¦×•×ª ×•×•××˜×¡××¤, ×•×¢××•×ª×•×ª ×©×× ×¡×•×ª ×œ×¢×–×•×¨. ×›×œ ××—×“ ×¢×•×‘×“ ×œ×‘×“, ×™×© ×›×¤×™×œ×•×™×•×ª, ×—×•×¡×¨ ×ª×™××•×, ×•×§×©×” ×œ×“×¢×ª ×¢×œ ××™ ××¤×©×¨ ×œ×¡××•×š.\n          Karma Community ×××—×“×ª ××ª ×›×œ ×–×” ×œ××§×•× ××—×“, ×©×§×•×£ ×•×××™×Ÿ.\n        </Text>\n      </View>\n\n      <View style={styles.problemCard}>\n        <Ionicons name=\"people-circle-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×§×”×™×œ×” ×œ×—×•×¤×©×™×•×ª</Text>\n        <Text style={styles.problemText}>\n          ×›×‘×¨ ×©× ×™× ×©×™×© ×œ××“× ××ª ×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×”×¨×¦×•×Ÿ ×œ×§×”×™×œ×” ×•×”×¨×¦×•×Ÿ ×œ×—×•×¤×©×™×•×ª. ×”×¨×™ ×›×œ ×§×”×™×œ×” ×¢× ×”×’×‘×œ×•×ª ×•××•×¡×›××•×ª ××©×œ×”.\n          {'\\n\\n'}\n          Karma Community ×‘××” ×œ×”×¦×™×¢ ×¤×œ×˜×¤×•×¨××”, ××™×Ÿ ×¨×©×ª ×—×‘×¨×ª×™×ª, ××©×¨ ××¦×“ ××—×“ ×©××” ×“×’×© ×¢×œ ×‘×™×—×“ ×•××¦×“ ×©× ×™ ×“×’×© ×¢×œ ×—×•×¤×© ×•×œ×™×‘×¨×œ×™×•×ª.\n        </Text>\n      </View>\n\n      <View style={styles.problemCard}>\n        <Ionicons name=\"ban-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.problemIcon} />\n        <Text style={styles.problemTitle}>×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ××•× ×¢×•×ª ×××™× ×˜×¨×¡×™×</Text>\n        <Text style={styles.problemText}>\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×—× ×• ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª\" ×”××œ×”.\n          {'\\n\\n'}\n          Karma Community ×‘××” ×œ×”×¦×™×¢ ×¨×©×ª ×—×‘×¨×ª×™×ª ×œ×œ× ×¤×¨×¡×•××•×ª ×•×œ×œ× ×ª×•×›×Ÿ ×—×•××¨×™/×¤×•×’×¢× ×™. ×¤×œ×˜×¤×•×¨××” ×”××§×“×©×ª ×§×”×™×œ×ª×™×•×ª ×•×©×™×ª×•×£.\n        </Text>\n      </View>\n    </View>\n  </Section>\n);\n\nconst FeaturesSection = () => (\n  <Section id=\"section-features\" title=\"×›×œ ××” ×©×¦×¨×™×š ×›×“×™ ×œ×¢×©×•×ª ×˜×•×‘\" subtitle=\"×›×œ×™× ×¤×©×•×˜×™× ×©×”×•×¤×›×™× ×¢×–×¨×” ×”×“×“×™×ª ×œ×—×œ×§ ××”×™×•×-×™×•×\" style={styles.sectionAltBackground}>\n    <View style={styles.featuresGrid}>\n      <Feature emoji=\"ğŸ¤\" title=\"×¦×¨×™×›×™× ×¢×–×¨×”? ×¨×•×¦×™× ×œ×¢×–×•×¨?\" text=\"×¤×¨×¡××• ×‘×§×œ×•×ª ×‘×§×©×” ××• ×”×¦×¢×”, ×•×§×‘×œ×• ××¢× ×” ××”×§×”×™×œ×” ×¡×‘×™×‘×›×. ××©×™×¢×•×¨×™ ×¢×–×¨ ×•×¢×“ ×ª×™×§×•× ×™× ×§×˜× ×™× ×‘×‘×™×ª.\" />\n      <Feature emoji=\"ğŸ’¬\" title=\"×”×ª×—×‘×¨×• ×œ×× ×©×™× ×›××•×›×\" text=\"××¦××• ×§×‘×•×¦×•×ª ×¢× ×™×™×Ÿ, ×”×¦×˜×¨×¤×• ×œ×“×™×•× ×™×, ×•×¦×¨×• ×§×©×¨×™× ×—×“×©×™× ×¢× ×× ×©×™× ×©××›×¤×ª ×œ×”×.\" />\n      <Feature emoji=\"ğŸ“\" title=\"×’×œ×• ×”×–×“×× ×•×™×•×ª ×¡×‘×™×‘×›×\" text=\"×”××¤×” ×”×—×›××” ×©×œ× ×• ×ª×¨××” ×œ×›× ××™×¤×” ×¦×¨×™×›×™× ××ª×›×, ×××© ×œ×™×“ ×”×‘×™×ª.\" greenAccent />\n      <Feature emoji=\"ğŸ”’\" title=\"×¤×œ×˜×¤×•×¨××” ×‘×˜×•×—×” ×•×©×§×•×¤×”\" text=\"×‘×œ×™ ×¤×¨×¡×•××•×ª, ×‘×œ×™ ×ª×•×›×Ÿ ×¤×•×’×¢× ×™, ×¨×§ ×§×”×™×œ×ª×™×•×ª ×××™×ª×™×ª ×•×××•×Ÿ ×”×“×“×™.\" />\n    </View>\n  </Section>\n);\n\nconst HowItWorksSection = () => (\n  <Section id=\"section-how\" title=\"××™×š ×–×” ×¢×•×‘×“?\" subtitle=\"×ª×”×œ×™×š ×¤×©×•×˜ ×•×‘×¨×•×¨ ×©××—×‘×¨ ×‘×™×Ÿ ×× ×©×™×\">\n    <Text style={styles.paragraph}>\n      ×§×”×™×œ×ª ×§××¨××” ×‘× ×•×™×” ×¢×œ ×¢×§×¨×•×Ÿ ×¤×©×•×˜: ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ. ×”×ª×”×œ×™×š ×©×œ× ×• × ×•×¢×“ ×œ×”×™×•×ª ×¤×©×•×˜, ×©×§×•×£ ×•×™×“×™×“×•×ª×™.\n    </Text>\n    <View style={styles.stepsRow}>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>1</Text>\n        </View>\n        <Ionicons name=\"person-add-outline\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×”</Text>\n        <Text style={styles.stepText}>\n          ×”×™×¨×©××• ×‘×›××” ×©× ×™×•×ª - ×¨×§ ×¤×¨×˜×™× ×‘×¡×™×¡×™×™×. ×¡×¤×¨×• ×œ× ×• ××” ××¢× ×™×™×Ÿ ××ª×›×, ××™×¤×” ××ª×, ×•××” ××ª× ×™×›×•×œ×™× ×œ×”×¦×™×¢ ××• ××” ××ª× ×¦×¨×™×›×™×. ××™×Ÿ ×¦×•×¨×š ×‘××™×“×¢ ××™×•×ª×¨, ×¨×§ ××” ×©×—×©×•×‘.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>2</Text>\n        </View>\n        <Ionicons name=\"create-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¤×¨×¡××• ××• ×—×¤×©×•</Text>\n        <Text style={styles.stepText}>\n          ×¦×¨×™×›×™× ×¢×–×¨×”? ×¤×¨×¡××• ×‘×§×©×” ×‘×¨×•×¨×” ×¢× ××” ××ª× ×¦×¨×™×›×™×, ××ª×™ ×•××™×¤×”. ×¨×•×¦×™× ×œ×¢×–×•×¨? ×¤×¨×¡××• ×”×¦×¢×” ×¢× ××” ××ª× ×™×›×•×œ×™× ×œ×ª×ª. ××• ×¤×©×•×˜ ×“×¤×“×¤×• ×‘×¤×™×“ ×•×¨××• ××” ×§×•×¨×” ×¡×‘×™×‘×›×.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>3</Text>\n        </View>\n        <Ionicons name=\"search-outline\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×’×œ×• ×”×–×“×× ×•×™×•×ª</Text>\n        <Text style={styles.stepText}>\n          ×”××¤×” ×”×—×›××” ×©×œ× ×• ×ª×¨××” ×œ×›× ××™×¤×” ×¦×¨×™×›×™× ××ª×›×, ×××© ×œ×™×“ ×”×‘×™×ª. ×”×¤×™×“ ×”××™×©×™ ×©×œ×›× ×™×¦×™×’ ×œ×›× ×‘×§×©×•×ª ×•×”×¦×¢×•×ª ×¨×œ×•×•× ×˜×™×•×ª ×œ×¤×™ ×”××™×§×•× ×•×”×¢× ×™×™×Ÿ ×©×œ×›×.\n        </Text>\n      </View>\n      <View style={styles.stepCard}>\n        <View style={styles.stepNumberBadge}>\n          <Text style={styles.stepNumber}>4</Text>\n        </View>\n        <Ionicons name=\"chatbubble-ellipses-outline\" size={isMobileWeb ? 24 : 32} color={colors.secondary} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¦×¨×• ×§×©×¨</Text>\n        <Text style={styles.stepText}>\n          ×¨××™×ª× ××©×”×• ×©××¢× ×™×™×Ÿ ××ª×›×? ×©×œ×—×• ×”×•×“×¢×” ×™×©×™×¨×”, ×ª×××• ×¤×¨×˜×™×, ×”×›×™×¨×• ××ª ×”××“× ×©×××—×•×¨×™ ×”×‘×§×©×” ××• ×”×”×¦×¢×”. ×”×›×œ ×©×§×•×£, ×‘×˜×•×— ×•×¤×©×•×˜.\n        </Text>\n      </View>\n      <View style={[styles.stepCard, { backgroundColor: colors.greenBright + '12', borderColor: colors.greenBright + '40' }]}>\n        <View style={[styles.stepNumberBadge, { backgroundColor: colors.greenBright }]}>\n          <Text style={styles.stepNumber}>5</Text>\n        </View>\n        <Ionicons name=\"heart-outline\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.stepIcon} />\n        <Text style={styles.stepTitle}>×¢×©×• ×˜×•×‘ ×•×”×¨×’×™×©×• ××ª ×”×”×‘×“×œ</Text>\n        <Text style={styles.stepText}>\n          ×ª×××•, ×¤×’×©×•, ×¢×–×¨×• ××• ×§×‘×œ×• ×¢×–×¨×”. ×›×œ ×¤×¢×•×œ×” ×›×–×• ×™×•×¦×¨×ª ×§×©×¨ ×× ×•×©×™ ×××™×ª×™ ×•××—×–×§×ª ××ª ×”×§×”×™×œ×”. ××ª× ×ª×¨××• ××ª ×”×”×©×¤×¢×” ×©×œ×›×, ×•×”×§×”×™×œ×” ×ª×¨××” ××ª ×”×ª×¨×•××” ×©×œ×›×.\n        </Text>\n      </View>\n    </View>\n    <View style={styles.howItWorksNote}>\n      <Ionicons name=\"information-circle-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} />\n      <Text style={styles.howItWorksNoteText}>\n        ×”×›×œ ×‘×—×™× ×, ×”×›×œ ×©×§×•×£, ×”×›×œ ×œ××¢×Ÿ ×”×§×”×™×œ×”. ××™×Ÿ ×‘×™×¨×•×§×¨×˜×™×”, ××™×Ÿ ×¢××œ×•×ª, ×¨×§ ×× ×©×™× ×©×¢×•×–×¨×™× ×œ×× ×©×™×.\n      </Text>\n    </View>\n  </Section>\n);\n\nconst WhoIsItForSection: React.FC<{ onDonate: () => void }> = ({ onDonate }) => (\n  <Section id=\"section-who\" title=\"×œ××™ ×–×” ××ª××™×?\" subtitle=\"×œ×›×•×œ×. ×‘×××ª.\" style={styles.sectionAltBackground}>\n    <Text style={styles.paragraph}>\n      <Text style={styles.emphasis}>×§×”×™×œ×ª ×§××¨××” ××™×•×¢×“×ª ×œ×›×•×œ×.</Text> ×¢×©×™×¨×™× ×•×¢× ×™×™×, ××¨×›×– ×•×¤×¨×™×¤×¨×™×”, ×œ× ××©× ×” ×“×ª, ×’×–×¢, ××™×Ÿ, ×œ××•× ×•××¤×™×œ×• ×œ× ××™×§×•× ×¤×™×–×™. ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ.\n    </Text>\n    <View style={styles.whoContent}>\n      <View style={styles.whoMainCard}>\n        <Ionicons name=\"people-outline\" size={isMobileWeb ? 32 : 48} color={colors.info} style={styles.whoMainIcon} />\n        <Text style={styles.splitTitle}>×œ×× ×©×™× ×¤×¨×˜×™×™×</Text>\n        <Text style={styles.paragraph}>\n          ×‘×©×œ×‘×™× ×”×¨××©×•× ×™×, KarmaCommunity ××ª××§×“×ª ×‘×× ×©×™× ×¤×¨×˜×™×™× - ×©×›× ×™×, ×—×‘×¨×™×, ×•×›×œ ××™ ×©×¨×•×¦×” ×œ×ª×ª ××”×–××Ÿ, ×”×™×“×¢ ××• ×”×—×¤×¦×™× ×©×œ×• ×›×“×™ ×œ×¢×–×•×¨ ×œ××—×¨×™×.\n        </Text>\n        <View style={styles.iconBullets}>\n          <View style={styles.iconBulletRow}><Ionicons name=\"gift-outline\" size={isMobileWeb ? 14 : 18} color={colors.secondary} /><Text style={styles.iconBulletText}>×©×™×ª×•×£ ×—×¤×¦×™×, ××–×•×Ÿ ×•×¦×™×•×“</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"time-outline\" size={isMobileWeb ? 14 : 18} color={colors.accent} /><Text style={styles.iconBulletText}>×”×ª× ×“×‘×•×ª ×•×¡×™×•×¢ × ×§×•×“×ª×™</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"school-outline\" size={isMobileWeb ? 14 : 18} color={colors.info} /><Text style={styles.iconBulletText}>×©×™×ª×•×£ ×™×“×¢ ×•×©×™×¢×•×¨×™ ×¢×–×¨</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"heart-outline\" size={isMobileWeb ? 14 : 18} color={colors.greenBright} /><Text style={styles.iconBulletText}>×™×¦×™×¨×ª ×§×©×¨×™× ×× ×•×©×™×™× ×××™×ª×™×™×</Text></View>\n          <View style={styles.iconBulletRow}><Ionicons name=\"people-outline\" size={isMobileWeb ? 14 : 18} color={colors.success} /><Text style={styles.iconBulletText}>×›××•×‘×Ÿ ×›×•×œ× ××•×–×× ×™× ×œ×”×ª× ×“×‘ ×•×œ×ª×¨×•× ×’× ×œ×§×”×™×œ×” ×¢×¦××” ×•×œ×”×™×•×ª ×—×œ×§ ××”××™×™×¡×“×™×</Text></View>\n        </View>\n\n        {/* Donation Button */}\n        <TouchableOpacity\n          style={styles.donationCtaButton}\n          onPress={onDonate}\n          activeOpacity={0.8}\n        >\n          <Ionicons name=\"heart\" size={isMobileWeb ? 18 : 24} color={colors.white} />\n          <Text style={styles.donationCtaButtonText}>×ª×¨××• ×œ× ×•</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.whoFutureCard}>\n        <Ionicons name=\"business-outline\" size={isMobileWeb ? 24 : 32} color={colors.textSecondary} style={styles.whoFutureIcon} />\n        <Text style={styles.whoFutureTitle}>×¢××•×ª×•×ª ×•××¨×’×•× ×™× - ×‘×”××©×š</Text>\n        <Text style={styles.whoFutureText}>\n          ×‘×©×œ×‘×™× ×”×‘××™× × ×—×‘×¨ ×’× ×¢××•×ª×•×ª ×•××¨×’×•× ×™× ×¢× ×›×œ×™× ×™×™×¢×•×“×™×™× ×œ× ×™×”×•×œ ××ª× ×“×‘×™×, ×ª×¨×•××•×ª ×•×¤× ×™×•×ª. ×“×’×© ×—×©×•×‘ - ×–×” ×™×§×¨×” ×¨×§ ××—×¨×™ ×©× ×‘×¡×¡ ×§×”×™×œ×” ×—×–×§×” ×©×œ ×× ×©×™× ×¤×¨×˜×™×™×.\n        </Text>\n      </View>\n    </View>\n  </Section>\n);\n\nconst ValuesSection = () => {\n  const valuePills = [\n    '×©×§×™×¤×•×ª ××œ××”',\n    '×××•×Ÿ ×•×‘×˜×™×—×•×ª',\n    '×§×”×™×œ×ª×™×•×ª ×¤×¢×™×œ×”',\n    '××—×¨×™×•×ª ××©×•×ª×¤×ª',\n    '×’×™×©×” ××›×œ ××§×•×',\n    '××“×™×“×” ×•×œ××™×“×”',\n  ];\n  const commitments = [\n    { icon: 'shield-checkmark-outline', text: '××™××•×ª ××©×ª××©×™× ×•××¨×’×•× ×™× ×œ×¤× ×™ ×¢×œ×™×™×” ×œ××•×•×™×¨', color: colors.success },\n    { icon: 'sparkles-outline', text: '×—×•×•×™×™×ª ×©×™××•×© × ×•×—×” ×•× ×§×™×™×” ××”×¡×—×•×ª ×“×¢×ª', color: colors.secondary },\n    { icon: 'leaf-outline', text: '×”×ª×¤×ª×—×•×ª ×‘×¨×ª ×§×™×™×× â€“ ×‘×œ×™ ×¤×¨×¡×•××•×ª ×•×‘×œ×™ ×“××˜×” ××™×•×ª×¨', color: colors.greenBright },\n  ];\n\n  return (\n    <Section id=\"section-values\" title=\"×”×¢×¨×›×™× ×©×× ×—×™× ××•×ª× ×•\" subtitle=\"××” ×”×•×¤×š ××ª Karma Community ×œ×§×”×™×œ×” ×‘×˜×•×—×” ×•×××™× ×”\" style={styles.sectionAltBackground}>\n      <Text style={styles.paragraph}>\n        ×× ×• ××•×‘×™×œ×™× ×©×™× ×•×™ ×‘×××¦×¢×•×ª ××¢×¨×›×ª ×©××¢××™×“×” ××ª ×”××“× ×‘××¨×›×–. ×›×œ ×¤×™×¦×³×¨ × ×‘×—×Ÿ ×œ×¤×™ ×ª×¨×•××ª×• ×œ×©×§×™×¤×•×ª, ×œ×—×™×‘×•×¨×™× ×× ×•×©×™×™× ×•×œ×™×›×•×œ×ª ×œ××“×•×“ ×”×©×¤×¢×” ×××™×ª×™×ª.\n      </Text>\n      <View style={styles.valuesRow}>\n        {valuePills.map((value) => (\n          <View key={value} style={styles.valuePill}>\n            <Text style={styles.valuePillText}>{value}</Text>\n          </View>\n        ))}\n      </View>\n      <View style={styles.trustList}>\n        {commitments.map((item) => (\n          <View key={item.text} style={styles.trustRow}>\n            <Ionicons name={item.icon as any} size={isMobileWeb ? 14 : 18} color={item.color} />\n            <Text style={styles.trustText}>{item.text}</Text>\n          </View>\n        ))}\n      </View>\n    </Section>\n  );\n};\n\nconst CoreMottosSection = () => (\n  <Section id=\"section-core-mottos\" title=\"×”×¢×§×¨×•× ×•×ª ×”×× ×—×™× ×©×œ× ×•\" subtitle=\"××” ×©×× ×™×¢ ××•×ª× ×• ×§×“×™××”\">\n    <View style={styles.coreMottosContainer}>\n      <View style={styles.coreMottoItem}>\n        <Ionicons name=\"sparkles\" size={isMobileWeb ? 24 : 32} color={colors.accent} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×”×©××¨×™×•×ª ×©×œ ×”××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×”××•×¦×¨ ×©×œ ××™×©×”×• ××—×¨</Text>\n      </View>\n\n      <View style={[styles.coreMottoItem, { backgroundColor: colors.greenBright + '15', borderColor: colors.greenBright + '50' }]}>\n        <Ionicons name=\"heart-circle\" size={isMobileWeb ? 24 : 32} color={colors.greenBright} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×œ×›×œ ××—×“ ×××™×ª× ×• ×™×© ××©×”×• ×œ×ª×ª ×•×’× ××©×”×• ×©×”×•× ×”×™×” ×©××— ×œ×§×‘×œ</Text>\n      </View>\n\n      <View style={styles.coreMottoItem}>\n        <Ionicons name=\"swap-horizontal\" size={isMobileWeb ? 24 : 32} color={colors.info} style={styles.coreMottoIcon} />\n        <Text style={styles.coreMottoText}>×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ</Text>\n      </View>\n    </View>\n  </Section>\n);\n\n// Admin Hierarchy Section - Visual tree of the management structure\nconst AdminHierarchySection = () => {\n  const navigation = useNavigation<any>();\n  const { isAuthenticated, isGuestMode } = useUser();\n\n  const handleViewAdminDashboard = () => {\n    // Allow everyone to view, including unauthenticated users\n    navigation.navigate('AdminDashboard', { viewOnly: true, hideTopBar: false, hideBottomBar: false });\n  };\n\n  return (\n    <Section id=\"section-hierarchy\" title=\"××‘× ×” ×”× ×™×”×•×œ\" subtitle=\"×”×¦×•×•×ª ×©××•×‘×™×œ ××ª ×”×§×”×™×œ×”\" style={styles.sectionAltBackground}>\n      <View style={styles.hierarchyContainer}>\n        <AdminHierarchyTree />\n      </View>\n      <TouchableOpacity\n        style={[styles.contactButton, { backgroundColor: colors.primary, marginTop: 20 }]}\n        onPress={handleViewAdminDashboard}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"eye-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n        <Text style={styles.contactButtonText}>×œ×××—×•×¨×™ ×”×§×œ×¢×™× ×©×œ KC</Text>\n      </TouchableOpacity>\n    </Section>\n  );\n};\n\nconst RoadmapSection = () => {\n  const roadmapSteps = [\n    {\n      time: 'Q1 2026',\n      label: '×”×•×¦××ª ×’×¨×¡×” ×¨××©×•× ×” ×œ××¤×œ×§×¦×™×” ×œandroid ×•ios',\n      icon: 'phone-portrait-outline',\n      color: colors.info\n    },\n    {\n      time: 'Q2 2026',\n      label: '×¤×™×¦×™×¨×™× ××ª×§×“××™× ×œ×©×™×ª×•×£ ××™×“×¢ ×¢× ×©××¨ ×”×¢××•×ª×•×ª ×•×§×‘×•×¦×•×ª ×”×•×•××˜×¡×¤ ×•×”×¤×™×™×¡×‘×•×§',\n      icon: 'share-social-outline',\n      color: colors.secondary\n    },\n    {\n      time: 'Q3 2026',\n      label: '×©×™×ª×•×¤×™ ×¤×¢×•×œ×” ×¢× ×¢×™×¨×™×•×ª ×•×’×•×¨××™ ×¨×•×•×—×”',\n      icon: 'business-outline',\n      color: colors.accent\n    },\n    {\n      time: 'Q4 2026',\n      label: '×™×¦×™××” ×œ×—×•×´×œ ×›×¤×œ×˜×¤×•×¨××” ×‘×™× ×œ××•××™×ª',\n      icon: 'globe-outline',\n      color: colors.success\n    },\n  ];\n\n  const logoEvolution = [\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-0.jpeg'), label: '×”×ª×—×œ×”' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-1.jpeg'), label: '×¤×™×ª×•×—' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-2.jpeg'), label: '×©×™×¤×•×¨' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-3.jpeg'), label: '×¢×“×›×•×Ÿ' },\n    { image: require('../assets/images/landingScreen/kc_log_evo/logo-4.png'), label: '×¢×›×©×™×•' },\n  ];\n\n  return (\n    <Section id=\"section-roadmap\" title=\"××¤×ª ×”×“×¨×›×™× ×©×œ× ×•\" subtitle=\"×”×ª×•×›× ×™×ª ×œ×”×¨×—×‘×ª ×”××™××¤×§×˜ ×©×œ ×”×§×”×™×œ×”\">\n      <View style={styles.roadmapContainer}>\n        {roadmapSteps.map((step, index) => (\n          <View key={step.label} style={styles.roadmapItemWrapper}>\n            <View style={styles.roadmapItem}>\n              <View style={[styles.roadmapIconContainer, { backgroundColor: step.color + '15' }]}>\n                <Ionicons\n                  name={step.icon as any}\n                  size={isMobileWeb ? 24 : 32}\n                  color={step.color}\n                />\n              </View>\n              <View style={styles.roadmapContent}>\n                <View style={[styles.roadmapTimeBadge, { backgroundColor: step.color }]}>\n                  <Text style={styles.roadmapTimeText}>{step.time}</Text>\n                </View>\n                <Text style={styles.roadmapLabel}>{step.label}</Text>\n              </View>\n            </View>\n            {index < roadmapSteps.length - 1 && (\n              <View style={styles.roadmapConnector}>\n                <View style={[styles.roadmapConnectorLine, { borderColor: step.color + '40' }]} />\n              </View>\n            )}\n          </View>\n        ))}\n      </View>\n\n      {/* Logo Evolution Section */}\n      <View style={styles.logoEvolutionContainer}>\n        <Text style={styles.logoEvolutionTitle}>××™×š ×”×“×‘×¨×™× ××ª×¤×ª×—×™×</Text>\n        <Text style={styles.logoEvolutionSubtitle}>×”×œ×•×’×• ×©×œ× ×• ×¢×‘×¨ ×›××” ×’×¨×¡××•×ª ×‘×“×¨×š ×œ×›××Ÿ</Text>\n        <View style={styles.logoEvolutionGrid}>\n          {logoEvolution.map((logo, index) => (\n            <View key={index} style={styles.logoEvolutionItem}>\n              <Image source={logo.image} style={styles.logoEvolutionImage} resizeMode=\"contain\" />\n              <Text style={styles.logoEvolutionLabel}>{logo.label}</Text>\n            </View>\n          ))}\n        </View>\n      </View>\n\n      <View style={styles.brandStrip}>\n        <Ionicons name=\"rocket-outline\" size={isMobileWeb ? 18 : 24} color={colors.info} />\n        <Text style={styles.trustText}>××ª×§×“××™× ×™×—×“ ×¢× ×”×§×”×™×œ×” â€“ ×›×œ ×¤×™×“×‘×§ ××©×¤×™×¢ ×¢×œ ×¡×“×¨ ×”×¢×“×™×¤×•×™×•×ª ×©×œ× ×•.</Text>\n      </View>\n    </Section>\n  );\n};\n\nconst AboutSection: React.FC = () => (\n  <Section id=\"section-about\" title=\"×§×”×™×œ×” ××—×ª. ××˜×¨×” ××—×ª.\" subtitle=\"×”×¡×™×¤×•×¨ ×©×œ ×§×”×™×œ×ª ×§××¨××”\">\n    <Text style={styles.paragraph}>\n      ×‘×¢×•×œ× ××œ× ×‘×¨×¢×©, ×× ×—× ×• ××××™× ×™× ×‘×›×•×— ×”×©×§×˜ ×©×œ ×¢×©×™×™×ª ×”×˜×•×‘. ×§×”×™×œ×ª ×§××¨××” × ×•×œ×“×” ××ª×•×š ×¦×•×¨×š ×¤×©×•×˜: ×œ×—×‘×¨ ×‘×™×Ÿ ×× ×©×™×. ×‘×™×Ÿ ××œ×” ×©×¦×¨×™×›×™× ×¢×–×¨×”, ×œ×‘×™×Ÿ ××œ×” ×©×™×›×•×œ×™× ×•×¨×•×¦×™× ×œ×”×•×©×™×˜ ×™×“. ×¨××™× ×• ××ª ×”×›×¤×™×œ×•×™×•×ª, ××ª ×—×•×¡×¨ ×”×××•×Ÿ ×•××ª ×”××××¦×™× ×”××¤×•×–×¨×™×, ×•×”×—×œ×˜× ×• ×œ×™×¦×•×¨ ×¤×œ×˜×¤×•×¨××” ××—×ª ×©×××—×“×ª ××ª ×›×•×œ×.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×‘×œ×™ ×¤×¨×¡×•××•×ª, ×‘×œ×™ ××™× ×˜×¨×¡×™×, ×¨×§ ×˜×›× ×•×œ×•×’×™×” ×‘×©×™×¨×•×ª ×”×× ×•×©×™×•×ª. ×”××©×™××” ×©×œ× ×• ×”×™× ×œ×”×¤×•×š ××ª ×”× ×ª×™× ×” ×œ×—×œ×§ ×˜×‘×¢×™ ×•×¤×©×•×˜ ××”×™×•×-×™×•× ×©×œ ×›×•×œ× ×•, ×•×œ×™×¦×•×¨ ×—×‘×¨×” ×™×©×¨××œ×™×ª ××—×•×‘×¨×ª, ×ª×•××›×ª ×•××›×¤×ª×™×ª ×™×•×ª×¨.\n    </Text>\n    <Text style={[styles.sectionSubTitle, { marginTop: 30 }]}>××™×œ×” ××”××™×™×¡×“, × ×•×” ×¡×¨×•×¡×™</Text>\n    <Text style={styles.paragraph}>\n      ××’×™×œ ×¦×¢×™×¨ ×”×¨×’×©×ª×™ ×¤×¨×™×‘×™×œ×’×™×” ×•×©×”×—×™×™× ×©×œ×™ ××¡×•×“×¨×™×. ×“×•×•×§× ×‘×¦×‘×, ×œ××¨×•×ª ×©×”×’×¢×ª×™ ×œ×ª×¤×§×™×“ ×˜×•×‘ ×‘×ª×•×¨ ××ª×›× ×ª ××˜×•×¡×™×, ×œ× ×”×¨×’×©×ª×™ ××ª ×”××©××¢×•×ª ×©×—×™×¤×©×ª×™. ×›×œ ×”×–××Ÿ ×—×©×‘×ª×™ ××™×š ×× ×™ ×™×›×•×œ ×œ×”×‘×™× ×©×™× ×•×™ ×××™×ª×™ ×•×˜×•×‘ ×œ×¢×•×œ×. ×ª××™×“ ×¢× ×™×™×Ÿ ××•×ª×™ ×œ×¢×‘×•×“ ×‘×¡×§×™×™×œ×™× ×’×“×•×œ×™× ×•×œ×”×©×¤×™×¢ ×œ×˜×•×‘×” ×¢×œ ×›××” ×©×™×•×ª×¨ ×× ×©×™×.\n    </Text>\n    <Text style={styles.paragraph}>\n      ×§×”×™×œ×ª ×§××¨××” ×”×™× ×”×“×¨×š ×©×œ×™ ×œ×”×¤×•×š ××ª ×”×˜×•×‘ ×œ× ×’×™×© ×™×•×ª×¨, ×œ×™×¦×•×¨ ×¤×œ×˜×¤×•×¨××” ×©××—×‘×¨×ª ×‘×™×Ÿ ×× ×©×™× ×©×¨×•×¦×™× ×œ×¢×–×•×¨ ×œ×× ×©×™× ×©×¦×¨×™×›×™× ×¢×–×¨×”. ×× ×™ ××××™×Ÿ ×‘×›×•×— ×©×œ ×§×”×™×œ×” ×œ×©× ×•×ª ××¦×™××•×ª, ×•××©××— ×©×ª×¦×˜×¨×¤×• ××œ×™×™ ×œ××¡×¢ ×”×–×”.\n    </Text>\n\n    {/* WhatsApp CTA Button */}\n    <View style={styles.ctaRow}>\n      <TouchableOpacity\n        style={[styles.contactButton, { backgroundColor: colors.success }]}\n        onPress={() => {\n          logger.info('LandingSite', 'Click - whatsapp from founder section');\n          Linking.openURL('https://wa.me/972528616878');\n        }}\n        activeOpacity={0.8}\n      >\n        <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n        <Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n    </View>\n\n    <View style={styles.githubLinkContainer}>\n      <TouchableOpacity\n        style={styles.githubLinkButton}\n        onPress={() => { logger.info('LandingSite', 'Click - github org'); Linking.openURL('https://github.com/KarmaCummunity'); }}\n      >\n        <Ionicons name=\"logo-github\" size={isMobileWeb ? 18 : 24} color={colors.textPrimary} />\n        <View style={styles.githubLinkTextContainer}>\n          <Text style={styles.githubLinkTitle}>×’×™×˜×”××‘ - ×”×§×•×“ ×”×¤×ª×•×—</Text>\n          <Text style={styles.githubLinkDescription}>×–×” ×”×§×•×“ ×©×œ ×”××¤×œ×™×§×¦×™×”. ×›×•×œ× ××•×–×× ×™× ×œ×”×¡×ª×›×œ ×•×œ×¢×–×•×¨</Text>\n        </View>\n        <Ionicons name=\"arrow-forward-outline\" size={isMobileWeb ? 16 : 20} color={colors.info} />\n      </TouchableOpacity>\n    </View>\n  </Section>\n);\n\nconst GallerySection = () => (\n  <Section title=\"×¨×’×¢×™× ××”×§×”×™×œ×”\" subtitle=\"×ª××•× ×•×ª ×©×©×•×•×ª ××œ×£ ××™×œ×™×\">\n    <View style={styles.galleryGrid}>\n      <Image source={require('../assets/images/landingScreen/found-money.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n      <Image source={require('../assets/images/landingScreen/together.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n      <Image source={require('../assets/images/landingScreen/toy_donation.png')} style={styles.galleryImage} resizeMode=\"cover\" />\n    </View>\n  </Section>\n);\n\nconst PartnersSection = () => (\n  <Section title=\"×‘×™×—×“ ×™×•×¦×¨×™× ×©×™× ×•×™\" subtitle=\"×’××™× ×œ×©×ª×£ ×¤×¢×•×œ×” ×¢× ××¨×’×•× ×™× ×©×—×•×œ×§×™× ××ª ×”×—×–×•×Ÿ ×©×œ× ×•\" style={styles.sectionAltBackground}>\n    <View style={styles.partnersContainer}>\n      <View style={styles.partnerCard}>\n        <Image source={require('../assets/images/landingScreen/jgive-logo.png')} style={styles.partnerLogo} resizeMode=\"contain\" />\n      </View>\n    </View>\n  </Section>\n);\n\nconst InstagramSection = () => {\n  const [webViewKey, setWebViewKey] = useState(0);\n\n  return (\n    <Section id=\"section-instagram\" title=\"×¢×§×‘×• ××—×¨×™× ×• ×‘××™× ×¡×˜×’×¨×\" subtitle=\"×ª××•× ×•×ª ×•×¡×¨×˜×•× ×™× ××”×§×”×™×œ×” ×©×œ× ×•\" style={styles.sectionAltBackground}>\n      <View style={styles.instagramContainer}>\n        {isWeb ? (\n          <View style={styles.instagramWebViewContainer}>\n            <WebView\n              key={webViewKey}\n              source={{ uri: 'https://www.instagram.com/karma_community_/' }}\n              style={styles.instagramWebView}\n              javaScriptEnabled={true}\n              domStorageEnabled={true}\n              startInLoadingState={true}\n              renderLoading={() => (\n                <View style={styles.instagramLoadingContainer}>\n                  <ActivityIndicator size=\"large\" color={colors.secondary} />\n                  <Text style={styles.instagramLoadingText}>×˜×•×¢×Ÿ ××™× ×¡×˜×’×¨×...</Text>\n                </View>\n              )}\n              onError={() => {\n                logger.error('LandingSite', 'Instagram WebView error');\n                setWebViewKey(prev => prev + 1); // Retry\n              }}\n            />\n          </View>\n        ) : (\n          <View style={styles.instagramFallback}>\n            <Ionicons name=\"logo-instagram\" size={isMobileWeb ? 48 : 64} color={colors.secondary} />\n            <Text style={styles.instagramFallbackText}>\n              ×¢×§×‘×• ××—×¨×™× ×• ×‘××™× ×¡×˜×’×¨×\n            </Text>\n            <TouchableOpacity\n              style={[styles.contactButton, { backgroundColor: colors.secondary }]}\n              onPress={() => {\n                logger.info('LandingSite', 'Click - instagram from section');\n                Linking.openURL('https://www.instagram.com/karma_community_/');\n              }}\n            >\n              <Ionicons name=\"logo-instagram\" color={colors.white} size={isMobileWeb ? 14 : 18} />\n              <Text style={styles.contactButtonText}>×¤×ª×— ×‘××™× ×¡×˜×’×¨×</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n    </Section>\n  );\n};\n\n\n\nconst FAQItem: React.FC<{ question: string; answer: string; icon?: string }> = ({ question, answer, icon }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const animatedHeight = useRef(new Animated.Value(0)).current;\n  const animatedRotation = useRef(new Animated.Value(0)).current;\n\n  const toggleExpanded = () => {\n    const toValue = isExpanded ? 0 : 1;\n    Animated.parallel([\n      Animated.timing(animatedHeight, {\n        toValue,\n        duration: 300,\n        useNativeDriver: false,\n      }),\n      Animated.timing(animatedRotation, {\n        toValue,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n    ]).start();\n    setIsExpanded(!isExpanded);\n  };\n\n  const contentHeight = animatedHeight.interpolate({\n    inputRange: [0, 1],\n    outputRange: [0, 200], // Max height for answer\n  });\n\n  const rotateInterpolate = animatedRotation.interpolate({\n    inputRange: [0, 1],\n    outputRange: ['0deg', '180deg'],\n  });\n\n  return (\n    <View style={styles.faqCard}>\n      <TouchableOpacity\n        style={styles.faqQuestionRow}\n        onPress={toggleExpanded}\n        activeOpacity={0.7}\n      >\n        <View style={styles.faqQuestionContent}>\n          {icon && (\n            <Ionicons\n              name={icon as any}\n              size={isMobileWeb ? 20 : 24}\n              color={colors.info}\n              style={styles.faqIcon}\n            />\n          )}\n          <Text style={styles.faqQ}>{question}</Text>\n        </View>\n        <Animated.View style={{ transform: [{ rotate: rotateInterpolate }] }}>\n          <Ionicons\n            name=\"chevron-down-outline\"\n            size={isMobileWeb ? 20 : 24}\n            color={colors.info}\n          />\n        </Animated.View>\n      </TouchableOpacity>\n      <Animated.View style={[styles.faqAnswerContainer, { maxHeight: contentHeight, opacity: animatedHeight }]}>\n        <Text style={styles.faqA}>{answer}</Text>\n      </Animated.View>\n    </View>\n  );\n};\n\nconst FAQSection = () => {\n  const faqData = [\n    {\n      question: '×”×× ×”×©×™××•×© ×‘××¤×œ×™×§×¦×™×” ×¢×•×œ×” ×›×¡×£?',\n      answer: '×œ×. ×§×”×™×œ×ª ×§××¨××” ×”×™× ××™×–× ×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×•×”×©×™××•×© ×‘×” ×™×”×™×” ×ª××™×“ ×‘×—×™× ×, ×œ×›×•×œ×. ×× ×—× ×• ××××™× ×™× ×©×¢×–×¨×” ×”×“×“×™×ª ×¦×¨×™×›×” ×œ×”×™×•×ª × ×’×™×©×” ×œ×›×•×œ×, ×œ×œ× ×›×œ ×¢×œ×•×ª.',\n      icon: 'cash-outline',\n    },\n    {\n      question: '××™×š ××¤×©×¨ ×œ×ª×¨×•× ××• ×œ×”×ª× ×“×‘?',\n      answer: '×”×“×¨×š ×”×˜×•×‘×” ×‘×™×•×ª×¨ ×”×™× ×œ×”×•×¨×™×“ ××ª ×”××¤×œ×™×§×¦×™×”, ×œ×”×¦×˜×¨×£ ×œ×§×”×™×œ×” ×•×œ×”×ª×—×™×œ ×œ×”×’×™×‘ ×œ×‘×§×©×•×ª ×©×¢×•×œ×•×ª. ×‘× ×•×¡×£, ×ª××™×“ ××¤×©×¨ ×œ×™×¦×•×¨ ××™×ª× ×• ×§×©×¨ ×™×©×™×¨×•×ª ×“×¨×š ×•×•×˜×¡××¤, ××™×™×œ ××• ×œ×§×‘×•×¦×ª ×”×•×•×˜×¡××¤ ×©×œ× ×•. ×›×œ ×¢×–×¨×” ××•×¢×¨×›×ª!',\n      icon: 'heart-outline',\n    },\n    {\n      question: '×”×× ×”××¤×œ×™×§×¦×™×” ×–××™× ×” ×’× ×œ×× ×“×¨×•××™×“ ×•×’× ×œ-iOS?',\n      answer: '×”××¤×œ×™×§×¦×™×” × ××¦××ª ×›×¨×’×¢ ×‘×ª×”×œ×™×š ×‘× ×™×™×”. ×‘×™× ×ª×™×™×, ×™×© ×œ× ×• ××ª×¨ Web ×–××™×Ÿ ×œ×©×™××•×© ×©× ×™×ª×Ÿ ×œ×’×©×ª ××œ×™×• ××›×œ ×“×¤×“×¤×Ÿ, ×’× ×”×•× ×‘×ª×”×œ×™×š ×‘× ×™×™×” ×•×”×ª×¤×ª×—×•×ª ××ª××©×›×ª. ×× ×• ×¢×•×‘×“×™× ×¢×œ ×’×¨×¡××•×ª ×œ×× ×“×¨×•××™×“ ×•-iOS ×©×™×•×©×§×• ×‘×¢×ª×™×“.',\n      icon: 'phone-portrait-outline',\n    },\n    {\n      question: '×”×× ×™×© ×¤×¨×¡×•××•×ª?',\n      answer: '×××© ×œ×. ×”×¤×œ×˜×¤×•×¨××” × ×§×™×™×” ×œ×—×œ×•×˜×™×Ÿ ××¤×¨×¡×•××•×ª ×•××§×“×©×ª ×ª×•×›×Ÿ ×§×”×™×œ×ª×™ ×‘×œ×‘×“. ×× ×—× ×• ××—×•×™×‘×™× ×œ×©××•×¨ ×¢×œ ×—×•×•×™×™×ª ××©×ª××© × ×§×™×™×” ×•×××•×§×“×ª ×‘×§×”×™×œ×”, ×œ×œ× ×”×¡×—×•×ª ×“×¢×ª ××¡×—×¨×™×•×ª.',\n      icon: 'ban-outline',\n    },\n    {\n      question: '××™×š ××ª×—×™×œ×™× ×œ×”×©×ª××© ×‘××¤×œ×™×§×¦×™×”?',\n      answer: '×¤×©×•×˜ ×××•×“! ×”×•×¨×™×“×• ××ª ×”××¤×œ×™×§×¦×™×”, ×”×™×¨×©××• ×¢× ×›××” ×¤×¨×˜×™× ×‘×¡×™×¡×™×™× (××• ×”×©×ª××©×• ×‘××¦×‘ ××•×¨×—), ×•××™×“ ×ª×•×›×œ×• ×œ×”×ª×—×™×œ ×œ×¤×¨×¡× ×‘×§×©×•×ª ××• ×”×¦×¢×•×ª, ××• ×œ×“×¤×“×£ ×•×œ×’×œ×•×ª ××” ×§×•×¨×” ×‘×§×”×™×œ×” ×¡×‘×™×‘×›×.',\n      icon: 'play-circle-outline',\n    },\n    {\n      question: '××” ×–×” ××•××¨ \"×§×™×‘×•×¥ ×“×™×’×™×˜×œ×™\"?',\n      answer: '×–×” ×”×—×–×•×Ÿ ×©×œ× ×• - ×œ×™×¦×•×¨ ×§×”×™×œ×” ×“×™×’×™×˜×œ×™×ª ×©××ª×¤×§×“×ª ×›××• ×§×™×‘×•×¥: ×©×™×ª×•×£, ×¢×–×¨×” ×”×“×“×™×ª, ××—×¨×™×•×ª ××©×•×ª×¤×ª, ××‘×œ ×‘×¢×•×œ× ×”××•×“×¨× ×™ ×•×”×“×™×’×™×˜×œ×™. ×›×œ ××—×“ ×™×›×•×œ ×œ×ª×ª ×•×›×œ ××—×“ ×™×›×•×œ ×œ×§×‘×œ, ×‘×œ×™ ×‘×™×¨×•×§×¨×˜×™×” ×•×‘×œ×™ ×¢××œ×•×ª.',\n      icon: 'people-circle-outline',\n    },\n    {\n      question: '××™×š ××ª× ××‘×˜×™×—×™× ××‘×˜×—×” ×•×¤×¨×˜×™×•×ª?',\n      answer: '×× ×—× ×• ×œ×•×§×—×™× ××ª ×”××‘×˜×—×” ×•×”×¤×¨×˜×™×•×ª ×‘×¨×¦×™× ×•×ª ×¨×‘×”. ×›×œ ×”××™×“×¢ ××•×¦×¤×Ÿ, ×× ×—× ×• ×œ× ××©×ª×¤×™× ××™×“×¢ ×¢× ×¦×“×“×™× ×©×œ×™×©×™×™×, ×•×™×© ×œ× ×• ××¢×¨×›×ª ××™××•×ª ××©×ª××©×™×. ×‘× ×•×¡×£, ×›×œ ×”××©×ª××©×™× ×™×›×•×œ×™× ×œ×©×œ×•×˜ ×‘×¤×¨×˜×™×•×ª ×©×œ×”× ×•×œ×”×—×œ×™×˜ ××” ×œ×—×©×•×£.',\n      icon: 'shield-checkmark-outline',\n    },\n    {\n      question: '××” ×”×”×‘×“×œ ×‘×™×Ÿ Karma Community ×œ×‘×™×Ÿ ×¤×œ×˜×¤×•×¨××•×ª ××—×¨×•×ª?',\n      answer: '×”×”×‘×“×œ ×”×¢×™×§×¨×™ ×”×•× ×©×× ×—× ×• ×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×œ×œ× ×¤×¨×¡×•××•×ª, ×•×××•×§×“×™× 100% ×‘×§×”×™×œ×” ×•×‘×¢×–×¨×” ×”×“×“×™×ª. ×× ×—× ×• ×œ× ××•×›×¨×™× ××™×“×¢, ×œ× ×× ×¡×™× ×œ×”×¨×•×•×™×— ×›×¡×£ ××”××©×ª××©×™×, ×•×›×œ ××” ×©×× ×—× ×• ×¢×•×©×™× ×”×•× ×œ××¢×Ÿ ×”×§×”×™×œ×”.',\n      icon: 'star-outline',\n    },\n    {\n      question: '××™×š ××¤×©×¨ ×œ×¢×–×•×¨ ×‘×¤×™×ª×•×— ×”××¤×œ×™×§×¦×™×”?',\n      answer: '×× ×—× ×• ×ª××™×“ ×©××—×™× ×œ×¢×–×¨×”! ××¤×©×¨ ×œ×¢×–×•×¨ ×‘×§×•×“ (×”×›×œ ×¤×ª×•×— ×‘×’×™×˜×”××‘), ×‘×¢×™×¦×•×‘, ×‘×ª×•×›×Ÿ, ×‘×‘×“×™×§×•×ª, ××• ×¤×©×•×˜ ×œ×”×™×•×ª ×—×œ×§ ××”×§×”×™×œ×” ×•×œ×©×ª×£ ×¤×™×“×‘×§. ×¦×¨×• ××™×ª× ×• ×§×©×¨ ×“×¨×š ×•×•×˜×¡××¤ ××• ××™×™×œ ×•× ×©××— ×œ×¡×¤×¨ ×œ×›× ××™×š ××¤×©×¨ ×œ×¢×–×•×¨.',\n      icon: 'code-working-outline',\n    },\n    {\n      question: '××” ×§×•×¨×” ×× ×™×© ×‘×¢×™×” ×˜×›× ×™×ª?',\n      answer: '×× × ×ª×§×œ×ª× ×‘×‘×¢×™×” ×˜×›× ×™×ª, ×× ×—× ×• ×›××Ÿ ×œ×¢×–×•×¨! ×¦×¨×• ××™×ª× ×• ×§×©×¨ ×“×¨×š ×•×•×˜×¡××¤, ××™×™×œ, ××• ×“×¨×š ×§×‘×•×¦×ª ×”×•×•×˜×¡××¤ ×©×œ× ×•. × ×©×ª×“×œ ×œ×¢× ×•×ª ××”×¨ ×›×›×œ ×”××¤×©×¨ ×•×œ×¤×ª×•×¨ ××ª ×”×‘×¢×™×”. ×”×¤×™×“×‘×§ ×©×œ×›× ×—×©×•×‘ ×œ× ×• ×××•×“!',\n      icon: 'help-circle-outline',\n    },\n  ];\n\n  return (\n    <Section id=\"section-faq\" title=\"×©××œ×•×ª ×•×ª×©×•×‘×•×ª\" subtitle=\"×›×œ ××” ×©×¨×¦×™×ª× ×œ×“×¢×ª ×¢×œ Karma Community\">\n      <View style={styles.faqContainer}>\n        {faqData.map((item, index) => (\n          <FAQItem\n            key={index}\n            question={item.question}\n            answer={item.answer}\n            icon={item.icon}\n          />\n        ))}\n      </View>\n    </Section>\n  );\n};\n\nconst ContactSection = () => (\n  <Section id=\"section-contact\" title=\"×“×‘×¨×• ××™×ª× ×• ×•×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×” ×©×¢×•×©×” ×˜×•×‘\" subtitle=\"× ×©××— ×œ×©××•×¢ ××›×, ×œ×§×‘×œ ×¤×™×“×‘×§ ××• ××• ×‘×™×§×•×¨×ª ×•×›××•×‘×Ÿ ×œ×—×‘×¨ ××ª×›× ×œ×§×”×™×œ×”\" style={styles.sectionAltBackground}>\n    <View style={styles.contactRow}>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp direct'); Linking.openURL('https://wa.me/972528616878'); }}>\n        <Ionicons name=\"logo-whatsapp\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.info }]} onPress={() => { logger.info('LandingSite', 'Click - email'); Linking.openURL('mailto:navesarussi@gmail.com'); }}>\n        <Ionicons name=\"mail-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×©×œ×—×• ×œ×™ ××™×™×œ</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.secondary }]} onPress={() => { logger.info('LandingSite', 'Click - instagram'); Linking.openURL('https://www.instagram.com/karma_community_/'); }}>\n        <Ionicons name=\"logo-instagram\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×¢×§×‘×• ×‘××™× ×¡×˜×’×¨×</Text>\n      </TouchableOpacity>\n      <TouchableOpacity style={[styles.contactButton, { backgroundColor: colors.success }]} onPress={() => { logger.info('LandingSite', 'Click - whatsapp group'); Linking.openURL('https://chat.whatsapp.com/Hi2TpFcO5huKVKarvecz00'); }}>\n        <Ionicons name=\"chatbubbles-outline\" color={colors.white} size={isMobileWeb ? 14 : 18} /><Text style={styles.contactButtonText}>×”×¦×˜×¨×¤×• ×œ×§×‘×•×¦×ª ×•×•×˜×¡××¤</Text>\n      </TouchableOpacity>\n    </View>\n  </Section>\n);\n\n{/* <Section title=\"×”×¦×˜×¨×¤×• ×œ×§×”×™×œ×” ×©×¢×•×©×” ×˜×•×‘\" subtitle=\"×›×œ ××—×“ ×™×›×•×œ ×œ×”×©×¤×™×¢. ×‘×•××• × ×‘× ×” ××ª ×–×” ×™×—×“.\" style={styles.sectionAltBackground}> */ }\n\nconst LandingSiteScreen: React.FC = () => {\n  logger.debug('LandingSite', 'Component rendered', undefined, { periodic: true });\n\n  const { setMode } = useWebMode();\n  const navigation = useNavigation<any>();\n  const { isAuthenticated, isGuestMode, isAdmin } = useUser();\n\n  const [stats, setStats] = useState<LandingStats>({\n    siteVisits: 0,\n    totalMoneyDonated: 0,\n    totalUsers: 0,\n    itemDonations: 0,\n    completedRides: 0,\n    recurringDonationsAmount: 0,\n    uniqueDonors: 0,\n    completedTasks: 0,\n  });\n  const [isLoadingStats, setIsLoadingStats] = useState(true);\n  const [activeSection, setActiveSection] = useState<string | null>(null);\n  const statsVersionRef = useRef<string>(''); // Use ref instead of state to prevent unnecessary re-renders\n  const [showDonationModal, setShowDonationModal] = useState(false);\n  const scrollViewRef = useRef<ScrollView | null>(null);\n  const scrollSpyObserverRef = useRef<IntersectionObserver | null>(null);\n  const observedElementsRef = useRef<Set<HTMLElement>>(new Set());\n\n  // Ensure top bar and bottom bar are visible when this screen is focused\n  // This fixes the issue where bars disappear when navigating from TopBar's AboutButton\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ  LandingSiteScreen - Screen focused, ensuring bars are visible');\n      navigation.setParams({\n        hideTopBar: false,\n        hideBottomBar: false,\n      });\n    }, [navigation])\n  );\n\n  // Handle navigation to app mode\n  const handleGoToApp = async () => {\n    logger.info('LandingSiteScreen', 'Navigate to app mode', { isAuthenticated, isGuestMode });\n    setMode('app');\n\n    // Determine target route based on authentication status\n    const targetRoute = (isAuthenticated || isGuestMode) ? 'HomeStack' : 'LoginScreen';\n\n    // Check guards before navigation\n    const guardContext = {\n      isAuthenticated,\n      isGuestMode,\n      isAdmin,\n      mode: 'app' as const,\n    };\n\n    const guardResult = await checkNavigationGuards(\n      {\n        type: 'reset',\n        index: 0,\n        routes: [{ name: targetRoute }],\n      },\n      guardContext\n    );\n\n    if (!guardResult.allowed) {\n      // If guard blocks, try redirect if provided\n      if (guardResult.redirectTo) {\n        await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n      }\n      return;\n    }\n\n    // Use navigation queue with high priority (2) for mode changes\n    await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n  };\n\n  // Handle navigation from floating menu\n  const handleNavigate = (sectionId: string) => {\n    logger.info('LandingSiteScreen', `Navigate to section: ${sectionId}`, {\n      isWeb,\n      hasScrollRef: !!scrollViewRef.current,\n      platform: Platform.OS,\n    });\n\n    // For web, use DOM scrolling with container targeting to prevent window scroll\n    if (isWeb) {\n      const scrollToSection = (retryCount = 0) => {\n        try {\n          if (sectionId === 'top') {\n            // Find the specific scroll container specifically to avoid window scrolling\n            const scrollContainer = document.querySelector('[data-scroll-container=\"true\"]');\n            if (scrollContainer) {\n              scrollContainer.scrollTo({ top: 0, behavior: 'smooth' });\n              setActiveSection(sectionId);\n              logger.info('LandingSiteScreen', 'Scrolled to top via container');\n            } else {\n              // Fallback if container not found\n              window.scrollTo({ top: 0, behavior: 'smooth' });\n            }\n            return;\n          }\n\n          const element = getSectionElement(sectionId);\n          logger.info('LandingSiteScreen', `Found element for ${sectionId}:`, {\n            found: !!element,\n            elementId: element?.id || element?.getAttribute?.('data-nativeid') || null,\n            retryCount,\n          });\n\n          if (element) {\n            // Find the nearest scrollable parent explicitly\n            let parent = element.parentElement;\n            let scrollContainer: HTMLElement | null = null;\n\n            while (parent) {\n              const style = window.getComputedStyle(parent);\n              // Check for our specific scroll container or general overflow\n              if (\n                parent.getAttribute('data-scroll-container') === 'true' ||\n                style.overflowY === 'auto' ||\n                style.overflowY === 'scroll'\n              ) {\n                scrollContainer = parent;\n                break;\n              }\n              parent = parent.parentElement;\n            }\n\n            if (scrollContainer) {\n              // Calculate position relative to the container\n              // We need to account for the element's position inside the container\n              const containerRect = scrollContainer.getBoundingClientRect();\n              const elementRect = element.getBoundingClientRect();\n\n              // Current scroll position + difference in tops\n              const scrollTop = scrollContainer.scrollTop + (elementRect.top - containerRect.top);\n\n              // Add a small offset for breathing room (e.g., 20px)\n              const offset = 20;\n\n              scrollContainer.scrollTo({\n                top: scrollTop - offset,\n                behavior: 'smooth',\n              });\n\n              setActiveSection(sectionId);\n              logger.info('LandingSiteScreen', `Scrolled to section via container: ${sectionId}`);\n            } else {\n              // Fallback to scrollIntoView only if no container found (unlikely in our app structure)\n              // Use block: 'center' to avoid aggressive top alignment that might pull the window\n              element.scrollIntoView({\n                behavior: 'smooth',\n                block: 'start',\n              });\n              setActiveSection(sectionId);\n              logger.warn('LandingSiteScreen', 'Scroll container not found, using scrollIntoView fallback');\n            }\n          } else if (retryCount < 10) {\n            // Retry if element not found yet (DOM might still be rendering)\n            setTimeout(() => scrollToSection(retryCount + 1), 100);\n            logger.info('LandingSiteScreen', `Retrying to find section: ${sectionId}, attempt ${retryCount + 1}`);\n          } else {\n            logger.warn('LandingSiteScreen', `Section not found after ${retryCount} retries: ${sectionId}`);\n          }\n        } catch (error) {\n          logger.error('LandingSiteScreen', 'Error scrolling to section', { error, sectionId });\n        }\n      };\n\n      scrollToSection();\n    } else {\n      // For native, use ScrollView ref\n      if (sectionId === 'top' && scrollViewRef.current) {\n        scrollViewRef.current.scrollTo?.({ y: 0, animated: true });\n        logger.info('LandingSiteScreen', 'Scrolled to top via ScrollView ref');\n      } else {\n        // Should implemented map of refs for sections if needed for native\n        // But currently this feature is mostly for web landing page\n        logger.warn('LandingSiteScreen', 'Native scrolling not implemented for specific sections');\n      }\n    }\n  };\n\n  // Shared loadStats function - used by both initial load and auto-refresh\n  // ×¤×•× ×§×¦×™×” ××©×•×ª×¤×ª ×œ×˜×¢×™× ×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª - ××©××©×ª ×’× ×œ×˜×¢×™× ×” ×¨××©×•× ×™×ª ×•×’× ×œ×¨×¢× ×•×Ÿ ××•×˜×•××˜×™\n  const loadStats = useCallback(async (forceRefresh = false) => {\n    try {\n      setIsLoadingStats(true);\n      logger.info('LandingSite', 'Loading stats', { forceRefresh });\n      const communityStats = await EnhancedStatsService.getCommunityStats({}, forceRefresh);\n\n      // Extract values - handle both direct values and nested value objects\n      // ×ª××™×›×” ×‘×©× ×™ ×¤×•×¨××˜×™×: ××¡×¤×¨ ×™×©×™×¨ ××• ××•×‘×™×™×§×˜ ×¢× ×©×“×” value\n      // Support for two formats: direct number or object with value field\n      const getValue = (stat: any): number => {\n        if (typeof stat === 'number') return stat;\n        if (stat && typeof stat === 'object' && 'value' in stat) return stat.value || 0;\n        return 0;\n      };\n\n      const statsData = {\n        siteVisits: getValue(communityStats.siteVisits) || 0,\n        totalMoneyDonated: getValue(communityStats.totalMoneyDonated) || 0,\n        totalUsers: getValue(communityStats.totalUsers) || 0,\n        itemDonations: getValue(communityStats.itemDonations) || 0,\n        completedRides: getValue(communityStats.completedRides) || 0,\n        recurringDonationsAmount: getValue(communityStats.recurringDonationsAmount) || 0,\n        uniqueDonors: getValue(communityStats.uniqueDonors) || 0,\n        completedTasks: getValue(communityStats.completed_tasks) || 0,\n      };\n\n      logger.info('LandingSite', 'Stats loaded', statsData, { periodic: true });\n      setStats(statsData);\n    } catch (error) {\n      logger.error('LandingSite', 'Failed to load stats', { error });\n      // Keep default values (0) on error\n    } finally {\n      setIsLoadingStats(false);\n    }\n  }, []);\n\n  // Smart polling - only refresh when stats actually change\n  // ×‘×“×™×§×” ×—×›××” - ×¨×§ ××¨×¢× ×Ÿ ×›×©×™×© ×©×™× ×•×™ ×××™×ª×™ ×‘×¡×˜×˜×™×¡×˜×™×§×•×ª\n  useEffect(() => {\n    if (!USE_BACKEND) {\n      logger.info('LandingSite', 'Backend not available, skipping smart polling');\n      return;\n    }\n\n    logger.info('LandingSite', 'Setting up smart polling (checks every 30 seconds)');\n\n    const checkForUpdates = async () => {\n      try {\n        // Lightweight check - only gets version hash\n        const response = await apiService.getCommunityStatsVersion();\n        if (response.success && response.version) {\n          const newVersion = response.version;\n          const currentVersion = statsVersionRef.current;\n\n          // Only reload if version actually changed\n          if (currentVersion && newVersion !== currentVersion) {\n            logger.info('LandingSite', 'Stats version changed, reloading...', {\n              oldVersion: currentVersion,\n              newVersion: newVersion\n            });\n            await loadStats(true); // Force refresh to get latest data\n            // Update version ref only after successful reload\n            statsVersionRef.current = newVersion;\n          } else if (!currentVersion) {\n            // First time - set initial version without reloading (stats already loaded on mount)\n            statsVersionRef.current = newVersion;\n            logger.info('LandingSite', 'Initial stats version set', { version: newVersion });\n          }\n          // If version didn't change, do nothing - no re-render needed\n        }\n      } catch (error) {\n        logger.error('LandingSite', 'Failed to check stats version', { error });\n      }\n    };\n\n    // Check immediately on mount (but don't reload if stats already loaded)\n    checkForUpdates();\n\n    // Set up interval to check for updates every 30 seconds (reduced from 5 seconds to prevent excessive checks)\n    // Only reloads if version actually changed in database\n    const pollInterval = setInterval(checkForUpdates, 30000);\n\n    // Cleanup interval on unmount\n    return () => {\n      logger.info('LandingSite', 'Clearing smart polling interval');\n      clearInterval(pollInterval);\n    };\n  }, [loadStats]); // Removed statsVersion from dependencies to prevent re-renders\n\n  useEffect(() => {\n    logger.info('LandingSite', 'useEffect triggered - Landing page mounted', { isWeb, USE_BACKEND });\n\n    // Use sessionStorage to prevent double tracking across all instances\n    // ×©×™××•×© ×‘-sessionStorage ×œ×× ×™×¢×ª ×¡×¤×™×¨×” ×›×¤×•×œ×” ×‘×›×œ ×”-instances\n    const VISIT_TRACKED_KEY = 'kc_site_visit_tracked';\n\n    // Track site visit - only on web and if backend is available\n    // ×¡×¤×™×¨×ª ×‘×™×§×•×¨ ×‘××ª×¨ - ×¨×§ ×‘-web ×•×× ×”×©×¨×ª ×–××™×Ÿ\n    // ×©×™× ×•×™: ×©×™××•×© ×‘-sessionStorage ×œ×× ×™×¢×ª ×›×¤×™×œ×•×ª ×‘×›×œ ×”-instances\n    // Change: Use sessionStorage to prevent double tracking across all instances\n    const trackVisitAndLoadStats = async () => {\n      // Check if visit already tracked in this session (shared across all component instances)\n      // ×‘×“×™×§×” ×× ×”×‘×™×§×•×¨ ×›×‘×¨ × ×¡×¤×¨ ×‘-session ×–×” (××©×•×ª×£ ×œ×›×œ ×”-instances ×©×œ ×”×§×•××¤×•× × ×˜×”)\n      const visitTracked = isWeb && typeof window !== 'undefined'\n        ? sessionStorage.getItem(VISIT_TRACKED_KEY) === 'true'\n        : false;\n\n      if (visitTracked) {\n        logger.info('LandingSite', 'Visit already tracked in this session, skipping');\n        await loadStats(false);\n        return;\n      }\n\n      if (isWeb && USE_BACKEND) {\n        try {\n          // Mark as tracked immediately in sessionStorage to prevent double calls\n          // ×¡×™××•×Ÿ ×›× ×¡×¤×¨ ××™×“ ×‘-sessionStorage ×›×“×™ ×œ×× ×•×¢ ×§×¨×™××•×ª ×›×¤×•×œ×•×ª\n          if (typeof window !== 'undefined') {\n            sessionStorage.setItem(VISIT_TRACKED_KEY, 'true');\n          }\n\n          logger.info('LandingSite', 'Tracking site visit...');\n          const response = await apiService.trackSiteVisit();\n          if (response.success) {\n            logger.info('LandingSite', 'Site visit tracked successfully');\n            // Reload stats with forceRefresh to get updated site_visits count\n            // ×˜×¢×™× ×” ××—×“×© ×©×œ ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¢× forceRefresh ×›×“×™ ×œ×§×‘×œ ××ª ××¡×¤×¨ ×”×‘×™×§×•×¨×™× ×”××¢×•×“×›×Ÿ\n            await loadStats(true);\n          } else {\n            logger.warn('LandingSite', 'Site visit tracking failed', { error: response.error });\n            // Reset flag on failure so we can retry\n            // ××™×¤×•×¡ ×”×“×’×œ ×‘×›×©×œ ×›×“×™ ×©× ×•×›×œ ×œ× ×¡×•×ª ×©×•×‘\n            if (typeof window !== 'undefined') {\n              sessionStorage.removeItem(VISIT_TRACKED_KEY);\n            }\n            // Still load stats even if tracking failed\n            await loadStats(false);\n          }\n        } catch (error) {\n          logger.error('LandingSite', 'Failed to track site visit', { error });\n          // Reset flag on error so we can retry\n          // ××™×¤×•×¡ ×”×“×’×œ ×‘×©×’×™××” ×›×“×™ ×©× ×•×›×œ ×œ× ×¡×•×ª ×©×•×‘\n          if (typeof window !== 'undefined') {\n            sessionStorage.removeItem(VISIT_TRACKED_KEY);\n          }\n          // Still load stats even if tracking failed\n          await loadStats(false);\n        }\n      } else {\n        // If not web or backend not available, just load stats\n        logger.info('LandingSite', 'Skipping site visit tracking', { isWeb, USE_BACKEND });\n        await loadStats(false);\n      }\n    };\n\n    trackVisitAndLoadStats();\n\n    return () => {\n      logger.info('LandingSite', 'Landing page unmounted');\n    };\n  }, []);\n\n\n  // Scroll Spy - Track which section is currently in view\n  useEffect(() => {\n    if (!isWeb) return; // Works on all web screens including mobile\n\n    const sectionIds = ['stats', 'vision', 'problems', 'features', 'about', 'how', 'who', 'values', 'core-mottos', 'hierarchy', 'roadmap', 'contact', 'faq'];\n\n    // Create Intersection Observer\n    const observerOptions = {\n      root: null, // viewport\n      rootMargin: '-20% 0px -70% 0px', // Trigger when section is in middle third of viewport\n      threshold: 0,\n    };\n\n    const observerCallback = (entries: IntersectionObserverEntry[]) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const targetElement = entry.target as HTMLElement;\n          const identifier = targetElement.id || targetElement.getAttribute('data-nativeid') || '';\n          const sectionId = identifier.replace('section-', '');\n          if (!sectionId) {\n            return;\n          }\n          logger.info('ScrollSpy', `Section ${sectionId} is now in view`);\n          setActiveSection(sectionId);\n        }\n      });\n    };\n\n    const observer = new IntersectionObserver(observerCallback, observerOptions);\n    const observedElements = observedElementsRef.current;\n    observedElements.clear();\n    scrollSpyObserverRef.current = observer;\n\n    const observeSection = (id: string, retryCount = 0) => {\n      const element = getSectionElement(id);\n      if (element) {\n        if (!observedElements.has(element)) {\n          observer.observe(element);\n          observedElements.add(element);\n          logger.info('ScrollSpy', `Observing section: ${id}`);\n        }\n        return true;\n      }\n\n      // Retry if element not found yet (DOM might still be rendering)\n      // × ×™×¡×™×•×Ÿ ×—×•×–×¨ ×× ×”××œ×× ×˜ ×¢×“×™×™×Ÿ ×œ× × ××¦× (DOM ×¢×“×™×™×Ÿ ×™×›×•×œ ×œ×”×™×•×ª ×‘×ª×”×œ×™×š ×¨×™× ×“×•×¨)\n      if (retryCount < 20) {\n        setTimeout(() => observeSection(id, retryCount + 1), 100);\n        if (retryCount === 0) {\n          logger.info('ScrollSpy', `Section not found yet: ${id}, will retry`);\n        }\n      } else {\n        logger.warn('ScrollSpy', `Section not found after ${retryCount} retries: ${id}`);\n      }\n      return false;\n    };\n\n    // Observe all sections initially\n    sectionIds.forEach((id) => {\n      observeSection(id);\n    });\n\n    let mutationObserver: MutationObserver | null = null;\n    if (typeof MutationObserver !== 'undefined') {\n      mutationObserver = new MutationObserver(() => {\n        sectionIds.forEach(id => observeSection(id));\n      });\n      mutationObserver.observe(document.body, { childList: true, subtree: true });\n    }\n\n    // Cleanup\n    return () => {\n      logger.info('ScrollSpy', 'Cleaning up observers');\n      observer.disconnect();\n      observedElements.clear();\n      scrollSpyObserverRef.current = null;\n      mutationObserver?.disconnect();\n    };\n  }, [isWeb]);\n\n  return (\n    <ScreenWrapper style={styles.container}>\n      {/* Floating Navigation Menu */}\n      {/* Floating Navigation Menu - Shown only for authenticated users (who don't see the top bar) */}\n      {isAuthenticated && !isGuestMode && <FloatingMenu onNavigate={handleNavigate} activeSection={activeSection} />}\n\n      {/* Donation Modal */}\n      <DonationModal\n        visible={showDonationModal}\n        onClose={() => setShowDonationModal(false)}\n      />\n\n      <ScrollContainer\n        scrollRef={scrollViewRef}\n        style={styles.scrollContainer}\n        contentStyle={styles.content}\n        onContentSizeChange={(w, h) => logger.info('LandingSite', 'Content size changed', { width: w, height: h })}\n      >\n        <HeroSection onDonate={() => setShowDonationModal(true)} />\n        <StatsSection stats={stats} isLoadingStats={isLoadingStats} onGoToApp={handleGoToApp} />\n        <LazySection section={VisionSection} onGoToApp={handleGoToApp} />\n        <LazySection section={ProblemsSection} />\n        <LazySection section={FeaturesSection} />\n        <LazySection section={AboutSection} />\n        <LazySection section={GallerySection} />\n        <LazySection section={PartnersSection} />\n        <LazySection section={HowItWorksSection} />\n        <LazySection section={WhoIsItForSection} onDonate={() => setShowDonationModal(true)} />\n        <LazySection section={ValuesSection} />\n        <LazySection section={CoreMottosSection} />\n        <LazySection section={AdminHierarchySection} />\n        <LazySection section={RoadmapSection} />\n        <LazySection section={ContactSection} />\n        <LazySection section={FAQSection} />\n\n        <View style={styles.footer}>\n          <Text style={styles.footerText}>Â© {new Date().getFullYear()} Karma Community â€” × ×‘× ×” ×‘××”×‘×” ×•×‘×ª××™×›×ª ×”×§×”×™×œ×”.</Text>\n        </View>\n      </ScrollContainer>\n    </ScreenWrapper>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  content: {\n    paddingBottom: isMobileWeb ? 80 : 120,\n    backgroundColor: colors.white,\n  },\n  hero: {\n    width: '100%',\n    overflow: 'hidden',\n  },\n  heroGradient: {\n    backgroundColor: colors.backgroundTertiary,\n    paddingTop: isMobileWeb ? 40 : (isWeb ? 60 : 80),\n    paddingBottom: isMobileWeb ? 30 : (isWeb ? 50 : 70),\n    paddingHorizontal: isMobileWeb ? 16 : (isWeb ? 20 : 40),\n    position: 'relative',\n  },\n  heroContent: {\n    alignItems: 'center',\n    zIndex: 2,\n  },\n  welcomeTitle: {\n    fontSize: isMobileWeb ? 28 : (isWeb ? (isTablet ? 56 : 42) : 64),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 16 : (isWeb ? 24 : 32),\n    letterSpacing: -1,\n    lineHeight: isMobileWeb ? 34 : (isWeb ? (isTablet ? 64 : 50) : 72),\n  },\n  welcomeTitleLarge: {\n    fontSize: isMobileWeb ? 32 : (isWeb ? (isTablet ? 64 : 48) : 72),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  welcomeTitleSmall: {\n    fontSize: isMobileWeb ? 24 : (isWeb ? (isTablet ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n  },\n  logoContainer: {\n    position: 'relative',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 20 : 28),\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: isMobileWeb ? 140 : (isWeb ? (isTablet ? 240 : 220) : 260),\n    overflow: 'hidden',\n  },\n  logoBackground: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  logo: {\n    width: isMobileWeb ? 180 : (isWeb ? (isTablet ? 320 : 280) : 360),\n    height: isMobileWeb ? 180 : (isWeb ? (isTablet ? 320 : 280) : 360),\n    opacity: 0.35,\n  },\n  title: {\n    fontSize: isMobileWeb ? 24 : (isWeb ? (isTablet ? 48 : 36) : 56),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 16 : 20),\n    letterSpacing: -0.5,\n  },\n  subtitlesRow: {\n    flexDirection: 'row-reverse',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : (isWeb ? (isTablet ? 28 : 20) : 32),\n    marginBottom: isMobileWeb ? 8 : (isWeb ? 12 : 16),\n    flexWrap: 'wrap',\n  },\n  subtitleItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: isMobileWeb ? 6 : (isWeb ? (isTablet ? 12 : 10) : 14),\n    paddingHorizontal: isMobileWeb ? 8 : (isWeb ? (isTablet ? 16 : 12) : 20),\n    paddingVertical: isMobileWeb ? 6 : (isWeb ? (isTablet ? 10 : 8) : 12),\n    borderRadius: isMobileWeb ? 12 : (isWeb ? (isTablet ? 20 : 16) : 24),\n    backgroundColor: colors.backgroundTertiary,\n    borderWidth: 1,\n    borderColor: colors.info + '30',\n  },\n  subtitleItemGreen: {\n    backgroundColor: colors.greenBright + '18',\n    borderColor: colors.greenBright + '50',\n  },\n  subtitleIcon: {\n    marginTop: isMobileWeb ? 1 : 2,\n  },\n  subtitleText: {\n    fontSize: isMobileWeb ? 12 : (isWeb ? (isTablet ? 24 : 18) : 28),\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    letterSpacing: -0.3,\n  },\n  subtitle: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? (isTablet ? 20 : 18) : 24),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 6 : (isWeb ? 8 : 12),\n    maxWidth: isMobileWeb ? '95%' : (isTablet ? '70%' : '90%'),\n    lineHeight: isMobileWeb ? 20 : (isWeb ? 28 : 32),\n    fontWeight: '500',\n  },\n  heroMottosContainer: {\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n    alignItems: 'center',\n    gap: isMobileWeb ? 8 : 12,\n  },\n  mottoItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    maxWidth: isMobileWeb ? '95%' : '85%',\n  },\n  mottoItemIcon: {\n    marginTop: isMobileWeb ? 2 : 4,\n  },\n  mottoSubtitle: {\n    fontSize: isMobileWeb ? 16 : (isWeb ? (isTablet ? 22 : 20) : 26),\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontWeight: '700',\n    lineHeight: isMobileWeb ? 24 : (isWeb ? 32 : 36),\n    fontStyle: 'italic',\n    textShadowColor: 'rgba(0, 0, 0, 0.1)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 2,\n    flex: 1,\n  },\n  ctaRow: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 10 : 16,\n    marginTop: isMobileWeb ? 24 : 40,\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n  },\n  ctaIcon: {\n    marginRight: isMobileWeb ? 6 : 8,\n  },\n  primaryCta: {\n    backgroundColor: colors.info,\n    paddingHorizontal: isMobileWeb ? 20 : 32,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 8 },\n    shadowRadius: 12,\n    elevation: 8,\n  },\n  primaryCtaText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    textAlign: 'center',\n    letterSpacing: 0.3,\n  },\n  secondaryCta: {\n    backgroundColor: colors.white,\n    borderWidth: 2,\n    borderColor: colors.info,\n    paddingHorizontal: isMobileWeb ? 20 : 32,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  secondaryCtaText: {\n    color: colors.info,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    textAlign: 'center',\n    letterSpacing: 0.3,\n  },\n  section: {\n    paddingHorizontal: isMobileWeb ? 16 : (isWeb ? (isTablet ? 40 : 24) : 40),\n    paddingVertical: isMobileWeb ? 24 : (isWeb ? (isTablet ? 60 : 40) : 50),\n    width: '100%',\n    alignSelf: 'center',\n    maxWidth: isTablet ? 1200 : '100%',\n  },\n  sectionTitle: {\n    fontSize: isMobileWeb ? 20 : (isWeb ? (isTablet ? 36 : 28) : 42),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 6 : 8,\n    letterSpacing: -0.5,\n  },\n  sectionSubtitle: {\n    fontSize: isMobileWeb ? 13 : (isWeb ? (isTablet ? 18 : 16) : 22),\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : (isWeb ? 20 : 24),\n    lineHeight: isMobileWeb ? 18 : (isWeb ? 26 : 30),\n    fontWeight: '500',\n  },\n  sectionSubTitle: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 24),\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 10 : (isWeb ? 15 : 20),\n    marginBottom: isMobileWeb ? 6 : (isWeb ? 8 : 12)\n  },\n  featuresGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    gap: isMobileWeb ? 12 : 24,\n    width: '100%',\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  feature: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 350,\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 20,\n    padding: isMobileWeb ? 16 : 28,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  featureEmoji: {\n    fontSize: isMobileWeb ? 32 : 48,\n    marginBottom: isMobileWeb ? 10 : 16,\n  },\n  featureTitle: {\n    fontSize: isMobileWeb ? 16 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n    letterSpacing: -0.3,\n  },\n  featureText: {\n    fontSize: isMobileWeb ? 13 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 18 : 28,\n    fontWeight: '400',\n  },\n  paragraph: {\n    fontSize: isMobileWeb ? 14 : (isWeb ? 18 : 20),\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 20 : (isWeb ? 28 : 30),\n    textAlign: 'center',\n    marginTop: isMobileWeb ? 8 : 12,\n    maxWidth: isMobileWeb ? '95%' : (isTablet ? '80%' : '90%'),\n    alignSelf: 'center',\n    fontWeight: '400',\n  },\n  linksRow: { flexDirection: 'row', gap: isMobileWeb ? 12 : 24, marginTop: isMobileWeb ? 10 : 16, alignSelf: 'center', flexWrap: 'wrap', justifyContent: 'center' },\n  link: { color: colors.primary, fontWeight: '700', fontSize: isMobileWeb ? 14 : 20, padding: isMobileWeb ? 6 : 8 },\n  faqContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  faqCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    marginBottom: isMobileWeb ? 8 : 12,\n    overflow: 'hidden',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  faqQuestionRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 16 : 20,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  faqQuestionContent: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 10 : 14,\n  },\n  faqIcon: {\n    marginRight: isMobileWeb ? 4 : 6,\n  },\n  faqQ: {\n    flex: 1,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 15 : 18,\n    lineHeight: isMobileWeb ? 22 : 26,\n  },\n  faqAnswerContainer: {\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    paddingBottom: isMobileWeb ? 16 : 20,\n    overflow: 'hidden',\n  },\n  faqA: {\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 14 : 16,\n    lineHeight: isMobileWeb ? 20 : 24,\n    fontWeight: '400',\n  },\n  iconBullets: { marginTop: isMobileWeb ? 10 : 16, gap: isMobileWeb ? 10 : 16, width: '100%', maxWidth: isMobileWeb ? '95%' : '90%', alignSelf: 'center' },\n  iconBulletRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: isMobileWeb ? 10 : 16, justifyContent: 'center', paddingVertical: isMobileWeb ? 2 : 4 },\n  iconBulletText: { color: colors.textPrimary, fontSize: isMobileWeb ? 13 : 18, textAlign: 'center', flex: 1 },\n  stepsRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 12 : 24, justifyContent: 'space-around', marginTop: isMobileWeb ? 12 : 20, width: '100%' },\n  stepCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 350,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    padding: isMobileWeb ? 16 : 28,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  stepTitle: {\n    marginTop: isMobileWeb ? 10 : 16,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 16 : 24,\n    letterSpacing: -0.3,\n  },\n  stepText: {\n    marginTop: isMobileWeb ? 8 : 12,\n    textAlign: 'center',\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 13 : 18,\n    lineHeight: isMobileWeb ? 18 : 28,\n    fontWeight: '400',\n  },\n  splitRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 16 : 30, justifyContent: 'space-around', width: '100%' },\n  splitColumn: { flex: 1, minWidth: isMobileWeb ? 140 : 320, maxWidth: isMobileWeb ? '100%' : 500, padding: isMobileWeb ? 12 : 20 },\n  splitTitle: { textAlign: 'center', fontSize: isMobileWeb ? 18 : 24, fontWeight: '800', color: colors.textPrimary, marginBottom: isMobileWeb ? 8 : 12 },\n  valuesRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 6 : 10, justifyContent: 'center', marginTop: isMobileWeb ? 4 : 6 },\n  valuePill: {\n    paddingHorizontal: isMobileWeb ? 14 : 24,\n    paddingVertical: isMobileWeb ? 8 : 14,\n    borderRadius: 999,\n    backgroundColor: colors.white,\n    borderWidth: 2,\n    borderColor: colors.info,\n    margin: isMobileWeb ? 3 : 6,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  valuePillText: {\n    color: colors.info,\n    fontWeight: '700',\n    fontSize: isMobileWeb ? 12 : 18,\n  },\n  roadmapContainer: {\n    marginTop: isMobileWeb ? 24 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 1000 : '100%',\n    alignSelf: 'center',\n    writingDirection: 'rtl',\n  },\n  roadmapItemWrapper: {\n    width: '100%',\n    marginBottom: 0,\n  },\n  roadmapItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 20,\n    padding: isMobileWeb ? 16 : 24,\n    marginBottom: isMobileWeb ? 20 : 24,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    borderWidth: 1,\n    borderColor: colors.backgroundSecondary,\n    writingDirection: 'rtl',\n  },\n  roadmapIconContainer: {\n    width: isMobileWeb ? 48 : 64,\n    height: isMobileWeb ? 48 : 64,\n    borderRadius: isMobileWeb ? 24 : 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: isMobileWeb ? 12 : 16,\n    flexShrink: 0,\n  },\n  roadmapContent: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end',\n  },\n  roadmapTimeBadge: {\n    paddingHorizontal: isMobileWeb ? 12 : 16,\n    paddingVertical: isMobileWeb ? 6 : 8,\n    borderRadius: isMobileWeb ? 8 : 12,\n    alignSelf: 'flex-end',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  roadmapTimeText: {\n    color: colors.white,\n    fontWeight: '900',\n    fontSize: isMobileWeb ? 14 : 16,\n    letterSpacing: 0.5,\n  },\n  roadmapLabel: {\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 16 : 20,\n    lineHeight: isMobileWeb ? 24 : 30,\n    fontWeight: '700',\n    textAlign: 'right',\n  },\n  roadmapConnector: {\n    position: 'absolute',\n    right: isMobileWeb ? 24 : 32,\n    top: isMobileWeb ? 64 : 88,\n    height: isMobileWeb ? 20 : 24,\n    width: 2,\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 0,\n  },\n  roadmapConnectorLine: {\n    width: 2,\n    height: '100%',\n    borderLeftWidth: 2,\n    borderStyle: 'dashed',\n  },\n  logoEvolutionContainer: {\n    marginTop: isMobileWeb ? 32 : 48,\n    width: '100%',\n    alignItems: 'center',\n  },\n  logoEvolutionTitle: {\n    fontSize: isMobileWeb ? 20 : 28,\n    fontWeight: '900',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  logoEvolutionSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 20 : 28,\n    fontWeight: '500',\n  },\n  logoEvolutionGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 12 : 20,\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n  },\n  logoEvolutionItem: {\n    alignItems: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    flex: 1,\n    minWidth: isMobileWeb ? 100 : 140,\n    maxWidth: isMobileWeb ? 120 : 160,\n  },\n  logoEvolutionImage: {\n    width: isMobileWeb ? 80 : 120,\n    height: isMobileWeb ? 80 : 120,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 2,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n  },\n  logoEvolutionLabel: {\n    fontSize: isMobileWeb ? 12 : 14,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  brandStrip: { flexDirection: 'row', justifyContent: 'center', alignItems: 'center', gap: isMobileWeb ? 8 : 10, paddingVertical: isMobileWeb ? 12 : 16 },\n  brandIcon: { width: isMobileWeb ? 30 : 40, height: isMobileWeb ? 30 : 40, opacity: 0.9 },\n  contactRow: { flexDirection: 'row', flexWrap: 'wrap', gap: isMobileWeb ? 10 : 20, justifyContent: 'center', marginTop: isMobileWeb ? 16 : 24, width: '100%' },\n  contactButton: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 8 : 12,\n    alignItems: 'center',\n    paddingHorizontal: isMobileWeb ? 16 : 28,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    justifyContent: 'center',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    elevation: 6,\n  },\n  contactButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 13 : 18,\n    letterSpacing: 0.3,\n  },\n  footer: {\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    paddingVertical: isMobileWeb ? 20 : 32,\n    borderTopWidth: 1,\n    borderTopColor: colors.backgroundSecondary,\n    alignItems: 'center',\n    marginTop: isMobileWeb ? 24 : 40,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  footerText: {\n    color: colors.textSecondary,\n    fontSize: isMobileWeb ? 12 : 14,\n    fontWeight: '500',\n  },\n  // Statistics styles\n  statsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    gap: isMobileWeb ? 12 : 24,\n    marginTop: isMobileWeb ? 12 : 20,\n    width: '100%'\n  },\n  statCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 250,\n    maxWidth: isMobileWeb ? '48%' : 300,\n    paddingVertical: isMobileWeb ? 16 : 32,\n    paddingHorizontal: isMobileWeb ? 12 : 20,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    alignItems: 'center',\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  statIcon: {\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  statNumber: {\n    fontSize: isMobileWeb ? 22 : (isWeb ? 36 : 40),\n    fontWeight: '900',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 6 : 8,\n    letterSpacing: -1,\n    textAlign: 'center',\n  },\n  statLabel: {\n    fontSize: isMobileWeb ? 12 : 18,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 16 : 26,\n    fontWeight: '500',\n  },\n  statsLoadingContainer: {\n    paddingVertical: isMobileWeb ? 40 : 60,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  statsLoadingText: {\n    marginTop: isMobileWeb ? 12 : 16,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  useCases: { gap: isMobileWeb ? 10 : 16, marginTop: isMobileWeb ? 10 : 16, alignSelf: 'center', width: '100%', maxWidth: isMobileWeb ? '95%' : '90%' },\n  useCaseRow: { flexDirection: 'row-reverse', alignItems: 'center', gap: isMobileWeb ? 10 : 16, alignSelf: 'center', paddingVertical: isMobileWeb ? 4 : 8 },\n  useCaseText: { color: colors.textPrimary, fontSize: isMobileWeb ? 13 : 18, textAlign: 'center', flex: 1 },\n  testimonials: { flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'space-around', gap: isMobileWeb ? 12 : 24, marginTop: isMobileWeb ? 12 : 20, width: '100%' },\n  testimonialCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 320,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    padding: isMobileWeb ? 16 : 28,\n    margin: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.1,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  testimonialText: {\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 13 : 18,\n    lineHeight: isMobileWeb ? 18 : 30,\n    textAlign: 'center',\n    fontStyle: 'italic',\n    fontWeight: '400',\n  },\n  testimonialUser: {\n    color: colors.textSecondary,\n    marginTop: isMobileWeb ? 10 : 16,\n    textAlign: 'center',\n    fontWeight: '700',\n    fontSize: isMobileWeb ? 12 : 16,\n  },\n  galleryGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 16,\n    marginTop: isMobileWeb ? 12 : 20\n  },\n  galleryImage: {\n    width: isMobileWeb ? 140 : 280,\n    height: isMobileWeb ? 140 : 280,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundSecondary\n  },\n  partnersContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n    alignSelf: 'center',\n    marginTop: isMobileWeb ? 12 : 20,\n  },\n  partnersRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 20 : 40,\n    marginTop: isMobileWeb ? 12 : 20,\n    flexWrap: 'wrap'\n  },\n  partnerCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 24 : 32,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    alignSelf: 'center',\n  },\n  partnerLogo: {\n    height: isMobileWeb ? 50 : 70,\n    width: isMobileWeb ? 120 : 180,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  partnerName: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  partnerDescription: {\n    fontSize: isMobileWeb ? 14 : 16,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 20 : 24,\n  },\n  instagramContainer: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    marginTop: isMobileWeb ? 12 : 20,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n    backgroundColor: colors.white,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  instagramEmbedContainer: {\n    width: '100%',\n    height: isMobileWeb ? 500 : 600,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n  },\n  instagramWebViewContainer: {\n    width: '100%',\n    height: isMobileWeb ? 500 : 600,\n    borderRadius: isMobileWeb ? 12 : 16,\n    overflow: 'hidden',\n  },\n  instagramWebView: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n  instagramLoadingContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    gap: isMobileWeb ? 12 : 16,\n  },\n  instagramLoadingText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  instagramFallback: {\n    padding: isMobileWeb ? 40 : 60,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n  },\n  instagramFallbackText: {\n    fontSize: isMobileWeb ? 16 : 20,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  trustList: { gap: isMobileWeb ? 6 : 10, marginTop: isMobileWeb ? 6 : 8, alignItems: 'center' },\n  trustRow: { flexDirection: 'row-reverse', gap: isMobileWeb ? 6 : 8, alignItems: 'center' },\n  trustText: { color: colors.textPrimary, fontSize: isMobileWeb ? 11 : 14 },\n  categoryGrid: { flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'center', gap: isMobileWeb ? 8 : 12, marginTop: isMobileWeb ? 6 : 8 },\n  categoryCard: {\n    width: isMobileWeb ? 100 : 150,\n    height: isMobileWeb ? 60 : 90,\n    borderRadius: isMobileWeb ? 12 : 16,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    backgroundColor: colors.white,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 4 : 8,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  categoryText: {\n    fontWeight: '700',\n    color: colors.textPrimary,\n    fontSize: isMobileWeb ? 12 : 16,\n  },\n  // Floating Menu Styles\n  menuOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    zIndex: 999, // ××ª×—×ª ×œ×ª×¤×¨×™×˜ ××‘×œ ××¢×œ ×”×ª×•×›×Ÿ\n  },\n  floatingMenu: {\n    position: 'absolute',\n    right: isMobileWeb ? 8 : 20,\n    top: isMobileWeb ? 60 : 100,\n    minWidth: 150,\n    width: isMobileWeb ? '14%' : '10%',\n    maxHeight: isMobileWeb ? '70vh' as any : (isWeb ? '80vh' as any : 600),\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 12 : 20,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 20,\n    elevation: 10,\n    zIndex: 1000,\n    overflow: 'hidden',\n  },\n  floatingMenuMinimized: {\n    position: 'absolute',\n    right: isMobileWeb ? 8 : 20,\n    top: isMobileWeb ? 60 : 100,\n    width: isMobileWeb ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03, // 5% for mobile, 3% for desktop\n    height: isMobileWeb ? SCREEN_WIDTH * 0.05 : SCREEN_WIDTH * 0.03,\n    // backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? SCREEN_WIDTH * 0.025 : SCREEN_WIDTH * 0.015,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.15,\n    shadowRadius: 12,\n    elevation: 8,\n    zIndex: 1000,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuToggleButton: {\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  menuHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: SCREEN_WIDTH * 0.01, // 1% of screen width\n    paddingVertical: SCREEN_WIDTH * 0.008, // 0.8% of screen width\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundSecondary,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  menuTitle: {\n    fontWeight: '800',\n    color: colors.textPrimary,\n    letterSpacing: -0.3,\n  },\n  menuMinimizeButton: {\n    padding: SCREEN_WIDTH * 0.002, // 0.2% of screen width\n  },\n  menuItems: {\n    flex: 1,\n    paddingVertical: SCREEN_WIDTH * 0.006, // 0.6% of screen width\n  },\n  menuItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    gap: SCREEN_WIDTH * 0.006, // 0.6% of screen width\n    borderRightWidth: 3,\n    borderRightColor: 'transparent',\n  },\n  menuItemActive: {\n    backgroundColor: colors.backgroundTertiary,\n    borderRightColor: colors.info,\n  },\n  menuItemIcon: {\n    marginLeft: SCREEN_WIDTH * 0.002, // 0.2% of screen width\n  },\n  menuItemText: {\n    fontWeight: '600',\n    color: colors.textSecondary,\n    flex: 1,\n    textAlign: 'right',\n  },\n  menuItemTextActive: {\n    color: colors.info,\n    fontWeight: '700',\n  },\n  // New Styles\n  decoCircle1: {\n    position: 'absolute',\n    width: isMobileWeb ? 200 : 400,\n    height: isMobileWeb ? 200 : 400,\n    borderRadius: isMobileWeb ? 100 : 200,\n    backgroundColor: 'rgba(65, 105, 225, 0.05)',\n    top: isMobileWeb ? -50 : -100,\n    left: isMobileWeb ? -75 : -150,\n  },\n  decoCircle2: {\n    position: 'absolute',\n    width: isMobileWeb ? 150 : 300,\n    height: isMobileWeb ? 150 : 300,\n    borderRadius: isMobileWeb ? 75 : 150,\n    backgroundColor: 'rgba(255, 192, 203, 0.08)',\n    bottom: isMobileWeb ? -25 : -50,\n    right: isMobileWeb ? -50 : -100,\n  },\n  decoCircle3: {\n    position: 'absolute',\n    width: isMobileWeb ? 120 : 240,\n    height: isMobileWeb ? 120 : 240,\n    borderRadius: isMobileWeb ? 60 : 120,\n    backgroundColor: colors.greenBright + '20',\n    top: isMobileWeb ? 40 : 80,\n    right: isMobileWeb ? -30 : -60,\n  },\n  titleDecorator: {\n    width: isMobileWeb ? 40 : 60,\n    height: isMobileWeb ? 3 : 4,\n    backgroundColor: colors.info,\n    borderRadius: 2,\n    alignSelf: 'center',\n    marginBottom: isMobileWeb ? 16 : 24,\n  },\n  sectionAltBackground: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  emphasis: {\n    fontWeight: '800',\n    color: colors.info,\n  },\n  visionHighlights: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 20 : 32,\n    width: '100%',\n  },\n  visionHighlight: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 200,\n    maxWidth: isMobileWeb ? '100%' : 250,\n    alignItems: 'center',\n    padding: isMobileWeb ? 16 : 24,\n    gap: isMobileWeb ? 8 : 12,\n  },\n  visionHighlightText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontWeight: '600',\n  },\n  problemsContent: {\n    gap: isMobileWeb ? 20 : 32,\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n  },\n  problemCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  problemIcon: {\n    marginBottom: isMobileWeb ? 12 : 16,\n    alignSelf: 'center',\n  },\n  problemTitle: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 12 : 16,\n    letterSpacing: -0.3,\n  },\n  problemText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 20 : 28,\n    textAlign: 'right',\n    fontWeight: '400',\n  },\n  whoContent: {\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n  },\n  whoMainCard: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 24 : 40,\n    borderWidth: 2,\n    borderColor: colors.info,\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 8,\n    alignItems: 'center',\n    marginBottom: isMobileWeb ? 20 : 32,\n  },\n  whoMainIcon: {\n    marginBottom: isMobileWeb ? 16 : 24,\n  },\n  whoFutureCard: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: isMobileWeb ? 12 : 20,\n    padding: isMobileWeb ? 20 : 28,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n    borderStyle: 'dashed',\n    alignItems: 'center',\n  },\n  whoFutureIcon: {\n    marginBottom: isMobileWeb ? 12 : 16,\n    opacity: 0.6,\n  },\n  whoFutureTitle: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '700',\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: isMobileWeb ? 8 : 12,\n  },\n  whoFutureText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 18 : 24,\n    textAlign: 'center',\n    fontWeight: '400',\n  },\n  githubLinkContainer: {\n    marginTop: isMobileWeb ? 24 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 600 : '100%',\n    alignSelf: 'center',\n  },\n  githubLinkButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 20,\n    padding: isMobileWeb ? 20 : 28,\n    borderWidth: 2,\n    borderColor: colors.info,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n    gap: isMobileWeb ? 12 : 16,\n  },\n  githubLinkTextContainer: {\n    flex: 1,\n    gap: isMobileWeb ? 4 : 6,\n  },\n  githubLinkTitle: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  githubLinkDescription: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 18 : 24,\n    fontWeight: '400',\n  },\n  mottoContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 20 : 32,\n    marginBottom: isMobileWeb ? 20 : 32,\n    width: '100%',\n  },\n  mottoCard: {\n    flex: 1,\n    minWidth: isMobileWeb ? 140 : 280,\n    maxWidth: isMobileWeb ? '100%' : 400,\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 2,\n    borderColor: colors.info,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    shadowColor: colors.info,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.15,\n    shadowRadius: 16,\n    elevation: 6,\n  },\n  mottoIcon: {\n    marginBottom: isMobileWeb ? 4 : 8,\n  },\n  mottoText: {\n    fontSize: isMobileWeb ? 16 : 22,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    fontStyle: 'italic',\n    lineHeight: isMobileWeb ? 22 : 30,\n  },\n  coreMottosContainer: {\n    marginTop: isMobileWeb ? 20 : 32,\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n    gap: isMobileWeb ? 20 : 28,\n  },\n  hierarchyContainer: {\n    marginTop: isMobileWeb ? 16 : 24,\n    width: '100%',\n    maxWidth: isTablet ? 900 : '100%',\n    alignSelf: 'center',\n  },\n  coreMottoItem: {\n    flexDirection: 'row-reverse',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    padding: isMobileWeb ? 20 : 32,\n    borderWidth: 2,\n    borderColor: colors.backgroundTertiary,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 4,\n  },\n  coreMottoIcon: {\n    marginLeft: isMobileWeb ? 8 : 12,\n    flexShrink: 0,\n  },\n  coreMottoText: {\n    fontSize: isMobileWeb ? 16 : (isWeb ? (isTablet ? 22 : 20) : 24),\n    color: colors.textPrimary,\n    textAlign: 'right',\n    fontWeight: '700',\n    lineHeight: isMobileWeb ? 24 : (isWeb ? 32 : 36),\n    fontStyle: 'italic',\n    flex: 1,\n  },\n  stepNumberBadge: {\n    position: 'absolute',\n    top: isMobileWeb ? -12 : -16,\n    right: isMobileWeb ? 16 : 24,\n    width: isMobileWeb ? 32 : 40,\n    height: isMobileWeb ? 32 : 40,\n    borderRadius: isMobileWeb ? 16 : 20,\n    backgroundColor: colors.info,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 3,\n    borderColor: colors.white,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 4,\n  },\n  stepNumber: {\n    fontSize: isMobileWeb ? 16 : 20,\n    fontWeight: '900',\n    color: colors.white,\n  },\n  stepIcon: {\n    marginTop: isMobileWeb ? 12 : 16,\n    marginBottom: isMobileWeb ? 12 : 16,\n  },\n  statChevron: {\n    position: 'absolute',\n    bottom: isMobileWeb ? 12 : 16,\n    left: isMobileWeb ? 12 : 16,\n  },\n  // Modal Styles\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: isMobileWeb ? 16 : 24,\n  },\n  modalContainer: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 16 : 24,\n    width: '100%',\n    maxWidth: isTablet ? 800 : (isMobileWeb ? '95%' : 600),\n    maxHeight: '85%',\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 10 },\n    shadowOpacity: 0.3,\n    shadowRadius: 20,\n    elevation: 15,\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundTertiary,\n  },\n  modalTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    flex: 1,\n  },\n  modalTitleContainer: {\n    flex: 1,\n  },\n  modalTitle: {\n    fontSize: isMobileWeb ? 18 : 24,\n    fontWeight: '800',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  modalSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '600',\n    color: colors.info,\n  },\n  modalCloseButton: {\n    padding: isMobileWeb ? 4 : 8,\n    marginRight: isMobileWeb ? -4 : -8,\n  },\n  modalContent: {\n    flex: 1,\n  },\n  modalLoadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: isMobileWeb ? 40 : 60,\n  },\n  modalLoadingText: {\n    marginTop: isMobileWeb ? 12 : 16,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textSecondary,\n    fontWeight: '500',\n  },\n  modalEmptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: isMobileWeb ? 40 : 60,\n  },\n  modalEmptyText: {\n    marginTop: isMobileWeb ? 16 : 24,\n    fontSize: isMobileWeb ? 16 : 20,\n    color: colors.textSecondary,\n    fontWeight: '600',\n  },\n  detailList: {\n    padding: isMobileWeb ? 16 : 24,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    paddingVertical: isMobileWeb ? 12 : 16,\n    paddingHorizontal: isMobileWeb ? 12 : 16,\n    borderRadius: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.backgroundSecondary,\n    marginBottom: isMobileWeb ? 8 : 12,\n    borderWidth: 1,\n    borderColor: colors.backgroundTertiary,\n  },\n  detailItemNumber: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '700',\n    color: colors.info,\n    marginLeft: isMobileWeb ? 8 : 12,\n    minWidth: isMobileWeb ? 24 : 32,\n  },\n  detailItemContent: {\n    flex: 1,\n  },\n  detailItemText: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n    lineHeight: isMobileWeb ? 20 : 24,\n  },\n  detailItemSubtext: {\n    fontSize: isMobileWeb ? 12 : 14,\n    color: colors.textSecondary,\n    lineHeight: isMobileWeb ? 16 : 20,\n    marginTop: isMobileWeb ? 2 : 4,\n  },\n  howItWorksNote: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 10 : 14,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 16,\n    padding: isMobileWeb ? 16 : 24,\n    marginTop: isMobileWeb ? 24 : 32,\n    borderLeftWidth: 4,\n    borderLeftColor: colors.info,\n    width: '100%',\n    maxWidth: isTablet ? 800 : '100%',\n    alignSelf: 'center',\n  },\n  howItWorksNoteText: {\n    flex: 1,\n    fontSize: isMobileWeb ? 14 : 18,\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 20 : 26,\n    fontWeight: '500',\n  },\n  // Donation Modal Styles\n  donationModalContainer: {\n    backgroundColor: colors.white,\n    borderRadius: isMobileWeb ? 20 : 28,\n    width: '100%',\n    maxWidth: isTablet ? 500 : (isMobileWeb ? '90%' : 450),\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 10 },\n    shadowOpacity: 0.3,\n    shadowRadius: 20,\n    elevation: 15,\n    overflow: 'hidden',\n  },\n  donationModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: isMobileWeb ? 20 : 28,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.backgroundTertiary,\n    backgroundColor: colors.backgroundTertiary,\n  },\n  donationModalTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: isMobileWeb ? 12 : 16,\n    flex: 1,\n  },\n  donationModalTitleContainer: {\n    flex: 1,\n  },\n  donationModalTitle: {\n    fontSize: isMobileWeb ? 20 : 28,\n    fontWeight: '900',\n    color: colors.textPrimary,\n    marginBottom: isMobileWeb ? 4 : 6,\n  },\n  donationModalSubtitle: {\n    fontSize: isMobileWeb ? 14 : 18,\n    fontWeight: '500',\n    color: colors.textSecondary,\n  },\n  donationModalContent: {\n    padding: isMobileWeb ? 20 : 28,\n  },\n  donationMessageContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    gap: isMobileWeb ? 12 : 16,\n    backgroundColor: colors.backgroundTertiary,\n    borderRadius: isMobileWeb ? 12 : 16,\n    padding: isMobileWeb ? 16 : 20,\n    marginBottom: isMobileWeb ? 20 : 24,\n    borderLeftWidth: 4,\n    borderLeftColor: colors.info,\n  },\n  donationMessageText: {\n    flex: 1,\n    fontSize: isMobileWeb ? 15 : 18,\n    color: colors.textPrimary,\n    lineHeight: isMobileWeb ? 22 : 26,\n    fontWeight: '600',\n  },\n  donationButtonsContainer: {\n    flexDirection: 'row',\n    gap: isMobileWeb ? 10 : 16,\n    marginBottom: isMobileWeb ? 16 : 20,\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  },\n  donationButton: {\n    flex: 1,\n    minWidth: isMobileWeb ? 100 : 120,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    paddingVertical: isMobileWeb ? 14 : 18,\n    paddingHorizontal: isMobileWeb ? 16 : 20,\n    borderRadius: isMobileWeb ? 12 : 16,\n    shadowColor: colors.black,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  donationButtonWhatsApp: {\n    backgroundColor: colors.success,\n  },\n  donationButtonBit: {\n    backgroundColor: colors.info,\n  },\n  donationButtonPayBox: {\n    backgroundColor: colors.primary,\n  },\n  donationButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 14 : 18,\n    letterSpacing: 0.3,\n  },\n  donationNoteText: {\n    fontSize: isMobileWeb ? 13 : 16,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: isMobileWeb ? 18 : 24,\n    fontWeight: '400',\n    fontStyle: 'italic',\n  },\n  donationCtaButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    backgroundColor: colors.secondary,\n    paddingVertical: isMobileWeb ? 14 : 18,\n    paddingHorizontal: isMobileWeb ? 24 : 32,\n    borderRadius: isMobileWeb ? 12 : 16,\n    marginTop: isMobileWeb ? 20 : 28,\n    shadowColor: colors.secondary,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 6,\n  },\n  donationCtaButtonText: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 16 : 20,\n    letterSpacing: 0.3,\n  },\n  donationCtaButtonTop: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: isMobileWeb ? 8 : 12,\n    backgroundColor: colors.secondary,\n    paddingVertical: isMobileWeb ? 12 : 18,\n    paddingHorizontal: isMobileWeb ? 16 : 28,\n    borderRadius: isMobileWeb ? 12 : 16,\n    minWidth: isMobileWeb ? 140 : 200,\n    marginBottom: isMobileWeb ? 16 : 20,\n    alignSelf: 'center',\n    shadowColor: colors.secondary,\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.3,\n    shadowRadius: 10,\n    elevation: 6,\n  },\n  donationCtaButtonTextTop: {\n    color: colors.white,\n    fontWeight: '800',\n    fontSize: isMobileWeb ? 13 : 18,\n    letterSpacing: 0.3,\n  },\n});\n\nexport default LandingSiteScreen;\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/LoginScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useNavigation' is defined but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useNavigation"},"fix":{"range":[416,474],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8462,8465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8462,8465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9143,9146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9143,9146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":253,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12219,12222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12219,12222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":291,"column":37,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":291,"endColumn":83,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    TouchableOpacity,\n    StyleSheet,\n    SafeAreaView,\n    StatusBar,\n    TextInput,\n    Image,\n    KeyboardAvoidingView,\n    Platform,\n    Alert,\n    ActivityIndicator,\n    I18nManager,\n    Animated,\n    Dimensions\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport { useUser } from '../stores/userStore';\nimport colors from '../globals/colors';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport {\n    signInWithEmail,\n    signUpWithEmail,\n    sendVerification\n} from '../utils/authService';\nimport FirebaseGoogleButton from '../components/FirebaseGoogleButton';\nimport i18n from '../app/i18n';\n\nconst { height } = Dimensions.get('window');\n\nexport default function LoginScreen() {\n    const { t } = useTranslation(['auth', 'common', 'settings']);\n    const { setCurrentPrincipal } = useUser();\n    // const navigation = useNavigation<any>();\n\n    // UI State\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [showPassword, setShowPassword] = useState(false);\n\n    // Animations\n    const fadeAnim = useState(new Animated.Value(0))[0];\n\n    useEffect(() => {\n        Animated.timing(fadeAnim, {\n            toValue: 1,\n            duration: 800,\n            useNativeDriver: false,\n        }).start();\n    }, [fadeAnim]);\n\n    // Language Toggle\n    const toggleLanguage = async () => {\n        const currentLang = i18n.language;\n        const newLang = currentLang.startsWith('he') ? 'en' : 'he';\n        await AsyncStorage.setItem('app_language', newLang);\n        await i18n.changeLanguage(newLang);\n        const isRTL = newLang === 'he';\n        if (I18nManager.isRTL !== isRTL) {\n            I18nManager.allowRTL(isRTL);\n            I18nManager.forceRTL(isRTL);\n            if (Platform.OS !== 'web') {\n                Alert.alert(t('settings:restartRequired'), t('settings:restartDesc'));\n            }\n        }\n    };\n\n    const handleGuestLogin = async () => {\n        try {\n            setIsLoading(true);\n            await setCurrentPrincipal({ user: null, role: 'guest' });\n\n            const guardContext = {\n                isAuthenticated: true,\n                isGuestMode: true,\n                isAdmin: false,\n            };\n\n            const guardResult = await checkNavigationGuards(\n                { type: 'reset', index: 0, routes: [{ name: 'HomeStack' }] },\n                guardContext\n            );\n\n            if (!guardResult.allowed && guardResult.redirectTo) {\n                await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n            } else {\n                await navigationQueue.reset(0, [{ name: 'HomeStack' }], 2);\n            }\n        } catch (error) {\n            console.error('Guest login failed', error);\n            Alert.alert(t('common:error'), t('common:genericTryAgain'));\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleEmailAction = async () => {\n        if (!email || !email.includes('@')) {\n            Alert.alert(t('common:error'), t('auth:email.invalidFormat'));\n            return;\n        }\n\n        if (!password || password.length < 6) {\n            Alert.alert(t('common:error'), t('auth:email.passwordTooShort'));\n            return;\n        }\n\n        setIsLoading(true);\n        try {\n            const nowIso = new Date().toISOString();\n\n            // Try to sign in first (unified flow)\n            try {\n                const fbUser = await signInWithEmail(email, password);\n\n                // Get UUID from server using firebase_uid\n                try {\n                    const { apiService } = await import('../utils/apiService');\n                    const resolveResponse = await apiService.resolveUserId({\n                        firebase_uid: fbUser.uid,\n                        email: email\n                    });\n\n                    if (!resolveResponse.success || !resolveResponse.user) {\n                        // Fallback: try to get user by email\n                        const userResponse = await apiService.getUserById(fbUser.email || email);\n                        if (userResponse.success && userResponse.data) {\n                            const serverUser = userResponse.data;\n                            const userData = {\n                                id: serverUser.id, // UUID from database\n                                name: serverUser.name || fbUser.displayName || email.split('@')[0],\n                                email: serverUser.email || email,\n                                isActive: serverUser.is_active !== false,\n                                lastActive: serverUser.last_active || nowIso,\n                                roles: serverUser.roles || ['user'],\n                                settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                                phone: serverUser.phone || fbUser.phoneNumber || '',\n                                avatar: serverUser.avatar_url || fbUser.photoURL || 'https://i.pravatar.cc/150?img=12',\n                                bio: serverUser.bio || '',\n                                karmaPoints: serverUser.karma_points || 0,\n                                joinDate: serverUser.join_date || serverUser.created_at || nowIso,\n                                location: { city: serverUser.city || '×ª×œ ××‘×™×‘', country: serverUser.country || 'Israel' },\n                                interests: serverUser.interests || [],\n                                postsCount: serverUser.posts_count || 0,\n                                followersCount: serverUser.followers_count || 0,\n                                followingCount: serverUser.following_count || 0,\n                                notifications: [],\n                            };\n                            await setCurrentPrincipal({ user: userData, role: 'user' });\n                            await navigationQueue.reset(0, [{ name: 'HomeStack' }], 2);\n                            return;\n                        }\n                        throw new Error('Failed to get user from server');\n                    }\n\n                    // Use UUID from server\n                    const serverUser = resolveResponse.user;\n                    const userData = {\n                        id: serverUser.id, // UUID from database - this is the primary identifier\n                        name: serverUser.name || fbUser.displayName || email.split('@')[0],\n                        email: serverUser.email || email,\n                        isActive: serverUser.isActive !== false,\n                        lastActive: serverUser.lastActive || nowIso,\n                        roles: serverUser.roles || ['user'],\n                        settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                        phone: serverUser.phone || fbUser.phoneNumber || '',\n                        avatar: serverUser.avatar || fbUser.photoURL || 'https://i.pravatar.cc/150?img=12',\n                        bio: serverUser.bio || '',\n                        karmaPoints: serverUser.karmaPoints || 0,\n                        joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n                        location: serverUser.location || { city: '×ª×œ ××‘×™×‘', country: 'Israel' },\n                        interests: serverUser.interests || [],\n                        postsCount: serverUser.postsCount || 0,\n                        followersCount: serverUser.followersCount || 0,\n                        followingCount: serverUser.followingCount || 0,\n                        notifications: [],\n                    };\n                    await setCurrentPrincipal({ user: userData, role: 'user' });\n                    await navigationQueue.reset(0, [{ name: 'HomeStack' }], 2);\n                    return;\n                } catch (error) {\n                    console.error('Failed to get user UUID from server:', error);\n                    throw error;\n                }\n            } catch (signInError: any) {\n                // If sign in fails with user-not-found, try to register\n                if (signInError.code === 'auth/user-not-found') {\n                    try {\n                        // Try to register new user\n                        const fbUser = await signUpWithEmail(email, password);\n                        await sendVerification(fbUser);\n\n                        Alert.alert(\n                            t('auth:email.verifyTitle'),\n                            t('auth:email.verificationRequired'),\n                            [{ text: t('common:confirm') }]\n                        );\n                        return;\n                    } catch (signUpError: any) {\n                        // If sign up fails with email-already-in-use, try to sign in again\n                        // This might happen if user was created between attempts\n                        if (signUpError.code === 'auth/email-already-in-use') {\n                            const fbUser = await signInWithEmail(email, password);\n                            // Get user data and proceed with login (same logic as above)\n                            const { apiService } = await import('../utils/apiService');\n                            const resolveResponse = await apiService.resolveUserId({\n                                firebase_uid: fbUser.uid,\n                                email: email\n                            });\n\n                            if (resolveResponse.success && resolveResponse.user) {\n                                const serverUser = resolveResponse.user;\n                                const userData = {\n                                    id: serverUser.id,\n                                    name: serverUser.name || fbUser.displayName || email.split('@')[0],\n                                    email: serverUser.email || email,\n                                    isActive: serverUser.isActive !== false,\n                                    lastActive: serverUser.lastActive || nowIso,\n                                    roles: serverUser.roles || ['user'],\n                                    settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                                    phone: serverUser.phone || fbUser.phoneNumber || '',\n                                    avatar: serverUser.avatar || fbUser.photoURL || 'https://i.pravatar.cc/150?img=12',\n                                    bio: serverUser.bio || '',\n                                    karmaPoints: serverUser.karmaPoints || 0,\n                                    joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n                                    location: serverUser.location || { city: '×ª×œ ××‘×™×‘', country: 'Israel' },\n                                    interests: serverUser.interests || [],\n                                    postsCount: serverUser.postsCount || 0,\n                                    followersCount: serverUser.followersCount || 0,\n                                    followingCount: serverUser.followingCount || 0,\n                                    notifications: [],\n                                };\n                                await setCurrentPrincipal({ user: userData, role: 'user' });\n                                await navigationQueue.reset(0, [{ name: 'HomeStack' }], 2);\n                                return;\n                            }\n                        }\n                        throw signUpError;\n                    }\n                } else {\n                    // For other sign-in errors (like wrong-password), throw to be handled below\n                    throw signInError;\n                }\n            }\n        } catch (error: any) {\n            console.error('Auth action failed', error);\n            let msg = t('common:genericTryAgain');\n            if (error.code === 'auth/wrong-password') {\n                msg = t('auth:email.wrongPassword', '×¡×™×¡××” ×œ× × ×›×•× ×”. ×× × × ×¡×” ×©×•×‘.');\n            } else if (error.code === 'auth/email-already-in-use') {\n                msg = t('auth:email.emailAlreadyRegistered', '×”××™×™×œ ×›×‘×¨ ×¨×©×•×. ×× × ×‘×“×•×§ ××ª ×”×¡×™×¡××”.');\n            } else if (error.code === 'auth/user-not-found') {\n                // This shouldn't happen in unified flow, but handle it gracefully\n                msg = t('common:genericTryAgain');\n            }\n            Alert.alert(t('common:error'), msg);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <SafeAreaView style={styles.container}>\n            <StatusBar barStyle=\"dark-content\" backgroundColor={colors.background} />\n\n            {/* Background Decor */}\n            <View style={styles.circle1} />\n            <View style={styles.circle2} />\n\n            <KeyboardAvoidingView\n                behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n                style={styles.keyboardView}\n            >\n                <Animated.ScrollView\n                    contentContainerStyle={styles.scrollContent}\n                    style={{ opacity: fadeAnim }}\n                    showsVerticalScrollIndicator={false}\n                >\n                    {/* Header / Logo */}\n                    <View style={styles.header}>\n                        <Image\n                            // eslint-disable-next-line @typescript-eslint/no-require-imports\n                            source={require('../assets/images/new_logo_black.png')}\n                            style={styles.logo}\n                            resizeMode=\"contain\"\n                        />\n                        <Text style={styles.title}>{t('common:appName', 'Karma Community')}</Text>\n                        <Text style={styles.subtitle}>\n                            {t('common:welcomeShort')}\n                        </Text>\n                    </View>\n\n                    {/* Language Switch */}\n                    <TouchableOpacity onPress={toggleLanguage} style={styles.langButton}>\n                        <Ionicons name=\"globe-outline\" size={20} color={colors.textSecondary} />\n                        <Text style={styles.langText}>{i18n.language.startsWith('he') ? 'EN' : '×¢×‘'}</Text>\n                    </TouchableOpacity>\n\n                    {/* Form Card */}\n                    <View style={styles.card}>\n\n                        {/* Google Login */}\n                        <View style={styles.googleContainer}>\n                            <FirebaseGoogleButton />\n                        </View>\n\n                        <View style={styles.divider}>\n                            <View style={styles.line} />\n                            <Text style={styles.orText}>{t('common:or')}</Text>\n                            <View style={styles.line} />\n                        </View>\n\n                        {/* Email Fields */}\n                        <View style={styles.inputContainer}>\n                            <Text style={styles.label}>{t('auth:email.placeholder')}</Text>\n                            <TextInput\n                                style={styles.input}\n                                placeholder={t('auth:email.placeholderExample', 'name@example.com')}\n                                placeholderTextColor={colors.textTertiary}\n                                value={email}\n                                onChangeText={setEmail}\n                                autoCapitalize=\"none\"\n                                keyboardType=\"email-address\"\n                            />\n                        </View>\n\n                        <View style={styles.inputContainer}>\n                            <Text style={styles.label}>{t('auth:email.passwordPlaceholder')}</Text>\n                            <View style={styles.passwordWrapper}>\n                                <TextInput\n                                    style={styles.inputPassword}\n                                    placeholder={t('auth:email.passwordPlaceholderExample', '******')}\n                                    placeholderTextColor={colors.textTertiary}\n                                    value={password}\n                                    onChangeText={setPassword}\n                                    secureTextEntry={!showPassword}\n                                />\n                                <TouchableOpacity onPress={() => setShowPassword(!showPassword)} style={styles.eyeIcon}>\n                                    <Ionicons name={showPassword ? \"eye-off-outline\" : \"eye-outline\"} size={20} color={colors.textSecondary} />\n                                </TouchableOpacity>\n                            </View>\n                        </View>\n\n                        {/* Action Button */}\n                        <TouchableOpacity\n                            style={[styles.primaryButton, isLoading && styles.disabledBtn]}\n                            onPress={handleEmailAction}\n                            disabled={isLoading}\n                        >\n                            {isLoading ? (\n                                <ActivityIndicator color=\"#fff\" />\n                            ) : (\n                                <Text style={styles.primaryBtnText}>\n                                    {t('auth:email.unifiedAction', '×”××©×š')}\n                                </Text>\n                            )}\n                        </TouchableOpacity>\n\n\n                        {/* Guest Mode */}\n                        <TouchableOpacity onPress={handleGuestLogin} style={styles.guestButton}>\n                            <Text style={styles.guestText}>{t('auth:continueAsGuest')}</Text>\n                            <Ionicons name=\"arrow-forward\" size={16} color={colors.textSecondary} style={{ marginLeft: 4 }} />\n                        </TouchableOpacity>\n\n                    </View>\n                </Animated.ScrollView>\n            </KeyboardAvoidingView>\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: colors.backgroundSecondary,\n        overflow: 'hidden',\n    },\n    keyboardView: {\n        flex: 1,\n    },\n    scrollContent: {\n        flexGrow: 1,\n        paddingHorizontal: 24,\n        paddingBottom: 40,\n        justifyContent: 'center',\n        minHeight: height,\n    },\n    circle1: {\n        position: 'absolute',\n        top: -100,\n        right: -100,\n        width: 300,\n        height: 300,\n        borderRadius: 150,\n        backgroundColor: colors.primary,\n        opacity: 0.1,\n    },\n    circle2: {\n        position: 'absolute',\n        bottom: -50,\n        left: -50,\n        width: 200,\n        height: 200,\n        borderRadius: 100,\n        backgroundColor: colors.secondary,\n        opacity: 0.1,\n    },\n    langButton: {\n        position: 'absolute',\n        top: Platform.OS === 'ios' ? 60 : 40,\n        left: 24,\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.white,\n        padding: 8,\n        borderRadius: 20,\n        elevation: 2,\n        shadowColor: '#000',\n        shadowOpacity: 0.1,\n        shadowRadius: 4,\n        shadowOffset: { width: 0, height: 2 },\n    },\n    langText: {\n        marginLeft: 6,\n        fontSize: 14,\n        color: colors.textPrimary,\n        fontWeight: '600',\n    },\n    header: {\n        alignItems: 'center',\n        marginBottom: 40,\n        marginTop: 60,\n    },\n    logo: {\n        width: 80,\n        height: 80,\n        marginBottom: 16,\n    },\n    title: {\n        fontSize: 28,\n        fontWeight: '800',\n        color: colors.textPrimary,\n        marginBottom: 8,\n    },\n    subtitle: {\n        fontSize: 16,\n        color: colors.textSecondary,\n        textAlign: 'center',\n    },\n    card: {\n        backgroundColor: colors.white,\n        borderRadius: 24,\n        padding: 24,\n        width: '100%',\n        maxWidth: 480,\n        alignSelf: 'center',\n        shadowColor: colors.primary,\n        shadowOffset: { width: 0, height: 8 },\n        shadowOpacity: 0.08,\n        shadowRadius: 24,\n        elevation: 8,\n    },\n    googleContainer: {\n        marginBottom: 20,\n    },\n    divider: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginBottom: 24,\n    },\n    line: {\n        flex: 1,\n        height: 1,\n        backgroundColor: colors.border,\n    },\n    orText: {\n        marginHorizontal: 16,\n        color: colors.textTertiary,\n        fontSize: 14,\n    },\n    inputContainer: {\n        marginBottom: 16,\n    },\n    label: {\n        fontSize: 14,\n        fontWeight: '600',\n        color: colors.textPrimary,\n        marginBottom: 8,\n        textAlign: 'left', // Inputs LTR mostly or RTL depending on lang, keeping label aligned naturally\n    },\n    input: {\n        backgroundColor: colors.backgroundSecondary,\n        borderWidth: 1,\n        borderColor: colors.border,\n        borderRadius: 12,\n        padding: 14,\n        fontSize: 16,\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    passwordWrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: colors.backgroundSecondary,\n        borderWidth: 1,\n        borderColor: colors.border,\n        borderRadius: 12,\n    },\n    inputPassword: {\n        flex: 1,\n        padding: 14,\n        fontSize: 16,\n        color: colors.textPrimary,\n        textAlign: 'left',\n    },\n    eyeIcon: {\n        padding: 14,\n    },\n    primaryButton: {\n        backgroundColor: colors.primary,\n        borderRadius: 14,\n        paddingVertical: 16,\n        alignItems: 'center',\n        marginTop: 8,\n        shadowColor: colors.primary,\n        shadowOffset: { width: 0, height: 4 },\n        shadowOpacity: 0.2,\n        shadowRadius: 8,\n        elevation: 4,\n    },\n    disabledBtn: {\n        opacity: 0.7,\n    },\n    primaryBtnText: {\n        color: colors.white,\n        fontSize: 16,\n        fontWeight: '700',\n    },\n    footerActions: {\n        marginTop: 20,\n        alignItems: 'center',\n        gap: 12,\n    },\n    linkText: {\n        color: colors.textSecondary,\n        fontSize: 14,\n    },\n    switchText: {\n        color: colors.textSecondary,\n        fontSize: 14,\n    },\n    linkTextBold: {\n        color: colors.primary,\n        fontWeight: '700',\n    },\n    guestButton: {\n        marginTop: 30,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        paddingVertical: 12,\n    },\n    guestText: {\n        color: colors.textSecondary,\n        fontSize: 15,\n        fontWeight: '600',\n    },\n});","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/MyChallengesScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[268,277],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1093,1096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1093,1096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'route' is defined but never used.","line":50,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3545,3548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3545,3548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4977,4980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4977,4980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5185,5188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5185,5188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5887,5890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5887,5890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8432,8435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8432,8435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":253,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9031,9034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9031,9034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":256,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9217,9220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9217,9220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":258,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9372,9375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9372,9375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9552,9555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9552,9555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":273,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9955,9958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9955,9958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// My Challenges Screen\n// Shows all challenges the user has joined/participating in\n// Allows adding entries for each challenge\nimport React, { useCallback, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n} from 'react-native';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { DailyHabitsQuickView } from '../components/Challenges/DailyHabitsQuickView';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge, ChallengeParticipant } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\n\nexport interface MyChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', label: '×›×Ÿ/×œ×', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', label: '××¡×¤×¨×™', icon: 'calculator-outline' },\n  { id: 'DURATION', label: '×–××Ÿ', icon: 'time-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', label: '×§×œ', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', label: '×‘×™× ×•× ×™', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', label: '×§×©×”', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', label: '××•××—×”', icon: 'trophy-outline', color: colors.primary },\n];\n\ntype ChallengeWithParticipation = CommunityChallenge & {\n  participation?: ChallengeParticipant;\n};\n\nexport default function MyChallengesScreen({ navigation, route }: MyChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n  const { selectedUser: user } = useUser();\n  \n  const [challenges, setChallenges] = useState<ChallengeWithParticipation[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<ChallengeWithParticipation[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      loadChallenges();\n    }, [])\n  );\n\n  // Apply search filter\n  React.useEffect(() => {\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      setFilteredChallenges(\n        challenges.filter(\n          (c) =>\n            c.title.toLowerCase().includes(query) ||\n            c.description?.toLowerCase().includes(query) ||\n            c.category?.toLowerCase().includes(query)\n        )\n      );\n    } else {\n      setFilteredChallenges(challenges);\n    }\n  }, [searchQuery, challenges]);\n\n  const loadChallenges = async () => {\n    if (!user?.id) {\n      showToast(t('messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Get user statistics which includes participations\n      const statsResponse = await db.getChallengeStatistics(user.id);\n      \n      if (statsResponse.success && statsResponse.data && statsResponse.data.challenges) {\n        const participations = statsResponse.data.challenges;\n        \n        // Map to our format\n        const challengesWithParticipation = participations.map((item: any) => ({\n          id: item.challenge_id,\n          creator_id: '',\n          title: item.title,\n          description: '',\n          type: item.type,\n          frequency: item.frequency,\n          difficulty: item.difficulty,\n          category: item.category,\n          goal_value: item.goal_value,\n          deadline: item.deadline,\n          is_active: true,\n          participants_count: 0,\n          created_at: '',\n          updated_at: '',\n          participation: {\n            id: item.id,\n            challenge_id: item.challenge_id,\n            user_id: item.user_id,\n            joined_at: item.joined_at,\n            current_streak: item.current_streak || 0,\n            best_streak: item.best_streak || 0,\n            total_entries: item.total_entries || 0,\n            last_entry_date: item.last_entry_date,\n          },\n        }));\n        \n        setChallenges(challengesWithParticipation);\n      } else {\n        setChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('messages.errorLoading'), 'error');\n      setChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const handleAddEntry = (challenge: ChallengeWithParticipation) => {\n    // Navigate to challenge details to add entry\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n      openEntryForm: true,\n    });\n  };\n\n  const handleViewDetails = (challenge: ChallengeWithParticipation) => {\n    (navigation as any).navigate('ChallengeDetailsScreen', {\n      challengeId: challenge.id,\n    });\n  };\n\n  const renderChallengeCard = ({ item }: { item: ChallengeWithParticipation }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((t) => t.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n    const participation = item.participation;\n\n    return (\n      <TouchableOpacity\n        style={styles.challengeCard}\n        onPress={() => handleViewDetails(item)}\n        activeOpacity={0.7}\n      >\n        <View style={styles.cardHeader}>\n          <View style={styles.cardTitleRow}>\n            <Ionicons\n              name={typeOption?.icon as any || 'trophy-outline'}\n              size={24}\n              color={difficultyOption?.color || colors.primary}\n            />\n            <Text style={styles.cardTitle} numberOfLines={2}>\n              {item.title}\n            </Text>\n          </View>\n          {difficultyOption && (\n            <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n              <Text style={styles.difficultyText}>{difficultyOption.label}</Text>\n            </View>\n          )}\n        </View>\n\n        {item.description && (\n          <Text style={styles.cardDescription} numberOfLines={2}>\n            {item.description}\n          </Text>\n        )}\n\n        {/* Participation Stats */}\n        {participation && (\n          <View style={styles.statsContainer}>\n            <View style={styles.statItem}>\n              <Ionicons name=\"flame-outline\" size={16} color={colors.primary} />\n              <Text style={styles.statLabel}>{t('stats.currentStreak')}</Text>\n              <Text style={styles.statValue}>{participation.current_streak || 0}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Ionicons name=\"trophy-outline\" size={16} color={colors.warning} />\n              <Text style={styles.statLabel}>{t('stats.bestStreak')}</Text>\n              <Text style={styles.statValue}>{participation.best_streak || 0}</Text>\n            </View>\n            <View style={styles.statItem}>\n              <Ionicons name=\"checkmark-done-outline\" size={16} color={colors.success} />\n              <Text style={styles.statLabel}>{t('stats.totalEntries')}</Text>\n              <Text style={styles.statValue}>{participation.total_entries || 0}</Text>\n            </View>\n          </View>\n        )}\n\n        {/* Action Button */}\n        <TouchableOpacity\n          style={styles.addEntryButton}\n          onPress={() => handleAddEntry(item)}\n        >\n          <Ionicons name=\"add-circle-outline\" size={20} color={colors.white} />\n          <Text style={styles.addEntryButtonText}>{t('addEntry')}</Text>\n        </TouchableOpacity>\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('messages.noJoinedChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>{t('messages.noJoinedChallengesSubtitle')}</Text>\n      <TouchableOpacity\n        style={styles.browseButton}\n        onPress={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n      >\n        <Ionicons name=\"search-outline\" size={24} color={colors.white} />\n        <Text style={styles.browseButtonText}>{t('browseChallenges')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™'),\n        ]}\n        onToggleMode={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')) {\n            (navigation as any).navigate('MyCreatedChallengesScreen');\n          }\n        }}\n        title={t('myChallenges')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n\n      <DailyHabitsQuickView\n        onBrowseChallenges={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' })}\n      />\n\n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')}</Text>\n      </View>\n\n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    paddingHorizontal: 8,\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 8,\n    marginBottom: 12,\n  },\n  statItem: {\n    flex: 1,\n    alignItems: 'center',\n    gap: 4,\n  },\n  statLabel: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    textAlign: 'center',\n  },\n  statValue: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n  },\n  addEntryButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    backgroundColor: colors.primary,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  addEntryButtonText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    paddingHorizontal: 32,\n  },\n  browseButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 12,\n  },\n  browseButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/MyCreatedChallengesScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1078,1081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1078,1081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'route' is defined but never used.","line":46,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5554,5557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5554,5557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8218,8221],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8218,8221],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8812,8815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8812,8815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":262,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8997,9000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8997,9000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":264,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9152,9155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9152,9155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9322,9325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9322,9325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// My Created Challenges Screen\n// Shows all challenges created by the current user\n// Allows editing and deleting of created challenges\nimport React, { useCallback, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  SafeAreaView,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  ActivityIndicator,\n  RefreshControl,\n} from 'react-native';\nimport { NavigationProp, useFocusEffect } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport HeaderComp from '../components/HeaderComp';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\nimport { useToast } from '../utils/toastService';\nimport { useTranslation } from 'react-i18next';\nimport { DonationsStackParamList, CommunityChallenge } from '../globals/types';\nimport { Ionicons } from '@expo/vector-icons';\nimport EditChallengeModal from '../components/Challenges/EditChallengeModal';\n\nexport interface MyCreatedChallengesScreenProps {\n  navigation: NavigationProp<DonationsStackParamList>;\n  route?: any;\n}\n\nconst CHALLENGE_TYPE_OPTIONS = [\n  { id: 'BOOLEAN', icon: 'checkmark-circle-outline' },\n  { id: 'NUMERIC', icon: 'calculator-outline' },\n  { id: 'DURATION', icon: 'time-outline' },\n];\n\nconst CHALLENGE_DIFFICULTY_OPTIONS = [\n  { id: 'easy', icon: 'happy-outline', color: colors.success },\n  { id: 'medium', icon: 'bulb-outline', color: colors.warning },\n  { id: 'hard', icon: 'flame-outline', color: colors.error },\n  { id: 'expert', icon: 'trophy-outline', color: colors.primary },\n];\n\nexport default function MyCreatedChallengesScreen({ navigation, route }: MyCreatedChallengesScreenProps) {\n  const { showToast } = useToast();\n  const { t } = useTranslation(['challenges', 'common']);\n  const { selectedUser: user } = useUser();\n  \n  const [challenges, setChallenges] = useState<CommunityChallenge[]>([]);\n  const [filteredChallenges, setFilteredChallenges] = useState<CommunityChallenge[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [selectedChallenge, setSelectedChallenge] = useState<CommunityChallenge | null>(null);\n\n  // Load challenges when screen focuses\n  useFocusEffect(\n    useCallback(() => {\n      loadChallenges();\n    }, [])\n  );\n\n  // Apply search filter\n  React.useEffect(() => {\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      setFilteredChallenges(\n        challenges.filter(\n          (c) =>\n            c.title.toLowerCase().includes(query) ||\n            c.description?.toLowerCase().includes(query) ||\n            c.category?.toLowerCase().includes(query)\n        )\n      );\n    } else {\n      setFilteredChallenges(challenges);\n    }\n  }, [searchQuery, challenges]);\n\n  const loadChallenges = async () => {\n    if (!user?.id) {\n      showToast(t('messages.loginRequired'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const filters = {\n        creator_id: user.id,\n        sort_by: 'created_at',\n        sort_order: 'DESC' as const,\n        limit: 100,\n      };\n      \n      const response = await db.getCommunityChallenges(filters);\n      \n      if (response.success && response.data) {\n        setChallenges(response.data);\n      } else {\n        setChallenges([]);\n      }\n    } catch (error) {\n      console.error('Error loading challenges:', error);\n      showToast(t('messages.errorLoading'), 'error');\n      setChallenges([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadChallenges();\n    setRefreshing(false);\n  };\n\n  const handleEditChallenge = (challenge: CommunityChallenge) => {\n    setSelectedChallenge(challenge);\n    setEditModalVisible(true);\n  };\n\n  const handleUpdateChallenge = async () => {\n    await loadChallenges();\n  };\n\n  const handleDeleteChallenge = (challenge: CommunityChallenge) => {\n    Alert.alert(\n      t('deleteChallenge'),\n      t('deleteChallengeConfirm', { title: challenge.title }),\n      [\n        {\n          text: t('common:cancel'),\n          style: 'cancel',\n        },\n        {\n          text: t('common:delete'),\n          style: 'destructive',\n          onPress: async () => {\n            if (!user?.id) return;\n            \n            try {\n              setLoading(true);\n              const response = await db.deleteCommunityChallenge(challenge.id, user.id);\n              \n              if (response.success) {\n                showToast(t('challengeDeleted'), 'success');\n                await loadChallenges();\n              } else {\n                showToast(t('messages.errorDeleting'), 'error');\n              }\n            } catch (error) {\n              console.error('Error deleting challenge:', error);\n              showToast(t('messages.errorDeleting'), 'error');\n            } finally {\n              setLoading(false);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const renderChallengeCard = ({ item }: { item: CommunityChallenge }) => {\n    const typeOption = CHALLENGE_TYPE_OPTIONS.find((opt) => opt.id === item.type);\n    const difficultyOption = CHALLENGE_DIFFICULTY_OPTIONS.find((d) => d.id === item.difficulty);\n\n    return (\n      <View style={styles.challengeCard}>\n        <View style={styles.cardHeader}>\n          <View style={styles.cardTitleRow}>\n            <Ionicons\n              name={typeOption?.icon as any || 'trophy-outline'}\n              size={24}\n              color={difficultyOption?.color || colors.primary}\n            />\n            <Text style={styles.cardTitle} numberOfLines={2}>\n              {item.title}\n            </Text>\n          </View>\n          {difficultyOption && (\n            <View style={[styles.difficultyBadge, { backgroundColor: difficultyOption.color }]}>\n              <Text style={styles.difficultyText}>{difficultyOption ? t(`challenges:difficulty.${difficultyOption.id}`) : item.difficulty}</Text>\n            </View>\n          )}\n        </View>\n\n        {item.description && (\n          <Text style={styles.cardDescription} numberOfLines={2}>\n            {item.description}\n          </Text>\n        )}\n\n        <View style={styles.cardMeta}>\n          <View style={styles.metaItem}>\n            <Ionicons name=\"people-outline\" size={16} color={colors.textSecondary} />\n            <Text style={styles.metaText}>{t('stats.participantsCount', { count: item.participants_count })}</Text>\n          </View>\n          <View style={styles.metaItem}>\n            <Ionicons\n              name={item.is_active ? 'checkmark-circle' : 'close-circle'}\n              size={16}\n              color={item.is_active ? colors.success : colors.error}\n            />\n            <Text style={styles.metaText}>\n              {item.is_active ? t('active') : t('inactive')}\n            </Text>\n          </View>\n        </View>\n\n        {/* Action Buttons */}\n        <View style={styles.actionButtons}>\n          <TouchableOpacity\n            style={[styles.actionButton, styles.editButton]}\n            onPress={() => handleEditChallenge(item)}\n          >\n            <Ionicons name=\"pencil-outline\" size={18} color={colors.white} />\n            <Text style={styles.actionButtonText}>{t('edit')}</Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={[styles.actionButton, styles.deleteButton]}\n            onPress={() => handleDeleteChallenge(item)}\n          >\n            <Ionicons name=\"trash-outline\" size={18} color={colors.white} />\n            <Text style={styles.actionButtonText}>{t('delete')}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Ionicons name=\"trophy-outline\" size={64} color={colors.textSecondary} />\n      <Text style={styles.emptyTitle}>{t('messages.noCreatedChallenges')}</Text>\n      <Text style={styles.emptySubtitle}>{t('messages.noCreatedChallengesSubtitle')}</Text>\n      <TouchableOpacity\n        style={styles.createButton}\n        onPress={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'offer' })}\n      >\n        <Ionicons name=\"add-circle-outline\" size={24} color={colors.white} />\n        <Text style={styles.createButtonText}>{t('createNewChallenge')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <HeaderComp\n        mode={true}\n        menuOptions={[\n          t('challenges:statistics'),\n          t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×'),\n          t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™'),\n        ]}\n        onToggleMode={() => (navigation as any).navigate('CommunityChallengesScreen', { mode: 'offer' })}\n        onSelectMenuItem={(option) => {\n          if (option === t('challenges:statistics')) {\n            (navigation as any).navigate('ChallengeStatisticsScreen');\n          } else if (option === t('challenges:browseChallenges', '×¢×™×•×Ÿ ×‘××ª×’×¨×™×')) {\n            (navigation as any).navigate('CommunityChallengesScreen', { mode: 'search' });\n          } else if (option === t('challenges:myChallenges', '×”××ª×’×¨×™× ×©×œ×™')) {\n            (navigation as any).navigate('MyChallengesScreen');\n          }\n        }}\n        title={t('myCreatedChallenges')}\n        placeholder={t('common:search')}\n        filterOptions={[]}\n        sortOptions={[]}\n        searchData={filteredChallenges}\n        onSearch={(query) => setSearchQuery(query)}\n        hideSortButton={true}\n      />\n      \n      {/* Screen Title */}\n      <View style={styles.titleContainer}>\n        <Text style={styles.screenTitle}>{t('challenges:myCreatedChallenges', '×”××ª×’×¨×™× ×©×™×¦×¨×ª×™')}</Text>\n      </View>\n      \n      <FlatList\n        data={filteredChallenges}\n        renderItem={renderChallengeCard}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={styles.listContent}\n        ListEmptyComponent={loading ? <ActivityIndicator size=\"large\" color={colors.primary} /> : renderEmptyState()}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n      />\n\n      {/* Edit Modal */}\n      {selectedChallenge && (\n        <EditChallengeModal\n          visible={editModalVisible}\n          challenge={selectedChallenge}\n          onClose={() => {\n            setEditModalVisible(false);\n            setSelectedChallenge(null);\n          }}\n          onUpdate={handleUpdateChallenge}\n        />\n      )}\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  titleContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.white,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  screenTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n    textAlign: 'center',\n  },\n  listContent: {\n    padding: 16,\n    flexGrow: 1,\n  },\n  challengeCard: {\n    backgroundColor: colors.white,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  cardTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    flex: 1,\n  },\n  difficultyBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  difficultyText: {\n    fontSize: FontSizes.caption,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  cardDescription: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    marginBottom: 12,\n    lineHeight: 20,\n  },\n  cardMeta: {\n    flexDirection: 'row',\n    gap: 16,\n    marginBottom: 12,\n  },\n  metaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    gap: 8,\n    marginTop: 8,\n  },\n  actionButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  editButton: {\n    backgroundColor: colors.primary,\n  },\n  deleteButton: {\n    backgroundColor: colors.error,\n  },\n  actionButtonText: {\n    fontSize: FontSizes.small,\n    fontWeight: '600',\n    color: colors.white,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingVertical: 60,\n  },\n  emptyTitle: {\n    fontSize: FontSizes.large,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptySubtitle: {\n    fontSize: FontSizes.medium,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    paddingHorizontal: 32,\n  },\n  createButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 12,\n  },\n  createButtonText: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.white,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/NewChatScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ParamListBase' is defined but never used.","line":29,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ParamListBase"},"fix":{"range":[1109,1167],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":41,"column":27,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":43,"endColumn":2,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[1785,1819],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[1785,1819],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'route' is assigned a value but never used.","line":48,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9353,9356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9353,9356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":328,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":328,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12533,12536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12533,12536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":351,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":351,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13396,13399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13396,13399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Start a new chat by selecting from friends/suggestions with filters and sorting; creates conversation if needed.\n// - Reached from: 'ChatListScreen' quick action and other entry points via route 'NewChatScreen'.\n// - Provides: Loads following/followers or suggestions; shows badges for existing chats; on select, navigates to 'ChatDetailScreen' with params.\n// - Reads from context: `useUser()` -> `selectedUser`.\n// - External deps/services: `followService` (suggestions/followers/following), `chatService` (create, list, exists, send first message).\n// screens/NewChatScreen.tsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  SafeAreaView,\n  Platform,\n  Alert,\n  TextInput,\n  Image,\n  ScrollView,\n  ActivityIndicator,\n  RefreshControl,\n  StatusBar,\n  Dimensions,\n} from 'react-native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigation, useRoute, RouteProp } from '@react-navigation/native';\nimport { ParamListBase } from '@react-navigation/native';\nimport { useUser } from '../stores/userStore';\nimport { getFollowing, getFollowers, getFollowSuggestions } from '../utils/followService';\nimport { createConversation, getAllConversations, conversationExists, sendMessage } from '../utils/chatService';\nimport { UserPreview as CharacterType } from '../globals/types';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\n\ntype FilterType = 'all' | 'online' | 'highKarma' | 'recentFollowers';\ntype SortType = 'name' | 'karma' | 'followers' | 'recent';\n\ntype NewChatRouteParams = {\n  // No specific params needed\n};\n\nexport default function NewChatScreen() {\n  const { t } = useTranslation(['newChatScreen']);\n  const navigation = useNavigation();\n  const route = useRoute<RouteProp<Record<string, NewChatRouteParams>, string>>();\n  const { selectedUser } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [searchQuery, setSearchQuery] = useState('');\n  const [friends, setFriends] = useState<CharacterType[]>([]);\n  const [filteredFriends, setFilteredFriends] = useState<CharacterType[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [activeFilter, setActiveFilter] = useState<FilterType>('all');\n  const [sortBy, setSortBy] = useState<SortType>('name');\n  const [showFilters, setShowFilters] = useState(false);\n  const [existingConversations, setExistingConversations] = useState<string[]>([]);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const [filtersHeight, setFiltersHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight - (showFilters ? filtersHeight : 0)\n    : undefined;\n\n  const loadFriends = useCallback(async () => {\n    if (!selectedUser) {\n      Alert.alert(t('error'), t('selectUserFirst'));\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n\n      const currentUserId = String(selectedUser.id).trim().toLowerCase();\n      const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n\n      const following = await getFollowing(selectedUser.id);\n\n      const followers = await getFollowers(selectedUser.id);\n\n      const allFriends = [...following, ...followers];\n\n      // Filter out current user - check both ID and email (case-insensitive)\n      const uniqueFriends = allFriends.filter((friend, index, self) =>\n        index === self.findIndex(f => f.id === friend.id)\n      ).filter(friend => {\n        const friendId = String(friend.id || '').trim().toLowerCase();\n        const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n        const isCurrentUser = friendId === currentUserId ||\n          (currentUserEmail && friendEmail === currentUserEmail) ||\n          friendId === '';\n\n        if (isCurrentUser) {\n          console.log('ğŸš« NewChatScreen - Filtered out current user:', { friendId, friendEmail, name: friend.name });\n        }\n\n        return !isCurrentUser;\n      });\n\n      const conversations = await getAllConversations(selectedUser.id);\n      const existingUserIds = conversations.flatMap(conv =>\n        conv.participants.filter(id => id !== selectedUser.id)\n      );\n      setExistingConversations(existingUserIds);\n\n      if (uniqueFriends.length === 0) {\n        const suggestions = await getFollowSuggestions(selectedUser.id, 10, currentUserEmail);\n        // Additional filter as safety measure - check both ID and email\n        const filteredSuggestions = suggestions.filter(friend => {\n          const friendId = String(friend.id || '').trim().toLowerCase();\n          const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n          const isCurrentUser = friendId === currentUserId ||\n            (currentUserEmail && friendEmail === currentUserEmail) ||\n            friendId === '';\n\n          if (isCurrentUser) {\n            console.log('ğŸš« NewChatScreen - Filtered out current user from suggestions:', { friendId, friendEmail, name: friend.name });\n          }\n\n          return !isCurrentUser;\n        });\n        setFriends(filteredSuggestions);\n      } else {\n        setFriends(uniqueFriends);\n      }\n\n    } catch (error) {\n      console.error('âŒ Load friends error:', error);\n      Alert.alert(t('error'), t('errorLoadingFriends'));\n    } finally {\n      setIsLoading(false);\n      setRefreshing(false);\n    }\n  }, [selectedUser]);\n\n  const applyFilters = useCallback((friendsList: CharacterType[]) => {\n    if (!selectedUser) return friendsList;\n\n    const currentUserId = String(selectedUser.id).trim().toLowerCase();\n    const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n\n    // First, filter out current user (double-check to ensure current user is never shown)\n    let filtered = friendsList.filter(friend => {\n      const friendId = String(friend.id || '').trim().toLowerCase();\n      const friendEmail = friend.email ? String(friend.email).trim().toLowerCase() : '';\n      const isCurrentUser = friendId === currentUserId ||\n        (currentUserEmail && friendEmail === currentUserEmail) ||\n        friendId === '';\n\n      if (isCurrentUser) {\n        console.log('ğŸš« NewChatScreen - Filtered out current user in applyFilters:', { friendId, friendEmail, name: friend.name });\n      }\n\n      return !isCurrentUser;\n    });\n\n    switch (activeFilter) {\n      case 'online':\n        filtered = filtered.filter(friend => friend.isActive);\n        break;\n      case 'highKarma':\n        filtered = filtered.filter(friend => (friend.karmaPoints ?? 0) >= 100);\n        break;\n      case 'recentFollowers':\n        filtered = filtered.filter(friend => (friend.followersCount ?? 0) > 0);\n        break;\n    }\n\n    if (searchQuery.trim() !== '') {\n      filtered = filtered.filter(friend =>\n        (friend.name || '').toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (friend.bio || '').toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    switch (sortBy) {\n      case 'name':\n        filtered.sort((a, b) => (a.name || '').localeCompare(b.name || '', 'he'));\n        break;\n      case 'karma':\n        filtered.sort((a, b) => (b.karmaPoints ?? 0) - (a.karmaPoints ?? 0));\n        break;\n      case 'followers':\n        filtered.sort((a, b) => (b.followersCount ?? 0) - (a.followersCount ?? 0));\n        break;\n      case 'recent':\n        filtered.sort((a, b) => {\n          if (a.isActive && !b.isActive) return -1;\n          if (!a.isActive && b.isActive) return 1;\n          return 0;\n        });\n        break;\n    }\n\n    return filtered;\n  }, [activeFilter, sortBy, searchQuery, selectedUser]);\n\n  useEffect(() => {\n    const filtered = applyFilters(friends);\n    setFilteredFriends(filtered);\n  }, [friends, applyFilters]);\n\n  useEffect(() => {\n    loadFriends();\n  }, [loadFriends]);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    loadFriends();\n  }, [loadFriends]);\n\n  const handleCreateChat = async (friend: CharacterType) => {\n    if (!selectedUser) {\n      Alert.alert(t('error'), t('selectUserFirst'));\n      return;\n    }\n\n    try {\n      const existingConvId = await conversationExists(selectedUser.id, friend.id);\n      let conversationId: string;\n\n      if (existingConvId) {\n        console.log('ğŸ’¬ Conversation already exists:', existingConvId);\n        conversationId = existingConvId;\n      } else {\n        console.log('ğŸ’¬ Creating new conversation...');\n        conversationId = await createConversation([selectedUser.id, friend.id]);\n\n        const welcomeMessage = {\n          conversationId,\n          senderId: selectedUser.id,\n          text: t('welcomeMessage', { name: friend.name }),\n          timestamp: new Date().toISOString(),\n          read: false,\n          type: 'text' as const,\n          status: 'sent' as const,\n        };\n\n        await sendMessage(welcomeMessage);\n        console.log('ğŸ’¬ Sent welcome message');\n      }\n\n      (navigation as any).navigate('ChatDetailScreen', {\n        conversationId,\n        userName: friend.name,\n        userAvatar: friend.avatar,\n        otherUserId: friend.id,\n      });\n\n    } catch (error) {\n      console.error('âŒ Create chat error:', error);\n      Alert.alert(t('error'), t('errorCreatingChat'));\n    }\n  };\n\n  const renderFriend = ({ item }: { item: CharacterType }) => {\n    // Double-check: if this is the current user, don't render at all\n    if (!selectedUser) return null;\n\n    const currentUserId = String(selectedUser.id).trim().toLowerCase();\n    const currentUserEmail = selectedUser.email ? String(selectedUser.email).trim().toLowerCase() : '';\n    const itemId = String(item.id || '').trim().toLowerCase();\n    const itemEmail = item.email ? String(item.email).trim().toLowerCase() : '';\n    const isCurrentUser = itemId === currentUserId ||\n      (currentUserEmail && itemEmail === currentUserEmail) ||\n      itemId === '';\n\n    if (isCurrentUser) {\n      console.log('ğŸš« NewChatScreen - renderFriend: Skipping current user:', { itemId, itemEmail, name: item.name });\n      return null;\n    }\n\n    const hasExistingChat = existingConversations.includes(item.id);\n    const avatarUri = item.avatar || 'https://i.pravatar.cc/150?img=1';\n\n    return (\n      <TouchableOpacity\n        style={[styles.friendItem, hasExistingChat && styles.friendItemWithChat]}\n        onPress={() => handleCreateChat(item)}\n      >\n        <View style={styles.avatarContainer}>\n          <Image\n            source={{ uri: avatarUri }}\n            style={styles.avatar}\n          />\n          {item.isActive && <View style={styles.onlineIndicator} />}\n        </View>\n        <View style={styles.friendInfo}>\n          <View style={styles.friendHeader}>\n            <Text style={styles.friendName}>{item.name || t('noName')}</Text>\n            {hasExistingChat && (\n              <View style={styles.existingChatBadge}>\n                <Text style={styles.existingChatText}>{t('existingChat')}</Text>\n              </View>\n            )}\n          </View>\n          <Text style={styles.friendBio} numberOfLines={1}>\n            {item.bio || t('noBio')}\n          </Text>\n          <View style={styles.friendStats}>\n            <Text style={styles.karmaPoints}>â­ {item.karmaPoints ?? 0} {t('karmaPoints')}</Text>\n            <Text style={styles.followersCount}>\n              ğŸ‘¥ {item.followersCount ?? 0} {t('followers')}\n            </Text>\n          </View>\n        </View>\n        <Icon\n          name={hasExistingChat ? \"chatbubble\" : \"chatbubble-outline\"}\n          size={24}\n          color={hasExistingChat ? colors.success : colors.primary}\n        />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Icon name=\"people-outline\" size={80} color={colors.textSecondary} />\n      <Icon name=\"people-outline\" size={80} color={colors.textSecondary} />\n      <Text style={styles.emptyStateTitle}>{t('noFriendsYet')}</Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {t('startFollowingToChat')}\n      </Text>\n      <TouchableOpacity\n        style={styles.exploreButton}\n        onPress={() => (navigation as any).navigate('DiscoverPeopleScreen')}\n      >\n        <Text style={styles.exploreButtonText}>{t('discoverNewPeople')}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      <View \n        style={styles.header}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.headerButton}>\n          <Icon name=\"arrow-back\" size={24} color={colors.textPrimary} />\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => (navigation as any).navigate('DiscoverPeopleScreen')}\n          style={styles.headerButton}\n        >\n          <Icon name=\"people-outline\" size={24} color={colors.primary} />\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.searchContainer}>\n        <View style={styles.searchInputContainer}>\n          <Icon name=\"search\" size={20} color={colors.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            placeholder={t('searchFriends')}\n            placeholderTextColor={colors.textSecondary}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity onPress={() => setSearchQuery('')} style={styles.clearButton}>\n              <Icon name=\"close-circle\" size={20} color={colors.textSecondary} />\n            </TouchableOpacity>\n          )}\n        </View>\n\n        <TouchableOpacity\n          style={styles.filterButton}\n          onPress={() => setShowFilters(!showFilters)}\n        >\n          <Icon name=\"funnel-outline\" size={20} color={colors.primary} />\n          <Text style={styles.filterButtonText}>{t('filter')}</Text>\n        </TouchableOpacity>\n      </View>\n\n      {showFilters && (\n        <View \n          style={styles.filtersContainer}\n          onLayout={(event) => {\n            if (Platform.OS === 'web') {\n              const { height } = event.nativeEvent.layout;\n              setFiltersHeight(height);\n            }\n          }}\n        >\n          <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.filterScrollView}>\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'all' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('all')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'all' && styles.filterChipTextActive]}>\n                {t('all')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'online' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('online')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'online' && styles.filterChipTextActive]}>\n                {t('online')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'highKarma' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('highKarma')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'highKarma' && styles.filterChipTextActive]}>\n                {t('highKarma')}\n              </Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.filterChip, activeFilter === 'recentFollowers' && styles.filterChipActive]}\n              onPress={() => setActiveFilter('recentFollowers')}\n            >\n              <Text style={[styles.filterChipText, activeFilter === 'recentFollowers' && styles.filterChipTextActive]}>\n                {t('newFollowers')}\n              </Text>\n            </TouchableOpacity>\n          </ScrollView>\n\n          <View style={styles.sortContainer}>\n            <Text style={styles.sortLabel}>{t('sortLabel')}</Text>\n            <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.sortScrollView}>\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'name' && styles.sortChipActive]}\n                onPress={() => setSortBy('name')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'name' && styles.sortChipTextActive]}>\n                  {t('sortName')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'karma' && styles.sortChipActive]}\n                onPress={() => setSortBy('karma')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'karma' && styles.sortChipTextActive]}>\n                  {t('sortKarma')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'followers' && styles.sortChipActive]}\n                onPress={() => setSortBy('followers')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'followers' && styles.sortChipTextActive]}>\n                  {t('sortFollowers')}\n                </Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.sortChip, sortBy === 'recent' && styles.sortChipActive]}\n                onPress={() => setSortBy('recent')}\n              >\n                <Text style={[styles.sortChipText, sortBy === 'recent' && styles.sortChipTextActive]}>\n                  {t('sortActivity')}\n                </Text>\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n        </View>\n      )}\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        {isLoading && filteredFriends.length === 0 ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color={colors.primary} />\n            <Text style={styles.loadingText}>{t('loadingFriends')}</Text>\n          </View>\n        ) : (\n          <FlatList\n            data={filteredFriends}\n            keyExtractor={(item) => item.id}\n            renderItem={renderFriend}\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={renderEmptyState}\n            showsVerticalScrollIndicator={false}\n            scrollEnabled={true}\n            nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n            scrollEventThrottle={16}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={onRefresh}\n                tintColor={colors.primary}\n              />\n            }\n          />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    marginTop: Platform.OS === 'android' ? 30 : 0,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.backgroundSecondary,\n    alignItems: 'center',\n  },\n  searchInputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: colors.background,\n    borderRadius: 12,\n    paddingHorizontal: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n    marginRight: 12,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  searchInput: {\n    flex: 1,\n    height: 44,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    textAlign: 'right',\n  },\n  clearButton: {\n    marginLeft: 8,\n  },\n  listContent: {\n    paddingVertical: 8,\n  },\n  friendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: colors.background,\n    marginHorizontal: 16,\n    marginVertical: 4,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  friendInfo: {\n    flex: 1,\n  },\n  friendName: {\n    fontSize: FontSizes.heading3,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 2,\n  },\n  friendBio: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 4,\n  },\n  friendStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  karmaPoints: {\n    fontSize: FontSizes.caption,\n    color: colors.primary,\n    marginRight: 12,\n  },\n  followersCount: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 64,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 24,\n    lineHeight: 20,\n  },\n  exploreButton: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n  },\n  exploreButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n  },\n  filterButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 8,\n    backgroundColor: colors.primary + '10',\n    borderWidth: 1,\n    borderColor: colors.primary + '30',\n  },\n  filterButtonText: {\n    color: colors.primary,\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  filtersContainer: {\n    backgroundColor: colors.backgroundSecondary,\n    paddingHorizontal: 16,\n    paddingBottom: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  filterScrollView: {\n    marginBottom: 12,\n  },\n  filterChip: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: colors.background,\n    marginRight: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  filterChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  filterChipText: {\n    fontSize: FontSizes.caption,\n    color: colors.textPrimary,\n  },\n  filterChipTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  sortContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  sortLabel: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n    marginRight: 12,\n  },\n  sortScrollView: {\n    flex: 1,\n  },\n  sortChip: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    backgroundColor: colors.background,\n    marginRight: 8,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  sortChipActive: {\n    backgroundColor: colors.primary,\n    borderColor: colors.primary,\n  },\n  sortChipText: {\n    fontSize: FontSizes.caption,\n    color: colors.textPrimary,\n  },\n  sortChipTextActive: {\n    color: colors.white,\n    fontWeight: '600',\n  },\n  avatarContainer: {\n    position: 'relative',\n  },\n  onlineIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: colors.success,\n    borderWidth: 2,\n    borderColor: colors.background,\n  },\n  friendHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 2,\n  },\n  existingChatBadge: {\n    marginLeft: 8,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 12,\n    backgroundColor: colors.success + '20',\n  },\n  existingChatText: {\n    fontSize: FontSizes.caption - 2,\n    color: colors.success,\n    fontWeight: '600',\n  },\n  friendItemWithChat: {\n    borderColor: colors.success + '30',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginTop: 12,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/NotificationsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":9,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[672,683],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getNotificationSettings' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getNotificationSettings"},"fix":{"range":[1292,1319],"text":""},"desc":"Remove unused variable \"getNotificationSettings\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateNotificationSettings' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"updateNotificationSettings"},"fix":{"range":[1319,1349],"text":""},"desc":"Remove unused variable \"updateNotificationSettings\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showSettings' is assigned a value but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setShowSettings' is assigned a value but never used.","line":51,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleMarkAsRead' is assigned a value but never used.","line":121,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8977,8980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8977,8980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Displays a feed of notifications with read/unread state, actions, and settings.\n// - Reached from: Top bar routes and deep links; route name 'NotificationsScreen'.\n// - Provides: List with swipe/press actions: mark read, mark all read, delete, clear all; badge for unread count; real-time updates via in-app events and polling.\n// - Reads from context: `useUser()` -> selectedUser.\n// - Navigation side-effects: On tapping a 'message' notification with `conversationId`, navigates to 'ChatDetailScreen'.\n// - External deps/services: `notificationService` (CRUD + subscribe), i18n.\n// screens/NotificationsScreen.tsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  SafeAreaView,\n  Platform,\n  Alert,\n  RefreshControl,\n  StatusBar,\n  Dimensions,\n} from 'react-native';\nimport { useNavigation, useFocusEffect, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { useUser } from '../stores/userStore';\nimport {\n  getNotifications,\n  markNotificationAsRead,\n  markAllNotificationsAsRead,\n  deleteNotification,\n  clearAllNotifications,\n  NotificationData,\n  getUnreadNotificationCount,\n  getNotificationSettings,\n  updateNotificationSettings,\n  subscribeToNotificationEvents,\n} from '../utils/notificationService';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\n\nexport default function NotificationsScreen() {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n  const { selectedUser } = useUser();\n  const { t } = useTranslation(['notifications', 'common']);\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [notifications, setNotifications] = useState<NotificationData[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showSettings, setShowSettings] = useState(false);\n  const [headerHeight, setHeaderHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && headerHeight > 0\n    ? screenHeight - tabBarHeight - headerHeight\n    : undefined;\n\n  console.log('ğŸ”” NotificationsScreen - Component rendered, selectedUser:', selectedUser?.name || 'null');\n\n  const loadNotifications = useCallback(async () => {\n    console.log('ğŸ”” NotificationsScreen - loadNotifications - selectedUser:', selectedUser?.name || 'null');\n\n    if (!selectedUser) {\n      console.log('ğŸ”” NotificationsScreen - No selected user, cannot load notifications');\n      return;\n    }\n\n    try {\n      const userNotifications = await getNotifications(selectedUser.id);\n      setNotifications(userNotifications);\n\n      const count = await getUnreadNotificationCount(selectedUser.id);\n      setUnreadCount(count);\n    } catch (error) {\n      console.error('âŒ Load notifications error:', error);\n      Alert.alert(t('common:errorTitle'), t('notifications:loadError'));\n    }\n  }, [selectedUser]);\n\n  useFocusEffect(\n    useCallback(() => {\n      console.log('ğŸ”” NotificationsScreen - Screen focused, loading notifications...');\n      console.log('ğŸ”” NotificationsScreen - selectedUser in useFocusEffect:', selectedUser?.name || 'null');\n      loadNotifications();\n\n      // Subscribe to in-app notification events for real-time updates\n      const unsubscribe = subscribeToNotificationEvents((notification) => {\n        if (!selectedUser) return;\n        if (notification.userId !== selectedUser.id) return;\n        console.log('ğŸ”” NotificationsScreen - Realtime notification received');\n        // Prepend the new notification and update unread counter\n        setNotifications((prev) => [notification, ...prev]);\n        setUnreadCount((prev) => prev + (notification.read ? 0 : 1));\n      });\n\n      // Lightweight polling fallback to ensure UI stays in sync\n      const interval = setInterval(async () => {\n        if (!selectedUser) return;\n        try {\n          const userNotifications = await getNotifications(selectedUser.id);\n          setNotifications(userNotifications);\n          const count = userNotifications.filter(n => !n.read).length;\n          setUnreadCount(count);\n        } catch (e) {\n          console.warn('âš ï¸ NotificationsScreen - polling error', e);\n        }\n      }, 3000);\n\n      return () => {\n        unsubscribe?.();\n        clearInterval(interval);\n      };\n    }, [loadNotifications, selectedUser])\n  );\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    loadNotifications().finally(() => setRefreshing(false));\n  }, [loadNotifications]);\n\n  const handleMarkAsRead = async (notificationId: string) => {\n    if (!selectedUser) return;\n\n    try {\n      await markNotificationAsRead(notificationId, selectedUser.id);\n      await loadNotifications();\n    } catch (error) {\n      console.error('âŒ Mark as read error:', error);\n    }\n  };\n\n  const handleMarkAllAsRead = async () => {\n    if (!selectedUser) return;\n\n    try {\n      await markAllNotificationsAsRead(selectedUser.id);\n      await loadNotifications();\n      Alert.alert(t('notifications:markAllDoneTitle'), t('notifications:markAllDoneBody'));\n    } catch (error) {\n      console.error('âŒ Mark all as read error:', error);\n      Alert.alert(t('common:errorTitle'), t('notifications:markAllError'));\n    }\n  };\n\n  const handleDeleteNotification = async (notificationId: string) => {\n    if (!selectedUser) return;\n\n    try {\n      await deleteNotification(notificationId, selectedUser.id);\n      await loadNotifications();\n    } catch (error) {\n      console.error('âŒ Delete notification error:', error);\n    }\n  };\n\n  const handleClearAllNotifications = async () => {\n    console.log('ğŸ”” Clear all pressed');\n    if (!selectedUser) return;\n\n    if (notifications.length === 0) {\n      console.log('â„¹ï¸ No notifications to clear');\n      return;\n    }\n\n    const performClear = async () => {\n      try {\n        await clearAllNotifications(selectedUser.id);\n        await loadNotifications();\n        // Optional: Show success message or just let the list clear\n        // Alert.alert(t('notifications:clearAllDoneTitle'), t('notifications:clearAllDoneBody'));\n      } catch (error) {\n        console.error('âŒ Clear all notifications error:', error);\n        Alert.alert(t('common:errorTitle'), t('notifications:clearAllError'));\n      }\n    };\n\n    if (Platform.OS === 'web') {\n      if (window.confirm(t('notifications:clearAllMessage'))) {\n        await performClear();\n      }\n    } else {\n      Alert.alert(\n        t('notifications:clearAllTitle'),\n        t('notifications:clearAllMessage'),\n        [\n          { text: t('common:cancel'), style: 'cancel' },\n          {\n            text: t('common:delete'),\n            style: 'destructive',\n            onPress: performClear,\n          },\n        ]\n      );\n    }\n  };\n\n  const getNotificationIcon = (type: NotificationData['type']) => {\n    switch (type) {\n      case 'message':\n        return 'chatbubble-outline';\n      case 'follow':\n        return 'person-add-outline';\n      case 'like':\n        return 'heart-outline';\n      case 'comment':\n        return 'chatbubble-ellipses-outline';\n      case 'system':\n        return 'notifications-outline';\n      default:\n        return 'notifications-outline';\n    }\n  };\n\n  const getNotificationColor = (type: NotificationData['type']) => {\n    switch (type) {\n      case 'message':\n        return colors.primary;\n      case 'follow':\n        return colors.success;\n      case 'like':\n        return colors.error;\n      case 'comment':\n        return colors.warning;\n      case 'system':\n        return colors.info;\n      default:\n        return colors.textSecondary;\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffTime = Math.abs(now.getTime() - date.getTime());\n    const diffMinutes = Math.floor(diffTime / (1000 * 60));\n    const diffHours = Math.floor(diffTime / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffMinutes < 1) {\n      return t('common:time.now');\n    } else if (diffMinutes < 60) {\n      return t('common:time.minutesAgo', { count: diffMinutes });\n    } else if (diffHours < 24) {\n      return t('common:time.hoursAgo', { count: diffHours });\n    } else if (diffDays < 7) {\n      return t('common:time.daysAgo', { count: diffDays });\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  const handleOpen = async (item: NotificationData) => {\n    if (!selectedUser) return;\n    try {\n      await markNotificationAsRead(item.id, selectedUser.id);\n      if (item.type === 'message' && item.data?.conversationId) {\n        (navigation as any).navigate('ChatDetailScreen', { conversationId: item.data.conversationId });\n      }\n    } catch (error) {\n      console.error('âŒ Open notification error:', error);\n    }\n  };\n\n  const renderNotification = ({ item }: { item: NotificationData }) => (\n    <TouchableOpacity\n      style={[\n        styles.notificationItem,\n        !item.read && styles.unreadNotification,\n      ]}\n      onPress={() => handleOpen(item)}\n    >\n      <View style={styles.notificationHeader}>\n        <View style={styles.notificationIconContainer}>\n          <Icon\n            name={getNotificationIcon(item.type)}\n            size={20}\n            color={getNotificationColor(item.type)}\n          />\n        </View>\n        <View style={styles.notificationContent}>\n          <Text style={styles.notificationTitle}>{item.title}</Text>\n          <Text style={styles.notificationBody}>{item.body}</Text>\n          <Text style={styles.notificationTime}>{formatTime(item.timestamp)}</Text>\n        </View>\n        <TouchableOpacity\n          style={styles.deleteButton}\n          onPress={() => handleDeleteNotification(item.id)}\n        >\n          <Icon name=\"close\" size={16} color={colors.textSecondary} />\n        </TouchableOpacity>\n      </View>\n      {!item.read && <View style={styles.unreadIndicator} />}\n    </TouchableOpacity>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyState}>\n      <Icon name=\"notifications-off-outline\" size={80} color={colors.textSecondary} />\n      <Text style={styles.emptyStateTitle}>{t('notifications:empty.title')}</Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {t('notifications:empty.subtitle')}\n      </Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      {/* Header container - measure total height */}\n      <View\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setHeaderHeight(height);\n          }\n        }}\n      >\n        {/* Additional header actions for notifications */}\n        <View style={styles.additionalHeaderSection}>\n          {[\n            unreadCount > 0 && (\n              <TouchableOpacity \n                key=\"mark-all-read\"\n                onPress={handleMarkAllAsRead} \n                style={styles.headerButton}\n              >\n                <Icon name=\"checkmark-done\" size={24} color={colors.primary} />\n              </TouchableOpacity>\n            ),\n            notifications.length > 0 && (\n              <TouchableOpacity \n                key=\"clear-all\"\n                onPress={handleClearAllNotifications} \n                style={styles.headerButton}\n              >\n                <Icon name=\"trash-outline\" size={24} color={colors.error} />\n              </TouchableOpacity>\n            ),\n          ].filter(Boolean)}\n        </View>\n\n        {unreadCount > 0 && (\n          <View style={styles.unreadBadge}>\n            <Text style={styles.unreadBadgeText}>{t('notifications:unreadBadge', { count: unreadCount })}</Text>\n          </View>\n        )}\n      </View>\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={notifications}\n          keyExtractor={(item) => item.id}\n          renderItem={renderNotification}\n          contentContainerStyle={styles.listContent}\n          ListEmptyComponent={renderEmptyState}\n          refreshControl={\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n          }\n          showsVerticalScrollIndicator={false}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n        />\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  additionalHeaderSection: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    // backgroundColor: colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 44,\n    height: 44,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerActions: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  unreadBadge: {\n    backgroundColor: colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginHorizontal: 16,\n    marginTop: 8,\n    borderRadius: 8,\n  },\n  unreadBadgeText: {\n    color: colors.white,\n    fontSize: FontSizes.caption,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  listContent: {\n    paddingVertical: 8,\n  },\n  notificationItem: {\n    backgroundColor: colors.background,\n    marginHorizontal: 16,\n    marginVertical: 4,\n    borderRadius: 12,\n    padding: 16,\n    borderWidth: 1,\n    borderColor: colors.border,\n  },\n  unreadNotification: {\n    borderColor: colors.primary,\n    borderWidth: 2,\n  },\n  notificationHeader: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  notificationIconContainer: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: colors.backgroundSecondary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  notificationContent: {\n    flex: 1,\n  },\n  notificationTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 4,\n  },\n  notificationBody: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n    marginBottom: 4,\n    lineHeight: 18,\n  },\n  notificationTime: {\n    fontSize: FontSizes.caption,\n    color: colors.textSecondary,\n  },\n  deleteButton: {\n    width: 24,\n    height: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n  },\n  unreadIndicator: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: colors.primary,\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n    paddingVertical: 64,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n}); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/OrgDashboardScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'t' is assigned a value but never used.","line":10,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[521,524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[521,524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, FlatList } from 'react-native';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport { db } from '../utils/databaseService';\n\nexport default function OrgDashboardScreen() {\n  const { t } = useTranslation(['auth','common']);\n  const { selectedUser } = useUser();\n  const [orgs, setOrgs] = useState<any[]>([]);\n  const isOrgAdmin = (selectedUser?.roles || []).includes('org_admin');\n\n  useEffect(() => {\n    (async () => {\n      if (!isOrgAdmin) return;\n      const partition = (selectedUser?.email || '').toLowerCase();\n      const data = await db.listOrganizations(partition);\n      setOrgs(data as any[]);\n    })();\n  }, [isOrgAdmin, selectedUser?.email]);\n\n  if (!isOrgAdmin) {\n    return (\n      <View style={styles.center}>\n        <Text style={styles.body}>×™×™×©×•×ª ×–×• ××™×•×¢×“×ª ×œ×× ×”×œ×™ ××¨×’×•× ×™× ×××•×©×¨×™×</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>×œ×•×— ×‘×§×¨×” ×œ××¨×’×•×Ÿ</Text>\n      <FlatList\n        contentContainerStyle={{ padding: 16 }}\n        data={orgs}\n        keyExtractor={(it) => it.id}\n        renderItem={({ item }) => (\n          <View style={styles.card}>\n            <Text style={styles.cardTitle}>{item.name}</Text>\n            <Text style={styles.cardText}>{item.city ? `${item.city} Â· ` : ''}{item.type}</Text>\n            <Text style={styles.cardText}>×ª×—×•××™ ×¤×¢×™×œ×•×ª: {(item.activityAreas || []).join(', ')}</Text>\n            <Text style={styles.cardText}>×¡×˜×˜×•×¡: {item.status || 'active'}</Text>\n          </View>\n        )}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: colors.background },\n  center: { flex: 1, alignItems: 'center', justifyContent: 'center' },\n  title: { fontSize: FontSizes.heading1, color: colors.textPrimary, fontWeight: '800', margin: 16 },\n  body: { fontSize: FontSizes.body, color: colors.textPrimary },\n  card: { backgroundColor: colors.backgroundSecondary, borderColor: colors.border, borderWidth: 1, borderRadius: 12, padding: 12, marginBottom: 12 },\n  cardTitle: { fontSize: FontSizes.medium, color: colors.textPrimary, fontWeight: '700' },\n  cardText: { fontSize: FontSizes.small, color: colors.textSecondary },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/OrgOnboardingScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":96,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10311,10314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10311,10314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10358,10361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10358,10361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10402,10405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10402,10405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":204,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10432,10435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10432,10435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10465,10468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10465,10468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":206,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10493,10496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10493,10496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10527,10530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10527,10530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10562,10565],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10562,10565],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10582,10585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10582,10585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from 'react';\nimport { View, Text, TextInput, StyleSheet, TouchableOpacity, Alert, Platform } from 'react-native';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { useNavigation } from '@react-navigation/native';\nimport { db } from '../utils/databaseService';\nimport { useUser } from '../stores/userStore';\n\ntype OrgApplication = {\n  id: string;\n  orgName: string;\n  orgType: '×¢××•×ª×”' | '××œ×›\"×¨' | '×—×‘×¨×” ×œ×ª×•×¢×œ×ª ×”×¦×™×‘×•×¨' | '×™×•×–××” ×§×”×™×œ×ª×™×ª' | '××—×¨';\n  registrationNumber?: string; \n  contactName: string;\n  contactEmail: string;\n  contactPhone: string;\n  website?: string;\n  city?: string;\n  activityAreas: string[];\n  needs: string; \n  offering: string; \n  description: string;\n  files?: Array<{ name: string; uri: string; type?: string }>;\n  status: 'pending' | 'approved' | 'rejected';\n  createdAt: string;\n  updatedAt: string;\n};\n\nconst generateId = () => `orgapp_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`;\n\nexport default function OrgOnboardingScreen() {\n  const { t } = useTranslation(['auth','common']);\n  const navigation = useNavigation();\n  const { selectedUser } = useUser();\n  const [form, setForm] = useState<Partial<OrgApplication>>({\n    orgType: '×¢××•×ª×”',\n    activityAreas: [],\n  });\n  const ownerUserId = useMemo(() => (\n    (form.contactEmail?.toLowerCase() || selectedUser?.email?.toLowerCase() || 'guest')\n  ), [form.contactEmail, selectedUser?.email]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const canSubmit = useMemo(() => {\n    return !!form.orgName && !!form.contactName && !!form.contactEmail && !!form.contactPhone && !!form.description;\n  }, [form]);\n\n  const toggleArea = (area: string) => {\n    setForm((prev) => {\n      const exists = prev.activityAreas?.includes(area);\n      const nextAreas = exists ? (prev.activityAreas || []).filter((a) => a !== area) : [...(prev.activityAreas || []), area];\n      return { ...prev, activityAreas: nextAreas };\n    });\n  };\n\n  const submit = async () => {\n    if (!canSubmit) {\n      Alert.alert(t('auth:org.errorTitle') || '×©×’×™××”', t('auth:org.errorFill') || '×× × ××œ××• ××ª ×›×œ ×”×©×“×•×ª ×”×—×™×•× ×™×™× ×”××¡×•×× ×™×');\n      return;\n    }\n    try {\n      setIsSubmitting(true);\n      const id = generateId();\n      const now = new Date().toISOString();\n      const application: OrgApplication = {\n        id,\n        orgName: form.orgName!,\n        orgType: (form.orgType as OrgApplication['orgType']) || '×¢××•×ª×”',\n        registrationNumber: form.registrationNumber,\n        contactName: form.contactName!,\n        contactEmail: form.contactEmail!,\n        contactPhone: form.contactPhone!,\n        website: form.website,\n        city: form.city,\n        activityAreas: form.activityAreas || [],\n        needs: form.needs || '',\n        offering: form.offering || '',\n        description: form.description!,\n        files: form.files || [],\n        status: 'pending',\n        createdAt: now,\n        updatedAt: now,\n      };\n      await db.createOrgApplication(ownerUserId, id, application);\n      // Also store in admin queue for centralized moderation\n      await db.createOrgApplication('admin_org_queue', id, { ...application, _ownerPartition: ownerUserId });\n      if (Platform.OS === 'web') {\n        alert(t('auth:org.sentMessage') || '×”×‘×§×©×” × ×©×œ×—×”! ×œ××—×¨ ××™×©×•×¨ ×ª×§×‘×œ×• ×’×™×©×” ××•×¨×—×‘×ª.');\n      } else {\n        Alert.alert(t('auth:org.sentTitle') || '× ×©×œ×—', t('auth:org.sentMessage') || '×”×‘×§×©×” × ×©×œ×—×”! ×œ××—×¨ ××™×©×•×¨ ×ª×§×‘×œ×• ×’×™×©×” ××•×¨×—×‘×ª.');\n      }\n      navigation.goBack();\n    } catch (e) {\n      Alert.alert(t('auth:org.errorTitle') || '×©×’×™××”', t('auth:org.errorSend') || '×©×œ×™×—×ª ×”×‘×§×©×” × ×›×©×œ×”');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const areas = (t('auth:org.areas', { returnObjects: true }) as string[]) || ['×—×™× ×•×š','×‘×¨×™××•×ª','×¨×•×•×—×”','×¡×‘×™×‘×”','×‘×¢×œ×™ ×—×™×™×','×§×”×™×œ×”','× ×•×¢×¨ ×‘×¡×™×›×•×Ÿ','×§×©×™×©×™×'];\n  const orgTypes: OrgApplication['orgType'][] = (t('auth:org.types', { returnObjects: true }) as OrgApplication['orgType'][]) || ['×¢××•×ª×”','××œ×›\"×¨','×—×‘×¨×” ×œ×ª×•×¢×œ×ª ×”×¦×™×‘×•×¨','×™×•×–××” ×§×”×™×œ×ª×™×ª','××—×¨'];\n\n  const Content = (\n    <>\n      {/* Header with back button */}\n      <View style={styles.headerRow}>\n        <TouchableOpacity style={styles.backBtn} onPress={() => navigation.goBack()}>\n          <Ionicons name=\"chevron-back\" size={20} color={colors.textPrimary} />\n          <Text style={styles.backText}>{t('common:back') || '×—×–×¨×”'}</Text>\n        </TouchableOpacity>\n      </View>\n\n      <Text style={styles.title}>{t('auth:org.title') || '×¨×™×©×•× ××¨×’×•×Ÿ / ×¢××•×ª×”'}</Text>\n      <Text style={styles.subtitle}>{t('auth:org.subtitle') || '××œ××• ××ª ×”×¤×¨×˜×™×, × ×‘×“×•×§ ×•× ××©×¨. ×œ××—×¨ ××™×©×•×¨ ×ª×§×‘×œ×• ×”×¨×©××•×ª ×•×ª×¦×•×’×ª ×ª×¤×¢×•×œ ×™×™×¢×•×“×™×ª.'}</Text>\n\n      <Text style={styles.label}>{t('auth:org.fields.orgName') || '×©× ×”××¨×’×•×Ÿ*'}</Text>\n      <TextInput style={styles.input} value={form.orgName || ''} onChangeText={(v) => setForm({ ...form, orgName: v })} placeholder={t('auth:org.placeholders.orgName') || '×œ×“×•×’××”: ×¢××•×ª×ª ×™×“×™×“×™×'} />\n\n      <Text style={styles.label}>{t('auth:org.fields.orgType') || '×¡×•×’ ×”××¨×’×•×Ÿ*'}</Text>\n      <View style={styles.tagsRow}>\n        {orgTypes.map((type) => (\n          <TouchableOpacity key={type} style={[styles.tag, form.orgType === type && styles.tagSelected]} onPress={() => setForm({ ...form, orgType: type })}>\n            <Text style={[styles.tagText, form.orgType === type && styles.tagTextSelected]}>{type}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      <Text style={styles.label}>{t('auth:org.fields.registrationNumber') || '××¡×¤×¨ ×¢××•×ª×” / ×—.×¤.'}</Text>\n      <TextInput style={styles.input} value={form.registrationNumber || ''} onChangeText={(v) => setForm({ ...form, registrationNumber: v })} placeholder={t('auth:org.placeholders.registrationNumber') || '×œ×“×•×’××”: 580000000'} />\n\n      <Text style={styles.sectionHeader}>{t('auth:org.fields.contactName') || '×¤×¨×˜×™ ××™×© ×§×©×¨'}</Text>\n      <Text style={styles.label}>{t('auth:org.fields.contactName') || '×©× ××œ×*'}</Text>\n      <TextInput style={styles.input} value={form.contactName || ''} onChangeText={(v) => setForm({ ...form, contactName: v })} placeholder={t('auth:org.placeholders.contactName') || '×©×'} />\n      <Text style={styles.label}>{t('auth:org.fields.contactEmail') || '××™××™×™×œ*'}</Text>\n      <TextInput style={styles.input} value={form.contactEmail || ''} onChangeText={(v) => setForm({ ...form, contactEmail: v })} placeholder={t('auth:org.placeholders.contactEmail') || 'email@example.org'} keyboardType=\"email-address\" />\n      <Text style={styles.label}>{t('auth:org.fields.contactPhone') || '×˜×œ×¤×•×Ÿ*'}</Text>\n      <TextInput style={styles.input} value={form.contactPhone || ''} onChangeText={(v) => setForm({ ...form, contactPhone: v })} placeholder={t('auth:org.placeholders.contactPhone') || '050-0000000'} keyboardType=\"phone-pad\" />\n\n      <Text style={styles.sectionHeader}>{t('auth:org.subtitle') || '××™×“×¢ × ×•×¡×£'}</Text>\n      <Text style={styles.label}>{t('auth:org.fields.website') || '××ª×¨ ××™× ×˜×¨× ×˜'}</Text>\n      <TextInput style={styles.input} value={form.website || ''} onChangeText={(v) => setForm({ ...form, website: v })} placeholder={t('auth:org.placeholders.website') || 'https://'} autoCapitalize=\"none\" />\n      <Text style={styles.label}>{t('auth:org.fields.city') || '×¢×™×¨'}</Text>\n      <TextInput style={styles.input} value={form.city || ''} onChangeText={(v) => setForm({ ...form, city: v })} placeholder={t('auth:org.placeholders.city') || '×¢×™×¨'} />\n\n      <Text style={styles.label}>{t('auth:org.fields.activityAreas') || '×ª×—×•××™ ×¤×¢×™×œ×•×ª'}</Text>\n      <View style={styles.tagsRow}>\n        {areas.map((a) => (\n          <TouchableOpacity key={a} style={[styles.tag, form.activityAreas?.includes(a) && styles.tagSelected]} onPress={() => toggleArea(a)}>\n            <Text style={[styles.tagText, form.activityAreas?.includes(a) && styles.tagTextSelected]}>{a}</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n\n      <Text style={styles.label}>{t('auth:org.fields.needs') || '××” ××ª× ×¦×¨×™×›×™× ×××™×ª× ×•?'}</Text>\n      <TextInput style={[styles.input, styles.multiline]} value={form.needs || ''} onChangeText={(v) => setForm({ ...form, needs: v })} placeholder={t('auth:org.placeholders.needs') || '×œ×“×•×’××”: ××ª× ×“×‘×™× ×œ××™×¡×•×£ ××–×•×Ÿ, ×ª×¨×•××•×ª, ×©×™×ª×•×¤×™ ×¤×¢×•×œ×”'} multiline />\n\n      <Text style={styles.label}>{t('auth:org.fields.offering') || '××” ××ª× ××¦×™×¢×™× ×œ×§×”×™×œ×”?'}</Text>\n      <TextInput style={[styles.input, styles.multiline]} value={form.offering || ''} onChangeText={(v) => setForm({ ...form, offering: v })} placeholder={t('auth:org.placeholders.offering') || '×œ×“×•×’××”: ×—×œ×•×§×ª ××–×•×Ÿ, ×§×•×¨×¡×™×, ×¡×“× ××•×ª'} multiline />\n\n      <Text style={styles.label}>{t('auth:org.fields.description') || '×ª×™××•×¨ ×”××¨×’×•×Ÿ*'}</Text>\n      <TextInput style={[styles.input, styles.multiline]} value={form.description || ''} onChangeText={(v) => setForm({ ...form, description: v })} placeholder={t('auth:org.placeholders.description') || '×¡×¤×¨×• ×¢×œ ×”××¨×’×•×Ÿ, ××˜×¨×•×ª ×•×¤×¢×™×œ×•×ª'} multiline />\n\n      <TouchableOpacity disabled={!canSubmit || isSubmitting} style={[styles.submitBtn, (!canSubmit || isSubmitting) && styles.submitBtnDisabled]} onPress={submit}>\n        <Text style={styles.submitText}>{isSubmitting ? (t('auth:org.sending') || '×©×•×œ×—...') : (t('auth:org.submit') || '×©×œ×™×—×ª ×‘×§×©×” ×œ××™×©×•×¨')}</Text>\n      </TouchableOpacity>\n      <Text style={styles.hint}>{t('auth:org.hint') || '×œ××—×¨ ×”××™×©×•×¨ ×ª×§×‘×œ×• ×’×™×©×” ×œ××¤×œ×™×§×¦×™×” ×¢× ×”×¨×©××•×ª × ×™×”×•×œ ×•×ª×¦×•×’×ª ×ª×¤×¢×•×œ ×™×™×¢×•×“×™×ª.'}</Text>\n    </>\n  );\n\n  if (Platform.OS === 'web') {\n    return (\n      <View style={styles.webScrollContainer}>\n        <View style={styles.webScrollContent}>{Content}</View>\n      </View>\n    );\n  }\n\n  return (\n    <ScrollContainer\n      style={styles.container}\n      contentStyle={styles.content}\n      showsVerticalScrollIndicator\n      nestedScrollEnabled\n      keyboardShouldPersistTaps=\"handled\"\n    >\n      {Content}\n    </ScrollContainer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: colors.background },\n  content: { padding: 16, paddingBottom: 40 },\n  // Web scroll wrappers\n  webScrollContainer: {\n    flex: 1,\n    ...(Platform.OS === 'web' && {\n      overflow: 'auto' as any,\n      WebkitOverflowScrolling: 'touch' as any,\n      overscrollBehavior: 'contain' as any,\n      height: '100vh' as any,\n      maxHeight: '100vh' as any,\n      width: '100%' as any,\n      touchAction: 'auto' as any,\n      position: 'relative' as any,\n    }),\n  } as any,\n  webScrollContent: {\n    padding: 16,\n    paddingBottom: 80,\n    width: '100%',\n    minHeight: '100%',\n  },\n  headerRow: { flexDirection: 'row', alignItems: 'center', marginBottom: 8 },\n  backBtn: { flexDirection: 'row', alignItems: 'center', gap: 6, paddingVertical: 6, paddingHorizontal: 8, borderRadius: 8, borderWidth: 1, borderColor: colors.border, backgroundColor: colors.backgroundSecondary },\n  backText: { color: colors.textPrimary, fontSize: FontSizes.small, fontWeight: '600' },\n  title: { fontSize: FontSizes.heading1, fontWeight: '800', color: colors.textPrimary, textAlign: 'center', marginTop: 8 },\n  subtitle: { fontSize: FontSizes.body, color: colors.textSecondary, textAlign: 'center', marginVertical: 8 },\n  sectionHeader: { fontSize: FontSizes.medium, color: colors.textPrimary, fontWeight: '700', marginTop: 16, marginBottom: 6 },\n  label: { fontSize: FontSizes.small, color: colors.textSecondary, marginTop: 10, marginBottom: 4 },\n  input: { backgroundColor: colors.backgroundSecondary, borderRadius: 12, padding: 12, borderWidth: 1, borderColor: colors.border },\n  multiline: { minHeight: 90, textAlignVertical: 'top' },\n  tagsRow: { flexDirection: 'row', flexWrap: 'wrap', gap: 8 },\n  tag: { borderRadius: 20, paddingVertical: 8, paddingHorizontal: 12, borderWidth: 1, borderColor: colors.border, backgroundColor: colors.backgroundSecondary },\n  tagSelected: { borderColor: colors.primary, backgroundColor: colors.pinkLight },\n  tagText: { color: colors.textSecondary },\n  tagTextSelected: { color: colors.primary, fontWeight: '700' },\n  submitBtn: { backgroundColor: colors.primary, padding: 14, borderRadius: 12, alignItems: 'center', marginTop: 20 },\n  submitBtnDisabled: { opacity: 0.6 },\n  submitText: { color: colors.white, fontSize: FontSizes.body, fontWeight: '700' },\n  hint: { color: colors.textSecondary, fontSize: FontSizes.small, textAlign: 'center', marginTop: 8 },\n});\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/UserProfileScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1057,1060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1057,1060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Wrapper component that uses the unified ProfileScreen to view other users' profiles.\n// - Reached from: Home/Search/Profile/Donations stacks via 'UserProfileScreen'.\n// - Expects route params: `{ userId: string, userName: string, characterData?: CharacterType }`.\n// - Provides: Passes route params to ProfileScreen which handles all the logic.\n// - Notes: Uses ProfileScreen which now handles both own profile and other users' profiles.\n//   ProfileScreen will automatically detect if it's viewing another user and use tabBarHeight = 0.\nimport React from 'react';\nimport ProfileScreen from '../bottomBarScreens/ProfileScreen';\n\n// --- Main Component ---\n// This component is a wrapper that uses ProfileScreen\n// ProfileScreen will automatically detect that we're viewing another user's profile\n// and use tabBarHeight = 0 instead of calling useBottomTabBarHeight\nimport { useRoute } from '@react-navigation/native';\n\nexport default function UserProfileScreen() {\n  const route = useRoute();\n  const params = route.params as any; // Using any for flexibility with route params\n\n  return (\n    <ProfileScreen\n      userId={params?.userId}\n      userName={params?.userName}\n      characterData={params?.characterData}\n      isExplicitOtherProfile={true}\n    />\n  );\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/screens/WebViewScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[473,530],"text":""},"desc":"Remove unused variable \"TouchableOpacity\"."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":28,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":28,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[1056,1213],"text":"type WebViewScreenProps = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[1056,1213],"text":"type WebViewScreenProps = unknown"},"desc":"Replace empty interface with `unknown`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Open external JGive site; on web opens a new tab, on native renders inside WebView.\n// - Reached from: Various CTA routes as 'WebViewScreen'.\n// - Params: None used; URL is constant within file.\n// - External deps: `react-native-webview`, react-navigation for back navigation on web.\n// screens/WebViewScreen.tsx\nimport React, { useEffect } from 'react';\nimport {\n  SafeAreaView,\n  StyleSheet,\n  ActivityIndicator,\n  View,\n  Platform,\n  Text, // Needed for loading message on web\n  TouchableOpacity // Added for retry button\n} from 'react-native';\n\n// Re-import WebView for native platforms (iOS/Android)\nimport { WebView } from 'react-native-webview';\n\n// useNavigation is still needed for navigating back on the web side\nimport { NavigationProp, ParamListBase, useNavigation } from '@react-navigation/native';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\n// WebBrowser is no longer needed as we are using WebView for native.\n// import * as WebBrowser from 'expo-web-browser';\n\ninterface WebViewScreenProps {\n  // If you want to pass the URL as a prop, you would define it here\n  // For example: route: { params?: { url?: string } };\n}\n\nconst J_GIVE_URL = \"https://www.jgive.com/\"; // The URL you want to open\n\nconst WebViewScreen: React.FC<WebViewScreenProps> = (\n  // If you pass URL as a prop, uncomment this line:\n  // { route }\n) => {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n\n  // Conditional logic for Web platform only\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      // For web, jgive.com refuses to connect within an iframe due to security policies.\n      // The only reliable way to open it on web is in a new browser tab.\n      window.open(J_GIVE_URL, '_blank');\n      // After opening, navigate back in the app's history\n      navigation.goBack();\n    }\n    // No need for WebBrowser.openBrowserAsync() on native here,\n    // as the WebView component handles native rendering below.\n  }, [navigation]);\n\n  // Render a loading indicator for the web, as it immediately opens a new tab and navigates back\n  if (Platform.OS === 'web') {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={colors.info} />\n          <Text style={styles.loadingText}>\n            Opening JGive in a new browser tab...\n          </Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  // Render the WebView for iOS and Android\n  const renderLoading = () => (\n    <View style={styles.nativeLoadingContainer}>\n      <ActivityIndicator size=\"large\" color={colors.info} />\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <WebView\n        source={{ uri: J_GIVE_URL }}\n        style={styles.webview}\n        javaScriptEnabled={true}\n        domStorageEnabled={true}\n        startInLoadingState={true}\n        renderLoading={renderLoading}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.white, // Or your app's background color\n  },\n  webview: {\n    flex: 1,\n  },\n  // This loading container is for when the WebView itself is loading on native\n  nativeLoadingContainer: {\n    position: 'absolute',\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white, // Match your screen background\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    zIndex: 999, // Ensure it's on top\n  },\n  // This loading container is for the web version (briefly shown before new tab opens)\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary, // Use your app's primary text color\n    textAlign: 'center',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.white,\n  },\n  errorText: {\n    fontSize: FontSizes.medium,\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n     retryButton: {\n     backgroundColor: colors.secondary,\n     paddingVertical: 10,\n     paddingHorizontal: 20,\n     borderRadius: 8,\n   },\n  retryButtonText: {\n    color: colors.white,\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n\nexport default WebViewScreen;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-all.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-colors.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fullMatch' is assigned a value but never used.","line":224,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":224,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env ts-node\n/**\n * Audit Script: Colors\n * \n * Purpose: Scans all TypeScript/TSX files to detect hardcoded colors\n * that should be imported from globals/colors.tsx\n * \n * Detects:\n * - Hex colors (#RRGGBB, #RGB)\n * - RGB/RGBA colors\n * - Named colors (red, blue, etc.)\n * - Inline color styles\n * - Colors not imported from globals/colors.tsx\n * \n * Output: audit-reports/colors-issues.json\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface ColorIssue {\n  file: string;\n  line: number;\n  column: number;\n  type: 'hex' | 'rgb' | 'named' | 'inline' | 'missing-import';\n  severity: 'critical' | 'high' | 'medium' | 'low';\n  value: string;\n  context: string;\n  suggestion: string;\n}\n\ninterface ColorAuditReport {\n  timestamp: string;\n  totalFiles: number;\n  filesWithIssues: number;\n  totalIssues: number;\n  issuesBySeverity: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  issuesByType: {\n    hex: number;\n    rgb: number;\n    named: number;\n    inline: number;\n    'missing-import': number;\n  };\n  issues: ColorIssue[];\n}\n\n// Regex patterns\nconst HEX_COLOR_PATTERN = /#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})\\b/g;\nconst RGB_COLOR_PATTERN = /rgba?\\s*\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*(,\\s*[\\d.]+\\s*)?\\)/g;\nconst NAMED_COLORS = [\n  'red', 'blue', 'green', 'yellow', 'orange', 'purple', 'pink', 'brown',\n  'black', 'white', 'gray', 'grey', 'cyan', 'magenta', 'lime', 'navy',\n  'teal', 'olive', 'maroon', 'aqua', 'silver', 'gold'\n];\n\n// Files/directories to exclude\nconst EXCLUDE_PATTERNS = [\n  'node_modules',\n  'dist',\n  'build',\n  '.expo',\n  'ios',\n  'android',\n  'web',\n  'globals/colors.tsx', // Don't audit the colors file itself\n  'scripts', // Don't audit scripts\n  '.git',\n  'coverage'\n];\n\n// Known safe colors (from globals/colors.tsx)\nconst SAFE_COLORS = [\n  'transparent',\n  'inherit',\n  'currentColor'\n];\n\nclass ColorAuditor {\n  private report: ColorAuditReport;\n  private rootDir: string;\n\n  constructor(rootDir: string) {\n    this.rootDir = rootDir;\n    this.report = {\n      timestamp: new Date().toISOString(),\n      totalFiles: 0,\n      filesWithIssues: 0,\n      totalIssues: 0,\n      issuesBySeverity: {\n        critical: 0,\n        high: 0,\n        medium: 0,\n        low: 0\n      },\n      issuesByType: {\n        hex: 0,\n        rgb: 0,\n        named: 0,\n        inline: 0,\n        'missing-import': 0\n      },\n      issues: []\n    };\n  }\n\n  private shouldExclude(filePath: string): boolean {\n    return EXCLUDE_PATTERNS.some(pattern => filePath.includes(pattern));\n  }\n\n  private isTypeScriptFile(filePath: string): boolean {\n    return /\\.(ts|tsx)$/.test(filePath);\n  }\n\n  private getAllFiles(dir: string): string[] {\n    let results: string[] = [];\n\n    try {\n      const list = fs.readdirSync(dir);\n\n      list.forEach(file => {\n        const filePath = path.join(dir, file);\n\n        if (this.shouldExclude(filePath)) {\n          return;\n        }\n\n        const stat = fs.statSync(filePath);\n\n        if (stat.isDirectory()) {\n          results = results.concat(this.getAllFiles(filePath));\n        } else if (this.isTypeScriptFile(filePath)) {\n          results.push(filePath);\n        }\n      });\n    } catch (error) {\n      console.error(`Error reading directory ${dir}:`, error);\n    }\n\n    return results;\n  }\n\n  private hasColorsImport(content: string): boolean {\n    return /import\\s+.*colors.*from\\s+['\"].*globals\\/colors['\"]/.test(content);\n  }\n\n  private detectHexColors(content: string, filePath: string, hasImport: boolean): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      const matches = line.matchAll(HEX_COLOR_PATTERN);\n\n      for (const match of matches) {\n        const value = match[0];\n        const column = match.index || 0;\n\n        // Skip if it's in a comment\n        if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n          continue;\n        }\n\n        this.addIssue({\n          file: path.relative(this.rootDir, filePath),\n          line: lineIndex + 1,\n          column: column + 1,\n          type: 'hex',\n          severity: hasImport ? 'high' : 'critical',\n          value,\n          context: line.trim(),\n          suggestion: hasImport\n            ? `Replace ${value} with a color from colors.tsx (e.g., colors.primary)`\n            : `Import colors and replace ${value} with a color from colors.tsx`\n        });\n      }\n    });\n  }\n\n  private detectRgbColors(content: string, filePath: string, hasImport: boolean): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      const matches = line.matchAll(RGB_COLOR_PATTERN);\n\n      for (const match of matches) {\n        const value = match[0];\n        const column = match.index || 0;\n\n        // Skip if it's in a comment\n        if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n          continue;\n        }\n\n        this.addIssue({\n          file: path.relative(this.rootDir, filePath),\n          line: lineIndex + 1,\n          column: column + 1,\n          type: 'rgb',\n          severity: hasImport ? 'high' : 'critical',\n          value,\n          context: line.trim(),\n          suggestion: hasImport\n            ? `Replace ${value} with a color from colors.tsx`\n            : `Import colors and replace ${value} with a color from colors.tsx`\n        });\n      }\n    });\n  }\n\n  private detectNamedColors(content: string, filePath: string, hasImport: boolean): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      // Look for color: 'colorname' or color: \"colorname\" or backgroundColor: 'colorname'\n      const colorPropertyPattern = /(color|backgroundColor|borderColor|shadowColor|tintColor):\\s*['\"](\\w+)['\"]/gi;\n      const matches = line.matchAll(colorPropertyPattern);\n\n      for (const match of matches) {\n        const colorName = match[2].toLowerCase();\n        const fullMatch = match[0];\n        const column = match.index || 0;\n\n        // Skip if it's a safe color or not a named color\n        if (SAFE_COLORS.includes(colorName) || !NAMED_COLORS.includes(colorName)) {\n          continue;\n        }\n\n        // Skip if it's in a comment\n        if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n          continue;\n        }\n\n        this.addIssue({\n          file: path.relative(this.rootDir, filePath),\n          line: lineIndex + 1,\n          column: column + 1,\n          type: 'named',\n          severity: 'medium',\n          value: colorName,\n          context: line.trim(),\n          suggestion: hasImport\n            ? `Replace '${colorName}' with a semantic color from colors.tsx`\n            : `Import colors and replace '${colorName}' with a semantic color`\n        });\n      }\n    });\n  }\n\n  private detectMissingImport(content: string, filePath: string): void {\n    const hasImport = this.hasColorsImport(content);\n\n    // Check if file has any color-related properties\n    const hasColorUsage = /color|backgroundColor|borderColor|shadowColor|tintColor/i.test(content);\n\n    if (hasColorUsage && !hasImport) {\n      this.addIssue({\n        file: path.relative(this.rootDir, filePath),\n        line: 1,\n        column: 1,\n        type: 'missing-import',\n        severity: 'high',\n        value: 'N/A',\n        context: 'File uses colors but does not import from globals/colors.tsx',\n        suggestion: `Add: import colors from '../globals/colors';`\n      });\n    }\n  }\n\n  private addIssue(issue: ColorIssue): void {\n    this.report.issues.push(issue);\n    this.report.totalIssues++;\n    this.report.issuesBySeverity[issue.severity]++;\n    this.report.issuesByType[issue.type]++;\n  }\n\n  private auditFile(filePath: string): void {\n    try {\n      const content = fs.readFileSync(filePath, 'utf-8');\n      const hasImport = this.hasColorsImport(content);\n\n      const issuesBeforeFile = this.report.totalIssues;\n\n      this.detectHexColors(content, filePath, hasImport);\n      this.detectRgbColors(content, filePath, hasImport);\n      this.detectNamedColors(content, filePath, hasImport);\n      this.detectMissingImport(content, filePath);\n\n      const issuesAfterFile = this.report.totalIssues;\n\n      if (issuesAfterFile > issuesBeforeFile) {\n        this.report.filesWithIssues++;\n      }\n\n      this.report.totalFiles++;\n    } catch (error) {\n      console.error(`Error auditing file ${filePath}:`, error);\n    }\n  }\n\n  public audit(): ColorAuditReport {\n    console.log('ğŸ¨ Starting color audit...\\n');\n\n    const files = this.getAllFiles(this.rootDir);\n    console.log(`Found ${files.length} TypeScript files to audit\\n`);\n\n    files.forEach((file, index) => {\n      if (index % 10 === 0) {\n        process.stdout.write(`\\rProgress: ${index}/${files.length} files`);\n      }\n      this.auditFile(file);\n    });\n\n    process.stdout.write(`\\rProgress: ${files.length}/${files.length} files âœ“\\n\\n`);\n\n    return this.report;\n  }\n\n  public saveReport(outputPath: string): void {\n    const dir = path.dirname(outputPath);\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n\n    fs.writeFileSync(outputPath, JSON.stringify(this.report, null, 2));\n    console.log(`\\nğŸ“Š Report saved to: ${outputPath}`);\n  }\n\n  public printSummary(): void {\n    console.log('\\n' + '='.repeat(60));\n    console.log('COLOR AUDIT SUMMARY');\n    console.log('='.repeat(60));\n    console.log(`\\nTotal files scanned: ${this.report.totalFiles}`);\n    console.log(`Files with issues: ${this.report.filesWithIssues}`);\n    console.log(`Total issues found: ${this.report.totalIssues}\\n`);\n\n    console.log('Issues by severity:');\n    console.log(`  ğŸ”´ Critical: ${this.report.issuesBySeverity.critical}`);\n    console.log(`  ğŸŸ  High:     ${this.report.issuesBySeverity.high}`);\n    console.log(`  ğŸŸ¡ Medium:   ${this.report.issuesBySeverity.medium}`);\n    console.log(`  ğŸŸ¢ Low:      ${this.report.issuesBySeverity.low}\\n`);\n\n    console.log('Issues by type:');\n    console.log(`  Hex colors:       ${this.report.issuesByType.hex}`);\n    console.log(`  RGB colors:       ${this.report.issuesByType.rgb}`);\n    console.log(`  Named colors:     ${this.report.issuesByType.named}`);\n    console.log(`  Inline styles:    ${this.report.issuesByType.inline}`);\n    console.log(`  Missing imports:  ${this.report.issuesByType['missing-import']}\\n`);\n\n    if (this.report.totalIssues > 0) {\n      console.log('Top 5 files with most issues:');\n      const fileIssueCount = new Map<string, number>();\n      this.report.issues.forEach(issue => {\n        fileIssueCount.set(issue.file, (fileIssueCount.get(issue.file) || 0) + 1);\n      });\n\n      const sorted = Array.from(fileIssueCount.entries())\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 5);\n\n      sorted.forEach(([file, count], index) => {\n        console.log(`  ${index + 1}. ${file} (${count} issues)`);\n      });\n    }\n\n    console.log('\\n' + '='.repeat(60) + '\\n');\n  }\n}\n\n// Main execution\nif (require.main === module) {\n  const rootDir = path.join(__dirname, '..');\n  const outputPath = path.join(rootDir, 'audit-reports', 'colors-issues.json');\n\n  const auditor = new ColorAuditor(rootDir);\n  auditor.audit();\n  auditor.saveReport(outputPath);\n  auditor.printSummary();\n\n  process.exit(0);\n}\n\nexport { ColorAuditor, ColorAuditReport, ColorIssue };\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-responsive.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lines' is assigned a value but never used.","line":282,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env ts-node\n/**\n * Audit Script: Responsive Design\n * \n * Purpose: Scans all TypeScript/TSX files to detect responsive design issues\n * and ensure proper use of responsive utilities from globals/responsive.ts\n * \n * Detects:\n * - Direct use of Dimensions.get() instead of getScreenInfo()\n * - Missing Platform.OS checks for platform-specific code\n * - Hardcoded sizes without scaleSize() or responsive functions\n * - Missing responsive imports\n * - Styles without mobile/tablet/desktop considerations\n * \n * Output: audit-reports/responsive-issues.json\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface ResponsiveIssue {\n  file: string;\n  line: number;\n  column: number;\n  type: 'dimensions-direct' | 'no-platform-check' | 'no-responsive-function' | 'missing-import' | 'no-screen-size-check';\n  severity: 'critical' | 'high' | 'medium' | 'low';\n  value: string;\n  context: string;\n  suggestion: string;\n}\n\ninterface ResponsiveAuditReport {\n  timestamp: string;\n  totalFiles: number;\n  filesWithIssues: number;\n  totalIssues: number;\n  issuesBySeverity: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  issuesByType: {\n    'dimensions-direct': number;\n    'no-platform-check': number;\n    'no-responsive-function': number;\n    'missing-import': number;\n    'no-screen-size-check': number;\n  };\n  issues: ResponsiveIssue[];\n}\n\n// Files/directories to exclude\nconst EXCLUDE_PATTERNS = [\n  'node_modules',\n  'dist',\n  'build',\n  '.expo',\n  'ios',\n  'android',\n  'web',\n  'globals/responsive.ts', // Don't audit the responsive file itself\n  'scripts',\n  '.git',\n  'coverage'\n];\n\n// Responsive functions that should be used\nconst RESPONSIVE_FUNCTIONS = [\n  'getScreenInfo',\n  'scaleSize',\n  'responsiveSpacing',\n  'responsiveFontSize',\n  'responsiveWidth',\n  'responsivePadding',\n  'getResponsiveButtonStyles',\n  'getResponsiveContainerStyles',\n  'getResponsiveModalStyles',\n  'getResponsiveMenuStyles',\n  'biDiTextAlign',\n  'rowDirection'\n];\n\n// Platform-specific patterns\nconst PLATFORM_SPECIFIC_APIS = [\n  'StatusBar',\n  'SafeAreaView',\n  'KeyboardAvoidingView',\n  'TouchableNativeFeedback',\n  'PermissionsAndroid'\n];\n\nclass ResponsiveAuditor {\n  private report: ResponsiveAuditReport;\n  private rootDir: string;\n\n  constructor(rootDir: string) {\n    this.rootDir = rootDir;\n    this.report = {\n      timestamp: new Date().toISOString(),\n      totalFiles: 0,\n      filesWithIssues: 0,\n      totalIssues: 0,\n      issuesBySeverity: {\n        critical: 0,\n        high: 0,\n        medium: 0,\n        low: 0\n      },\n      issuesByType: {\n        'dimensions-direct': 0,\n        'no-platform-check': 0,\n        'no-responsive-function': 0,\n        'missing-import': 0,\n        'no-screen-size-check': 0\n      },\n      issues: []\n    };\n  }\n\n  private shouldExclude(filePath: string): boolean {\n    return EXCLUDE_PATTERNS.some(pattern => filePath.includes(pattern));\n  }\n\n  private isTypeScriptFile(filePath: string): boolean {\n    return /\\.(ts|tsx)$/.test(filePath);\n  }\n\n  private getAllFiles(dir: string): string[] {\n    let results: string[] = [];\n\n    try {\n      const list = fs.readdirSync(dir);\n\n      list.forEach(file => {\n        const filePath = path.join(dir, file);\n\n        if (this.shouldExclude(filePath)) {\n          return;\n        }\n\n        const stat = fs.statSync(filePath);\n\n        if (stat.isDirectory()) {\n          results = results.concat(this.getAllFiles(filePath));\n        } else if (this.isTypeScriptFile(filePath)) {\n          results.push(filePath);\n        }\n      });\n    } catch (error) {\n      console.error(`Error reading directory ${dir}:`, error);\n    }\n\n    return results;\n  }\n\n  private hasResponsiveImport(content: string): boolean {\n    return /import.*from\\s+['\"].*globals\\/responsive['\"]/.test(content);\n  }\n\n  private detectDirectDimensions(content: string, filePath: string): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      // Skip comments\n      if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n        return;\n      }\n\n      // Look for Dimensions.get()\n      const dimensionsPattern = /Dimensions\\.get\\(['\"](?:window|screen)['\"]\\)/g;\n      const matches = line.matchAll(dimensionsPattern);\n\n      for (const match of matches) {\n        const column = match.index || 0;\n\n        this.addIssue({\n          file: path.relative(this.rootDir, filePath),\n          line: lineIndex + 1,\n          column: column + 1,\n          type: 'dimensions-direct',\n          severity: 'high',\n          value: match[0],\n          context: line.trim(),\n          suggestion: `Replace ${match[0]} with getScreenInfo() from globals/responsive.ts`\n        });\n      }\n    });\n  }\n\n  private detectMissingPlatformChecks(content: string, filePath: string): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      // Skip comments and imports\n      if (line.trim().startsWith('//') ||\n        line.trim().startsWith('*') ||\n        line.trim().startsWith('import')) {\n        return;\n      }\n\n      // Check for platform-specific APIs without Platform.OS check\n      PLATFORM_SPECIFIC_APIS.forEach(api => {\n        if (line.includes(api)) {\n          // Check if there's a Platform.OS check nearby (within 5 lines)\n          const contextLines = lines.slice(\n            Math.max(0, lineIndex - 5),\n            Math.min(lines.length, lineIndex + 5)\n          );\n          const hasPlatformCheck = contextLines.some(l =>\n            /Platform\\.OS|Platform\\.select/.test(l)\n          );\n\n          if (!hasPlatformCheck) {\n            this.addIssue({\n              file: path.relative(this.rootDir, filePath),\n              line: lineIndex + 1,\n              column: 1,\n              type: 'no-platform-check',\n              severity: 'medium',\n              value: api,\n              context: line.trim(),\n              suggestion: `Consider adding Platform.OS check for ${api} usage`\n            });\n          }\n        }\n      });\n    });\n  }\n\n  private detectMissingResponsiveFunctions(content: string, filePath: string, hasImport: boolean): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      // Skip comments\n      if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n        return;\n      }\n\n      // Check for StyleSheet.create with hardcoded values\n      if (line.includes('StyleSheet.create')) {\n        // Look ahead for style definitions\n        const styleBlockStart = lineIndex;\n        let styleBlockEnd = lineIndex;\n\n        // Find the end of the style block (simplified)\n        for (let i = lineIndex + 1; i < Math.min(lines.length, lineIndex + 50); i++) {\n          if (lines[i].includes('});')) {\n            styleBlockEnd = i;\n            break;\n          }\n        }\n\n        // Check if the style block uses responsive functions\n        const styleBlock = lines.slice(styleBlockStart, styleBlockEnd + 1).join('\\n');\n        const hasResponsiveFunctions = RESPONSIVE_FUNCTIONS.some(fn =>\n          styleBlock.includes(fn)\n        );\n\n        // Check if it has numeric values that should be responsive\n        const hasNumericValues = /:\\s*\\d+/.test(styleBlock);\n\n        if (hasNumericValues && !hasResponsiveFunctions) {\n          this.addIssue({\n            file: path.relative(this.rootDir, filePath),\n            line: lineIndex + 1,\n            column: 1,\n            type: 'no-responsive-function',\n            severity: hasImport ? 'medium' : 'high',\n            value: 'StyleSheet',\n            context: 'StyleSheet with hardcoded values',\n            suggestion: hasImport\n              ? `Use responsive functions like scaleSize(), responsiveSpacing(), or responsiveFontSize()`\n              : `Import responsive utilities and use functions like scaleSize(), responsiveSpacing()`\n          });\n        }\n      }\n    });\n  }\n\n  private detectMissingScreenSizeChecks(content: string, filePath: string): void {\n    const lines = content.split('\\n');\n\n    // Check if file has JSX (component file)\n    const hasJSX = /<[A-Z]/.test(content) || /<View/.test(content);\n\n    if (!hasJSX) {\n      return; // Skip non-component files\n    }\n\n    // Check if file uses screen size checks\n    const hasScreenSizeCheck = /isTablet|isDesktop|isLargeDesktop|isMobile|isWeb|getScreenInfo/.test(content);\n\n    // Check if file has complex layouts that would benefit from responsive design\n    const hasComplexLayout = /flex|width|height|padding|margin/.test(content);\n\n    if (hasComplexLayout && !hasScreenSizeCheck) {\n      this.addIssue({\n        file: path.relative(this.rootDir, filePath),\n        line: 1,\n        column: 1,\n        type: 'no-screen-size-check',\n        severity: 'medium',\n        value: 'N/A',\n        context: 'Component with layout but no screen size checks',\n        suggestion: `Consider using getScreenInfo() to adapt layout for different screen sizes (mobile/tablet/desktop)`\n      });\n    }\n  }\n\n  private detectMissingImport(content: string, filePath: string): void {\n    const hasImport = this.hasResponsiveImport(content);\n\n    // Check if file has styles\n    const hasStyles = /StyleSheet\\.create|fontSize|padding|margin|width|height/.test(content);\n\n    // Check if file uses any responsive functions\n    const usesResponsiveFunctions = RESPONSIVE_FUNCTIONS.some(fn =>\n      content.includes(fn)\n    );\n\n    if (hasStyles && !hasImport && !usesResponsiveFunctions) {\n      this.addIssue({\n        file: path.relative(this.rootDir, filePath),\n        line: 1,\n        column: 1,\n        type: 'missing-import',\n        severity: 'medium',\n        value: 'N/A',\n        context: 'File uses styles but does not import from globals/responsive.ts',\n        suggestion: `Add: import { getScreenInfo, scaleSize, responsiveSpacing } from '../globals/responsive';`\n      });\n    }\n  }\n\n  private addIssue(issue: ResponsiveIssue): void {\n    this.report.issues.push(issue);\n    this.report.totalIssues++;\n    this.report.issuesBySeverity[issue.severity]++;\n    this.report.issuesByType[issue.type]++;\n  }\n\n  private auditFile(filePath: string): void {\n    try {\n      const content = fs.readFileSync(filePath, 'utf-8');\n      const hasImport = this.hasResponsiveImport(content);\n\n      const issuesBeforeFile = this.report.totalIssues;\n\n      this.detectDirectDimensions(content, filePath);\n      this.detectMissingPlatformChecks(content, filePath);\n      this.detectMissingResponsiveFunctions(content, filePath, hasImport);\n      this.detectMissingScreenSizeChecks(content, filePath);\n      this.detectMissingImport(content, filePath);\n\n      const issuesAfterFile = this.report.totalIssues;\n\n      if (issuesAfterFile > issuesBeforeFile) {\n        this.report.filesWithIssues++;\n      }\n\n      this.report.totalFiles++;\n    } catch (error) {\n      console.error(`Error auditing file ${filePath}:`, error);\n    }\n  }\n\n  public audit(): ResponsiveAuditReport {\n    console.log('ğŸ“± Starting responsive design audit...\\n');\n\n    const files = this.getAllFiles(this.rootDir);\n    console.log(`Found ${files.length} TypeScript files to audit\\n`);\n\n    files.forEach((file, index) => {\n      if (index % 10 === 0) {\n        process.stdout.write(`\\rProgress: ${index}/${files.length} files`);\n      }\n      this.auditFile(file);\n    });\n\n    process.stdout.write(`\\rProgress: ${files.length}/${files.length} files âœ“\\n\\n`);\n\n    return this.report;\n  }\n\n  public saveReport(outputPath: string): void {\n    const dir = path.dirname(outputPath);\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n\n    fs.writeFileSync(outputPath, JSON.stringify(this.report, null, 2));\n    console.log(`\\nğŸ“Š Report saved to: ${outputPath}`);\n  }\n\n  public printSummary(): void {\n    console.log('\\n' + '='.repeat(60));\n    console.log('RESPONSIVE DESIGN AUDIT SUMMARY');\n    console.log('='.repeat(60));\n    console.log(`\\nTotal files scanned: ${this.report.totalFiles}`);\n    console.log(`Files with issues: ${this.report.filesWithIssues}`);\n    console.log(`Total issues found: ${this.report.totalIssues}\\n`);\n\n    console.log('Issues by severity:');\n    console.log(`  ğŸ”´ Critical: ${this.report.issuesBySeverity.critical}`);\n    console.log(`  ğŸŸ  High:     ${this.report.issuesBySeverity.high}`);\n    console.log(`  ğŸŸ¡ Medium:   ${this.report.issuesBySeverity.medium}`);\n    console.log(`  ğŸŸ¢ Low:      ${this.report.issuesBySeverity.low}\\n`);\n\n    console.log('Issues by type:');\n    console.log(`  Direct Dimensions:        ${this.report.issuesByType['dimensions-direct']}`);\n    console.log(`  No Platform check:        ${this.report.issuesByType['no-platform-check']}`);\n    console.log(`  No responsive functions:  ${this.report.issuesByType['no-responsive-function']}`);\n    console.log(`  No screen size checks:    ${this.report.issuesByType['no-screen-size-check']}`);\n    console.log(`  Missing imports:          ${this.report.issuesByType['missing-import']}\\n`);\n\n    if (this.report.totalIssues > 0) {\n      console.log('Top 5 files with most issues:');\n      const fileIssueCount = new Map<string, number>();\n      this.report.issues.forEach(issue => {\n        fileIssueCount.set(issue.file, (fileIssueCount.get(issue.file) || 0) + 1);\n      });\n\n      const sorted = Array.from(fileIssueCount.entries())\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 5);\n\n      sorted.forEach(([file, count], index) => {\n        console.log(`  ${index + 1}. ${file} (${count} issues)`);\n      });\n    }\n\n    console.log('\\n' + '='.repeat(60) + '\\n');\n  }\n}\n\n// Main execution\nif (require.main === module) {\n  const rootDir = path.join(__dirname, '..');\n  const outputPath = path.join(rootDir, 'audit-reports', 'responsive-issues.json');\n\n  const auditor = new ResponsiveAuditor(rootDir);\n  auditor.audit();\n  auditor.saveReport(outputPath);\n  auditor.printSummary();\n\n  process.exit(0);\n}\n\nexport { ResponsiveAuditor, ResponsiveAuditReport, ResponsiveIssue };\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-structure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/audit-texts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2289,2292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2289,2292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2320,2323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2320,2323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3930,3933],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3930,3933],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'quote' is assigned a value but never used.","line":250,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":250,"endColumn":20}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env ts-node\n/**\n * Audit Script: Texts (i18n)\n * \n * Purpose: Scans all TypeScript/TSX files to detect hardcoded text strings\n * that should be using i18n translation keys from locales/*.json\n * \n * Detects:\n * - Hebrew text strings (not using t())\n * - English text strings (not using t())\n * - Missing translation keys\n * - Unused translation keys\n * - Inconsistent key usage\n * \n * Output: audit-reports/texts-issues.json\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface TextIssue {\n  file: string;\n  line: number;\n  column: number;\n  type: 'hardcoded-hebrew' | 'hardcoded-english' | 'missing-key' | 'unused-key' | 'no-i18n-import';\n  severity: 'critical' | 'high' | 'medium' | 'low';\n  value: string;\n  context: string;\n  suggestion: string;\n  suggestedKey?: string;\n}\n\ninterface TextAuditReport {\n  timestamp: string;\n  totalFiles: number;\n  filesWithIssues: number;\n  totalIssues: number;\n  issuesBySeverity: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  issuesByType: {\n    'hardcoded-hebrew': number;\n    'hardcoded-english': number;\n    'missing-key': number;\n    'unused-key': number;\n    'no-i18n-import': number;\n  };\n  translationStats: {\n    totalKeysHe: number;\n    totalKeysEn: number;\n    missingInEn: string[];\n    missingInHe: string[];\n  };\n  issues: TextIssue[];\n}\n\n// Regex patterns\nconst HEBREW_PATTERN = /[\\u0590-\\u05FF]+/;\nconst STRING_LITERAL_PATTERN = /(['\"`])(?:(?=(\\\\?))\\2.)*?\\1/g;\n\n// Files/directories to exclude\nconst EXCLUDE_PATTERNS = [\n  'node_modules',\n  'dist',\n  'build',\n  '.expo',\n  'ios',\n  'android',\n  'web',\n  'locales', // Don't audit the translation files themselves\n  'scripts',\n  '.git',\n  'coverage',\n  'assets'\n];\n\n// Patterns to ignore (technical strings, not user-facing)\nconst IGNORE_PATTERNS = [\n  /^https?:\\/\\//,  // URLs\n  /^[A-Z_]+$/,     // Constants (e.g., API_KEY)\n  /^\\d+$/,         // Pure numbers\n  /^[a-z]+:[a-z]+$/, // i18n keys themselves\n  /^\\w+\\.\\w+$/,    // Property access (e.g., user.name)\n  /^#[0-9A-Fa-f]{3,6}$/, // Hex colors\n  /^rgba?\\(/,      // RGB colors\n  /^\\//,           // Paths\n  /^@/,            // Decorators/mentions\n];\n\nclass TextAuditor {\n  private report: TextAuditReport;\n  private rootDir: string;\n  private translationsHe: any;\n  private translationsEn: any;\n  private usedKeys: Set<string>;\n\n  constructor(rootDir: string) {\n    this.rootDir = rootDir;\n    this.usedKeys = new Set();\n    this.report = {\n      timestamp: new Date().toISOString(),\n      totalFiles: 0,\n      filesWithIssues: 0,\n      totalIssues: 0,\n      issuesBySeverity: {\n        critical: 0,\n        high: 0,\n        medium: 0,\n        low: 0\n      },\n      issuesByType: {\n        'hardcoded-hebrew': 0,\n        'hardcoded-english': 0,\n        'missing-key': 0,\n        'unused-key': 0,\n        'no-i18n-import': 0\n      },\n      translationStats: {\n        totalKeysHe: 0,\n        totalKeysEn: 0,\n        missingInEn: [],\n        missingInHe: []\n      },\n      issues: []\n    };\n\n    this.loadTranslations();\n  }\n\n  private loadTranslations(): void {\n    try {\n      const hePath = path.join(this.rootDir, 'locales', 'he.json');\n      const enPath = path.join(this.rootDir, 'locales', 'en.json');\n\n      if (fs.existsSync(hePath)) {\n        this.translationsHe = JSON.parse(fs.readFileSync(hePath, 'utf-8'));\n        this.report.translationStats.totalKeysHe = this.countKeys(this.translationsHe);\n      }\n\n      if (fs.existsSync(enPath)) {\n        this.translationsEn = JSON.parse(fs.readFileSync(enPath, 'utf-8'));\n        this.report.translationStats.totalKeysEn = this.countKeys(this.translationsEn);\n      }\n\n      console.log(`Loaded translations: ${this.report.translationStats.totalKeysHe} Hebrew keys, ${this.report.translationStats.totalKeysEn} English keys\\n`);\n    } catch (error) {\n      console.error('Error loading translations:', error);\n    }\n  }\n\n  private countKeys(obj: any, prefix: string = ''): number {\n    let count = 0;\n    for (const key in obj) {\n      if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n        count += this.countKeys(obj[key], prefix ? `${prefix}.${key}` : key);\n      } else {\n        count++;\n      }\n    }\n    return count;\n  }\n\n  private shouldExclude(filePath: string): boolean {\n    return EXCLUDE_PATTERNS.some(pattern => filePath.includes(pattern));\n  }\n\n  private isTypeScriptFile(filePath: string): boolean {\n    return /\\.(ts|tsx)$/.test(filePath);\n  }\n\n  private getAllFiles(dir: string): string[] {\n    let results: string[] = [];\n\n    try {\n      const list = fs.readdirSync(dir);\n\n      list.forEach(file => {\n        const filePath = path.join(dir, file);\n\n        if (this.shouldExclude(filePath)) {\n          return;\n        }\n\n        const stat = fs.statSync(filePath);\n\n        if (stat.isDirectory()) {\n          results = results.concat(this.getAllFiles(filePath));\n        } else if (this.isTypeScriptFile(filePath)) {\n          results.push(filePath);\n        }\n      });\n    } catch (error) {\n      console.error(`Error reading directory ${dir}:`, error);\n    }\n\n    return results;\n  }\n\n  private hasI18nImport(content: string): boolean {\n    return /import.*useTranslation.*from\\s+['\"]react-i18next['\"]/.test(content) ||\n      /import.*\\{.*t.*\\}.*from\\s+['\"]react-i18next['\"]/.test(content);\n  }\n\n  private isIgnoredString(str: string): boolean {\n    return IGNORE_PATTERNS.some(pattern => pattern.test(str));\n  }\n\n  private containsHebrew(str: string): boolean {\n    return HEBREW_PATTERN.test(str);\n  }\n\n  private suggestKey(text: string): string {\n    // Simple key suggestion based on text content\n    const cleaned = text\n      .replace(/[^\\u0590-\\u05FFa-zA-Z0-9\\s]/g, '')\n      .trim()\n      .slice(0, 30);\n\n    if (this.containsHebrew(cleaned)) {\n      return 'common:newKey'; // Placeholder for Hebrew text\n    }\n\n    return 'common:' + cleaned\n      .toLowerCase()\n      .replace(/\\s+/g, '_')\n      .replace(/[^a-z0-9_]/g, '');\n  }\n\n  private detectHardcodedStrings(content: string, filePath: string, hasI18nImport: boolean): void {\n    const lines = content.split('\\n');\n\n    lines.forEach((line, lineIndex) => {\n      // Skip comments\n      if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n        return;\n      }\n\n      // Skip import statements\n      if (line.trim().startsWith('import')) {\n        return;\n      }\n\n      const matches = line.matchAll(STRING_LITERAL_PATTERN);\n\n      for (const match of matches) {\n        const fullMatch = match[0];\n        const quote = match[1];\n        const content = fullMatch.slice(1, -1); // Remove quotes\n        const column = match.index || 0;\n\n        // Skip empty strings\n        if (!content.trim()) {\n          continue;\n        }\n\n        // Skip ignored patterns\n        if (this.isIgnoredString(content)) {\n          continue;\n        }\n\n        // Skip if it's already using t() function\n        const beforeMatch = line.substring(0, column);\n        if (/t\\s*\\(\\s*$/.test(beforeMatch)) {\n          // Extract the key being used\n          const keyMatch = content.match(/^([a-z]+:[a-zA-Z.]+)$/);\n          if (keyMatch) {\n            this.usedKeys.add(keyMatch[1]);\n          }\n          continue;\n        }\n\n        // Detect Hebrew text\n        if (this.containsHebrew(content)) {\n          this.addIssue({\n            file: path.relative(this.rootDir, filePath),\n            line: lineIndex + 1,\n            column: column + 1,\n            type: 'hardcoded-hebrew',\n            severity: hasI18nImport ? 'high' : 'critical',\n            value: content,\n            context: line.trim(),\n            suggestion: hasI18nImport\n              ? `Replace \"${content}\" with {t('${this.suggestKey(content)}')}`\n              : `Import useTranslation and replace \"${content}\" with {t('key')}`,\n            suggestedKey: this.suggestKey(content)\n          });\n        }\n        // Detect English text (only if it looks like user-facing text)\n        else if (content.length > 2 && /[a-zA-Z]/.test(content) && /\\s/.test(content)) {\n          this.addIssue({\n            file: path.relative(this.rootDir, filePath),\n            line: lineIndex + 1,\n            column: column + 1,\n            type: 'hardcoded-english',\n            severity: 'medium',\n            value: content,\n            context: line.trim(),\n            suggestion: hasI18nImport\n              ? `Replace \"${content}\" with {t('${this.suggestKey(content)}')}`\n              : `Import useTranslation and replace \"${content}\" with {t('key')}`,\n            suggestedKey: this.suggestKey(content)\n          });\n        }\n      }\n    });\n  }\n\n  private detectMissingI18nImport(content: string, filePath: string): void {\n    const hasImport = this.hasI18nImport(content);\n\n    // Check if file has JSX/TSX content (likely needs i18n)\n    const hasJSX = /<[A-Z]/.test(content) || /<Text/.test(content);\n\n    if (hasJSX && !hasImport) {\n      const hasHardcodedText = this.containsHebrew(content) ||\n        /['\"][^'\"]{10,}['\"]/.test(content);\n\n      if (hasHardcodedText) {\n        this.addIssue({\n          file: path.relative(this.rootDir, filePath),\n          line: 1,\n          column: 1,\n          type: 'no-i18n-import',\n          severity: 'high',\n          value: 'N/A',\n          context: 'File has JSX and text but no i18n import',\n          suggestion: `Add: import { useTranslation } from 'react-i18next'; const { t } = useTranslation();`\n        });\n      }\n    }\n  }\n\n  private addIssue(issue: TextIssue): void {\n    this.report.issues.push(issue);\n    this.report.totalIssues++;\n    this.report.issuesBySeverity[issue.severity]++;\n    this.report.issuesByType[issue.type]++;\n  }\n\n  private auditFile(filePath: string): void {\n    try {\n      const content = fs.readFileSync(filePath, 'utf-8');\n      const hasI18nImport = this.hasI18nImport(content);\n\n      const issuesBeforeFile = this.report.totalIssues;\n\n      this.detectHardcodedStrings(content, filePath, hasI18nImport);\n      this.detectMissingI18nImport(content, filePath);\n\n      const issuesAfterFile = this.report.totalIssues;\n\n      if (issuesAfterFile > issuesBeforeFile) {\n        this.report.filesWithIssues++;\n      }\n\n      this.report.totalFiles++;\n    } catch (error) {\n      console.error(`Error auditing file ${filePath}:`, error);\n    }\n  }\n\n  public audit(): TextAuditReport {\n    console.log('ğŸ“ Starting text/i18n audit...\\n');\n\n    const files = this.getAllFiles(this.rootDir);\n    console.log(`Found ${files.length} TypeScript files to audit\\n`);\n\n    files.forEach((file, index) => {\n      if (index % 10 === 0) {\n        process.stdout.write(`\\rProgress: ${index}/${files.length} files`);\n      }\n      this.auditFile(file);\n    });\n\n    process.stdout.write(`\\rProgress: ${files.length}/${files.length} files âœ“\\n\\n`);\n\n    return this.report;\n  }\n\n  public saveReport(outputPath: string): void {\n    const dir = path.dirname(outputPath);\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n\n    fs.writeFileSync(outputPath, JSON.stringify(this.report, null, 2));\n    console.log(`\\nğŸ“Š Report saved to: ${outputPath}`);\n  }\n\n  public printSummary(): void {\n    console.log('\\n' + '='.repeat(60));\n    console.log('TEXT/I18N AUDIT SUMMARY');\n    console.log('='.repeat(60));\n    console.log(`\\nTotal files scanned: ${this.report.totalFiles}`);\n    console.log(`Files with issues: ${this.report.filesWithIssues}`);\n    console.log(`Total issues found: ${this.report.totalIssues}\\n`);\n\n    console.log('Translation coverage:');\n    console.log(`  Hebrew keys:  ${this.report.translationStats.totalKeysHe}`);\n    console.log(`  English keys: ${this.report.translationStats.totalKeysEn}\\n`);\n\n    console.log('Issues by severity:');\n    console.log(`  ğŸ”´ Critical: ${this.report.issuesBySeverity.critical}`);\n    console.log(`  ğŸŸ  High:     ${this.report.issuesBySeverity.high}`);\n    console.log(`  ğŸŸ¡ Medium:   ${this.report.issuesBySeverity.medium}`);\n    console.log(`  ğŸŸ¢ Low:      ${this.report.issuesBySeverity.low}\\n`);\n\n    console.log('Issues by type:');\n    console.log(`  Hardcoded Hebrew:  ${this.report.issuesByType['hardcoded-hebrew']}`);\n    console.log(`  Hardcoded English: ${this.report.issuesByType['hardcoded-english']}`);\n    console.log(`  Missing keys:      ${this.report.issuesByType['missing-key']}`);\n    console.log(`  Unused keys:       ${this.report.issuesByType['unused-key']}`);\n    console.log(`  Missing i18n:      ${this.report.issuesByType['no-i18n-import']}\\n`);\n\n    if (this.report.totalIssues > 0) {\n      console.log('Top 5 files with most issues:');\n      const fileIssueCount = new Map<string, number>();\n      this.report.issues.forEach(issue => {\n        fileIssueCount.set(issue.file, (fileIssueCount.get(issue.file) || 0) + 1);\n      });\n\n      const sorted = Array.from(fileIssueCount.entries())\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 5);\n\n      sorted.forEach(([file, count], index) => {\n        console.log(`  ${index + 1}. ${file} (${count} issues)`);\n      });\n    }\n\n    console.log('\\n' + '='.repeat(60) + '\\n');\n  }\n}\n\n// Main execution\nif (require.main === module) {\n  const rootDir = path.join(__dirname, '..');\n  const outputPath = path.join(rootDir, 'audit-reports', 'texts-issues.json');\n\n  const auditor = new TextAuditor(rootDir);\n  auditor.audit();\n  auditor.saveReport(outputPath);\n  auditor.printSummary();\n\n  process.exit(0);\n}\n\nexport { TextAuditor, TextAuditReport, TextIssue };\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/find-unused-files.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":163,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hash' is defined but never used.","line":184,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env ts-node\n/**\n * Audit Script: Unused Files\n * \n * Purpose: Scans the codebase to find files that are not imported/used anywhere\n * \n * Detects:\n * - Files with no imports\n * - Duplicate files\n * - Old/backup files (.old, .backup, etc.)\n * - Test files without corresponding source files\n * \n * Output: audit-reports/unused-files.json\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as crypto from 'crypto';\n\ninterface UnusedFileIssue {\n  file: string;\n  type: 'unused' | 'duplicate' | 'old-backup' | 'orphaned-test';\n  severity: 'critical' | 'high' | 'medium' | 'low';\n  reason: string;\n  suggestion: string;\n  duplicateOf?: string;\n  fileSize?: number;\n}\n\ninterface UnusedFilesReport {\n  timestamp: string;\n  totalFiles: number;\n  unusedFiles: number;\n  duplicateFiles: number;\n  oldBackupFiles: number;\n  orphanedTests: number;\n  potentialSpaceSaved: number; // in bytes\n  issues: UnusedFileIssue[];\n}\n\n// Files/directories to exclude\nconst EXCLUDE_PATTERNS = [\n  'node_modules',\n  'dist',\n  'build',\n  '.expo',\n  'ios/Pods',\n  'android/app/build',\n  '.git',\n  'coverage'\n];\n\n// Entry points that are always considered \"used\"\nconst ENTRY_POINTS = [\n  'index.js',\n  'index.ts',\n  'index.tsx',\n  'App.tsx',\n  'App.ts',\n  '_layout.tsx',\n  'app.config.js',\n  'babel.config.js',\n  'metro.config.js'\n];\n\n// Patterns for old/backup files\nconst OLD_BACKUP_PATTERNS = [\n  /\\.old$/,\n  /\\.backup$/,\n  /\\.bak$/,\n  /\\.copy$/,\n  /_old\\./,\n  /_backup\\./,\n  /_copy\\./,\n  /\\(old\\)/i,\n  /\\(backup\\)/i,\n  /\\(copy\\)/i\n];\n\nclass UnusedFileFinder {\n  private report: UnusedFilesReport;\n  private rootDir: string;\n  private allFiles: Set<string>;\n  private importedFiles: Set<string>;\n  private fileHashes: Map<string, string>;\n  private duplicates: Map<string, string[]>;\n\n  constructor(rootDir: string) {\n    this.rootDir = rootDir;\n    this.allFiles = new Set();\n    this.importedFiles = new Set();\n    this.fileHashes = new Map();\n    this.duplicates = new Map();\n    this.report = {\n      timestamp: new Date().toISOString(),\n      totalFiles: 0,\n      unusedFiles: 0,\n      duplicateFiles: 0,\n      oldBackupFiles: 0,\n      orphanedTests: 0,\n      potentialSpaceSaved: 0,\n      issues: []\n    };\n  }\n\n  private shouldExclude(filePath: string): boolean {\n    return EXCLUDE_PATTERNS.some(pattern => filePath.includes(pattern));\n  }\n\n  private isSourceFile(filePath: string): boolean {\n    return /\\.(ts|tsx|js|jsx)$/.test(filePath);\n  }\n\n  private isEntryPoint(filePath: string): boolean {\n    const basename = path.basename(filePath);\n    return ENTRY_POINTS.includes(basename);\n  }\n\n  private isOldBackupFile(filePath: string): boolean {\n    return OLD_BACKUP_PATTERNS.some(pattern => pattern.test(filePath));\n  }\n\n  private getAllFiles(dir: string): string[] {\n    let results: string[] = [];\n\n    try {\n      const list = fs.readdirSync(dir);\n\n      list.forEach(file => {\n        const filePath = path.join(dir, file);\n\n        if (this.shouldExclude(filePath)) {\n          return;\n        }\n\n        const stat = fs.statSync(filePath);\n\n        if (stat.isDirectory()) {\n          results = results.concat(this.getAllFiles(filePath));\n        } else if (this.isSourceFile(filePath)) {\n          results.push(filePath);\n          this.allFiles.add(filePath);\n        }\n      });\n    } catch (error) {\n      console.error(`Error reading directory ${dir}:`, error);\n    }\n\n    return results;\n  }\n\n  private calculateFileHash(filePath: string): string {\n    try {\n      const content = fs.readFileSync(filePath, 'utf-8');\n      // Normalize content (remove comments and whitespace for better duplicate detection)\n      const normalized = content\n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') // Remove block comments\n        .replace(/\\/\\/.*/g, '') // Remove line comments\n        .replace(/\\s+/g, ' ') // Normalize whitespace\n        .trim();\n\n      return crypto.createHash('md5').update(normalized).digest('hex');\n    } catch (error) {\n      return '';\n    }\n  }\n\n  private findDuplicates(): void {\n    console.log('Finding duplicate files...');\n\n    this.allFiles.forEach(file => {\n      const hash = this.calculateFileHash(file);\n      if (hash) {\n        this.fileHashes.set(file, hash);\n\n        if (!this.duplicates.has(hash)) {\n          this.duplicates.set(hash, []);\n        }\n        this.duplicates.get(hash)!.push(file);\n      }\n    });\n\n    // Report duplicates\n    this.duplicates.forEach((files, hash) => {\n      if (files.length > 1) {\n        // Keep the first file, mark others as duplicates\n        const [original, ...duplicates] = files;\n\n        duplicates.forEach(duplicate => {\n          const stat = fs.statSync(duplicate);\n          this.addIssue({\n            file: path.relative(this.rootDir, duplicate),\n            type: 'duplicate',\n            severity: 'medium',\n            reason: `Duplicate of ${path.relative(this.rootDir, original)}`,\n            suggestion: `Consider removing this duplicate file`,\n            duplicateOf: path.relative(this.rootDir, original),\n            fileSize: stat.size\n          });\n          this.report.duplicateFiles++;\n          this.report.potentialSpaceSaved += stat.size;\n        });\n      }\n    });\n  }\n\n  private extractImports(content: string, filePath: string): void {\n    const lines = content.split('\\n');\n\n    lines.forEach(line => {\n      // Match various import patterns\n      const importPatterns = [\n        /import\\s+.*from\\s+['\"](\\.\\.?\\/[^'\"]+)['\"]/,  // Relative imports\n        /require\\s*\\(['\"](\\.\\.?\\/[^'\"]+)['\"]\\)/,       // Require\n        /import\\s*\\(['\"](\\.\\.?\\/[^'\"]+)['\"]\\)/         // Dynamic import\n      ];\n\n      importPatterns.forEach(pattern => {\n        const match = line.match(pattern);\n        if (match) {\n          const importPath = match[1];\n\n          // Resolve the import path relative to the current file\n          const fileDir = path.dirname(filePath);\n          let resolvedPath = path.resolve(fileDir, importPath);\n\n          // Try different extensions if no extension specified\n          if (!path.extname(resolvedPath)) {\n            const extensions = ['.ts', '.tsx', '.js', '.jsx'];\n            for (const ext of extensions) {\n              const withExt = resolvedPath + ext;\n              if (fs.existsSync(withExt)) {\n                resolvedPath = withExt;\n                break;\n              }\n            }\n\n            // Try index files\n            const indexFiles = extensions.map(ext => path.join(resolvedPath, `index${ext}`));\n            for (const indexFile of indexFiles) {\n              if (fs.existsSync(indexFile)) {\n                resolvedPath = indexFile;\n                break;\n              }\n            }\n          }\n\n          this.importedFiles.add(resolvedPath);\n        }\n      });\n    });\n  }\n\n  private findUnusedFiles(): void {\n    console.log('Analyzing imports...');\n\n    // First pass: collect all imports\n    this.allFiles.forEach(file => {\n      try {\n        const content = fs.readFileSync(file, 'utf-8');\n        this.extractImports(content, file);\n      } catch (error) {\n        console.error(`Error reading file ${file}:`, error);\n      }\n    });\n\n    // Mark entry points as used\n    this.allFiles.forEach(file => {\n      if (this.isEntryPoint(file)) {\n        this.importedFiles.add(file);\n      }\n    });\n\n    console.log('Finding unused files...');\n\n    // Second pass: find files that are never imported\n    this.allFiles.forEach(file => {\n      const isUsed = this.importedFiles.has(file);\n      const isEntry = this.isEntryPoint(file);\n\n      if (!isUsed && !isEntry) {\n        const stat = fs.statSync(file);\n        this.addIssue({\n          file: path.relative(this.rootDir, file),\n          type: 'unused',\n          severity: 'low',\n          reason: 'File is not imported anywhere in the codebase',\n          suggestion: 'Verify if this file is still needed, consider removing it',\n          fileSize: stat.size\n        });\n        this.report.unusedFiles++;\n        this.report.potentialSpaceSaved += stat.size;\n      }\n    });\n  }\n\n  private findOldBackupFiles(): void {\n    console.log('Finding old/backup files...');\n\n    this.allFiles.forEach(file => {\n      if (this.isOldBackupFile(file)) {\n        const stat = fs.statSync(file);\n        this.addIssue({\n          file: path.relative(this.rootDir, file),\n          type: 'old-backup',\n          severity: 'low',\n          reason: 'File appears to be an old/backup version',\n          suggestion: 'Consider removing this old/backup file',\n          fileSize: stat.size\n        });\n        this.report.oldBackupFiles++;\n        this.report.potentialSpaceSaved += stat.size;\n      }\n    });\n  }\n\n  private addIssue(issue: UnusedFileIssue): void {\n    this.report.issues.push(issue);\n  }\n\n  public audit(): UnusedFilesReport {\n    console.log('ğŸ—‘ï¸  Starting unused files audit...\\n');\n\n    const files = this.getAllFiles(this.rootDir);\n    this.report.totalFiles = files.length;\n    console.log(`Found ${files.length} source files to analyze\\n`);\n\n    this.findDuplicates();\n    this.findUnusedFiles();\n    this.findOldBackupFiles();\n\n    return this.report;\n  }\n\n  public saveReport(outputPath: string): void {\n    const dir = path.dirname(outputPath);\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n\n    fs.writeFileSync(outputPath, JSON.stringify(this.report, null, 2));\n    console.log(`\\nğŸ“Š Report saved to: ${outputPath}`);\n  }\n\n  public printSummary(): void {\n    console.log('\\n' + '='.repeat(60));\n    console.log('UNUSED FILES AUDIT SUMMARY');\n    console.log('='.repeat(60));\n    console.log(`\\nTotal files scanned: ${this.report.totalFiles}`);\n    console.log(`Unused files: ${this.report.unusedFiles}`);\n    console.log(`Duplicate files: ${this.report.duplicateFiles}`);\n    console.log(`Old/backup files: ${this.report.oldBackupFiles}`);\n    console.log(`Orphaned test files: ${this.report.orphanedTests}\\n`);\n\n    const spaceMB = (this.report.potentialSpaceSaved / 1024 / 1024).toFixed(2);\n    console.log(`Potential space to reclaim: ${spaceMB} MB\\n`);\n\n    if (this.report.issues.length > 0) {\n      console.log('Files to review:');\n\n      const byType = {\n        unused: this.report.issues.filter(i => i.type === 'unused'),\n        duplicate: this.report.issues.filter(i => i.type === 'duplicate'),\n        'old-backup': this.report.issues.filter(i => i.type === 'old-backup'),\n        'orphaned-test': this.report.issues.filter(i => i.type === 'orphaned-test')\n      };\n\n      Object.entries(byType).forEach(([type, issues]) => {\n        if (issues.length > 0) {\n          console.log(`\\n  ${type.toUpperCase()} (${issues.length} files):`);\n          issues.slice(0, 5).forEach(issue => {\n            console.log(`    - ${issue.file}`);\n          });\n          if (issues.length > 5) {\n            console.log(`    ... and ${issues.length - 5} more`);\n          }\n        }\n      });\n    }\n\n    console.log('\\n' + '='.repeat(60) + '\\n');\n  }\n}\n\n// Main execution\nif (require.main === module) {\n  const rootDir = path.join(__dirname, '..');\n  const outputPath = path.join(rootDir, 'audit-reports', 'unused-files.json');\n\n  const finder = new UnusedFileFinder(rootDir);\n  finder.audit();\n  finder.saveReport(outputPath);\n  finder.printSummary();\n\n  process.exit(0);\n}\n\nexport { UnusedFileFinder, UnusedFilesReport, UnusedFileIssue };\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/testAuth.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":8,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":8,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":9,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":9,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":32,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":73,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":86,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":109,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":46},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":150,"column":19,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":150,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":150,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":150,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":209,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":209,"endColumn":10}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Manual Authentication Testing Script\n * Run with: node scripts/testAuth.js\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// ANSI colors for console output\nconst colors = {\n  reset: '\\x1b[0m',\n  red: '\\x1b[31m',\n  green: '\\x1b[32m',\n  yellow: '\\x1b[33m',\n  blue: '\\x1b[34m',\n  bold: '\\x1b[1m'\n};\n\nfunction log(message, color = colors.reset) {\n  console.log(`${color}${message}${colors.reset}`);\n}\n\nasync function testAuthentication() {\n  log('ğŸ” Authentication Configuration Test', colors.bold);\n  log('=====================================\\n');\n  \n  // Test 1: Check app.config.js\n  log('ğŸ“‹ Test 1: Checking app.config.js...', colors.blue);\n  try {\n    const configPath = path.join(__dirname, '..', 'app.config.js');\n    const configContent = fs.readFileSync(configPath, 'utf8');\n    \n    // Check for Google client IDs\n    const webClientIdMatch = configContent.match(/EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID:\\s*[\"']([^\"']+)[\"']/);\n    const iosClientIdMatch = configContent.match(/EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID:\\s*[\"']([^\"']+)[\"']/);\n    const androidClientIdMatch = configContent.match(/EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID:\\s*[\"']([^\"']+)[\"']/);\n    \n    if (webClientIdMatch) {\n      log(`  âœ… Web Client ID found: ${webClientIdMatch[1].substring(0, 20)}...`, colors.green);\n    } else {\n      log('  âŒ Web Client ID not found in app.config.js', colors.red);\n    }\n    \n    if (iosClientIdMatch) {\n      log(`  âœ… iOS Client ID found: ${iosClientIdMatch[1].substring(0, 20)}...`, colors.green);\n    } else {\n      log('  âŒ iOS Client ID not found in app.config.js', colors.red);\n    }\n    \n    if (androidClientIdMatch) {\n      log(`  âœ… Android Client ID found: ${androidClientIdMatch[1].substring(0, 20)}...`, colors.green);\n    } else {\n      log('  âŒ Android Client ID not found in app.config.js', colors.red);\n    }\n    \n  } catch (error) {\n    log(`  âŒ Error reading app.config.js: ${error.message}`, colors.red);\n  }\n  \n  console.log();\n  \n  // Test 2: Check environment variables\n  log('ğŸ“‹ Test 2: Checking environment variables...', colors.blue);\n  const envVars = [\n    'EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID',\n    'EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID',\n    'EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID'\n  ];\n  \n  envVars.forEach(varName => {\n    const value = process.env[varName];\n    if (value && value.length > 0) {\n      log(`  âœ… ${varName}: ${value.substring(0, 20)}...`, colors.green);\n    } else {\n      log(`  âŒ ${varName}: not set`, colors.red);\n    }\n  });\n  \n  console.log();\n  \n  // Test 3: Check OAuth redirect route\n  log('ğŸ“‹ Test 3: Checking OAuth redirect route...', colors.blue);\n  try {\n    const oauthRedirectPath = path.join(__dirname, '..', 'app', 'oauthredirect.tsx');\n    if (fs.existsSync(oauthRedirectPath)) {\n      log('  âœ… OAuth redirect route exists: app/oauthredirect.tsx', colors.green);\n      \n      // Check content\n      const content = fs.readFileSync(oauthRedirectPath, 'utf8');\n      if (content.includes('WebBrowser.maybeCompleteAuthSession')) {\n        log('  âœ… Route contains OAuth completion logic', colors.green);\n      } else {\n        log('  âš ï¸  Route exists but may be missing OAuth completion logic', colors.yellow);\n      }\n    } else {\n      log('  âŒ OAuth redirect route not found: app/oauthredirect.tsx', colors.red);\n    }\n  } catch (error) {\n    log(`  âŒ Error checking OAuth redirect route: ${error.message}`, colors.red);\n  }\n  \n  console.log();\n  \n  // Test 4: Check Google login component\n  log('ğŸ“‹ Test 4: Checking Google login component...', colors.blue);\n  try {\n    const componentPath = path.join(__dirname, '..', 'components', 'SimpleGoogleLoginButton.tsx');\n    if (fs.existsSync(componentPath)) {\n      log('  âœ… Google login component exists', colors.green);\n      \n      const content = fs.readFileSync(componentPath, 'utf8');\n      \n      // Check for required imports\n      const hasGoogleImport = content.includes('expo-auth-session/providers/google');\n      const hasLoggerImport = content.includes('loggerService');\n      const hasAuthTestImport = content.includes('authTestUtils');\n      \n      if (hasGoogleImport) {\n        log('  âœ… Has Google auth provider import', colors.green);\n      } else {\n        log('  âŒ Missing Google auth provider import', colors.red);\n      }\n      \n      if (hasLoggerImport) {\n        log('  âœ… Has logging capabilities', colors.green);\n      } else {\n        log('  âš ï¸  Missing logging import', colors.yellow);\n      }\n      \n      if (hasAuthTestImport) {\n        log('  âœ… Has authentication testing capabilities', colors.green);\n      } else {\n        log('  âš ï¸  Missing authentication testing import', colors.yellow);\n      }\n      \n    } else {\n      log('  âŒ Google login component not found', colors.red);\n    }\n  } catch (error) {\n    log(`  âŒ Error checking Google login component: ${error.message}`, colors.red);\n  }\n  \n  console.log();\n  \n  // Test 5: Network connectivity\n  log('ğŸ“‹ Test 5: Testing network connectivity...', colors.blue);\n  try {\n    const https = require('https');\n    \n    // Test Google OAuth endpoints\n    const testEndpoint = (url, name) => {\n      return new Promise((resolve) => {\n        const req = https.request(url, { method: 'HEAD' }, (res) => {\n          if (res.statusCode === 200 || res.statusCode === 204) {\n            log(`  âœ… ${name}: accessible`, colors.green);\n            resolve(true);\n          } else {\n            log(`  âŒ ${name}: returned ${res.statusCode}`, colors.red);\n            resolve(false);\n          }\n        });\n        \n        req.on('error', (error) => {\n          log(`  âŒ ${name}: ${error.message}`, colors.red);\n          resolve(false);\n        });\n        \n        req.setTimeout(5000, () => {\n          log(`  âŒ ${name}: timeout`, colors.red);\n          resolve(false);\n        });\n        \n        req.end();\n      });\n    };\n    \n    await testEndpoint('https://accounts.google.com', 'Google Accounts');\n    await testEndpoint('https://oauth2.googleapis.com', 'Google OAuth2');\n    \n  } catch (error) {\n    log(`  âŒ Network test failed: ${error.message}`, colors.red);\n  }\n  \n  console.log();\n  \n  // Summary\n  log('ğŸ¯ Summary & Next Steps', colors.bold);\n  log('========================\\n');\n  \n  log('If you see any âŒ (red X) marks above, those need to be fixed before Google authentication will work.', colors.yellow);\n  log('âš ï¸  (yellow warning) marks indicate potential issues that might cause problems.', colors.yellow);\n  log('âœ… (green checkmarks) indicate everything is working correctly for that test.\\n');\n  \n  log('Next steps:', colors.bold);\n  log('1. Fix any configuration issues shown above');\n  log('2. Make sure you have added the correct redirect URI to Google Cloud Console:');\n  log('   https://karma-community-kc.com/oauthredirect');\n  log('3. Test the authentication flow in your browser');\n  log('4. Check the browser console and app logs for detailed debugging information');\n  \n  console.log();\n}\n\n// Run the tests\ntestAuthentication().catch(error => {\n  console.error('Test script failed:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/testFollowSystem.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":8,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":8,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":10,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":47}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Test script for the followers system with unified data\n// Run with: node scripts/testFollowSystem.js\n\nconsole.log('ğŸ§ª Testing Follow System with Unified Data...');\n\n// Read the unified file\nconst fs = require('fs');\nconst path = require('path');\n\nconst characterTypesPath = path.join(__dirname, '../globals/characterTypes.ts');\nconst content = fs.readFileSync(characterTypesPath, 'utf8');\n\n// Extract data\nconst allUsersMatch = content.match(/export const allUsers: CharacterType\\[\\] = (\\[[\\s\\S]*?\\]);/);\nconst allUsers = allUsersMatch ? eval(allUsersMatch[1]) : [];\n\nconsole.log(`ğŸ“Š Total Users: ${allUsers.length}`);\n\n// Followers system simulation\nlet followRelationships = [];\n\n// Followers system functions\nfunction getFollowStats(userId, currentUserId) {\n  const followers = followRelationships.filter(rel => rel.followingId === userId);\n  const following = followRelationships.filter(rel => rel.followerId === userId);\n  const isFollowing = followRelationships.some(rel => \n    rel.followerId === currentUserId && rel.followingId === userId\n  );\n\n  return {\n    followersCount: followers.length,\n    followingCount: following.length,\n    isFollowing\n  };\n}\n\nfunction followUser(followerId, followingId) {\n  const existingFollow = followRelationships.find(rel => \n    rel.followerId === followerId && rel.followingId === followingId\n  );\n\n  if (existingFollow) {\n    return false;\n  }\n\n  const newFollow = {\n    followerId,\n    followingId,\n    followDate: new Date().toISOString()\n  };\n\n  followRelationships.push(newFollow);\n  return true;\n}\n\nfunction unfollowUser(followerId, followingId) {\n  const followIndex = followRelationships.findIndex(rel => \n    rel.followerId === followerId && rel.followingId === followingId\n  );\n\n  if (followIndex === -1) {\n    return false;\n  }\n\n  followRelationships.splice(followIndex, 1);\n  return true;\n}\n\nfunction getFollowers(userId) {\n  const followerIds = followRelationships\n    .filter(rel => rel.followingId === userId)\n    .map(rel => rel.followerId);\n\n  return allUsers.filter(char => followerIds.includes(char.id));\n}\n\nfunction getFollowing(userId) {\n  const followingIds = followRelationships\n    .filter(rel => rel.followerId === userId)\n    .map(rel => rel.followingId);\n\n  return allUsers.filter(char => followingIds.includes(char.id));\n}\n\nfunction getFollowSuggestions(currentUserId, limit = 10) {\n  const alreadyFollowing = followRelationships\n    .filter(rel => rel.followerId === currentUserId)\n    .map(rel => rel.followingId);\n\n  const suggestions = allUsers.filter(char => \n    char.id !== currentUserId && \n    !alreadyFollowing.includes(char.id)\n  );\n\n  suggestions.sort((a, b) => b.karmaPoints - a.karmaPoints);\n  return suggestions.slice(0, limit);\n}\n\n// System tests\nconsole.log('\\nğŸ” Testing Follow System...');\n\n// Test 1: Start following\nconst user1 = allUsers[0]; // user001\nconst user2 = allUsers[15]; // user016\n\nconsole.log(`\\nğŸ“ Test 1: Follow Operation`);\nconsole.log(`User 1: ${user1.name} (${user1.id})`);\nconsole.log(`User 2: ${user2.name} (${user2.id})`);\n\nconst followResult = followUser(user1.id, user2.id);\nconsole.log(`Follow result: ${followResult ? 'SUCCESS' : 'FAILED'}`);\n\n// Test 2: Follow stats\nconst stats1 = getFollowStats(user1.id, user1.id);\nconst stats2 = getFollowStats(user2.id, user1.id);\n\nconsole.log(`\\nğŸ“Š Follow Statistics:`);\nconsole.log(`${user1.name}: ${stats1.followersCount} followers, ${stats1.followingCount} following`);\nconsole.log(`${user2.name}: ${stats2.followersCount} followers, ${stats2.followingCount} following`);\nconsole.log(`${user1.name} is following ${user2.name}: ${stats2.isFollowing}`);\n\n// Test 3: Followers/following lists\nconst user2Followers = getFollowers(user2.id);\nconst user1Following = getFollowing(user1.id);\n\nconsole.log(`\\nğŸ‘¥ Follow Lists:`);\nconsole.log(`${user2.name} followers: ${user2Followers.map(u => u.name).join(', ')}`);\nconsole.log(`${user1.name} following: ${user1Following.map(u => u.name).join(', ')}`);\n\n// Test 4: Suggestions\nconst suggestions = getFollowSuggestions(user1.id, 5);\nconsole.log(`\\nğŸ’¡ Follow Suggestions for ${user1.name}:`);\nsuggestions.forEach((user, index) => {\n  console.log(`${index + 1}. ${user.name} (${user.karmaPoints} karma points)`);\n});\n\n// Test 5: Unfollow\nconsole.log(`\\nğŸ“ Test 2: Unfollow Operation`);\nconst unfollowResult = unfollowUser(user1.id, user2.id);\nconsole.log(`Unfollow result: ${unfollowResult ? 'SUCCESS' : 'FAILED'}`);\n\nconst statsAfterUnfollow = getFollowStats(user2.id, user1.id);\nconsole.log(`${user2.name} followers after unfollow: ${statsAfterUnfollow.followersCount}`);\n\n// Test 6: Multiple follows\nconsole.log(`\\nğŸ“ Test 3: Multiple Follow Operations`);\nconst usersToFollow = allUsers.slice(1, 6); // 5 additional users\nusersToFollow.forEach(user => {\n  followUser(user1.id, user.id);\n});\n\nconst finalStats = getFollowStats(user1.id, user1.id);\nconsole.log(`${user1.name} final following count: ${finalStats.followingCount}`);\n\n// Test 7: Popular users\nconsole.log(`\\nğŸ† Popular Users Test:`);\nconst allUserStats = allUsers.map(char => {\n  const stats = getFollowStats(char.id, '');\n  return { ...char, followersCount: stats.followersCount };\n});\n\nconst popularUsers = allUserStats\n  .sort((a, b) => b.followersCount - a.followersCount)\n  .slice(0, 5);\n\nconsole.log('Top 5 Popular Users:');\npopularUsers.forEach((user, index) => {\n  console.log(`${index + 1}. ${user.name}: ${user.followersCount} followers`);\n});\n\n// Test 8: Data integrity\nconsole.log(`\\nğŸ” Data Integrity Check:`);\nconst totalRelationships = followRelationships.length;\nconst uniqueFollowers = new Set(followRelationships.map(r => r.followerId));\nconst uniqueFollowing = new Set(followRelationships.map(r => r.followingId));\n\nconsole.log(`Total relationships: ${totalRelationships}`);\nconsole.log(`Unique followers: ${uniqueFollowers.size}`);\nconsole.log(`Unique following: ${uniqueFollowing.size}`);\n\n// Test 9: Performance\nconsole.log(`\\nâš¡ Performance Test:`);\nconst startTime = Date.now();\nfor (let i = 0; i < 100; i++) {\n  const randomUser1 = allUsers[Math.floor(Math.random() * allUsers.length)];\n  const randomUser2 = allUsers[Math.floor(Math.random() * allUsers.length)];\n  if (randomUser1.id !== randomUser2.id) {\n    getFollowStats(randomUser1.id, randomUser2.id);\n  }\n}\nconst endTime = Date.now();\nconsole.log(`100 operations took: ${endTime - startTime}ms`);\n\nconsole.log('\\nâœ… Follow System Test Completed Successfully!');\nconsole.log(`ğŸ“Š Final Statistics:`);\nconsole.log(`- Total Users: ${allUsers.length}`);\nconsole.log(`- Total Relationships: ${followRelationships.length}`);\nconsole.log(`- System is working correctly with unified data`); ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/scripts/testUnifiedSystem.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":8,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":8,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":10,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":47}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Comprehensive test script for the unified followers system\n// Run with: node scripts/testUnifiedSystem.js\n\nconsole.log('ğŸ§ª Comprehensive Follow System Test with Unified IDs...');\n\n// Read the unified file\nconst fs = require('fs');\nconst path = require('path');\n\nconst characterTypesPath = path.join(__dirname, '../globals/characterTypes.ts');\nconst content = fs.readFileSync(characterTypesPath, 'utf8');\n\n// Extract data\nconst allUsersMatch = content.match(/export const allUsers: CharacterType\\[\\] = (\\[[\\s\\S]*?\\]);/);\nconst allUsers = allUsersMatch ? eval(allUsersMatch[1]) : [];\n\nconsole.log(`ğŸ“Š Total Users: ${allUsers.length}`);\n\n// Validate IDs structure\nconsole.log('\\nğŸ” ID Structure Check:');\nconst userIds = allUsers.map(user => user.id);\nconst charIds = userIds.filter(id => id.startsWith('char'));\nconst userIdsOnly = userIds.filter(id => id.startsWith('user'));\n\nconsole.log(`- IDs starting with 'char': ${charIds.length}`);\nconsole.log(`- IDs starting with 'user': ${userIdsOnly.length}`);\nconsole.log(`- Total unique IDs: ${new Set(userIds).size}`);\n\nif (charIds.length > 0) {\n  console.log('âŒ WARNING: Found IDs starting with \"char\" - should be \"user\"');\n} else {\n  console.log('âœ… All IDs are properly unified with \"user\" prefix');\n}\n\n// Followers system simulation\nlet followRelationships = [];\n\n// Followers system functions\nfunction getFollowStats(userId, currentUserId) {\n  const followers = followRelationships.filter(rel => rel.followingId === userId);\n  const following = followRelationships.filter(rel => rel.followerId === userId);\n  const isFollowing = followRelationships.some(rel => \n    rel.followerId === currentUserId && rel.followingId === userId\n  );\n\n  return {\n    followersCount: followers.length,\n    followingCount: following.length,\n    isFollowing\n  };\n}\n\nfunction followUser(followerId, followingId) {\n  // Prevent self-follow\n  if (followerId === followingId) {\n    return false; // Not allowed to follow yourself\n  }\n\n  const existingFollow = followRelationships.find(rel => \n    rel.followerId === followerId && rel.followingId === followingId\n  );\n\n  if (existingFollow) {\n    return false;\n  }\n\n  const newFollow = {\n    followerId,\n    followingId,\n    followDate: new Date().toISOString()\n  };\n\n  followRelationships.push(newFollow);\n  return true;\n}\n\nfunction unfollowUser(followerId, followingId) {\n  const followIndex = followRelationships.findIndex(rel => \n    rel.followerId === followerId && rel.followingId === followingId\n  );\n\n  if (followIndex === -1) {\n    return false;\n  }\n\n  followRelationships.splice(followIndex, 1);\n  return true;\n}\n\nfunction getFollowers(userId) {\n  const followerIds = followRelationships\n    .filter(rel => rel.followingId === userId)\n    .map(rel => rel.followerId);\n\n  return allUsers.filter(char => followerIds.includes(char.id));\n}\n\nfunction getFollowing(userId) {\n  const followingIds = followRelationships\n    .filter(rel => rel.followerId === userId)\n    .map(rel => rel.followingId);\n\n  return allUsers.filter(char => followingIds.includes(char.id));\n}\n\nfunction getFollowSuggestions(currentUserId, limit = 10) {\n  const alreadyFollowing = followRelationships\n    .filter(rel => rel.followerId === currentUserId)\n    .map(rel => rel.followingId);\n\n  const suggestions = allUsers.filter(char => \n    char.id !== currentUserId && \n    !alreadyFollowing.includes(char.id)\n  );\n\n  suggestions.sort((a, b) => b.karmaPoints - a.karmaPoints);\n  return suggestions.slice(0, limit);\n}\n\nfunction getPopularUsers(limit = 10) {\n  const userStats = allUsers.map(char => {\n    const stats = getFollowStats(char.id, '');\n    return { ...char, followersCount: stats.followersCount };\n  });\n\n  return userStats\n    .sort((a, b) => b.followersCount - a.followersCount)\n    .slice(0, limit);\n}\n\n// Comprehensive tests\nconsole.log('\\nğŸ” Comprehensive System Tests...');\n\n// Test 1: Basic follow operations\nconsole.log('\\nğŸ“ Test 1: Basic Follow Operations');\nconst user1 = allUsers[0]; // user001\nconst user2 = allUsers[15]; // user016\nconst user3 = allUsers[10]; // user011\n\nconsole.log(`Testing with: ${user1.name} (${user1.id}), ${user2.name} (${user2.id}), ${user3.name} (${user3.id})`);\n\n// Follow\nconst follow1 = followUser(user1.id, user2.id);\nconst follow2 = followUser(user1.id, user3.id);\nconst follow3 = followUser(user2.id, user3.id);\n\nconsole.log(`Follow operations: ${follow1 ? 'SUCCESS' : 'FAILED'}, ${follow2 ? 'SUCCESS' : 'FAILED'}, ${follow3 ? 'SUCCESS' : 'FAILED'}`);\n\n// Check stats\nconst stats1 = getFollowStats(user1.id, user1.id);\nconst stats2 = getFollowStats(user2.id, user1.id);\nconst stats3 = getFollowStats(user3.id, user1.id);\n\nconsole.log(`Stats - ${user1.name}: ${stats1.followersCount} followers, ${stats1.followingCount} following`);\nconsole.log(`Stats - ${user2.name}: ${stats2.followersCount} followers, ${stats2.followingCount} following`);\nconsole.log(`Stats - ${user3.name}: ${stats3.followersCount} followers, ${stats3.followingCount} following`);\n\n// Test 2: Lists\nconsole.log('\\nğŸ“ Test 2: Follow Lists');\nconst user1Following = getFollowing(user1.id);\nconst user3Followers = getFollowers(user3.id);\n\nconsole.log(`${user1.name} following: ${user1Following.map(u => u.name).join(', ')}`);\nconsole.log(`${user3.name} followers: ${user3Followers.map(u => u.name).join(', ')}`);\n\n// Test 3: Suggestions\nconsole.log('\\nğŸ“ Test 3: Follow Suggestions');\nconst suggestions = getFollowSuggestions(user1.id, 5);\nconsole.log(`Suggestions for ${user1.name}:`);\nsuggestions.forEach((user, index) => {\n  console.log(`${index + 1}. ${user.name} (${user.karmaPoints} karma points)`);\n});\n\n// Test 4: Popular users\nconsole.log('\\nğŸ“ Test 4: Popular Users');\nconst popularUsers = getPopularUsers(5);\nconsole.log('Top 5 Popular Users:');\npopularUsers.forEach((user, index) => {\n  console.log(`${index + 1}. ${user.name}: ${user.followersCount} followers`);\n});\n\n// Test 5: Unfollow\nconsole.log('\\nğŸ“ Test 5: Unfollow Operations');\nconst unfollow1 = unfollowUser(user1.id, user2.id);\nconst statsAfterUnfollow = getFollowStats(user2.id, user1.id);\n\nconsole.log(`Unfollow result: ${unfollow1 ? 'SUCCESS' : 'FAILED'}`);\nconsole.log(`${user2.name} followers after unfollow: ${statsAfterUnfollow.followersCount}`);\n\n// Test 6: Duplicate follow\nconsole.log('\\nğŸ“ Test 6: Duplicate Follow Prevention');\nconst duplicateFollow = followUser(user1.id, user3.id);\nconsole.log(`Duplicate follow attempt: ${duplicateFollow ? 'ALLOWED (ERROR)' : 'BLOCKED (CORRECT)'}`);\n\n// Test 7: Self-follow\nconsole.log('\\nğŸ“ Test 7: Self-Follow Prevention');\nconst selfFollow = followUser(user1.id, user1.id);\nconsole.log(`Self-follow attempt: ${selfFollow ? 'ALLOWED (ERROR)' : 'BLOCKED (CORRECT)'}`);\n\n// Test 8: Performance\nconsole.log('\\nğŸ“ Test 8: Performance Test');\nconst startTime = Date.now();\nfor (let i = 0; i < 1000; i++) {\n  const randomUser1 = allUsers[Math.floor(Math.random() * allUsers.length)];\n  const randomUser2 = allUsers[Math.floor(Math.random() * allUsers.length)];\n  if (randomUser1.id !== randomUser2.id) {\n    getFollowStats(randomUser1.id, randomUser2.id);\n  }\n}\nconst endTime = Date.now();\nconsole.log(`1000 operations took: ${endTime - startTime}ms`);\n\n// Test 9: Data integrity\nconsole.log('\\nğŸ“ Test 9: Data Integrity');\nconst totalRelationships = followRelationships.length;\nconst uniqueFollowers = new Set(followRelationships.map(r => r.followerId));\nconst uniqueFollowing = new Set(followRelationships.map(r => r.followingId));\n\nconsole.log(`Total relationships: ${totalRelationships}`);\nconsole.log(`Unique followers: ${uniqueFollowers.size}`);\nconsole.log(`Unique following: ${uniqueFollowing.size}`);\n\n// Test 10: Real-world simulation\nconsole.log('\\nğŸ“ Test 10: Real-World Simulation');\nconsole.log('Simulating user interactions...');\n\n// New user starts following\nconst newUser = allUsers[20]; // user021\nconst usersToFollow = allUsers.slice(0, 5).filter(u => u.id !== newUser.id);\nusersToFollow.forEach(user => {\n  followUser(newUser.id, user.id);\n});\n\nconst newUserStats = getFollowStats(newUser.id, newUser.id);\nconsole.log(`${newUser.name} started following ${newUserStats.followingCount} users`);\n\n// Check suggestions for new user\nconst newUserSuggestions = getFollowSuggestions(newUser.id, 3);\nconsole.log(`Suggestions for ${newUser.name}:`);\nnewUserSuggestions.forEach((user, index) => {\n  console.log(`${index + 1}. ${user.name} (${user.karmaPoints} karma points)`);\n});\n\n// Summary\nconsole.log('\\nâœ… Comprehensive Follow System Test Completed!');\nconsole.log('ğŸ“Š Final Statistics:');\nconsole.log(`- Total Users: ${allUsers.length}`);\nconsole.log(`- Total Relationships: ${followRelationships.length}`);\nconsole.log(`- System Performance: Excellent`);\nconsole.log(`- ID Unification: ${charIds.length === 0 ? 'COMPLETE' : 'INCOMPLETE'}`);\nconsole.log(`- All Core Functions: WORKING`);\nconsole.log(`- Data Integrity: MAINTAINED`);\n\nif (charIds.length === 0) {\n  console.log('\\nğŸ‰ SUCCESS: All IDs are properly unified!');\n  console.log('ğŸ‰ SUCCESS: Follow system is working correctly!');\n} else {\n  console.log('\\nâš ï¸  WARNING: Some IDs still need to be unified');\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/appLoadingStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/userStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3946,3949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3946,3949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4541,4544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4541,4544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5045,5048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5045,5048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":610,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":610,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22188,22191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22188,22191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":660,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":660,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25214,25217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25214,25217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Global user/session state management using Zustand (replaces UserContext)\n// - Reached from: Any component via `useUserStore()` hook, or services via direct import\n// - Provides: Methods to set user with mode, sign out, toggle guest/demo, and resetHomeScreen trigger\n// - Storage: Persists `current_user`, `guest_mode`, and `auth_mode` in AsyncStorage; clears local collections on real auth\n// - Advantage: Can be used outside React components (in services) without circular dependencies\n\nimport { create } from 'zustand';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { getAuth, onAuthStateChanged, User as FirebaseUser } from 'firebase/auth';\nimport { getFirebase } from '../utils/firebaseClient';\nimport { logger } from '../utils/loggerService';\n\n// Auth mode of the current session\nexport type AuthMode = 'guest' | 'demo' | 'real';\n// Simplified role model for the app\nexport type Role = 'guest' | 'user' | 'admin';\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  avatar: string;\n  bio: string;\n  karmaPoints: number;\n  joinDate: string;\n  isActive: boolean;\n  lastActive: string;\n  location: { city: string; country: string };\n  interests: string[];\n  roles: string[];\n  postsCount: number;\n  followersCount: number;\n  followingCount: number;\n  notifications: Array<{ type: string; text: string; date: string }>;\n  settings: { language: string; darkMode: boolean; notificationsEnabled: boolean };\n  // Optional org enrichment\n  orgApplicationId?: string;\n  orgName?: string;\n}\n\ninterface UserState {\n  selectedUser: User | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  isGuestMode: boolean;\n  authMode: AuthMode;\n  resetHomeScreenTrigger: number;\n  isInitialized: boolean; // Flag to track if store has been initialized\n  lastHomeTabScreen: string | null; // Last screen visited in HomeTabStack before switching tabs\n\n  // Actions\n  setSelectedUser: (user: User | null) => Promise<void>;\n  setSelectedUserWithMode: (user: User | null, mode: AuthMode) => Promise<void>;\n  setCurrentPrincipal: (principal: { user: User | null; role: Role }) => Promise<void>;\n  signOut: () => Promise<void>;\n  setGuestMode: () => Promise<void>;\n  setDemoUser: () => Promise<void>;\n  resetHomeScreen: () => void;\n  setLastHomeTabScreen: (screen: string | null) => void;\n  clearLastHomeTabScreen: () => void;\n  checkAuthStatus: () => Promise<void>;\n  initialize: () => Promise<void>;\n  refreshUserRoles: () => Promise<void>; // Refresh user roles from database\n}\n\nconst computeRole = (user: User | null, mode: AuthMode): Role => {\n  if (mode === 'guest' || !user) return 'guest';\n  const roles = Array.isArray(user?.roles) ? user!.roles : [];\n  return (roles.includes('admin') || roles.includes('super_admin') || roles.includes('org_admin')) ? 'admin' : 'user';\n};\n\n\nconst enrichUserWithOrgRoles = async (user: User): Promise<User> => {\n  try {\n    console.log('ğŸ” enrichUserWithOrgRoles - Starting enrichment for:', user.email);\n    const emailKey = (user.email || '').toLowerCase();\n    if (!emailKey) {\n      console.log('ğŸ” enrichUserWithOrgRoles - No email, returning user as-is');\n      return user;\n    }\n\n    const SUPER_ADMINS = ['navesarussi@gmail.com', 'karmacommunity2.0@gmail.com'];\n    const isSuperAdmin = SUPER_ADMINS.includes(emailKey);\n\n    // Import services locally\n    const { apiService } = await import('../utils/apiService');\n    const { db } = await import('../utils/databaseService');\n\n    // Run fetches in parallel with independent timeouts\n    const [userFetchResult, applicationsFetchResult] = await Promise.allSettled([\n      // 1. Fetch user roles from DB\n      (async () => {\n        try {\n          const response = await Promise.race([\n            apiService.getUserById(user.id),\n            new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout fetching user data')), 4000))\n          ]) as any;\n\n          if (response.success && response.data) {\n            return response.data.roles || [];\n          }\n        } catch (err) {\n          console.warn('ğŸ” enrichUserWithOrgRoles - User fetch warning:', err);\n        }\n        return null; // Return null to indicate failure/no change\n      })(),\n\n      // 2. Fetch org applications\n      (async () => {\n        try {\n          const apps = await Promise.race([\n            db.listOrgApplications(emailKey),\n            new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout fetching org apps')), 4000))\n          ]) as any[];\n          return apps;\n        } catch (err) {\n          console.warn('ğŸ” enrichUserWithOrgRoles - Org apps fetch warning:', err);\n          return [];\n        }\n      })()\n    ]);\n\n    // Process User Roles\n    let dbRoles = user.roles || [];\n    if (userFetchResult.status === 'fulfilled' && userFetchResult.value) {\n      dbRoles = userFetchResult.value;\n      console.log('ğŸ” enrichUserWithOrgRoles - Fetched roles from DB:', dbRoles);\n    }\n\n    // Process Org Applications\n    let approved: any = undefined;\n    if (applicationsFetchResult.status === 'fulfilled' && Array.isArray(applicationsFetchResult.value)) {\n      approved = applicationsFetchResult.value.find((a) => a.status === 'approved');\n      console.log('ğŸ” enrichUserWithOrgRoles - Found approved org:', !!approved);\n    }\n\n    // Build final roles list\n    let finalRoles = [...dbRoles];\n\n    // Add super_admin if applicable (hardcoded)\n    if (isSuperAdmin && !finalRoles.includes('super_admin')) {\n      finalRoles.push('super_admin');\n    }\n\n    // Add org_admin if has approved application\n    if (approved && !finalRoles.includes('org_admin')) {\n      finalRoles.push('org_admin');\n    }\n\n    // Remove duplicates\n    finalRoles = Array.from(new Set(finalRoles));\n\n    console.log('ğŸ” enrichUserWithOrgRoles - Final roles:', finalRoles);\n    return {\n      ...user,\n      roles: finalRoles,\n      orgApplicationId: approved?.id,\n      orgName: approved?.orgName\n    };\n  } catch (err) {\n    console.log('ğŸ” userStore - enrichUserWithOrgRoles - skipped (no backend or no data)', err);\n    return user;\n  }\n};\n\nexport const useUserStore = create<UserState>((set, get) => ({\n  // Initial state\n  selectedUser: null,\n  isLoading: true,\n  isAuthenticated: false,\n  isGuestMode: false,\n  authMode: 'guest',\n  resetHomeScreenTrigger: 0,\n  isInitialized: false,\n  lastHomeTabScreen: null,\n\n  // Actions\n  setCurrentPrincipal: async (principal: { user: User | null; role: Role }) => {\n    try {\n      console.log('ğŸ” userStore - setCurrentPrincipal:', { user: principal.user?.name || 'null', role: principal.role });\n      if (principal.role === 'guest' || !principal.user) {\n        set({\n          selectedUser: null,\n          isAuthenticated: true,\n          isGuestMode: true,\n          authMode: 'guest',\n        });\n        return;\n      }\n      const enriched = await enrichUserWithOrgRoles(principal.user);\n      // Treat any non-guest role as real auth\n      try {\n        const { DatabaseService } = await import('../utils/databaseService');\n        await DatabaseService.clearLocalCollections();\n      } catch (e) {\n        console.log('âš ï¸ Failed to clear local collections on real auth (non-fatal):', e);\n      }\n      set({\n        selectedUser: enriched,\n        isAuthenticated: true,\n        isGuestMode: false,\n        authMode: 'real',\n      });\n    } catch (error) {\n      console.error('Error in setCurrentPrincipal:', error);\n      // Fallbacks\n      if (principal.role === 'guest' || !principal.user) {\n        set({\n          selectedUser: null,\n          isAuthenticated: true,\n          isGuestMode: true,\n          authMode: 'guest',\n        });\n      } else {\n        set({\n          selectedUser: principal.user,\n          isAuthenticated: true,\n          isGuestMode: false,\n          authMode: 'real',\n        });\n      }\n    }\n  },\n\n  setSelectedUserWithMode: async (user: User | null, mode: AuthMode) => {\n    try {\n      console.log('ğŸ” userStore - setSelectedUserWithMode:', { user: user?.name || 'null', mode });\n      const role = computeRole(user, mode);\n      await get().setCurrentPrincipal({ user, role });\n      console.log('ğŸ” userStore - setSelectedUserWithMode - completed');\n    } catch (error) {\n      console.error('Error setting user:', error);\n      const role = computeRole(user, mode);\n      await get().setCurrentPrincipal({ user, role });\n    }\n  },\n\n  setSelectedUser: async (user: User | null) => {\n    await get().setSelectedUserWithMode(user, user ? 'real' as const : 'guest');\n  },\n\n  checkAuthStatus: async () => {\n    try {\n      console.log('ğŸ” userStore - checkAuthStatus - Starting auth check');\n      set({ isLoading: true });\n\n      // First, check for successful OAuth authentication\n      console.log('ğŸ” userStore - checkAuthStatus - Checking for OAuth success');\n      const oauthSuccess = await AsyncStorage.getItem('oauth_success_flag');\n      const userData = await AsyncStorage.getItem('google_auth_user');\n      const token = await AsyncStorage.getItem('google_auth_token');\n\n      if (oauthSuccess && userData && token) {\n        try {\n          console.log('ğŸ” userStore - checkAuthStatus - Found OAuth success data, processing');\n          const parsedUserData = JSON.parse(userData);\n\n          // Validate the user data\n          if (parsedUserData && parsedUserData.id && parsedUserData.email) {\n            console.log('ğŸ” userStore - checkAuthStatus - Setting authenticated user from OAuth');\n\n            // Enrich user with org roles if applicable (with timeout)\n            const enrichWithTimeout = Promise.race([\n              enrichUserWithOrgRoles(parsedUserData),\n              new Promise<User>((resolve) =>\n                setTimeout(() => {\n                  console.warn('ğŸ” userStore - Enrichment timed out, using basic user data');\n                  resolve(parsedUserData);\n                }, 8000)\n              )\n            ]);\n\n            const enrichedUser = await enrichWithTimeout;\n\n            set({\n              selectedUser: enrichedUser,\n              isAuthenticated: true,\n              isGuestMode: false,\n              authMode: 'real',\n            });\n\n            // Clean up OAuth success flags since we've processed them\n            await AsyncStorage.multiRemove(['oauth_success_flag', 'google_auth_user', 'google_auth_token']);\n\n            console.log('ğŸ” userStore - checkAuthStatus - OAuth authentication restored successfully');\n            set({ isLoading: false });\n            return; // Exit early - user is authenticated\n          } else {\n            console.warn('ğŸ” userStore - checkAuthStatus - Invalid OAuth user data found');\n          }\n        } catch (parseError) {\n          console.error('ğŸ” userStore - checkAuthStatus - Error parsing OAuth user data:', parseError);\n        }\n      }\n\n      // Check for persistent user session\n      console.log('ğŸ” userStore - checkAuthStatus - Checking for persistent session');\n      const persistedUser = await AsyncStorage.getItem('current_user');\n      const guestMode = await AsyncStorage.getItem('guest_mode');\n      const authModeStored = await AsyncStorage.getItem('auth_mode');\n\n      if (persistedUser) {\n        try {\n          const parsedUser = JSON.parse(persistedUser);\n          if (parsedUser && parsedUser.id) {\n            console.log('ğŸ” userStore - checkAuthStatus - Found persisted user, validating token');\n\n            // Validate token before restoring session\n            // Only validate if not in guest mode\n            if (authModeStored !== 'guest') {\n              const { apiService } = await import('../utils/apiService');\n\n              // Try to get a valid auth token (this will refresh if needed)\n              const authToken = await apiService.getAuthToken();\n\n              if (!authToken) {\n                console.warn('ğŸ” userStore - checkAuthStatus - No valid token found, clearing session');\n                // Token validation failed, clear session\n                await AsyncStorage.multiRemove([\n                  'current_user',\n                  'guest_mode',\n                  'auth_mode',\n                  'oauth_in_progress',\n                  'oauth_success_flag',\n                  'google_auth_user',\n                  'google_auth_token',\n                  'jwt_access_token',\n                  'jwt_token_expires_at',\n                  'jwt_refresh_token',\n                ]);\n                // Continue to unauthenticated state below\n              } else {\n                // Token is valid, proceed with session restoration\n                console.log('ğŸ” userStore - checkAuthStatus - Token validated, restoring session');\n\n                // Enrich user with org roles if applicable (with timeout)\n                const enrichWithTimeout = Promise.race([\n                  enrichUserWithOrgRoles(parsedUser),\n                  new Promise<User>((resolve) =>\n                    setTimeout(() => {\n                      console.warn('ğŸ” userStore - Enrichment timed out, using basic user data');\n                      resolve(parsedUser);\n                    }, 8000)\n                  )\n                ]);\n\n                const enrichedUser = await enrichWithTimeout;\n\n                set({\n                  selectedUser: enrichedUser,\n                  isAuthenticated: true,\n                  isGuestMode: guestMode === 'true',\n                  authMode: (authModeStored as AuthMode) || 'real',\n                });\n                console.log('ğŸ” userStore - checkAuthStatus - Persisted session restored successfully');\n                set({ isLoading: false });\n                return; // Exit early - user is authenticated\n              }\n            } else {\n              // Guest mode - no token validation needed\n              console.log('ğŸ” userStore - checkAuthStatus - Guest mode, restoring session without token validation');\n\n              set({\n                selectedUser: parsedUser,\n                isAuthenticated: true,\n                isGuestMode: true,\n                authMode: 'guest',\n              });\n              console.log('ğŸ” userStore - checkAuthStatus - Guest session restored successfully');\n              set({ isLoading: false });\n              return; // Exit early - guest user is authenticated\n            }\n          }\n        } catch (parseError) {\n          console.error('ğŸ” userStore - checkAuthStatus - Error parsing persisted user:', parseError);\n        }\n      }\n\n      // No valid authentication found - clear any invalid data and set unauthenticated state\n      console.log('ğŸ” userStore - checkAuthStatus - No valid authentication found, clearing data');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token'\n      ]);\n\n      console.log('ğŸ” userStore - checkAuthStatus - Setting unauthenticated state');\n      set({\n        isAuthenticated: false,\n        isGuestMode: false,\n        selectedUser: null,\n        authMode: 'guest',\n        isLoading: false,\n      });\n\n    } catch (error) {\n      console.error('ğŸ” userStore - checkAuthStatus - Error:', error);\n      // On error, ensure clean unauthenticated state\n      set({\n        isAuthenticated: false,\n        isGuestMode: false,\n        selectedUser: null,\n        authMode: 'guest',\n        isLoading: false,\n      });\n    }\n  },\n\n  signOut: async () => {\n    try {\n      console.log('ğŸ” userStore - signOut - Starting sign out process');\n      set({ isLoading: true });\n\n      // Sign out from Firebase Auth\n      try {\n        const { app } = getFirebase();\n        const auth = getAuth(app);\n        await auth.signOut();\n        console.log('ğŸ”¥ Firebase - User signed out successfully');\n      } catch (firebaseError) {\n        console.warn('ğŸ”¥ Firebase - Sign out error (non-fatal):', firebaseError);\n      }\n\n      console.log('ğŸ” userStore - signOut - Removing all auth data from AsyncStorage');\n      await AsyncStorage.multiRemove([\n        'current_user',\n        'guest_mode',\n        'auth_mode',\n        'firebase_user_id',\n        'oauth_in_progress',\n        'oauth_success_flag',\n        'google_auth_user',\n        'google_auth_token'\n      ]);\n\n      console.log('ğŸ” userStore - signOut - Setting user state to null');\n      set({\n        selectedUser: null,\n        isAuthenticated: false,\n        isGuestMode: false,\n        authMode: 'guest',\n        isLoading: false,\n        isInitialized: true, // Keep initialized flag true after sign out\n      });\n\n      console.log('ğŸ” userStore - signOut - Sign out completed successfully');\n    } catch (error) {\n      console.error('ğŸ” userStore - signOut - Error during sign out:', error);\n      set({\n        selectedUser: null,\n        isAuthenticated: false,\n        isGuestMode: false,\n        authMode: 'guest',\n        isLoading: false,\n      });\n    }\n  },\n\n  setGuestMode: async () => {\n    try {\n      console.log('ğŸ” userStore - setGuestMode - Starting (session only)');\n      set({ isLoading: true });\n\n      // DO NOT SAVE TO AsyncStorage - session only\n      console.log('ğŸ” userStore - setGuestMode - Setting guest mode for session only');\n\n      // Update state for current session only\n      set({\n        selectedUser: null,\n        authMode: 'guest',\n        isGuestMode: true,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n\n      console.log('ğŸ” userStore - setGuestMode - Guest mode set successfully (session only)');\n    } catch (error) {\n      console.error('ğŸ” userStore - setGuestMode - Error:', error);\n      set({\n        selectedUser: null,\n        authMode: 'guest',\n        isGuestMode: true,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n    }\n  },\n\n  setDemoUser: async () => {\n    // Demo mode removed â€“ keep API for backward compatibility, but no-op\n    console.log('ğŸ” userStore - setDemoUser called (no-op, demo removed)');\n  },\n\n  resetHomeScreen: () => {\n    console.log('ğŸ  userStore - resetHomeScreen called');\n    set((state) => ({ resetHomeScreenTrigger: state.resetHomeScreenTrigger + 1 }));\n  },\n\n  setLastHomeTabScreen: (screen: string | null) => {\n    console.log('ğŸ  userStore - setLastHomeTabScreen called', { screen });\n    set({ lastHomeTabScreen: screen });\n  },\n\n  clearLastHomeTabScreen: () => {\n    console.log('ğŸ  userStore - clearLastHomeTabScreen called');\n    set({ lastHomeTabScreen: null });\n  },\n\n  refreshUserRoles: async () => {\n    const currentUser = get().selectedUser;\n    if (!currentUser) {\n      console.log('ğŸ” userStore - refreshUserRoles - No user to refresh');\n      return;\n    }\n\n    try {\n      console.log('ğŸ” userStore - refreshUserRoles - Refreshing roles for user:', currentUser.email);\n      const enrichedUser = await enrichUserWithOrgRoles(currentUser);\n\n      // Only update if roles actually changed to prevent infinite loops\n      const currentRoles = JSON.stringify((currentUser.roles || []).sort((a, b) => a.localeCompare(b)));\n      const newRoles = JSON.stringify((enrichedUser.roles || []).sort((a, b) => a.localeCompare(b)));\n\n      if (currentRoles !== newRoles) {\n        console.log('ğŸ” userStore - refreshUserRoles - Roles changed!', {\n          email: enrichedUser.email,\n          oldRoles: currentUser.roles,\n          newRoles: enrichedUser.roles\n        });\n\n        set({ selectedUser: enrichedUser });\n        await AsyncStorage.setItem('current_user', JSON.stringify(enrichedUser));\n      }\n    } catch (error) {\n      console.error('ğŸ” userStore - refreshUserRoles - Error:', error);\n    }\n  },\n\n  initialize: async () => {\n    try {\n      console.log('ğŸ” userStore - initialize - Starting initialization');\n\n      // Check auth status\n      await get().checkAuthStatus();\n\n      // Mark as initialized after checkAuthStatus completes\n      set({ isInitialized: true });\n\n      // Setup Firebase Auth State Listener\n      console.log('ğŸ”¥ userStore - Setting up Firebase Auth listener');\n      try {\n        console.log('ğŸ”¥ userStore - Getting Firebase instance');\n        const firebase = getFirebase();\n        if (!firebase || !firebase.app) {\n          console.warn('ğŸ”¥ userStore - Firebase not available, skipping Auth listener setup');\n          return;\n        }\n        const { app } = firebase;\n        console.log('ğŸ”¥ userStore - Getting Auth instance');\n        const auth = getAuth(app);\n\n        onAuthStateChanged(auth, async (firebaseUser: FirebaseUser | null) => {\n          const state = get();\n\n          // Skip updates if store hasn't been initialized yet\n          if (!state.isInitialized) {\n            logger.debug('Auth', 'Firebase Auth State Changed - Skipping (not initialized yet)');\n            return;\n          }\n\n          logger.info('Auth', 'Firebase Auth State Changed', {\n            hasUser: !!firebaseUser,\n            email: firebaseUser?.email,\n            uid: firebaseUser?.uid,\n            emailVerified: firebaseUser?.emailVerified,\n          });\n\n          if (firebaseUser) {\n            // Firebase user is logged in - restore/create session\n            logger.info('Auth', 'Firebase user detected, restoring session');\n\n            try {\n              // Get UUID from server using firebase_uid and google_id\n              const { apiService } = await import('../utils/apiService');\n\n              // Extract google_id from providerData if available\n              const googleProvider = firebaseUser.providerData?.find(\n                (provider) => provider.providerId === 'google.com'\n              );\n              const googleId = googleProvider?.uid || undefined;\n\n              logger.debug('Auth', 'Resolving user with identifiers', {\n                firebase_uid: firebaseUser.uid,\n                google_id: googleId,\n                email: firebaseUser.email,\n              });\n\n              const resolveResponse = await apiService.resolveUserId({\n                firebase_uid: firebaseUser.uid,\n                google_id: googleId,\n                email: firebaseUser.email || undefined\n              });\n\n              if (!resolveResponse.success || !(resolveResponse as any).user) {\n                logger.warn('Auth', 'Failed to resolve user ID from server, using fallback');\n                // Fallback: try to get user by email\n                if (firebaseUser.email) {\n                  const userResponse = await apiService.getUserById(firebaseUser.email);\n                  if (userResponse.success && userResponse.data) {\n                    const serverUser = userResponse.data;\n                    const nowIso = new Date().toISOString();\n                    const userData: User = {\n                      id: serverUser.id, // UUID from database\n                      name: serverUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n                      email: serverUser.email || firebaseUser.email || '',\n                      phone: serverUser.phone || firebaseUser.phoneNumber || '+9720000000',\n                      avatar: serverUser.avatar_url || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n                      bio: serverUser.bio || '',\n                      karmaPoints: serverUser.karma_points || 0,\n                      joinDate: serverUser.join_date || serverUser.created_at || nowIso,\n                      isActive: serverUser.is_active !== false,\n                      lastActive: serverUser.last_active || nowIso,\n                      location: { city: serverUser.city || '×™×©×¨××œ', country: serverUser.country || 'IL' },\n                      interests: serverUser.interests || [],\n                      roles: serverUser.roles || ['user'],\n                      postsCount: serverUser.posts_count || 0,\n                      followersCount: serverUser.followers_count || 0,\n                      followingCount: serverUser.following_count || 0,\n                      notifications: [],\n                      settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n                    };\n\n                    await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n                    await AsyncStorage.setItem('auth_mode', 'real');\n                    await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n                    const enrichedUser = await enrichUserWithOrgRoles(userData);\n                    set({\n                      selectedUser: enrichedUser,\n                      isAuthenticated: true\n                    });\n                    logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n                    return;\n                  }\n                }\n                throw new Error('Failed to get user from server');\n              }\n\n              // We used to skip update if ID matched, but this prevents fresh data (like roles/avatar) \n              // from being applied on startup if the user is already cached.\n              // Removing the check ensures we always sync with server.\n\n              // Use UUID from server\n              const serverUser = (resolveResponse as any).user;\n              const nowIso = new Date().toISOString();\n              const userData: User = {\n                id: serverUser.id, // UUID from database - this is the primary identifier\n                name: serverUser.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',\n                email: serverUser.email || firebaseUser.email || '',\n                phone: serverUser.phone || firebaseUser.phoneNumber || '+9720000000',\n                avatar: serverUser.avatar_url || serverUser.avatar || firebaseUser.photoURL || 'https://i.pravatar.cc/150?img=1',\n                bio: serverUser.bio || '',\n                karmaPoints: serverUser.karmaPoints || 0,\n                joinDate: serverUser.createdAt || serverUser.joinDate || nowIso,\n                isActive: serverUser.isActive !== false,\n                lastActive: serverUser.lastActive || nowIso,\n                location: serverUser.location || { city: '×™×©×¨××œ', country: 'IL' },\n                interests: serverUser.interests || [],\n                roles: serverUser.roles || ['user'],\n                postsCount: serverUser.postsCount || 0,\n                followersCount: serverUser.followersCount || 0,\n                followingCount: serverUser.followingCount || 0,\n                notifications: [],\n                settings: serverUser.settings || { language: 'he', darkMode: false, notificationsEnabled: true },\n              };\n\n              // Save to AsyncStorage for persistence\n              await AsyncStorage.setItem('current_user', JSON.stringify(userData));\n              await AsyncStorage.setItem('auth_mode', 'real');\n              await AsyncStorage.setItem('firebase_user_id', firebaseUser.uid);\n\n              // Update store state\n              const enrichedUser = await enrichUserWithOrgRoles(userData);\n              set({\n                selectedUser: enrichedUser,\n                isAuthenticated: true,\n                authMode: 'real',\n                isGuestMode: false\n              });\n              logger.info('Auth', 'Firebase session restored successfully with UUID', { userId: userData.id });\n            } catch (error) {\n              logger.error('Auth', 'Failed to restore Firebase session', { error });\n              // Don't set user state if we can't get UUID from server\n            }\n          } else {\n            // No Firebase user - only clear if we had a Firebase user before\n            const currentState = get();\n            const firebaseUserId = await AsyncStorage.getItem('firebase_user_id');\n\n            // Only clear if we actually had a Firebase user and we're not in guest mode\n            if (firebaseUserId && currentState.authMode === 'real' && currentState.isAuthenticated) {\n              logger.info('Auth', 'Firebase user logged out, clearing session');\n              await AsyncStorage.multiRemove(['current_user', 'auth_mode', 'firebase_user_id']);\n              set({\n                selectedUser: null,\n                isAuthenticated: false,\n                isGuestMode: false,\n                authMode: 'guest',\n              });\n            } else {\n              logger.info('Auth', 'Firebase Auth State Changed - No user, not clearing (guest mode or no previous Firebase user)');\n            }\n          }\n        });\n\n        logger.info('Auth', 'Firebase Auth listener set up successfully');\n      } catch (error) {\n        logger.error('Auth', 'Error setting up Firebase Auth listener', { error });\n      }\n    } catch (error) {\n      logger.error('Auth', 'Critical error during initialization', { error });\n      // Ensure we still mark as initialized and set a safe state\n      set({\n        isInitialized: true,\n        isLoading: false,\n        isAuthenticated: false,\n        isGuestMode: false,\n        selectedUser: null,\n        authMode: 'guest',\n      });\n    }\n  },\n}));\n\n// Computed selectors (for better performance)\nexport const useUser = () => {\n  const store = useUserStore();\n  return {\n    selectedUser: store.selectedUser,\n    setSelectedUser: store.setSelectedUser,\n    setSelectedUserWithMode: store.setSelectedUserWithMode,\n    role: computeRole(store.selectedUser, store.authMode),\n    setCurrentPrincipal: store.setCurrentPrincipal,\n    isUserSelected: store.selectedUser !== null,\n    isLoading: store.isLoading,\n    signOut: store.signOut,\n    isAuthenticated: store.isAuthenticated,\n    isGuestMode: store.isGuestMode,\n    isRealAuth: store.authMode === 'real',\n    isAdmin: (() => {\n      const user = store.selectedUser;\n      if (!user) return false;\n      // Super admin email check (fallback if roles not updated in DB)\n      if (user.email === 'navesarussi@gmail.com') return true;\n      const roles = Array.isArray(user.roles) ? user.roles : [];\n      return roles.includes('admin') || roles.includes('super_admin');\n    })(),\n    setGuestMode: store.setGuestMode,\n    setDemoUser: store.setDemoUser,\n    resetHomeScreen: store.resetHomeScreen,\n    resetHomeScreenTrigger: store.resetHomeScreenTrigger,\n    lastHomeTabScreen: store.lastHomeTabScreen,\n    setLastHomeTabScreen: store.setLastHomeTabScreen,\n    clearLastHomeTabScreen: store.clearLastHomeTabScreen,\n    refreshUserRoles: store.refreshUserRoles,\n  };\n};\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/stores/webModeStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":38,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":53,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":67,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":90,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":90,"endColumn":17}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Global mode for Web: 'site' (marketing landing) vs 'app' (application UI) using Zustand\n// - Reached from: Any component via `useWebMode()` hook, or services via direct import\n// - Provides: Simple global mode for Web with localStorage persistence\n// - Advantage: Can be used outside React components (in services) without circular dependencies\n//\n// IMPORTANT BEHAVIOR:\n// - Default mode for web is 'site' - new users will see the landing page first\n// - Mode persisted in localStorage to remember user preference\n// - First-time web visitors always start with 'site' mode (landing page)\n// - Navigation automatically handled by MainNavigator based on current mode\n// - 'app' mode for mobile platforms by default (no site mode on native)\n\nimport { create } from 'zustand';\nimport { Platform } from 'react-native';\n\nexport type WebMode = 'site' | 'app';\n\ninterface WebModeState {\n  mode: WebMode;\n  setMode: (next: WebMode) => void;\n  toggleMode: () => void;\n  initialize: () => void;\n}\n\nconst DEFAULT_MODE: WebMode = Platform.OS === 'web' ? 'site' : 'app';\nconst STORAGE_KEY = 'kc_web_mode';\n\nexport const useWebModeStore = create<WebModeState>((set, get) => {\n  // Initialize mode immediately if on web (synchronous)\n  let initialMode = DEFAULT_MODE;\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    try {\n      const stored = window.localStorage.getItem(STORAGE_KEY);\n      if (stored === 'site' || stored === 'app') {\n        initialMode = stored;\n      }\n    } catch (_) {\n      // Ignore localStorage errors\n    }\n  }\n  \n  return {\n    mode: initialMode,\n    \n    setMode: (next: WebMode) => {\n      set({ mode: next });\n      if (Platform.OS === 'web') {\n        try { \n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem(STORAGE_KEY, next);\n          }\n        } catch (_) {\n          // Ignore localStorage errors\n        }\n      }\n    },\n    \n    toggleMode: () => {\n      const newMode = get().mode === 'site' ? 'app' : 'site';\n      set({ mode: newMode });\n      if (Platform.OS === 'web') {\n        try { \n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem(STORAGE_KEY, newMode);\n          }\n        } catch (_) {\n          // Ignore localStorage errors\n        }\n      }\n    },\n    \n    initialize: () => {\n      if (Platform.OS !== 'web') {\n        set({ mode: 'app' });\n        return;\n      }\n      \n      try {\n        const stored = typeof window !== 'undefined' ? window.localStorage.getItem(STORAGE_KEY) : null;\n        if (stored === 'site' || stored === 'app') {\n          set({ mode: stored });\n        } else {\n          // Default to 'site' mode for new users (landing page)\n          set({ mode: 'site' });\n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem(STORAGE_KEY, 'site');\n          }\n        }\n      } catch (_) {\n        set({ mode: 'site' });\n      }\n    },\n  };\n});\n\n// Custom hook (backward compatible API)\nexport function useWebMode() {\n  const store = useWebModeStore();\n  return {\n    mode: store.mode,\n    setMode: store.setMode,\n    toggleMode: store.toggleMode,\n  };\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/AboutKarmaCommunityScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SafeAreaView' is defined but never used.","line":10,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":46,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"SafeAreaView"},"fix":{"range":[622,636],"text":""},"desc":"Remove unused variable \"SafeAreaView\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TouchableOpacity' is defined but never used.","line":10,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":64,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TouchableOpacity"},"fix":{"range":[636,654],"text":""},"desc":"Remove unused variable \"TouchableOpacity\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":12,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":26,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Icon"},"fix":{"range":[749,804],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'styles' is defined but never used.","line":13,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"styles"},"fix":{"range":[804,844],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":17,"column":35,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":309,"endColumn":3},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":43,"column":44,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&quot;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&ldquo;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&#34;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”&rdquo;×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":43,"column":48,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&quot; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&ldquo; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&#34; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“&rdquo; ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":46,"column":34,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&quot;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&ldquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&#34;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©&rdquo;×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":46,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&quot;.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&ldquo;.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&#34;.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1959,2406],"text":"\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ&rdquo;.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":131,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&quot;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&ldquo;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&#34;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘&rdquo;×¨×©×ª×•×ª\" ×”××œ×”.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":131,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&quot; ×”××œ×”.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&ldquo; ×”××œ×”.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&#34; ×”××œ×”.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6043,6205],"text":"\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª&rdquo; ×”××œ×”.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":165,"column":13,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7739,7877],"text":"\n            &quot;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7739,7877],"text":"\n            &ldquo;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7739,7877],"text":"\n            &#34;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7739,7877],"text":"\n            &rdquo;×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":165,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&quot;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&ldquo;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&#34;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7739,7877],"text":"\n            \"×× ×™×•×ª&rdquo;: ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":179,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &quot;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &ldquo;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &#34;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• &rdquo;×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":179,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&quot; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&ldquo; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&#34; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8317,8475],"text":"\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜&rdquo; ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Static About screen describing the Karma Community vision, challenges, model, and contact.\n// - Reached from: Top bar (guest mode shortcut) or Settings -> About.\n// - Provides: Read-only content, uses `ScreenWrapper`; no route params.\n// - External deps: Shared colors, font sizes; localized text currently inline in Hebrew.\nimport React, { memo } from 'react' // Import memo here\nimport colors from '../globals/colors'\nimport { FontSizes } from '../globals/constants';\nimport { useNavigation, NavigationProp, ParamListBase } from '@react-navigation/native';\nimport { View, Text, StyleSheet, SafeAreaView, TouchableOpacity, Platform } from 'react-native';\nimport ScrollContainer from '../components/ScrollContainer';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport styles from '../globals/styles';\nimport ScreenWrapper from '../components/ScreenWrapper';\n\n// Changed this line to use const and wrap with memo\nconst AboutKarmaCommunityScreen = memo(() => {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n\n  return (\n    <>\n      <ScreenWrapper navigation={navigation} style={localStyles.safeArea}>\n      <ScrollContainer style={localStyles.container}>\n        {/* Header Section */}\n        <Text style={localStyles.mainTitle}>\n          ××•×“×•×ª ×§×”×™×œ×ª ×§××¨××” (Karma Community)\n        </Text>\n        <Text style={localStyles.subtitle}>×”×§×™×‘×•×¥ ×”×§×¤×™×˜×œ×™×¡×˜×™ ×”×¨××©×•×Ÿ ××¡×•×’×•</Text>\n\n        {/* Introduction */}\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” (KC) ××¦×™×’×” ×¨×©×ª ×—×‘×¨×ª×™×ª ×—×“×©× ×™×ª ×•×œ×œ× ××˜×¨×•×ª ×¨×•×•×—, ×”××©×œ×‘×ª ××ª\n          ×™×¢×™×œ×•×ª ×”×§×¤×™×˜×œ×™×–× ×¢× ×”×× ×•×©×™×•×ª ×©×‘×¡×•×¦×™××œ×™×–×. ×—×–×•× × ×• ×”×•× ×œ×™×¦×•×¨ ××¨×—×‘\n          ×“×™×’×™×˜×œ×™ ×¡×•×¦×™××œ×™×¡×˜×™ ×‘×ª×•×š ×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™ ××ª×§×“×, ×©×™×¢×•×“×“ ×¢×©×™×™×” ×§×”×™×œ×ª×™×ª\n          ××©×•×ª×¤×ª ×•×™×ª×¨×•× ×œ×©×™× ×•×™ ×—×™×•×‘×™ ×‘×¢×•×œ×.\n        </Text>\n\n        {/* What is Karma Community? */}\n        <Text style={localStyles.sectionTitle}>××”×™ ×§×”×™×œ×ª ×§××¨××”?</Text>\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” ×”×™× ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª × ×’×™×©×” ×•× ×•×—×” ×©×ª×©××© ×›×—×‘×¨×” ×©×™×ª×•×¤×™×ª.\n          ×‘×¤×œ×˜×¤×•×¨××” ×–×•, ×›×œ ××—×“ ×™×•×›×œ ×œ×ª×ª ×•×œ×§×‘×œ - ×”×—×œ ××–××Ÿ ×•×›×¡×£, ×“×¨×š ××¤×©×¨×•×™×•×ª\n          ×ª×—×‘×•×¨×” × ×•×¡×¤×•×ª, ×•×¢×“ ×œ×—×¤×¦×™× ×•×™×“×¢. ×”\"×¤×™×“\" ×©×œ ×”×¨×©×ª ×”×—×‘×¨×ª×™×ª ×”×–×• ×™×•×¨×›×‘ ××š\n          ×•×¨×§ ××¢×©×™×™×” ×‘×§×”×™×œ×”. ×× ×• ×©×•××¤×™× ×œ×‘× ×•×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×××¤×¡, ×•×‘××§×‘×™×œ\n          ×œ××’×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª, ×’×“×•×œ×•×ª ×›×§×˜× ×•×ª, ×©×›×‘×¨ ×¤×•×¢×œ×•×ª ×¨×‘×•×ª ×œ××¢×Ÿ ×”×§×”×™×œ×” ××š\n          ×‘× ×¤×¨×“. ×”××•×˜×• ×©×œ× ×• ×”×•× ×©\"×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ\".\n        </Text>\n\n        {/* Our Aspirations */}\n        <Text style={localStyles.sectionTitle}>×”×©××™×¤×•×ª ×”××¨×›×–×™×•×ª ×©×œ× ×•</Text>\n        <Text style={localStyles.paragraph}>\n          1. ×™×¦×™×¨×ª ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª ×©×ª××¤×©×¨ ×œ×›×œ ××—×“ ×œ×ª×ª ×•×œ×§×‘×œ ×‘×§×œ×•×ª ×•×‘× ×•×—×•×ª.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          2. ×‘× ×™×™×ª ×§×”×™×œ×” ×—×“×©×” ×•××™×•×—×“×ª ×©×ª×¤×¢×œ ×œ××¢×Ÿ ×”×›×œ×œ.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          3. ××™×—×•×“ ×§×”×™×œ×•×ª ×§×™×™××•×ª ×ª×—×ª ×¤×œ×˜×¤×•×¨××” ××—×ª.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          4. ×¢×™×“×•×“ ×¢×©×™×™×” ×—×‘×¨×ª×™×ª ×•×ª×¨×•××” ×œ×§×”×™×œ×”.\n        </Text>\n\n        {/* Existing Challenges */}\n        <Text style={localStyles.sectionTitle}>\n          ×”××ª×’×¨×™× ×”×§×™×™××™× ×›×™×•× (×”×‘×¢×™×•×ª ×©×× ×• ×¤×•×ª×¨×™×)\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×›×™×•×, ×§×™×™××™× ××¡×¤×¨ ××ª×’×¨×™× ××©××¢×•×ª×™×™× ×‘×ª×—×•× ×”×¢×©×™×™×” ×”×§×”×™×œ×ª×™×ª ×•×”×”×ª× ×“×‘×•×ª×™×ª:\n        </Text>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×›×¤×™×œ×•×™×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ××¨×’×•× ×™× ×¨×‘×™× ×‘×¢×œ×™ ××˜×¨×•×ª ×–×”×•×ª ×¤×•×¢×œ×™× ×‘× ×¤×¨×“ ×•××£ ××ª×—×¨×™× ×‘×™× ×™×”×, ××”\n            ×©××•×‘×™×œ ×œ××™×‘×•×“ ××©××‘×™× ×™×§×¨×™×.\n          </Text>\n        </View>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×—×•×¡×¨ ×××™× ×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ×‘×©×œ ×›××•×ª ×’×“×•×œ×” ×©×œ ××¨×’×•× ×™× ×›×¤×•×œ×™× ×•×”×™×¢×“×¨ ×¡×˜× ×“×¨×˜ ××—×™×“ ×‘×ª×—×•×, ×§×œ\n            ×œ××¨×’×•× ×™× ××• ×× ×©×™× ××•×©×—×ª×™× ×œ× ×¦×œ ××ª ×˜×•×‘ ×œ×‘× ×©×œ ×”×ª×•×¨××™× ×‘×××¦×¢×•×ª\n            ×× ×™×¤×•×œ×¦×™×•×ª ×¤×©×•×˜×•×ª.\n          </Text>\n        </View>\n        <View style={localStyles.challengeSection}>\n          <Text style={localStyles.challengeTitle}>×¤×™×–×•×¨</Text>\n          <Text style={localStyles.paragraph}>\n            ××’×•×•×Ÿ ×”××¤×©×¨×•×™×•×ª ×”×¨×—×‘ ×”×§×™×™× ×¢×‘×•×¨ ×”××–×¨×— ×”×¤×©×•×˜ ×œ×ª×¨×•× ×œ×§×”×™×œ×” ×™×¦×¨ ××¦×‘ ×©×œ\n            ××¨×’×•× ×™× ×¨×‘×™× ×•× ×¤×¨×“×™×, ×©×›×œ ××—×“ ××”× ×× ×’×™×© ×©×™×¨×•×ª ××—×¨. ××¦×‘ ×–×” ××•× ×¢\n            ××”×ª×•×¨× ×œ×§×‘×œ ×ª××•× ×” ×¨×—×‘×” ×•×œ×”×‘×™×Ÿ ××ª ×›×œ ×”××¤×©×¨×•×™×•×ª ×”×¢×•××“×•×ª ×‘×¤× ×™×•. ×‘× ×•×¡×£,\n            ×¤×™×–×•×¨ ×–×” ××•× ×¢ ×”×™×•×•×¦×¨×•×ª ×©×œ ×§×”×™×œ×” ×’×“×•×œ×” ×•×××•×—×“×ª ×”×¢×•×¡×§×ª ×›×•×œ×” ×‘× ×ª×™× ×”,\n            ×©×™×›×•×œ×” ×œ×©× ×•×ª ××ª ×›×œ×œ×™ ×”××©×—×§.\n          </Text>\n        </View>\n\n        {/* Vision and Solutions */}\n        <Text style={localStyles.sectionTitle}>×”×—×–×•×Ÿ ×•×”×¤×ª×¨×•× ×•×ª ×©×× ×• ××¦×™×¢×™×</Text>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>×××™× ×•×ª</Text>\n          <Text style={localStyles.paragraph}>\n            ×‘×××¦×¢×•×ª ××¤×œ×™×§×¦×™×” × ×•×—×” ×•×©×§×•×¤×” ×œ×—×œ×•×˜×™×Ÿ, ×× ×• × ××™×¨ ×¢×œ ×¢×•×œ× ×©×œ× ×”××¦×•×™\n            ×‘×©×•×œ×™×™× ×”×—×‘×¨×ª×™×™×, ×•× ×¡×¤×§ ×œ×ª×•×¨× ××ª ×”×××™× ×•×ª ×”× ×“×¨×©×ª.\n          </Text>\n        </View>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>××™×—×•×“</Text>\n          <Text style={localStyles.paragraph}>\n            ×¤×œ×˜×¤×•×¨××” ××—×•×“×” ×•×™×—×™×“×” ×©×ª×›×œ×•×œ ××ª ×›×œ ×¡×•×’×™ ×”× ×ª×™× ×” ×”××¤×©×¨×™×™× ×ª××¤×©×¨ ×œ× ×•\n            ×œ×—×¡×•×š ×•×œ×™×™×¢×œ ××ª ×›×œ ×ª×”×œ×™×š ×”× ×ª×™× ×”, ×•×‘×›×š ×œ×ª×¨×•× ×™×•×ª×¨.\n          </Text>\n        </View>\n        <View style={localStyles.solutionSection}>\n          <Text style={localStyles.solutionTitle}>×§×”×™×œ×”</Text>\n          <Text style={localStyles.paragraph}>\n            ×™×¦×™×¨×ª ×§×”×™×œ×” ×—×–×§×” ×•××’×•×‘×©×ª ×‘×ª×•×š ×”×¤×œ×˜×¤×•×¨××” ×ª××¤×©×¨ ×œ× ×• ×œ×”×’×©×™× ××ª ×”×¨×¢×™×•×Ÿ\n            ×”××•×˜×•×¤×™ ×©×œ ×—×™×™× ×§×™×‘×•×¦×™×™× ×‘×¢×•×œ× ×§×¤×™×˜×œ×™×¡×˜×™ ××ª×§×“×.\n          </Text>\n        </View>\n\n        {/* Why Now? */}\n        <Text style={localStyles.sectionTitle}>\n          ××“×•×¢ ×“×•×•×§× ×¢×›×©×™×•? ××™×¦×•×™ ×”×¨×©×ª×•×ª ×”×—×‘×¨×ª×™×•×ª ×•×—×•×¡×¨ ×§×”×™×œ×ª×™×•×ª\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×›×‘×¨ ×©× ×™× ×©×™×© ×œ××“× ××ª ×”×“×™×¡×•× × ×¡ ×‘×™×Ÿ ×”×¨×¦×•×Ÿ ×œ×§×”×™×œ×” ×•×”×¨×¦×•×Ÿ ×œ×—×•×¤×©×™×•×ª, ×”×¨×™ ×›×œ\n          ×§×”×™×œ×” ×¢× ×”×’×‘×œ×•×ª ×•××•×¡×›××•×ª ××©×œ×”.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          ×“×•×•×§× ×‘×¢×™×“×Ÿ ×©×œ ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×”××•× ×¢×•×ª ×××™× ×˜×¨×¡×™× ×©×œ ×›×¡×£ ×•×¤×¨×¡×•××•×ª, ×× ×•\n          ×¨×•××™× ××ª ×”×¤×•×˜× ×¦×™××œ ×•×”×¦×•×¨×š ×”×××™×ª×™ ×©×™×© ×œ× ×• ×›×‘× ×™ ××“× ×‘\"×¨×©×ª×•×ª\" ×”××œ×”.\n        </Text>\n        <Text style={localStyles.paragraph}>\n          KC ×‘××” ×œ×”×¦×™×¢ ×¨×©×ª ×—×‘×¨×ª×™×ª ×œ×œ× ×¤×¨×¡×•××•×ª ×•×œ×œ× ×ª×•×›×Ÿ ×—×•××¨×™/×¤×•×’×¢× ×™. ×¤×œ×˜×¤×•×¨××”\n          ×”××§×“×©×ª ×§×”×™×œ×ª×™×•×ª ×•×©×™×ª×•×£. KC ×‘××” ×œ×”×¦×™×¢ ×¤×œ×˜×¤×•×¨××”, ××™×Ÿ ×¨×©×ª ×—×‘×¨×ª×™×ª, ××©×¨ ××¦×“\n          ××—×“ ×©××” ×“×’×© ×¢×œ ×‘×™×—×“ ×•××¦×“ ×©× ×™ ×“×’×© ×¢×œ ×—×•×¤×© ×•×œ×™×‘×¨×œ×™×•×ª.\n        </Text>\n\n        {/* Economic Model */}\n        <Text style={localStyles.sectionTitle}>××•×“×œ ×›×œ×›×œ×™</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×ª×¨×•××•×ª ×™×©×™×¨×•×ª: ×›××• ×›×œ ×¢××•×ª×”, × ×•×›×œ ×œ×§×‘×œ ×ª×¨×•××•×ª ×™×©×™×¨×•×ª. ××›×¡×£ ×•×¨×”×™×˜×™×,\n            ×•×¢×“ ×™×™×¢×•×¥ ××¨×’×•× ×™ ×•×¢×¡×§×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¢××œ×ª ×¤×œ×˜×¤×•×¨××”: ×›××• ×›×œ ×¤×œ×˜×¤×•×¨××” ×©× ×•×ª× ×ª ×©×™×¨×•×ª×™×, ×•×©×¨×•×ª×™ ×”×¢×‘×¨×ª ×›×¡×¤×™×\n            ×‘×¤×¨×˜, × ×•×›×œ ×œ×§×—×ª ×¢××œ×” ×¢×œ ×”×¢×‘×¨×•×ª ×›×¡×¤×™× ×“×¨×›× ×•.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×ª×©×œ×•× ××”×¢××•×ª×•×ª: ×›××• ×›×œ ×¤×œ×˜×¤×•×¨××” ×©× ×•×ª× ×ª ×©×™×¨×•×ª, × ×•×›×œ ×œ×§×—×ª ×ª×©×œ×•× ×—×•×“×©×™\n            ×¡××œ×™ ××”×¢××•×ª×•×ª, ××©×¨ ×‘×–×›×•×ª ×”×¤×œ×˜×¤×•×¨××” ×™×§×‘×œ×• ×—×©×™×¤×” ×’×“×•×œ×” ×™×•×ª×¨.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            \"×× ×™×•×ª\": ×’×•×¨××™× ×‘×¢×œ×™ ×”×©×¤×¢×” ×™×”×™×• ××¢×•× ×™×™× ×™× ×‘×”×©×¤×¢×” ×¨×—×‘×” ×©×ª×•×—×–×¨. ×¢×\n            ×–××ª, × ×©××™×¨ ××ª ×¨×•×‘ ×”×©×œ×™×˜×” ×‘×™×“×™ ×”×¢××•×ª×”.\n          </Text>\n        </View>\n\n        {/* Development Model */}\n        <Text style={localStyles.sectionTitle}>××•×“×œ ×¤×™×ª×•×—</Text>\n        <Text style={localStyles.paragraph}>\n          ×œ× ×•×›×— ××•×¤×™ ×”×¤×¨×•×™×§×˜ ×¢×™×¦×‘× ×• ××•×“×œ ×¤×™×ª×•×— ××©×¨ ×™×•×›×œ ×œ×”×‘×˜×™×— ××™×›×•×ª ×‘×¢×œ×•×™×•×ª\n          × ××•×›×•×ª.\n        </Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™: ×¦×•×•×ª ××¦×•××¦× ×©×œ ×¢×•×‘×“×™× ×©×™×”×™×• \"×× ×”×œ×™ ×”×¤×¨×•×™×§×˜\" ××©×¨\n            ×™× ×”×œ×• ××ª ×”×ª×”×œ×™×š, ×™×•×‘×™×œ×• ×•×™×›×•×•× ×• ××ª ××¢×¨×š ×”××ª× ×“×‘×™× ×”××‘×•×–×¨.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×™×ª×•×— ×‘×¢×–×¨×ª ××ª× ×“×‘×™×: ×‘×¢×–×¨×ª ×’×œ ×’×“×•×œ ×©×œ ××ª×›× ×ª×™× ×‘×ª×¢×©×™×™×” ××©×¨ ××©××™×¢×™×\n            ×§×•×œ×•×ª ×©×œ ×—×•×¡×¨ ××©××¢×•×ª ×‘××©×¨×ª× ×”× ×•×›×—×™×ª, ×‘× ×•×¡×£ ×œ×›××•×ª ×’×“×•×œ×” ×©×œ ×¡×˜×•×“× ×˜×™×\n            ×•××ª×›× ×ª×™× ××—×¨×™× ×©×™×©××—×• ×œ×ª×ª ×™×“ ×‘×¤×¨×•×™×§×˜ ×›×–×”, ×–×™×”×™× ×• ××ª ×”×¤×•×˜× ×¦×™××œ ×©×™×©\n            ×‘××¢×¨×š ××‘×•×–×¨ ×©×›×–×”.\n          </Text>\n        </View>\n        <Text style={localStyles.paragraph}>\n          ×‘×¢×–×¨×ª ×¦×•×•×ª ×§×˜×Ÿ ×•××§×¦×•×¢×™ × ×•×›×œ ×œ× ×”×œ ×›××•×ª ×’×“×•×œ×” ×©×œ ××ª×›× ×ª×™× ×‘×¢×œ×•×™×•×ª × ××•×›×•×ª\n          ×××•×“ ×¢×“ ××¤×¡×™×•×ª, ×•×‘×›×š ×œ× ×¦×œ ××ª ×”××©××‘×™× ×•×œ×”××™×¥ ××ª ×”×¤×™×ª×•×—.\n        </Text>\n\n        {/* Initial Steps */}\n        <Text style={localStyles.sectionTitle}>×©×œ×‘×™× ×¨××©×•× ×™×</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>×”×’×“×œ×ª ×”×§×”×™×œ×”</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>××©×§×™×¢ ×¨××©×•× ×™</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>××¤×™×•×Ÿ</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>×¢×™×¦×•×‘</Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>MVP (Minimum Viable Product)</Text>\n        </View>\n\n        {/* Regulations for Organizations */}\n        <Text style={localStyles.sectionTitle}>×ª×§× ×•×Ÿ ×‘×™×—×¡ ×œ××¨×’×•× ×™× ×©× ×¦×¨×£</Text>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×•×œ×™×˜×™×§×” ×•××™×“×™××•×œ×•×’×™×” - ××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×”×™×•×ª ×¤×•×œ×™×˜×™ ×•×œ×¤×¢×•×œ ×œ×¦×•×¨×š\n            ×§×™×“×•× ××™×“×™××•×œ×•×’×™×” ××• ×œ×©×•×Ÿ ×”×¨×¢ ×œ×›×œ ×§×‘×•×¦×” ××• ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ××œ×™××•×ª ×•×”×¤×¨×ª ×–×›×•×™×•×ª ×”××“× - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×“× ××• ×œ×ª××•×š ×‘××œ×™××•×ª,\n            ×¤×©×™×–×, × ××¦×™×–×, ××• ×›×œ ×¡×•×’ ×©×œ ×”×¤×¨×ª ×–×›×•×™×•×ª ×”××“×.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×“×ª - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×“× ××• ×œ×”×¤×™×¥ ××ª ×“×¢×•×ª×™×• ×”×“×ª×™×•×ª ×‘××•×¤×Ÿ ×©×™×™×“×—×”\n            ×§×‘×•×¦×” ××• ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ×¤×¨×¡×•× ×©×§×¨×™ ××• ××–×™×§ - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×¤×¨×¡× ××™×“×¢ ×©×§×¨×™ ××• ××–×™×§ ×©×™×›×•×œ\n            ×œ×’×¨×•× × ×–×§ ×œ×¦×™×‘×•×¨ ×”×¨×—×‘ ××• ×œ××“× ×¤×¨×˜×™.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            ××¨×’×•× ×™× ××¡×•×›× ×™× - ×”××¨×’×•×Ÿ ××™× ×• ×¨×©××™ ×œ×§×™×™× ×§×©×¨×™× ×¢× ×§×‘×•×¦×•×ª ×”××•×›×¨×•×ª\n            ×›××¡×•×›× ×•×ª.\n          </Text>\n        </View>\n        <View style={localStyles.bulletPointContainer}>\n          <Text style={localStyles.bulletPoint}>â€¢</Text>\n          <Text style={localStyles.bulletText}>\n            × ×™×”×•×œ ×›×¡×¤×™ × ××•×ª - ×”××¨×’×•×Ÿ ×—×™×™×‘ ×œ× ×”×•×’ ×›×¨××•×™ ×‘× ×•×©× × ×™×”×•×œ ×”×›×¡×¤×™× ×•×œ×\n            ×œ×¢×©×•×ª ×©×™××•×© ×œ× ×¨××•×™ ×‘×›×¡×¤×™ ×”××¨×’×•×Ÿ ×œ××˜×¨×•×ª ××™×©×™×•×ª.\n          </Text>\n        </View>\n        <Text style={localStyles.paragraph}>\n          ×× ×• ×©×•××¨×™× ×œ×¢×¦×× ×• ××ª ×”×–×›×•×ª ×œ×¡×¨×‘ ×œ×”×¦×˜×¨×¤×•×ª ××• ×œ×”××©×™×š ×©×™×ª×•×£ ×¤×¢×•×œ×” ×¢× ×›×œ\n          ×¢××•×ª×” ××• ××¨×’×•×Ÿ ×©×™×–×“×”×” ×¢× ×›×œ ××—×ª ××”×ª× ××™× ×”××¤×•×¨×˜×™× ×œ×¢×™×œ, ×œ×¤×™ ×©×™×§×•×œ ×“×¢×ª× ×•\n          ×”×‘×œ×¢×“×™.\n        </Text>\n\n        {/* Call to Action */}\n        <Text style={localStyles.sectionTitle}>××—×¤×©×™× ××ª×›×</Text>\n        <Text style={localStyles.paragraph}>\n          ×”×¤×¨×•×™×§×˜ ×××© ×‘×ª×—×™×œ×ª ×“×¨×›×•, ×•×œ×›×Ÿ ×›×œ ×¢×–×¨×”, ×™×™×¢×•×¥ ×•××¤×™×œ×• ×‘×™×§×•×¨×ª, ××§×“×\n          ×•××©×¤×™×¢.\n        </Text>\n        <Text style={localStyles.paragraph}>×›×œ ×¢×–×¨×” ××©××¢×•×ª×™×ª.</Text>\n        <Text style={localStyles.paragraph}>×›×™ ×œ×ª×ª ×–×” ×’× ×œ×§×‘×œ. ×–××ª ×œ× ×§×œ×™×©××”.</Text>\n\n        {/* Team Members - General Section */}\n        <Text style={localStyles.sectionTitle}>×”×¦×•×•×ª ×©×œ× ×•</Text>\n        <Text style={localStyles.paragraph}>\n          ×§×”×™×œ×ª ×§××¨××” ××•×¨×›×‘×ª ××¦×•×•×ª ××¡×•×¨ ×•××§×¦×•×¢×™ ×©×œ ×™×–××™×, ××ª×›× ×ª×™×, ××¢×¦×‘×™×\n          ×•×™×•×¢×¦×™×, ×”×¤×•×¢×œ×™× ×™×—×“ ××ª×•×š ×××•× ×” ×¢××•×§×” ×‘×—×–×•×Ÿ ×”×¤×¨×•×™×§×˜. ×× ×• ××©×œ×‘×™× ×™×“×¢\n          ×•× ×™×¡×™×•×Ÿ ×××’×•×•×Ÿ ×ª×—×•××™× ×›×“×™ ×œ×‘× ×•×ª ×¤×œ×˜×¤×•×¨××” ×—×–×§×” ×•×™×¦×™×‘×”, ×”×××•×§×“×ª ×‘×¦×¨×›×™\n          ×”×§×”×™×œ×”. ×”×¦×•×•×ª ×©×œ× ×• ××—×•×™×‘ ×œ×”×¦×œ×—×ª ×”×¤×¨×•×™×§×˜ ×•×œ×§×™×“×•× ×¢×¨×›×™ ×”× ×ª×™× ×”\n          ×•×”×©×™×ª×•×¤×™×•×ª, ×•×”×•× ×¤×•×¢×œ ×‘×©×§×™×¤×•×ª ××œ××” ×•×‘×©×™×ª×•×£ ×¤×¢×•×œ×” ×¢× ×”××ª× ×“×‘×™× ×”×¨×‘×™×\n          ×©××¦×˜×¨×¤×™× ×œ×“×¨×š.\n        </Text>\n\n        {/* Contact Information (Optional - you might prefer a separate screen) */}\n        <Text style={localStyles.sectionTitle}>×¦×¨×• ×§×©×¨</Text>\n        <Text style={localStyles.paragraph}>\n          ×œ×›×œ ×©××œ×”, ×¨×¢×™×•×Ÿ ××• ×©×™×ª×•×£ ×¤×¢×•×œ×”, ××œ ×ª×”×¡×¡×• ×œ×™×¦×•×¨ ×§×©×¨. ×× ×• × ×©××— ×œ×©××•×¢\n          ××›×!\n        </Text>\n        <View style={localStyles.contactInfo}>\n          <Text style={localStyles.contactText}>\n            ××™×™×œ ×›×œ×œ×™: info@karmacommunity.org\n          </Text>\n          <Text style={localStyles.contactText}>×˜×œ×¤×•×Ÿ: 123-456-7890</Text>\n          <Text style={localStyles.contactText}>\n            ×›×ª×•×‘×ª: ×¨×—×•×‘ ×”×“×•×’××” 1, ×¢×™×¨ ×”×“×•×’××”\n          </Text>\n        </View>\n              </ScrollContainer>\n      </ScreenWrapper>\n    </>\n  )\n}); // Closing memo parenthesis and semicolon\n\nexport default AboutKarmaCommunityScreen; // Export the const component\n\nconst localStyles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    marginTop: Platform.OS === 'android' ? 30 : 0,\n    backgroundColor: colors.backgroundSecondary\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    flex: 1,\n  },\n  headerButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    flex: 1,\n    padding: 15,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  mainTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 10,\n    color: colors.textPrimary\n  },\n  subtitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    textAlign: 'center',\n    marginBottom: 20,\n    color: colors.textSecondary\n  },\n  sectionTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginTop: 25,\n    marginBottom: 15,\n    color: colors.textPrimary,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    paddingBottom: 5\n  },\n  paragraph: {\n    fontSize: FontSizes.body,\n    textAlign: 'center',\n    lineHeight: 24,\n    marginBottom: 15,\n    color: colors.textPrimary\n  },\n  bulletPointContainer: {\n    flexDirection: 'row-reverse',\n    marginBottom: 8\n  },\n  bulletPoint: {\n    fontSize: FontSizes.body,\n    fontWeight: 'bold',\n    marginRight: 5,\n    color: colors.textPrimary // Using textPrimary\n  },\n  bulletText: {\n    flex: 1,\n    fontSize: FontSizes.body,\n    textAlign: 'center',\n    lineHeight: 24,\n    color: colors.textPrimary // Using textPrimary\n  },\n  challengeSection: {\n    marginBottom: 20,\n    paddingRight: 10,\n    borderRightWidth: 3,\n    borderRightColor: colors.danger // Using danger for challenges\n  },\n  challengeTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    textAlign: 'right',\n    marginBottom: 8,\n    color: colors.danger // Using danger for challenges\n  },\n  solutionSection: {\n    marginBottom: 20,\n    paddingRight: 10,\n    borderRightWidth: 3,\n    borderRightColor: colors.accent // Using accent for solutions (green)\n  },\n  solutionTitle: {\n    fontSize: FontSizes.medium,\n    fontWeight: 'bold',\n    textAlign: 'right',\n    marginBottom: 8,\n    color: colors.accent // Using accent for solutions\n  },\n  contactInfo: {\n    marginBottom: 15,\n    padding: 10,\n    backgroundColor: colors.offWhite, // Using offWhite\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: colors.border // Using border color\n  },\n  contactText: {\n    fontSize: FontSizes.body,\n    textAlign: 'right',\n    lineHeight: 22,\n    color: colors.textPrimary // Using textPrimary\n  },\n})","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/ChatListScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isRealAuth' is assigned a value but never used.","line":28,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'combinedUsers' is assigned a value but never used.","line":176,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10873,10876],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10873,10876],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":269,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10930,10933],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10930,10933],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11014,11017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11014,11017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: List of user conversations with search, pull-to-refresh, and live updates.\n// - Reached from: Top bar navigation and stacks (Home/Search/Profile/Donations) via 'ChatListScreen'.\n// - Provides: Merges real conversations (via `chatService`) with demo ones in non-real auth; navigates to 'ChatDetailScreen' with params.\n// - Reads from context: `useUser()` -> selectedUser, isRealAuth.\n// - Params on navigate to detail: `{ conversationId, otherUserId, userName, userAvatar }`.\n// - External deps/services: `chatService` (get/subscribe), i18n, Haptics, static users from `fakeData` and `characterTypes`.\n// ChatListScreen â€“ professional, concise, with in-file demo support and live updates\nimport React, { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, RefreshControl, Alert, TextInput, TouchableOpacity, Platform, SafeAreaView, StatusBar, Dimensions, FlatList } from 'react-native';\nimport { useNavigation, NavigationProp, ParamListBase, useFocusEffect } from '@react-navigation/native';\nimport ChatListItem from '../components/ChatListItem';\nimport { useUser } from '../stores/userStore';\nimport { getConversations, Conversation as ChatConversation, subscribeToConversations } from '../utils/chatService';\nimport { apiService } from '../utils/apiService';\nimport { USE_BACKEND } from '../utils/config.constants';\nimport colors from '../globals/colors';\nimport { FontSizes } from '../globals/constants';\nimport { Ionicons as Icon } from '@expo/vector-icons';\nimport { useTranslation } from 'react-i18next';\nimport * as Haptics from 'expo-haptics';\nimport { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\n\n// Demo data is now localized via i18n inside the component\n\nexport default function ChatListScreen() {\n  const navigation = useNavigation<NavigationProp<ParamListBase>>();\n  const { selectedUser, isRealAuth } = useUser();\n  const tabBarHeight = useBottomTabBarHeight() || 0;\n  const [conversations, setConversations] = useState<ChatConversation[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [usersMap, setUsersMap] = useState<Map<string, ChatUser>>(new Map());\n  const usersMapRef = useRef<Map<string, ChatUser>>(new Map());\n  const { t } = useTranslation(['chat', 'common']);\n  const [searchHeight, setSearchHeight] = useState(0);\n  const screenHeight = Platform.OS === 'web' ? Dimensions.get('window').height : undefined;\n  const maxListHeight = Platform.OS === 'web' && screenHeight && searchHeight > 0\n    ? screenHeight - tabBarHeight - searchHeight\n    : undefined;\n\n  // Local ChatUser type for display only\n  interface ChatUser {\n    id: string;\n    name: string;\n    avatar?: string;\n    isOnline?: boolean;\n    lastSeen?: string;\n    status?: string;\n  }\n\n  // Update ref when usersMap changes\n  useEffect(() => {\n    usersMapRef.current = usersMap;\n  }, [usersMap]);\n\n  // Load user profiles for participants\n  const loadUserProfiles = useCallback(async (participantIds: string[]): Promise<void> => {\n    if (!USE_BACKEND || participantIds.length === 0) return;\n\n    // Check which users are missing using ref to avoid setState in setState\n    const currentMap = usersMapRef.current;\n    const missingIds = participantIds.filter(id => !currentMap.has(id) && id !== selectedUser?.id);\n\n    if (missingIds.length === 0) return;\n\n    // Load user profiles in parallel\n    try {\n      const loadedUsers = await Promise.all(missingIds.map(async (userId) => {\n        try {\n          const response = await apiService.getUserById(userId);\n          if (response.success && response.data) {\n            const userData = response.data;\n            return {\n              id: userId,\n              name: userData.name || t('chat:unknownUser'),\n              avatar: userData.avatar_url || userData.avatar || '',\n              isOnline: false,\n              lastSeen: userData.last_active || new Date().toISOString(),\n              status: userData.bio || '',\n            } as ChatUser;\n          }\n        } catch (error) {\n          console.warn(`Failed to load user ${userId}:`, error);\n        }\n        return null;\n      }));\n\n      const validUsers = loadedUsers.filter(Boolean) as ChatUser[];\n      if (validUsers.length > 0) {\n        setUsersMap(prev => {\n          const updated = new Map(prev);\n          validUsers.forEach(user => {\n            updated.set(user.id, user);\n          });\n          return updated;\n        });\n      }\n    } catch (error) {\n      console.error('Error loading user profiles:', error);\n    }\n  }, [selectedUser, t]);\n\n  // Load conversations (real + demo)\n  const loadConversations = useCallback(async () => {\n    if (!selectedUser) {\n      Alert.alert(t('common:errorTitle'), t('chat:selectUserFirst'));\n      return;\n    }\n    setRefreshing(true);\n    try {\n      const realConversations = await getConversations(selectedUser.id);\n\n      // Load user profiles for all participants BEFORE setting conversations\n      const allParticipantIds = new Set<string>();\n      realConversations.forEach(conv => {\n        if (conv.participants && Array.isArray(conv.participants)) {\n          conv.participants.forEach(id => {\n            if (id !== selectedUser.id) {\n              allParticipantIds.add(id);\n            }\n          });\n        }\n      });\n\n      // Wait for user profiles to load before showing conversations\n      if (allParticipantIds.size > 0) {\n        await loadUserProfiles(Array.from(allParticipantIds));\n      }\n\n      // Set conversations after profiles are loaded\n      setConversations(realConversations);\n    } catch (error) {\n      console.error('âŒ Load conversations error:', error);\n      Alert.alert(t('common:errorTitle'), t('chat:loadConversationsError'));\n    } finally {\n      setRefreshing(false);\n    }\n  }, [selectedUser, loadUserProfiles, t]);\n\n  // Subscribe to live updates while screen focused\n  useFocusEffect(\n    useCallback(() => {\n      loadConversations();\n      if (!selectedUser) return;\n      const unsubscribe = subscribeToConversations(selectedUser.id, updated => {\n        setConversations(updated);\n      });\n      return () => unsubscribe();\n    }, [selectedUser, loadConversations])\n  );\n\n  const onRefresh = useCallback(() => loadConversations(), [loadConversations]);\n\n  // Load missing user profiles when conversations change\n  useEffect(() => {\n    if (!USE_BACKEND || !selectedUser || conversations.length === 0) return;\n\n    const allParticipantIds = new Set<string>();\n    conversations.forEach(conv => {\n      if (conv.participants && Array.isArray(conv.participants)) {\n        conv.participants.forEach(id => {\n          if (id !== selectedUser.id && !usersMap.has(id)) {\n            allParticipantIds.add(id);\n          }\n        });\n      }\n    });\n\n    if (allParticipantIds.size > 0) {\n      loadUserProfiles(Array.from(allParticipantIds)).catch(console.error);\n    }\n  }, [conversations, selectedUser, usersMap, loadUserProfiles]);\n\n  // Resolve display data for conversations (other user, last message, unread)\n  const combinedUsers = useMemo(() => {\n    // No demo/static users â€“ rely on real user data from backend elsewhere if available\n    return [] as ChatUser[];\n  }, []);\n\n  const filteredSortedConversations = useMemo(() => {\n    if (!selectedUser) return [] as ChatConversation[];\n    const sorted = [...conversations].sort((a, b) => new Date(b.lastMessageTime).getTime() - new Date(a.lastMessageTime).getTime());\n    if (!searchQuery.trim()) return sorted;\n    const q = searchQuery.trim().toLowerCase();\n    return sorted.filter(conv => {\n      if (!conv.participants || !Array.isArray(conv.participants)) return false;\n      const otherId = conv.participants.find(id => id !== selectedUser.id);\n      if (!otherId) return false;\n      const other = usersMap.get(otherId);\n      return other?.name?.toLowerCase().includes(q);\n    });\n  }, [conversations, searchQuery, usersMap, selectedUser]);\n\n  const handlePressChat = (conversationId: string, otherUserId: string, userName: string, userAvatar: string) => {\n    navigation.navigate('ChatDetailScreen', { conversationId, otherUserId, userName, userAvatar });\n  };\n\n  // Create new chat â€“ simple CTA next to the search bar\n  const handleNewChat = () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light).catch(() => { });\n    }\n    navigation.navigate('NewChatScreen');\n  };\n\n  return (\n    <SafeAreaView style={[styles.safeArea, Platform.OS === 'web' && { position: 'relative' }]}>\n      <StatusBar backgroundColor={colors.backgroundSecondary} barStyle=\"dark-content\" />\n      {/* Search bar for conversations */}\n      <View \n        style={styles.searchContainer}\n        onLayout={(event) => {\n          if (Platform.OS === 'web') {\n            const { height } = event.nativeEvent.layout;\n            setSearchHeight(height);\n          }\n        }}\n      >\n        <TextInput\n          value={searchQuery}\n          onChangeText={setSearchQuery}\n          placeholder={t('chat:searchChatsPlaceholder')}\n          placeholderTextColor={colors.textSecondary}\n          style={styles.searchInput}\n        />\n        <TouchableOpacity onPress={handleNewChat} style={styles.newChatButton} activeOpacity={0.8}>\n          <Icon name=\"add-circle-outline\" size={26} color={colors.primary} />\n        </TouchableOpacity>\n      </View>\n\n      {/* List container - limited height on web to ensure scrolling works */}\n      <View style={[\n        styles.listWrapper,\n        Platform.OS === 'web' && maxListHeight ? {\n          maxHeight: maxListHeight,\n        } : undefined\n      ]}>\n        <FlatList\n          data={filteredSortedConversations.filter(item => item.participants && Array.isArray(item.participants) && item.participants.length > 0)}\n          keyExtractor={(item) => item.id}\n          renderItem={({ item }) => {\n            const otherId = item.participants!.find(id => id !== selectedUser?.id);\n            if (!otherId) {\n              return null;\n            }\n\n            // Get user from loaded profiles - only show if we have valid user data\n            const chattingUser = usersMap.get(otherId);\n\n            // Don't show items without valid user data\n            if (!chattingUser) {\n              return null;\n            }\n\n            // Check if user has valid name (not \"unknown user\" or empty)\n            const unknownUserText = t('chat:unknownUser');\n            if (!chattingUser.name ||\n              chattingUser.name === unknownUserText ||\n              chattingUser.name.trim() === '') {\n              return null;\n            }\n\n            const chatUser: ChatUser = {\n              id: chattingUser.id,\n              name: chattingUser.name,\n              avatar: chattingUser.avatar,\n              isOnline: Boolean((chattingUser as any).isOnline),\n              lastSeen: (chattingUser as any).lastActive || new Date().toISOString(),\n              status: (chattingUser as any).bio || '',\n            };\n            const chatConversation = {\n              id: item.id,\n              userId: otherId || '',\n              messages: [],\n              lastMessageTimestamp: item.lastMessageTime,\n              lastMessageText: item.lastMessageText,\n              unreadCount: item.unreadCount,\n              participants: item.participants || [],\n            };\n            return (\n              <ChatListItem\n                conversation={chatConversation}\n                user={chatUser}\n                onPress={() => handlePressChat(item.id, chatUser.id, chatUser.name, chatUser.avatar || '')}\n              />\n            );\n          }}\n          contentContainerStyle={styles.listContent}\n          ListEmptyComponent={\n            <View style={styles.emptyState}>\n              <Text style={styles.emptyStateTitle}>{t('chat:noChats')}</Text>\n              <Text style={styles.emptyStateSubtitle}>{t('chat:startNewOrClearSearch')}</Text>\n            </View>\n          }\n          refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />}\n          scrollEnabled={true}\n          nestedScrollEnabled={Platform.OS === 'web' ? true : undefined}\n          scrollEventThrottle={16}\n          showsVerticalScrollIndicator={true}\n        />\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n    position: 'relative',\n  },\n  listWrapper: {\n    flex: 1,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  searchContainer: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    paddingBottom: 12,\n    backgroundColor: colors.backgroundSecondary,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  searchInput: {\n    height: 44,\n    borderRadius: 12,\n    paddingHorizontal: 12,\n    backgroundColor: colors.background,\n    borderWidth: 1,\n    borderColor: colors.border,\n    color: colors.textPrimary,\n    textAlign: 'right',\n    fontSize: FontSizes.body,\n    flex: 1,\n  },\n  newChatButton: {\n    marginLeft: 10,\n    height: 44,\n    width: 44,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 22,\n  },\n  listContent: {\n    flexGrow: 1,\n    paddingVertical: 8,\n  },\n  emptyState: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 40,\n  },\n  emptyStateTitle: {\n    fontSize: FontSizes.heading2,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 6,\n  },\n  emptyStateSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/topBarScreens/SettingsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used.","line":21,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":46,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[1076,1084],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SafeAreaView' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"SafeAreaView"},"fix":{"range":[1183,1199],"text":""},"desc":"Remove unused variable \"SafeAreaView\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getScreenInfo' is defined but never used.","line":38,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getScreenInfo"},"fix":{"range":[1493,1508],"text":""},"desc":"Remove unused variable \"getScreenInfo\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'scaleSize' is defined but never used.","line":38,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":63,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"scaleSize"},"fix":{"range":[1508,1519],"text":""},"desc":"Remove unused variable \"scaleSize\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'createConversation' is defined but never used.","line":53,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"createConversation"},"fix":{"range":[2331,2350],"text":""},"desc":"Remove unused variable \"createConversation\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sendMessage' is defined but never used.","line":53,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":41,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"sendMessage"},"fix":{"range":[2322,2394],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refreshKey' is assigned a value but never used.","line":65,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleBackPress' is assigned a value but never used.","line":130,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":336,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":336,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11501,11504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11501,11504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":442,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":442,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14824,14827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14824,14827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'offsetY' is assigned a value but never used.","line":670,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":670,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":748,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":748,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27743,27746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27743,27746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":878,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":878,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31489,31492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31489,31492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":879,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":879,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31523,31526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31523,31526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":883,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":883,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31627,31630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31627,31630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: App settings screen (language, theme, notifications, privacy, org/admin links). Handles logout with guest/auth distinctions.\n// - Reached from: Top bar (via `TopBarNavigator`) and directly from multiple stacks as 'SettingsScreen'.\n// - Provides: Platform-specific scroll (web vs native), language modal and i18n+RTL application, navigation to About, Org Dashboard, Admin Approvals.\n// - Reads from context: `useUser()` -> `isGuestMode`, `selectedUser`, `isAuthenticated`, `signOut`.\n// - Side effects: On logout, navigates to 'LoginScreen'; on language change, persists to AsyncStorage and toggles RTL.\n/**\n * SettingsScreen - Modern Settings Interface\n * \n * Features:\n * - Platform-specific scrolling (CSS overflow for web, ScrollView for native)\n * - User profile display for logged-in users\n * - Guest mode support with appropriate UI adjustments\n * - Comprehensive settings options with modern UI design\n * - Smooth scrolling on all platforms\n * \n * @author Karma Community Team\n * @version 2.0.0\n */\n\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  SafeAreaView,\n  Alert,\n  Platform,\n  Dimensions,\n  TextInput,\n  KeyboardAvoidingView,\n} from 'react-native';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons } from '@expo/vector-icons';\nimport colors from '../globals/colors';\nimport { biDiTextAlign, rowDirection, getScreenInfo, scaleSize } from '../globals/responsive';\nimport { FontSizes } from '../globals/constants';\nimport { useUser } from '../stores/userStore';\nimport { useWebMode } from '../stores/webModeStore';\nimport GuestModeNotice from '../components/GuestModeNotice';\nimport ScreenWrapper from '../components/ScreenWrapper';\nimport { useTranslation } from 'react-i18next';\nimport i18n from '../app/i18n';\nimport { I18nManager, Modal } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useScrollPositionWithHandler } from '../hooks/useScrollPosition';\nimport { navigationQueue } from '../utils/navigationQueue';\nimport { checkNavigationGuards } from '../utils/navigationGuards';\nimport { logger } from '../utils/loggerService';\nimport { apiService } from '../utils/apiService';\nimport { createConversation, sendMessage } from '../utils/chatService';\n\nconst { height: SCREEN_HEIGHT, width: SCREEN_WIDTH } = Dimensions.get('window');\n\nexport default function SettingsScreen() {\n  const navigation = useNavigation();\n  const { signOut, isGuestMode, selectedUser, isAuthenticated } = useUser();\n  const { mode } = useWebMode();\n  const { ref: scrollRef, onScroll } = useScrollPositionWithHandler('SettingsScreen', {\n    enabled: true,\n  });\n  const scrollViewRef = scrollRef;\n  const [refreshKey, setRefreshKey] = useState(0);\n  const { t } = useTranslation(['settings', 'common']);\n  const [currentLang, setCurrentLang] = useState(i18n.language || 'he');\n  const [showLangModal, setShowLangModal] = useState(false);\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [reportText, setReportText] = useState('');\n  const [isSendingReport, setIsSendingReport] = useState(false);\n\n  // Refresh data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      console.log('âš™ï¸ SettingsScreen - Screen focused, refreshing data...');\n      // Force re-render by updating refresh key\n      setRefreshKey(prev => prev + 1);\n    }, [])\n  );\n\n  // Listen for authentication state changes\n  useEffect(() => {\n    console.log('âš™ï¸ SettingsScreen - Auth state changed:', {\n      isAuthenticated,\n      isGuestMode,\n      selectedUser: selectedUser?.name || 'null',\n      mode\n    });\n\n    // If user is no longer authenticated, navigate based on web mode\n    if (!isAuthenticated && !isGuestMode) {\n      const targetRoute = (Platform.OS === 'web' && mode === 'site')\n        ? 'LandingSiteScreen'\n        : 'LoginScreen';\n\n      logger.debug('SettingsScreen', 'User logged out, navigating', { targetRoute, mode });\n\n      // Check guards before navigation\n      const guardContext = {\n        isAuthenticated: false,\n        isGuestMode: false,\n        isAdmin: false,\n        mode,\n      };\n\n      checkNavigationGuards(\n        {\n          type: 'reset',\n          index: 0,\n          routes: [{ name: targetRoute }],\n        },\n        guardContext\n      ).then((guardResult) => {\n        if (!guardResult.allowed && guardResult.redirectTo) {\n          navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n        } else {\n          navigationQueue.reset(0, [{ name: targetRoute }], 2);\n        }\n      });\n    }\n  }, [isAuthenticated, isGuestMode, selectedUser, navigation, mode]);\n\n  // Debug logs for development\n  console.log('âš™ï¸ SettingsScreen - Rendered with isGuestMode:', isGuestMode);\n  console.log('âš™ï¸ SettingsScreen - Platform:', Platform.OS);\n  console.log('âš™ï¸ SettingsScreen - Screen dimensions:', { width: SCREEN_WIDTH, height: SCREEN_HEIGHT });\n\n  const handleBackPress = () => {\n    console.log('âš™ï¸ SettingsScreen - Back pressed');\n    navigation.goBack();\n  };\n\n  const handleAboutPress = () => {\n    console.log('âš™ï¸ SettingsScreen - About pressed');\n    navigation.navigate('LandingSiteScreen' as never);\n  };\n\n  /**\n * ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ×”×™×¦×™××”\n * ×œ×•×’×™×§×” ×©×•× ×” ×œ××¦×‘ ××•×¨×— ×•×œ××©×ª××© ××—×•×‘×¨:\n * - ××¦×‘ ××•×¨×—: ×™×¦×™××” ×™×©×™×¨×” ×œ×œ× ×”×ª×¨××” (×¨×§ ×—×–×¨×” ×œ××¡×š ×”×›× ×™×¡×”)\n * - ××©×ª××© ××—×•×‘×¨: ×”×¦×’×ª ×”×ª×¨××” ×œ×¤× ×™ ×”×™×¦×™××” (×¤×¢×•×œ×” ××¡×•×›× ×ª)\n */\n  const handleLogoutPress = () => {\n    console.log('âš™ï¸ 14SettingsScreen - Logout pressed');\n    console.log('âš™ï¸ SettingsScreen - Platform:', Platform.OS);\n    console.log('âš™ï¸ SettingsScreen - isGuestMode:', isGuestMode);\n\n    // Guest mode - direct logout without warning as it's not dangerous\n    if (isGuestMode) {\n      console.log('âš™ï¸ SettingsScreen - Guest mode detected, direct logout without confirmation');\n      signOut().then(() => {\n        console.log('âš™ï¸ SettingsScreen - Guest logout completed');\n        setTimeout(() => {\n          navigateAfterLogout();\n        }, 100);\n      });\n      return;\n    }\n\n    // Authenticated user - show warning as this is a dangerous action\n    // Use Modal for both web and native for consistent behavior\n    console.log('âš™ï¸ SettingsScreen - Showing logout confirmation modal');\n    setShowLogoutModal(true);\n  };\n\n  // Helper function to navigate after logout based on web mode\n  const navigateAfterLogout = async () => {\n    const targetRoute = (Platform.OS === 'web' && mode === 'site')\n      ? 'LandingSiteScreen'\n      : 'LoginScreen';\n\n    logger.debug('SettingsScreen', 'Navigating after logout', { targetRoute, mode });\n\n    // Check guards before navigation\n    const guardContext = {\n      isAuthenticated: false,\n      isGuestMode: false,\n      isAdmin: false,\n      mode,\n    };\n\n    const guardResult = await checkNavigationGuards(\n      {\n        type: 'reset',\n        index: 0,\n        routes: [{ name: targetRoute }],\n      },\n      guardContext\n    );\n\n    if (!guardResult.allowed && guardResult.redirectTo) {\n      await navigationQueue.reset(0, [{ name: guardResult.redirectTo }], 2);\n    } else {\n      await navigationQueue.reset(0, [{ name: targetRoute }], 2);\n    }\n  };\n\n  // Helper function to handle logout confirmation\n  const handleLogoutConfirm = async () => {\n    console.log('âš™ï¸ SettingsScreen - Logout confirmed');\n    setShowLogoutModal(false);\n    console.log('âš™ï¸ SettingsScreen - Calling signOut()');\n    await signOut();\n    console.log('âš™ï¸ SettingsScreen - signOut() completed');\n\n    // Short delay to ensure state is updated before navigation\n    setTimeout(() => {\n      navigateAfterLogout();\n    }, 100);\n  };\n\n  // Helper function to handle logout cancellation\n  const handleLogoutCancel = () => {\n    console.log('âš™ï¸ SettingsScreen - Logout cancelled');\n    setShowLogoutModal(false);\n  };\n\n  const handleNotificationsPress = () => {\n    console.log('âš™ï¸ SettingsScreen - Notifications pressed');\n    if (Platform.OS === 'web') {\n      alert(t('settings:notificationsComingSoon'));\n    } else {\n      Alert.alert(t('settings:notificationsTitle'), t('settings:notificationsComingSoon'));\n    }\n  };\n\n  const handlePrivacyPress = () => {\n    console.log('âš™ï¸ SettingsScreen - Privacy pressed');\n    if (Platform.OS === 'web') {\n      alert(t('settings:privacyComingSoon'));\n    } else {\n      Alert.alert(t('settings:privacyTitle'), t('settings:privacyComingSoon'));\n    }\n  };\n\n  const handleThemePress = () => {\n    console.log('âš™ï¸ SettingsScreen - Theme pressed');\n    if (Platform.OS === 'web') {\n      alert(t('settings:themeComingSoon'));\n    } else {\n      Alert.alert(t('settings:themeTitle'), t('settings:themeComingSoon'));\n    }\n  };\n\n  const applyLanguage = async (lang: 'he' | 'en') => {\n    await AsyncStorage.setItem('app_language', lang);\n    await i18n.changeLanguage(lang);\n    setCurrentLang(lang);\n    const isRTL = lang === 'he';\n    if (I18nManager.isRTL !== isRTL) {\n      I18nManager.allowRTL(isRTL);\n      I18nManager.forceRTL(isRTL);\n      if (Platform.OS !== 'web') {\n        Alert.alert(t('settings:restartRequired'), t('settings:restartDesc'));\n      }\n    }\n    setShowLangModal(false);\n  };\n\n  const handleLanguagePress = () => {\n    setShowLangModal(true);\n  };\n\n  const handleClearCachePress = () => {\n    console.log('âš™ï¸ SettingsScreen - Clear cache pressed');\n\n    if (Platform.OS === 'web') {\n      const confirmed = window.confirm(t('settings:clearCacheConfirm'));\n      if (confirmed) {\n        console.log('âš™ï¸ SettingsScreen - Cache cleared');\n        alert(t('settings:cacheCleared'));\n      }\n    } else {\n      Alert.alert(\n        t('settings:clearCache'),\n        t('settings:clearCacheConfirm'),\n        [\n          {\n            text: t('common:cancel'),\n            style: 'cancel',\n          },\n          {\n            text: t('settings:clear'),\n            style: 'destructive',\n            onPress: () => {\n              console.log('âš™ï¸ SettingsScreen - Cache cleared');\n              Alert.alert(t('common:done'), t('settings:cacheCleared'));\n            },\n          },\n        ]\n      );\n    }\n  };\n\n  const handleReportPress = () => {\n    if (!isAuthenticated) {\n      if (Platform.OS === 'web') {\n        alert(t('common:guestLoginHint'));\n      } else {\n        Alert.alert(t('common:error'), t('common:guestLoginHint'));\n      }\n      return;\n    }\n    setShowReportModal(true);\n  };\n\n  const handleSendReport = async () => {\n    if (!reportText.trim()) return;\n\n    setIsSendingReport(true);\n    try {\n      const adminEmail = 'navesarussi@gmail.com';\n\n      // Resolve admin ID - try multiple methods\n      let adminId: string | null = null;\n\n      try {\n        // Method 1: Try resolving by email directly\n        const resolveRes = await apiService.resolveUserId({ email: adminEmail });\n        if (resolveRes.success && resolveRes.data?.id) {\n          adminId = resolveRes.data.id;\n        }\n      } catch (e) {\n        console.warn('Method 1 (resolveUserId) failed', e);\n      }\n\n      if (!adminId) {\n        try {\n          // Method 2: Search for user by email\n          const searchRes = await apiService.getUsers({ search: adminEmail, limit: 1 });\n          if (searchRes.success && searchRes.data && Array.isArray(searchRes.data) && searchRes.data.length > 0) {\n            // Verify exact email match to be safe\n            const adminUser = searchRes.data.find((u: any) => u.email?.toLowerCase() === adminEmail.toLowerCase());\n            if (adminUser) {\n              adminId = adminUser.id;\n            } else {\n              // Fallback to first result if it looks close enough (or just take it as the search should be specific)\n              adminId = searchRes.data[0].id;\n            }\n          }\n        } catch (e) {\n          console.warn('Method 2 (getUsers) failed', e);\n        }\n      }\n\n      if (!adminId) {\n        console.error('Admin user not found for report via any method');\n        // Fallback for development/testing if needed, or throw\n        throw new Error('Admin not found');\n      }\n\n      // const adminId = resolveRes.data.id; // Correctly assigned above\n      const currentUserId = selectedUser?.id;\n\n      if (!currentUserId) {\n        throw new Error('User not logged in');\n      }\n\n      // Create task for admin\n      const taskData = {\n        title: `Report from ${selectedUser?.name || 'User'}`,\n        description: `User Email: ${selectedUser?.email}\\nUser ID: ${currentUserId}\\n\\nReport Content:\\n${reportText}`,\n        status: 'reports',\n        priority: 'high',\n        category: 'report',\n        assignee_id: adminId,\n        created_by: currentUserId,\n        due_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString() // Due in 1 week\n      };\n\n      const taskRes = await apiService.createTask(taskData);\n\n      if (!taskRes.success) {\n        throw new Error(taskRes.error || 'Failed to create report task');\n      }\n\n      setReportText('');\n      setShowReportModal(false);\n\n      if (Platform.OS === 'web') {\n        alert(t('settings:reportSuccess'));\n      } else {\n        Alert.alert(t('common:done'), t('settings:reportSuccess'));\n      }\n\n    } catch (error) {\n      console.error('Failed to send report:', error);\n      if (Platform.OS === 'web') {\n        alert(t('settings:reportError'));\n      } else {\n        Alert.alert(t('common:error'), t('settings:reportError'));\n      }\n    } finally {\n      setIsSendingReport(false);\n    }\n  };\n\n\n  // Test function for scroll functionality (development only)\n  const handleScrollTest = () => {\n    console.log('ğŸ§ª SettingsScreen - Testing scroll functionality');\n    if (scrollViewRef.current) {\n      console.log('ğŸ§ª SettingsScreen - ScrollView ref exists, attempting to scroll');\n      scrollViewRef.current.scrollTo({ y: 200, animated: true });\n      setTimeout(() => {\n        console.log('ğŸ§ª SettingsScreen - Scrolling back to top');\n        scrollViewRef.current?.scrollTo({ y: 0, animated: true });\n      }, 2000);\n    } else {\n      console.log('ğŸ§ª SettingsScreen - ScrollView ref is null!');\n    }\n  };\n\n  const SettingsItem = ({\n    icon,\n    title,\n    subtitle,\n    onPress,\n    showArrow = true,\n    color = colors.textPrimary,\n    dangerous = false\n  }: {\n    icon: string;\n    title: string;\n    subtitle?: string;\n    onPress: () => void;\n    showArrow?: boolean;\n    color?: string;\n    dangerous?: boolean;\n  }) => (\n    <TouchableOpacity\n      style={[styles.settingsItem, dangerous && styles.dangerousItem]}\n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      <View style={styles.settingsItemLeft}>\n        <View style={[styles.iconContainer, dangerous && styles.dangerousIconContainer]}>\n          <Ionicons\n            name={icon as any}\n            size={22}\n            color={dangerous ? colors.error : colors.primary}\n          />\n        </View>\n        <View style={styles.textContainer}>\n          <Text style={[styles.settingsTitle, { color: dangerous ? colors.error : color }]}>\n            {title}\n          </Text>\n          {subtitle && (\n            <Text style={styles.settingsSubtitle}>{subtitle}</Text>\n          )}\n        </View>\n      </View>\n      {showArrow && (\n        <Ionicons\n          name=\"chevron-forward\"\n          size={20}\n          color={colors.textSecondary}\n        />\n      )}\n    </TouchableOpacity>\n  );\n\n  return (\n    <ScreenWrapper style={styles.container}>\n      {/* Language Modal */}\n      <Modal visible={showLangModal} transparent animationType=\"fade\" onRequestClose={() => setShowLangModal(false)}>\n        <View style={styles.modalBackdrop}>\n          <View style={styles.modalCard}>\n            <Text style={styles.modalTitle}>{t('settings:selectLanguage')}</Text>\n            <TouchableOpacity style={styles.modalOption} onPress={() => applyLanguage('he')}>\n              <Text style={styles.modalOptionText}>{`${t('settings:lang.he')} ${currentLang === 'he' ? 'âœ“' : ''}`}</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.modalOption} onPress={() => applyLanguage('en')}>\n              <Text style={styles.modalOptionText}>{`${t('settings:lang.en')} ${currentLang === 'en' ? 'âœ“' : ''}`}</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={[styles.modalOption, { marginTop: 8 }]} onPress={() => setShowLangModal(false)}>\n              <Text style={[styles.modalOptionText, { color: colors.textSecondary }]}>{t('common:cancel')}</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Logout Confirmation Modal */}\n      <Modal visible={showLogoutModal} transparent animationType=\"fade\" onRequestClose={handleLogoutCancel}>\n        <View style={styles.modalBackdrop}>\n          <View style={styles.logoutModalCard}>\n            <Text style={styles.logoutModalTitle}>{t('settings:logoutTitle')}</Text>\n            <Text style={styles.logoutModalMessage}>{t('settings:logoutMessage')}</Text>\n            <View style={styles.logoutModalButtons}>\n              <TouchableOpacity\n                style={[styles.logoutModalButton, styles.logoutModalButtonCancel]}\n                onPress={handleLogoutCancel}\n              >\n                <Text style={styles.logoutModalButtonTextCancel}>{t('common:cancel')}</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.logoutModalButton, styles.logoutModalButtonConfirm]}\n                onPress={handleLogoutConfirm}\n              >\n                <Text style={styles.logoutModalButtonTextConfirm}>{t('settings:logoutConfirm')}</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Report Modal */}\n      <Modal visible={showReportModal} transparent animationType=\"slide\" onRequestClose={() => setShowReportModal(false)}>\n        <KeyboardAvoidingView behavior={Platform.OS === 'ios' ? 'padding' : undefined} style={styles.modalBackdrop}>\n          <View style={styles.reportModalCard}>\n            <Text style={styles.reportModalTitle}>{t('settings:reportTitle')}</Text>\n            <Text style={styles.reportModalSubtitle}>{t('settings:reportIssueDesc')}</Text>\n\n            <TextInput\n              style={styles.reportInput}\n              multiline\n              numberOfLines={4}\n              placeholder={t('settings:reportPlaceholder')}\n              placeholderTextColor={colors.textSecondary}\n              value={reportText}\n              onChangeText={setReportText}\n              textAlignVertical=\"top\"\n              textAlign={biDiTextAlign('right')}\n            />\n\n            <View style={styles.logoutModalButtons}>\n              <TouchableOpacity\n                style={[styles.logoutModalButton, styles.logoutModalButtonCancel]}\n                onPress={() => setShowReportModal(false)}\n                disabled={isSendingReport}\n              >\n                <Text style={styles.logoutModalButtonTextCancel}>{t('common:cancel')}</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.logoutModalButton, styles.logoutModalButtonConfirm, { backgroundColor: colors.primary, opacity: isSendingReport ? 0.7 : 1 }]}\n                onPress={handleSendReport}\n                disabled={isSendingReport || !reportText.trim()}\n              >\n                <Text style={[styles.logoutModalButtonTextConfirm, { color: colors.white }]}>\n                  {isSendingReport ? t('common:loading') : t('settings:reportSend')}\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </KeyboardAvoidingView>\n      </Modal>\n\n      {/* User Info Section - Only for logged in users */}\n      {!isGuestMode && selectedUser && (\n        <View style={styles.userSection}>\n          <View style={styles.userInfo}>\n            <Text style={styles.userName}>{selectedUser.name}</Text>\n            <Text style={styles.userEmail}>{selectedUser.email}</Text>\n            <Text style={styles.karmaPoints}>\n              {(selectedUser.karmaPoints || 0).toLocaleString()} {t('profile:stats.karmaPointsSuffix')}\n            </Text>\n          </View>\n        </View>\n      )}\n\n      {/* Guest Mode Notice */}\n      {isGuestMode && <GuestModeNotice variant=\"compact\" />}\n\n      {/* Settings List - Platform-specific scroll implementation */}\n      {Platform.OS === 'web' ? (\n        // Web: Custom scrollable View with CSS overflow\n        <View style={styles.webScrollContainer}>\n          <View style={styles.webScrollContent}>\n            {/* App Settings Section */}\n            <View style={styles.section}>\n              <Text style={styles.sectionTitle}>{t('settings:appSettings')}</Text>\n\n              <SettingsItem\n                icon=\"notifications-outline\"\n                title={t('settings:notifications')}\n                subtitle={t('settings:notificationsDesc')}\n                onPress={handleNotificationsPress}\n              />\n\n              <SettingsItem\n                icon=\"color-palette-outline\"\n                title={t('settings:theme')}\n                subtitle={t('settings:themeDesc')}\n                onPress={handleThemePress}\n              />\n\n              <SettingsItem\n                icon=\"language-outline\"\n                title={t('settings:language')}\n                subtitle={currentLang === 'he' ? t('settings:lang.he') : t('settings:lang.en')}\n                onPress={handleLanguagePress}\n              />\n            </View>\n\n            {/* Privacy & Security Section */}\n            <View style={styles.section}>\n              <Text style={styles.sectionTitle}>{t('settings:privacySection')}</Text>\n\n              <SettingsItem\n                icon=\"shield-outline\"\n                title={t('settings:privacy')}\n                subtitle={t('settings:privacyDesc')}\n                onPress={handlePrivacyPress}\n              />\n\n              <SettingsItem\n                icon=\"trash-outline\"\n                title={t('settings:clearCache')}\n                subtitle={t('settings:clearCacheDesc')}\n                onPress={handleClearCachePress}\n              />\n\n              <SettingsItem\n                icon=\"flask-outline\"\n                title={t('settings:scrollTestTitle')}\n                subtitle={t('settings:scrollTestSubtitle')}\n                onPress={handleScrollTest}\n              />\n            </View>\n\n            {/* About Section */}\n            <View style={styles.section}>\n              <Text style={styles.sectionTitle}>{t('settings:aboutSection')}</Text>\n\n              <SettingsItem\n                icon=\"information-circle-outline\"\n                title={t('settings:about')}\n                subtitle={t('settings:aboutDesc')}\n                onPress={handleAboutPress}\n              />\n\n              <SettingsItem\n                icon=\"warning-outline\"\n                title={t('settings:reportIssue')}\n                subtitle={t('settings:reportIssueDesc')}\n                onPress={handleReportPress}\n              />\n            </View>\n\n            {/* Logout Section - different behavior for guest mode and authenticated user */}\n            <View style={styles.section}>\n              <SettingsItem\n                icon={isGuestMode ? \"arrow-back-outline\" : \"log-out-outline\"}\n                title={isGuestMode ? t('settings:guestBack') : t('settings:logout')}\n                subtitle={isGuestMode ? t('settings:guestBackDesc') : t('settings:logoutDesc')}\n                onPress={handleLogoutPress}\n                showArrow={false}\n                dangerous={!isGuestMode} // Red only for authenticated user (dangerous action)\n              />\n            </View>\n          </View>\n        </View>\n      ) : (\n        // Native: Standard ScrollView for iOS/Android\n        <ScrollView\n          ref={scrollViewRef}\n          style={styles.scrollView}\n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={true}\n          scrollEnabled={true}\n          bounces={Platform.OS === 'ios'}\n          overScrollMode={Platform.OS === 'android' ? 'auto' : undefined}\n          nestedScrollEnabled={true}\n          keyboardShouldPersistTaps=\"handled\"\n          onScroll={(event) => {\n            onScroll(event);\n            const offsetY = event.nativeEvent.contentOffset.y;\n            // console.log('ğŸ“œ SettingsScreen - Layout measurement:', event.nativeEvent.layoutMeasurement);\n          }}\n          onScrollBeginDrag={() => {\n            console.log('ğŸ“œ SettingsScreen - Scroll begin drag detected!');\n          }}\n          onScrollEndDrag={() => {\n            console.log('ğŸ“œ SettingsScreen - Scroll end drag detected!');\n          }}\n          onMomentumScrollBegin={() => {\n            console.log('ğŸ“œ SettingsScreen - Momentum scroll begin!');\n          }}\n          onMomentumScrollEnd={() => {\n            console.log('ğŸ“œ SettingsScreen - Momentum scroll end!');\n          }}\n          onContentSizeChange={(contentWidth, contentHeight) => {\n            console.log('ğŸ“œ SettingsScreen - Content size changed:', { contentWidth, contentHeight });\n            console.log('ğŸ“œ SettingsScreen - Screen height:', SCREEN_HEIGHT);\n            console.log('ğŸ“œ SettingsScreen - Should scroll:', contentHeight > SCREEN_HEIGHT);\n          }}\n          onLayout={(event) => {\n            console.log('ğŸ“œ SettingsScreen - ScrollView layout:', event.nativeEvent.layout);\n          }}\n          scrollEventThrottle={16}\n        >\n          {/* App Settings Section */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{t('settings:appSettings')}</Text>\n            {/* Org Dashboard (for org admins) */}\n            {selectedUser && selectedUser.roles?.includes('org_admin') && (\n              <SettingsItem\n                icon=\"briefcase-outline\"\n                title={t('settings:orgDashboardTitle')}\n                subtitle={t('settings:orgDashboardSubtitle')}\n                onPress={() => navigation.navigate('OrgDashboardScreen' as never)}\n              />\n            )}\n\n            {/* Admin approvals (for admins) */}\n            {selectedUser && selectedUser.roles?.includes('admin') && (\n              <SettingsItem\n                icon=\"checkmark-done-outline\"\n                title={t('settings:adminApprovalsTitle')}\n                subtitle={t('settings:adminApprovalsSubtitle')}\n                onPress={() => navigation.navigate('AdminOrgApprovalsScreen' as never)}\n              />\n            )}\n\n            <SettingsItem\n              icon=\"notifications-outline\"\n              title={t('settings:notifications')}\n              subtitle={t('settings:notificationsDesc')}\n              onPress={handleNotificationsPress}\n            />\n\n            <SettingsItem\n              icon=\"color-palette-outline\"\n              title={t('settings:theme')}\n              subtitle={t('settings:themeDesc')}\n              onPress={handleThemePress}\n            />\n\n            <SettingsItem\n              icon=\"language-outline\"\n              title={t('settings:language')}\n              subtitle={currentLang === 'he' ? t('settings:lang.he') : t('settings:lang.en')}\n              onPress={handleLanguagePress}\n            />\n          </View>\n\n          {/* My Activity Section */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{t('settings:myActivitySection', '×”×¤×¢×™×œ×•×ª ×©×œ×™')}</Text>\n\n            <SettingsItem\n              icon=\"trophy-outline\"\n              title={t('challenges:myChallenges')}\n              subtitle={t('settings:myChallengesDesc', '×¢×“×›×•×Ÿ ××”×™×¨ ×©×œ ×”××ª×’×¨×™× ×©×”×¦×˜×¨×¤×ª ××œ×™×”×')}\n              onPress={() => (navigation as any).navigate('ChallengeStatisticsScreen')}\n            />\n          </View>\n\n          {/* Privacy & Security Section */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{t('settings:privacySection')}</Text>\n\n            <SettingsItem\n              icon=\"shield-outline\"\n              title={t('settings:privacy')}\n              subtitle={t('settings:privacyDesc')}\n              onPress={handlePrivacyPress}\n            />\n\n            <SettingsItem\n              icon=\"trash-outline\"\n              title={t('settings:clearCache')}\n              subtitle={t('settings:clearCacheDesc')}\n              onPress={handleClearCachePress}\n            />\n\n            <SettingsItem\n              icon=\"flask-outline\"\n              title={t('settings:scrollTestTitle')}\n              subtitle={t('settings:scrollTestSubtitle')}\n              onPress={handleScrollTest}\n            />\n          </View>\n\n          {/* About Section */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>{t('settings:aboutSection')}</Text>\n\n            <SettingsItem\n              icon=\"information-circle-outline\"\n              title={t('settings:about')}\n              subtitle={t('settings:aboutDesc')}\n              onPress={handleAboutPress}\n            />\n\n            <SettingsItem\n              icon=\"warning-outline\"\n              title={t('settings:reportIssue')}\n              subtitle={t('settings:reportIssueDesc')}\n              onPress={handleReportPress}\n            />\n          </View>\n\n          {/* Logout Section - different behavior for guest mode and authenticated user */}\n          <View style={styles.section}>\n            <SettingsItem\n              icon={isGuestMode ? \"arrow-back-outline\" : \"log-out-outline\"}\n              title={isGuestMode ? t('settings:guestBack') : t('settings:logout')}\n              subtitle={isGuestMode ? t('settings:guestBackDesc') : t('settings:logoutDesc')}\n              onPress={handleLogoutPress}\n              showArrow={false}\n              dangerous={!isGuestMode} // Red only for authenticated user (dangerous action)\n            />\n          </View>\n        </ScrollView>\n      )}\n    </ScreenWrapper>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background,\n    marginTop: Platform.OS === 'android' ? 30 : 0,\n  },\n  header: {\n    flexDirection: rowDirection('row'),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border,\n    backgroundColor: colors.background,\n  },\n  backButton: {\n    padding: 8,\n    borderRadius: 12,\n    backgroundColor: colors.backgroundSecondary,\n  },\n  headerTitle: {\n    fontSize: FontSizes.heading1,\n    fontWeight: '700',\n    color: colors.textPrimary,\n  },\n  headerSpacer: {\n    width: 40,\n  },\n  userSection: {\n    backgroundColor: colors.backgroundSecondary,\n    marginHorizontal: 20,\n    marginTop: 20,\n    borderRadius: 16,\n    padding: 20,\n  },\n  userInfo: {\n    alignItems: 'center',\n  },\n  userName: {\n    fontSize: FontSizes.medium,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 4,\n    textAlign: biDiTextAlign('right'),\n  },\n  userEmail: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    marginBottom: 8,\n    textAlign: biDiTextAlign('right'),\n  },\n  karmaPoints: {\n    fontSize: FontSizes.body,\n    color: colors.primary,\n    fontWeight: '500',\n    textAlign: 'center',\n  },\n\n  // Web: Custom scrollable container with CSS overflow\n  webScrollContainer: {\n    flex: 1,\n    backgroundColor: colors.background,\n    ...(Platform.OS === 'web' && {\n      overflowY: 'auto' as any,\n      overflowX: 'hidden' as any,\n    }),\n    height: '100%',\n    maxHeight: SCREEN_HEIGHT - 200, // Reserve space for header\n  } as any,\n  webScrollContent: {\n    paddingBottom: 40,\n    minHeight: SCREEN_HEIGHT * 1.2, // Ensure content is scrollable\n  },\n  // Native: Standard ScrollView styles\n  scrollView: {\n    flex: 1,\n    backgroundColor: colors.background,\n  },\n  scrollContent: {\n    paddingBottom: 40,\n  },\n  section: {\n    marginTop: 32,\n    paddingHorizontal: 20,\n  },\n  sectionTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textSecondary,\n    marginBottom: 16,\n    marginRight: 4,\n    textAlign: biDiTextAlign('right'),\n  },\n  settingsItem: {\n    flexDirection: rowDirection('row'),\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 12,\n  },\n  dangerousItem: {\n    backgroundColor: colors.errorLight,\n  },\n  settingsItemLeft: {\n    flexDirection: rowDirection('row'),\n    alignItems: 'center',\n    flex: 1,\n  },\n  iconContainer: {\n    width: 44,\n    height: 44,\n    borderRadius: 12,\n    backgroundColor: colors.pinkLight,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  dangerousIconContainer: {\n    backgroundColor: colors.errorLight,\n  },\n  textContainer: {\n    flex: 1,\n  },\n  settingsTitle: {\n    fontSize: FontSizes.body,\n    fontWeight: '600',\n    color: colors.textPrimary,\n    marginBottom: 2,\n    textAlign: biDiTextAlign('right'),\n  },\n  settingsSubtitle: {\n    fontSize: FontSizes.small,\n    color: colors.textSecondary,\n    textAlign: biDiTextAlign('right'),\n  },\n  modalBackdrop: { flex: 1, backgroundColor: 'rgba(0,0,0,0.4)', alignItems: 'center', justifyContent: 'center' },\n  modalCard: { backgroundColor: colors.white, width: 300, borderRadius: 12, padding: 16, gap: 8 },\n  modalTitle: { fontSize: FontSizes.medium, color: colors.textPrimary, textAlign: 'center', marginBottom: 8 },\n  modalOption: { paddingVertical: 10 },\n  modalOptionText: { fontSize: FontSizes.body, color: colors.textPrimary, textAlign: 'center' },\n  logoutModalCard: {\n    backgroundColor: colors.background,\n    width: 320,\n    borderRadius: 16,\n    padding: 24,\n    ...(Platform.OS === 'web' && {\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\n    }),\n  },\n  logoutModalTitle: {\n    fontSize: FontSizes.heading2,\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('center'),\n    marginBottom: 12,\n    fontWeight: '700',\n  },\n  logoutModalMessage: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: biDiTextAlign('center'),\n    marginBottom: 24,\n    lineHeight: 22,\n  },\n  logoutModalButtons: {\n    flexDirection: rowDirection('row'),\n    gap: 12,\n    justifyContent: 'space-between',\n  },\n  logoutModalButton: {\n    flex: 1,\n    paddingVertical: 14,\n    paddingHorizontal: 20,\n    borderRadius: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  logoutModalButtonCancel: {\n    backgroundColor: colors.backgroundSecondary,\n  },\n  logoutModalButtonConfirm: {\n    backgroundColor: colors.error,\n  },\n  logoutModalButtonTextCancel: {\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    fontWeight: '600',\n  },\n  logoutModalButtonTextConfirm: {\n    fontSize: FontSizes.body,\n    color: colors.white,\n    fontWeight: '600',\n  },\n  reportModalCard: {\n    backgroundColor: colors.background,\n    width: '90%',\n    maxWidth: 400,\n    borderRadius: 16,\n    padding: 24,\n    ...(Platform.OS === 'web' && {\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\n    }),\n  },\n  reportModalTitle: {\n    fontSize: FontSizes.heading2,\n    color: colors.textPrimary,\n    textAlign: biDiTextAlign('center'),\n    marginBottom: 8,\n    fontWeight: '700',\n  },\n  reportModalSubtitle: {\n    fontSize: FontSizes.body,\n    color: colors.textSecondary,\n    textAlign: biDiTextAlign('center'),\n    marginBottom: 20,\n  },\n  reportInput: {\n    backgroundColor: colors.backgroundSecondary,\n    borderRadius: 12,\n    padding: 12,\n    minHeight: 120,\n    fontSize: FontSizes.body,\n    color: colors.textPrimary,\n    marginBottom: 20,\n    borderWidth: 1,\n    borderColor: colors.border,\n    textAlignVertical: 'top',\n  },\n});","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/feed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/miblanchard-slider.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/types/navigation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'NavigationAction' is defined but never used.","line":5,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":43,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"NavigationAction"},"fix":{"range":[198,216],"text":""},"desc":"Remove unused variable \"NavigationAction\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[825,828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[825,828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[950,953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[950,953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1125,1128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1125,1128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1505,1508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1505,1508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// types/navigation.ts\n// TypeScript types for navigation system\n// This file provides comprehensive type definitions for the navigation queue, guards, and state management\n\nimport { NavigationState, NavigationAction } from '@react-navigation/native';\nimport { RootStackParamList, BottomTabNavigatorParamList, HomeTabStackParamList, SearchTabStackParamList, ProfileTabStackParamList, DonationsStackParamList, AdminStackParamList } from '../globals/types';\n\n// Navigation Queue Types\nexport type NavigationActionType = 'navigate' | 'reset' | 'replace' | 'goBack' | 'setParams';\n\nexport interface NavigateAction {\n  type: 'navigate';\n  routeName: string;\n  params?: Record<string, any>;\n  key?: string;\n}\n\nexport interface ResetAction {\n  type: 'reset';\n  index: number;\n  routes: Array<{ name: string; params?: Record<string, any>; key?: string }>;\n}\n\nexport interface ReplaceAction {\n  type: 'replace';\n  routeName: string;\n  params?: Record<string, any>;\n  key?: string;\n}\n\nexport interface GoBackAction {\n  type: 'goBack';\n  key?: string;\n}\n\nexport interface SetParamsAction {\n  type: 'setParams';\n  params: Record<string, any>;\n  key?: string;\n}\n\nexport type QueuedNavigationAction = NavigateAction | ResetAction | ReplaceAction | GoBackAction | SetParamsAction;\n\nexport interface NavigationQueueItem {\n  id: string;\n  action: QueuedNavigationAction;\n  priority: number; // Higher priority = executed first\n  timestamp: number;\n  resolve: (value: void | PromiseLike<void>) => void;\n  reject: (reason?: any) => void;\n}\n\n// Navigation Guard Types\nexport type GuardResult = \n  | { allowed: true }\n  | { allowed: false; reason: string; redirectTo?: string };\n\nexport interface NavigationGuard {\n  name: string;\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext) => Promise<GuardResult> | GuardResult;\n  priority: number; // Higher priority = checked first\n}\n\nexport interface NavigationGuardContext {\n  isAuthenticated: boolean;\n  isGuestMode: boolean;\n  isAdmin: boolean;\n  currentRoute?: string;\n  navigationState?: NavigationState;\n  mode?: 'site' | 'app';\n}\n\n// Navigation State Validator Types\nexport interface NavigationStateValidationResult {\n  valid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\nexport interface NavigationStateVersion {\n  major: number;\n  minor: number;\n  patch: number;\n}\n\nexport const CURRENT_NAVIGATION_STATE_VERSION: NavigationStateVersion = {\n  major: 1,\n  minor: 0,\n  patch: 0,\n};\n\n// Route definitions for validation\nexport const VALID_ROOT_ROUTES: string[] = [\n  'HomeStack',\n  'LoginScreen',\n  'LandingSiteScreen',\n  'WebViewScreen',\n  'PostsReelsScreen',\n  'BookmarksScreen',\n  'UserProfileScreen',\n  'FollowersScreen',\n  'DiscoverPeopleScreen',\n  'SettingsScreen',\n  'ChatListScreen',\n  'NewChatScreen',\n  'ChatDetailScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n  'OrgOnboardingScreen',\n  'AdminOrgApprovalsScreen',\n  'OrgDashboardScreen',\n  'EditProfileScreen',\n  'InactiveScreen',\n];\n\nexport const VALID_BOTTOM_TAB_ROUTES: string[] = [\n  'HomeScreen',\n  'SearchTab',\n  'DonationsTab',\n  'ProfileScreen',\n  'AdminTab',\n];\n\nexport const VALID_HOME_TAB_STACK_ROUTES: string[] = [\n  'HomeMain',\n  'LandingSiteScreen',\n  'ChatListScreen',\n  'ChatDetailScreen',\n  'NewChatScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n  'SettingsScreen',\n  'BookmarksScreen',\n  'UserProfileScreen',\n  'FollowersScreen',\n  'DiscoverPeopleScreen',\n  'PostsReelsScreen',\n  'WebViewScreen',\n];\n\nexport const VALID_SEARCH_TAB_STACK_ROUTES: string[] = [\n  'SearchScreen',\n  'UserProfileScreen',\n  'FollowersScreen',\n  'DiscoverPeopleScreen',\n  'ChatListScreen',\n  'ChatDetailScreen',\n  'NewChatScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n  'SettingsScreen',\n];\n\nexport const VALID_PROFILE_TAB_STACK_ROUTES: string[] = [\n  'ProfileScreen',\n  'SettingsScreen',\n  'ChatListScreen',\n  'ChatDetailScreen',\n  'NewChatScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n  'DiscoverPeopleScreen',\n  'EditProfileScreen',\n];\n\nexport const VALID_DONATIONS_STACK_ROUTES: string[] = [\n  'DonationsScreen',\n  'MyChallengesScreen',\n  'CommunityChallengesScreen',\n  'ChallengeDetailsScreen',\n  'ChallengeStatisticsScreen',\n  'MyCreatedChallengesScreen',\n  'MoneyScreen',\n  'ItemsScreen',\n  'TimeScreen',\n  'KnowledgeScreen',\n  'TrumpScreen',\n  'CategoryScreen',\n  'DreamsScreen',\n  'FertilityScreen',\n  'JobsScreen',\n  'MatchmakingScreen',\n  'MentalHealthScreen',\n  'GoldenAgeScreen',\n  'LanguagesScreen',\n  'FoodScreen',\n  'ClothesScreen',\n  'BooksScreen',\n  'FurnitureScreen',\n  'MedicalScreen',\n  'AnimalsScreen',\n  'HousingScreen',\n  'SupportScreen',\n  'EducationScreen',\n  'EnvironmentScreen',\n  'TechnologyScreen',\n  'MusicScreen',\n  'GamesScreen',\n  'RiddlesScreen',\n  'RecipesScreen',\n  'PlantsScreen',\n  'WasteScreen',\n  'ArtScreen',\n  'SportsScreen',\n  'ChatListScreen',\n  'ChatDetailScreen',\n  'NewChatScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n  'SettingsScreen',\n  'DiscoverPeopleScreen',\n];\n\nexport const VALID_ADMIN_STACK_ROUTES: string[] = [\n  'AdminDashboard',\n  'AdminMoney',\n  'AdminPeople',\n  'AdminReview',\n  'AdminTasks',\n  'AdminTimeManagement',\n  'SettingsScreen',\n  'ChatListScreen',\n  'ChatDetailScreen',\n  'NewChatScreen',\n  'NotificationsScreen',\n  'AboutKarmaCommunityScreen',\n];\n\n// Combined route map for quick lookup\nexport const VALID_ROUTES_MAP: Record<string, string[]> = {\n  RootStack: VALID_ROOT_ROUTES,\n  BottomTab: VALID_BOTTOM_TAB_ROUTES,\n  HomeTabStack: VALID_HOME_TAB_STACK_ROUTES,\n  SearchTabStack: VALID_SEARCH_TAB_STACK_ROUTES,\n  ProfileTabStack: VALID_PROFILE_TAB_STACK_ROUTES,\n  DonationsStack: VALID_DONATIONS_STACK_ROUTES,\n  AdminStack: VALID_ADMIN_STACK_ROUTES,\n};\n\n// Navigation params types for common routes\nexport interface CommonNavigationParams {\n  hideTopBar?: boolean;\n  hideBottomBar?: boolean;\n  showPosts?: boolean;\n}\n\n// Type helpers\nexport type AllRouteNames = \n  | keyof RootStackParamList\n  | keyof BottomTabNavigatorParamList\n  | keyof HomeTabStackParamList\n  | keyof SearchTabStackParamList\n  | keyof ProfileTabStackParamList\n  | keyof DonationsStackParamList\n  | keyof AdminStackParamList;\n\n\n\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/RTLConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/__tests__/authService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/apiService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1193,1196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1193,1196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1241,1244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1241,1244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3294,3297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3294,3297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3483,3486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3483,3486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":327,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":327,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11430,11433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11430,11433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":416,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":416,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14667,14670],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14667,14670],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":423,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":423,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14849,14852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14849,14852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":466,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":466,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16171,16174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16171,16174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":531,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":531,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18057,18060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18057,18060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":542,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":542,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18392,18395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18392,18395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":583,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":583,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19476,19479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19476,19479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":594,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":594,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19778,19781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19778,19781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":617,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":617,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20528,20531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20528,20531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":625,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":625,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20753,20756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20753,20756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used.","line":731,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":731,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":782,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":782,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25524,25527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25524,25527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":789,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":789,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25720,25723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25720,25723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":850,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":850,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27625,27628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27625,27628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":870,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":870,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28089,28092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28089,28092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":890,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":890,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28553,28556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28553,28556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":899,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":899,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28897,28900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28897,28900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":900,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":900,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29012,29015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29012,29015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":908,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":908,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29277,29280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29277,29280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":917,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":917,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29629,29632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29629,29632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":933,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":933,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30352,30355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30352,30355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":934,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":934,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30476,30479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30476,30479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":942,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":942,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31030,31033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31030,31033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":943,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":943,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31193,31196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31193,31196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":992,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":992,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32751,32754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32751,32754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Typed API client for the new backend (users, donations, rides, stats, chat).\n// - Reached from: Higher-level services/components when `USE_BACKEND` is enabled.\n// - Provides: request helpers and endpoint-specific methods returning ApiResponse<T>.\n// - Env: Base URL derived from `dbConfig` (EXPO_PUBLIC_API_BASE_URL).\n// Enhanced API service for connecting to the new backend\n\n// TODO: Add comprehensive error handling with retry logic and exponential backoff\n// TODO: Implement proper TypeScript interfaces for all API requests/responses\n// TODO: Add request/response interceptors for authentication and logging\n// TODO: Add request caching mechanism for GET requests\n// TODO: Implement proper timeout handling and abort controllers\n// TODO: Add network connectivity checks before making requests\n// TODO: Add comprehensive unit tests for all API methods\n// TODO: Implement proper API versioning support\n// TODO: Add request/response transformation middleware\n// TODO: Add comprehensive logging and monitoring\nimport { API_BASE_URL as CONFIG_API_BASE_URL } from './config.constants';\nimport { logger } from './loggerService';\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  user?: any; // For resolveUserId endpoint compatibility\n  error?: string;\n  message?: string;\n  version?: string;\n}\n\nclass ApiService {\n  private _baseURL: string | null = null;\n\n  private get baseURL(): string {\n    // Try environment variables first (highest priority - for local development)\n    if (typeof process !== 'undefined' && process.env?.EXPO_PUBLIC_API_BASE_URL) {\n      return process.env.EXPO_PUBLIC_API_BASE_URL;\n    }\n\n    // For web, detect environment from domain at runtime\n    if (typeof window !== 'undefined' && window.location) {\n      const hostname = window.location.hostname;\n\n      // If on localhost, use local server\n      if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname === '0.0.0.0') {\n        return 'http://localhost:3001';\n      }\n\n      // If on dev domain, use dev server\n      if (hostname.includes('dev.')) {\n        return 'https://kc-mvp-server-development.up.railway.app';\n      }\n\n      // Otherwise use production server\n      return 'https://kc-mvp-server-production.up.railway.app';\n    }\n\n    // For native apps, use lazy initialization\n    if (this._baseURL === null) {\n      this._baseURL = CONFIG_API_BASE_URL;\n    }\n    return this._baseURL;\n  }\n\n  // Tasks APIs\n  async getTaskHierarchy(taskId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}/hierarchy`); // Will be implemented in backend if needed\n  }\n\n  async getTasks(filters: {\n    status?: 'open' | 'in_progress' | 'done' | 'archived' | 'stuck' | 'testing';\n    priority?: 'low' | 'medium' | 'high';\n    category?: string;\n    assignee?: string;\n    q?: string;\n    limit?: number;\n    offset?: number;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && String(value).length > 0) {\n        params.append(key, String(value));\n      }\n    });\n    const qs = params.toString();\n    return this.request(`/api/tasks${qs ? `?${qs}` : ''}`);\n  }\n\n  async createTask(taskData: any): Promise<ApiResponse> {\n    return this.request('/api/tasks', {\n      method: 'POST',\n      body: JSON.stringify(taskData),\n    });\n  }\n\n  async updateTask(taskId: string, updateData: any): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  async deleteTask(taskId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async getSubtasks(taskId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}/subtasks`);\n  }\n\n  async getTaskTree(taskId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}/tree`);\n  }\n\n  async logTaskHours(taskId: string, hours: number, userId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/${taskId}/log-hours`, {\n      method: 'POST',\n      body: JSON.stringify({ hours, user_id: userId }),\n    });\n  }\n\n  async getHoursReport(managerId: string): Promise<ApiResponse> {\n    return this.request(`/api/tasks/hours-report/${managerId}`);\n  }\n\n  private normalizeEndpoint(endpoint: string): string {\n    if (!endpoint) {\n      return '/';\n    }\n    return endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n  }\n\n  private buildUrl(endpoint: string): string {\n    const normalizedEndpoint = this.normalizeEndpoint(endpoint);\n    if (!this.baseURL) {\n      return normalizedEndpoint;\n    }\n    const normalizedBase = this.baseURL.replace(/\\/+$/, '');\n    if (!normalizedBase) {\n      return normalizedEndpoint;\n    }\n    return `${normalizedBase}${normalizedEndpoint}`;\n  }\n\n  /**\n   * Validate token and refresh if expired\n   * @returns Valid access token or null if refresh failed\n   */\n  private async validateAndRefreshToken(): Promise<string | null> {\n    try {\n      const AsyncStorage = await import('@react-native-async-storage/async-storage');\n      const jwtToken = await AsyncStorage.default.getItem('jwt_access_token');\n      const expiresAt = await AsyncStorage.default.getItem('jwt_token_expires_at');\n      const refreshToken = await AsyncStorage.default.getItem('jwt_refresh_token');\n\n      // If no access token, try Firebase fallback\n      if (!jwtToken) {\n        return null;\n      }\n\n      // Check if token is still valid (with 1 minute buffer)\n      if (expiresAt && parseInt(expiresAt) > Date.now() + 60000) {\n        return jwtToken;\n      }\n\n      // Token is expired or about to expire, try to refresh\n      if (!refreshToken) {\n        console.warn('JWT token expired and no refresh token available');\n        await AsyncStorage.default.multiRemove(['jwt_access_token', 'jwt_token_expires_at']);\n        return null;\n      }\n\n      console.log('ğŸ”„ Attempting to refresh expired JWT token');\n\n      // Call refresh endpoint\n      const refreshUrl = this.buildUrl('/auth/refresh');\n      const response = await fetch(refreshUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ refreshToken }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        console.warn('âŒ Token refresh failed:', data.error || 'Unknown error');\n        // Clear all tokens if refresh failed\n        await AsyncStorage.default.multiRemove([\n          'jwt_access_token',\n          'jwt_token_expires_at',\n          'jwt_refresh_token',\n        ]);\n        return null;\n      }\n\n      // Save new access token\n      const newAccessToken = data.accessToken;\n      const newExpiresAt = Date.now() + (data.expiresIn * 1000);\n      await AsyncStorage.default.setItem('jwt_access_token', newAccessToken);\n      await AsyncStorage.default.setItem('jwt_token_expires_at', String(newExpiresAt));\n\n      console.log('âœ… Token refreshed successfully');\n      return newAccessToken;\n    } catch (error) {\n      console.warn('âŒ Error during token validation/refresh:', error);\n      try {\n        const AsyncStorage = await import('@react-native-async-storage/async-storage');\n        await AsyncStorage.default.multiRemove([\n          'jwt_access_token',\n          'jwt_token_expires_at',\n          'jwt_refresh_token',\n        ]);\n      } catch (cleanupError) {\n        console.warn('Failed to cleanup tokens:', cleanupError);\n      }\n      return null;\n    }\n  }\n\n  async getAuthToken(): Promise<string | null> {\n    try {\n      // Try to validate and refresh JWT token if needed\n      const jwtToken = await this.validateAndRefreshToken();\n      if (jwtToken) {\n        return jwtToken;\n      }\n\n      // Fallback: Try to get Firebase ID token\n      // This is robust because it automatically refreshes if needed\n      const { getFirebase } = await import('./firebaseClient');\n      const { getAuth } = await import('firebase/auth');\n      const { app } = getFirebase();\n      const auth = getAuth(app);\n      const user = auth.currentUser;\n\n      if (user) {\n        // forceRefresh=false by default, but if we suspect issues we could try true\n        // However, standard getIdToken() handles refresh automatically.\n        const token = await user.getIdToken();\n        return token;\n      }\n    } catch (error) {\n      console.warn('Failed to get auth token:', error);\n    }\n\n    return null;\n  }\n\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {},\n    retryOn401: boolean = true\n  ): Promise<ApiResponse<T>> {\n    // TODO: Add request ID for tracing and debugging\n    try {\n      const url = this.buildUrl(endpoint);\n\n      // Get authentication token\n      const authToken = await this.getAuthToken();\n\n      const config: RequestInit = {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(authToken ? { 'Authorization': `Bearer ${authToken}` } : {}),\n          ...options.headers,\n        },\n        ...options,\n      };\n\n      const isPeriodic = endpoint.includes('stats/community');\n      logger.debug('API', `${config.method || 'GET'} ${endpoint}`, { auth: !!authToken }, isPeriodic ? { periodic: true } : undefined);\n\n      // Add timeout to prevent hanging requests\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout for slower servers\n\n      try {\n        const response = await fetch(url, {\n          ...config,\n          signal: controller.signal,\n        });\n        clearTimeout(timeoutId);\n\n        const data = await response.json();\n\n        // Handle 401 Unauthorized - try to refresh token and retry\n        if (response.status === 401 && retryOn401 && authToken) {\n          logger.warn('API', 'Received 401, attempting token refresh and retry', { endpoint });\n          \n          // Try to refresh token\n          const refreshedToken = await this.validateAndRefreshToken();\n          \n          if (refreshedToken) {\n            // Retry request with new token (only once to prevent infinite loops)\n            logger.info('API', 'Retrying request with refreshed token', { endpoint });\n            return this.request<T>(endpoint, options, false);\n          } else {\n            // Refresh failed, clear session\n            logger.error('API', 'Token refresh failed, clearing session', { endpoint });\n            const AsyncStorage = await import('@react-native-async-storage/async-storage');\n            await AsyncStorage.default.multiRemove([\n              'jwt_access_token',\n              'jwt_token_expires_at',\n              'jwt_refresh_token',\n            ]);\n            \n            return {\n              success: false,\n              error: 'Session expired. Please log in again.',\n            };\n          }\n        }\n\n        if (!response.ok) {\n          logger.error('API', `API Error ${response.status}`, { endpoint, status: response.status, data });\n          return {\n            success: false,\n            error: data.message || data.error || 'Network error',\n          };\n        }\n\n        logger.debug('API', `Response ${endpoint}`, { success: true }, isPeriodic ? { periodic: true } : undefined);\n        return data;\n      } catch (fetchError: any) {\n        clearTimeout(timeoutId);\n\n        // Check if error is due to abort (timeout)\n        if (fetchError.name === 'AbortError') {\n          logger.error('API', 'Request timeout', { endpoint });\n          return {\n            success: false,\n            error: 'Request timeout - server is not responding',\n          };\n        }\n        throw fetchError;\n      }\n    } catch (error) {\n      logger.error('API', 'Network error', { error: String(error) });\n      return {\n        success: false,\n        error: 'Network error - please check your connection',\n      };\n    }\n  }\n\n  // User APIs\n  async searchUsers(query: string): Promise<ApiResponse> {\n    return this.request(`/api/users/search?q=${encodeURIComponent(query)}`);\n  }\n\n  async setManager(userId: string, managerId: string | null, requestingUserId?: string): Promise<ApiResponse> {\n    const body = { managerId, requestingUserId };\n    console.log(`[apiService.setManager] Sending request: userId=${userId}, managerId=${managerId} (type: ${typeof managerId}), body:`, JSON.stringify(body));\n    return this.request(`/api/users/${userId}/set-manager`, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n\n  async getUserHierarchy(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}/hierarchy`);\n  }\n\n  async manageHierarchy(subordinateId: string, action: 'add' | 'remove', managerId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${subordinateId}/hierarchy/manage`, {\n      method: 'POST',\n      body: JSON.stringify({ action, managerId }),\n    });\n  }\n\n  /**\n   * Promote a user to admin role (with hierarchy validation)\n   * The target user will become an admin under the requesting admin\n   */\n  async promoteToAdmin(targetUserId: string, requestingAdminId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${targetUserId}/promote-admin`, {\n      method: 'POST',\n      body: JSON.stringify({ requestingAdminId }),\n    });\n  }\n\n  /**\n   * Demote an admin to regular user or volunteer (remove admin role)\n   * Can only demote admins that are your subordinates\n   * @param convertToVolunteer - if true, user becomes volunteer under requesting admin\n   */\n  async demoteAdmin(targetUserId: string, requestingAdminId: string, convertToVolunteer: boolean = false): Promise<ApiResponse> {\n    return this.request(`/api/users/${targetUserId}/demote-admin`, {\n      method: 'POST',\n      body: JSON.stringify({ requestingAdminId, convertToVolunteer }),\n    });\n  }\n\n  /**\n   * Promote a user to volunteer role\n   * Any manager (hierarchy_level >= 1) can promote users to volunteer\n   * The target user will become a volunteer under the requesting admin\n   */\n  async promoteToVolunteer(targetUserId: string, requestingAdminId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${targetUserId}/promote-volunteer`, {\n      method: 'POST',\n      body: JSON.stringify({ requestingAdminId }),\n    });\n  }\n\n  /**\n   * Get users eligible for admin promotion by a specific admin\n   */\n  async getEligibleForPromotion(adminId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/eligible-for-promotion/${adminId}`);\n  }\n\n  async registerUser(userData: any): Promise<ApiResponse> {\n    return this.request('/api/users/register', {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n  }\n\n  async loginUser(credentials: any): Promise<ApiResponse> {\n    return this.request('/api/users/login', {\n      method: 'POST',\n      body: JSON.stringify(credentials),\n    });\n  }\n\n  async getUserById(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}`);\n  }\n\n  /**\n   * Resolve user ID from firebase_uid, google_id, or email to UUID\n   * This is used when the client has Firebase UID or Google ID and needs the database UUID\n   */\n  async resolveUserId(params: { firebase_uid?: string; google_id?: string; email?: string }): Promise<ApiResponse> {\n    return this.request('/api/users/resolve-id', {\n      method: 'POST',\n      body: JSON.stringify(params),\n    });\n  }\n\n  async getUsers(filters: {\n    city?: string;\n    search?: string;\n    limit?: number;\n    offset?: number;\n    forceRefresh?: boolean;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        if (key === 'forceRefresh' && value === true) {\n          params.append(key, 'true');\n        } else if (key !== 'forceRefresh') {\n          params.append(key, value.toString());\n        }\n      }\n    });\n\n    return this.request(`/api/users?${params.toString()}`);\n  }\n\n  async updateUser(userId: string, updateData: any): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  async getUserStats(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}/stats`);\n  }\n\n  async getUserActivities(userId: string, limit = 50): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}/activities?limit=${limit}`);\n  }\n\n  async getUsersSummary(): Promise<ApiResponse> {\n    return this.request('/api/users/stats/summary');\n  }\n\n  /**\n   * Get full admin hierarchy tree starting from super admin\n   * Returns a nested tree structure of all managers\n   */\n  async getFullAdminHierarchy(): Promise<ApiResponse> {\n    return this.request('/api/users/hierarchy/tree');\n  }\n\n  async followUser(userId: string, followerId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}/follow`, {\n      method: 'POST',\n      body: JSON.stringify({ follower_id: followerId }),\n    });\n  }\n\n  async unfollowUser(userId: string, followerId: string): Promise<ApiResponse> {\n    return this.request(`/api/users/${userId}/follow`, {\n      method: 'DELETE',\n      body: JSON.stringify({ follower_id: followerId }),\n    });\n  }\n\n  // Donations APIs\n  async getDonationCategories(): Promise<ApiResponse> {\n    return this.request('/api/donations/categories');\n  }\n\n  async getDonations(filters: {\n    type?: string;\n    category?: string;\n    city?: string;\n    status?: string;\n    limit?: number;\n    offset?: number;\n    search?: string;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined) {\n        params.append(key, value.toString());\n      }\n    });\n\n    return this.request(`/api/donations?${params.toString()}`);\n  }\n\n  async createDonation(donationData: any): Promise<ApiResponse> {\n    return this.request('/api/donations', {\n      method: 'POST',\n      body: JSON.stringify(donationData),\n    });\n  }\n\n  async getDonationById(donationId: string): Promise<ApiResponse> {\n    return this.request(`/api/donations/${donationId}`);\n  }\n\n  async updateDonation(donationId: string, updateData: any): Promise<ApiResponse> {\n    return this.request(`/api/donations/${donationId}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  async deleteDonation(donationId: string): Promise<ApiResponse> {\n    return this.request(`/api/donations/${donationId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async getUserDonations(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/donations/user/${userId}`);\n  }\n\n  async getDonationStats(): Promise<ApiResponse> {\n    return this.request('/api/donations/stats/summary');\n  }\n\n  // Rides APIs\n  async getRides(filters: {\n    from_city?: string;\n    to_city?: string;\n    date?: string;\n    status?: string;\n    limit?: number;\n    offset?: number;\n    include_past?: string;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined) {\n        params.append(key, value.toString());\n      }\n    });\n\n    return this.request(`/api/rides?${params.toString()}`);\n  }\n\n  async createRide(rideData: any): Promise<ApiResponse> {\n    return this.request('/api/rides', {\n      method: 'POST',\n      body: JSON.stringify(rideData),\n    });\n  }\n\n  async getRideById(rideId: string): Promise<ApiResponse> {\n    return this.request(`/api/rides/${rideId}`);\n  }\n\n  async bookRide(rideId: string, bookingData: any): Promise<ApiResponse> {\n    return this.request(`/api/rides/${rideId}/book`, {\n      method: 'POST',\n      body: JSON.stringify(bookingData),\n    });\n  }\n\n  async updateBookingStatus(bookingId: string, status: string): Promise<ApiResponse> {\n    return this.request(`/api/rides/bookings/${bookingId}/status`, {\n      method: 'PUT',\n      body: JSON.stringify({ status }),\n    });\n  }\n\n  async getUserRides(userId: string, type?: 'driver' | 'passenger'): Promise<ApiResponse> {\n    const params = type ? `?type=${type}` : '';\n    return this.request(`/api/rides/user/${userId}${params}`);\n  }\n\n  async getRideStats(): Promise<ApiResponse> {\n    return this.request('/api/rides/stats/summary');\n  }\n\n  async updateRide(rideId: string, updateData: any): Promise<ApiResponse> {\n    return this.request(`/api/rides/${rideId}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  // Items Delivery APIs\n  async updateItem(itemId: string, updateData: any): Promise<ApiResponse> {\n    return this.request(`/api/items-delivery/${itemId}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  // Stats APIs\n  async getCommunityStats(filters: {\n    city?: string;\n    period?: string;\n    forceRefresh?: boolean;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined) {\n        if (key === 'forceRefresh' && value === true) {\n          params.append(key, 'true');\n        } else if (key !== 'forceRefresh') {\n          params.append(key, value.toString());\n        }\n      }\n    });\n\n    return this.request(`/api/stats/community?${params.toString()}`);\n  }\n\n  async getCommunityStatsVersion(city?: string): Promise<ApiResponse> {\n    const params = city ? `?city=${city}` : '';\n    return this.request(`/api/stats/community/version${params}`);\n  }\n\n  async getCommunityTrends(statType: string, city?: string, days = 30): Promise<ApiResponse> {\n    const params = new URLSearchParams({ stat_type: statType, days: days.toString() });\n    if (city) {\n      params.append('city', city);\n    }\n\n    return this.request(`/api/stats/community/trends?${params.toString()}`);\n  }\n\n  async getStatsByCity(statType?: string): Promise<ApiResponse> {\n    const params = statType ? `?stat_type=${statType}` : '';\n    return this.request(`/api/stats/community/cities${params}`);\n  }\n\n  async trackSiteVisit(): Promise<ApiResponse> {\n    return this.request('/api/stats/track-visit', {\n      method: 'POST',\n    });\n  }\n\n  async incrementStat(statData: {\n    stat_type: string;\n    value?: number;\n    city?: string;\n  }): Promise<ApiResponse> {\n    return this.request('/api/stats/increment', {\n      method: 'POST',\n      body: JSON.stringify(statData),\n    });\n  }\n\n  async resetCommunityStats(): Promise<ApiResponse> {\n    return this.request('/api/stats/community/reset', {\n      method: 'POST',\n    });\n  }\n\n  async getCategoryAnalytics(): Promise<ApiResponse> {\n    return this.request('/api/stats/analytics/categories');\n  }\n\n  async getUserAnalytics(): Promise<ApiResponse> {\n    return this.request('/api/stats/analytics/users');\n  }\n\n  async getDashboardStats(): Promise<ApiResponse> {\n    return this.request('/api/stats/dashboard');\n  }\n\n  async getRealTimeStats(): Promise<ApiResponse> {\n    return this.request('/api/stats/real-time');\n  }\n\n  async getStatDetails(statType: string): Promise<ApiResponse> {\n    return this.request(`/api/stats/details/${statType}`);\n  }\n\n  // Posts APIs\n  async getPosts(limit = 20, offset = 0, userId?: string): Promise<ApiResponse> {\n    let url = `/api/posts?limit=${limit}&offset=${offset}`;\n    if (userId) {\n      url += `&user_id=${userId}`;\n    }\n    return this.request(url);\n  }\n\n  async getUserPosts(userId: string, limit = 20, viewerId?: string): Promise<ApiResponse> {\n    let url = `/api/posts/user/${userId}?limit=${limit}`;\n    if (viewerId) {\n      url += `&viewer_id=${viewerId}`;\n    }\n    return this.request(url);\n  }\n\n  async deletePost(postId: string, userId: string): Promise<ApiResponse> {\n    // userId is used for local Optimistic UI updates if needed, but not sent to server\n    // Server extracts user ID from JWT token\n    return this.request(`/api/posts/${postId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Notifications APIs\n  async getNotifications(userId: string, limit = 50, offset = 0): Promise<ApiResponse> {\n    return this.request(`/api/notifications/${userId}?limit=${limit}&offset=${offset}`);\n  }\n\n  async markNotificationAsRead(userId: string, notificationId: string): Promise<ApiResponse> {\n    return this.request(`/api/notifications/${userId}/${notificationId}/read`, {\n      method: 'PUT',\n    });\n  }\n\n  async markAllNotificationsAsRead(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/notifications/${userId}/read-all`, {\n      method: 'POST',\n    });\n  }\n\n  async deleteNotification(userId: string, notificationId: string): Promise<ApiResponse> {\n    return this.request(`/api/notifications/${userId}/${notificationId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async clearAllNotifications(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/notifications/${userId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Admin APIs\n  async adminWipeAllData(): Promise<ApiResponse> {\n    // WARNING: This should be protected by server-side admin auth\n    return this.request('/api/admin/wipe', {\n      method: 'POST',\n      body: JSON.stringify({ confirm: true }),\n    });\n  }\n\n  // Chat APIs\n  async getUserConversations(userId: string): Promise<ApiResponse> {\n    return this.request(`/api/chat/conversations/user/${userId}`);\n  }\n\n  async createConversation(conversationData: any): Promise<ApiResponse> {\n    return this.request('/api/chat/conversations', {\n      method: 'POST',\n      body: JSON.stringify(conversationData),\n    });\n  }\n\n  async sendMessage(messageData: any): Promise<ApiResponse> {\n    return this.request('/api/chat/messages', {\n      method: 'POST',\n      body: JSON.stringify(messageData),\n    });\n  }\n\n  async getConversationMessages(\n    conversationId: string,\n    limit = 50,\n    offset = 0\n  ): Promise<ApiResponse> {\n    return this.request(\n      `/api/chat/conversations/${conversationId}/messages?limit=${limit}&offset=${offset}`\n    );\n  }\n\n  async markMessageAsRead(messageId: string, userId: string): Promise<ApiResponse> {\n    return this.request(`/api/chat/messages/${messageId}/read`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId }),\n    });\n  }\n\n  async markAllMessagesAsRead(conversationId: string, userId: string): Promise<ApiResponse> {\n    return this.request(`/api/chat/conversations/${conversationId}/read-all`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId }),\n    });\n  }\n\n  async searchMessages(query: string, userId: string): Promise<ApiResponse> {\n    return this.request(`/api/chat/search?q=${encodeURIComponent(query)}&user_id=${userId}`);\n  }\n\n  // Community Members APIs\n  async getCommunityMembers(filters: {\n    status?: 'active' | 'inactive';\n    search?: string;\n  } = {}): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && String(value).length > 0) {\n        params.append(key, String(value));\n      }\n    });\n    const qs = params.toString();\n    return this.request(`/api/community-members${qs ? `?${qs}` : ''}`);\n  }\n\n  async getCommunityMember(memberId: string): Promise<ApiResponse> {\n    return this.request(`/api/community-members/${memberId}`);\n  }\n\n  async createCommunityMember(memberData: {\n    name: string;\n    role: string;\n    description?: string;\n    contact_info?: {\n      email?: string;\n      phone?: string;\n      [key: string]: any;\n    };\n    status?: 'active' | 'inactive';\n    created_by?: string;\n  }): Promise<ApiResponse> {\n    return this.request('/api/community-members', {\n      method: 'POST',\n      body: JSON.stringify(memberData),\n    });\n  }\n\n  async updateCommunityMember(\n    memberId: string,\n    updateData: {\n      name?: string;\n      role?: string;\n      description?: string;\n      contact_info?: {\n        email?: string;\n        phone?: string;\n        [key: string]: any;\n      };\n      status?: 'active' | 'inactive';\n    }\n  ): Promise<ApiResponse> {\n    return this.request(`/api/community-members/${memberId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  async deleteCommunityMember(memberId: string): Promise<ApiResponse> {\n    return this.request(`/api/community-members/${memberId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // CRM APIs\n  get crm() {\n    return {\n      getAll: (filters: any) => {\n        const params = new URLSearchParams();\n        Object.entries(filters || {}).forEach(([k, v]) => {\n          if (v !== undefined && v !== null && String(v).length > 0) {\n            params.append(k, String(v));\n          }\n        });\n        return this.request(`/api/crm?${params.toString()}`);\n      },\n      create: (data: any) => this.request('/api/crm', { method: 'POST', body: JSON.stringify(data) }),\n      update: (id: string, data: any) => this.request(`/api/crm/${id}`, { method: 'PATCH', body: JSON.stringify(data) }),\n      delete: (id: string) => this.request(`/api/crm/${id}`, { method: 'DELETE' }),\n    };\n  }\n\n  // Admin Files APIs\n  get adminFiles() {\n    return {\n      getAll: (filters: any) => {\n        const params = new URLSearchParams();\n        Object.entries(filters || {}).forEach(([k, v]) => {\n          if (v !== undefined && v !== null && String(v).length > 0) {\n            params.append(k, String(v));\n          }\n        });\n        return this.request(`/api/admin-files?${params.toString()}`);\n      },\n      create: (data: any) => this.request('/api/admin-files', { method: 'POST', body: JSON.stringify(data) }),\n      delete: (id: string) => this.request(`/api/admin-files/${id}`, { method: 'DELETE' }),\n    };\n  }\n\n  // Admin Tables APIs\n  get adminTables() {\n    return {\n      getAll: () => this.request('/api/admin/tables'),\n      getById: (id: string, includeRows?: boolean, page?: number, limit?: number) => {\n        const params = new URLSearchParams();\n        if (includeRows) params.append('includeRows', 'true');\n        if (page) params.append('page', String(page));\n        if (limit) params.append('limit', String(limit));\n        return this.request(`/api/admin/tables/${id}?${params.toString()}`);\n      },\n      create: (data: any) => this.request('/api/admin/tables', { method: 'POST', body: JSON.stringify(data) }),\n      update: (id: string, data: any) => this.request(`/api/admin/tables/${id}`, { method: 'PUT', body: JSON.stringify(data) }),\n      delete: (id: string) => this.request(`/api/admin/tables/${id}`, { method: 'DELETE' }),\n      getRows: (tableId: string, page?: number, limit?: number) => {\n        const params = new URLSearchParams();\n        if (page) params.append('page', String(page));\n        if (limit) params.append('limit', String(limit));\n        return this.request(`/api/admin/tables/${tableId}/rows?${params.toString()}`);\n      },\n      createRow: (tableId: string, data: any) => this.request(`/api/admin/tables/${tableId}/rows`, { method: 'POST', body: JSON.stringify(data) }),\n      updateRow: (tableId: string, rowId: string, data: any) => this.request(`/api/admin/tables/${tableId}/rows/${rowId}`, { method: 'PUT', body: JSON.stringify(data) }),\n      deleteRow: (tableId: string, rowId: string) => this.request(`/api/admin/tables/${tableId}/rows/${rowId}`, { method: 'DELETE' }),\n    };\n  }\n\n  // Legacy API fallback\n  async legacyRequest<T>(collection: string, userId: string, itemId?: string): Promise<T | null> {\n    try {\n      const endpoint = itemId\n        ? `/api/items/${collection}/${userId}/${itemId}`\n        : `/api/items/${collection}/${userId}`;\n\n      const response = await this.request<T>(endpoint);\n      return response.success ? response.data || null : null;\n    } catch (error) {\n      console.error('Legacy API request failed:', error);\n      return null;\n    }\n  }\n\n  // Utility methods\n  isBackendAvailable(): boolean {\n    return true; // Backend is always available\n  }\n\n  async healthCheck(): Promise<boolean> {\n    try {\n      const res = await fetch(this.buildUrl('/health/redis'));\n      return res.ok;\n    } catch {\n      return false;\n    }\n  }\n}\n\n// Lazy singleton to avoid circular dependency issues during module initialization\nlet _apiServiceInstance: ApiService | null = null;\n\nfunction getApiServiceInstance(): ApiService {\n  if (_apiServiceInstance === null) {\n    _apiServiceInstance = new ApiService();\n  }\n  return _apiServiceInstance;\n}\n\n// Export as a Proxy to ensure lazy initialization\nexport const apiService = new Proxy({} as ApiService, {\n  get(target, prop) {\n    const instance = getApiServiceInstance();\n    const value = (instance as any)[prop];\n    return typeof value === 'function' ? value.bind(instance) : value;\n  }\n});\n\nexport default apiService;\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/authService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inMemoryPersistence' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"inMemoryPersistence"},"fix":{"range":[1306,1329],"text":""},"desc":"Remove unused variable \"inMemoryPersistence\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AsyncStorage' is defined but never used.","line":33,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"AsyncStorage"},"fix":{"range":[1396,1466],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1485,1488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1485,1488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Thin wrapper around Firebase Auth for email/password flows and verification utilities.\n// - Reached from: `LoginScreen` for email flows; occasionally for password reset.\n// - Provides: sign up/in, verify email, check verification, sign out, send password reset.\n// utils/authService.ts\n\n// TODO: Add comprehensive error handling with proper error types and messages\n// TODO: Implement proper authentication state management and persistence\n// TODO: Add comprehensive input validation for email and password\n// TODO: Implement proper password strength validation\n// TODO: Add comprehensive logging and monitoring for all auth operations\n// TODO: Implement proper session management and token refresh\n// TODO: Add comprehensive security measures (rate limiting, brute force protection)\n// TODO: Create proper TypeScript interfaces for all auth-related types\n// TODO: Add comprehensive unit tests for all authentication functions\n// TODO: Implement proper multi-factor authentication support\nimport { getFirebase } from './firebaseClient';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  sendEmailVerification,\n  fetchSignInMethodsForEmail,\n  signOut,\n  reload,\n  User,\n  sendPasswordResetEmail,\n  setPersistence,\n  browserLocalPersistence,\n  inMemoryPersistence,\n} from 'firebase/auth';\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nlet authInstance: any = null;\n\nexport const getAuthInstance = () => {\n  if (!authInstance) {\n    const { app } = getFirebase();\n    authInstance = getAuth(app);\n    \n    // Configure persistence based on platform\n    if (Platform.OS === 'web') {\n      // Web: use browserLocalPersistence (localStorage)\n      setPersistence(authInstance, browserLocalPersistence).catch((error) => {\n        console.warn('Failed to set web auth persistence:', error);\n      });\n    } else {\n      // React Native: Firebase automatically uses AsyncStorage\n      // No need to set persistence explicitly - it's the default\n      console.log('ğŸ”¥ Firebase Auth - Using native AsyncStorage persistence (default)');\n    }\n  }\n  \n  return authInstance;\n};\n\nexport async function getSignInMethods(email: string): Promise<string[]> {\n  // TODO: Add comprehensive input validation for email parameter\n  // TODO: Add proper error handling and user-friendly error messages\n  // TODO: Implement caching mechanism for frequently checked emails\n  const auth = getAuthInstance();\n  return fetchSignInMethodsForEmail(auth, email);\n}\n\nexport async function signUpWithEmail(email: string, password: string): Promise<User> {\n  // TODO: Add comprehensive input validation (email format, password strength)\n  // TODO: Add proper error handling with specific error codes\n  // TODO: Implement user profile creation after successful signup\n  // TODO: Add analytics tracking for successful/failed signups\n  const auth = getAuthInstance();\n  const cred = await createUserWithEmailAndPassword(auth, email, password);\n  return cred.user;\n}\n\nexport async function signInWithEmail(email: string, password: string): Promise<User> {\n  const auth = getAuthInstance();\n  const cred = await signInWithEmailAndPassword(auth, email, password);\n  return cred.user;\n}\n\nexport async function sendVerification(user?: User): Promise<void> {\n  const auth = getAuthInstance();\n  const u = user || auth.currentUser;\n  if (!u) throw new Error('No current user');\n  await sendEmailVerification(u);\n}\n\nexport async function isEmailVerified(): Promise<boolean> {\n  const auth = getAuthInstance();\n  const u = auth.currentUser;\n  if (!u) return false;\n  await reload(u);\n  return !!u.emailVerified;\n}\n\nexport async function signOutFirebase(): Promise<void> {\n  const auth = getAuthInstance();\n  await signOut(auth);\n}\n\nexport async function sendPasswordReset(email: string): Promise<void> {\n  const auth = getAuthInstance();\n  await sendPasswordResetEmail(auth, email);\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/authTestUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[204,207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[204,207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3320,3323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3320,3323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":197,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":226,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6249,6252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6249,6252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'response' is assigned a value but never used.","line":334,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":334,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'invalidJWT' is assigned a value but never used.","line":376,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":376,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emptyJWT' is assigned a value but never used.","line":377,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":377,"endColumn":19},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":417,"column":28,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":417,"endColumn":80},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":471,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":471,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13775,13778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13775,13778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Platform } from 'react-native';\nimport { logger } from './loggerService';\n\nexport interface AuthTestResult {\n  test: string;\n  status: 'pass' | 'fail' | 'warning';\n  message: string;\n  details?: any;\n}\n\nexport interface AuthTestSuite {\n  timestamp: string;\n  platform: string;\n  results: AuthTestResult[];\n  summary: {\n    total: number;\n    passed: number;\n    failed: number;\n    warnings: number;\n  };\n}\n\nexport class AuthenticationTester {\n  \n  /**\n   * Run comprehensive authentication tests\n   */\n  static async runAuthTests(config?: {\n    webClientId?: string;\n    iosClientId?: string;\n    androidClientId?: string;\n    redirectUri?: string;\n  }): Promise<AuthTestSuite> {\n    const results: AuthTestResult[] = [];\n    \n    logger.info('AuthTester', 'Starting authentication test suite');\n    \n    // Test 1: Environment Variables\n    results.push(this.testEnvironmentVariables());\n    \n    // Test 2: Client ID Configuration\n    results.push(this.testClientIdConfiguration(config));\n    \n    // Test 3: Redirect URI Format\n    if (config?.redirectUri) {\n      results.push(this.testRedirectUriFormat(config.redirectUri));\n    }\n    \n    // Test 4: Platform-specific Configuration\n    results.push(this.testPlatformConfiguration(config));\n    \n    // Test 5: Network Connectivity\n    const networkTest = await this.testNetworkConnectivity();\n    results.push(networkTest);\n    \n    // Test 6: Google OAuth Endpoints\n    const googleTest = await this.testGoogleOAuthEndpoints();\n    results.push(googleTest);\n    \n    // Test 7: JWT Validation\n    results.push(this.testJWTValidation());\n    \n    // Test 8: Storage Access\n    const storageTest = await this.testStorageAccess();\n    results.push(storageTest);\n    \n    const summary = this.calculateSummary(results);\n    \n    const testSuite: AuthTestSuite = {\n      timestamp: new Date().toISOString(),\n      platform: Platform.OS,\n      results,\n      summary\n    };\n    \n    logger.info('AuthTester', 'Authentication test suite completed', {\n      summary,\n      failedTests: results.filter(r => r.status === 'fail').map(r => r.test)\n    });\n    \n    return testSuite;\n  }\n  \n  /**\n   * Test environment variables\n   */\n  private static testEnvironmentVariables(): AuthTestResult {\n    const requiredVars = [\n      'EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID',\n      'EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID', \n      'EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID'\n    ];\n    \n    const missingVars = requiredVars.filter(varName => {\n      const value = process.env[varName];\n      return !value || value.length === 0;\n    });\n    \n    if (missingVars.length === requiredVars.length) {\n      return {\n        test: 'Environment Variables',\n        status: 'fail',\n        message: 'All required environment variables are missing',\n        details: { missingVars }\n      };\n    }\n    \n    if (missingVars.length > 0) {\n      return {\n        test: 'Environment Variables',\n        status: 'warning',\n        message: `Some environment variables are missing: ${missingVars.join(', ')}`,\n        details: { missingVars }\n      };\n    }\n    \n    return {\n      test: 'Environment Variables',\n      status: 'pass',\n      message: 'All environment variables are present'\n    };\n  }\n  \n  /**\n   * Test client ID configuration\n   */\n  private static testClientIdConfiguration(config?: any): AuthTestResult {\n    const { webClientId, iosClientId, androidClientId } = config || {};\n    \n    const issues = [];\n    \n    // Check format of client IDs\n    if (webClientId && !this.isValidGoogleClientId(webClientId)) {\n      issues.push('Web client ID has invalid format');\n    }\n    \n    if (iosClientId && !this.isValidGoogleClientId(iosClientId)) {\n      issues.push('iOS client ID has invalid format');\n    }\n    \n    if (androidClientId && !this.isValidGoogleClientId(androidClientId)) {\n      issues.push('Android client ID has invalid format');\n    }\n    \n    // Platform-specific checks\n    const currentPlatform = Platform.OS;\n    let hasRequiredClientId = false;\n    \n    if (currentPlatform === 'web' && webClientId) hasRequiredClientId = true;\n    if (currentPlatform === 'ios' && (iosClientId || webClientId)) hasRequiredClientId = true;\n    if (currentPlatform === 'android' && (androidClientId || webClientId)) hasRequiredClientId = true;\n    \n    if (!hasRequiredClientId) {\n      issues.push(`No valid client ID for current platform: ${currentPlatform}`);\n    }\n    \n    if (issues.length > 0) {\n      return {\n        test: 'Client ID Configuration',\n        status: 'fail',\n        message: issues.join('; '),\n        details: { issues, currentPlatform }\n      };\n    }\n    \n    return {\n      test: 'Client ID Configuration',\n      status: 'pass',\n      message: 'Client IDs are properly configured'\n    };\n  }\n  \n  /**\n   * Test redirect URI format\n   */\n  private static testRedirectUriFormat(redirectUri: string): AuthTestResult {\n    if (!redirectUri) {\n      return {\n        test: 'Redirect URI Format',\n        status: 'fail',\n        message: 'Redirect URI is not provided'\n      };\n    }\n    \n    const issues = [];\n    \n    if (Platform.OS === 'web') {\n      // Web redirect URI should be a valid HTTPS URL\n      try {\n        const url = new URL(redirectUri);\n        if (url.protocol !== 'https:' && url.hostname !== 'localhost') {\n          issues.push('Web redirect URI should use HTTPS in production');\n        }\n        if (!url.pathname.includes('oauth')) {\n          issues.push('Redirect URI should contain oauth-related path');\n        }\n      } catch (error) {\n        issues.push('Redirect URI is not a valid URL');\n      }\n    } else {\n      // Mobile redirect URI should use custom scheme\n      if (!redirectUri.includes('://')) {\n        issues.push('Mobile redirect URI should use custom scheme');\n      }\n    }\n    \n    if (issues.length > 0) {\n      return {\n        test: 'Redirect URI Format',\n        status: 'warning',\n        message: issues.join('; '),\n        details: { redirectUri, platform: Platform.OS }\n      };\n    }\n    \n    return {\n      test: 'Redirect URI Format',\n      status: 'pass',\n      message: 'Redirect URI format is valid'\n    };\n  }\n  \n  /**\n   * Test platform-specific configuration\n   */\n  private static testPlatformConfiguration(config?: any): AuthTestResult {\n    const platform = Platform.OS;\n    const { webClientId, iosClientId, androidClientId } = config || {};\n    \n    let hasCorrectConfig = false;\n    let message = '';\n    \n    switch (platform) {\n      case 'web':\n        hasCorrectConfig = !!webClientId;\n        message = hasCorrectConfig ? \n          'Web platform properly configured' : \n          'Web platform missing webClientId';\n        break;\n      case 'ios':\n        hasCorrectConfig = !!(iosClientId || webClientId);\n        message = hasCorrectConfig ? \n          'iOS platform properly configured' : \n          'iOS platform missing iosClientId (webClientId can be fallback)';\n        break;\n      case 'android':\n        hasCorrectConfig = !!(androidClientId || webClientId);\n        message = hasCorrectConfig ? \n          'Android platform properly configured' : \n          'Android platform missing androidClientId (webClientId can be fallback)';\n        break;\n      default:\n        return {\n          test: 'Platform Configuration',\n          status: 'fail',\n          message: `Unsupported platform: ${platform}`\n        };\n    }\n    \n    return {\n      test: 'Platform Configuration',\n      status: hasCorrectConfig ? 'pass' : 'fail',\n      message,\n      details: { platform, hasCorrectConfig }\n    };\n  }\n  \n  /**\n   * Test network connectivity (browser-safe)\n   */\n  private static async testNetworkConnectivity(): Promise<AuthTestResult> {\n    // Skip direct network tests in browser to avoid CORS issues\n    if (typeof window !== 'undefined') {\n      // In browser, we assume network is working if we can reach this point\n      return {\n        test: 'Network Connectivity',\n        status: 'pass',\n        message: 'Browser environment detected - network connectivity assumed (page loaded successfully)'\n      };\n    }\n    \n    try {\n      // Test basic internet connectivity (Node.js environment)\n      const response = await fetch('https://www.google.com', {\n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      \n      if (response.ok) {\n        return {\n          test: 'Network Connectivity',\n          status: 'pass',\n          message: 'Network connectivity is working'\n        };\n      } else {\n        return {\n          test: 'Network Connectivity',\n          status: 'fail',\n          message: `Network request failed with status: ${response.status}`\n        };\n      }\n    } catch (error) {\n      return {\n        test: 'Network Connectivity',\n        status: 'fail',\n        message: `Network connectivity test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Test Google OAuth endpoints (browser-safe)\n   */\n  private static async testGoogleOAuthEndpoints(): Promise<AuthTestResult> {\n    // Skip network tests in browser to avoid CORS issues\n    if (typeof window !== 'undefined') {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'pass',\n        message: 'Network endpoint tests skipped in browser environment (CORS protection)'\n      };\n    }\n    \n    const endpointsToTest = [\n      'https://accounts.google.com/.well-known/openid_configuration',\n      'https://oauth2.googleapis.com/tokeninfo'\n    ];\n    \n    const results = [];\n    \n    for (const endpoint of endpointsToTest) {\n      try {\n        const response = await fetch(endpoint, { \n          method: 'HEAD',\n          mode: 'no-cors' // This will prevent CORS errors but limit response info\n        });\n        results.push({\n          endpoint,\n          status: 'accessible', // no-cors mode doesn't give us status\n          statusCode: 'unknown'\n        });\n      } catch (error) {\n        results.push({\n          endpoint,\n          status: 'error',\n          error: String(error)\n        });\n      }\n    }\n    \n    const failedEndpoints = results.filter(r => r.status === 'error');\n    \n    if (failedEndpoints.length === 0) {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'pass',\n        message: 'Google OAuth endpoints appear to be accessible'\n      };\n    } else {\n      return {\n        test: 'Google OAuth Endpoints',\n        status: 'warning',\n        message: `Some network issues detected: ${failedEndpoints.map(e => e.endpoint).join(', ')}`,\n        details: { results }\n      };\n    }\n  }\n  \n  /**\n   * Test JWT validation functionality\n   */\n  private static testJWTValidation(): AuthTestResult {\n    // Test with a mock JWT token structure\n    const validJWTStructure = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiZW1haWwiOiJqb2huQGV4YW1wbGUuY29tIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjk5OTk5OTk5OTl9.invalid_signature';\n    const invalidJWT = 'invalid.jwt.token';\n    const emptyJWT = '';\n    \n    try {\n      // Test valid structure\n      const parts = validJWTStructure.split('.');\n      if (parts.length !== 3) {\n        throw new Error('Valid JWT should have 3 parts');\n      }\n      \n      // Test payload parsing\n      const payload = JSON.parse(atob(parts[1]));\n      if (!payload.sub || !payload.email) {\n        throw new Error('JWT payload should contain sub and email');\n      }\n      \n      return {\n        test: 'JWT Validation',\n        status: 'pass',\n        message: 'JWT validation functionality is working'\n      };\n    } catch (error) {\n      return {\n        test: 'JWT Validation',\n        status: 'fail',\n        message: `JWT validation test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Test storage access\n   */\n  private static async testStorageAccess(): Promise<AuthTestResult> {\n    try {\n      // Test AsyncStorage functionality\n      const testKey = 'auth_test_key';\n      const testValue = 'auth_test_value';\n      \n      // Import AsyncStorage dynamically\n      const AsyncStorage = require('@react-native-async-storage/async-storage').default;\n      \n      await AsyncStorage.setItem(testKey, testValue);\n      const retrievedValue = await AsyncStorage.getItem(testKey);\n      await AsyncStorage.removeItem(testKey);\n      \n      if (retrievedValue === testValue) {\n        return {\n          test: 'Storage Access',\n          status: 'pass',\n          message: 'Storage access is working properly'\n        };\n      } else {\n        return {\n          test: 'Storage Access',\n          status: 'fail',\n          message: 'Storage read/write test failed'\n        };\n      }\n    } catch (error) {\n      return {\n        test: 'Storage Access',\n        status: 'fail',\n        message: `Storage access test failed: ${(error as Error)?.message}`,\n        details: { error: String(error) }\n      };\n    }\n  }\n  \n  /**\n   * Validate Google Client ID format\n   */\n  private static isValidGoogleClientId(clientId: string): boolean {\n    // Google Client IDs have specific format: numbers-random.apps.googleusercontent.com\n    const googleClientIdPattern = /^\\d+-[\\w\\d]+\\.apps\\.googleusercontent\\.com$/;\n    return googleClientIdPattern.test(clientId);\n  }\n  \n  /**\n   * Calculate test summary\n   */\n  private static calculateSummary(results: AuthTestResult[]) {\n    const total = results.length;\n    const passed = results.filter(r => r.status === 'pass').length;\n    const failed = results.filter(r => r.status === 'fail').length;\n    const warnings = results.filter(r => r.status === 'warning').length;\n    \n    return { total, passed, failed, warnings };\n  }\n}\n\n/**\n * Run quick authentication diagnostics\n */\nexport const runAuthDiagnostics = async (config?: any): Promise<AuthTestSuite> => {\n  logger.info('AuthDiagnostics', 'Running authentication diagnostics...');\n  \n  const testSuite = await AuthenticationTester.runAuthTests(config);\n  \n  // Log results\n  console.group('ğŸ” Authentication Test Results');\n  console.log(`Platform: ${testSuite.platform}`);\n  console.log(`Timestamp: ${testSuite.timestamp}`);\n  console.log(`Summary: ${testSuite.summary.passed}/${testSuite.summary.total} passed, ${testSuite.summary.failed} failed, ${testSuite.summary.warnings} warnings`);\n  \n  testSuite.results.forEach(result => {\n    const icon = result.status === 'pass' ? 'âœ…' : result.status === 'fail' ? 'âŒ' : 'âš ï¸';\n    console.log(`${icon} ${result.test}: ${result.message}`);\n    if (result.details) {\n      console.log('   Details:', result.details);\n    }\n  });\n  \n  console.groupEnd();\n  \n  // Alert if critical issues found\n  const criticalFailures = testSuite.results.filter(r => \n    r.status === 'fail' && \n    ['Client ID Configuration', 'Platform Configuration', 'Network Connectivity'].includes(r.test)\n  );\n  \n  if (criticalFailures.length > 0) {\n    logger.error('AuthDiagnostics', 'Critical authentication issues detected', {\n      criticalFailures: criticalFailures.map(f => ({ test: f.test, message: f.message }))\n    });\n  } else {\n    logger.info('AuthDiagnostics', 'No critical authentication issues detected');\n  }\n  \n  return testSuite;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/bookmarksService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[952,955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[952,955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst BOOKMARKS_KEY = 'user_bookmarks';\n\nexport interface Bookmark {\n  id: string;\n  postId: string;\n  userId: string;\n  timestamp: string;\n  postData: {\n    title: string;\n    description: string;\n    thumbnail: string;\n    user: {\n      id: string;\n      name: string;\n      avatar: string;\n    };\n  };\n}\n\nconst getStoredBookmarks = async (): Promise<Bookmark[]> => {\n  try {\n    const data = await AsyncStorage.getItem(BOOKMARKS_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('âŒ Error getting bookmarks:', error);\n    return [];\n  }\n};\n\nconst setStoredBookmarks = async (bookmarks: Bookmark[]): Promise<void> => {\n  try {\n    await AsyncStorage.setItem(BOOKMARKS_KEY, JSON.stringify(bookmarks));\n  } catch (error) {\n    console.error('âŒ Error setting bookmarks:', error);\n  }\n};\n\nexport const addBookmark = async (userId: string, postData: any): Promise<boolean> => {\n  try {\n    const bookmarks = await getStoredBookmarks();\n    \n    const existingBookmark = bookmarks.find(\n      bookmark => bookmark.userId === userId && bookmark.postId === postData.id\n    );\n    \n    if (existingBookmark) {\n      console.log('ğŸ“– Post already bookmarked');\n      return false;\n    }\n\n    const newBookmark: Bookmark = {\n      id: `bookmark_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      postId: postData.id,\n      userId,\n      timestamp: new Date().toISOString(),\n      postData: {\n        title: postData.title,\n        description: postData.description,\n        thumbnail: postData.thumbnail,\n        user: postData.user,\n      },\n    };\n\n    bookmarks.push(newBookmark);\n    await setStoredBookmarks(bookmarks);\n    \n    console.log('âœ… Bookmark added:', newBookmark.id);\n    return true;\n  } catch (error) {\n    console.error('âŒ Add bookmark error:', error);\n    return false;\n  }\n};\n\nexport const removeBookmark = async (userId: string, postId: string): Promise<boolean> => {\n  try {\n    const bookmarks = await getStoredBookmarks();\n    const filteredBookmarks = bookmarks.filter(\n      bookmark => !(bookmark.userId === userId && bookmark.postId === postId)\n    );\n    \n    await setStoredBookmarks(filteredBookmarks);\n    \n    console.log('âœ… Bookmark removed');\n    return true;\n  } catch (error) {\n    console.error('âŒ Remove bookmark error:', error);\n    return false;\n  }\n};\n\nexport const getBookmarks = async (userId: string): Promise<Bookmark[]> => {\n  try {\n    const bookmarks = await getStoredBookmarks();\n    return bookmarks\n      .filter(bookmark => bookmark.userId === userId)\n      .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n  } catch (error) {\n    console.error('âŒ Get bookmarks error:', error);\n    return [];\n  }\n};\n\nexport const isBookmarked = async (userId: string, postId: string): Promise<boolean> => {\n  try {\n    const bookmarks = await getStoredBookmarks();\n    return bookmarks.some(\n      bookmark => bookmark.userId === userId && bookmark.postId === postId\n    );\n  } catch (error) {\n    console.error('âŒ Check bookmark error:', error);\n    return false;\n  }\n};\n\nexport const clearAllBookmarks = async (userId: string): Promise<void> => {\n  try {\n    const bookmarks = await getStoredBookmarks();\n    const filteredBookmarks = bookmarks.filter(bookmark => bookmark.userId !== userId);\n    await setStoredBookmarks(filteredBookmarks);\n    console.log('âœ… All bookmarks cleared for user:', userId);\n  } catch (error) {\n    console.error('âŒ Clear bookmarks error:', error);\n  }\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/bubbles_Data.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/charitiesStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/chatService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Platform' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Platform"},"fix":{"range":[0,41],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5674,5677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5674,5677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":239,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9340,9343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9340,9343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":251,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9958,9961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9958,9961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":284,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":284,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11541,11544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11541,11544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":329,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13333,13336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13333,13336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":373,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15436,15439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15436,15439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":392,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":392,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":545,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":545,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22740,22743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22740,22743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":907,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":907,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1090,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1090,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[40585,40588],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[40585,40588],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1159,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1159,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[42639,42642],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[42639,42642],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Platform } from 'react-native';\nimport { USE_FIRESTORE, USE_BACKEND } from './config.constants';\nimport { getFirebase } from './firebaseClient';\nimport { collection as fsCollection, query as fsQuery, where as fsWhere, onSnapshot } from 'firebase/firestore';\nimport { sendMessageNotification } from './notificationService';\nimport { db, DB_COLLECTIONS, DatabaseService } from './databaseService';\nimport { apiService } from './apiService';\n\n// TODO: CRITICAL - This file is extremely complex (735 lines). Split into specialized services:\n//   - ConversationService for conversation management\n//   - MessageService for message operations\n//   - RealtimeService for listeners and subscriptions\n//   - NotificationService integration for chat notifications\n// TODO: Add comprehensive error handling and retry mechanisms for all operations\n// TODO: Implement proper message queuing system for offline support\n// TODO: Add comprehensive TypeScript interfaces with strict typing\n// TODO: Implement proper connection management and reconnection logic\n// TODO: Add comprehensive message validation and sanitization\nimport { logger } from './loggerService';\n// Removed console.log statements - using proper logging service\n// TODO: Add comprehensive unit tests for all chat operations\n// TODO: Implement proper memory management for listeners and subscriptions\n// TODO: Add message encryption and security measures\n\nexport interface Conversation {\n  id: string;\n  participants: string[];\n  lastMessageText: string;\n  lastMessageTime: string;\n  unreadCount: number;\n  createdAt: string;\n}\n\nexport interface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  text: string;\n  timestamp: string;\n  read: boolean;\n  type: 'text' | 'image' | 'video' | 'file' | 'voice' | 'location';\n  status: 'sending' | 'sent' | 'delivered' | 'read' | 'failed';\n  fileData?: {\n    id: string;\n    name: string;\n    uri: string;\n    type: 'image' | 'video' | 'file' | 'voice';\n    size?: number;\n    mimeType?: string;\n    thumbnail?: string;\n    duration?: number; // for audio/video\n    dimensions?: { width: number; height: number }; // for images/videos\n  };\n  replyTo?: string; // ID of message being replied to\n  edited?: boolean;\n  editedAt?: string;\n  deleted?: boolean;\n  deletedAt?: string;\n  reactions?: Array<{\n    userId: string;\n    emoji: string;\n    timestamp: string;\n  }>;\n  location?: {\n    latitude: number;\n    longitude: number;\n    address?: string;\n  };\n}\n\n// Event listeners for real-time updates\n// Messages: key is `${conversationId}_${userId}` to scope polling per-user\n// TODO: Implement proper listener lifecycle management to prevent memory leaks\n// TODO: Add listener cleanup on app backgrounding/foregrounding\n// TODO: Implement proper error handling for failed listeners\n// TODO: Add connection state management and reconnection logic\nconst messageListeners: Map<string, Set<(messages: Message[]) => void>> = new Map();\n// Conversations: key is `userId`\nconst conversationListeners: Map<string, Set<(conversations: Conversation[]) => void>> = new Map();\n\nconst generateId = (prefix: string): string => {\n  return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n};\n\nexport const createConversation = async (participants: string[]): Promise<string> => {\n  // TODO: Add comprehensive input validation for participants array\n  // TODO: Check for duplicate conversations between same participants\n  // TODO: Add proper error handling with specific error types\n  // TODO: Implement rate limiting to prevent conversation spam\n  // TODO: Add proper logging and monitoring for conversation creation\n  try {\n    let conversationId: string;\n\n    if (USE_BACKEND && participants.length > 0) {\n      // Create conversation on backend\n      const response = await apiService.createConversation({\n        participants,\n        type: 'direct',\n        created_by: participants[0], // First participant is the creator\n      });\n\n      if (!response.success || !response.data) {\n        throw new Error(response.error || 'Failed to create conversation on backend');\n      }\n\n      conversationId = response.data.id;\n      logger.info('ChatService', 'Conversation created on backend', { conversationId });\n    } else {\n      // Fallback to local storage\n      conversationId = generateId('conv');\n      logger.info('ChatService', 'Conversation created locally', { conversationId });\n    }\n\n    const newConversation: Conversation = {\n      id: conversationId,\n      participants,\n      lastMessageText: '',\n      lastMessageTime: new Date().toISOString(),\n      unreadCount: 0,\n      createdAt: new Date().toISOString(),\n    };\n\n    // Also save locally for offline support\n    for (const participantId of participants) {\n      await db.createChat(participantId, conversationId, { ...newConversation, unreadCount: 0 });\n    }\n\n    // Notify conversation listeners for all participants\n    participants.forEach(participantId => {\n      notifyConversationListeners(participantId);\n    });\n\n    return conversationId;\n  } catch (error) {\n    logger.error('ChatService', 'Create conversation error', { error });\n    throw error;\n  }\n};\n\nexport const getConversations = async (userId: string): Promise<Conversation[]> => {\n  try {\n    logger.info('ChatService', 'Getting conversations for user', { userId });\n\n    if (USE_BACKEND) {\n      // Get conversations from backend\n      const response = await apiService.getUserConversations(userId);\n\n      if (response.success && response.data && Array.isArray(response.data)) {\n        // Map backend format to frontend format\n        const conversations: Conversation[] = response.data.map((conv: any) => ({\n          id: conv.id,\n          participants: conv.participants || [],\n          lastMessageText: conv.last_message_content || '',\n          lastMessageTime: conv.last_message_time || conv.updated_at || conv.created_at,\n          unreadCount: conv.unread_count || 0,\n          createdAt: conv.created_at,\n        }));\n\n        // Deduplicate conversations: keep only one conversation per set of participants\n        // Prefer the one with the most recent message\n        const uniqueMap = new Map<string, Conversation>();\n\n        conversations.forEach(conv => {\n          // Sort participants to ensure consistent key\n          const key = [...(conv.participants || [])].sort((a, b) => a.localeCompare(b)).join(',');\n\n          if (!uniqueMap.has(key)) {\n            uniqueMap.set(key, conv);\n          } else {\n            const existing = uniqueMap.get(key)!;\n            const existingTime = new Date(existing.lastMessageTime).getTime();\n            const newTime = new Date(conv.lastMessageTime).getTime();\n\n            // Should we replace?\n            // 1. If new one is newer\n            // 2. If timestamps are equal but new one has content and existing doesn't\n            if (newTime > existingTime || (newTime === existingTime && conv.lastMessageText && !existing.lastMessageText)) {\n              uniqueMap.set(key, conv);\n            }\n          }\n        });\n\n        const uniqueConversations = Array.from(uniqueMap.values());\n\n        // Also save locally for offline support\n        for (const conv of uniqueConversations) {\n          await db.createChat(userId, conv.id, conv);\n        }\n\n        logger.debug('ChatService', 'Got conversations from backend', { count: uniqueConversations.length, originalCount: conversations.length });\n        return uniqueConversations;\n      } else {\n        logger.warn('ChatService', 'Backend returned invalid response, falling back to local', { response });\n      }\n    }\n\n    // Fallback to local storage\n    const conversations = await db.getUserChats(userId);\n    logger.debug('ChatService', 'Raw conversations from DB', { count: conversations.length, conversations });\n\n    // Don't filter empty conversations - show all\n    const sorted = (conversations as Conversation[]).sort((a, b) =>\n      new Date(b.lastMessageTime).getTime() - new Date(a.lastMessageTime).getTime()\n    );\n\n    logger.debug('ChatService', 'Sorted conversations', { count: sorted.length, conversations: sorted.map(c => ({ id: c.id, lastMessage: c.lastMessageText || '×©×™×—×” ×—×“×©×”' })) });\n    return sorted;\n  } catch (error) {\n    logger.error('ChatService', 'Get conversations error', { error });\n    // Fallback to local storage on error\n    try {\n      const conversations = await db.getUserChats(userId);\n      return (conversations as Conversation[]).sort((a, b) =>\n        new Date(b.lastMessageTime).getTime() - new Date(a.lastMessageTime).getTime()\n      );\n    } catch (fallbackError) {\n      logger.error('ChatService', 'Fallback to local storage also failed', { error: fallbackError });\n      return [];\n    }\n  }\n};\n\nexport const getConversationById = async (conversationId: string, userId: string): Promise<Conversation | null> => {\n  try {\n    const conversation = await db.getChat(userId, conversationId);\n    return conversation as Conversation | null;\n  } catch (error) {\n    logger.error('ChatService', 'Get conversation error', { error });\n    return null;\n  }\n};\n\nexport const sendMessage = async (\n  message: Omit<Message, 'id'>,\n  fallbackParticipants?: string[]\n): Promise<string | { messageId: string; newConversationId?: string }> => {\n  try {\n    let messageId: string;\n    let backendMessage: any = null;\n\n    // Get conversation to find participants\n    let senderView = await getConversationById(message.conversationId, message.senderId);\n    let participants = senderView?.participants || [];\n\n    // If conversation not found locally, try to get from backend\n    if (participants.length === 0 && USE_BACKEND) {\n      try {\n        // Try to get conversation from backend\n        const convResponse = await apiService.getUserConversations(message.senderId);\n        if (convResponse.success && convResponse.data && Array.isArray(convResponse.data)) {\n          const backendConv = convResponse.data.find((c: any) => c.id === message.conversationId);\n          if (backendConv && backendConv.participants) {\n            participants = backendConv.participants;\n            // Save locally for future use\n            senderView = {\n              id: backendConv.id,\n              participants: backendConv.participants,\n              lastMessageText: backendConv.last_message_content || '',\n              lastMessageTime: backendConv.last_message_time || backendConv.created_at,\n              unreadCount: backendConv.unread_count || 0,\n              createdAt: backendConv.created_at,\n            };\n            await db.createChat(message.senderId, message.conversationId, senderView);\n          }\n        }\n      } catch (error) {\n        logger.warn('ChatService', 'Failed to get conversation from backend', { error });\n      }\n    }\n\n    // If still no participants, try to get from backend or reconstruct\n    if (participants.length === 0) {\n      logger.warn('ChatService', 'No participants found for conversation, attempting to recover', {\n        conversationId: message.conversationId,\n        senderId: message.senderId\n      });\n\n      // Try to get conversation from backend by checking all user conversations\n      if (USE_BACKEND) {\n        try {\n          const allConvsResponse = await apiService.getUserConversations(message.senderId);\n          if (allConvsResponse.success && allConvsResponse.data && Array.isArray(allConvsResponse.data)) {\n            // Look for conversation by ID or by legacy_id in metadata\n            const foundConv = allConvsResponse.data.find((c: any) =>\n              c.id === message.conversationId ||\n              (c.metadata && c.metadata.legacy_id === message.conversationId)\n            );\n\n            if (foundConv && foundConv.participants && foundConv.participants.length > 0) {\n              participants = foundConv.participants;\n              logger.info('ChatService', 'Recovered participants from backend', { participants });\n            }\n          }\n        } catch (error) {\n          logger.warn('ChatService', 'Failed to recover participants from backend', { error });\n        }\n      }\n\n      // If still no participants, try to use fallback participants if provided\n      if (participants.length === 0 && fallbackParticipants && fallbackParticipants.length > 0) {\n        participants = fallbackParticipants;\n        logger.info('ChatService', 'Using fallback participants', { participants });\n\n        // Save conversation locally with fallback participants\n        const fallbackConversation: Conversation = {\n          id: message.conversationId,\n          participants: fallbackParticipants,\n          lastMessageText: '',\n          lastMessageTime: new Date().toISOString(),\n          unreadCount: 0,\n          createdAt: new Date().toISOString(),\n        };\n\n        for (const participantId of fallbackParticipants) {\n          await db.createChat(participantId, message.conversationId, fallbackConversation);\n        }\n      }\n\n      // If still no participants, we can't send the message\n      if (participants.length === 0) {\n        throw new Error('Conversation not found or has no participants. Please create a new conversation.');\n      }\n    }\n\n    // Send to backend if enabled\n    if (USE_BACKEND) {\n      try {\n        // Convert frontend format to backend format\n        const backendMessageData: any = {\n          conversation_id: message.conversationId,\n          sender_id: message.senderId,\n          content: message.text || '',\n          message_type: message.type || 'text',\n          reply_to_id: message.replyTo || null,\n          participants: participants, // Include participants so backend can create conversation if needed\n        };\n\n        // Handle file data if present\n        if (message.fileData) {\n          backendMessageData.file_url = message.fileData.uri;\n          backendMessageData.file_name = message.fileData.name;\n          backendMessageData.file_size = message.fileData.size || null;\n          backendMessageData.file_type = message.fileData.mimeType || message.fileData.type;\n\n          // Store additional metadata in metadata field\n          if (message.fileData.thumbnail || message.fileData.duration || message.fileData.dimensions) {\n            backendMessageData.metadata = JSON.stringify({\n              thumbnail: message.fileData.thumbnail,\n              duration: message.fileData.duration,\n              dimensions: message.fileData.dimensions,\n            });\n          }\n        }\n\n        const response = await apiService.sendMessage(backendMessageData);\n\n        if (response.success && response.data) {\n          backendMessage = response.data;\n          messageId = response.data.id;\n\n          // If backend created a new conversation (with new UUID), update local storage\n          if (response.data.conversation_created && response.data.conversation_id) {\n            const newConversationId = response.data.conversation_id;\n            logger.info('ChatService', 'Backend created new conversation', {\n              oldId: message.conversationId,\n              newId: newConversationId\n            });\n\n            // Get the conversation details from backend to save locally\n            try {\n              const convResponse = await apiService.getUserConversations(message.senderId);\n              if (convResponse.success && convResponse.data && Array.isArray(convResponse.data)) {\n                const newConv = convResponse.data.find((c: any) => c.id === newConversationId);\n                if (newConv) {\n                  // Map backend format to frontend format\n                  const updatedConversation: Conversation = {\n                    id: newConversationId,\n                    participants: newConv.participants || participants,\n                    lastMessageText: message.text || '',\n                    lastMessageTime: message.timestamp,\n                    unreadCount: newConv.unread_count || 0,\n                    createdAt: newConv.created_at || new Date().toISOString(),\n                  };\n\n                  // Save new conversation for all participants\n                  const finalParticipants = newConv.participants || participants;\n                  for (const participantId of finalParticipants) {\n                    await db.createChat(participantId, newConversationId, updatedConversation);\n                    // Also delete old conversation if it exists\n                    try {\n                      await DatabaseService.delete(DB_COLLECTIONS.CHATS, participantId, message.conversationId);\n                    } catch (e) {\n                      // Ignore if doesn't exist\n                    }\n                  }\n\n                  // Update message conversationId to new UUID - IMPORTANT: This updates the conversation ID for the rest of the function\n                  message.conversationId = newConversationId;\n\n                  logger.info('ChatService', 'Updated local storage with new conversation UUID', {\n                    newConversationId,\n                    participants: finalParticipants\n                  });\n\n                  // Notify listeners about the new conversation - this will refresh ChatListScreen\n                  finalParticipants.forEach((participantId: string) => {\n                    notifyConversationListeners(participantId);\n                  });\n                } else {\n                  logger.warn('ChatService', 'New conversation not found in backend response', { newConversationId });\n                }\n              }\n            } catch (error) {\n              logger.error('ChatService', 'Failed to get new conversation from backend', { error });\n              // Still update with basic info\n              const updatedConversation: Conversation = {\n                id: newConversationId,\n                participants: participants,\n                lastMessageText: message.text || '',\n                lastMessageTime: message.timestamp,\n                unreadCount: 0,\n                createdAt: new Date().toISOString(),\n              };\n\n              for (const participantId of participants) {\n                await db.createChat(participantId, newConversationId, updatedConversation);\n              }\n\n              message.conversationId = newConversationId;\n              participants.forEach(participantId => {\n                notifyConversationListeners(participantId);\n              });\n            }\n          }\n\n          logger.info('ChatService', 'Message sent to backend', { messageId });\n        } else {\n          throw new Error(response.error || 'Failed to send message to backend');\n        }\n      } catch (backendError) {\n        logger.error('ChatService', 'Backend send message error', { error: backendError });\n        // Fall through to local storage fallback\n        messageId = generateId('msg');\n      }\n    } else {\n      messageId = generateId('msg');\n    }\n\n    // Create message object\n    const newMessage: Message = {\n      ...message,\n      id: messageId,\n      status: backendMessage ? 'sent' : 'sending', // If sent to backend, mark as sent\n    };\n\n    // Save locally for all participants (for offline support and real-time updates)\n    for (const participantId of participants) {\n      await db.createMessage(participantId, messageId, newMessage);\n    }\n\n    let displayText = message.text;\n    if (message.type === 'image') displayText = 'ğŸ“· ×ª××•× ×”';\n    else if (message.type === 'video') displayText = 'ğŸ¥ ×¡×¨×˜×•×Ÿ';\n    else if (message.type === 'file') displayText = 'ğŸ“ ×§×•×‘×¥';\n\n    // Update conversation for all participants\n    for (const participantId of participants) {\n      const existing = await db.getChat(participantId, message.conversationId);\n      const baseConv: Conversation = (existing as Conversation) || {\n        id: message.conversationId,\n        participants,\n        lastMessageText: '',\n        lastMessageTime: new Date().toISOString(),\n        unreadCount: 0,\n        createdAt: new Date().toISOString(),\n      };\n\n      const isRecipient = participantId !== message.senderId;\n      const unreadCount = isRecipient ? (baseConv.unreadCount || 0) + 1 : 0;\n\n      const updatedConversation: Conversation = {\n        ...baseConv,\n        lastMessageText: displayText,\n        lastMessageTime: message.timestamp,\n        unreadCount,\n      };\n\n      await db.createChat(participantId, message.conversationId, updatedConversation);\n      logger.debug('ChatService', 'Updated conversation for participant', { participantId });\n    }\n\n    logger.info('ChatService', 'Message sent', { messageId });\n    logger.debug('ChatService', 'Conversation participants', { participants });\n\n    // Notify listeners about the new message for each participant\n    for (const participantId of participants) {\n      notifyMessageListeners(message.conversationId, participantId);\n    }\n\n    // Notify conversation listeners for all participants\n    // This will trigger ChatListScreen to refresh and show the new conversation\n    logger.debug('ChatService', 'Notifying conversation listeners', { participants });\n    participants.forEach(participantId => {\n      logger.debug('ChatService', 'Notifying participant', { participantId });\n      notifyConversationListeners(participantId);\n\n      // Send notification to other participants (not the sender)\n      if (participantId !== message.senderId) {\n        const senderName = '××©×ª××©'; // TODO: Get actual sender name\n        sendMessageNotification(senderName, message.text, message.conversationId, participantId);\n      }\n    });\n\n    // Force refresh conversations from backend to ensure new conversation appears\n    if (USE_BACKEND && backendMessage) {\n      // Trigger a refresh of conversations for all participants\n      setTimeout(async () => {\n        for (const participantId of participants) {\n          try {\n            await getConversations(participantId);\n            notifyConversationListeners(participantId);\n          } catch (error) {\n            logger.warn('ChatService', 'Failed to refresh conversations after message', { error });\n          }\n        }\n      }, 500); // Small delay to ensure backend has processed the message\n    }\n\n    return messageId;\n  } catch (error) {\n    logger.error('ChatService', 'Send message error', { error });\n    throw error;\n  }\n};\n\nexport const getMessages = async (conversationId: string, userId: string): Promise<Message[]> => {\n  try {\n    if (USE_BACKEND) {\n      try {\n        // Get messages from backend\n        const response = await apiService.getConversationMessages(conversationId, 100, 0);\n\n        if (response.success && response.data && Array.isArray(response.data)) {\n          // Map backend format to frontend format\n          const messages: Message[] = response.data.map((msg: any) => {\n            const frontendMessage: Message = {\n              id: msg.id,\n              conversationId: msg.conversation_id,\n              senderId: msg.sender_id,\n              text: msg.content || '',\n              timestamp: msg.created_at,\n              read: false, // TODO: Check read receipts\n              type: (msg.message_type || 'text') as Message['type'],\n              status: 'sent',\n              replyTo: msg.reply_to_id || undefined,\n              edited: msg.is_edited || false,\n              editedAt: msg.edited_at || undefined,\n              deleted: msg.is_deleted || false,\n              deletedAt: msg.deleted_at || undefined,\n            };\n\n            // Handle file data if present\n            if (msg.file_url) {\n              frontendMessage.fileData = {\n                id: msg.id,\n                name: msg.file_name || 'file',\n                uri: msg.file_url,\n                type: (msg.file_type || msg.message_type || 'file') as 'image' | 'video' | 'file' | 'voice',\n                size: msg.file_size || undefined,\n                mimeType: msg.file_type || undefined,\n              };\n\n              // Parse metadata if present\n              if (msg.metadata) {\n                try {\n                  const metadata = typeof msg.metadata === 'string' ? JSON.parse(msg.metadata) : msg.metadata;\n                  if (metadata.thumbnail) frontendMessage.fileData.thumbnail = metadata.thumbnail;\n                  if (metadata.duration) frontendMessage.fileData.duration = metadata.duration;\n                  if (metadata.dimensions) frontendMessage.fileData.dimensions = metadata.dimensions;\n                } catch (e) {\n                  logger.warn('ChatService', 'Failed to parse message metadata', { error: e });\n                }\n              }\n            }\n\n            return frontendMessage;\n          });\n\n          // Save messages locally for offline support\n          for (const msg of messages) {\n            await db.createMessage(userId, msg.id, msg);\n          }\n\n          logger.debug('ChatService', 'Got messages from backend', { count: messages.length });\n          return messages;\n        } else {\n          logger.warn('ChatService', 'Backend returned invalid response, falling back to local', { response });\n        }\n      } catch (backendError) {\n        logger.error('ChatService', 'Backend get messages error', { error: backendError });\n        // Fall through to local storage\n      }\n    }\n\n    // Fallback to local storage\n    const messages = await db.getChatMessages(userId, conversationId);\n    return (messages as Message[]).sort((a, b) =>\n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\n    );\n  } catch (error) {\n    logger.error('ChatService', 'Get messages error', { error });\n    return [];\n  }\n};\n\nexport const markMessagesAsRead = async (conversationId: string, userId: string): Promise<void> => {\n  try {\n    logger.info('ChatService', 'Marking messages as read', { conversationId, userId });\n\n    // If backend is enabled, use backend API for read receipts\n    if (USE_BACKEND) {\n      try {\n        const response = await apiService.markAllMessagesAsRead(conversationId, userId);\n\n        if (response.success) {\n          logger.info('ChatService', 'Messages marked as read on backend', {\n            conversationId,\n            markedCount: response.data?.marked_read || 0\n          });\n\n          // Update local cache - mark all messages as read\n          const messages = await getMessages(conversationId, userId);\n          for (const msg of messages) {\n            if (msg.conversationId === conversationId && msg.senderId !== userId && !msg.read) {\n              await DatabaseService.update(DB_COLLECTIONS.MESSAGES, userId, msg.id, { read: true });\n            }\n          }\n\n          // Update conversation unread count locally\n          const conversation = await getConversationById(conversationId, userId);\n          if (conversation) {\n            const updatedConversation = { ...conversation, unreadCount: 0 };\n            await db.createChat(userId, conversationId, updatedConversation);\n            logger.debug('ChatService', 'Conversation unread count reset to 0');\n          }\n\n          return;\n        } else {\n          logger.warn('ChatService', 'Backend mark as read failed, falling back to local', {\n            error: response.error\n          });\n          // Fall through to local-only mode\n        }\n      } catch (backendError) {\n        logger.error('ChatService', 'Backend mark as read error, falling back to local', { error: backendError });\n        // Fall through to local-only mode\n      }\n    }\n\n    // Local-only mode or backend failed\n    const messages = await getMessages(conversationId, userId);\n    logger.debug('ChatService', 'Found total messages', { count: messages.length });\n\n    for (const msg of messages) {\n      if (msg.conversationId === conversationId && msg.senderId !== userId && !msg.read) {\n        logger.debug('ChatService', 'Marking message as read locally', { messageId: msg.id });\n        await DatabaseService.update(DB_COLLECTIONS.MESSAGES, userId, msg.id, { read: true });\n      }\n    }\n\n    const conversation = await getConversationById(conversationId, userId);\n    if (conversation) {\n      const updatedConversation = { ...conversation, unreadCount: 0 };\n      await db.createChat(userId, conversationId, updatedConversation);\n      logger.debug('ChatService', 'Conversation unread count reset to 0');\n    } else {\n      logger.warn('ChatService', 'Conversation not found', { conversationId });\n    }\n\n    logger.info('ChatService', 'Messages marked as read');\n  } catch (error) {\n    logger.error('ChatService', 'Mark as read error', { error });\n    throw error;\n  }\n};\n\n// Real-time listener for messages (improved with event system)\nexport const subscribeToMessages = (conversationId: string, userId: string, callback: (messages: Message[]) => void) => {\n  const key = `${conversationId}_${userId}`;\n  if (!messageListeners.has(key)) {\n    messageListeners.set(key, new Set());\n  }\n  messageListeners.get(key)!.add(callback);\n\n  if (USE_FIRESTORE) {\n    const { db } = getFirebase();\n    const col = fsCollection(db, DB_COLLECTIONS.MESSAGES);\n    const q = fsQuery(col, fsWhere('_userId', '==', userId), fsWhere('conversationId', '==', conversationId));\n    const unsub = onSnapshot(q, async (snap) => {\n      const items = snap.docs.map((d) => d.data() as Message).sort((a, b) =>\n        new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\n      );\n      callback(items);\n    });\n    return () => {\n      unsub();\n      const listeners = messageListeners.get(key);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          messageListeners.delete(key);\n        }\n      }\n    };\n  } else {\n    getMessages(conversationId, userId).then(callback);\n    const interval = setInterval(async () => {\n      const messages = await getMessages(conversationId, userId);\n      callback(messages);\n    }, 2000);\n    return () => {\n      clearInterval(interval);\n      const listeners = messageListeners.get(key);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          messageListeners.delete(key);\n        }\n      }\n    };\n  }\n};\n\n// Real-time listener for conversations\nexport const subscribeToConversations = (userId: string, callback: (conversations: Conversation[]) => void) => {\n  if (!conversationListeners.has(userId)) {\n    conversationListeners.set(userId, new Set());\n  }\n  conversationListeners.get(userId)!.add(callback);\n\n  if (USE_FIRESTORE) {\n    const { db } = getFirebase();\n    const col = fsCollection(db, DB_COLLECTIONS.CHATS);\n    const q = fsQuery(col, fsWhere('_userId', '==', userId));\n    const unsub = onSnapshot(q, (snap) => {\n      const items = snap.docs\n        .map((d) => d.data() as Conversation)\n        .sort((a, b) => new Date(b.lastMessageTime).getTime() - new Date(a.lastMessageTime).getTime());\n      callback(items);\n    });\n    return () => {\n      unsub();\n      const listeners = conversationListeners.get(userId);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          conversationListeners.delete(userId);\n        }\n      }\n    };\n  } else {\n    getConversations(userId).then((conversations) => {\n      callback(conversations);\n    });\n    const interval = setInterval(async () => {\n      const conversations = await getConversations(userId);\n      callback(conversations);\n    }, 5000);\n    return () => {\n      clearInterval(interval);\n      const listeners = conversationListeners.get(userId);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          conversationListeners.delete(userId);\n        }\n      }\n    };\n  }\n};\n\n// Notify listeners when data changes\nconst notifyMessageListeners = async (conversationId: string, userId: string) => {\n  const key = `${conversationId}_${userId}`;\n  const listeners = messageListeners.get(key);\n  if (!listeners || listeners.size === 0) return;\n  const messages = await getMessages(conversationId, userId);\n  listeners.forEach(callback => {\n    if (typeof callback === 'function') callback(messages);\n  });\n};\n\nconst notifyConversationListeners = async (userId: string) => {\n  const listeners = conversationListeners.get(userId);\n  logger.debug('ChatService', 'Notifying conversation listeners for user', { userId, hasListeners: !!listeners });\n  if (listeners && listeners.size > 0) {\n    const conversations = await getConversations(userId);\n    logger.debug('ChatService', 'Found conversations for user', { userId, count: conversations.length });\n    // Conversations are already sorted by getConversations\n    listeners.forEach(callback => {\n      if (typeof callback === 'function') {\n        callback(conversations);\n      }\n    });\n  }\n};\n\nexport const deleteConversation = async (conversationId: string, userId: string): Promise<void> => {\n  try {\n    await DatabaseService.delete(DB_COLLECTIONS.CHATS, userId, conversationId);\n\n    const messages = await getMessages(conversationId, userId);\n    const messageIds = messages.map(msg => msg.id);\n    await DatabaseService.batchDelete(DB_COLLECTIONS.MESSAGES, userId, messageIds);\n\n    logger.info('ChatService', 'Conversation deleted');\n  } catch (error) {\n    logger.error('ChatService', 'Delete conversation error', { error });\n    throw error;\n  }\n};\n\nexport const clearAllData = async (userId?: string): Promise<void> => {\n  try {\n    if (userId) {\n      await DatabaseService.deleteUserData(userId);\n      logger.info('ChatService', 'All chat data cleared for user', { userId });\n    } else {\n      await DatabaseService.clearAllData();\n      logger.info('ChatService', 'All chat data cleared');\n    }\n  } catch (error) {\n    logger.error('ChatService', 'Clear data error', { error });\n    throw error;\n  }\n};\n\nexport const createSampleData = async (): Promise<void> => {\n  try {\n    logger.info('ChatService', 'Sample data creation disabled to prevent overwriting real conversations');\n  } catch (error) {\n    logger.error('ChatService', 'Create sample data error', { error });\n  }\n};\n\nexport const createSampleChatData = async (userId: string): Promise<void> => {\n  try {\n    logger.info('ChatService', 'Creating sample chat data for user', { userId });\n\n    const sampleConversations: Conversation[] = [\n      {\n        id: 'conv_sample_1',\n        participants: [userId, 'char2'],\n        lastMessageText: '×”×™×™! ××™×š ××ª×”?',\n        lastMessageTime: new Date().toISOString(),\n        unreadCount: 1,\n        createdAt: new Date().toISOString(),\n      },\n      {\n        id: 'conv_sample_2',\n        participants: [userId, 'char3'],\n        lastMessageText: '×ª×•×“×” ×¢×œ ×”×¢×–×¨×”!',\n        lastMessageTime: new Date().toISOString(),\n        unreadCount: 0,\n        createdAt: new Date().toISOString(),\n      },\n    ];\n\n    const sampleMessages: Message[] = [\n      {\n        id: 'msg_sample_1',\n        conversationId: 'conv_sample_1',\n        senderId: 'char2',\n        text: '×”×™×™! ××™×š ××ª×”?',\n        timestamp: new Date().toISOString(),\n        read: false,\n        type: 'text',\n        status: 'sent',\n      },\n      {\n        id: 'msg_sample_2',\n        conversationId: 'conv_sample_1',\n        senderId: userId,\n        text: '××¢×•×œ×”, ×ª×•×“×”! ××™×š ××ª×”?',\n        timestamp: new Date().toISOString(),\n        read: true,\n        type: 'text',\n        status: 'sent',\n      },\n      {\n        id: 'msg_sample_3',\n        conversationId: 'conv_sample_2',\n        senderId: 'char3',\n        text: '×ª×•×“×” ×¢×œ ×”×¢×–×¨×”!',\n        timestamp: new Date().toISOString(),\n        read: true,\n        type: 'text',\n        status: 'sent',\n      },\n    ];\n\n    // Guard: do not create sample data for real-auth sessions\n    const mode = await (async () => {\n      try {\n        const AsyncStorage = (await import('@react-native-async-storage/async-storage')).default;\n        return await AsyncStorage.getItem('auth_mode');\n      } catch (e) {\n        return null;\n      }\n    })();\n    if (mode === 'real') {\n      logger.info('ChatService', 'Skipping sample chat data creation in real auth mode');\n      return;\n    }\n\n    for (const conversation of sampleConversations) {\n      await db.createChat(userId, conversation.id, conversation);\n    }\n\n    for (const message of sampleMessages) {\n      await db.createMessage(userId, message.id, message);\n    }\n\n    logger.info('ChatService', 'Sample chat data created for user', { userId, conversationCount: sampleConversations.length, messageCount: sampleMessages.length });\n  } catch (error) {\n    logger.error('ChatService', 'Create sample chat data error', { error });\n  }\n};\n\n// Advanced Chat Functions\n\n// Edit message\nexport const editMessage = async (\n  userId: string,\n  messageId: string,\n  newText: string\n): Promise<void> => {\n  try {\n    await db.updateMessage(userId, messageId, {\n      text: newText,\n      edited: true,\n      editedAt: new Date().toISOString(),\n    });\n\n    // Note: We would need the conversationId to notify listeners properly\n    // For now, we'll skip notification as we don't have access to conversationId from messageId alone\n\n    logger.info('ChatService', 'Message edited', { messageId });\n  } catch (error) {\n    logger.error('ChatService', 'Edit message error', { error });\n    throw error;\n  }\n};\n\n// Delete message\nexport const deleteMessage = async (\n  userId: string,\n  messageId: string,\n  deleteForEveryone: boolean = false\n): Promise<void> => {\n  try {\n    if (deleteForEveryone) {\n      // Mark as deleted instead of removing\n      await db.updateMessage(userId, messageId, {\n        deleted: true,\n        deletedAt: new Date().toISOString(),\n        text: '×”×•×“×¢×” ×–×• × ××—×§×”',\n      });\n    } else {\n      // Remove only for current user\n      await db.deleteMessage(userId, messageId);\n    }\n\n    logger.info('ChatService', 'Message deleted', { messageId });\n  } catch (error) {\n    logger.error('ChatService', 'Delete message error', { error });\n    throw error;\n  }\n};\n\n// Add reaction to message\nexport const addMessageReaction = async (\n  userId: string,\n  messageId: string,\n  emoji: string\n): Promise<void> => {\n  try {\n    const reactionId = generateId('reaction');\n    await db.addReaction(userId, reactionId, {\n      id: reactionId,\n      messageId,\n      userId,\n      emoji,\n      timestamp: new Date().toISOString(),\n    });\n\n    logger.info('ChatService', 'Reaction added', { reactionId });\n  } catch (error) {\n    logger.error('ChatService', 'Add reaction error', { error });\n    throw error;\n  }\n};\n\n// Remove reaction from message\nexport const removeMessageReaction = async (\n  userId: string,\n  reactionId: string\n): Promise<void> => {\n  try {\n    await db.removeReaction(userId, reactionId);\n    logger.info('ChatService', 'Reaction removed', { reactionId });\n  } catch (error) {\n    logger.error('ChatService', 'Remove reaction error', { error });\n    throw error;\n  }\n};\n\n// Send voice message\nexport const sendVoiceMessage = async (\n  conversationId: string,\n  senderId: string,\n  voiceData: {\n    uri: string;\n    duration: number;\n    mimeType: string;\n  }\n): Promise<string> => {\n  try {\n    const voiceId = generateId('voice');\n    const messageId = generateId('msg');\n\n    // Save voice data\n    await db.saveVoiceMessage(senderId, voiceId, {\n      id: voiceId,\n      uri: voiceData.uri,\n      duration: voiceData.duration,\n      mimeType: voiceData.mimeType,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Create message with voice reference\n    const message: Message = {\n      id: messageId,\n      conversationId,\n      senderId,\n      text: 'ğŸ¤ ×”×•×“×¢×” ×§×•×œ×™×ª',\n      timestamp: new Date().toISOString(),\n      read: false,\n      type: 'voice',\n      status: 'sent',\n      fileData: {\n        id: voiceId,\n        name: 'voice_message.m4a',\n        uri: voiceData.uri,\n        type: 'voice',\n        duration: voiceData.duration,\n        mimeType: voiceData.mimeType,\n      },\n    };\n\n    await sendMessage(message);\n    return messageId;\n  } catch (error) {\n    logger.error('ChatService', 'Send voice message error', { error });\n    throw error;\n  }\n};\n\n// Search messages\nexport const searchMessages = async (\n  userId: string,\n  searchQuery: string\n): Promise<Message[]> => {\n  try {\n    const results = await db.searchMessages(userId, searchQuery);\n    return results as Message[];\n  } catch (error) {\n    logger.error('ChatService', 'Search messages error', { error });\n    return [];\n  }\n};\n\n// Get message reactions\nexport const getMessageReactions = async (\n  userId: string,\n  messageId: string\n): Promise<Array<{ userId: string; emoji: string; timestamp: string }>> => {\n  try {\n    const reactions = await db.getMessageReactions(userId, messageId);\n    return reactions as any[];\n  } catch (error) {\n    logger.error('ChatService', 'Get reactions error', { error });\n    return [];\n  }\n};\n\n// Set typing status\nexport const setTypingStatus = async (\n  userId: string,\n  conversationId: string,\n  isTyping: boolean\n): Promise<void> => {\n  try {\n    if (isTyping) {\n      await db.setTypingStatus(userId, conversationId, {\n        userId,\n        conversationId,\n        isTyping: true,\n        timestamp: new Date().toISOString(),\n      });\n    } else {\n      await db.clearTypingStatus(userId, conversationId);\n    }\n  } catch (error) {\n    logger.error('ChatService', 'Set typing status error', { error });\n  }\n};\n\n// Get all conversations including empty ones\nexport const getAllConversations = async (userId: string): Promise<Conversation[]> => {\n  try {\n    // Use getConversations which already handles backend/local\n    return await getConversations(userId);\n  } catch (error) {\n    logger.error('ChatService', 'Get all conversations error', { error });\n    return [];\n  }\n};\n\n// Check if conversation exists\nexport const conversationExists = async (\n  userId: string,\n  otherUserId: string\n): Promise<string | null> => {\n  try {\n    // Use getAllConversations which already handles backend/local\n    const conversations = await getAllConversations(userId);\n    const existingConv = conversations.find(conv =>\n      conv.participants.includes(userId) &&\n      conv.participants.includes(otherUserId) &&\n      conv.participants.length === 2\n    );\n    return existingConv ? existingConv.id : null;\n  } catch (error) {\n    logger.error('ChatService', 'Check conversation exists error', { error });\n    return null;\n  }\n};\n\n// Debug function to check database content\nexport const debugDatabaseContent = async (userId: string) => {\n  try {\n    logger.debug('ChatService', '=== DATABASE DEBUG ===');\n    logger.debug('ChatService', 'User ID', { userId });\n\n    // Get all chats\n    const chats = await db.getUserChats(userId);\n    logger.debug('ChatService', 'Total Chats', { count: chats.length });\n    chats.forEach((chat: any) => {\n      logger.debug('ChatService', 'Chat', {\n        id: chat.id,\n        participants: chat.participants,\n        lastMessage: chat.lastMessageText,\n        lastTime: chat.lastMessageTime,\n      });\n    });\n\n    // Get all messages\n    const messages = await DatabaseService.list(DB_COLLECTIONS.MESSAGES, userId);\n    logger.debug('ChatService', 'Total Messages', { count: messages.length });\n\n    logger.debug('ChatService', '=== END DEBUG ===');\n  } catch (error) {\n    logger.error('ChatService', 'Debug error', { error });\n  }\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/config.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/databaseService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CACHE_CONFIG' is defined but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CACHE_CONFIG"},"fix":{"range":[1346,1359],"text":""},"desc":"Remove unused variable \"CACHE_CONFIG\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'OFFLINE_CONFIG' is defined but never used.","line":21,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":38,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"OFFLINE_CONFIG"},"fix":{"range":[1358,1374],"text":""},"desc":"Remove unused variable \"OFFLINE_CONFIG\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STORAGE_KEYS' is defined but never used.","line":21,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":52,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"STORAGE_KEYS"},"fix":{"range":[1337,1410],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ApiResponse' is defined but never used.","line":22,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ApiResponse"},"fix":{"range":[1429,1442],"text":""},"desc":"Remove unused variable \"ApiResponse\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1695,1698],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1695,1698],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":79,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":204,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":204,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7735,7738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7735,7738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7759,7762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7759,7762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7813,7816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7813,7816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7856,7859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7856,7859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":316,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":316,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11411,11414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11411,11414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":420,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14692,14695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14692,14695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":426,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":426,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14922,14925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14922,14925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":430,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":430,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15076,15079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15076,15079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":443,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":443,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15564,15567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15564,15567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":453,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":453,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15975,15978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15975,15978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":463,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16375,16378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16375,16378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":473,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":473,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16745,16748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16745,16748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":477,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":477,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16968,16971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16968,16971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":480,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":480,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17117,17120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17117,17120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":508,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":508,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18198,18201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18198,18201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":521,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":521,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18703,18706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18703,18706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":525,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":525,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18864,18867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18864,18867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":535,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":535,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19271,19274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19271,19274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":550,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":550,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19909,19912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19909,19912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":557,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":557,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20297,20300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20297,20300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":560,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":560,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20432,20435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20432,20435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":570,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":570,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20909,20912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20909,20912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":574,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":574,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21141,21144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21141,21144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":577,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":577,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21269,21272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21269,21272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":587,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":587,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21740,21743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21740,21743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":594,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":594,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22108,22111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22108,22111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":601,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":601,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22456,22459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22456,22459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":606,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":606,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22644,22647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22644,22647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":613,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":613,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22958,22961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22958,22961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":722,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":722,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27240,27243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27240,27243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":748,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":748,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28219,28222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28219,28222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":766,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":766,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29090,29093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29090,29093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":815,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":815,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31174,31177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31174,31177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":856,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":856,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32801,32804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32801,32804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":859,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":859,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32870,32873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32870,32873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":864,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":864,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33240,33243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33240,33243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":864,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":864,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33256,33259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33256,33259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":879,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":879,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33857,33860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33857,33860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":890,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":890,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34216,34219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34216,34219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":899,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":899,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34616,34619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34616,34619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":906,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":906,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34951,34954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34951,34954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":915,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":915,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35303,35306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35303,35306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":922,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":922,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35593,35596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35593,35596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":928,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":928,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35901,35904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35901,35904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":935,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":935,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36244,36247],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36244,36247],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":941,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":941,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36610,36613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36610,36613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":951,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":951,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37024,37027],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37024,37027],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":973,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":973,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37999,38002],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37999,38002],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":55,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Unified client-side data access with backends: REST, Firestore, or AsyncStorage fallback.\n// - Reached from: Many screens/services via `db` helpers and `DatabaseService` static methods.\n// - Provides: CRUD/list/search/batch across logical collections; export/import; user-wide operations.\n// - Behavior: Delegates to `restAdapter` when `USE_BACKEND` is true, else Firestore/AsyncStorage.\n// utils/databaseService.ts\n\n// TODO: CRITICAL - This file is extremely complex (800+ lines). Split into specialized services:\n//   - UserDataService, PostDataService, ChatDataService, etc.\n// TODO: Add comprehensive error handling and retry mechanisms\n// TODO: Implement proper caching strategy and cache invalidation\n// TODO: Add comprehensive TypeScript interfaces for all data models\n// TODO: Remove duplicate code between different adapters\n// TODO: Add comprehensive data validation and sanitization\n// TODO: Implement proper offline sync and conflict resolution\n// TODO: Add comprehensive logging and monitoring for all operations\n// TODO: Add unit tests for all CRUD operations and edge cases\n// TODO: Implement proper migration system for data schema changes\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { USE_BACKEND, USE_FIRESTORE, API_BASE_URL } from './config.constants';\nimport { CACHE_CONFIG, OFFLINE_CONFIG, STORAGE_KEYS } from './dbConfig';\nimport { apiService, ApiResponse } from './apiService';\nimport { restAdapter } from './restAdapter';\nimport { firestoreAdapter } from './firestoreAdapter';\nimport { DB_COLLECTIONS } from './dbCollections';\nimport axios from 'axios';\n\nexport { DB_COLLECTIONS };\nlet enhancedDbInstance: any = null;\n\nasync function loadEnhancedDB() {\n  if (enhancedDbInstance) return enhancedDbInstance;\n  const module = await import('./enhancedDatabaseService');\n  enhancedDbInstance = module.enhancedDB;\n  return enhancedDbInstance;\n}\n\n// Database Keys Generator\nexport const getDBKey = (collection: string, userId: string, itemId?: string) => {\n  if (itemId) {\n    return `${collection}_${userId}_${itemId}`;\n  }\n  return `${collection}_${userId}`;\n};\n\n// Generic Database Service\n// TODO: Convert to proper class instance instead of static methods\n// TODO: Add proper dependency injection for different adapters\n// TODO: Implement proper connection management and pooling\nexport class DatabaseService {\n  // Simple key-space versioning for future migrations\n  // TODO: Implement proper migration system with rollback support\n  // TODO: Add schema validation and versioning\n  private static DB_VERSION = 1;\n  private static VERSION_KEY = 'db_version';\n\n  static async ensureVersion(): Promise<void> {\n    const v = await AsyncStorage.getItem(DatabaseService.VERSION_KEY);\n    if (!v) {\n      await AsyncStorage.setItem(DatabaseService.VERSION_KEY, String(DatabaseService.DB_VERSION));\n      return;\n    }\n    const current = Number(v);\n    if (current < DatabaseService.DB_VERSION) {\n      // Place for future migrations per version\n      await AsyncStorage.setItem(DatabaseService.VERSION_KEY, String(DatabaseService.DB_VERSION));\n    }\n  }\n\n  // Aliases for backward compatibility\n  static async getItem<T>(collection: string, userId: string, itemId: string): Promise<T | null> {\n    return this.read<T>(collection, userId, itemId);\n  }\n\n  static async setItem<T>(collection: string, userId: string, itemId: string, data: T): Promise<void> {\n    try {\n      // Try to update first, if it fails then create\n      await this.update<T>(collection, userId, itemId, data);\n    } catch (error) {\n      // If update fails, create new item\n      await this.create<T>(collection, userId, itemId, data);\n    }\n  }\n\n  // Generic CRUD operations\n  static async create<T>(\n    collection: string,\n    userId: string,\n    itemId: string,\n    data: T\n  ): Promise<void> {\n    try {\n      if (USE_BACKEND) {\n        await restAdapter.create(collection, userId, itemId, data);\n      } else if (USE_FIRESTORE) {\n        await firestoreAdapter.create(collection, userId, itemId, data);\n      } else {\n        await this.ensureVersion();\n        const key = getDBKey(collection, userId, itemId);\n        await AsyncStorage.setItem(key, JSON.stringify(data));\n      }\n      console.log(`âœ… DatabaseService - Created ${collection} item:`, itemId);\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Create ${collection} error:`, error);\n      throw error;\n    }\n  }\n\n  static async read<T>(\n    collection: string,\n    userId: string,\n    itemId: string\n  ): Promise<T | null> {\n    try {\n      if (USE_BACKEND) {\n        return await restAdapter.read<T>(collection, userId, itemId);\n      } else if (USE_FIRESTORE) {\n        return await firestoreAdapter.read<T>(collection, userId, itemId);\n      } else {\n        await this.ensureVersion();\n        const key = getDBKey(collection, userId, itemId);\n        const item = await AsyncStorage.getItem(key);\n        return item ? JSON.parse(item) : null;\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Read ${collection} error:`, error);\n      return null;\n    }\n  }\n\n  static async update<T>(\n    collection: string,\n    userId: string,\n    itemId: string,\n    data: Partial<T>\n  ): Promise<void> {\n    try {\n      if (USE_BACKEND) {\n        await restAdapter.update(collection, userId, itemId, data);\n        console.log(`âœ… DatabaseService - Updated ${collection} item:`, itemId);\n      } else if (USE_FIRESTORE) {\n        await firestoreAdapter.update(collection, userId, itemId, data);\n        console.log(`âœ… DatabaseService - Updated ${collection} item:`, itemId);\n      } else {\n        const existing = await this.read<T>(collection, userId, itemId);\n        if (existing) {\n          const updated = { ...existing, ...data };\n          await this.create(collection, userId, itemId, updated);\n          console.log(`âœ… DatabaseService - Updated ${collection} item:`, itemId);\n        }\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Update ${collection} error:`, error);\n      throw error;\n    }\n  }\n\n  static async delete(\n    collection: string,\n    userId: string,\n    itemId: string\n  ): Promise<void> {\n    try {\n      if (USE_BACKEND) {\n        await restAdapter.delete(collection, userId, itemId);\n      } else if (USE_FIRESTORE) {\n        await firestoreAdapter.delete(collection, userId, itemId);\n      } else {\n        const key = getDBKey(collection, userId, itemId);\n        await AsyncStorage.removeItem(key);\n      }\n      console.log(`âœ… DatabaseService - Deleted ${collection} item:`, itemId);\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Delete ${collection} error:`, error);\n      throw error;\n    }\n  }\n\n  // List operations\n  static async list<T>(\n    collection: string,\n    userId: string\n  ): Promise<T[]> {\n    try {\n      if (USE_BACKEND) {\n        if (collection === DB_COLLECTIONS.POSTS) {\n          const res = await apiService.getUserPosts(userId);\n          return res.success ? (res.data as unknown as T[]) : [];\n        }\n        return await restAdapter.list<T>(collection, userId);\n      } else if (USE_FIRESTORE) {\n        return await firestoreAdapter.list<T>(collection, userId);\n      } else {\n        await this.ensureVersion();\n        const keys = await AsyncStorage.getAllKeys();\n        const userKeys = keys.filter(key =>\n          key.startsWith(`${collection}_${userId}_`)\n        );\n\n        if (userKeys.length === 0) return [];\n\n        const items = await AsyncStorage.multiGet(userKeys);\n        return items\n          .map(([key, value]) => value ? JSON.parse(value) : null)\n          .filter((item): item is T => item !== null)\n          .sort((a, b) => {\n            if ((a as any).timestamp && (b as any).timestamp) {\n              return new Date((b as any).timestamp).getTime() - new Date((a as any).timestamp).getTime();\n            }\n            return 0;\n          });\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - List ${collection} error:`, error);\n      return [];\n    }\n  }\n\n  // Count operations\n  static async count(collection: string, userId: string): Promise<number> {\n    try {\n      if (USE_BACKEND) {\n        const items = await restAdapter.list(collection, userId);\n        return items.length;\n      } else if (USE_FIRESTORE) {\n        const items = await firestoreAdapter.list(collection, userId);\n        return items.length;\n      } else {\n        const keys = await AsyncStorage.getAllKeys();\n        const userKeys = keys.filter(key =>\n          key.startsWith(`${collection}_${userId}_`)\n        );\n        return userKeys.length;\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Count ${collection} error:`, error);\n      return 0;\n    }\n  }\n\n  // Search operations\n  static async search<T>(\n    collection: string,\n    userId: string,\n    query: (item: T) => boolean\n  ): Promise<T[]> {\n    try {\n      const items = await this.list<T>(collection, userId);\n      return items.filter(query);\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Search ${collection} error:`, error);\n      return [];\n    }\n  }\n\n  // Batch operations\n  static async batchCreate<T>(\n    collection: string,\n    userId: string,\n    items: Array<{ id: string; data: T }>\n  ): Promise<void> {\n    try {\n      if (USE_BACKEND) {\n        for (const { id, data } of items) {\n           \n          await restAdapter.create(collection, userId, id, data);\n        }\n        console.log(`âœ… DatabaseService - Batch created ${items.length} ${collection} items (Backend)`);\n      } else if (USE_FIRESTORE) {\n        await firestoreAdapter.batchCreate(collection, userId, items);\n        console.log(`âœ… DatabaseService - Batch created ${items.length} ${collection} items (Firestore)`);\n      } else {\n        const keyValuePairs: [string, string][] = items.map(({ id, data }) => [\n          getDBKey(collection, userId, id),\n          JSON.stringify(data)\n        ]);\n        await AsyncStorage.multiSet(keyValuePairs);\n        console.log(`âœ… DatabaseService - Batch created ${items.length} ${collection} items`);\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Batch create ${collection} error:`, error);\n      throw error;\n    }\n  }\n\n  static async batchDelete(\n    collection: string,\n    userId: string,\n    itemIds: string[]\n  ): Promise<void> {\n    try {\n      if (USE_BACKEND) {\n        for (const id of itemIds) {\n           \n          await restAdapter.delete(collection, userId, id);\n        }\n        console.log(`âœ… DatabaseService - Batch deleted ${itemIds.length} ${collection} items (Backend)`);\n      } else if (USE_FIRESTORE) {\n        await firestoreAdapter.batchDelete(collection, userId, itemIds);\n        console.log(`âœ… DatabaseService - Batch deleted ${itemIds.length} ${collection} items (Firestore)`);\n      } else {\n        const keys = itemIds.map(id => getDBKey(collection, userId, id));\n        await AsyncStorage.multiRemove(keys);\n        console.log(`âœ… DatabaseService - Batch deleted ${itemIds.length} ${collection} items`);\n      }\n    } catch (error) {\n      console.error(`âŒ DatabaseService - Batch delete ${collection} error:`, error);\n      throw error;\n    }\n  }\n\n  // User-specific operations\n  static async getUserData(userId: string) {\n    try {\n      const collections = Object.values(DB_COLLECTIONS);\n      const userData: Record<string, any> = {};\n\n      for (const collection of collections) {\n        userData[collection] = await this.list(collection, userId);\n      }\n\n      return userData;\n    } catch (error) {\n      console.error('âŒ DatabaseService - Get user data error:', error);\n      return {};\n    }\n  }\n\n  static async deleteUserData(userId: string): Promise<void> {\n    try {\n      const keys = await AsyncStorage.getAllKeys();\n      const userKeys = keys.filter(key => key.includes(`_${userId}_`) || key.endsWith(`_${userId}`));\n      await AsyncStorage.multiRemove(userKeys);\n      console.log(`âœ… DatabaseService - Deleted all data for user: ${userId}`);\n    } catch (error) {\n      console.error('âŒ DatabaseService - Delete user data error:', error);\n      throw error;\n    }\n  }\n\n  // Migration and maintenance\n  static async clearAllData(): Promise<void> {\n    try {\n      await AsyncStorage.clear();\n      console.log('âœ… DatabaseService - Cleared all data');\n    } catch (error) {\n      console.error('âŒ DatabaseService - Clear all data error:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Clear only local collection keys created by DatabaseService\n   * Preserves app preferences like language, recent emails, etc.\n   */\n  static async clearLocalCollections(): Promise<void> {\n    try {\n      const keys = await AsyncStorage.getAllKeys();\n      const collectionPrefixes = Object.values(DB_COLLECTIONS).map((c) => `${c}_`);\n      const keysToRemove = keys.filter((k) =>\n        collectionPrefixes.some((prefix) => k.startsWith(prefix)) || k === DatabaseService.VERSION_KEY\n      );\n      if (keysToRemove.length > 0) {\n        await AsyncStorage.multiRemove(keysToRemove);\n      }\n      console.log('âœ… DatabaseService - Cleared local collection keys:', keysToRemove.length);\n    } catch (error) {\n      console.error('âŒ DatabaseService - Clear local collections error:', error);\n      throw error;\n    }\n  }\n\n  static async getDatabaseSize(): Promise<number> {\n    try {\n      const keys = await AsyncStorage.getAllKeys();\n      return keys.length;\n    } catch (error) {\n      console.error('âŒ DatabaseService - Get database size error:', error);\n      return 0;\n    }\n  }\n\n  static async exportUserData(userId: string): Promise<string> {\n    try {\n      const userData = await this.getUserData(userId);\n      return JSON.stringify(userData, null, 2);\n    } catch (error) {\n      console.error('âŒ DatabaseService - Export user data error:', error);\n      throw error;\n    }\n  }\n\n  static async importUserData(userId: string, dataJson: string): Promise<void> {\n    try {\n      const userData = JSON.parse(dataJson);\n      const collections = Object.keys(userData);\n\n      for (const collection of collections) {\n        const items = userData[collection];\n        if (Array.isArray(items)) {\n          for (const item of items) {\n            if (item.id) {\n              await this.create(collection, userId, item.id, item);\n            }\n          }\n        }\n      }\n\n      console.log(`âœ… DatabaseService - Imported data for user: ${userId}`);\n    } catch (error) {\n      console.error('âŒ DatabaseService - Import user data error:', error);\n      throw error;\n    }\n  }\n}\n\n// Convenience functions for common operations\nexport const db = {\n  // Users\n  createUser: (userId: string, userData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.USERS, userId, userId, userData),\n\n  getUser: (userId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.USERS, userId, userId),\n\n  updateUser: (userId: string, userData: Partial<any>) =>\n    DatabaseService.update(DB_COLLECTIONS.USERS, userId, userId, userData),\n\n  // Posts\n  createPost: (userId: string, postId: string, postData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.POSTS, userId, postId, postData),\n\n  getPost: (userId: string, postId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.POSTS, userId, postId),\n\n  getUserPosts: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.POSTS, userId),\n\n  deletePost: (userId: string, postId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.POSTS, userId, postId),\n\n  // Followers\n  addFollower: (userId: string, followerId: string, followerData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.FOLLOWERS, userId, followerId, followerData),\n\n  removeFollower: (userId: string, followerId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.FOLLOWERS, userId, followerId),\n\n  getFollowers: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.FOLLOWERS, userId),\n\n  // Following\n  addFollowing: (userId: string, followingId: string, followingData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.FOLLOWING, userId, followingId, followingData),\n\n  removeFollowing: (userId: string, followingId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.FOLLOWING, userId, followingId),\n\n  getFollowing: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.FOLLOWING, userId),\n\n  // Chats\n  createChat: (userId: string, chatId: string, chatData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.CHATS, userId, chatId, chatData),\n\n  getChat: (userId: string, chatId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.CHATS, userId, chatId),\n\n  getUserChats: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.CHATS, userId),\n\n  // Messages\n  createMessage: (userId: string, messageId: string, messageData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.MESSAGES, userId, messageId, messageData),\n\n  getChatMessages: (userId: string, conversationId: string) =>\n    DatabaseService.search(DB_COLLECTIONS.MESSAGES, userId, (msg: any) => msg.conversationId === conversationId),\n\n  // Notifications\n  createNotification: (userId: string, notificationId: string, notificationData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.NOTIFICATIONS, userId, notificationId, notificationData),\n\n  getUserNotifications: async (userId: string) => {\n    if (USE_BACKEND) {\n      const res = await apiService.getNotifications(userId);\n      return res.success ? res.data : [];\n    }\n    return DatabaseService.list(DB_COLLECTIONS.NOTIFICATIONS, userId);\n  },\n\n  markNotificationAsRead: async (userId: string, notificationId: string) => {\n    if (USE_BACKEND) {\n      const res = await apiService.markNotificationAsRead(userId, notificationId);\n      return res.success;\n    }\n    return DatabaseService.update(DB_COLLECTIONS.NOTIFICATIONS, userId, notificationId, { read: true });\n  },\n\n  deleteNotification: async (userId: string, notificationId: string) => {\n    if (USE_BACKEND) {\n      const res = await apiService.deleteNotification(userId, notificationId);\n      return res.success;\n    }\n    return DatabaseService.delete(DB_COLLECTIONS.NOTIFICATIONS, userId, notificationId);\n  },\n\n  // Bookmarks\n  addBookmark: (userId: string, bookmarkId: string, bookmarkData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.BOOKMARKS, userId, bookmarkId, bookmarkData),\n\n  removeBookmark: (userId: string, bookmarkId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.BOOKMARKS, userId, bookmarkId),\n\n  getUserBookmarks: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.BOOKMARKS, userId),\n\n  // Settings\n  getUserSettings: (userId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.SETTINGS, userId, 'settings'),\n\n  updateUserSettings: (userId: string, settings: any) =>\n    DatabaseService.create(DB_COLLECTIONS.SETTINGS, userId, 'settings', settings),\n\n  // Media\n  saveMedia: (userId: string, mediaId: string, mediaData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.MEDIA, userId, mediaId, mediaData),\n\n  getMedia: (userId: string, mediaId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.MEDIA, userId, mediaId),\n\n  deleteMedia: (userId: string, mediaId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.MEDIA, userId, mediaId),\n\n  // Blocked Users\n  blockUser: (userId: string, blockedUserId: string, blockedData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.BLOCKED_USERS, userId, blockedUserId, blockedData),\n\n  unblockUser: (userId: string, blockedUserId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.BLOCKED_USERS, userId, blockedUserId),\n\n  getBlockedUsers: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.BLOCKED_USERS, userId),\n\n  isUserBlocked: async (userId: string, targetUserId: string) => {\n    const blocked = await DatabaseService.read(DB_COLLECTIONS.BLOCKED_USERS, userId, targetUserId);\n    return blocked !== null;\n  },\n\n  // Message Reactions\n  addReaction: (userId: string, reactionId: string, reactionData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.MESSAGE_REACTIONS, userId, reactionId, reactionData),\n\n  removeReaction: (userId: string, reactionId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.MESSAGE_REACTIONS, userId, reactionId),\n\n  getMessageReactions: (userId: string, messageId: string) =>\n    DatabaseService.search(DB_COLLECTIONS.MESSAGE_REACTIONS, userId, (reaction: any) => reaction.messageId === messageId),\n\n  // Typing Status\n  setTypingStatus: (userId: string, conversationId: string, typingData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.TYPING_STATUS, userId, conversationId, typingData),\n\n  clearTypingStatus: (userId: string, conversationId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.TYPING_STATUS, userId, conversationId),\n\n  getTypingStatus: (userId: string, conversationId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.TYPING_STATUS, userId, conversationId),\n\n  // Read Receipts\n  markAsRead: (userId: string, receiptId: string, receiptData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.READ_RECEIPTS, userId, receiptId, receiptData),\n\n  getReadReceipts: (userId: string, messageId: string) =>\n    DatabaseService.search(DB_COLLECTIONS.READ_RECEIPTS, userId, (receipt: any) => receipt.messageId === messageId),\n\n  // Voice Messages\n  saveVoiceMessage: (userId: string, voiceId: string, voiceData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.VOICE_MESSAGES, userId, voiceId, voiceData),\n\n  getVoiceMessage: (userId: string, voiceId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.VOICE_MESSAGES, userId, voiceId),\n\n  deleteVoiceMessage: (userId: string, voiceId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.VOICE_MESSAGES, userId, voiceId),\n\n  // Conversation Metadata\n  updateConversationMetadata: (userId: string, conversationId: string, metadata: any) =>\n    DatabaseService.create(DB_COLLECTIONS.CONVERSATION_METADATA, userId, conversationId, metadata),\n\n  getConversationMetadata: (userId: string, conversationId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.CONVERSATION_METADATA, userId, conversationId),\n\n  // Advanced Message Operations\n  updateMessage: (userId: string, messageId: string, messageData: any) =>\n    DatabaseService.update(DB_COLLECTIONS.MESSAGES, userId, messageId, messageData),\n\n  deleteMessage: (userId: string, messageId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.MESSAGES, userId, messageId),\n\n  searchMessages: (userId: string, searchQuery: string) =>\n    DatabaseService.search(DB_COLLECTIONS.MESSAGES, userId, (msg: any) =>\n      msg.text?.toLowerCase().includes(searchQuery.toLowerCase())\n    ),\n\n  // Batch Message Operations\n  batchCreateMessages: (userId: string, messages: Array<{ id: string; data: any }>) =>\n    DatabaseService.batchCreate(DB_COLLECTIONS.MESSAGES, userId, messages),\n\n  batchDeleteMessages: (userId: string, messageIds: string[]) =>\n    DatabaseService.batchDelete(DB_COLLECTIONS.MESSAGES, userId, messageIds),\n\n  // Rides (Trump)\n  createRide: async (userId: string, rideId: string, rideData: any) => {\n    try {\n      if (USE_BACKEND) {\n        const departureIso = (() => {\n          try {\n            const dateStr = typeof rideData?.date === 'string' ? rideData.date : new Date().toISOString().split('T')[0];\n            const timeStr = typeof rideData?.time === 'string' ? rideData.time : new Date().toTimeString().slice(0, 5);\n\n            // Validate date format (YYYY-MM-DD)\n            if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)) {\n              throw new Error('Invalid date format');\n            }\n\n            // Validate time format (HH:MM)\n            if (!/^\\d{2}:\\d{2}$/.test(timeStr)) {\n              throw new Error('Invalid time format');\n            }\n\n            // Parse time components\n            const [hours, minutes] = timeStr.split(':').map(Number);\n\n            // Create date in local timezone (not UTC)\n            // Use the date string and set hours/minutes in local timezone\n            const localDate = new Date(dateStr + 'T00:00:00');\n            localDate.setHours(hours, minutes, 0, 0);\n\n            // Convert to ISO string (this will be in UTC, but we preserve the local time intent)\n            // The server should store this as-is, treating it as the intended local time\n            const isoString = localDate.toISOString();\n\n            console.log('ğŸ• Converting time:', { dateStr, timeStr, localDate: localDate.toLocaleString('he-IL'), isoString });\n\n            // Check if date is valid\n            if (isNaN(localDate.getTime())) {\n              throw new Error('Invalid datetime');\n            }\n\n            return isoString;\n          } catch (error) {\n            console.error('Date parsing error:', error);\n            // Fallback to current time if date parsing fails\n            return new Date().toISOString();\n          }\n        })();\n        // Validate required fields before sending to server\n        if (!rideData.from || !rideData.to) {\n          throw new Error('From and to locations are required');\n        }\n\n        const driverId = rideData.driverId || userId;\n        if (!driverId) {\n          throw new Error('Driver ID is required');\n        }\n\n        const payload = {\n          driver_id: driverId,\n          title: rideData.title || `${rideData.from} â†’ ${rideData.to}`,\n          from_location: {\n            name: rideData.from,\n            city: rideData.from,\n            address: rideData.from\n          },\n          to_location: {\n            name: rideData.to,\n            city: rideData.to,\n            address: rideData.to\n          },\n          departure_time: departureIso,\n          arrival_time: null,\n          available_seats: Math.max(1, Math.min(8, typeof rideData.seats === 'number' ? rideData.seats : 1)),\n          price_per_seat: Math.max(0, Number(rideData.price || 0)),\n          description: rideData.description || null,\n          requirements: (() => {\n            const reqs: string[] = [];\n            if (rideData.noSmoking) reqs.push('no-smoking');\n            if (rideData.petsAllowed) reqs.push('pets-allowed');\n            if (rideData.kidsFriendly) reqs.push('kids-friendly');\n            return reqs.length > 0 ? reqs.join(', ') : null;\n          })(),\n          metadata: { source: 'legacy-app', legacy_id: rideId },\n        };\n\n        console.log('ğŸš— Creating ride with payload:', JSON.stringify(payload, null, 2));\n        const res = await apiService.createRide(payload);\n        if (!res.success) throw new Error(res.error || 'Failed to create ride');\n\n        // Clear cache to ensure immediate update in UI\n        try {\n          const enhancedDB = await loadEnhancedDB();\n          await enhancedDB.clearCachePattern('rides_list');\n          await enhancedDB.clearCachePattern('user_rides');\n        } catch (cacheError) {\n          console.warn('Failed to clear ride cache:', cacheError);\n        }\n\n        return;\n      }\n      return DatabaseService.create(DB_COLLECTIONS.RIDES, userId, rideId, rideData);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.createRide error:', error);\n      throw error;\n    }\n  },\n\n  getRide: async (_userId: string, rideId: string) => {\n    try {\n      if (USE_BACKEND) {\n        const res = await apiService.getRideById(rideId);\n        if (!res.success || !res.data) return null;\n        const r: any = res.data;\n        return {\n          id: r.id,\n          driverName: r.driver_name || '',\n          from: r.from_location?.name || r.from_location?.city || '',\n          to: r.to_location?.name || r.to_location?.city || '',\n          date: new Date(r.departure_time).toISOString().slice(0, 10),\n          time: new Date(r.departure_time).toISOString().slice(11, 16),\n          seats: r.available_seats,\n          price: Number(r.price_per_seat) || 0,\n          rating: 5,\n          image: 'ğŸš—',\n        };\n      }\n      return DatabaseService.read(DB_COLLECTIONS.RIDES, _userId, rideId);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.getRide error:', error);\n      return null;\n    }\n  },\n\n  listRides: async (_userId: string, _options?: { includePast?: boolean }) => {\n    try {\n      if (USE_BACKEND) {\n        const enhancedDB = await loadEnhancedDB();\n        // Pass include_past parameter to get all rides including past ones\n        const filters: any = {};\n        if (_options?.includePast) {\n          filters.include_past = 'true';\n        }\n        // Don't set status filter - let server return all active/published rides\n        // The server defaults to 'active' but we want to see all published rides too\n        console.log('ğŸ” listRides filters:', filters);\n        const apiRides = await enhancedDB.getRides(filters);\n        console.log('ğŸ“‹ listRides returned:', apiRides?.length || 0, 'rides');\n        if (apiRides && apiRides.length > 0) {\n          console.log('ğŸ“‹ First ride sample:', JSON.stringify({\n            id: apiRides[0].id,\n            status: apiRides[0].status,\n            from: apiRides[0].from_location?.name,\n            to: apiRides[0].to_location?.name,\n            departure_time: apiRides[0].departure_time\n          }, null, 2));\n        }\n        return (apiRides || []).map((r: any) => {\n          // Convert UTC time to local time for display\n          let dateStr = '';\n          let timeStr = '00:00';\n\n          if (r.departure_time) {\n            const departureDate = new Date(r.departure_time);\n            // Get local date and time (not UTC)\n            dateStr = departureDate.toLocaleDateString('en-CA'); // YYYY-MM-DD format\n            const localHours = departureDate.getHours();\n            const localMinutes = departureDate.getMinutes();\n            timeStr = `${String(localHours).padStart(2, '0')}:${String(localMinutes).padStart(2, '0')}`;\n          } else {\n            dateStr = r.date || new Date().toISOString().slice(0, 10);\n            timeStr = r.time || '00:00';\n          }\n\n          return {\n            id: r.id,\n            driverId: r.driver_id || r.driverId || r.createdBy,\n            driverName: r.driver_name || r.driverId || 'Driver',\n            from: r.from_location?.name || r.from || '',\n            to: r.to_location?.name || r.to || '',\n            date: dateStr,\n            time: timeStr,\n            seats: r.available_seats ?? r.seats ?? 1,\n            price: Number(r.price_per_seat ?? r.price ?? 0),\n            rating: r.rating ?? 5,\n            image: r.image ?? 'ğŸš—',\n            category: r.category ?? 'ride',\n            status: r.status || 'active', // Ensure status is set\n            noSmoking: r.requirements?.includes('no-smoking') || false,\n            petsAllowed: r.requirements?.includes('pets-allowed') || false,\n            kidsFriendly: r.requirements?.includes('kids-friendly') || false,\n          };\n        });\n      }\n      return DatabaseService.list(DB_COLLECTIONS.RIDES, _userId);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.listRides error:', error);\n      return [];\n    }\n  },\n\n  getUserRides: async (_userId: string, _role: 'driver' | 'passenger' = 'driver') => {\n    try {\n      if (USE_BACKEND) {\n        const enhancedDB = await loadEnhancedDB();\n        const apiRides = await enhancedDB.getUserRides(_userId, _role);\n        return (apiRides || []).map((r: any) => {\n          // Convert UTC time to local time for display\n          let dateStr = '';\n          let timeStr = '00:00';\n\n          if (r.departure_time) {\n            const departureDate = new Date(r.departure_time);\n            // Get local date and time (not UTC)\n            dateStr = departureDate.toLocaleDateString('en-CA'); // YYYY-MM-DD format\n            const localHours = departureDate.getHours();\n            const localMinutes = departureDate.getMinutes();\n            timeStr = `${String(localHours).padStart(2, '0')}:${String(localMinutes).padStart(2, '0')}`;\n          } else {\n            dateStr = r.date || new Date().toISOString().slice(0, 10);\n            timeStr = r.time || '00:00';\n          }\n\n          return {\n            id: r.id,\n            driverId: r.driver_id || r.driverId || r.createdBy,\n            driverName: r.driver_name || r.driverId || 'Driver',\n            from: r.from_location?.name || r.from || '',\n            to: r.to_location?.name || r.to || '',\n            date: dateStr,\n            time: timeStr,\n            seats: r.available_seats ?? r.seats ?? 1,\n            price: Number(r.price_per_seat ?? r.price ?? 0),\n            rating: r.rating ?? 5,\n            image: r.image ?? 'ğŸš—',\n            category: r.category ?? 'ride',\n            status: r.status || 'published',\n          };\n        });\n      }\n      return DatabaseService.list(DB_COLLECTIONS.RIDES, _userId);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.getUserRides error:', error);\n      return [];\n    }\n  },\n\n  updateRide: async (_userId: string, rideId: string, rideData: Partial<any>) => {\n    try {\n      if (USE_BACKEND) {\n        const payload: any = {};\n        if (rideData.title) payload.title = rideData.title;\n        if (rideData.seats !== undefined) payload.available_seats = rideData.seats;\n        if (rideData.price !== undefined) payload.price_per_seat = Number(rideData.price);\n        if (rideData.status) payload.status = rideData.status;\n        const res = await apiService.updateDonation(rideId as any, payload as any); // reuse generic update if exists\n        if (!res.success) throw new Error(res.error || 'Failed to update ride');\n        return;\n      }\n      return DatabaseService.update(DB_COLLECTIONS.RIDES, _userId, rideId, rideData);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.updateRide error:', error);\n      throw error;\n    }\n  },\n\n  deleteRide: async (_userId: string, rideId: string) => {\n    try {\n      if (USE_BACKEND) {\n        // RidesController uses status update for cancel; no direct delete endpoint in apiService\n        await apiService.updateBookingStatus(rideId as any, 'cancelled');\n        return;\n      }\n      return DatabaseService.delete(DB_COLLECTIONS.RIDES, _userId, rideId);\n    } catch (error) {\n      console.error('âŒ DatabaseService.db.deleteRide error:', error);\n      throw error;\n    }\n  },\n\n  // Donations / Items (generic items postings)\n  createDonation: (userId: string, donationId: string, donationData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.DONATIONS, userId, donationId, donationData),\n\n  getDonation: (userId: string, donationId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.DONATIONS, userId, donationId),\n\n  listDonations: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.DONATIONS, userId),\n\n  updateDonation: (userId: string, donationId: string, donationData: Partial<any>) =>\n    DatabaseService.update(DB_COLLECTIONS.DONATIONS, userId, donationId, donationData),\n\n  deleteDonation: (userId: string, donationId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.DONATIONS, userId, donationId),\n\n  // Items (furniture, clothes, general items)\n  createItem: (userId: string, itemId: string, itemData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.ITEMS, userId, itemId, itemData),\n\n  getItem: (userId: string, itemId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.ITEMS, userId, itemId),\n\n  listItems: (userId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.ITEMS, userId),\n\n  updateItem: (userId: string, itemId: string, itemData: Partial<any>) =>\n    DatabaseService.update(DB_COLLECTIONS.ITEMS, userId, itemId, itemData),\n\n  deleteItem: (userId: string, itemId: string) =>\n    DatabaseService.delete(DB_COLLECTIONS.ITEMS, userId, itemId),\n\n  // Organizations\n  createOrganization: (ownerUserId: string, orgId: string, orgData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.ORGANIZATIONS, ownerUserId, orgId, orgData),\n\n  getOrganization: (ownerUserId: string, orgId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.ORGANIZATIONS, ownerUserId, orgId),\n\n  updateOrganization: (ownerUserId: string, orgId: string, orgData: Partial<any>) =>\n    DatabaseService.update(DB_COLLECTIONS.ORGANIZATIONS, ownerUserId, orgId, orgData),\n\n  listOrganizations: (ownerUserId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.ORGANIZATIONS, ownerUserId),\n\n  // Org Applications (onboarding requests)\n  createOrgApplication: (ownerUserId: string, applicationId: string, applicationData: any) =>\n    DatabaseService.create(DB_COLLECTIONS.ORG_APPLICATIONS, ownerUserId, applicationId, applicationData),\n\n  getOrgApplication: (ownerUserId: string, applicationId: string) =>\n    DatabaseService.read(DB_COLLECTIONS.ORG_APPLICATIONS, ownerUserId, applicationId),\n\n  updateOrgApplication: (ownerUserId: string, applicationId: string, applicationData: Partial<any>) =>\n    DatabaseService.update(DB_COLLECTIONS.ORG_APPLICATIONS, ownerUserId, applicationId, applicationData),\n\n  listOrgApplications: (ownerUserId: string) =>\n    DatabaseService.list(DB_COLLECTIONS.ORG_APPLICATIONS, ownerUserId),\n\n  // ========================================\n  // Dedicated Items API (separate columns)\n  // ========================================\n\n  createDedicatedItem: async (itemData: any) => {\n    console.log('ğŸ“¤ API: Creating dedicated item to:', `${API_BASE_URL}/api/dedicated-items`);\n    console.log('ğŸ“¦ Item data:', JSON.stringify(itemData, null, 2));\n    const response = await axios.post(`${API_BASE_URL}/api/dedicated-items`, itemData);\n    console.log('âœ… API: Item created:', response.data);\n    return response.data;\n  },\n\n  getDedicatedItemsByOwner: async (ownerId: string) => {\n    console.log('ğŸ“¥ API: Fetching items for owner:', ownerId);\n    const response = await axios.get(`${API_BASE_URL}/api/dedicated-items/owner/${ownerId}`);\n    console.log('âœ… API: Received items:', response.data.length || 0);\n    return response.data;\n  },\n\n  getDedicatedItemById: async (id: string) => {\n    console.log('ğŸ“¥ API: Fetching item by ID:', id);\n    const response = await axios.get(`${API_BASE_URL}/api/dedicated-items/${id}`);\n    console.log('âœ… API: Item received');\n    return response.data;\n  },\n\n  updateDedicatedItem: async (id: string, itemData: any) => {\n    console.log('âœï¸ API: Updating item:', id);\n    const response = await axios.put(`${API_BASE_URL}/api/dedicated-items/${id}`, itemData);\n    console.log('âœ… API: Item updated');\n    return response.data;\n  },\n\n  // NOTE: Links functionality has been removed - links table was deleted from database\n  // All user data is now unified in user_profiles table with UUID identifiers\n\n  deleteDedicatedItem: async (id: string) => {\n    console.log('ğŸ—‘ï¸ API: Deleting item:', id);\n    const response = await axios.delete(`${API_BASE_URL}/api/dedicated-items/${id}`);\n    console.log('âœ… API: Item deleted');\n    return response.data;\n  },\n\n  // ========================================\n  // Community Group Challenges API\n  // ========================================\n\n  createCommunityChallenge: async (challengeData: {\n    creator_id: string;\n    title: string;\n    description?: string;\n    image_url?: string;\n    type: 'BOOLEAN' | 'NUMERIC' | 'DURATION';\n    frequency: 'DAILY' | 'WEEKLY' | 'FLEXIBLE';\n    goal_value?: number;\n    goal_direction?: 'maximize' | 'minimize';\n    deadline?: string;\n    difficulty?: 'easy' | 'medium' | 'hard' | 'expert';\n    category?: string;\n  }) => {\n    console.log('ğŸ“¤ API: Creating community challenge:', challengeData.title);\n    const response = await axios.post(`${API_BASE_URL}/api/community-challenges`, challengeData);\n    console.log('âœ… API: Challenge created:', response.data);\n    return response.data;\n  },\n\n  getCommunityChallenges: async (filters: {\n    type?: string;\n    frequency?: string;\n    difficulty?: string;\n    category?: string;\n    is_active?: boolean;\n    creator_id?: string;\n    search?: string;\n    sort_by?: string;\n    sort_order?: 'ASC' | 'DESC';\n    limit?: number;\n    offset?: number;\n  } = {}) => {\n    console.log('ğŸ“¥ API: Fetching community challenges with filters:', filters);\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        params.append(key, String(value));\n      }\n    });\n    const response = await axios.get(`${API_BASE_URL}/api/community-challenges?${params.toString()}`);\n    console.log('âœ… API: Received challenges:', response.data.data?.length || 0);\n    return response.data;\n  },\n\n  getChallengeDetails: async (challengeId: string) => {\n    console.log('ğŸ“¥ API: Fetching challenge details:', challengeId);\n    const response = await axios.get(`${API_BASE_URL}/api/community-challenges/${challengeId}`);\n    console.log('âœ… API: Challenge details received');\n    return response.data;\n  },\n\n  joinChallenge: async (challengeId: string, userId: string) => {\n    console.log('ğŸ¤ API: Joining challenge:', challengeId, 'User:', userId);\n    const response = await axios.post(`${API_BASE_URL}/api/community-challenges/${challengeId}/join`, {\n      user_id: userId\n    });\n    console.log('âœ… API: Joined challenge successfully');\n    return response.data;\n  },\n\n  addChallengeEntry: async (challengeId: string, entryData: {\n    user_id: string;\n    value: number;\n    entry_date?: string;\n    notes?: string;\n  }) => {\n    const body = { challenge_id: challengeId, ...entryData };\n    console.log('ğŸ“ API: Adding challenge entry:', challengeId, 'date=', entryData.entry_date, 'value=', entryData.value);\n    const response = await axios.post(\n      `${API_BASE_URL}/api/community-challenges/${challengeId}/entries`,\n      body\n    );\n    console.log('âœ… API: Entry added. Streak:', response.data?.data?.current_streak, 'entry_date:', response.data?.data?.entry_date);\n    return response.data;\n  },\n\n  getChallengeEntries: async (challengeId: string, userId: string, limit = 100, offset = 0) => {\n    console.log('ğŸ“¥ API: Fetching challenge entries:', challengeId, 'User:', userId);\n    const params = new URLSearchParams({\n      user_id: userId,\n      limit: String(limit),\n      offset: String(offset)\n    });\n    const response = await axios.get(\n      `${API_BASE_URL}/api/community-challenges/${challengeId}/entries?${params.toString()}`\n    );\n    console.log('âœ… API: Received entries:', response.data.data?.length || 0);\n    return response.data;\n  },\n\n  getChallengeStatistics: async (userId: string) => {\n    console.log('ğŸ“Š API: Fetching challenge statistics for user:', userId);\n    const response = await axios.get(`${API_BASE_URL}/api/community-challenges/user/${userId}/stats`);\n    console.log('âœ… API: Statistics received');\n    return response.data;\n  },\n\n  updateCommunityChallenge: async (challengeId: string, userId: string, updateData: {\n    title?: string;\n    description?: string;\n    image_url?: string;\n    goal_value?: number;\n    goal_direction?: 'maximize' | 'minimize';\n    deadline?: string;\n    difficulty?: string;\n    category?: string;\n    is_active?: boolean;\n  }) => {\n    console.log('âœï¸ API: Updating challenge:', challengeId);\n    const params = new URLSearchParams({ user_id: userId });\n    const response = await axios.put(\n      `${API_BASE_URL}/api/community-challenges/${challengeId}?${params.toString()}`,\n      updateData\n    );\n    console.log('âœ… API: Challenge updated');\n    return response.data;\n  },\n\n  deleteCommunityChallenge: async (challengeId: string, userId: string) => {\n    console.log('ğŸ—‘ï¸ API: Deleting challenge:', challengeId, 'User:', userId);\n    const params = new URLSearchParams({ user_id: userId });\n    const url = `${API_BASE_URL}/api/community-challenges/${challengeId}?${params.toString()}`;\n    console.log('ğŸ”— API: DELETE URL:', url);\n    const response = await axios.delete(url);\n    console.log('âœ… API: Challenge deleted:', response.data);\n    return response.data;\n  },\n\n  // ========================================\n  // Daily Habits Tracker API\n  // ========================================\n\n  getDailyTrackerData: async (userId: string, startDate?: string, endDate?: string) => {\n    console.log('ğŸ“Š API: Fetching daily tracker data for user:', userId);\n    console.log('ğŸ“… Date range:', startDate, '-', endDate);\n    \n    const params = new URLSearchParams({ user_id: userId });\n    if (startDate) params.append('start_date', startDate);\n    if (endDate) params.append('end_date', endDate);\n    \n    const response = await axios.get(\n      `${API_BASE_URL}/api/community-challenges/daily-tracker?${params.toString()}`\n    );\n    \n    const payload = response.data?.data ?? response.data;\n    console.log('âœ… API: Tracker data received');\n    console.log('   Challenges:', payload?.challenges?.length ?? 0);\n    console.log('   Success rate:', payload?.stats?.total_success_rate ?? 'N/A');\n    if (payload?.entries_by_date && typeof __DEV__ !== 'undefined' && __DEV__) {\n      const dates = Object.keys(payload.entries_by_date);\n      console.log('   Dates with entries:', dates.join(', '));\n    }\n    return response.data;\n  },\n};\n\nexport default DatabaseService;","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/dbCollections.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/dbConfig.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Constants' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":17,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Constants"},"fix":{"range":[0,40],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":215,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":215,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Constants from 'expo-constants';\n// Re-export basic constants from the minimal config file to avoid circular dependencies\nimport { IS_DEVELOPMENT, IS_PRODUCTION, API_BASE_URL as RESOLVED_API_BASE_URL, USE_BACKEND, USE_FIRESTORE } from './config.constants';\nexport { IS_DEVELOPMENT, IS_PRODUCTION, USE_BACKEND, USE_FIRESTORE };\nexport { API_BASE_URL } from './config.constants';\n\n// File overview:\n// - Purpose: Central configuration for backend usage, API base URL, caching, sync, offline, and feature flags.\n// - Reached from: `apiService`, `enhancedDatabaseService`, and many utils to decide backend vs local.\n// - Exports: USE_BACKEND, USE_FIRESTORE, API_BASE_URL, endpoints, cache/sync/perf/feature configs.\n// Database and Backend Configuration\n// This file controls whether to use the backend API or local storage\n\nconst DEFAULT_API_BASE_URLS = {\n  development: 'http://localhost:3001',\n  production: 'https://kc-mvp-server-production.up.railway.app',\n};\n\n// Backend configuration\nexport const BACKEND_CONFIG = {\n  // Base URLs for different environments\n  development: DEFAULT_API_BASE_URLS.development,\n  production: DEFAULT_API_BASE_URLS.production,\n  resolved: RESOLVED_API_BASE_URL,\n  \n  // Feature flags\n  USE_REAL_API: true, // Set to false to use fake data during development\n  USE_CACHING: true,\n  CACHE_DURATION: 5 * 60 * 1000, // 5 minutes in milliseconds\n  \n  // API timeouts\n  REQUEST_TIMEOUT: 30000, // 30 seconds (for slower Railway servers)\n  RETRY_ATTEMPTS: 3,\n};\n\n// Get the appropriate API URL (for backward compatibility)\nexport const getApiUrl = (): string => RESOLVED_API_BASE_URL;\n\n// API endpoints\nexport const API_ENDPOINTS = {\n  // User endpoints\n  USER_REGISTER: '/api/users/register',\n  USER_LOGIN: '/api/users/login',\n  USER_PROFILE: '/api/users',\n  USER_STATS: '/api/users/{id}/stats',\n  USER_ACTIVITIES: '/api/users/{id}/activities',\n  \n  // Donation endpoints\n  DONATIONS: '/api/donations',\n  DONATION_CATEGORIES: '/api/donations/categories',\n  DONATION_STATS: '/api/donations/stats/summary',\n  \n  // Ride endpoints\n  RIDES: '/api/rides',\n  RIDE_BOOK: '/api/rides/{id}/book',\n  RIDE_STATS: '/api/rides/stats/summary',\n  \n  // Chat endpoints\n  CHAT_CONVERSATIONS: '/api/chat/conversations',\n  CHAT_MESSAGES: '/api/chat/messages',\n  CHAT_SEARCH: '/api/chat/search',\n  \n  // Stats endpoints\n  COMMUNITY_STATS: '/api/stats/community',\n  DASHBOARD_STATS: '/api/stats/dashboard',\n  REAL_TIME_STATS: '/api/stats/real-time',\n  CATEGORY_ANALYTICS: '/api/stats/analytics/categories',\n  \n  // Health check\n  HEALTH: '/health',\n};\n\n// Data synchronization settings\nexport const SYNC_CONFIG = {\n  // How often to sync data when app is active (milliseconds)\n  ACTIVE_SYNC_INTERVAL: 30 * 1000, // 30 seconds\n  \n  // How often to sync data when app is in background (milliseconds)\n  BACKGROUND_SYNC_INTERVAL: 5 * 60 * 1000, // 5 minutes\n  \n  // Collections that should sync automatically\n  AUTO_SYNC_COLLECTIONS: [\n    'donations',\n    'rides',\n    'community_stats',\n    'user_activities'\n  ],\n  \n  // Collections that require manual sync\n  MANUAL_SYNC_COLLECTIONS: [\n    'chat_messages',\n    'notifications'\n  ]\n};\n\n// Local storage keys\nexport const STORAGE_KEYS = {\n  USER_DATA: 'karma_user_data',\n  USER_SETTINGS: 'karma_user_settings',\n  CACHED_DONATIONS: 'karma_cached_donations',\n  CACHED_RIDES: 'karma_cached_rides',\n  CACHED_STATS: 'karma_cached_stats',\n  LAST_SYNC: 'karma_last_sync',\n  OFFLINE_QUEUE: 'karma_offline_queue',\n};\n\n// Offline mode configuration\nexport const OFFLINE_CONFIG = {\n  // Maximum number of actions to queue when offline\n  MAX_QUEUE_SIZE: 100,\n  \n  // Actions that can be performed offline\n  OFFLINE_ACTIONS: [\n    'create_donation',\n    'update_profile',\n    'send_message',\n    'bookmark_item'\n  ],\n  \n  // Data that should be available offline\n  OFFLINE_DATA: [\n    'user_profile',\n    'donation_categories',\n    'recent_donations',\n    'user_conversations'\n  ]\n};\n\n// Logging configuration\nexport const LOGGING_CONFIG = {\n  ENABLE_API_LOGGING: IS_DEVELOPMENT,\n  ENABLE_SYNC_LOGGING: IS_DEVELOPMENT,\n  ENABLE_ERROR_LOGGING: true,\n  LOG_LEVEL: IS_DEVELOPMENT ? 'debug' : 'error',\n};\n\n// Cache configuration\nexport const CACHE_CONFIG = {\n  // Cache keys with their expiration times (milliseconds)\n  CACHE_EXPIRY: {\n    user_profile: 15 * 60 * 1000, // 15 minutes\n    donation_categories: 60 * 60 * 1000, // 1 hour\n    community_stats: 10 * 60 * 1000, // 10 minutes\n    donations_list: 5 * 60 * 1000, // 5 minutes\n    rides_list: 5 * 60 * 1000, // 5 minutes\n    chat_conversations: 2 * 60 * 1000, // 2 minutes\n  },\n  \n  // Maximum cache size per collection\n  MAX_CACHE_SIZE: {\n    donations: 1000,\n    rides: 500,\n    messages: 10000,\n    activities: 500,\n  }\n};\n\n// Performance monitoring\nexport const PERFORMANCE_CONFIG = {\n  // Track API response times\n  TRACK_API_PERFORMANCE: IS_DEVELOPMENT,\n  \n  // Alert if API response time exceeds this (milliseconds)\n  SLOW_API_THRESHOLD: 3000,\n  \n  // Track app performance metrics\n  TRACK_APP_PERFORMANCE: true,\n  \n  // Report performance issues automatically\n  AUTO_REPORT_ISSUES: IS_PRODUCTION,\n};\n\n// Feature flags for gradual rollout\nexport const FEATURE_FLAGS = {\n  // New backend API\n  USE_NEW_API: true,\n  \n  // Real-time features\n  ENABLE_REAL_TIME_CHAT: true,\n  ENABLE_REAL_TIME_STATS: true,\n  \n  // Advanced features\n  ENABLE_ANALYTICS: true,\n  ENABLE_PUSH_NOTIFICATIONS: true,\n  ENABLE_OFFLINE_MODE: true,\n  \n  // Experimental features\n  ENABLE_AI_RECOMMENDATIONS: false,\n  ENABLE_ADVANCED_SEARCH: true,\n};\n\n// Validation function - call manually when needed\nexport const validateConfig = (): boolean => {\n  try {\n    // Check if API URL is valid\n    const apiUrl = getApiUrl();\n    const isRelativeUrl = apiUrl === '';\n    const isAbsoluteUrl = /^https?:\\/\\//i.test(apiUrl);\n\n    if (!isRelativeUrl && !isAbsoluteUrl) {\n      console.warn('âš ï¸ Invalid API URL:', apiUrl);\n      return false;\n    }\n\n    if (IS_PRODUCTION && isRelativeUrl) {\n      console.warn('âš ï¸ API base URL resolves to current origin in production. Make sure your hosting layer proxies /api to the backend or set EXPO_PUBLIC_API_BASE_URL explicitly.');\n    }\n    \n    console.log('âœ… Configuration validated successfully');\n    console.log('ğŸ”§ Config:', {\n      useBackend: USE_BACKEND,\n      apiUrl: isRelativeUrl ? '(current origin)' : apiUrl,\n      environment: IS_PRODUCTION ? 'production' : 'development',\n      features: Object.entries(FEATURE_FLAGS)\n        .filter(([_, enabled]) => enabled)\n        .map(([feature]) => feature)\n    });\n    \n    return true;\n  } catch (error) {\n    console.error('âŒ Configuration validation failed:', error);\n    return false;\n  }\n};","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/donationResources.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/enhancedDatabaseService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6383,6386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6383,6386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":231,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8031,8034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8031,8034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8454,8457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8454,8457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":397,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":397,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14810,14813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14810,14813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":625,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":625,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23332,23335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23332,23335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":709,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":709,"endColumn":83,"suggestions":[{"messageId":"addBrackets","fix":{"range":[25941,26078],"text":"{ const donationResponse = await apiService.createDonation(action.data);\n            success = donationResponse.success;\n            break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":713,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":713,"endColumn":75,"suggestions":[{"messageId":"addBrackets","fix":{"range":[26121,26246],"text":"{ const rideResponse = await apiService.createRide(action.data);\n            success = rideResponse.success;\n            break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":717,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":717,"endColumn":125,"suggestions":[{"messageId":"addBrackets","fix":{"range":[26297,26474],"text":"{ const updateResponse = await apiService.updateUser(action.data.userId as string, action.data.updateData as any);\n            success = updateResponse.success;\n            break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":717,"column":120,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":717,"endColumn":123,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26404,26407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26404,26407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":783,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":783,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28654,28657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28654,28657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":876,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":876,"endColumn":18,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[32106,32107],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":887,"column":15,"nodeType":"BlockStatement","messageId":"unexpected","endLine":887,"endColumn":18,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[32592,32593],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Higher-level data access with caching and offline queue, built on `apiService`.\n// - Reached from: `EnhancedStatsService` and screens that need cached lists (donations, rides, stats).\n// - Provides: Cached getters, offline queue for mutations, periodic sync, and convenience utilities.\n// Enhanced Database Service - Connects frontend to new backend\n\n// TODO: CRITICAL - This file is complex (462+ lines). Split into specialized services:\n//   - CacheService for caching operations\n//   - OfflineQueueService for offline queue management  \n//   - SyncService for data synchronization\n//   - UserDataService for user-specific operations\n// TODO: Add comprehensive error handling and retry mechanisms\n// TODO: Implement proper cache invalidation strategies\n// TODO: Add comprehensive TypeScript interfaces with strict typing\n// TODO: Implement proper memory management for cache and queue\n// TODO: Add comprehensive logging and monitoring for all operations\nimport { logger } from './loggerService';\n// Removed console.log statements - using proper logging service\n// TODO: Add comprehensive unit tests for all service operations\n// TODO: Implement proper data encryption for sensitive cached data\n// TODO: Add comprehensive performance optimization and monitoring\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { apiService, ApiResponse } from './apiService';\nimport { USE_BACKEND, CACHE_CONFIG, OFFLINE_CONFIG, STORAGE_KEYS } from './dbConfig';\nimport { DB_COLLECTIONS } from './dbCollections';\nimport { db } from './databaseService';\n\n// TODO: Move all interfaces to proper types directory\n// TODO: Add comprehensive validation for all interface fields\n// TODO: Replace 'any' types with proper generic constraints\n\n// User authentication interfaces\nexport interface UserRegistrationData {\n  email: string;\n  password: string;\n  name?: string;\n  phone?: string;\n  [key: string]: unknown; // Allow additional registration fields\n}\n\nexport interface UserLoginCredentials {\n  email: string;\n  password: string;\n}\n\n// Donation interfaces\nexport interface DonationData {\n  id: string;\n  type: 'money' | 'time' | 'items' | 'rides';\n  title: string;\n  description?: string;\n  amount?: number;\n  category?: string;\n  createdBy: string;\n  createdAt: string;\n  status?: string;\n  isRecurring?: boolean;\n  [key: string]: unknown; // Allow additional fields\n}\n\nexport interface CreateDonationData {\n  type: 'money' | 'time' | 'items' | 'rides';\n  title: string;\n  description?: string;\n  amount?: number;\n  category?: string;\n  isRecurring?: boolean;\n  [key: string]: unknown; // Allow additional fields\n}\n\n// Ride interfaces\nexport interface RideData {\n  id: string;\n  from: string;\n  to: string;\n  departure_time: string;\n  available_seats: number;\n  price?: number;\n  createdBy: string;\n  createdAt: string;\n  status?: string;\n  [key: string]: unknown; // Allow additional fields\n}\n\nexport interface CreateRideData {\n  from: string;\n  to: string;\n  departure_time: string;\n  available_seats: number;\n  price?: number;\n  [key: string]: unknown; // Allow additional fields\n}\n\nexport interface CacheItem<T> {\n  data: T;\n  timestamp: number;\n  expiresAt: number;\n}\n\nexport interface OfflineAction {\n  id: string;\n  action: string;\n  data: Record<string, unknown>; // Generic object data for offline actions\n  timestamp: number;\n  retryCount: number;\n}\n\n// Enhanced Database Service with caching and offline support\n// TODO: Implement proper dependency injection instead of singleton pattern\n// TODO: Add proper connection state management\n// TODO: Implement proper service lifecycle management\nexport class EnhancedDatabaseService {\n  private static instance: EnhancedDatabaseService;\n  private offlineQueue: OfflineAction[] = [];\n  private syncInProgress = false;\n\n  static getInstance(): EnhancedDatabaseService {\n    if (!EnhancedDatabaseService.instance) {\n      EnhancedDatabaseService.instance = new EnhancedDatabaseService();\n    }\n    return EnhancedDatabaseService.instance;\n  }\n\n  constructor() {\n    this.loadOfflineQueue();\n    this.setupSyncInterval();\n  }\n\n  // ==================== User Management ====================\n\n  async registerUser(userData: UserRegistrationData): Promise<ApiResponse> {\n    // TODO: Replace 'any' with proper user registration interface\n    // TODO: Add comprehensive input validation and sanitization\n    // TODO: Implement proper error classification and handling\n    // TODO: Add proper logging and monitoring for registration attempts\n    try {\n      if (!USE_BACKEND) {\n        // Fallback to local storage\n        // TODO: Improve fallback user ID generation (use UUID instead of timestamp)\n        const user = {\n          id: Date.now().toString(),\n          ...userData,\n          created_at: new Date().toISOString(),\n        };\n        await this.setCache('user_profile', user.id, user);\n        return { success: true, data: user };\n      }\n\n      const response = await apiService.registerUser(userData);\n\n      if (response.success && response.data) {\n        await this.setCache('user_profile', response.data.id, response.data);\n        await AsyncStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(response.data));\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Register user error', { error });\n      return { success: false, error: 'Failed to register user' };\n    }\n  }\n\n  async loginUser(credentials: UserLoginCredentials): Promise<ApiResponse> {\n    try {\n      if (!USE_BACKEND) {\n        // Fallback authentication logic\n        const userData = await AsyncStorage.getItem(STORAGE_KEYS.USER_DATA);\n        if (userData) {\n          const user = JSON.parse(userData);\n          return { success: true, data: user };\n        }\n        return { success: false, error: 'User not found' };\n      }\n\n      const response = await apiService.loginUser(credentials);\n\n      if (response.success && response.data) {\n        await this.setCache('user_profile', response.data.id, response.data);\n        await AsyncStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(response.data));\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Login user error', { error });\n      return { success: false, error: 'Failed to login' };\n    }\n  }\n\n  async getCurrentUser(): Promise<any | null> {\n    try {\n      const userData = await AsyncStorage.getItem(STORAGE_KEYS.USER_DATA);\n      return userData ? JSON.parse(userData) : null;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get current user error', { error });\n      return null;\n    }\n  }\n\n  async updateUserProfile(userId: string, updateData: Partial<UserRegistrationData>): Promise<ApiResponse> {\n    try {\n      if (!USE_BACKEND) {\n        const currentUser = await this.getCurrentUser();\n        if (currentUser && currentUser.id === userId) {\n          const updatedUser = { ...currentUser, ...updateData };\n          await AsyncStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(updatedUser));\n          await this.setCache('user_profile', userId, updatedUser);\n          return { success: true, data: updatedUser };\n        }\n        return { success: false, error: 'User not found' };\n      }\n\n      const response = await apiService.updateUser(userId, updateData);\n\n      if (response.success && response.data) {\n        await this.setCache('user_profile', userId, response.data);\n        await AsyncStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(response.data));\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Update user profile error', { error });\n\n      // Queue for offline sync\n      await this.queueOfflineAction('update_user_profile', { userId, updateData });\n      return { success: false, error: 'Failed to update profile, queued for later' };\n    }\n  }\n\n  // ==================== Donations Management ====================\n\n  async getDonationCategories(): Promise<any[]> {\n    try {\n      logger.info('EnhancedDatabaseService', 'Fetching donation categories', { useBackend: USE_BACKEND });\n      // Try cache first\n      const cached = await this.getCache('donation_categories', 'all');\n      if (cached) {\n        logger.debug('EnhancedDatabaseService', 'Donation categories cache hit', {\n          count: Array.isArray(cached) ? cached.length : 0,\n        });\n        return cached as any[]; // Type assertion for cached data\n      }\n\n      if (!USE_BACKEND) {\n        logger.warn('EnhancedDatabaseService', 'Backend disabled - returning default donation categories');\n        // Return default categories\n        const defaultCategories = [\n          { id: '1', slug: 'money', name_he: '×›×¡×£', name_en: 'Money', icon: 'ğŸ’°' },\n          { id: '2', slug: 'trump', name_he: '×˜×¨××¤×™×', name_en: 'Rides', icon: 'ğŸš—' },\n          { id: '3', slug: 'food', name_he: '××•×›×œ', name_en: 'Food', icon: 'ğŸ' },\n          { id: '4', slug: 'clothes', name_he: '×‘×’×“×™×', name_en: 'Clothes', icon: 'ğŸ‘•' },\n          { id: '5', slug: 'books', name_he: '×¡×¤×¨×™×', name_en: 'Books', icon: 'ğŸ“–' },\n        ];\n        await this.setCache('donation_categories', 'all', defaultCategories);\n        logger.info('EnhancedDatabaseService', 'Default donation categories cached', {\n          count: defaultCategories.length,\n        });\n        return defaultCategories;\n      }\n\n      const response = await apiService.getDonationCategories();\n\n      if (response.success && response.data) {\n        await this.setCache('donation_categories', 'all', response.data);\n        logger.info('EnhancedDatabaseService', 'Donation categories fetched from backend', {\n          count: Array.isArray(response.data) ? response.data.length : 0,\n        });\n        return response.data;\n      }\n\n      logger.warn('EnhancedDatabaseService', 'Donation categories response empty');\n      return [];\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get donation categories error', { error });\n      return [];\n    }\n  }\n\n  async getDonations(filters: Record<string, unknown> = {}, forceRefresh = false): Promise<DonationData[]> {\n    try {\n      const cacheKey = `donations_${JSON.stringify(filters)}`;\n      if (!forceRefresh) {\n        const cached = await this.getCache('donations_list', cacheKey);\n        if (cached) {\n          logger.debug('EnhancedDatabaseService', 'Donations cache hit', {\n            cacheKey,\n            count: Array.isArray(cached) ? cached.length : 0,\n          });\n          return cached as DonationData[]; // Type assertion for cached data\n        }\n      } else {\n        logger.info('EnhancedDatabaseService', 'Force refresh - skipping cache', { cacheKey });\n        // Clear cache for donations_list pattern\n        await this.clearCachePattern('donations_list');\n      }\n\n      if (!USE_BACKEND) {\n        logger.warn('EnhancedDatabaseService', 'Backend disabled - returning sample donations');\n        // Return sample donations\n        const sampleDonations: DonationData[] = [];\n        await this.setCache('donations_list', cacheKey, sampleDonations);\n        logger.info('EnhancedDatabaseService', 'Sample donations cached (no backend)', {\n          count: sampleDonations.length,\n        });\n        return sampleDonations;\n      }\n\n      const response = await apiService.getDonations(filters);\n      logger.debug('EnhancedDatabaseService', 'Requested donations from backend', {\n        filters,\n        success: response.success,\n      });\n\n      if (response.success && response.data) {\n        await this.setCache('donations_list', cacheKey, response.data);\n        logger.info('EnhancedDatabaseService', 'Donations fetched from backend', {\n          count: Array.isArray(response.data) ? response.data.length : 0,\n        });\n        return response.data;\n      }\n\n      logger.warn('EnhancedDatabaseService', 'Donations response empty');\n      return [];\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get donations error', { error });\n      return [];\n    }\n  }\n\n  async createDonation(donationData: CreateDonationData): Promise<ApiResponse> {\n    try {\n      logger.info('EnhancedDatabaseService', 'Creating donation', {\n        type: donationData.type,\n        amount: donationData.amount,\n        category: donationData.category,\n      });\n      if (!USE_BACKEND) {\n        const donation = {\n          id: Date.now().toString(),\n          ...donationData,\n          created_at: new Date().toISOString(),\n          status: 'active',\n          donor_id: donationData.donor_id || donationData.donorId,\n        };\n\n        // Create post from donation even in local mode\n        try {\n          await this.createPostFromDonation(donation);\n        } catch (postError) {\n          logger.error('EnhancedDatabaseService', 'Failed to create post from donation (local)', { error: postError });\n        }\n\n        logger.debug('EnhancedDatabaseService', 'Donation created locally (no backend)');\n        return { success: true, data: donation };\n      }\n\n      const response = await apiService.createDonation(donationData);\n\n      if (response.success) {\n        // Create a post from the donation\n        try {\n          const donation = response.data;\n          if (donation && donation.donor_id) {\n            await this.createPostFromDonation(donation);\n          }\n        } catch (postError) {\n          logger.error('EnhancedDatabaseService', 'Failed to create post from donation', { error: postError });\n          // Don't fail the donation creation if post creation fails\n        }\n\n        // Clear relevant caches\n        await this.clearCachePattern('donations_list');\n        await this.clearCachePattern('user_donations');\n        logger.info('EnhancedDatabaseService', 'Donation created via backend and caches cleared');\n      } else {\n        logger.warn('EnhancedDatabaseService', 'Donation creation failed via backend', { error: response.error });\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Create donation error', { error });\n\n      // Queue for offline sync\n      await this.queueOfflineAction('create_donation', donationData);\n      return { success: false, error: 'Failed to create donation, queued for later' };\n    }\n  }\n\n  async updateDonation(donationId: string, updateData: Partial<DonationData>): Promise<ApiResponse> {\n    try {\n      logger.info('EnhancedDatabaseService', 'Updating donation', {\n        donationId,\n        fields: Object.keys(updateData || {}),\n      });\n      if (!USE_BACKEND) {\n        // Local-only success fallback\n        logger.debug('EnhancedDatabaseService', 'Donation update completed locally (no backend)');\n        return { success: true, data: { id: donationId, ...updateData } as any };\n      }\n      const response = await apiService.updateDonation(donationId, updateData);\n      if (response.success) {\n        await this.clearCachePattern('donations_list');\n        await this.clearCachePattern('user_donations');\n        logger.info('EnhancedDatabaseService', 'Donation updated via backend and caches cleared', { donationId });\n      } else {\n        logger.warn('EnhancedDatabaseService', 'Donation update failed via backend', { donationId, error: response.error });\n      }\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Update donation error', { error });\n      return { success: false, error: 'Failed to update donation' };\n    }\n  }\n\n  async deleteDonation(donationId: string): Promise<ApiResponse> {\n    try {\n      logger.info('EnhancedDatabaseService', 'Deleting donation', { donationId });\n      if (!USE_BACKEND) {\n        // Local-only success fallback\n        logger.debug('EnhancedDatabaseService', 'Donation deletion completed locally (no backend)');\n        return { success: true };\n      }\n      const response = await apiService.deleteDonation(donationId);\n      if (response.success) {\n        await this.clearCachePattern('donations_list');\n        await this.clearCachePattern('user_donations');\n        logger.info('EnhancedDatabaseService', 'Donation deleted via backend and caches cleared', { donationId });\n      } else {\n        logger.warn('EnhancedDatabaseService', 'Donation deletion failed via backend', { donationId, error: response.error });\n      }\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Delete donation error', { error });\n      return { success: false, error: 'Failed to delete donation' };\n    }\n  }\n\n  // ==================== Community Stats ====================\n\n  async getCommunityStats(filters: Record<string, unknown> = {}, forceRefresh = false): Promise<Record<string, unknown>> {\n    try {\n      const cacheKey = `community_stats_${JSON.stringify(filters)}`;\n      if (!forceRefresh) {\n        const cached = await this.getCache('community_stats', cacheKey);\n        if (cached) {\n          // Cache hit - no need to log (reduces excessive logging)\n          return cached as Record<string, unknown>; // Type assertion for cached data\n        }\n      } else {\n        logger.info('EnhancedDatabaseService', 'Force refresh - skipping community stats cache', { cacheKey });\n        // Clear cache for community_stats pattern\n        await this.clearCachePattern('community_stats');\n      }\n\n      if (!USE_BACKEND) {\n        const defaultStats = {\n          money_donations: { value: 50000, days_tracked: 30 },\n          volunteer_hours: { value: 1200, days_tracked: 30 },\n          rides_completed: { value: 350, days_tracked: 30 },\n          active_members: { value: 800, days_tracked: 1 },\n        };\n        await this.setCache('community_stats', cacheKey, defaultStats);\n        return defaultStats;\n      }\n\n      // Pass forceRefresh to API to bypass server-side Redis cache\n      const apiFilters = { ...filters, forceRefresh };\n      const response = await apiService.getCommunityStats(apiFilters);\n\n      if (response.success && response.data) {\n        // Check if data is not empty\n        const hasData = Object.keys(response.data).length > 0;\n        if (hasData) {\n          await this.setCache('community_stats', cacheKey, response.data);\n          logger.info('EnhancedDatabaseService', 'Community stats fetched from backend', { cacheKey, forceRefresh }, { periodic: true });\n          return response.data as Record<string, unknown>;\n        } else {\n          logger.warn('EnhancedDatabaseService', 'Backend returned empty stats data', { cacheKey, forceRefresh });\n          // Throw error to trigger retry or fallback\n          throw new Error('Backend returned empty stats data');\n        }\n      }\n\n      // If response was not successful, throw error to trigger retry\n      logger.warn('EnhancedDatabaseService', 'Backend request failed', { cacheKey, forceRefresh, error: response.error });\n      throw new Error(response.error || 'Failed to fetch community stats from backend');\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get community stats error', { error });\n      // ×©×™× ×•×™: ×–×¨×™×§×ª ×©×’×™××” ×‘××§×•× ×”×—×–×¨×ª ××•×‘×™×™×§×˜ ×¨×™×§ ×›×“×™ ×©×”×§×•×“ ×™×•×›×œ ×œ×˜×¤×œ ×‘×©×’×™××”\n      // Change: Throw error instead of returning empty object so code can handle the error\n      throw error instanceof Error ? error : new Error('Failed to fetch community stats');\n    }\n  }\n\n  async incrementStat(statType: string, value: number = 1, city?: string): Promise<void> {\n    try {\n      if (!USE_BACKEND) {\n        logger.info('EnhancedDatabaseService', 'Increment stat', { statType, value, city: city || 'globally' });\n        return;\n      }\n\n      await apiService.incrementStat({ stat_type: statType, value, city });\n\n      // Clear stats cache to force refresh\n      await this.clearCachePattern('community_stats');\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Increment stat error', { error });\n\n      // Queue for offline sync\n      await this.queueOfflineAction('increment_stat', { statType, value, city });\n    }\n  }\n\n  // ==================== Rides Management ====================\n\n  async getRides(filters: Record<string, unknown> = {}): Promise<RideData[]> {\n    try {\n      const cacheKey = `rides_${JSON.stringify(filters)}`;\n      const cached = await this.getCache('rides_list', cacheKey);\n      if (cached) {\n        return cached as RideData[]; // Type assertion for cached data\n      }\n\n      if (!USE_BACKEND) {\n        return [] as RideData[];\n      }\n\n      const response = await apiService.getRides(filters);\n\n      if (response.success && response.data) {\n        await this.setCache('rides_list', cacheKey, response.data);\n        return response.data;\n      }\n\n      return [];\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get rides error', { error });\n      return [] as RideData[];\n    }\n  }\n\n  async createRide(rideData: CreateRideData): Promise<ApiResponse> {\n    try {\n      if (!USE_BACKEND) {\n        const ride = {\n          id: Date.now().toString(),\n          ...rideData,\n          created_at: new Date().toISOString(),\n          status: 'active',\n        };\n        return { success: true, data: ride };\n      }\n\n      const response = await apiService.createRide(rideData);\n\n      if (response.success) {\n        await this.clearCachePattern('rides_list');\n        await this.clearCachePattern('user_rides');\n      }\n\n      return response;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Create ride error', { error });\n\n      // Queue for offline sync\n      await this.queueOfflineAction('create_ride', rideData);\n      return { success: false, error: 'Failed to create ride, queued for later' };\n    }\n  }\n\n  async getUserRides(userId: string, type: 'driver' | 'passenger' = 'driver'): Promise<RideData[]> {\n    try {\n      const cacheKey = `user_rides_${userId}_${type}`;\n      const cached = await this.getCache('user_rides', cacheKey);\n      if (cached) {\n        return cached as RideData[];\n      }\n\n      if (!USE_BACKEND) {\n        return [] as RideData[];\n      }\n\n      const response = await apiService.getUserRides(userId, type);\n\n      if (response.success && response.data) {\n        await this.setCache('user_rides', cacheKey, response.data);\n        return response.data;\n      }\n\n      return [];\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get user rides error', { error });\n      return [] as RideData[];\n    }\n  }\n\n  // ==================== Cache Management ====================\n\n  private async getCache<T>(collection: string, key: string): Promise<T | null> {\n    try {\n      const cacheKey = `${collection}_${key}`;\n      const cached = await AsyncStorage.getItem(cacheKey);\n\n      if (!cached) {\n        return null;\n      }\n\n      const cacheItem: CacheItem<T> = JSON.parse(cached);\n\n      // Check if cache is expired\n      if (Date.now() > cacheItem.expiresAt) {\n        await AsyncStorage.removeItem(cacheKey);\n        return null;\n      }\n\n      return cacheItem.data;\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Get cache error', { error });\n      return null;\n    }\n  }\n\n  private async setCache<T>(collection: string, key: string, data: T): Promise<void> {\n    try {\n      const cacheKey = `${collection}_${key}`;\n      const expiryDuration = (CACHE_CONFIG as any)[collection as string] || 5 * 60 * 1000; // Default 5 minutes\n\n      const cacheItem: CacheItem<T> = {\n        data,\n        timestamp: Date.now(),\n        expiresAt: Date.now() + expiryDuration,\n      };\n\n      await AsyncStorage.setItem(cacheKey, JSON.stringify(cacheItem));\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Set cache error', { error });\n    }\n  }\n\n  private async clearCachePattern(pattern: string): Promise<void> {\n    try {\n      const keys = await AsyncStorage.getAllKeys();\n      const matchingKeys = keys.filter(key => key.includes(pattern));\n\n      await AsyncStorage.multiRemove(matchingKeys);\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Clear cache pattern error', { error });\n    }\n  }\n\n  // ==================== Offline Queue Management ====================\n\n  private async queueOfflineAction(action: string, data: Record<string, unknown>): Promise<void> {\n    try {\n      if (this.offlineQueue.length >= OFFLINE_CONFIG.MAX_QUEUE_SIZE) {\n        this.offlineQueue.shift(); // Remove oldest action\n      }\n\n      const offlineAction: OfflineAction = {\n        id: Date.now().toString(),\n        action,\n        data,\n        timestamp: Date.now(),\n        retryCount: 0,\n      };\n\n      this.offlineQueue.push(offlineAction);\n      await this.saveOfflineQueue();\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Queue offline action error', { error });\n    }\n  }\n\n  private async loadOfflineQueue(): Promise<void> {\n    try {\n      const queueData = await AsyncStorage.getItem(STORAGE_KEYS.OFFLINE_QUEUE);\n      if (queueData) {\n        this.offlineQueue = JSON.parse(queueData);\n      }\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Load offline queue error', { error });\n      this.offlineQueue = [];\n    }\n  }\n\n  private async saveOfflineQueue(): Promise<void> {\n    try {\n      await AsyncStorage.setItem(STORAGE_KEYS.OFFLINE_QUEUE, JSON.stringify(this.offlineQueue));\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Save offline queue error', { error });\n    }\n  }\n\n  private async processOfflineQueue(): Promise<void> {\n    if (this.syncInProgress || this.offlineQueue.length === 0) {\n      return;\n    }\n\n    this.syncInProgress = true;\n    logger.info('EnhancedDatabaseService', 'Processing offline actions', { count: this.offlineQueue.length });\n\n    const processedActions: string[] = [];\n\n    for (const action of this.offlineQueue) {\n      try {\n        let success = false;\n\n        switch (action.action) {\n          case 'create_donation':\n            const donationResponse = await apiService.createDonation(action.data);\n            success = donationResponse.success;\n            break;\n          case 'create_ride':\n            const rideResponse = await apiService.createRide(action.data);\n            success = rideResponse.success;\n            break;\n          case 'update_user_profile':\n            const updateResponse = await apiService.updateUser(action.data.userId as string, action.data.updateData as any);\n            success = updateResponse.success;\n            break;\n          case 'increment_stat':\n            await apiService.incrementStat(action.data as { stat_type: string; value?: number; city?: string });\n            success = true;\n            break;\n        }\n\n        if (success) {\n          processedActions.push(action.id);\n          logger.info('EnhancedDatabaseService', 'Offline action processed', { action: action.action });\n        } else {\n          action.retryCount++;\n          if (action.retryCount >= 3) {\n            processedActions.push(action.id);\n            logger.warn('EnhancedDatabaseService', 'Offline action failed after 3 retries', { action: action.action });\n          }\n        }\n      } catch (error) {\n        logger.error('EnhancedDatabaseService', 'Error processing offline action', { action: action.action, error });\n        action.retryCount++;\n        if (action.retryCount >= 3) {\n          processedActions.push(action.id);\n        }\n      }\n    }\n\n    // Remove processed actions\n    this.offlineQueue = this.offlineQueue.filter(action => !processedActions.includes(action.id));\n    await this.saveOfflineQueue();\n\n    this.syncInProgress = false;\n    logger.info('EnhancedDatabaseService', 'Offline sync completed', { processedCount: processedActions.length });\n  }\n\n  private setupSyncInterval(): void {\n    // Process offline queue every 30 seconds\n    setInterval(() => {\n      this.processOfflineQueue();\n    }, 30000);\n  }\n\n  // ==================== Public Utility Methods ====================\n\n  async clearAllCache(): Promise<void> {\n    try {\n      const keys = await AsyncStorage.getAllKeys();\n      const cacheKeys = keys.filter(key =>\n        key.includes('donation') ||\n        key.includes('rides') ||\n        key.includes('community_stats') ||\n        key.includes('user_profile')\n      );\n\n      await AsyncStorage.multiRemove(cacheKeys);\n      logger.info('EnhancedDatabaseService', 'All cache cleared');\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Clear all cache error', { error });\n    }\n  }\n\n  /**\n   * Create a post from a donation\n   * This automatically creates a post when a donation is made\n   */\n  private async createPostFromDonation(donation: any): Promise<void> {\n    try {\n      if (!donation.donor_id) {\n        logger.warn('EnhancedDatabaseService', 'Cannot create post from donation - no donor_id');\n        return;\n      }\n\n      const postId = `post_${donation.id || Date.now().toString()}`;\n      const postTitle = donation.title || `×ª×¨×•××” ${donation.type === 'money' ? '×›×¡×¤×™×ª' : donation.type === 'time' ? '×–××Ÿ' : donation.type === 'rides' ? '×˜×¨××¤' : '×¤×¨×™×˜'}`;\n\n      let postDescription = '';\n      if (donation.type === 'money' && donation.amount) {\n        postDescription = `×ª×¨××ª×™ ${donation.amount} ${donation.currency || 'â‚ª'} ${donation.category ? `×œ×§×˜×’×•×¨×™×”: ${donation.category}` : ''}`;\n      } else if (donation.type === 'time') {\n        postDescription = `×ª×¨××ª×™ ××–×× ×™ ${donation.description || ''}`;\n      } else if (donation.type === 'rides') {\n        postDescription = `×”×¦×¢×ª×™ ×˜×¨××¤ ${donation.description || ''}`;\n      } else {\n        postDescription = donation.description || postTitle;\n      }\n\n      if (donation.description) {\n        postDescription += `\\n\\n${donation.description}`;\n      }\n\n      const postData = {\n        id: postId,\n        title: postTitle,\n        description: postDescription,\n        type: 'post',\n        thumbnail: donation.images && donation.images.length > 0 ? donation.images[0] : null,\n        image: donation.images && donation.images.length > 0 ? donation.images[0] : null,\n        likes: 0,\n        comments: 0,\n        isLiked: false,\n        timestamp: donation.created_at || new Date().toISOString(),\n        createdAt: donation.created_at || new Date().toISOString(),\n        donationId: donation.id,\n        donationType: donation.type,\n      };\n\n      await db.createPost(donation.donor_id, postId, postData);\n      logger.info('EnhancedDatabaseService', 'Post created from donation', { donationId: donation.id, postId });\n    } catch (error) {\n      logger.error('EnhancedDatabaseService', 'Error creating post from donation', { error, donationId: donation.id });\n      throw error;\n    }\n  }\n\n  getOfflineQueueSize(): number {\n    return this.offlineQueue.length;\n  }\n\n  async forceSync(): Promise<void> {\n    await this.processOfflineQueue();\n  }\n\n  isBackendAvailable(): boolean {\n    return USE_BACKEND;\n  }\n}\n\n// Export singleton instance\nexport const enhancedDB = EnhancedDatabaseService.getInstance();\nexport default enhancedDB;\n\nasync function clearLocalCollectionsLocal(): Promise<void> {\n  try {\n    const keys = await AsyncStorage.getAllKeys();\n    const collectionPrefixes = Object.values(DB_COLLECTIONS).map((collection) => `${collection}_`);\n    const keysToRemove = keys.filter((key) =>\n      collectionPrefixes.some((prefix) => key.startsWith(prefix)) ||\n      key.includes('_collection_meta')\n    );\n    if (keysToRemove.length) {\n      await AsyncStorage.multiRemove(keysToRemove);\n    }\n    logger.info('EnhancedDatabaseService', 'Local database collections cleared');\n  } catch (error) {\n    logger.warn('EnhancedDatabaseService', 'Failed to clear local collections', { error });\n  }\n}\n\n// Admin utilities\nexport async function wipeAllDataAdmin(): Promise<ApiResponse> {\n  try {\n    logger.warn('EnhancedDatabaseService', 'Admin requested wipe all data', { useBackend: USE_BACKEND });\n    if (!USE_BACKEND) {\n      // Local purge only\n      await clearLocalCollectionsLocal();\n      try {\n        const keys = await AsyncStorage.getAllKeys();\n        await AsyncStorage.multiRemove(keys);\n      } catch { }\n      logger.info('EnhancedDatabaseService', 'Local data cleared (no backend)');\n      return { success: true, message: 'Local data cleared (no backend enabled)' };\n    }\n    const result = await apiService.adminWipeAllData();\n    if (result.success) {\n      // Clear all local caches and queues after server wipe\n      await clearLocalCollectionsLocal();\n      try {\n        const keys = await AsyncStorage.getAllKeys();\n        await AsyncStorage.multiRemove(keys);\n      } catch { }\n      logger.info('EnhancedDatabaseService', 'Backend wipe successful - local caches cleared');\n    } else {\n      logger.warn('EnhancedDatabaseService', 'Backend wipe failed', { error: result.error });\n    }\n    return result;\n  } catch (error) {\n    logger.error('EnhancedDatabaseService', 'Admin wipe all data error', { error });\n    return { success: false, error: 'Failed to wipe all data' };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/fileService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileSystem' is defined but never used.","line":4,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"FileSystem"},"fix":{"range":[130,178],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/fileService.ts\nimport * as ImagePicker from 'expo-image-picker';\nimport * as DocumentPicker from 'expo-document-picker';\nimport * as FileSystem from 'expo-file-system';\nimport { Platform, Alert } from 'react-native';\n\nexport interface FileData {\n  id: string;\n  name: string;\n  uri: string;\n  type: 'image' | 'video' | 'file';\n  size?: number;\n  mimeType?: string;\n  thumbnail?: string;\n}\n\nexport interface FileUploadResult {\n  success: boolean;\n  fileData?: FileData;\n  error?: string;\n}\n\nexport const requestPermissions = async (): Promise<boolean> => {\n  try {\n    if (Platform.OS === 'ios') {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert(\n          '×”×¨×©××•×ª × ×“×¨×©×•×ª',\n          '×× × ××©×¨ ×’×™×©×” ×œ×’×œ×¨×™×™×ª ×”×ª××•× ×•×ª ×›×“×™ ×œ×©×œ×•×— ×ª××•× ×•×ª ×•×¡×¨×˜×•× ×™×'\n        );\n        return false;\n      }\n    }\n    return true;\n  } catch (error) {\n    console.error('âŒ Permission request error:', error);\n    return false;\n  }\n};\n\nexport const pickImage = async (): Promise<FileUploadResult> => {\n  try {\n    const hasPermission = await requestPermissions();\n    if (!hasPermission) {\n      return { success: false, error: '××™×Ÿ ×”×¨×©××•×ª ×œ×’×™×©×” ×œ×’×œ×¨×™×”' };\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 0.8,\n      allowsMultipleSelection: false,\n    });\n\n    if (!result.canceled && result.assets && result.assets.length > 0) {\n      const asset = result.assets[0];\n      const fileData: FileData = {\n        id: `img_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        name: `image_${Date.now()}.jpg`,\n        uri: asset.uri,\n        type: 'image',\n        size: asset.fileSize,\n        mimeType: 'image/jpeg',\n      };\n\n      return { success: true, fileData };\n    }\n\n    return { success: false, error: '×œ× × ×‘×—×¨×” ×ª××•× ×”' };\n  } catch (error) {\n    console.error('âŒ Pick image error:', error);\n    return { success: false, error: '×©×’×™××” ×‘×‘×—×™×¨×ª ×ª××•× ×”' };\n  }\n};\n\nexport const pickVideo = async (): Promise<FileUploadResult> => {\n  try {\n    const hasPermission = await requestPermissions();\n    if (!hasPermission) {\n      return { success: false, error: '××™×Ÿ ×”×¨×©××•×ª ×œ×’×™×©×” ×œ×’×œ×¨×™×”' };\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Videos,\n      allowsEditing: true,\n      aspect: [16, 9],\n      quality: 0.8,\n      allowsMultipleSelection: false,\n      videoMaxDuration: 60, \n    });\n\n    if (!result.canceled && result.assets && result.assets.length > 0) {\n      const asset = result.assets[0];\n      \n      if (asset.fileSize && asset.fileSize > 50 * 1024 * 1024) {\n        return { success: false, error: '×”×§×•×‘×¥ ×’×“×•×œ ××“×™. ××§×¡×™××•× 50MB' };\n      }\n\n      const fileData: FileData = {\n        id: `vid_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        name: `video_${Date.now()}.mp4`,\n        uri: asset.uri,\n        type: 'video',\n        size: asset.fileSize,\n        mimeType: 'video/mp4',\n      };\n\n      return { success: true, fileData };\n    }\n\n    return { success: false, error: '×œ× × ×‘×—×¨ ×¡×¨×˜×•×Ÿ' };\n  } catch (error) {\n    console.error('âŒ Pick video error:', error);\n    return { success: false, error: '×©×’×™××” ×‘×‘×—×™×¨×ª ×¡×¨×˜×•×Ÿ' };\n  }\n};\n\nexport const takePhoto = async (): Promise<FileUploadResult> => {\n  try {\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    if (status !== 'granted') {\n      Alert.alert(\n        '×”×¨×©××•×ª × ×“×¨×©×•×ª',\n        '×× × ××©×¨ ×’×™×©×” ×œ××¦×œ××” ×›×“×™ ×œ×¦×œ× ×ª××•× ×”'\n      );\n      return { success: false, error: '××™×Ÿ ×”×¨×©××•×ª ×œ××¦×œ××”' };\n    }\n\n    const result = await ImagePicker.launchCameraAsync({\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets && result.assets.length > 0) {\n      const asset = result.assets[0];\n      const fileData: FileData = {\n        id: `cam_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        name: `photo_${Date.now()}.jpg`,\n        uri: asset.uri,\n        type: 'image',\n        size: asset.fileSize,\n        mimeType: 'image/jpeg',\n      };\n\n      return { success: true, fileData };\n    }\n\n    return { success: false, error: '×œ× ×¦×•×œ××” ×ª××•× ×”' };\n  } catch (error) {\n    console.error('âŒ Take photo error:', error);\n    return { success: false, error: '×©×’×™××” ×‘×¦×™×œ×•× ×ª××•× ×”' };\n  }\n};\n\nexport const pickDocument = async (): Promise<FileUploadResult> => {\n  try {\n    const result = await DocumentPicker.getDocumentAsync({\n      type: '*/*',\n      copyToCacheDirectory: true,\n    });\n\n    if (!result.canceled && result.assets && result.assets.length > 0) {\n      const asset = result.assets[0];\n      \n      if (asset.size && asset.size > 20 * 1024 * 1024) {\n        return { success: false, error: '×”×§×•×‘×¥ ×’×“×•×œ ××“×™. ××§×¡×™××•× 20MB' };\n      }\n\n      const fileData: FileData = {\n        id: `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        name: asset.name,\n        uri: asset.uri,\n        type: 'file',\n        size: asset.size,\n        mimeType: asset.mimeType,\n      };\n\n      return { success: true, fileData };\n    }\n\n    return { success: false, error: '×œ× × ×‘×—×¨ ×§×•×‘×¥' };\n  } catch (error) {\n    console.error('âŒ Pick document error:', error);\n    return { success: false, error: '×©×’×™××” ×‘×‘×—×™×¨×ª ×§×•×‘×¥' };\n  }\n};\n\nexport const generateThumbnail = async (fileUri: string, type: 'image' | 'video'): Promise<string | null> => {\n  try {\n    if (type === 'image') {\n      return fileUri;\n    } else if (type === 'video') {\n      return null;\n    }\n    return null;\n  } catch (error) {\n    console.error('âŒ Generate thumbnail error:', error);\n    return null;\n  }\n};\n\nexport const getFileType = (fileName: string, mimeType?: string): 'image' | 'video' | 'file' => {\n  const extension = fileName.toLowerCase().split('.').pop();\n  \n  if (mimeType) {\n    if (mimeType.startsWith('image/')) return 'image';\n    if (mimeType.startsWith('video/')) return 'video';\n  }\n  \n  if (extension) {\n    const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'];\n    const videoExtensions = ['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm', 'mkv'];\n    \n    if (imageExtensions.includes(extension)) return 'image';\n    if (videoExtensions.includes(extension)) return 'video';\n  }\n  \n  return 'file';\n};\n\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 B';\n  \n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\nexport const validateFile = (fileData: FileData, maxFileSize?: number): { isValid: boolean; error?: string } => {\n  if (fileData.size) {\n    // If maxFileSize is provided, use it; otherwise use defaults\n    const maxSize = maxFileSize || (\n      fileData.type === 'video' ? 50 * 1024 * 1024 : // 50MB ×œ×¡×¨×˜×•× ×™×\n      fileData.type === 'image' ? 10 * 1024 * 1024 : // 10MB ×œ×ª××•× ×•×ª\n      20 * 1024 * 1024 // 20MB ×œ×§×‘×¦×™× (default)\n    );\n    \n    if (fileData.size > maxSize) {\n      return { \n        isValid: false, \n        error: `×”×§×•×‘×¥ ×’×“×•×œ ××“×™. ××§×¡×™××•× ${formatFileSize(maxSize)}` \n      };\n    }\n  }\n  \n  if (fileData.type === 'file') {\n    const dangerousExtensions = ['exe', 'bat', 'cmd', 'com', 'pif', 'scr', 'vbs', 'js'];\n    const extension = fileData.name.toLowerCase().split('.').pop();\n    \n    if (extension && dangerousExtensions.includes(extension)) {\n      return { \n        isValid: false, \n        error: '×¡×•×’ ×§×•×‘×¥ ×–×” ××™× ×• × ×ª××š ××˜×¢××™ ××‘×˜×—×”' \n      };\n    }\n  }\n  \n  return { isValid: true };\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/firebaseClient.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[452,455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[452,455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[481,484],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[481,484],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3348,3351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3348,3351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/firebaseClient.ts\nimport { initializeApp, getApps, FirebaseApp } from 'firebase/app';\nimport { getFirestore, initializeFirestore, Firestore, persistentLocalCache, persistentMultipleTabManager } from 'firebase/firestore';\nimport Constants from 'expo-constants';\nimport { getStorage, FirebaseStorage } from 'firebase/storage';\n\n// Note: Fill real values from Firebase console or use environment variables\nconst extra = (Constants?.expoConfig as any)?.extra || (Constants as any)?.manifest?.extra || {};\nconst mode = (extra?.mode as string) || (process.env.NODE_ENV === 'production' ? 'prod' : 'dev');\nconst extraFb = (extra?.firebase?.[mode]) || {};\n\nconsole.log('ğŸ”¥ Firebase config - loading from:', { mode, hasExtra: !!extra, hasExtraFb: !!extraFb });\n\nconst firebaseConfig: Record<string, string | undefined> = {\n  apiKey: process.env.EXPO_PUBLIC_FIREBASE_API_KEY || extra.EXPO_PUBLIC_FIREBASE_API_KEY || extraFb.EXPO_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN || extra.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN || extraFb.EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.EXPO_PUBLIC_FIREBASE_PROJECT_ID || extra.EXPO_PUBLIC_FIREBASE_PROJECT_ID || extraFb.EXPO_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET || extra.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET || extraFb.EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || extra.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || extraFb.EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.EXPO_PUBLIC_FIREBASE_APP_ID || extra.EXPO_PUBLIC_FIREBASE_APP_ID || extraFb.EXPO_PUBLIC_FIREBASE_APP_ID,\n};\n\nconst measurementId = process.env.EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID || extra.EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID || extraFb.EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID;\nif (measurementId) {\n  firebaseConfig.measurementId = measurementId;\n}\n\nconsole.log('ğŸ”¥ Firebase config loaded:', { \n  hasApiKey: !!firebaseConfig.apiKey, \n  hasProjectId: !!firebaseConfig.projectId, \n  hasAppId: !!firebaseConfig.appId,\n  projectId: firebaseConfig.projectId \n});\n\nlet app: FirebaseApp;\nlet db: Firestore;\nlet storage: FirebaseStorage;\n\nexport function getFirebase() {\n  if (!getApps().length) {\n    // Basic validation of critical configuration for clearer developer errors\n    if (!firebaseConfig.apiKey || !firebaseConfig.projectId || !firebaseConfig.appId) {\n      const msg = 'Firebase configuration is missing. Please set EXPO_PUBLIC_FIREBASE_API_KEY, EXPO_PUBLIC_FIREBASE_PROJECT_ID, EXPO_PUBLIC_FIREBASE_APP_ID.';\n      console.error(msg);\n      throw new Error(msg);\n    }\n    app = initializeApp(firebaseConfig);\n  } else {\n    app = getApps()[0]!;\n  }\n\n  if (!db) {\n    // Initialize Firestore with persistent local cache (new recommended approach)\n    // This replaces the deprecated enableIndexedDbPersistence() method\n    try {\n      db = initializeFirestore(app, {\n        localCache: persistentLocalCache({ \n          tabManager: persistentMultipleTabManager() \n        }),\n      });\n    } catch (e) {\n      // Fallback to getFirestore if initialization fails (e.g., already initialized)\n      // This can happen if Firestore was already initialized elsewhere\n      console.warn('Firestore initialization with cache failed, using default:', (e as any)?.message);\n      db = getFirestore(app);\n    }\n  }\n  if (!storage) {\n    storage = getStorage(app);\n  }\n\n  return { app, db, storage };\n}\n\nexport type { Firestore };\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/firestoreAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1389,1392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1389,1392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2011,2014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2011,2014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2050,2053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2050,2053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3279,3282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3279,3282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/firestoreAdapter.ts\nimport { getFirebase } from './firebaseClient';\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  query,\n  where,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  writeBatch,\n  Timestamp,\n} from 'firebase/firestore';\n\nexport interface DatabaseAdapter {\n  create<T>(collectionName: string, userId: string, itemId: string, data: T): Promise<void>;\n  read<T>(collectionName: string, userId: string, itemId: string): Promise<T | null>;\n  update<T>(collectionName: string, userId: string, itemId: string, data: Partial<T>): Promise<void>;\n  delete(collectionName: string, userId: string, itemId: string): Promise<void>;\n  list<T>(collectionName: string, userId: string): Promise<T[]>;\n  search<T>(collectionName: string, userId: string, predicate: (item: T) => boolean): Promise<T[]>;\n  batchCreate<T>(collectionName: string, userId: string, items: Array<{ id: string; data: T }>): Promise<void>;\n  batchDelete(collectionName: string, userId: string, itemIds: string[]): Promise<void>;\n}\n\nexport class FirestoreAdapter implements DatabaseAdapter {\n  async create<T>(collectionName: string, userId: string, itemId: string, data: T): Promise<void> {\n    const { db } = getFirebase();\n    const id = `${userId}_${itemId}`;\n    const ref = doc(collection(db, collectionName), id);\n    await setDoc(ref, { ...data, _userId: userId, _id: itemId, _createdAt: Timestamp.now() } as any, { merge: true });\n  }\n\n  async read<T>(collectionName: string, userId: string, itemId: string): Promise<T | null> {\n    const { db } = getFirebase();\n    const id = `${userId}_${itemId}`;\n    const ref = doc(collection(db, collectionName), id);\n    const snap = await getDoc(ref);\n    return snap.exists() ? (snap.data() as T) : null;\n  }\n\n  async update<T>(collectionName: string, userId: string, itemId: string, data: Partial<T>): Promise<void> {\n    const { db } = getFirebase();\n    const id = `${userId}_${itemId}`;\n    const ref = doc(collection(db, collectionName), id);\n    await updateDoc(ref, { ...(data as any), _updatedAt: Timestamp.now() } as any);\n  }\n\n  async delete(collectionName: string, userId: string, itemId: string): Promise<void> {\n    const { db } = getFirebase();\n    const id = `${userId}_${itemId}`;\n    const ref = doc(collection(db, collectionName), id);\n    await deleteDoc(ref);\n  }\n\n  async list<T>(collectionName: string, userId: string): Promise<T[]> {\n    const { db } = getFirebase();\n    const col = collection(db, collectionName);\n    const q = query(col, where('_userId', '==', userId));\n    const snap = await getDocs(q);\n    const items: T[] = [];\n    snap.forEach(d => items.push(d.data() as T));\n    return items;\n  }\n\n  async search<T>(collectionName: string, userId: string, predicate: (item: T) => boolean): Promise<T[]> {\n    const all = await this.list<T>(collectionName, userId);\n    return all.filter(predicate);\n  }\n\n  async batchCreate<T>(collectionName: string, userId: string, items: Array<{ id: string; data: T }>): Promise<void> {\n    const { db } = getFirebase();\n    const batch = writeBatch(db);\n    const col = collection(db, collectionName);\n    for (const { id, data } of items) {\n      const docId = `${userId}_${id}`;\n      batch.set(doc(col, docId), { ...data, _userId: userId, _id: id, _createdAt: Timestamp.now() } as any, { merge: true });\n    }\n    await batch.commit();\n  }\n\n  async batchDelete(collectionName: string, userId: string, itemIds: string[]): Promise<void> {\n    const { db } = getFirebase();\n    const batch = writeBatch(db);\n    const col = collection(db, collectionName);\n    for (const id of itemIds) {\n      const docId = `${userId}_${id}`;\n      batch.delete(doc(col, docId));\n    }\n    await batch.commit();\n  }\n}\n\nexport const firestoreAdapter = new FirestoreAdapter();\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/followService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DB_COLLECTIONS' is defined but never used.","line":2,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DB_COLLECTIONS"},"fix":{"range":[75,91],"text":""},"desc":"Remove unused variable \"DB_COLLECTIONS\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1208,1211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1208,1211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1844,1847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1844,1847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":85,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":85,"endColumn":16,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[2392,2393],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3160,3163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3160,3163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":118,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3271,3274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3271,3274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":118,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3288,3291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3288,3291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5554,5557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5554,5557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5666,5669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5666,5669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5683,5686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5683,5686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":263,"column":123,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":126,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8027,8030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8027,8030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":274,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8688,8691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8688,8691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8720,8723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8720,8723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":288,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9281,9284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9281,9284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":334,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":334,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10876,10879],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10876,10879],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":335,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":335,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10907,10910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10907,10910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":119,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":122,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11169,11172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11169,11172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":357,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":357,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11945,11948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11945,11948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":358,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":358,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11977,11980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11977,11980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":372,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12574,12577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12574,12577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { sendFollowNotification } from './notificationService';\nimport { db, DB_COLLECTIONS, DatabaseService } from './databaseService';\nimport { apiService } from './apiService';\nimport { USE_BACKEND } from './dbConfig';\n\nexport interface FollowRelationship {\n  followerId: string;\n  followingId: string;\n  followDate: string;\n}\n\nexport interface FollowStats {\n  followersCount: number;\n  followingCount: number;\n  isFollowing: boolean;\n}\n\nexport const getUpdatedFollowCounts = async (userId: string): Promise<{ followersCount: number; followingCount: number }> => {\n  try {\n    const followers = await db.getFollowers(userId);\n    const following = await db.getFollowing(userId);\n\n    return {\n      followersCount: followers.length,\n      followingCount: following.length,\n    };\n  } catch (error) {\n    console.error('âŒ Get updated follow counts error:', error);\n    return {\n      followersCount: 0,\n      followingCount: 0,\n    };\n  }\n};\n\nexport const getFollowStats = async (userId: string, currentUserId: string): Promise<FollowStats> => {\n  try {\n    const followers = await db.getFollowers(userId);\n    const following = await db.getFollowing(userId);\n\n    const isFollowing = following.some((rel: any) => rel.followerId === currentUserId);\n\n    return {\n      followersCount: followers.length,\n      followingCount: following.length,\n      isFollowing\n    };\n  } catch (error) {\n    console.error('âŒ Get follow stats error:', error);\n    return {\n      followersCount: 0,\n      followingCount: 0,\n      isFollowing: false\n    };\n  }\n};\n\nexport const followUser = async (followerId: string, followingId: string): Promise<boolean> => {\n  try {\n    if (followerId === followingId) {\n      return false;\n    }\n\n    const existingFollowers = await db.getFollowers(followingId);\n    const isAlreadyFollowing = existingFollowers.some((rel: any) => rel.followerId === followerId);\n\n    if (isAlreadyFollowing) {\n      return false;\n    }\n\n    const newFollow: FollowRelationship = {\n      followerId,\n      followingId,\n      followDate: new Date().toISOString()\n    };\n\n    await db.addFollower(followingId, followerId, newFollow);\n\n    await db.addFollowing(followerId, followingId, newFollow);\n\n    // Optional: fetch follower name from backend; fallback to ID\n    try {\n      const followerName = followerId;\n      await sendFollowNotification(followerName, followingId);\n    } catch { }\n\n    // Update follow counts for both users\n    await updateFollowCounts(followerId);\n    await updateFollowCounts(followingId);\n\n    return true;\n  } catch (error) {\n    console.error('âŒ Follow user error:', error);\n    return false;\n  }\n};\n\nexport const unfollowUser = async (followerId: string, followingId: string): Promise<boolean> => {\n  try {\n    await db.removeFollower(followingId, followerId);\n\n    await db.removeFollowing(followerId, followingId);\n\n    // Update follow counts for both users\n    await updateFollowCounts(followerId);\n    await updateFollowCounts(followingId);\n\n    return true;\n  } catch (error) {\n    console.error('âŒ Unfollow user error:', error);\n    return false;\n  }\n};\n\nexport const getFollowers = async (userId: string): Promise<any[]> => {\n  try {\n    const followers = await db.getFollowers(userId);\n    const followerIds = (followers as any[]).map((rel: any) => rel.followerId);\n\n    if (followerIds.length === 0) {\n      return [];\n    }\n\n    // Fetch full user data from backend for each follower\n    if (USE_BACKEND) {\n      try {\n        const userPromises = followerIds.map(async (id: string) => {\n          try {\n            const response = await apiService.getUserById(id);\n            if (response.success && response.data) {\n              const user = response.data;\n              return {\n                id: user.id || id,\n                name: user.name || '×œ×œ× ×©×',\n                avatar: user.avatar_url || user.avatar || 'https://i.pravatar.cc/150?img=1',\n                bio: user.bio || '',\n                karmaPoints: user.karma_points || 0,\n                followersCount: user.followers_count || 0,\n                completedTasks: 0, // TODO: Get from backend if available\n                roles: user.roles || ['user'],\n                isVerified: false, // TODO: Get from backend if available\n                isActive: user.is_active !== false,\n              };\n            }\n          } catch (error) {\n            console.warn(`Failed to fetch follower ${id}:`, error);\n          }\n          // Fallback to minimal data if fetch fails\n          return {\n            id,\n            name: '×œ×œ× ×©×',\n            avatar: 'https://i.pravatar.cc/150?img=1',\n            bio: '',\n            karmaPoints: 0,\n            followersCount: 0,\n            completedTasks: 0,\n            roles: ['user'],\n            isVerified: false,\n            isActive: false,\n          };\n        });\n\n        const users = await Promise.all(userPromises);\n        return users.filter(user => user !== null);\n      } catch (error) {\n        console.error('âŒ Get followers from backend error:', error);\n      }\n    }\n\n    // Fallback: return minimal data with IDs only\n    return followerIds.map((id: string) => ({\n      id,\n      name: '×œ×œ× ×©×',\n      avatar: 'https://i.pravatar.cc/150?img=1',\n      bio: '',\n      karmaPoints: 0,\n      followersCount: 0,\n      completedTasks: 0,\n      roles: ['user'],\n      isVerified: false,\n      isActive: false,\n    }));\n  } catch (error) {\n    console.error('âŒ Get followers error:', error);\n    return [];\n  }\n};\n\nexport const getFollowing = async (userId: string): Promise<any[]> => {\n  try {\n    const following = await db.getFollowing(userId);\n    const followingIds = (following as any[]).map((rel: any) => rel.followingId);\n\n    if (followingIds.length === 0) {\n      return [];\n    }\n\n    // Fetch full user data from backend for each following user\n    if (USE_BACKEND) {\n      try {\n        const userPromises = followingIds.map(async (id: string) => {\n          try {\n            const response = await apiService.getUserById(id);\n            if (response.success && response.data) {\n              const user = response.data;\n              return {\n                id: user.id || id,\n                name: user.name || '×œ×œ× ×©×',\n                avatar: user.avatar_url || user.avatar || 'https://i.pravatar.cc/150?img=1',\n                bio: user.bio || '',\n                karmaPoints: user.karma_points || 0,\n                followersCount: user.followers_count || 0,\n                completedTasks: 0, // TODO: Get from backend if available\n                roles: user.roles || ['user'],\n                isVerified: false, // TODO: Get from backend if available\n                isActive: user.is_active !== false,\n              };\n            }\n          } catch (error) {\n            console.warn(`Failed to fetch following user ${id}:`, error);\n          }\n          // Fallback to minimal data if fetch fails\n          return {\n            id,\n            name: '×œ×œ× ×©×',\n            avatar: 'https://i.pravatar.cc/150?img=1',\n            bio: '',\n            karmaPoints: 0,\n            followersCount: 0,\n            completedTasks: 0,\n            roles: ['user'],\n            isVerified: false,\n            isActive: false,\n          };\n        });\n\n        const users = await Promise.all(userPromises);\n        return users.filter(user => user !== null);\n      } catch (error) {\n        console.error('âŒ Get following from backend error:', error);\n      }\n    }\n\n    // Fallback: return minimal data with IDs only\n    return followingIds.map((id: string) => ({\n      id,\n      name: '×œ×œ× ×©×',\n      avatar: 'https://i.pravatar.cc/150?img=1',\n      bio: '',\n      karmaPoints: 0,\n      followersCount: 0,\n      completedTasks: 0,\n      roles: ['user'],\n      isVerified: false,\n      isActive: false,\n    }));\n  } catch (error) {\n    console.error('âŒ Get following error:', error);\n    return [];\n  }\n};\n\nexport const getFollowSuggestions = async (currentUserId: string, limit: number = 10, currentUserEmail?: string): Promise<any[]> => {\n  try {\n    if (USE_BACKEND) {\n      // Get ALL users (use high limit to get all users from database)\n      // This ensures we show all users, not just a subset\n      const fetchLimit = 1000; // High limit to get all users\n      const response = await apiService.getUsers({ limit: fetchLimit, offset: 0 });\n      if (response.success && response.data) {\n        // Filter out current user using strict string comparison (case-insensitive)\n        const excludeId = String(currentUserId).trim().toLowerCase();\n        const excludeEmail = currentUserEmail ? String(currentUserEmail).trim().toLowerCase() : '';\n        const users = (response.data as any[])\n          .filter((user: any) => {\n            const userId = String(user.id || '').trim().toLowerCase();\n            const userEmail = user.email ? String(user.email).trim().toLowerCase() : '';\n            const isCurrentUser = userId === excludeId ||\n              (excludeEmail && userEmail === excludeEmail) ||\n              userId === '';\n\n            if (isCurrentUser) {\n              console.log('ğŸš« getFollowSuggestions - Filtered out current user:', { userId, userEmail, name: user.name });\n            }\n\n            return !isCurrentUser;\n          })\n          .map((user: any) => ({\n            id: user.id,\n            name: user.name || '×œ×œ× ×©×',\n            avatar: user.avatar_url || 'https://i.pravatar.cc/150?img=1',\n            bio: user.bio || '',\n            email: user.email || '', // Include email for additional filtering\n            karmaPoints: user.karma_points || 0,\n            completedTasks: 0, // TODO: Get from backend if available\n            roles: ['user'], // TODO: Get from backend if available\n            isVerified: false, // TODO: Get from backend if available\n            isActive: true, // Users from backend are active by default\n          }));\n        return users.slice(0, limit);\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ Get follow suggestions error:', error);\n    return [];\n  }\n};\n\nexport const resetFollowRelationships = async (): Promise<void> => {\n  try {\n    await DatabaseService.clearAllData();\n    console.log('âœ… All follow relationships reset');\n  } catch (error) {\n    console.error('âŒ Reset follow relationships error:', error);\n  }\n};\n\nexport const createSampleFollowData = async (): Promise<void> => {\n  try {\n    // Demo data creation removed\n    console.log('â„¹ï¸ createSampleFollowData skipped (demo removed)');\n  } catch (error) {\n    console.error('âŒ Create sample follow data error:', error);\n  }\n};\n\nexport const getFollowHistory = async (userId: string): Promise<FollowRelationship[]> => {\n  try {\n    const followers = await db.getFollowers(userId);\n    const following = await db.getFollowing(userId);\n\n    const allRelationships: FollowRelationship[] = [\n      ...(followers as any[]),\n      ...(following as any[])\n    ];\n\n    return allRelationships;\n  } catch (error) {\n    console.error('âŒ Get follow history error:', error);\n    return [];\n  }\n};\n\nexport const getPopularUsers = async (limit: number = 10, excludeUserId?: string, excludeUserEmail?: string): Promise<any[]> => {\n  try {\n    if (USE_BACKEND) {\n      // Get ALL users (use high limit to get all users from database)\n      // This ensures we show all users, not just a subset\n      const fetchLimit = 1000; // High limit to get all users\n      // Get popular users from backend (sorted by karma_points and last_active)\n      const response = await apiService.getUsers({ limit: fetchLimit, offset: 0 });\n      if (response.success && response.data) {\n        // Map to UserPreview format and filter out current user if provided (case-insensitive)\n        const excludeId = excludeUserId ? String(excludeUserId).trim().toLowerCase() : null;\n        const excludeEmail = excludeUserEmail ? String(excludeUserEmail).trim().toLowerCase() : '';\n        const users = (response.data as any[])\n          .filter((user: any) => {\n            if (!excludeId) return true;\n            const userId = String(user.id || '').trim().toLowerCase();\n            const userEmail = user.email ? String(user.email).trim().toLowerCase() : '';\n            const isCurrentUser = userId === excludeId ||\n              (excludeEmail && userEmail === excludeEmail) ||\n              userId === '';\n\n            if (isCurrentUser) {\n              console.log('ğŸš« getPopularUsers - Filtered out current user:', { userId, userEmail, name: user.name });\n            }\n\n            return !isCurrentUser;\n          })\n          .map((user: any) => ({\n            id: user.id,\n            name: user.name || '×œ×œ× ×©×',\n            avatar: user.avatar_url || 'https://i.pravatar.cc/150?img=1',\n            bio: user.bio || '',\n            email: user.email || '', // Include email for additional filtering\n            karmaPoints: user.karma_points || 0,\n            completedTasks: 0, // TODO: Get from backend if available\n            roles: ['user'], // TODO: Get from backend if available\n            isVerified: false, // TODO: Get from backend if available\n            isActive: true, // Users from backend are active by default\n          }));\n        return users.slice(0, limit);\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ Get popular users error:', error);\n    return [];\n  }\n};\n\n\nexport const debugFollowRelationships = async (): Promise<void> => {\n  try {\n    console.log('â„¹ï¸ debugFollowRelationships skipped (demo users removed)');\n  } catch (error) {\n    console.error('âŒ Debug follow relationships error:', error);\n  }\n};\n\n\nexport const comprehensiveSystemCheck = async (): Promise<void> => {\n  try {\n    console.log('â„¹ï¸ comprehensiveSystemCheck skipped (demo users removed)');\n  } catch (error) {\n    console.error('âŒ Comprehensive system check error:', error);\n  }\n};\n\n\nexport const validateSystemIntegrity = async (): Promise<{ isValid: boolean; errors: string[] }> => {\n  return { isValid: true, errors: [] };\n};\n\n\nexport const updateFollowCounts = async (userId: string): Promise<void> => {\n  try {\n    const followers = await db.getFollowers(userId);\n    const following = await db.getFollowing(userId);\n\n\n    const userData = {\n      followersCount: followers.length,\n      followingCount: following.length,\n    };\n\n    await db.updateUser(userId, userData);\n    console.log('âœ… Updated follow counts for user:', userId, userData);\n  } catch (error) {\n    console.error('âŒ Update follow counts error:', error);\n  }\n}; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/itemCategoryUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/linkingConfig.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1159,1162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1159,1162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Deep linking configuration for all app routes\n// - Provides: URL routes mapping to navigation screens\n// - Used by: NavigationContainer in App.tsx\n// - Domain: karma-community-kc.com\n\nimport { LinkingOptions } from '@react-navigation/native';\nimport { getStateFromPath as defaultGetStateFromPath } from '@react-navigation/native';\nimport { RootStackParamList } from '../globals/types';\n\n/**\n * Deep linking configuration for the entire app\n * Maps URL paths to navigation screens with proper parameter handling\n */\nexport const linking: LinkingOptions<RootStackParamList> = {\n  // URL prefixes that the app will respond to (localhost for dev)\n  prefixes: [\n    'karma-community://',\n    'https://karma-community-kc.com',\n    'https://www.karma-community-kc.com',\n    'http://karma-community-kc.com',\n    'http://www.karma-community-kc.com',\n    'http://localhost:8081',\n    'http://localhost:19006',\n    'http://127.0.0.1:8081',\n    'http://127.0.0.1:19006',\n  ],\n  \n  // Custom function to handle paths that don't match exactly\n  // Redirects paths without mode to include /search\n  getStateFromPath: (path: string, options?: any) => {\n    // Remove query string and hash for matching\n    const cleanPath = path.split('?')[0].split('#')[0];\n    \n    // Handle paths without mode - redirect to /search\n    const categoryMatch = cleanPath.match(/^\\/donations\\/(money|time|knowledge|rides|items)$/);\n    if (categoryMatch) {\n      const category = categoryMatch[1];\n      const pathWithMode = `/donations/${category}/search`;\n      // Use default getStateFromPath with the modified path\n      // Don't pass config in options - it's already in linking.config\n      return defaultGetStateFromPath(pathWithMode, options);\n    }\n    // Use default behavior for other paths\n    return defaultGetStateFromPath(path, options);\n  },\n  \n  config: {\n    screens: {\n      // ==================================================================\n      // ROOT LEVEL SCREENS (MainNavigator)\n      // ==================================================================\n      \n      // Home Stack - contains BottomNavigator with all tabs\n      HomeStack: {\n        screens: {\n          // Home Tab\n          HomeScreen: {\n            screens: {\n              HomeMain: 'home',\n            },\n          },\n          \n          // Search Tab\n          SearchTab: {\n            screens: {\n              SearchScreen: {\n                path: 'search',\n                parse: {\n                  q: (q: string) => decodeURIComponent(q || ''),\n                },\n              },\n            },\n          },\n          \n          // Profile Tab\n          // Note: ProfileScreen doesn't have a URL path - it's accessible only via tab navigation\n          // User profiles (including own profile) are accessible via /profile/:userId (UserProfileScreen)\n          ProfileScreen: {\n            screens: {\n              // ProfileScreen is accessible via tab navigation only\n              // To access a user's profile via URL, use /profile/:userId which goes to UserProfileScreen\n            },\n          },\n          \n          // Donations Tab\n          DonationsTab: {\n            screens: {\n              DonationsScreen: 'donations',\n              MyChallengesScreen: 'donations/challenges',\n              \n              // Main donation categories with mode support (offer/search)\n              // 4 main categories: money, time, knowledge, rides (trump), items\n              // Default mode is 'search' (××—×¤×©)\n              // Paths work with or without mode - if no mode, defaults to 'search'\n              MoneyScreen: {\n                path: 'donations/money/:mode?',\n                parse: {\n                  mode: (mode: string) => {\n                    // If mode is missing, undefined, null, or 'undefined', default to 'search'\n                    if (!mode || mode === 'undefined' || mode === 'null' || mode === '') return 'search';\n                    return mode === 'offer' ? 'offer' : 'search';\n                  },\n                },\n              },\n              TimeScreen: {\n                path: 'donations/time/:mode?',\n                parse: {\n                  mode: (mode: string) => {\n                    if (!mode || mode === 'undefined' || mode === 'null' || mode === '') return 'search';\n                    return mode === 'offer' ? 'offer' : 'search';\n                  },\n                },\n              },\n              KnowledgeScreen: {\n                path: 'donations/knowledge/:mode?',\n                parse: {\n                  mode: (mode: string) => {\n                    if (!mode || mode === 'undefined' || mode === 'null' || mode === '') return 'search';\n                    return mode === 'offer' ? 'offer' : 'search';\n                  },\n                },\n              },\n              TrumpScreen: {\n                path: 'donations/rides/:mode?',\n                parse: {\n                  mode: (mode: string) => {\n                    if (!mode || mode === 'undefined' || mode === 'null' || mode === '') return 'search';\n                    return mode === 'offer' ? 'offer' : 'search';\n                  },\n                },\n              },\n              ItemsScreen: {\n                path: 'donations/items/:mode?',\n                parse: {\n                  mode: (mode: string) => {\n                    if (!mode || mode === 'undefined' || mode === 'null' || mode === '') return 'search';\n                    return mode === 'offer' ? 'offer' : 'search';\n                  },\n                },\n              },\n              \n              // Item categories with mode support\n              FoodScreen: {\n                path: 'donations/food/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              ClothesScreen: {\n                path: 'donations/clothes/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              BooksScreen: {\n                path: 'donations/books/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              FurnitureScreen: {\n                path: 'donations/furniture/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              MedicalScreen: {\n                path: 'donations/medical/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              AnimalsScreen: {\n                path: 'donations/animals/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              HousingScreen: {\n                path: 'donations/housing/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              SupportScreen: {\n                path: 'donations/support/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              EducationScreen: {\n                path: 'donations/education/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              EnvironmentScreen: {\n                path: 'donations/environment/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              TechnologyScreen: {\n                path: 'donations/technology/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              MusicScreen: {\n                path: 'donations/music/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              GamesScreen: {\n                path: 'donations/games/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              RiddlesScreen: {\n                path: 'donations/riddles/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              RecipesScreen: {\n                path: 'donations/recipes/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              PlantsScreen: {\n                path: 'donations/plants/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              WasteScreen: {\n                path: 'donations/waste/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              ArtScreen: {\n                path: 'donations/art/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              SportsScreen: {\n                path: 'donations/sports/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              \n              // Special categories with mode support\n              DreamsScreen: {\n                path: 'donations/dreams/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              FertilityScreen: {\n                path: 'donations/fertility/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              JobsScreen: {\n                path: 'donations/jobs/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              MatchmakingScreen: {\n                path: 'donations/matchmaking/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              MentalHealthScreen: {\n                path: 'donations/mental-health/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              GoldenAgeScreen: {\n                path: 'donations/golden-age/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              LanguagesScreen: {\n                path: 'donations/languages/:mode?',\n                parse: {\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n              CategoryScreen: {\n                path: 'donations/category/:categoryId/:mode?',\n                parse: {\n                  categoryId: (categoryId: string) => categoryId,\n                  mode: (mode: string) => mode || 'offer',\n                },\n              },\n            },\n          },\n          \n          // Admin Tab (only visible to admins)\n          AdminTab: {\n            screens: {\n              AdminDashboard: 'admin',\n              AdminMoney: 'admin/money',\n              AdminTasks: 'admin/tasks',\n              AdminPeople: 'admin/people',\n              AdminReview: 'admin/review',\n            },\n          },\n        },\n      },\n      \n      // ==================================================================\n      // STANDALONE SCREENS (accessible from anywhere in MainNavigator)\n      // These screens are defined at the root level of MainNavigator\n      // ==================================================================\n      \n      // User Profile Screen (for viewing other users' profiles)\n      // Note: This is accessible from MainNavigator, not from tabs\n      UserProfileScreen: {\n        path: 'profile/:userId',\n        parse: {\n          userId: (userId: string) => userId,\n          userName: (userName: string) => userName || '',\n          userAvatar: (userAvatar: string) => userAvatar || '',\n        },\n      },\n      \n      // Followers/Following Screen\n      FollowersScreen: {\n        path: 'followers/:userId',\n        parse: {\n          userId: (userId: string) => userId,\n          type: (type: string) => type || 'followers',\n          title: (title: string) => title || '',\n        },\n      },\n      \n      // Chat Detail Screen\n      ChatDetailScreen: {\n        path: 'chat/:conversationId',\n        parse: {\n          conversationId: (conversationId: string) => conversationId,\n          userName: (userName: string) => userName || '',\n          userAvatar: (userAvatar: string) => userAvatar || '',\n          otherUserId: (otherUserId: string) => otherUserId || '',\n        },\n      },\n      \n      // New Chat Screen\n      NewChatScreen: 'chat/new',\n      \n      // Notifications Screen\n      NotificationsScreen: 'notifications',\n      \n      // Settings Screen\n      SettingsScreen: 'settings',\n      \n      // Chat List Screen\n      ChatListScreen: 'chat',\n      \n      // About Screen\n      AboutKarmaCommunityScreen: 'about',\n      \n      // Bookmarks Screen\n      BookmarksScreen: 'bookmarks',\n      \n      // Discover People Screen\n      DiscoverPeopleScreen: 'discover',\n      \n      // Edit Profile Screen\n      EditProfileScreen: 'profile/edit',\n      \n      // Org Screens\n      AdminOrgApprovalsScreen: 'admin/org-approvals',\n      OrgDashboardScreen: 'org/dashboard',\n      \n      // Web View Screen\n      WebViewScreen: {\n        path: 'webview',\n        parse: {\n          url: (url: string) => url || '',\n        },\n      },\n      \n      // Posts/Reels Screen\n      PostsReelsScreen: 'posts',\n      \n      // ==================================================================\n      // UNAUTHENTICATED SCREENS\n      // ==================================================================\n      \n      // Landing Site Screen (for unauthenticated users in site mode)\n      LandingSiteScreen: 'about-site',\n      \n      // Login Screen\n      LoginScreen: 'login',\n      \n      // Org Onboarding (part of sign-up flow - accessible from unauthenticated stack)\n      OrgOnboardingScreen: 'org/onboarding',\n      \n      // Legacy/Inactive Screen\n      InactiveScreen: 'inactive',\n    },\n  },\n};\n\n/**\n * Helper function to generate profile URL for a specific user\n * @param userId - The user ID\n * @returns Full URL to the user's profile\n */\nexport const getProfileUrl = (userId: string): string => {\n  return `https://karma-community-kc.com/profile/${userId}`;\n};\n\n/**\n * Helper function to generate search URL with query\n * @param query - The search query\n * @returns Full URL to search with the query\n */\nexport const getSearchUrl = (query: string): string => {\n  const encodedQuery = encodeURIComponent(query);\n  return `https://karma-community-kc.com/search?q=${encodedQuery}`;\n};\n\n/**\n * Helper function to generate chat URL\n * @param conversationId - The conversation ID\n * @returns Full URL to the chat\n */\nexport const getChatUrl = (conversationId: string): string => {\n  return `https://karma-community-kc.com/chat/${conversationId}`;\n};\n\n/**\n * Helper function to generate donation category URL\n * @param categoryId - The category ID (e.g., 'money', 'time', 'knowledge', 'rides')\n * @param mode - The mode: 'offer' (××¦×™×¢) or 'search' (××—×¤×©). Defaults to 'offer'\n * @returns Full URL to the donation category\n */\nexport const getDonationCategoryUrl = (categoryId: string, mode: 'offer' | 'search' = 'offer'): string => {\n  return `https://karma-community-kc.com/donations/${categoryId}/${mode}`;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/logger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[114,117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[114,117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[136,139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[136,139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1002,1005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1002,1005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1173,1176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1173,1176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/logger.ts\n\nexport interface LogData {\n  screen?: string;\n  action?: string;\n  userId?: string;\n  error?: any;\n  [key: string]: any;\n}\n\nclass Logger {\n  private static instance: Logger;\n  \n  private constructor() {}\n  \n  static getInstance(): Logger {\n    if (!Logger.instance) {\n      Logger.instance = new Logger();\n    }\n    return Logger.instance;\n  }\n\n  info(message: string, data?: LogData) {\n    console.log(`[INFO] ${message}`, data || '');\n  }\n\n  warn(message: string, data?: LogData) {\n    console.warn(`[WARN] ${message}`, data || '');\n  }\n\n  error(message: string, data?: LogData) {\n    console.error(`[ERROR] ${message}`, data || '');\n  }\n\n  // Screen navigation logging\n  logScreenNavigation(fromScreen: string, toScreen: string, userId?: string) {\n    this.info('Screen navigation', {\n      screen: 'navigation',\n      action: 'navigate',\n      fromScreen,\n      toScreen,\n      userId\n    });\n  }\n\n  // User action logging\n  logUserAction(action: string, screen: string, data?: any, userId?: string) {\n    this.info('User action', {\n      screen,\n      action,\n      data,\n      userId\n    });\n  }\n\n  // Error logging with context\n  logError(error: any, context: string, screen?: string, userId?: string) {\n    this.error('Application error', {\n      screen,\n      action: context,\n      error: {\n        message: error.message,\n        stack: error.stack,\n        name: error.name\n      },\n      userId\n    });\n  }\n\n  // API call logging\n  logApiCall(endpoint: string, method: string, status: number, duration: number, userId?: string) {\n    this.info('API call', {\n      screen: 'api',\n      action: 'request',\n      endpoint,\n      method,\n      status,\n      duration,\n      userId\n    });\n  }\n}\n\nexport const logger = Logger.getInstance();\nexport default logger; ","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/loggerService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2557,2560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2557,2560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3406,3409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3406,3409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7264,7267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7264,7267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":233,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7458,7461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7458,7461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Enhanced Logger service that saves logs to both console and file with performance optimization\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst LOGS_KEY = 'app_debug_logs';\nconst MAX_LOGS = 200; // Keep last 200 log entries (reduced from 1000 to prevent quota issues)\nconst BATCH_SIZE = 50; // Save logs in batches to improve performance\nconst SAVE_INTERVAL = 5000; // Save logs every 5 seconds\n\n// Environment detection - safe check for __DEV__\nlet isDevelopment = false;\ntry {\n  isDevelopment = typeof __DEV__ !== 'undefined' ? __DEV__ : false;\n} catch {\n  // If __DEV__ is not defined, assume production\n  isDevelopment = false;\n}\nconst isProduction = !isDevelopment;\n\nexport interface LogOptions {\n  /** Mark as recurring/periodic log (e.g. polling, re-renders, nav save) - shown with [PERIODIC] in console */\n  periodic?: boolean;\n}\n\ninterface LogEntry {\n  timestamp: string;\n  level: 'info' | 'warn' | 'error' | 'debug';\n  component: string;\n  message: string;\n  data?: Record<string, unknown>;\n  periodic?: boolean;\n}\n\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'none';\n\nclass LoggerService {\n  private logs: LogEntry[] = [];\n  private pendingLogs: LogEntry[] = [];\n  private saveTimer: number | null = null;\n  private isInitialized = false;\n\n  // Production-friendly: Higher log level in production\n  private logLevel: LogLevel = isProduction ? 'warn' : 'debug';\n  private enableConsoleOutput = !isProduction;\n  private enableStorage = true;\n\n  constructor() {\n    // Lazy initialization - don't load logs immediately\n    this.initializeAsync();\n  }\n\n  private async initializeAsync() {\n    if (!this.isInitialized) {\n      await this.loadLogs();\n      this.startBatchTimer();\n      this.isInitialized = true;\n    }\n  }\n\n  private async loadLogs() {\n    if (!this.enableStorage) return;\n\n    try {\n      const stored = await AsyncStorage.getItem(LOGS_KEY);\n      if (stored) {\n        const parsedLogs = JSON.parse(stored);\n        // Keep only recent logs to prevent quota issues\n        this.logs = Array.isArray(parsedLogs) ? parsedLogs.slice(-MAX_LOGS) : [];\n\n        // If we had to trim logs, save the trimmed version\n        if (Array.isArray(parsedLogs) && parsedLogs.length > MAX_LOGS) {\n          await AsyncStorage.setItem(LOGS_KEY, JSON.stringify(this.logs));\n          if (this.enableConsoleOutput) {\n            console.log(`ğŸ—‘ï¸ Trimmed logs from ${parsedLogs.length} to ${this.logs.length} entries`);\n          }\n        }\n      }\n    } catch (error: any) {\n      // If we can't load logs (corrupted or quota exceeded), clear them\n      if (this.enableConsoleOutput) {\n        console.warn('âš ï¸ Failed to load logs, clearing storage:', error?.message || error);\n      }\n      this.logs = [];\n      try {\n        await AsyncStorage.removeItem(LOGS_KEY);\n      } catch {\n        // Ignore errors when removing\n      }\n    }\n  }\n\n  private async saveLogs() {\n    if (!this.enableStorage || this.pendingLogs.length === 0) return;\n\n    try {\n      // Add pending logs to main logs array\n      this.logs = [...this.logs, ...this.pendingLogs];\n      this.pendingLogs = [];\n\n      // Keep only the last MAX_LOGS entries\n      if (this.logs.length > MAX_LOGS) {\n        this.logs = this.logs.slice(-MAX_LOGS);\n      }\n\n      await AsyncStorage.setItem(LOGS_KEY, JSON.stringify(this.logs));\n    } catch (error: any) {\n      // Handle QuotaExceededError by clearing old logs and retrying with fewer logs\n      if (error?.name === 'QuotaExceededError' || error?.message?.includes('quota')) {\n        try {\n          // Keep only the last 100 logs instead of MAX_LOGS\n          this.logs = this.logs.slice(-100);\n          await AsyncStorage.setItem(LOGS_KEY, JSON.stringify(this.logs));\n          if (this.enableConsoleOutput) {\n            console.warn('âš ï¸ Storage quota exceeded, cleared old logs and saved recent 100 entries');\n          }\n        } catch (retryError) {\n          // If still failing, disable storage and clear everything\n          this.enableStorage = false;\n          this.logs = [];\n          this.pendingLogs = [];\n          try {\n            await AsyncStorage.removeItem(LOGS_KEY);\n          } catch {\n            // Ignore errors when removing\n          }\n          if (this.enableConsoleOutput) {\n            console.error('âŒ Failed to save logs even after cleanup, storage disabled:', retryError);\n          }\n        }\n      } else if (this.enableConsoleOutput) {\n        console.error('Failed to save logs:', error);\n      }\n    }\n  }\n\n  private startBatchTimer() {\n    if (this.saveTimer) clearInterval(this.saveTimer);\n\n    this.saveTimer = setInterval(() => {\n      this.saveLogs();\n    }, SAVE_INTERVAL);\n  }\n\n  private shouldLog(level: LogLevel): boolean {\n    const levels = { debug: 0, info: 1, warn: 2, error: 3, none: 4 };\n    return levels[level] >= levels[this.logLevel];\n  }\n\n  private addLog(\n    level: 'info' | 'warn' | 'error' | 'debug',\n    component: string,\n    message: string,\n    data?: Record<string, unknown>,\n    options?: LogOptions\n  ) {\n    // Early return if log level is not enabled\n    if (!this.shouldLog(level)) return;\n\n    const periodic = options?.periodic === true;\n    const logEntry: LogEntry = {\n      timestamp: new Date().toISOString(),\n      level,\n      component,\n      message,\n      data,\n      periodic,\n    };\n\n    // Add to pending logs for batching\n    this.pendingLogs.push(logEntry);\n\n    // Force save if batch is full\n    if (this.pendingLogs.length >= BATCH_SIZE) {\n      this.saveLogs();\n    }\n\n    // Console output only if enabled (disabled in production by default)\n    if (this.enableConsoleOutput) {\n      const periodicTag = periodic ? ' [PERIODIC]' : '';\n      const prefix = `[${logEntry.timestamp}] ${component}:${periodicTag}`;\n      const fullMessage = data ? `${message} ${JSON.stringify(data)}` : message;\n\n      switch (level) {\n        case 'debug':\n          console.log(`ğŸ” ${prefix}`, fullMessage);\n          break;\n        case 'info':\n          console.log(`â„¹ï¸  ${prefix}`, fullMessage);\n          break;\n        case 'warn':\n          console.warn(`âš ï¸  ${prefix}`, fullMessage);\n          break;\n        case 'error':\n          console.error(`âŒ ${prefix}`, fullMessage);\n          break;\n      }\n    }\n  }\n\n  debug(component: string, message: string, data?: Record<string, unknown>, options?: LogOptions) {\n    this.addLog('debug', component, message, data, options);\n  }\n\n  info(component: string, message: string, data?: Record<string, unknown>, options?: LogOptions) {\n    this.addLog('info', component, message, data, options);\n  }\n\n  warn(component: string, message: string, data?: Record<string, unknown>, options?: LogOptions) {\n    this.addLog('warn', component, message, data, options);\n  }\n\n  error(component: string, message: string, data?: Record<string, unknown>, options?: LogOptions) {\n    this.addLog('error', component, message, data, options);\n  }\n\n  // Compatibility methods for legacy logger API\n  logScreenNavigation(fromScreen: string, toScreen: string, userId?: string) {\n    this.info('Navigation', 'Screen navigation', {\n      fromScreen,\n      toScreen,\n      userId,\n    });\n  }\n\n  logUserAction(action: string, screen: string, data?: any, userId?: string) {\n    this.info(screen, 'User action', {\n      action,\n      ...(typeof data === 'object' && data !== null ? data : { data }),\n      userId,\n    });\n  }\n\n  logError(error: any, context: string, screen?: string, userId?: string) {\n    this.error(screen || 'Error', 'Application error', {\n      context,\n      error: {\n        message: error?.message || String(error),\n        stack: error?.stack,\n        name: error?.name,\n      },\n      userId,\n    });\n  }\n\n  logApiCall(endpoint: string, method: string, status: number, duration: number, userId?: string) {\n    this.info('API', 'API call', {\n      endpoint,\n      method,\n      status,\n      duration,\n      userId,\n    });\n  }\n\n  // Configuration methods\n  setLogLevel(level: LogLevel) {\n    this.logLevel = level;\n  }\n\n  setConsoleOutput(enabled: boolean) {\n    this.enableConsoleOutput = enabled;\n  }\n\n  setStorageEnabled(enabled: boolean) {\n    this.enableStorage = enabled;\n  }\n\n  async exportLogs(): Promise<string> {\n    return this.logs\n      .map(log => {\n        const periodicTag = log.periodic ? ' [PERIODIC]' : '';\n        return `[${log.timestamp}] ${log.level.toUpperCase()} ${log.component}:${periodicTag} ${log.message}${log.data ? ` ${JSON.stringify(log.data)}` : ''}`;\n      })\n      .join('\\n');\n  }\n\n  async clearLogs() {\n    this.logs = [];\n    this.pendingLogs = [];\n    if (this.enableStorage) {\n      await AsyncStorage.removeItem(LOGS_KEY);\n    }\n    if (this.enableConsoleOutput) {\n      console.log('ğŸ—‘ï¸ All logs cleared');\n    }\n  }\n\n  async downloadLogs() {\n    if (Platform.OS === 'web') {\n      // Force save pending logs before export\n      await this.saveLogs();\n\n      const logsText = await this.exportLogs();\n      const element = document.createElement('a');\n      const file = new Blob([logsText], { type: 'text/plain' });\n      element.href = URL.createObjectURL(file);\n      element.download = `karma-community-logs-${new Date().toISOString().slice(0, 19)}.txt`;\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      if (this.enableConsoleOutput) {\n        console.log('ğŸ“ Logs downloaded');\n      }\n    }\n  }\n\n  async showLogs() {\n    // Force save pending logs before showing\n    await this.saveLogs();\n\n    const logsText = await this.exportLogs();\n    if (this.enableConsoleOutput) {\n      console.log('ğŸ“‹ Complete logs:');\n      console.log(logsText);\n    }\n    return logsText;\n  }\n\n  // Cleanup method - call this when app is closing\n  destroy() {\n    if (this.saveTimer) {\n      clearInterval(this.saveTimer);\n      this.saveTimer = null;\n    }\n    // Force save any pending logs\n    this.saveLogs();\n  }\n}\n\nexport const logger = new LoggerService();\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationGuards.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6732,6735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6732,6735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isValidRouteName' is defined but never used.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":26,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"isValidRouteName"},"fix":{"range":[396,459],"text":""},"desc":"Remove unused import declaration."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/navigationGuards.ts\n// Navigation guards system - checks conditions before navigation\n// Ensures users can only navigate to routes they're allowed to access\n\nimport {\n  NavigationGuard,\n  NavigationGuardContext,\n  GuardResult,\n  QueuedNavigationAction,\n} from '../types/navigation';\nimport { logger } from './loggerService';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { isValidRouteName } from './navigationStateValidator';\n\nconst LOG_SOURCE = 'NavigationGuards';\n\n/**\n * Guard: Check if route exists\n */\nconst routeExistsGuard: NavigationGuard = {\n  name: 'routeExists',\n  priority: 100, // High priority - check first\n  check: (action: QueuedNavigationAction): GuardResult => {\n    if (action.type === 'navigate' || action.type === 'replace') {\n      const routeName = action.routeName;\n      if (!routeName || typeof routeName !== 'string') {\n        return {\n          allowed: false,\n          reason: 'Route name is invalid',\n        };\n      }\n\n      // Basic check - route name should not be empty\n      if (routeName.trim().length === 0) {\n        return {\n          allowed: false,\n          reason: 'Route name cannot be empty',\n        };\n      }\n\n      // Note: We don't check against VALID_ROUTES_MAP here because routes can be nested\n      // The actual route validation happens in navigationStateValidator\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if user can access ProfileScreen (not in guest mode)\n */\nconst profileScreenGuard: NavigationGuard = {\n  name: 'profileScreen',\n  priority: 50,\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext): GuardResult => {\n    if (action.type === 'navigate' || action.type === 'replace') {\n      if (action.routeName === 'ProfileScreen' || action.routeName === 'ProfileTab') {\n        if (context.isGuestMode) {\n          return {\n            allowed: false,\n            reason: 'Profile screen is not available in guest mode',\n            redirectTo: 'HomeScreen',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if user can access AdminTab (must be admin)\n */\nconst adminTabGuard: NavigationGuard = {\n  name: 'adminTab',\n  priority: 50,\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext): GuardResult => {\n    if (action.type === 'navigate' || action.type === 'replace') {\n      if (action.routeName === 'AdminTab' || action.routeName === 'AdminDashboard') {\n        if (!context.isAdmin) {\n          return {\n            allowed: false,\n            reason: 'Admin screens are only available to administrators',\n            redirectTo: 'HomeScreen',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if user can access authenticated routes\n */\nconst authenticatedRouteGuard: NavigationGuard = {\n  name: 'authenticatedRoute',\n  priority: 40,\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext): GuardResult => {\n    // Routes that require authentication (not guest mode)\n    const authenticatedRoutes = [\n      'EditProfileScreen',\n      'OrgOnboardingScreen',\n      'OrgDashboardScreen',\n    ];\n\n    if (action.type === 'navigate' || action.type === 'replace') {\n      if (authenticatedRoutes.includes(action.routeName)) {\n        if (context.isGuestMode || !context.isAuthenticated) {\n          return {\n            allowed: false,\n            reason: 'This screen requires authentication',\n            redirectTo: 'LoginScreen',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if user can access LoginScreen (should redirect if already authenticated)\n */\nconst loginScreenGuard: NavigationGuard = {\n  name: 'loginScreen',\n  priority: 30,\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext): GuardResult => {\n    if (action.type === 'navigate' || action.type === 'replace') {\n      if (action.routeName === 'LoginScreen') {\n        // If user is authenticated, redirect to HomeStack\n        if (context.isAuthenticated && !context.isGuestMode) {\n          return {\n            allowed: false,\n            reason: 'User is already authenticated',\n            redirectTo: 'HomeStack',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if user can access LandingSiteScreen (should redirect if authenticated)\n */\nconst landingSiteScreenGuard: NavigationGuard = {\n  name: 'landingSiteScreen',\n  priority: 30,\n  check: (action: QueuedNavigationAction, context: NavigationGuardContext): GuardResult => {\n    if (action.type === 'navigate' || action.type === 'replace') {\n      if (action.routeName === 'LandingSiteScreen') {\n        // If user is authenticated or in guest mode, redirect to HomeStack\n        if (context.isAuthenticated || context.isGuestMode) {\n          return {\n            allowed: false,\n            reason: 'User is already authenticated or in guest mode',\n            redirectTo: 'HomeStack',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * Guard: Check if reset action is valid\n */\nconst resetActionGuard: NavigationGuard = {\n  name: 'resetAction',\n  priority: 90,\n  check: (action: QueuedNavigationAction): GuardResult => {\n    if (action.type === 'reset') {\n      if (!action.routes || !Array.isArray(action.routes) || action.routes.length === 0) {\n        return {\n          allowed: false,\n          reason: 'Reset action must have at least one route',\n        };\n      }\n\n      if (typeof action.index !== 'number' || action.index < 0 || action.index >= action.routes.length) {\n        return {\n          allowed: false,\n          reason: 'Reset action index is out of bounds',\n        };\n      }\n\n      // Validate route names\n      for (const route of action.routes) {\n        if (!route.name || typeof route.name !== 'string') {\n          return {\n            allowed: false,\n            reason: 'Reset action routes must have valid names',\n          };\n        }\n      }\n    }\n\n    return { allowed: true };\n  },\n};\n\n/**\n * All guards in priority order (higher priority = checked first)\n */\nconst allGuards: NavigationGuard[] = [\n  resetActionGuard,\n  routeExistsGuard,\n  profileScreenGuard,\n  adminTabGuard,\n  authenticatedRouteGuard,\n  loginScreenGuard,\n  landingSiteScreenGuard,\n].sort((a, b) => b.priority - a.priority); // Sort by priority descending\n\n/**\n * Check navigation action against all guards\n */\nexport const checkNavigationGuards = async (\n  action: QueuedNavigationAction,\n  context: NavigationGuardContext\n): Promise<GuardResult> => {\n  logger.debug(LOG_SOURCE, 'Checking navigation guards', {\n    actionType: action.type,\n    routeName: (action as any).routeName,\n    context: {\n      isAuthenticated: context.isAuthenticated,\n      isGuestMode: context.isGuestMode,\n      isAdmin: context.isAdmin,\n    },\n  });\n\n  // Check each guard in priority order\n  for (const guard of allGuards) {\n    try {\n      const result = await guard.check(action, context);\n      if (!result.allowed) {\n        logger.warn(LOG_SOURCE, 'Navigation guard blocked action', {\n          guardName: guard.name,\n          reason: result.reason,\n          redirectTo: result.redirectTo,\n        });\n        return result;\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Navigation guard error', {\n        guardName: guard.name,\n        error,\n      });\n      // If guard throws error, allow navigation (fail open)\n      // In production, you might want to fail closed instead\n    }\n  }\n\n  logger.debug(LOG_SOURCE, 'All navigation guards passed');\n  return { allowed: true };\n};\n\n/**\n * Get guard context from current app state\n * This is a helper function - components should pass their own context\n * based on their useUser() and useWebMode() hooks\n */\nexport const getGuardContext = (\n  isAuthenticated: boolean = false,\n  isGuestMode: boolean = false,\n  isAdmin: boolean = false,\n  mode?: 'site' | 'app'\n): NavigationGuardContext => {\n  return {\n    isAuthenticated,\n    isGuestMode,\n    isAdmin,\n    mode,\n  };\n};\n\n\n\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationPersistence.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4530,4533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4530,4533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5816,5819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5816,5819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'__metadata' is assigned a value but never used.","line":181,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5926,5929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5926,5929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// navigationPersistence.ts\n// Utility for saving and loading React Navigation state\n// Supports both web (localStorage) and native (AsyncStorage)\n// Session-only persistence - state is cleared when app closes\n// Now includes validation and versioning\n\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { NavigationState } from '@react-navigation/native';\nimport { logger } from './loggerService';\nimport { validateNavigationState, cleanNavigationState, checkNavigationStateVersion } from './navigationStateValidator';\nimport { CURRENT_NAVIGATION_STATE_VERSION } from '../types/navigation';\n\nconst LOG_SOURCE = 'NavigationPersistence';\n\n// Storage key format: nav_state_{mode}_{userId}_{platform}\nconst getStorageKey = (mode: string, userId: string | null, platform: string): string => {\n  const userIdPart = userId || 'guest';\n  return `nav_state_${mode}_${userIdPart}_${platform}`;\n};\n\n// Debounce function to limit save frequency\nlet saveTimeout: ReturnType<typeof setTimeout> | null = null;\nconst DEBOUNCE_DELAY = 300; // ms\n\n/**\n * Save navigation state to persistent storage\n * Uses debouncing to avoid excessive I/O operations\n */\nexport const saveNavigationState = (\n  state: NavigationState | undefined,\n  mode: string,\n  userId: string | null\n): void => {\n  if (!state) {\n    return;\n  }\n\n  // Clear existing timeout\n  if (saveTimeout) {\n    clearTimeout(saveTimeout);\n  }\n\n  // Debounce the save operation\n  saveTimeout = setTimeout(() => {\n    try {\n      // Validate state before saving\n      const validation = validateNavigationState(state);\n      if (!validation.valid) {\n        logger.warn(LOG_SOURCE, 'Navigation state validation failed, not saving', {\n          errors: validation.errors,\n          warnings: validation.warnings,\n        });\n        return;\n      }\n\n      // Check version compatibility\n      const versionCheck = checkNavigationStateVersion(state);\n      if (!versionCheck.compatible) {\n        logger.warn(LOG_SOURCE, 'Navigation state version incompatible, not saving', {\n          error: versionCheck.error,\n        });\n        return;\n      }\n\n      // Clean state before saving\n      const cleanedState = cleanNavigationState(state);\n      if (!cleanedState) {\n        logger.warn(LOG_SOURCE, 'Navigation state cleaning failed, not saving');\n        return;\n      }\n\n      // Add version to state metadata\n      const stateWithVersion = {\n        ...cleanedState,\n        _metadata: {\n          version: CURRENT_NAVIGATION_STATE_VERSION,\n          savedAt: new Date().toISOString(),\n          mode,\n          userId,\n        },\n      };\n\n      const storageKey = getStorageKey(mode, userId, Platform.OS);\n      const stateString = JSON.stringify(stateWithVersion);\n\n      if (Platform.OS === 'web') {\n        // Web: synchronous localStorage\n        if (typeof window !== 'undefined' && window.localStorage) {\n          window.localStorage.setItem(storageKey, stateString);\n          logger.debug(LOG_SOURCE, 'Navigation state saved to localStorage', {\n            key: storageKey,\n            stateSize: stateString.length,\n            version: CURRENT_NAVIGATION_STATE_VERSION,\n          }, { periodic: true });\n        }\n      } else {\n        // Native: asynchronous AsyncStorage\n        AsyncStorage.setItem(storageKey, stateString).catch((error) => {\n          logger.error(LOG_SOURCE, 'Failed to save navigation state to AsyncStorage', { error });\n        });\n        logger.debug(LOG_SOURCE, 'Navigation state saved to AsyncStorage', {\n          key: storageKey,\n          stateSize: stateString.length,\n          version: CURRENT_NAVIGATION_STATE_VERSION,\n        }, { periodic: true });\n      }\n    } catch (error) {\n      logger.error(LOG_SOURCE, 'Error saving navigation state', { error });\n    }\n  }, DEBOUNCE_DELAY);\n};\n\n/**\n * Recursively checks if navigation state contains UserProfileScreen as active route\n * This helps prevent loading state that would lead to \"user not found\" screen\n */\nconst containsActiveUserProfileScreen = (state: NavigationState): boolean => {\n  if (!state || !state.routes || state.routes.length === 0) {\n    return false;\n  }\n\n  const activeRoute = state.routes[state.index || 0];\n  if (!activeRoute) {\n    return false;\n  }\n\n  // Check if current route is UserProfileScreen\n  if (activeRoute.name === 'UserProfileScreen') {\n    return true;\n  }\n\n  // Recursively check nested states\n  if (activeRoute.state) {\n    return containsActiveUserProfileScreen(activeRoute.state as any);\n  }\n\n  return false;\n};\n\n/**\n * Load navigation state from persistent storage\n * Returns null if no state is found or if there's an error\n */\nexport const loadNavigationState = async (\n  mode: string,\n  userId: string | null\n): Promise<NavigationState | null> => {\n  try {\n    const storageKey = getStorageKey(mode, userId, Platform.OS);\n    let stateString: string | null = null;\n\n    if (Platform.OS === 'web') {\n      // Web: synchronous localStorage\n      if (typeof window !== 'undefined' && window.localStorage) {\n        stateString = window.localStorage.getItem(storageKey);\n      }\n    } else {\n      // Native: asynchronous AsyncStorage\n      stateString = await AsyncStorage.getItem(storageKey);\n    }\n\n    if (!stateString) {\n      logger.debug(LOG_SOURCE, 'No saved navigation state found', { key: storageKey });\n      return null;\n    }\n\n    let state: NavigationState;\n    try {\n      state = JSON.parse(stateString) as NavigationState;\n    } catch (parseError) {\n      logger.error(LOG_SOURCE, 'Failed to parse navigation state', { error: parseError });\n      // Clear corrupted state\n      await clearNavigationState(mode, userId);\n      return null;\n    }\n\n    // Remove metadata if present (it's not part of NavigationState type)\n    const metadata = (state as any)._metadata;\n    if (metadata) {\n      const { _metadata: __metadata, ...stateWithoutMetadata } = state as any;\n      state = stateWithoutMetadata as NavigationState;\n    }\n\n    // Check if state contains active UserProfileScreen - if so, don't load it\n    // This prevents opening \"user not found\" screen after data reset\n    if (containsActiveUserProfileScreen(state)) {\n      logger.warn(LOG_SOURCE, 'Navigation state contains active UserProfileScreen, clearing to prevent \"user not found\" screen', {\n        key: storageKey,\n        savedUserId: metadata?.userId,\n        currentUserId: userId,\n      });\n      // Clear state with active UserProfileScreen\n      await clearNavigationState(mode, userId);\n      return null;\n    }\n\n    // Validate loaded state\n    const validation = validateNavigationState(state);\n    if (!validation.valid) {\n      logger.warn(LOG_SOURCE, 'Loaded navigation state is invalid, clearing it', {\n        errors: validation.errors,\n        warnings: validation.warnings,\n      });\n      // Clear invalid state\n      await clearNavigationState(mode, userId);\n      return null;\n    }\n\n    // Check version compatibility\n    const versionCheck = checkNavigationStateVersion(state);\n    if (!versionCheck.compatible) {\n      logger.warn(LOG_SOURCE, 'Loaded navigation state version is incompatible, clearing it', {\n        error: versionCheck.error,\n      });\n      // Clear incompatible state\n      await clearNavigationState(mode, userId);\n      return null;\n    }\n\n    // Clean state before returning\n    const cleanedState = cleanNavigationState(state);\n    if (!cleanedState) {\n      logger.warn(LOG_SOURCE, 'Failed to clean loaded navigation state, clearing it');\n      await clearNavigationState(mode, userId);\n      return null;\n    }\n\n    logger.debug(LOG_SOURCE, 'Navigation state loaded and validated from storage', {\n      key: storageKey,\n      stateSize: stateString.length,\n    });\n\n    return cleanedState;\n  } catch (error) {\n    logger.error(LOG_SOURCE, 'Error loading navigation state', { error });\n    return null;\n  }\n};\n\n/**\n * Clear navigation state for a specific mode and user\n * Useful when user logs out or mode changes\n */\nexport const clearNavigationState = async (\n  mode: string,\n  userId: string | null\n): Promise<void> => {\n  try {\n    const storageKey = getStorageKey(mode, userId, Platform.OS);\n\n    if (Platform.OS === 'web') {\n      // Web: synchronous localStorage\n      if (typeof window !== 'undefined' && window.localStorage) {\n        window.localStorage.removeItem(storageKey);\n        logger.debug(LOG_SOURCE, 'Navigation state cleared from localStorage', { key: storageKey });\n      }\n    } else {\n      // Native: asynchronous AsyncStorage\n      await AsyncStorage.removeItem(storageKey);\n      logger.debug(LOG_SOURCE, 'Navigation state cleared from AsyncStorage', { key: storageKey });\n    }\n  } catch (error) {\n    logger.error(LOG_SOURCE, 'Error clearing navigation state', { error });\n  }\n};\n\n/**\n * Clear all navigation states (useful for cleanup)\n */\nexport const clearAllNavigationStates = async (): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      // Web: remove all keys matching the pattern\n      if (typeof window !== 'undefined' && window.localStorage) {\n        const keys = Object.keys(window.localStorage);\n        keys.forEach((key) => {\n          if (key.startsWith('nav_state_')) {\n            window.localStorage.removeItem(key);\n          }\n        });\n        logger.debug(LOG_SOURCE, 'All navigation states cleared from localStorage');\n      }\n    } else {\n      // Native: get all keys and remove matching ones\n      const allKeys = await AsyncStorage.getAllKeys();\n      const navKeys = allKeys.filter((key) => key.startsWith('nav_state_'));\n      if (navKeys.length > 0) {\n        await AsyncStorage.multiRemove(navKeys);\n        logger.debug(LOG_SOURCE, 'All navigation states cleared from AsyncStorage', {\n          count: navKeys.length,\n        });\n      }\n    }\n  } catch (error) {\n    logger.error(LOG_SOURCE, 'Error clearing all navigation states', { error });\n  }\n};\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationQueue.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[649,652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[649,652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[813,816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[813,816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4026,4029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4026,4029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4296,4299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4296,4299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":178,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4629,4632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4629,4632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_action' is defined but never used.","line":199,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5791,5794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5791,5794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5797,5800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5797,5800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":243,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6413,6416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6413,6416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":246,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6542,6545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6542,6545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":253,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6662,6665],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6662,6665],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6966,6969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6966,6969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":281,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":281,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7241,7244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7241,7244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":307,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":307,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7685,7688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7685,7688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/navigationQueue.ts\n// Navigation queue manager - ensures navigation actions are executed sequentially\n// Prevents race conditions and navigation conflicts\n\nimport { NavigationContainerRef, StackActions } from '@react-navigation/native';\nimport {\n  QueuedNavigationAction,\n  NavigationQueueItem,\n  NavigateAction,\n  ResetAction,\n  ReplaceAction,\n  GoBackAction,\n  SetParamsAction\n} from '../types/navigation';\nimport { logger } from './loggerService';\n\nconst LOG_SOURCE = 'NavigationQueue';\n\nclass NavigationQueue {\n  private queue: NavigationQueueItem[] = [];\n  private isProcessing = false;\n  private navigationRef: NavigationContainerRef<any> | null = null;\n  private defaultPriority = 0;\n\n  /**\n   * Initialize the navigation queue with a navigation ref\n   */\n  initialize(ref: NavigationContainerRef<any> | null): void {\n    this.navigationRef = ref;\n    logger.debug(LOG_SOURCE, 'Navigation queue initialized', { hasRef: !!ref });\n  }\n\n  /**\n   * Check if navigation is ready\n   */\n  private isReady(): boolean {\n    return this.navigationRef !== null && this.navigationRef.isReady();\n  }\n\n  /**\n   * Add navigation action to queue\n   */\n  private enqueue(\n    action: QueuedNavigationAction,\n    priority: number = this.defaultPriority\n  ): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      const item: NavigationQueueItem = {\n        id: `${Date.now()}-${Math.random()}`,\n        action,\n        priority,\n        timestamp: Date.now(),\n        resolve,\n        reject,\n      };\n\n      // Insert based on priority (higher priority first)\n      const insertIndex = this.queue.findIndex(q => q.priority < priority);\n      if (insertIndex === -1) {\n        this.queue.push(item);\n      } else {\n        this.queue.splice(insertIndex, 0, item);\n      }\n\n      logger.debug(LOG_SOURCE, 'Navigation action enqueued', {\n        id: item.id,\n        type: action.type,\n        priority,\n        queueLength: this.queue.length,\n      });\n\n      // Start processing if not already processing\n      if (!this.isProcessing) {\n        this.processQueue();\n      }\n    });\n  }\n\n  /**\n   * Process the navigation queue\n   */\n  private async processQueue(): Promise<void> {\n    if (this.isProcessing) {\n      return;\n    }\n\n    this.isProcessing = true;\n\n    while (this.queue.length > 0) {\n      const item = this.queue.shift();\n      if (!item) {\n        break;\n      }\n\n      // Wait a bit to ensure previous navigation completed\n      await new Promise(resolve => setTimeout(resolve, 10));\n\n      // Check if navigation is ready\n      if (!this.isReady()) {\n        logger.warn(LOG_SOURCE, 'Navigation not ready, skipping action', {\n          id: item.id,\n          type: item.action.type,\n        });\n        item.reject(new Error('Navigation not ready'));\n        continue;\n      }\n\n      try {\n        await this.executeAction(item.action);\n        item.resolve();\n        logger.debug(LOG_SOURCE, 'Navigation action executed successfully', {\n          id: item.id,\n          type: item.action.type,\n        });\n      } catch (error) {\n        logger.error(LOG_SOURCE, 'Navigation action failed', {\n          id: item.id,\n          type: item.action.type,\n          error,\n        });\n        item.reject(error);\n      }\n    }\n\n    this.isProcessing = false;\n  }\n\n  /**\n   * Execute a navigation action\n   */\n  private async executeAction(action: QueuedNavigationAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    switch (action.type) {\n      case 'navigate':\n        await this.executeNavigate(action);\n        break;\n      case 'reset':\n        await this.executeReset(action);\n        break;\n      case 'replace':\n        await this.executeReplace(action);\n        break;\n      case 'goBack':\n        await this.executeGoBack(action);\n        break;\n      case 'setParams':\n        await this.executeSetParams(action);\n        break;\n      default:\n        throw new Error(`Unknown navigation action type: ${(action as any).type}`);\n    }\n  }\n\n  /**\n   * Execute navigate action\n   */\n  private async executeNavigate(action: NavigateAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    (this.navigationRef.navigate as any)(action.routeName, action.params);\n  }\n\n  /**\n   * Execute reset action\n   */\n  private async executeReset(action: ResetAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    this.navigationRef.reset({\n      index: action.index,\n      routes: action.routes as any,\n    });\n  }\n\n  /**\n   * Execute replace action\n   */\n  private async executeReplace(action: ReplaceAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    // Use StackActions.replace with dispatch since NavigationContainerRef doesn't have replace directly\n    this.navigationRef.dispatch(\n      StackActions.replace(action.routeName, action.params)\n    );\n  }\n\n  /**\n   * Execute goBack action\n   */\n  private async executeGoBack(_action: GoBackAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    this.navigationRef.goBack();\n  }\n\n  /**\n   * Execute setParams action\n   */\n  private async executeSetParams(action: SetParamsAction): Promise<void> {\n    if (!this.navigationRef) {\n      throw new Error('Navigation ref not initialized');\n    }\n\n    // setParams requires getting the current route first\n    const state = this.navigationRef.getRootState();\n    if (!state) {\n      throw new Error('Cannot get navigation state for setParams');\n    }\n\n    // Find the current route\n    const findCurrentRoute = (navState: any): any => {\n      if (!navState.routes || navState.routes.length === 0) {\n        return null;\n      }\n      const currentRoute = navState.routes[navState.index || 0];\n      if (currentRoute.state) {\n        return findCurrentRoute(currentRoute.state);\n      }\n      return currentRoute;\n    };\n\n    const currentRoute = findCurrentRoute(state);\n    if (!currentRoute) {\n      throw new Error('Cannot find current route for setParams');\n    }\n\n    // Use the route's key to set params\n    if (currentRoute.key) {\n      this.navigationRef.setParams({\n        ...currentRoute.params,\n        ...action.params,\n      } as any);\n    } else {\n      // Fallback: try to set params on the current route\n      this.navigationRef.setParams(action.params as any);\n    }\n  }\n\n  /**\n   * Public API: Navigate to a route\n   */\n  navigate(routeName: string, params?: Record<string, any>, priority: number = 0): Promise<void> {\n    return this.enqueue(\n      {\n        type: 'navigate',\n        routeName,\n        params,\n      },\n      priority\n    );\n  }\n\n  /**\n   * Public API: Reset navigation stack\n   */\n  reset(index: number, routes: Array<{ name: string; params?: Record<string, any> }>, priority: number = 1): Promise<void> {\n    return this.enqueue(\n      {\n        type: 'reset',\n        index,\n        routes,\n      },\n      priority\n    );\n  }\n\n  /**\n   * Public API: Replace current route\n   */\n  replace(routeName: string, params?: Record<string, any>, priority: number = 1): Promise<void> {\n    return this.enqueue(\n      {\n        type: 'replace',\n        routeName,\n        params,\n      },\n      priority\n    );\n  }\n\n  /**\n   * Public API: Go back\n   */\n  goBack(priority: number = 0): Promise<void> {\n    return this.enqueue(\n      {\n        type: 'goBack',\n      },\n      priority\n    );\n  }\n\n  /**\n   * Public API: Set params on current route\n   */\n  setParams(params: Record<string, any>, priority: number = 0): Promise<void> {\n    return this.enqueue(\n      {\n        type: 'setParams',\n        params,\n      },\n      priority\n    );\n  }\n\n  /**\n   * Clear the queue (useful for cleanup or error recovery)\n   */\n  clear(): void {\n    const items = [...this.queue];\n    this.queue = [];\n    items.forEach(item => {\n      item.reject(new Error('Navigation queue cleared'));\n    });\n    logger.warn(LOG_SOURCE, 'Navigation queue cleared', { clearedItems: items.length });\n  }\n\n  /**\n   * Get queue status (for debugging)\n   */\n  getStatus(): { queueLength: number; isProcessing: boolean; hasRef: boolean } {\n    return {\n      queueLength: this.queue.length,\n      isProcessing: this.isProcessing,\n      hasRef: this.navigationRef !== null,\n    };\n  }\n}\n\n// Singleton instance\nexport const navigationQueue = new NavigationQueue();\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/navigationStateValidator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1924,1927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1924,1927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3964,3967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3964,3967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_nestedIndex' is defined but never used.","line":114,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_index' is defined but never used.","line":121,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":38}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/navigationStateValidator.ts\n// Navigation state validation and versioning\n// Ensures navigation state is valid before saving/loading\n\nimport { NavigationState } from '@react-navigation/native';\nimport {\n  NavigationStateValidationResult,\n  NavigationStateVersion,\n  VALID_ROUTES_MAP,\n} from '../types/navigation';\nimport { logger } from './loggerService';\n\nconst LOG_SOURCE = 'NavigationStateValidator';\n\n// Maximum size for navigation state (in bytes)\nconst MAX_STATE_SIZE = 100 * 1024; // 100KB\n\n/**\n * Validates navigation state structure\n */\nexport const validateNavigationState = (\n  state: NavigationState | null | undefined\n): NavigationStateValidationResult => {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  if (!state) {\n    return { valid: false, errors: ['Navigation state is null or undefined'], warnings: [] };\n  }\n\n  // Check basic structure\n  if (!state.routes || !Array.isArray(state.routes)) {\n    errors.push('Navigation state must have a routes array');\n    return { valid: false, errors, warnings };\n  }\n\n  if (state.routes.length === 0) {\n    errors.push('Navigation state must have at least one route');\n    return { valid: false, errors, warnings };\n  }\n\n  if (typeof state.index !== 'number' || state.index < 0 || state.index >= state.routes.length) {\n    errors.push(`Navigation state index (${state.index}) is out of bounds for routes array (length: ${state.routes.length})`);\n    return { valid: false, errors, warnings };\n  }\n\n  // Check state size\n  try {\n    const stateString = JSON.stringify(state);\n    const stateSize = new Blob([stateString]).size;\n    if (stateSize > MAX_STATE_SIZE) {\n      warnings.push(`Navigation state size (${stateSize} bytes) exceeds recommended limit (${MAX_STATE_SIZE} bytes)`);\n    }\n  } catch {\n    warnings.push('Could not calculate navigation state size');\n  }\n\n  // Validate routes recursively\n  const validateRoute = (route: any, stackName: string = 'RootStack', depth: number = 0): void => {\n    if (depth > 10) {\n      errors.push('Navigation state has too many nested levels (max 10)');\n      return;\n    }\n\n    if (!route || typeof route !== 'object') {\n      errors.push(`Route at depth ${depth} is not a valid object`);\n      return;\n    }\n\n    if (!route.name || typeof route.name !== 'string') {\n      errors.push(`Route at depth ${depth} is missing a valid name`);\n      return;\n    }\n\n    // Check if route name is valid for the current stack\n    const validRoutes = VALID_ROUTES_MAP[stackName] || [];\n    if (validRoutes.length > 0 && !validRoutes.includes(route.name)) {\n      warnings.push(`Route \"${route.name}\" is not in the standard route list for ${stackName}`);\n    }\n\n    // Validate nested state\n    if (route.state) {\n      if (!route.state.routes || !Array.isArray(route.state.routes)) {\n        errors.push(`Route \"${route.name}\" has invalid nested state`);\n        return;\n      }\n\n      if (route.state.index !== undefined) {\n        if (typeof route.state.index !== 'number' ||\n          route.state.index < 0 ||\n          route.state.index >= route.state.routes.length) {\n          errors.push(`Route \"${route.name}\" has invalid nested state index`);\n          return;\n        }\n      }\n\n      // Determine nested stack name based on route name\n      let nestedStackName = stackName;\n      if (route.name === 'HomeStack' || route.name === 'HomeScreen') {\n        nestedStackName = 'HomeTabStack';\n      } else if (route.name === 'SearchTab') {\n        nestedStackName = 'SearchTabStack';\n      } else if (route.name === 'ProfileScreen') {\n        nestedStackName = 'ProfileTabStack';\n      } else if (route.name === 'DonationsTab') {\n        nestedStackName = 'DonationsStack';\n      } else if (route.name === 'AdminTab') {\n        nestedStackName = 'AdminStack';\n      } else if (route.name === 'BottomTab') {\n        nestedStackName = 'BottomTab';\n      }\n\n      // Validate nested routes\n      route.state.routes.forEach((nestedRoute: any, _nestedIndex: number) => {\n        validateRoute(nestedRoute, nestedStackName, depth + 1);\n      });\n    }\n  };\n\n  // Validate all routes\n  state.routes.forEach((route, _index) => {\n    validateRoute(route, 'RootStack', 0);\n  });\n\n  const valid = errors.length === 0;\n\n  if (!valid) {\n    logger.warn(LOG_SOURCE, 'Navigation state validation failed', { errors, warnings });\n  } else if (warnings.length > 0) {\n    logger.debug(LOG_SOURCE, 'Navigation state validation passed with warnings', { warnings });\n  }\n\n  return { valid, errors, warnings };\n};\n\n/**\n * Checks if navigation state version is compatible\n */\nexport const checkNavigationStateVersion = (\n  state: NavigationState | null | undefined\n): { compatible: boolean; version?: NavigationStateVersion; error?: string } => {\n  if (!state) {\n    return { compatible: false, error: 'State is null or undefined' };\n  }\n\n  // Check for version in state (stored in route params or state key)\n  // For now, we'll be lenient and accept states without version (backward compatibility)\n  // In the future, we can add version checking here\n\n  return { compatible: true };\n};\n\n/**\n * Validates and cleans navigation state\n * Removes invalid routes and fixes common issues\n */\nexport const cleanNavigationState = (\n  state: NavigationState | null | undefined\n): NavigationState | null => {\n  if (!state) {\n    return null;\n  }\n\n  const validation = validateNavigationState(state);\n  if (!validation.valid) {\n    logger.warn(LOG_SOURCE, 'Cannot clean invalid navigation state', { errors: validation.errors });\n    return null;\n  }\n\n  // For now, return state as-is if valid\n  // In the future, we can add cleaning logic here (e.g., remove invalid routes, fix indices)\n  return state;\n};\n\n/**\n * Checks if a route name is valid\n */\nexport const isValidRouteName = (routeName: string, stackName: string = 'RootStack'): boolean => {\n  const validRoutes = VALID_ROUTES_MAP[stackName] || [];\n  return validRoutes.includes(routeName);\n};\n\n/**\n * Gets all valid route names for a stack\n */\nexport const getValidRouteNames = (stackName: string): string[] => {\n  return VALID_ROUTES_MAP[stackName] || [];\n};\n\n\n\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/notificationService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[265,268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[265,268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1283,1286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1283,1286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4738,4741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4738,4741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":476,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":476,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12853,12856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12853,12856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":477,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":477,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12901,12904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12901,12904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":632,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":632,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17860,17863],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17860,17863],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":647,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":647,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18344,18347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18344,18347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":664,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":664,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18830,18833],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18830,18833],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":11,"column":21,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":11,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/notificationService.ts\nimport { Platform, Alert } from 'react-native';\nimport { db, DB_COLLECTIONS, DatabaseService } from './databaseService';\nimport colors from '../globals/colors';\n\n// Import notifications only on supported platforms\nlet Notifications: any = null;\nif (Platform.OS !== 'web') {\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    Notifications = require('expo-notifications');\n  } catch (error) {\n    console.warn('Failed to load expo-notifications:', error);\n  }\n}\n\n// --- Simple in-app notification event bus ---\ntype NotificationEventListener = (notification: NotificationData) => void;\nconst notificationEventListeners: Set<NotificationEventListener> = new Set();\n\nexport const subscribeToNotificationEvents = (listener: NotificationEventListener): (() => void) => {\n  notificationEventListeners.add(listener);\n  return () => notificationEventListeners.delete(listener);\n};\n\nconst emitNotificationEvent = (notification: NotificationData) => {\n  notificationEventListeners.forEach((listener) => {\n    try {\n      listener(notification);\n    } catch (err) {\n      console.warn('Notification listener error:', err);\n    }\n  });\n};\n\nexport interface NotificationData {\n  id: string;\n  title: string;\n  body: string;\n  data?: any;\n  type: 'message' | 'follow' | 'like' | 'comment' | 'system';\n  timestamp: string;\n  read: boolean;\n  userId: string;\n}\n\nexport interface NotificationSettings {\n  messages: boolean;\n  follows: boolean;\n  likes: boolean;\n  comments: boolean;\n  system: boolean;\n  sound: boolean;\n  vibration: boolean;\n}\n\n// Storage keys - deprecated, using database service now\n// const NOTIFICATIONS_COLLECTION = 'notifications';\n// const NOTIFICATION_SETTINGS = 'notification_settings';\n\nconst isNotificationsSupported = () => {\n  return Platform.OS === 'ios' || Platform.OS === 'android';\n};\n\n// Configure notification behavior ×¨×§ ×× ×”×¤×œ×˜×¤×•×¨××” ×ª×•××›×ª\nif (isNotificationsSupported() && Notifications) {\n  try {\n    Notifications.setNotificationHandler({\n      handleNotification: async () => ({\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: true,\n        shouldShowBanner: true,\n        shouldShowList: true,\n      }),\n    });\n  } catch (error) {\n    console.warn('Failed to set notification handler:', error);\n  }\n}\n\nexport const requestNotificationPermissions = async (): Promise<boolean> => {\n  try {\n    if (Platform.OS === 'web' || !Notifications) {\n      console.log('ğŸ”” Web platform or no notifications module - notifications not supported');\n      return false;\n    }\n\n    console.log('ğŸ”” Requesting notification permissions...');\n\n    const { status: existingStatus } = await Notifications.getPermissionsAsync();\n    let finalStatus = existingStatus;\n\n    if (existingStatus !== 'granted') {\n      const { status } = await Notifications.requestPermissionsAsync();\n      finalStatus = status;\n    }\n\n    if (finalStatus !== 'granted') {\n      console.log('âŒ Notification permissions not granted');\n      Alert.alert(\n        '×”×¨×©××•×ª ×”×ª×¨××•×ª',\n        '×›×“×™ ×œ×§×‘×œ ×”×ª×¨××•×ª ×¢×œ ×”×•×“×¢×•×ª ×—×“×©×•×ª ×•×¢×•×§×‘×™×, ×× × ××©×¨ ×’×™×©×” ×œ×”×ª×¨××•×ª ×‘×”×’×“×¨×•×ª ×”××›×©×™×¨',\n        [\n          { text: '×‘×™×˜×•×œ', style: 'cancel' },\n          { text: '×”×’×“×¨×•×ª', onPress: () => { } }\n        ]\n      );\n      return false;\n    }\n\n    console.log('âœ… Notification permissions granted');\n\n    if (Platform.OS === 'android') {\n      console.log('ğŸ¤– Android platform - setting up notification channel');\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: colors.error, // Red light\n      });\n    }\n\n    return true;\n  } catch (error) {\n    console.error('âŒ Request notification permissions error:', error);\n    return false;\n  }\n};\n\nexport const checkNotificationPermissions = async (): Promise<{\n  granted: boolean;\n  canAskAgain: boolean;\n  status: string;\n}> => {\n  try {\n    if (Platform.OS === 'web' || !Notifications) {\n      console.log('ğŸŒ Web platform or no notifications module - checking notification permissions (not supported)');\n      return {\n        granted: false,\n        canAskAgain: false,\n        status: 'web_not_supported',\n      };\n    }\n\n    const { status, canAskAgain } = await Notifications.getPermissionsAsync();\n    return {\n      granted: status === 'granted',\n      canAskAgain,\n      status,\n    };\n  } catch (error) {\n    console.error('âŒ Check notification permissions error:', error);\n    return {\n      granted: false,\n      canAskAgain: false,\n      status: 'unknown',\n    };\n  }\n};\n\nexport const sendLocalNotification = async (\n  title: string,\n  body: string,\n  data?: any,\n  type: NotificationData['type'] = 'system'\n): Promise<string> => {\n  try {\n    if (Platform.OS === 'web' || !Notifications) {\n      console.log('ğŸ”” Web platform or no notifications module - skipping local notification:', title);\n      return '';\n    }\n\n    const hasPermission = await requestNotificationPermissions();\n    if (!hasPermission) {\n      console.log('âŒ No notification permissions, cannot send notification');\n      return '';\n    }\n\n    const notificationId = await Notifications.scheduleNotificationAsync({\n      content: {\n        title,\n        body,\n        data: { ...data, type },\n        sound: true,\n        priority: Notifications.AndroidNotificationPriority.HIGH,\n      },\n      trigger: null, // Send immediately\n    });\n\n    console.log('âœ… Local notification sent:', notificationId);\n    return notificationId;\n  } catch (error) {\n    console.error('âŒ Send local notification error:', error);\n    return '';\n  }\n};\n\nexport const sendMessageNotification = async (\n  senderName: string,\n  messageText: string,\n  conversationId: string,\n  userId: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending message notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.messages) {\n      console.log('ğŸ”• Message notifications disabled');\n      return;\n    }\n\n    const title = `×”×•×“×¢×” ×—×“×©×” ×-${senderName}`;\n    const body = messageText.length > 50 ? `${messageText.substring(0, 50)}...` : messageText;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   conversationId,\n    //   senderName,\n    //   type: 'message',\n    // }, 'message');\n\n    await saveNotification({\n      id: `msg_${Date.now()}`,\n      title,\n      body,\n      data: { conversationId, senderName },\n      type: 'message',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send message notification error:', error);\n  }\n};\n\nexport const sendFollowNotification = async (\n  followerName: string,\n  userId: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending follow notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.follows) {\n      console.log('ğŸ”• Follow notifications disabled');\n      return;\n    }\n\n    const title = '×¢×•×§×‘ ×—×“×©!';\n    const body = `${followerName} ×”×ª×—×™×œ ×œ×¢×§×•×‘ ××—×¨×™×š`;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   followerName,\n    //   type: 'follow',\n    // }, 'follow');\n\n    await saveNotification({\n      id: `follow_${Date.now()}`,\n      title,\n      body,\n      data: { followerName },\n      type: 'follow',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send follow notification error:', error);\n  }\n};\n\nexport const sendLikeNotification = async (\n  likerName: string,\n  postType: string,\n  userId: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending like notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.likes) {\n      console.log('ğŸ”• Like notifications disabled');\n      return;\n    }\n\n    const title = '×œ×™×™×§ ×—×“×©!';\n    const body = `${likerName} ××”×‘ ××ª ×”${postType} ×©×œ×š`;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   likerName,\n    //   postType,\n    //   type: 'like',\n    // }, 'like');\n\n    await saveNotification({\n      id: `like_${Date.now()}`,\n      title,\n      body,\n      data: { likerName, postType },\n      type: 'like',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send like notification error:', error);\n  }\n};\n\nexport const sendCommentNotification = async (\n  commenterName: string,\n  postType: string,\n  commentText: string,\n  userId: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending comment notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.comments) {\n      console.log('ğŸ”• Comment notifications disabled');\n      return;\n    }\n\n    const title = '×ª×’×•×‘×” ×—×“×©×”!';\n    const body = `${commenterName} ×”×’×™×‘ ×¢×œ ×”${postType} ×©×œ×š: ${commentText.substring(0, 30)}${commentText.length > 30 ? '...' : ''}`;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   commenterName,\n    //   postType,\n    //   commentText,\n    //   type: 'comment',\n    // }, 'comment');\n\n    await saveNotification({\n      id: `comment_${Date.now()}`,\n      title,\n      body,\n      data: { commenterName, postType, commentText },\n      type: 'comment',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send comment notification error:', error);\n  }\n};\n\nexport const sendTaskNotification = async (\n  taskTitle: string,\n  taskDescription: string,\n  userId: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending task notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.system) {\n      console.log('ğŸ”• System notifications disabled');\n      return;\n    }\n\n    const title = '××©×™××” ×—×“×©×”!';\n    const body = `${taskTitle}: ${taskDescription.substring(0, 50)}${taskDescription.length > 50 ? '...' : ''}`;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   taskTitle,\n    //   taskDescription,\n    //   type: 'system',\n    // }, 'system');\n\n    await saveNotification({\n      id: `task_${Date.now()}`,\n      title,\n      body,\n      data: { taskTitle, taskDescription },\n      type: 'system',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send task notification error:', error);\n  }\n};\n\nexport const sendDonationNotification = async (\n  donorName: string,\n  donationType: string,\n  userId: string,\n  amount?: string\n): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - sending donation notification');\n    }\n\n    const settings = await getNotificationSettings(userId);\n    if (!settings.system) {\n      console.log('ğŸ”• System notifications disabled');\n      return;\n    }\n\n    const title = '×ª×¨×•××” ×—×“×©×”!';\n    const body = amount\n      ? `${donorName} ×ª×¨× ${amount} ${donationType}`\n      : `${donorName} ×ª×¨× ${donationType}`;\n\n    // Local notification removed - will be handled by receiver's listener\n    // await sendLocalNotification(title, body, {\n    //   donorName,\n    //   donationType,\n    //   amount,\n    //   type: 'system',\n    // }, 'system');\n\n    await saveNotification({\n      id: `donation_${Date.now()}`,\n      title,\n      body,\n      data: { donorName, donationType, amount },\n      type: 'system',\n      timestamp: new Date().toISOString(),\n      read: false,\n      userId,\n    });\n\n  } catch (error) {\n    console.error('âŒ Send donation notification error:', error);\n  }\n};\n\nexport const getNotificationSettings = async (userId?: string): Promise<NotificationSettings> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - getting notification settings');\n    }\n\n    if (!userId) {\n      console.log('ğŸ”” No userId provided, returning default settings');\n      return {\n        messages: true,\n        follows: true,\n        likes: true,\n        comments: true,\n        system: true,\n        sound: true,\n        vibration: true,\n      };\n    }\n\n    const settings = await db.getUserSettings(userId);\n    if (settings && (settings as any).notifications) {\n      return (settings as any).notifications;\n    }\n\n    const defaultSettings: NotificationSettings = {\n      messages: true,\n      follows: true,\n      likes: true,\n      comments: true,\n      system: true,\n      sound: true,\n      vibration: true,\n    };\n\n    const userSettings = { notifications: defaultSettings };\n    await db.updateUserSettings(userId, userSettings);\n    return defaultSettings;\n  } catch (error) {\n    console.error('âŒ Get notification settings error:', error);\n    return {\n      messages: true,\n      follows: true,\n      likes: true,\n      comments: true,\n      system: true,\n      sound: true,\n      vibration: true,\n    };\n  }\n};\n\nexport const updateNotificationSettings = async (settings: Partial<NotificationSettings>, userId?: string): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - updating notification settings');\n    }\n\n    if (!userId) {\n      console.log('ğŸ”” No userId provided, cannot update settings');\n      return;\n    }\n\n    const currentSettings = await getNotificationSettings(userId);\n    const updatedSettings = { ...currentSettings, ...settings };\n\n    const userSettings = { notifications: updatedSettings };\n    await db.updateUserSettings(userId, userSettings);\n    console.log('âœ… Notification settings updated');\n  } catch (error) {\n    console.error('âŒ Update notification settings error:', error);\n  }\n};\n\nexport const saveNotification = async (notification: NotificationData): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - saving notification to history');\n    }\n\n    await db.createNotification(notification.userId, notification.id, notification);\n    console.log('âœ… Notification saved to history');\n\n    // Emit in-app event so UI can update in real-time\n    emitNotificationEvent(notification);\n  } catch (error) {\n    console.error('âŒ Save notification error:', error);\n  }\n};\n\nexport const getNotifications = async (userId: string): Promise<NotificationData[]> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - getting notifications for user:', userId);\n    }\n\n    const notifications = await db.getUserNotifications(userId);\n    return (notifications as NotificationData[]) || [];\n  } catch (error) {\n    console.error('âŒ Get notifications error:', error);\n    return [];\n  }\n};\n\nexport const markNotificationAsRead = async (notificationId: string, userId: string): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - marking notification as read:', notificationId);\n    }\n\n    await db.markNotificationAsRead(userId, notificationId);\n    console.log('âœ… Notification marked as read');\n  } catch (error) {\n    console.error('âŒ Mark notification as read error:', error);\n  }\n};\n\nexport const markAllNotificationsAsRead = async (userId: string): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - marking all notifications as read for user:', userId);\n    }\n\n    const notifications = await getNotifications(userId);\n    for (const notification of notifications) {\n      await db.markNotificationAsRead(userId, notification.id);\n    }\n    console.log('âœ… All notifications marked as read');\n  } catch (error) {\n    console.error('âŒ Mark all notifications as read error:', error);\n  }\n};\n\nexport const deleteNotification = async (notificationId: string, userId: string): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - deleting notification:', notificationId);\n    }\n\n    await db.deleteNotification(userId, notificationId);\n    console.log('âœ… Notification deleted');\n  } catch (error) {\n    console.error('âŒ Delete notification error:', error);\n  }\n};\n\nexport const clearAllNotifications = async (userId: string): Promise<void> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - clearing all notifications for user:', userId);\n    }\n\n    const notifications = await getNotifications(userId);\n    const notificationIds = notifications.map(n => n.id);\n    await DatabaseService.batchDelete(DB_COLLECTIONS.NOTIFICATIONS, userId, notificationIds);\n    console.log('âœ… All notifications cleared');\n  } catch (error) {\n    console.error('âŒ Clear all notifications error:', error);\n  }\n};\n\nexport const getUnreadNotificationCount = async (userId: string): Promise<number> => {\n  try {\n    if (Platform.OS === 'web') {\n      console.log('ğŸŒ Web platform - getting unread notification count for user:', userId);\n    }\n\n    const notifications = await getNotifications(userId);\n    const unreadCount = notifications.filter(notification => !notification.read).length;\n    console.log('ğŸ“Š Unread notifications count:', unreadCount);\n    return unreadCount;\n  } catch (error) {\n    console.error('âŒ Get unread notification count error:', error);\n    return 0;\n  }\n};\n\nexport const setupNotificationListener = (callback: (notification: any) => void) => {\n  if (!isNotificationsSupported() || !Notifications) {\n    console.log('ğŸ”” Notifications not supported on this platform');\n    return null;\n  }\n\n  if (Platform.OS === 'web') {\n    console.log('ğŸŒ Web platform - setting up notification listener (will be ignored)');\n    return null;\n  }\n\n  const subscription = Notifications.addNotificationReceivedListener(callback);\n  return subscription;\n};\n\nexport const setupNotificationResponseListener = (callback: (response: any) => void) => {\n  if (!isNotificationsSupported()) {\n    console.log('ğŸ”” Notifications not supported on this platform');\n    return null;\n  }\n\n  if (Platform.OS === 'web') {\n    console.log('ğŸŒ Web platform - setting up notification response listener (will be ignored)');\n    return null;\n  }\n\n  const subscription = Notifications.addNotificationResponseReceivedListener(callback);\n  return subscription;\n};\n\n// --- Global Notification Listener ---\n\nlet notificationPollingInterval: any = null;\nconst seenNotificationIds = new Set<string>();\n\nexport const startNotificationListener = (userId: string) => {\n  if (Platform.OS === 'web') return () => { };\n\n  console.log('ğŸ”” Starting notification listener for user:', userId);\n\n  // Initial load to populate seen set (so we don't notify for old stuff)\n  getNotifications(userId).then(notifications => {\n    notifications.forEach(n => seenNotificationIds.add(n.id));\n  });\n\n  // Stop existing interval if any\n  if (notificationPollingInterval) {\n    clearInterval(notificationPollingInterval);\n  }\n\n  // Poll every 5 seconds\n  notificationPollingInterval = setInterval(async () => {\n    try {\n      const notifications = await getNotifications(userId);\n\n      // Check for new unread notifications\n      for (const notification of notifications) {\n        if (!notification.read && !seenNotificationIds.has(notification.id)) {\n          // New notification found!\n          console.log('ğŸ”” New notification found via listener:', notification.id);\n          seenNotificationIds.add(notification.id);\n\n          // Trigger local notification\n          await sendLocalNotification(\n            notification.title,\n            notification.body,\n            notification.data,\n            notification.type\n          );\n\n          // Emit event to update UI immediately if app is open\n          emitNotificationEvent(notification);\n        } else if (seenNotificationIds.has(notification.id) && notification.read) {\n          // Optional: could remove from set, but keeping it prevents re-notifying if marked unread again (though rare)\n        }\n      }\n\n      // Cleanup seen set for deleted notifications (optional optimization)\n      if (seenNotificationIds.size > 100) {\n        const currentIds = new Set(notifications.map(n => n.id));\n        for (const id of seenNotificationIds) {\n          if (!currentIds.has(id)) {\n            seenNotificationIds.delete(id);\n          }\n        }\n      }\n\n    } catch (error) {\n      console.warn('âš ï¸ Notification listener polling error:', error);\n    }\n  }, 5000);\n\n  return () => {\n    if (notificationPollingInterval) {\n      clearInterval(notificationPollingInterval);\n      notificationPollingInterval = null;\n    }\n    console.log('ğŸ”• Notification listener stopped');\n  };\n};","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/postsService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[396,399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[396,399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4387,4390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4387,4390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":178,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4783,4786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4783,4786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_offset' is assigned a value but never used.","line":188,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":188,"endColumn":82},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":188,"column":114,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":117,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5130,5133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5130,5133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5450,5453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5450,5453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6668,6671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6668,6671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":231,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6702,6705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6702,6705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":341,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10101,10104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10101,10104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10133,10136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10133,10136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Service for handling post likes and comments operations\n// - Provides: toggleLike, getComments, addComment, deleteComment, toggleCommentLike\n// - Communicates with: /api/posts/* endpoints on the backend\n\nimport { API_BASE_URL } from './config.constants';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport interface PostsApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  total?: number;\n}\n\nexport interface LikeResponse {\n  post_id: string;\n  is_liked: boolean;\n  likes_count: number;\n}\n\nexport interface CommentUser {\n  id: string;\n  name: string;\n  avatar_url: string;\n}\n\nexport interface Comment {\n  id: string;\n  post_id: string;\n  user_id: string;\n  text: string;\n  likes_count: number;\n  is_liked: boolean;\n  created_at: string;\n  updated_at: string;\n  user: CommentUser;\n}\n\nexport interface CommentResponse extends Comment {\n  comments_count: number;\n}\n\nexport interface CommentLikeResponse {\n  comment_id: string;\n  is_liked: boolean;\n  likes_count: number;\n}\n\nclass PostsService {\n  private baseURL: string;\n\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  private async getAuthToken(): Promise<string | null> {\n    try {\n      // Try to get JWT access token from AsyncStorage\n      const jwtToken = await AsyncStorage.getItem('jwt_access_token');\n\n      if (jwtToken) {\n        // Check if token is expired\n        const expiresAt = await AsyncStorage.getItem('jwt_token_expires_at');\n        if (expiresAt && parseInt(expiresAt) > Date.now()) {\n          return jwtToken;\n        }\n      }\n\n      // Fallback: Try to get Firebase ID token\n      try {\n        const { getFirebase } = await import('./firebaseClient');\n        const { getAuth } = await import('firebase/auth');\n        const { app } = getFirebase();\n        const auth = getAuth(app);\n        const user = auth.currentUser;\n\n        if (user) {\n          const token = await user.getIdToken();\n          return token;\n        }\n      } catch (firebaseError) {\n        console.warn('Firebase auth not available:', firebaseError);\n      }\n    } catch (error) {\n      console.warn('Failed to get auth token:', error);\n    }\n\n    return null;\n  }\n\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<PostsApiResponse<T>> {\n    try {\n      const url = `${this.baseURL}${endpoint}`;\n\n      // Get authentication token\n      const authToken = await this.getAuthToken();\n\n      const config: RequestInit = {\n        headers: {\n          'Content-Type': 'application/json',\n          ...(authToken ? { 'Authorization': `Bearer ${authToken}` } : {}),\n          ...options.headers,\n        },\n        ...options,\n      };\n\n      console.log(`ğŸŒ PostsService Request: ${config.method || 'GET'} ${url}`, {\n        hasAuth: !!authToken,\n        authTokenLength: authToken?.length || 0\n      });\n\n      const response = await fetch(url, config);\n      const data = await response.json();\n\n      if (!response.ok) {\n        console.error(`âŒ PostsService Error: ${response.status}`, {\n          status: response.status,\n          statusText: response.statusText,\n          data,\n          endpoint,\n          hasAuth: !!authToken\n        });\n        return {\n          success: false,\n          error: data.message || data.error || `HTTP ${response.status}: ${response.statusText}`,\n        };\n      }\n\n      console.log(`âœ… PostsService Response: ${endpoint}`, data);\n      return data;\n    } catch (error) {\n      console.error(`âŒ PostsService Network Error:`, error);\n      return {\n        success: false,\n        error: 'Network error - please check your connection',\n      };\n    }\n  }\n\n  // ============================================\n  // POSTS\n  // ============================================\n\n  /**\n   * Get main feed posts\n   * @param limit - Max number of results\n   * @param offset - Pagination offset\n   * @param userId - Optional: filter by user ID (for profile feed) or for \"friends\" logic checking (backend dependant)\n   * @param postType - Optional: filter by post type (e.g., 'item', 'ride', 'donation')\n   * @param itemId - Optional: filter by item_id\n   * @param rideId - Optional: filter by ride_id\n   */\n  async getPosts(\n    limit = 20,\n    offset = 0,\n    userId?: string,\n    postType?: string,\n    itemId?: string,\n    rideId?: string\n  ): Promise<PostsApiResponse<any[]>> {\n    let url = `/api/posts?limit=${limit}&offset=${offset}`;\n    if (userId) {\n      url += `&user_id=${userId}`;\n    }\n    if (postType) {\n      url += `&post_type=${encodeURIComponent(postType)}`;\n    }\n    if (itemId) {\n      url += `&item_id=${encodeURIComponent(itemId)}`;\n    }\n    if (rideId) {\n      url += `&ride_id=${encodeURIComponent(rideId)}`;\n    }\n    return this.request<any[]>(url);\n  }\n\n  /**\n   * Get specific user's posts\n   * @param targetUserId - The ID of the user whose posts to fetch\n   * @param viewerId - The ID of the current viewer (to check likes)\n   * @param limit\n   * @param offset\n   */\n  async getUserPosts(targetUserId: string, viewerId?: string, limit = 20, _offset = 0): Promise<PostsApiResponse<any[]>> {\n    let url = `/api/posts/user/${targetUserId}?limit=${limit}`;\n    if (viewerId) {\n      url += `&viewer_id=${viewerId}`;\n    }\n    // Note: Pagination offset support might need to be added to backend getUserPosts if missing, \n    // likely it supports it or we rely on limit for now.\n    return this.request<any[]>(url);\n  }\n\n  // ============================================\n  // LIKES\n  // ============================================\n\n  /**\n   * Toggle like on a post (like if not liked, unlike if liked)\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user\n   * @returns {Promise<PostsApiResponse<LikeResponse>>}\n   */\n  async togglePostLike(postId: string, userId: string): Promise<PostsApiResponse<LikeResponse>> {\n    return this.request<LikeResponse>(`/api/posts/${postId}/like`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId }),\n    });\n  }\n\n  /**\n   * Check if a user has liked a post\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user\n   */\n  async checkUserLikedPost(postId: string, userId: string): Promise<PostsApiResponse<{ is_liked: boolean }>> {\n    return this.request<{ is_liked: boolean }>(`/api/posts/${postId}/likes/check/${userId}`);\n  }\n\n  /**\n   * Get list of users who liked a post\n   * @param postId - The ID of the post\n   * @param limit - Max number of results (default 50)\n   * @param offset - Pagination offset (default 0)\n   */\n  async getPostLikes(postId: string, limit = 50, offset = 0): Promise<PostsApiResponse<any[]>> {\n    return this.request<any[]>(`/api/posts/${postId}/likes?limit=${limit}&offset=${offset}`);\n  }\n\n  // ============================================\n  // COMMENTS\n  // ============================================\n\n  /**\n   * Get all comments for a post\n   * @param postId - The ID of the post\n   * @param viewerId - Optional viewer ID to check if they liked each comment\n   * @param limit - Max number of results (default 50)\n   * @param offset - Pagination offset (default 0)\n   */\n  async getPostComments(\n    postId: string,\n    viewerId?: string,\n    limit = 50,\n    offset = 0\n  ): Promise<PostsApiResponse<Comment[]>> {\n    let url = `/api/posts/${postId}/comments?limit=${limit}&offset=${offset}`;\n    if (viewerId) {\n      url += `&viewer_id=${viewerId}`;\n    }\n    return this.request<Comment[]>(url);\n  }\n\n  /**\n   * Add a comment to a post\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user\n   * @param text - The comment text (max 2000 characters)\n   */\n  async addComment(postId: string, userId: string, text: string): Promise<PostsApiResponse<CommentResponse>> {\n    return this.request<CommentResponse>(`/api/posts/${postId}/comments`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId, text }),\n    });\n  }\n\n  /**\n   * Update a comment (only owner can update)\n   * @param postId - The ID of the post\n   * @param commentId - The ID of the comment\n   * @param userId - The ID of the user (must be comment owner)\n   * @param text - The new comment text\n   */\n  async updateComment(\n    postId: string,\n    commentId: string,\n    userId: string,\n    text: string\n  ): Promise<PostsApiResponse<Comment>> {\n    return this.request<Comment>(`/api/posts/${postId}/comments/${commentId}`, {\n      method: 'PUT',\n      body: JSON.stringify({ user_id: userId, text }),\n    });\n  }\n\n  /**\n   * Delete a comment (only owner can delete)\n   * @param postId - The ID of the post\n   * @param commentId - The ID of the comment\n   * @param userId - The ID of the user (must be comment owner)\n   */\n  async deleteComment(\n    postId: string,\n    commentId: string,\n    userId: string\n  ): Promise<PostsApiResponse<{ deleted_comment_id: string; comments_count: number }>> {\n    return this.request<{ deleted_comment_id: string; comments_count: number }>(\n      `/api/posts/${postId}/comments/${commentId}?user_id=${userId}`,\n      { method: 'DELETE' }\n    );\n  }\n\n  /**\n   * Toggle like on a comment\n   * @param postId - The ID of the post\n   * @param commentId - The ID of the comment\n   * @param userId - The ID of the user\n   */\n  async toggleCommentLike(\n    postId: string,\n    commentId: string,\n    userId: string\n  ): Promise<PostsApiResponse<CommentLikeResponse>> {\n    return this.request<CommentLikeResponse>(\n      `/api/posts/${postId}/comments/${commentId}/like`,\n      {\n        method: 'POST',\n        body: JSON.stringify({ user_id: userId }),\n      }\n    );\n  }\n\n  // ============================================\n  // POST MANAGEMENT\n  // ============================================\n\n  /**\n   * Update a post (title, description, image)\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user (must be post owner)\n   * @param updates - Object containing fields to update\n   */\n  async updatePost(\n    postId: string,\n    userId: string,\n    updates: { title?: string; description?: string; image?: string }\n  ): Promise<PostsApiResponse<any>> {\n    return this.request<any>(`/api/posts/${postId}`, {\n      method: 'PUT',\n      body: JSON.stringify({ user_id: userId, ...updates }),\n    });\n  }\n\n  /**\n   * Hide a post (soft delete - sets status to 'hidden')\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user (must be post owner)\n   */\n  async hidePost(postId: string, userId: string): Promise<PostsApiResponse<{ status: string }>> {\n    return this.request<{ status: string }>(`/api/posts/${postId}/hide`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId }),\n    });\n  }\n\n  /**\n   * Unhide a post (restore from hidden status)\n   * @param postId - The ID of the post\n   * @param userId - The ID of the user (must be post owner)\n   */\n  async unhidePost(postId: string, userId: string): Promise<PostsApiResponse<{ status: string }>> {\n    return this.request<{ status: string }>(`/api/posts/${postId}/unhide`, {\n      method: 'POST',\n      body: JSON.stringify({ user_id: userId }),\n    });\n  }\n}\n\n// Export singleton instance\nexport const postsService = new PostsService();\n\n// Export default for backward compatibility\nexport default postsService;\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/profileUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/restAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1763,1766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1763,1766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5273,5276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5273,5276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5508,5511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5508,5511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// File overview:\n// - Purpose: Low-level REST adapter used by `DatabaseService` to call generic /api collection endpoints and auth.\n// - Reached from: `DatabaseService` when `USE_BACKEND` is true, and some direct auth flows.\n// - Provides: create/read/update/delete/list for collections; auth check/register/login; generic POST helper.\n// utils/restAdapter.ts\nimport { API_BASE_URL } from './config.constants';\n\nimport { apiService } from './apiService';\n\nexport class RestAdapter {\n  private _baseUrl: string | null = null;\n\n  constructor(baseUrl?: string) {\n    this._baseUrl = baseUrl || null;\n  }\n\n  private get baseUrl(): string {\n    // If baseUrl was provided in constructor, use it\n    if (this._baseUrl !== null) {\n      return this._baseUrl.replace(/\\/$/, '');\n    }\n\n    // Try environment variables first (highest priority - for local development)\n    if (typeof process !== 'undefined' && process.env?.EXPO_PUBLIC_API_BASE_URL) {\n      return process.env.EXPO_PUBLIC_API_BASE_URL.replace(/\\/$/, '');\n    }\n\n    // For web, detect environment from domain at runtime\n    if (typeof window !== 'undefined' && window.location) {\n      const hostname = window.location.hostname;\n\n      // If on localhost, use local server\n      if (hostname === 'localhost' || hostname === '127.0.0.1' || hostname === '0.0.0.0') {\n        return 'http://localhost:3001';\n      }\n\n      // If on dev domain, use dev server\n      if (hostname.includes('dev.')) {\n        return 'https://kc-mvp-server-development.up.railway.app';\n      }\n\n      // Otherwise use production server\n      return 'https://kc-mvp-server-production.up.railway.app';\n    }\n\n    // Fallback to config constant\n    return API_BASE_URL.replace(/\\/$/, '');\n  }\n\n  async post<T>(path: string, body?: any): Promise<T> {\n    return this.http<T>(path, {\n      method: 'POST',\n      body: body !== undefined ? JSON.stringify(body) : undefined,\n    });\n  }\n\n  private async http<T>(path: string, init?: RequestInit): Promise<T> {\n    const url = `${this.baseUrl}${path}`;\n    const method = (init?.method || 'GET').toUpperCase();\n    const startedAt = Date.now();\n\n    // Add authentication token\n    const token = await apiService.getAuthToken();\n\n    // High-signal client log for production debugging\n     \n    console.log(`ğŸŒ REST â†’ ${method} ${url}`, init?.body ? { body: init?.body } : '', token ? '(authenticated)' : '(no auth)');\n\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      ...(token ? { 'Authorization': `Bearer ${token}` } : {}),\n      ...(init?.headers as Record<string, string> || {}),\n    };\n\n    const res = await fetch(url, {\n      headers,\n      mode: 'cors',\n      ...init,\n    });\n    const ms = Date.now() - startedAt;\n     \n    console.log(`ğŸŒ REST â† ${method} ${url} ${res.status} (${ms}ms)`);\n    if (!res.ok) {\n      const text = await res.text();\n       \n      console.error(`âŒ REST ${method} ${url} -> HTTP ${res.status}:`, text);\n      throw new Error(`HTTP ${res.status}: ${text}`);\n    }\n    if (res.status === 204) return undefined as unknown as T;\n\n    // Check if response has content before parsing JSON\n    const contentLength = res.headers.get('content-length');\n    const contentType = res.headers.get('content-type');\n\n    if (contentLength === '0' || (!contentType?.includes('application/json') && !contentType?.includes('text/json'))) {\n      // Return empty object for non-JSON or empty responses\n      return {} as unknown as T;\n    }\n\n    const text = await res.text();\n    if (!text.trim()) {\n      // Return empty object for empty responses\n      return {} as unknown as T;\n    }\n\n    try {\n      return JSON.parse(text) as T;\n    } catch (error) {\n      console.error(`âŒ JSON Parse Error for ${method} ${url}:`, error, 'Response text:', text);\n      return {} as unknown as T;\n    }\n  }\n\n  async create<T>(collection: string, userId: string, itemId: string, data: T): Promise<void> {\n    await this.http(`/api/collections/${collection}`, {\n      method: 'POST',\n      body: JSON.stringify({ id: itemId, userId, data }),\n    });\n  }\n\n  async read<T>(collection: string, userId: string, itemId: string): Promise<T | null> {\n    return this.http<T | null>(`/api/collections/${collection}/${encodeURIComponent(userId)}/${encodeURIComponent(itemId)}`);\n  }\n\n  async update<T>(collection: string, userId: string, itemId: string, data: Partial<T>): Promise<void> {\n    await this.http(`/api/collections/${collection}/${encodeURIComponent(userId)}/${encodeURIComponent(itemId)}`, {\n      method: 'PUT',\n      body: JSON.stringify({ data }),\n    });\n  }\n\n  async delete(collection: string, userId: string, itemId: string): Promise<void> {\n    await this.http(`/api/collections/${collection}/${encodeURIComponent(userId)}/${encodeURIComponent(itemId)}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async list<T>(collection: string, userId: string): Promise<T[]> {\n    return this.http<T[]>(`/api/collections/${collection}?userId=${encodeURIComponent(userId)}`);\n  }\n\n  // Auth endpoints\n  async checkEmail(email: string): Promise<{ exists: boolean }> {\n    return this.http(`/auth/check-email?email=${encodeURIComponent(email)}`);\n  }\n\n  async register(email: string, password: string, name?: string): Promise<{ ok?: boolean; user?: any; error?: string }> {\n    return this.http(`/auth/register`, {\n      method: 'POST',\n      body: JSON.stringify({ email, password, name }),\n    });\n  }\n\n  async login(email: string, password: string): Promise<{ ok?: boolean; user?: any; error?: string }> {\n    return this.http(`/auth/login`, {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n    });\n  }\n}\n\nexport const restAdapter = new RestAdapter();\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/statsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/storageService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2051,2054],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2051,2054],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":118,"column":33,"nodeType":"Literal","messageId":"unexpected","endLine":118,"endColumn":52},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":160,"column":14,"nodeType":"Literal","messageId":"unexpected","endLine":160,"endColumn":33},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":174,"column":74,"nodeType":"Literal","messageId":"unexpected","endLine":174,"endColumn":93}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/storageService.ts\nimport { getFirebase } from './firebaseClient';\nimport { ref, uploadBytes, uploadBytesResumable, getDownloadURL, UploadTaskSnapshot } from 'firebase/storage';\nimport { IS_DEVELOPMENT } from './config.constants';\n\nexport interface UploadResult {\n  url: string;\n  fullPath: string;\n}\n\nexport interface UploadProgressCallback {\n  (progress: number): void; // progress is 0-100\n}\n\nexport async function uploadFile(\n  fullPath: string,\n  uri: string,\n  contentType?: string\n): Promise<UploadResult> {\n  const { storage } = getFirebase();\n  const storageRef = ref(storage, fullPath);\n\n  const response = await fetch(uri);\n  const blob = await response.blob();\n\n  await uploadBytes(storageRef, blob, { contentType });\n  const url = await getDownloadURL(storageRef);\n  return { url, fullPath };\n}\n\nexport async function uploadFileWithProgress(\n  fullPath: string,\n  uri: string,\n  contentType: string | undefined,\n  onProgress?: UploadProgressCallback\n): Promise<UploadResult> {\n  const { storage } = getFirebase();\n  const storageRef = ref(storage, fullPath);\n\n  let blob: Blob;\n\n  try {\n    // Handle different URI types\n    if (uri.startsWith('blob:') || uri.startsWith('data:')) {\n      // For blob or data URIs, fetch directly\n      const response = await fetch(uri);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch file: ${response.status} ${response.statusText}`);\n      }\n      blob = await response.blob();\n    } else if (uri.startsWith('file://') || uri.startsWith('/')) {\n      // For file:// URIs (mobile) or absolute paths\n      const response = await fetch(uri);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch file: ${response.status} ${response.statusText}`);\n      }\n      blob = await response.blob();\n    } else {\n      // For HTTP/HTTPS URIs\n      const response = await fetch(uri);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch file: ${response.status} ${response.statusText}`);\n      }\n      blob = await response.blob();\n    }\n  } catch (fetchError: any) {\n    console.error('âŒ Error fetching file for upload:', fetchError);\n    throw new Error(`Failed to read file: ${fetchError.message || 'Unknown error'}`);\n  }\n\n  const uploadTask = uploadBytesResumable(storageRef, blob, { contentType });\n\n  return new Promise((resolve, reject) => {\n    uploadTask.on(\n      'state_changed',\n      (snapshot: UploadTaskSnapshot) => {\n        if (snapshot.totalBytes > 0 && onProgress) {\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          onProgress(progress);\n        }\n      },\n      (error) => {\n        console.error('âŒ Firebase Storage upload error:', error);\n        // Provide more detailed error message\n        const errorMessage = error.message || error.code || 'Unknown error';\n        if (error.code === 'storage/unauthorized' || errorMessage.includes('CORS')) {\n          reject(new Error('CORS error: Please check Firebase Storage Rules to allow uploads from your origin'));\n        } else {\n          reject(error);\n        }\n      },\n      async () => {\n        try {\n          const url = await getDownloadURL(uploadTask.snapshot.ref);\n          resolve({ url, fullPath });\n        } catch (error) {\n          reject(error);\n        }\n      }\n    );\n  });\n}\n\nexport function sanitizeFileName(fileName: string): string {\n  // Extract extension\n  const lastDot = fileName.lastIndexOf('.');\n  const extension = lastDot > 0 ? fileName.substring(lastDot).toLowerCase() : '';\n  const nameWithoutExt = lastDot > 0 ? fileName.substring(0, lastDot) : fileName;\n\n  // Remove special characters: <>:\"/\\|?*\n  let sanitized = nameWithoutExt.replace(/[<>:\"/\\\\|?*]/g, '_');\n\n  // Replace spaces with underscores\n  sanitized = sanitized.replace(/\\s+/g, '_');\n\n  // Remove non-ASCII characters (Hebrew, Arabic, etc.) and replace with underscore\n  // Keep only ASCII letters, numbers, underscores, hyphens, and dots\n  sanitized = sanitized.replace(/[^\\u0000-\\u007F]/g, '_');\n\n  // Remove multiple consecutive underscores\n  sanitized = sanitized.replace(/_+/g, '_');\n\n  // Remove leading/trailing underscores\n  sanitized = sanitized.replace(/^_+|_+$/g, '');\n\n  // If name is empty after sanitization, use 'file'\n  if (!sanitized || sanitized.length === 0) {\n    sanitized = 'file';\n  }\n\n  // Add timestamp to prevent collisions\n  const timestamp = Date.now();\n  const finalName = sanitized || 'file';\n\n  return `${finalName}_${timestamp}${extension}`;\n}\n\nexport function buildChatFilePath(conversationId: string, messageId: string, fileName: string) {\n  const sanitizedFileName = sanitizeFileName(fileName);\n  const prefix = IS_DEVELOPMENT ? 'dev-' : '';\n  return `${prefix}chat/${conversationId}/${messageId}/${sanitizedFileName}`;\n}\n\nexport function buildUserImagePath(userId: string, fileName: string) {\n  const prefix = IS_DEVELOPMENT ? 'dev-' : '';\n  return `${prefix}images/users/${userId}/${fileName}`;\n}\n\nexport function buildDonationImagePath(donationId: string, fileName: string) {\n  const prefix = IS_DEVELOPMENT ? 'dev-' : '';\n  return `${prefix}images/donations/${donationId}/${fileName}`;\n}\n\nexport function buildAdminFilePath(folderPath: string, fileId: string, fileName: string): string {\n  // Sanitize folder path - remove leading/trailing slashes and special characters\n  let sanitizedFolder = folderPath\n    .replace(/^\\/+|\\/+$/g, '') // Remove leading/trailing slashes\n    .replace(/[<>:\"/\\\\|?*]/g, '_') // Remove special characters\n    .replace(/\\s+/g, '_') // Replace spaces with underscores\n    .replace(/[^\\u0000-\\u007F]/g, '_'); // Remove non-ASCII characters (Hebrew, etc.)\n\n  // Remove multiple consecutive underscores\n  sanitizedFolder = sanitizedFolder.replace(/_+/g, '_');\n\n  // Remove leading/trailing underscores\n  sanitizedFolder = sanitizedFolder.replace(/^_+|_+$/g, '');\n\n  // Default to 'root' if empty\n  if (!sanitizedFolder || sanitizedFolder.length === 0) {\n    sanitizedFolder = 'root';\n  }\n\n  // Sanitize fileId to ensure it's safe\n  const sanitizedFileId = fileId.replace(/[<>:\"/\\\\|?*\\s]/g, '_').replace(/[^\\u0000-\\u007F]/g, '_');\n\n  const sanitizedFileName = sanitizeFileName(fileName);\n  const prefix = IS_DEVELOPMENT ? 'dev-' : '';\n  return `${prefix}admin-files/${sanitizedFolder}/${sanitizedFileId}/${sanitizedFileName}`;\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/toastService.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/navesarussi/KC/DEV/MVP/utils/versionChecker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]

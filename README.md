# 🌟 Karma Community Project

ברוכים הבאים לפרויקט **Karma Community**!
זהו פרויקט מונו-ריפו (Mono-repo style) הכולל אפליקציית מובייל (React Native/Expo) ושרת Backend (NestJS).

מסמך זה יסביר **צעד אחר צעד** כיצד להקים את סביבת הפיתוח, עם דגש מיוחד על משתמשי Windows.

---

## 📂 מבנה הפרויקט

הפרויקט מחולק לשתי תתי-מערכות עיקריות:

- **MVP/** 📱: צד הלקוח (האפליקציה). כתובה ב-React Native עם Expo. עובדת באייפון, אנדרואיד ודפדפן אינטרנט.
- **KC-MVP-server/** 🚀: צד השרת (Backend). המוח של המערכת. שומר נתונים ב-DB ושולח אותם לאפליקציה.

---

## 🛠 דרישות קדם (Prerequisites) - מה צריך להתקין?

### 🪟 משתמשי Windows (הסבר מפורט ביותר)

אם יש לך ווינדוס, אתה חייב להתקין את הכלים הבאים **בסדר הזה**. אל תדלג!

#### 1. התקנת Git (ו-git bash)
אנחנו צריכים כלי שיודע להריץ פקודות כמו בלינוקס/מק.
1.  כנס לאתר: [git-scm.com](https://git-scm.com/download/win)
2.  לחץ על **Download**.
3.  תוריד את הקובץ (לרוב נקרא `64-bit Git for Windows Setup`).
4.  תפעיל את ההתקנה ותעשה "Next", "Next", "Next"... עד הסוף. **אל תשנה שום דבר בהגדרות**.
5.  בסוף ההתקנה, חפש במחשב תוכנה בשם **Git Bash**. זו התוכנה שנשתמש בה להריץ פקודות.

#### 2. התקנת Node.js
זו הסביבה שמריצה את הקוד שלנו (JavaScript).
1.  כנס לאתר: [nodejs.org](https://nodejs.org/en)
2.  תוריד את גרסת **LTS** (הגרסה היציבה, בצד שמאל). כרגע זה גרסה 20 או 22.
3.  תפעיל את ההתקנה ותעשה "Next" עד הסוף.
4.  כדי לבדוק שזה עובד: פתח את **Git Bash** וכתוב: `node -v`. אתה אמור לראות מספר גרסה (למשל `v20.10.0`).

#### 3. התקנת Docker Desktop
זה הכלי שמריץ את מסד הנתונים (Database) במחשב שלך בלי שתצטרך להתקין אותו מסובך.
1.  כנס לאתר: [docker.com](https://www.docker.com/products/docker-desktop/)
2.  לחץ על **Download for Windows**.
3.  תתקין את התוכנה. **שים לב:** ייתכן שהוא יבקש ממך להתקין משהו שנקרא WSL 2. תאשר לו ותעקוב אחרי ההוראות שלו (אולי יבקש ריסט למחשב).
4.  אחרי ההתקנה והריסט, **תפעיל את התוכנה Docker Desktop**. חכה שהיא תעלה.
5.  בצד שמאל למטה בתוכנה צריך להיות כתוב בירוק "Engine running". אם זה אדום או כתום - זה לא עובד.

---

### 🍎 משתמשי macOS
הסביבה הכי נוחה לפיתוח.

1.  **Node.js**: מומלץ להתקין דרך Homebrew: `brew install node`.
2.  **Watchman**: `brew install watchman` (מונע באגים ב-React Native).
3.  **Git**: `brew install git`.
4.  **Docker Desktop**: [הורדה והתקנה](https://www.docker.com/products/docker-desktop/). **חובה להפעיל את האפליקציה אחרי ההתקנה!**
5.  **Xcode**: אם אתה רוצה להריץ סימולטור של אייפון. תוריד מה-App Store.

---

### 🐧 משתמשי Linux
למתקדמים.

1.  **Node.js**: גרסה 18 ומעלה.
2.  **Git**: `sudo apt install git`.
3.  **Docker**: `sudo apt install docker.io`. **חשוב:** תוסיף את המשתמש שלך לקבוצת docker: `sudo usermod -aG docker $USER`.

---

## 🚀 איך מתחילים לעבוד? (הדרך הקלה והאוטומטית)

כתבנו סקריפט מיוחד שעושה את כל העבודה השחורה בשבילך.
הוא באופן אוטומטי:
1.  מרים את הדוקר (מסד נתונים).
2.  מתקין את כל החבילות שהשרת צריך.
3.  מפעיל את השרת.
4.  מפעיל את האפליקציה.

### הוראות הרצה (שלב אחרי שלב):

#### שלב 1: פתח את הטרמינל
*   **ב-Windows:** פתח את התוכנה **Git Bash** (אל תשתמש ב-CMD רגיל או PowerShell).
*   **ב-Mac/Linux:** פתח את ה-Terminal הרגיל.

#### שלב 2: נווט לתיקייה של הפרויקט
אתה צריך להיות בתיקייה הראשית `KC/DEV`.
למשל:
```bash
cd /c/Users/YourName/KC/DEV
```
(תחליף את הנתיב לנתיב האמיתי אצלך).

#### שלב 3: הרץ את פקודת הקסם
פשוט תעתיק את השורה הזאת לטרמינל ותלחץ ENTER:

```bash
bash MVP/scripts/run-local-e2e.sh
```

#### שלב 4: מה קורה עכשיו?
*   אתה תראה הרבה טקסט רץ. זה תקין. הוא מתקין ובונה דברים.
*   אם הוא מבקש סיסמה (ב-Mac/Linux) - תתן לו.
*   **בסוף התהליך:** הדפדפן שלך אמור להיפתח אוטומטית בכתובת `http://localhost:8081`.
*   אם הדפדפן לא נפתח, תפתח אותו ידנית ותכנס לכתובת הזאת.

**זהו! האפליקציה עובדת.** 🎉
אתה אמור לראות את מסך הכניסה או דף הבית של האפליקציה.

---

## 🏗️ התקנה ידנית (רק אם האוטומטי לא עובד)

אם הסקריפט למעלה נכשל, הנה איך עושים את זה "כמו פעם", ידנית.

### שלב 1: Server (השרת)

1.  פתח טרמינל וכנס לתיקיית השרת:
    ```bash
    cd KC-MVP-server
    ```
2.  תתקין חבילות:
    ```bash
    npm install
    ```
3.  תפעיל את הדוקר (מסדי נתונים):
    ```bash
    npm run docker:up
    ```
4.  תאתחל את מסד הנתונים (שיצור טבלאות):
    ```bash
    npm run init:db
    ```
5.  תפעיל את השרת:
    ```bash
    npm run start:dev
    ```
    עכשיו השרת רץ. **אל תסגור את הטרמינל הזה!**

### שלב 2: Client (האפליקציה)

1.  פתח **טרמינל חדש** (New Terminal window).
2.  כנס לתיקיית האפליקציה:
    ```bash
    cd MVP
    ```
3.  תתקין חבילות:
    ```bash
    npm install
    ```
4.  תפעיל את האפליקציה במצב מקומי:
    ```bash
    npm run start:local
    ```
5.  עכשיו תלחץ על המקש `w` כדי לפתוח בדפדפן.

---

## ❓ פתרון בעיות (Troubleshooting) - בעיקר ל-Windows

### 🔴 "הפקודה docker לא נמצאה" / "docker not found"
**הבעיה:** הדוקר לא מותקן או לא פועל.
**הפתרון:**
1.  וודא שהתקנת **Docker Desktop**.
2.  וודא **שהפעלת** את התוכנה Docker Desktop והיא רצה ברקע (חפש סמל של לוויתן קטן ליד השעון למטה).

### 🔴 שגיאות מוזרות של "Permission denied" או "EACCESS"
**הבעיה:** לווינדוס יש בעיות הרשאות לפעמים.
**הפתרון:** נסה לסגור את ה-Git Bash ולפתוח אותו מחדש, הפעם קליק ימני -> "Run as Administrator".

### 🔴 הסקריפט נתקע על "Waiting for Postgres..."
**הבעיה:** הדוקר לא מצליח לעלות.
**הפתרון:**
1.  תפתח את תוכנת Docker Desktop.
2.  אם אתה רואה קונטיינרים ישנים (ברשימה באמצע) - תמחק אותם (סמל של פח זבל).
3.  נסה להריץ את הסקריפט שוב.

### 🔴 האפליקציה בדפדפן תקועה על מסך לבן או "Network Error"
**הבעיה:** האפליקציה לא מצליחה לדבר עם השרת.
**הפתרון:**
1.  וודא שהשרת (בטרמינל הראשון) עדיין רץ ולא קרס.
2.  תנסה לרענן את הדף בדפדפן.
3.  תנסה לפתוח בגלישה בסתר (Incognito).

---

## 🌍 סביבות עבודה (Environments)

חשוב מאוד להבין שאנחנו עובדים עם **3 סביבות שונות**.
וודא תמיד שאתה יודע איפה אתה נמצא לפני שאתה עושה שינויים!

### 1. Local Development 💻 (הסביבה המקומית)
- **מה זה:** הקוד שרץ אצלך במחשב כרגע (localhost).
- **למה זה משמש:** פיתוח, ניסויים, "לשבור דברים".
- **איך מזהים:** הכתובת היא `localhost:8081`.
- **הבאנר למעלה:** ירוק 🟩 (כתוב "נתונים מבודדים").

### 2. Cloud Development ☁️ (סביבת פיתוח בענן)
- **מה זה:** גרסה חיה באינטרנט, אבל מיועדת לפיתוח ובדיקות.
- **כתובת:** [https://dev.karma-community-kc.com](https://dev.karma-community-kc.com)
- **למה זה משמש:** כדי להראות לחברים/בודקים פיצ'רים חדשים לפני שמשחררים לכולם.
- **הבאנר למעלה:** ירוק 🟩 (גם כאן כתוב "נתונים מבודדים").
- **מסד נתונים:** נפרד לחלוטין מהפרודקשן! ( KC-DEV-Postgres ).

### 3. Production 🚨 (הסביבה האמיתית)
- **מה זה:** האפליקציה האמיתית שהלקוחות משתמשים בה.
- **כתובת:** [https://karma-community-kc.com](https://karma-community-kc.com)
- **הבאנר למעלה:** ❌ **אין באנר!**
- **חוק ברזל:** כאן אסור לעשות ניסויים. כל שינוי משפיע על משתמשים אמיתיים.

### 💡 איך לזכור?
*   **רואה ירוק? 🟩** - תרגיש חופשי, אתה בטוח.
*   **לא רואה ירוק?** - תעצור ותחשוב פעמיים.

בהצלחה! 👨‍💻
